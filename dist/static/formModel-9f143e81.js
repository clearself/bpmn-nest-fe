import{h as e,_ as W,$ as n}from"./index-8bef1c81.js";import{s as G,Q as P,m as j}from"./antDesign-5cb4b61a.js";import{d as H,f as h,W as p,X as l,a0 as b,k as o,Z as t,u as _,a1 as v,F as S,a7 as $,a3 as ie,a5 as T,r as Q,h as _e,c as ne,G as r,Y as d,a8 as D,g as re}from"./vue-d39115fd.js";import{l as ue,e as le,a as me}from"./server-0d880333.js";import"./echarts-de64fab6.js";const X=[],ce=Object.assign({"../../assets/icons/403.svg":()=>e(()=>import("./403-16be6825.js"),[]),"../../assets/icons/404.svg":()=>e(()=>import("./404-492b6295.js"),[]),"../../assets/icons/bug.svg":()=>e(()=>import("./bug-1e30cb4c.js"),[]),"../../assets/icons/build.svg":()=>e(()=>import("./build-0a6b76ff.js"),[]),"../../assets/icons/button.svg":()=>e(()=>import("./button-6f62dc0e.js"),[]),"../../assets/icons/cascader.svg":()=>e(()=>import("./cascader-435a3931.js"),[]),"../../assets/icons/chart.svg":()=>e(()=>import("./chart-f0097195.js"),[]),"../../assets/icons/checkbox.svg":()=>e(()=>import("./checkbox-23272260.js"),[]),"../../assets/icons/clipboard.svg":()=>e(()=>import("./clipboard-2458e37f.js"),[]),"../../assets/icons/code.svg":()=>e(()=>import("./code-162fa67d.js"),[]),"../../assets/icons/color.svg":()=>e(()=>import("./color-3383f9ff.js"),[]),"../../assets/icons/component.svg":()=>e(()=>import("./component-a16f6850.js"),[]),"../../assets/icons/dashboard.svg":()=>e(()=>import("./dashboard-bd6bbcbd.js"),[]),"../../assets/icons/date-range.svg":()=>e(()=>import("./date-range-72443d67.js"),[]),"../../assets/icons/date.svg":()=>e(()=>import("./date-2e87219e.js"),[]),"../../assets/icons/dict.svg":()=>e(()=>import("./dict-c1434a03.js"),[]),"../../assets/icons/documentation.svg":()=>e(()=>import("./documentation-32401c36.js"),[]),"../../assets/icons/download.svg":()=>e(()=>import("./download-c9a47913.js"),[]),"../../assets/icons/drag.svg":()=>e(()=>import("./drag-e749fc82.js"),[]),"../../assets/icons/druid.svg":()=>e(()=>import("./druid-41832065.js"),[]),"../../assets/icons/edit.svg":()=>e(()=>import("./edit-79135d26.js"),[]),"../../assets/icons/education.svg":()=>e(()=>import("./education-3b88fb47.js"),[]),"../../assets/icons/email.svg":()=>e(()=>import("./email-f4dcd891.js"),[]),"../../assets/icons/example.svg":()=>e(()=>import("./example-446e4491.js"),[]),"../../assets/icons/excel.svg":()=>e(()=>import("./excel-6d7c0d9f.js"),[]),"../../assets/icons/exit-fullscreen.svg":()=>e(()=>import("./exit-fullscreen-0176c0a2.js"),[]),"../../assets/icons/eye-open.svg":()=>e(()=>import("./eye-open-9ed1e86a.js"),[]),"../../assets/icons/eye.svg":()=>e(()=>import("./eye-a65767fd.js"),[]),"../../assets/icons/form.svg":()=>e(()=>import("./form-2c232ded.js"),[]),"../../assets/icons/fullscreen.svg":()=>e(()=>import("./fullscreen-204cd4eb.js"),[]),"../../assets/icons/github.svg":()=>e(()=>import("./github-621ffc74.js"),[]),"../../assets/icons/guide.svg":()=>e(()=>import("./guide-2596d330.js"),[]),"../../assets/icons/icon.svg":()=>e(()=>import("./icon-f4a8c747.js"),[]),"../../assets/icons/input.svg":()=>e(()=>import("./input-0d3522b4.js"),[]),"../../assets/icons/international.svg":()=>e(()=>import("./international-96d569fc.js"),[]),"../../assets/icons/job.svg":()=>e(()=>import("./job-e20f9d89.js"),[]),"../../assets/icons/language.svg":()=>e(()=>import("./language-77bd4589.js"),[]),"../../assets/icons/link.svg":()=>e(()=>import("./link-36a61d8c.js"),[]),"../../assets/icons/list.svg":()=>e(()=>import("./list-0a03e617.js"),[]),"../../assets/icons/lock.svg":()=>e(()=>import("./lock-91609385.js"),[]),"../../assets/icons/log.svg":()=>e(()=>import("./log-52ae306a.js"),[]),"../../assets/icons/logininfor.svg":()=>e(()=>import("./logininfor-c4083031.js"),[]),"../../assets/icons/message.svg":()=>e(()=>import("./message-d7d4ad9a.js"),[]),"../../assets/icons/money.svg":()=>e(()=>import("./money-1a2072c1.js"),[]),"../../assets/icons/monitor.svg":()=>e(()=>import("./monitor-cf94eec2.js"),[]),"../../assets/icons/nested.svg":()=>e(()=>import("./nested-8e5eff37.js"),[]),"../../assets/icons/number.svg":()=>e(()=>import("./number-47bbf50c.js"),[]),"../../assets/icons/online.svg":()=>e(()=>import("./online-08b626dd.js"),[]),"../../assets/icons/password.svg":()=>e(()=>import("./password-47ea2388.js"),[]),"../../assets/icons/pdf.svg":()=>e(()=>import("./pdf-ae990e68.js"),[]),"../../assets/icons/people.svg":()=>e(()=>import("./people-d637cb24.js"),[]),"../../assets/icons/peoples.svg":()=>e(()=>import("./peoples-d7228472.js"),[]),"../../assets/icons/phone.svg":()=>e(()=>import("./phone-cb45325c.js"),[]),"../../assets/icons/post.svg":()=>e(()=>import("./post-7bba7d0a.js"),[]),"../../assets/icons/qq.svg":()=>e(()=>import("./qq-0ecb5d6e.js"),[]),"../../assets/icons/question.svg":()=>e(()=>import("./question-bfcb1b79.js"),[]),"../../assets/icons/radio.svg":()=>e(()=>import("./radio-498702c8.js"),[]),"../../assets/icons/rate.svg":()=>e(()=>import("./rate-ecb860ef.js"),[]),"../../assets/icons/redis-list.svg":()=>e(()=>import("./redis-list-89ee315b.js"),[]),"../../assets/icons/redis.svg":()=>e(()=>import("./redis-59fb4eb2.js"),[]),"../../assets/icons/row.svg":()=>e(()=>import("./row-89d0eb05.js"),[]),"../../assets/icons/search.svg":()=>e(()=>import("./search-7308057a.js"),[]),"../../assets/icons/select.svg":()=>e(()=>import("./select-59779e01.js"),[]),"../../assets/icons/server.svg":()=>e(()=>import("./server-8d68083a.js"),[]),"../../assets/icons/shopping.svg":()=>e(()=>import("./shopping-6ffeb273.js"),[]),"../../assets/icons/size.svg":()=>e(()=>import("./size-319fabe1.js"),[]),"../../assets/icons/skill.svg":()=>e(()=>import("./skill-a9edfef6.js"),[]),"../../assets/icons/slider.svg":()=>e(()=>import("./slider-d6ffa486.js"),[]),"../../assets/icons/star.svg":()=>e(()=>import("./star-01d41a88.js"),[]),"../../assets/icons/swagger.svg":()=>e(()=>import("./swagger-0ee25cb0.js"),[]),"../../assets/icons/switch.svg":()=>e(()=>import("./switch-607f9d49.js"),[]),"../../assets/icons/system.svg":()=>e(()=>import("./system-69f26f5b.js"),[]),"../../assets/icons/tab.svg":()=>e(()=>import("./tab-f885f0a5.js"),[]),"../../assets/icons/table.svg":()=>e(()=>import("./table-da00b713.js"),[]),"../../assets/icons/textarea.svg":()=>e(()=>import("./textarea-d759090d.js"),[]),"../../assets/icons/theme.svg":()=>e(()=>import("./theme-96a6072b.js"),[]),"../../assets/icons/time-range.svg":()=>e(()=>import("./time-range-57e97dd4.js"),[]),"../../assets/icons/time.svg":()=>e(()=>import("./time-3d406234.js"),[]),"../../assets/icons/tool.svg":()=>e(()=>import("./tool-62ee3a37.js"),[]),"../../assets/icons/tree-table.svg":()=>e(()=>import("./tree-table-68edf802.js"),[]),"../../assets/icons/tree.svg":()=>e(()=>import("./tree-b0ea17a9.js"),[]),"../../assets/icons/upload.svg":()=>e(()=>import("./upload-0ffe5455.js"),[]),"../../assets/icons/user.svg":()=>e(()=>import("./user-22318a19.js"),[]),"../../assets/icons/validCode.svg":()=>e(()=>import("./validCode-68e5e9db.js"),[]),"../../assets/icons/wechat.svg":()=>e(()=>import("./wechat-0460198d.js"),[]),"../../assets/icons/zip.svg":()=>e(()=>import("./zip-088cfe6a.js"),[])});for(const V in ce){const w=V.split("assets/icons/")[1].split(".svg")[0];X.push(w)}const U=X,pe={class:"icon-body"},de={class:"icon-list"},ve={class:"list-container"},Ee=["onClick"],ge=H({__name:"index",props:{activeIcon:{type:String}},emits:["selected"],setup(V,{expose:w,emit:F}){const A=h(""),L=h(U),x=F;function u(){L.value=U,A.value&&(L.value=U.filter(I=>I.indexOf(A.value)!==-1))}function M(I){x("selected",I),document.body.click()}function R(){A.value="",L.value=U}return w({reset:R}),(I,k)=>{const s=p("a-input"),q=p("icon-svg");return l(),b("div",pe,[o(s,{value:A.value,"onUpdate:value":k[0]||(k[0]=g=>A.value=g),class:"icon-search",allowClear:"",placeholder:"请输入图标名称",onClear:u,onInput:u},{prefix:t(()=>[o(_(G))]),_:1},8,["value"]),v("div",de,[v("div",ve,[(l(!0),b(S,null,$(L.value,(g,B)=>(l(),b("div",{class:"icon-item-wrapper",key:B,onClick:C=>M(g)},[v("div",{class:ie(["icon-item",{active:V.activeIcon===g}])},[o(q,{name:g,style:{height:"25px",width:"16px"}},null,8,["name"]),v("span",null,T(g),1)],2)],8,Ee))),128))])])])}}});const Te=W(ge,[["__scopeId","data-v-17c9015c"]]),Ie={class:"modal-wrapper",ref:"mymodal"},fe={class:"ub"},De=H({__name:"formModel",props:{show:{type:Boolean,default:!1},status:{type:String,default:"add"},curData:{type:Object,default:()=>{}},sysNormalDisable:{type:Array,default:()=>[]}},emits:["update:show","success"],setup(V,{emit:w}){const{proxy:F}=re(),{sys_show_hide:A,sys_normal_disable:L}=F.useDict("sys_show_hide","sys_normal_disable"),x=w,u=V,M=h(),R=h(),I=h(!1),k=h([]),s=Q({menuId:"",parentId:0,menuName:"",menuType:"M",icon:"",orderNum:0,isFrame:"1",path:"",component:"",perms:"",query:"",visible:"0",isCache:"0",status:"0"}),q=()=>{s.menuId="",s.parentId=0,s.menuName="",s.menuType="M",s.icon="",s.orderNum=0,s.isFrame="1",s.path="",s.component="",s.perms="",s.query="",s.isCache="0",s.visible="0",s.status="0"},g=Q({parentId:[{required:!0,message:n("selectTips"),trigger:["blur","change"]}],menuName:[{required:!0,message:n("inputTips"),trigger:"blur"}],orderNum:[{required:!0,message:n("inputTips"),trigger:"blur"}],path:[{required:!0,message:n("inputTips"),trigger:"blur"}]});_e(()=>{u.show&&u.status==="edit"&&(s.menuId=u.curData.menuId,s.parentId=u.curData.parentId,s.menuName=u.curData.menuName,s.menuType=u.curData.menuType,s.icon=u.curData.icon,s.orderNum=u.curData.orderNum,s.isFrame=u.curData.isFrame,s.path=u.curData.path,s.component=u.curData.component,s.perms=u.curData.perms,s.query=u.curData.query,s.isCache=u.curData.isCache,s.visible=u.curData.visible,s.status=u.curData.status)}),(async()=>{const c=await ue();if((c==null?void 0:c.code)===200){const i=c.data.map(m=>(m.menuName&&(m.menuName=n(m.menuName)),m)),E={menuId:0,menuName:n("fly.menu.main.category"),children:[]};E.children=F.handleTree(i,"menuId"),k.value.push(E)}})();const C=ne({get(){return u.show},set(c){x("update:show",c)}});function z(){R==null||R.value.reset(),I.value=!0}function Y(c){s.icon=c,I.value=!1}const Z=()=>{q()},J=async()=>{M.value.validate().then(async()=>{var i;const c={parentId:s.parentId,menuName:s.menuName,orderNum:s.orderNum,menuType:s.menuType,icon:s.icon,isFrame:s.isFrame,path:s.path,component:s.component,perms:s.perms,query:s.query,visible:s.visible,isCache:s.isCache,status:s.status};if(u.status==="edit"){c.menuId=(i=u==null?void 0:u.curData)==null?void 0:i.menuId;const E=await le(c);(E==null?void 0:E.code)===200&&(C.value=!1,j.success(n("opeateSuccess")),x("success"))}else{const E=await me(c);(E==null?void 0:E.code)===200&&(C.value=!1,j.success(n("opeateSuccess")),x("success"))}}).catch(c=>{})};return(c,i)=>{const E=p("a-tree-select"),m=p("a-form-item"),f=p("a-radio"),N=p("a-radio-group"),K=p("icon-svg"),y=p("a-input"),ee=p("a-popover"),se=p("a-input-number"),O=p("a-tooltip"),te=p("a-form"),oe=p("watermark"),ae=p("a-modal");return l(),b("div",Ie,[o(ae,{destroyOnClose:"",getContainer:()=>c.$refs.mymodal,open:C.value,"onUpdate:open":i[14]||(i[14]=a=>C.value=a),title:V.status==="add"?_(n)("opts.add"):_(n)("opts.edit"),width:"700px",cancelText:_(n)("opts.cancel"),okText:_(n)("opts.sure"),afterClose:Z,onOk:J},{default:t(()=>[o(oe,null,{default:t(()=>[o(te,{class:"w100",ref_key:"formRef",ref:M,model:s,labelWrap:"",labelCol:{style:{width:"110px"}}},{default:t(()=>[o(m,{label:_(n)("menu.columns.parentMenu"),name:"parentId",rules:g.parentId},{default:t(()=>[o(E,{value:s.parentId,"onUpdate:value":i[0]||(i[0]=a=>s.parentId=a),"show-search":"",style:{width:"100%"},"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:_(n)("selectTips"),"allow-clear":"","tree-data":k.value,"field-names":{children:"children",label:"menuName",value:"menuId"},"tree-node-filter-prop":"menuName"},null,8,["value","placeholder","tree-data"])]),_:1},8,["label","rules"]),o(m,{label:_(n)("menu.columns.menuType")},{default:t(()=>[o(N,{value:s.menuType,"onUpdate:value":i[1]||(i[1]=a=>s.menuType=a),name:"menuType"},{default:t(()=>[o(f,{value:"M"},{default:t(()=>[r("目录")]),_:1}),o(f,{value:"C"},{default:t(()=>[r("菜单")]),_:1}),o(f,{value:"F"},{default:t(()=>[r("按钮")]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),s.menuType!="F"?(l(),d(m,{key:0,label:_(n)("menu.columns.menuIcon")},{default:t(()=>[o(ee,{open:I.value,"onUpdate:open":i[3]||(i[3]=a=>I.value=a),placement:"bottom",trigger:"click",onShow:z},{content:t(()=>[o(Te,{style:{width:"540px"},ref_key:"iconSelectRef",ref:R,onSelected:Y,"active-icon":s.icon},null,8,["active-icon"])]),default:t(()=>[o(y,{value:s.icon,"onUpdate:value":i[2]||(i[2]=a=>s.icon=a),placeholder:"点击选择图标",onBlur:z,readonly:""},{prefix:t(()=>[v("div",fe,[s.icon?(l(),d(K,{key:0,name:s.icon,style:{height:"16px",width:"16px"}},null,8,["name"])):(l(),d(_(G),{key:1,style:{height:"16px",width:"16px"}}))])]),_:1},8,["value"])]),_:1},8,["open"])]),_:1},8,["label"])):D("",!0),o(m,{label:_(n)("menu.columns.menuName"),name:"menuName",rules:g.menuName},{default:t(()=>[o(y,{allowClear:"",placeholder:_(n)("inputTips"),value:s.menuName,"onUpdate:value":i[4]||(i[4]=a=>s.menuName=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1},8,["label","rules"]),o(m,{label:_(n)("menu.columns.orderNum"),name:"orderNum",rules:g.orderNum},{default:t(()=>[o(se,{value:s.orderNum,"onUpdate:value":i[5]||(i[5]=a=>s.orderNum=a),min:0},null,8,["value"])]),_:1},8,["label","rules"]),s.menuType!="F"?(l(),d(m,{key:1},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("选择是外链则路由地址需要以`http(s)://`开头")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.isExternalLink")),1)])]),default:t(()=>[o(N,{value:s.isFrame,"onUpdate:value":i[6]||(i[6]=a=>s.isFrame=a),name:"isFrame"},{default:t(()=>[o(f,{value:"0"},{default:t(()=>[r("是")]),_:1}),o(f,{value:"1"},{default:t(()=>[r("否")]),_:1})]),_:1},8,["value"])]),_:1})):D("",!0),s.menuType!="F"?(l(),d(m,{key:2,name:"path",rules:g.path},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("访问的路由地址，如：`user`，如外网地址需内链访问则以`http(s)://`开头")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.routerAddress")),1)])]),default:t(()=>[o(y,{allowClear:"",placeholder:_(n)("inputTips"),value:s.path,"onUpdate:value":i[7]||(i[7]=a=>s.path=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1},8,["rules"])):D("",!0),s.menuType==="C"?(l(),d(m,{key:3},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("访问的组件路径，如：`system/user/index`，默认在`views`目录下")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.componentPath")),1)])]),default:t(()=>[o(y,{allowClear:"",placeholder:_(n)("inputTips"),value:s.component,"onUpdate:value":i[8]||(i[8]=a=>s.component=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):D("",!0),s.menuType!="M"?(l(),d(m,{key:4},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("控制器中定义的权限字符，如：@PreAuthorize(`@ss.hasPermi('system:user:list')`)")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.permissionIdentification")),1)])]),default:t(()=>[o(y,{allowClear:"",placeholder:_(n)("inputTips"),maxlength:100,value:s.perms,"onUpdate:value":i[9]||(i[9]=a=>s.perms=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):D("",!0),s.menuType==="C"?(l(),d(m,{key:5},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r('访问路由的默认传递参数，如：`{"id": 1, "name": "ry"}')]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.routerParams")),1)])]),default:t(()=>[o(y,{allowClear:"",placeholder:_(n)("inputTips"),maxlength:255,value:s.query,"onUpdate:value":i[10]||(i[10]=a=>s.query=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):D("",!0),s.menuType==="C"?(l(),d(m,{key:6},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("选择是则会被`keep-alive`缓存，需要匹配组件的`name`和地址保持一致")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.routerParams")),1)])]),default:t(()=>[o(N,{value:s.isCache,"onUpdate:value":i[11]||(i[11]=a=>s.isCache=a),name:"isCache"},{default:t(()=>[o(f,{value:"0"},{default:t(()=>[r("缓存")]),_:1}),o(f,{value:"1"},{default:t(()=>[r("不缓存")]),_:1})]),_:1},8,["value"])]),_:1})):D("",!0),s.menuType!=="F"?(l(),d(m,{key:7},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("选择隐藏则路由将不会出现在侧边栏，但仍然可以访问")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.displayState")),1)])]),default:t(()=>[o(N,{value:s.visible,"onUpdate:value":i[12]||(i[12]=a=>s.visible=a)},{default:t(()=>[(l(!0),b(S,null,$(_(A),a=>(l(),d(f,{key:a.value,value:a.value},{default:t(()=>[r(T(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):D("",!0),s.menuType!=="F"?(l(),d(m,{key:8},{label:t(()=>[v("span",null,[o(O,{placement:"top"},{title:t(()=>[r("选择停用则路由将不会出现在侧边栏，也不能被访问")]),default:t(()=>[o(_(P),{class:"mr-05"})]),_:1}),r(T(_(n)("menu.columns.menuState")),1)])]),default:t(()=>[o(N,{value:s.status,"onUpdate:value":i[13]||(i[13]=a=>s.status=a)},{default:t(()=>[(l(!0),b(S,null,$(_(L),a=>(l(),d(f,{key:a.value,value:a.value},{default:t(()=>[r(T(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):D("",!0)]),_:1},8,["model"])]),_:1})]),_:1},8,["getContainer","open","title","cancelText","okText"])],512)}}});const Re=W(De,[["__scopeId","data-v-0cc79b57"]]);export{Re as default};
