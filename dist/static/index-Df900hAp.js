import{o as J,$ as l,z as Q,A as ee,q as te,B as ae}from"./index-CJd2VQGz.js";import{i as se,F as oe,d as le}from"./formModel-DnSe9bzy.js";import{h as ne,a as de}from"./antDesign-wbdAq9hh.js";import{d as ie,f as v,r as F,o as ue,W as d,X as y,a0 as C,a1 as m,k as t,Z as s,u as e,G as b,a5 as _,Y as $,a8 as N,F as A,g as ce}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const re=()=>({columns:[{lang:"dept.columns.deptName",dataIndex:"deptName",ellipsis:!0},{lang:"dept.columns.state",dataIndex:"status",ellipsis:!0},{lang:"dept.columns.createTime",dataIndex:"createTime",ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),pe={class:"search-wrapper"},me={class:"ub ub-ac ub-pj top-opt w100"},_e={class:"mt-1 w100",id:"deptTable"},fe={key:1},ge=ie({__name:"index",setup(S){const{proxy:I}=ce(),{sys_normal_disable:x}=I.useDict("sys_normal_disable"),{filterOption:U}=ee(),{loading:u,scrollY:V}=J(),{columns:E}=re(),w=v(!1),g=v("add"),T=v([]),D=v(1),h=v([]);let z=F({});const n=F({deptName:"",status:void 0}),M=()=>{n.deptName="",n.status=void 0};ue(()=>{f()});const O=()=>{f()},P=c=>new Promise(async a=>{const i=await le({id:c.deptId});(i==null?void 0:i.code)===200&&(de.success(l("opeateSuccess")),f()),a(!0)}),K=()=>{g.value="add",w.value=!0},L=c=>{z=c,g.value="edit",w.value=!0},f=async()=>{u.value=!0;const c={deptName:n.deptName,status:n.status},a=await se(c);if((a==null?void 0:a.code)===200){u.value=!1;const{data:i=[]}=a;D.value++,T.value=I.handleTree(i,"deptId")}else u.value=!1},Y=()=>{f()},j=()=>{M(),f()};return(c,a)=>{const i=d("a-input"),k=d("a-form-item"),q=d("a-select"),r=d("a-button"),G=d("a-form"),B=d("a-card"),R=te,W=ae,X=d("a-popconfirm"),Z=d("a-table");return y(),C(A,null,[m("div",pe,[t(B,{size:"small"},{default:s(()=>[t(G,{model:n,layout:"inline"},{default:s(()=>[t(k,{label:e(l)("dept.columns.deptName")},{default:s(()=>[t(i,{allowClear:"",value:n.deptName,"onUpdate:value":a[0]||(a[0]=o=>n.deptName=o),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(k,{label:e(l)("dept.columns.state")},{default:s(()=>[t(q,{"show-search":"","filter-option":e(U),options:e(x),allowClear:"",placeholder:e(l)("selectTips"),style:{width:"220px"},value:n.status,"onUpdate:value":a[1]||(a[1]=o=>n.status=o)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),t(k,null,{default:s(()=>[m("div",null,[t(r,{loading:e(u),type:"primary",onClick:Y},{default:s(()=>[b(_(e(l)("opts.search")),1)]),_:1},8,["loading"]),t(r,{loading:e(u),class:"ml-1",onClick:j},{default:s(()=>[b(_(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),m("div",me,[m("div",null,[t(r,{size:"small",type:"primary",onClick:K},{icon:s(()=>[t(e(ne))]),default:s(()=>[b(" "+_(e(l)("opts.add")),1)]),_:1})]),m("div",null,[t(r,{type:"link",ref:"ref2",shape:"circle"},{default:s(()=>[t(R,{tabKey:"dept-table",value:h.value,"onUpdate:value":a[2]||(a[2]=o=>h.value=o),columns:e(E)},null,8,["value","columns"])]),_:1},512)])]),t(B,{size:"small"},{default:s(()=>[m("div",_e,[(y(),$(Z,{key:D.value,defaultExpandAllRows:!0,class:"ant-table-striped","row-class-name":(o,p)=>p%2===1?"table-striped":null,bordered:"",size:"small",columns:h.value,"row-key":o=>o.deptId,"data-source":T.value,pagination:!1,loading:e(u),scroll:{y:e(V)}},{bodyCell:s(({column:o,record:p})=>[o.dataIndex==="status"?(y(),$(W,{key:0,options:e(x),value:p.status},null,8,["options","value"])):N("",!0),o.dataIndex==="createTime"?(y(),C("span",fe,_(e(Q)(p.createTime)),1)):N("",!0),o.dataIndex==="operation"?(y(),C(A,{key:2},[t(r,{type:"link",size:"small",onClick:H=>L(p)},{default:s(()=>[b(_(e(l)("opts.edit")),1)]),_:2},1032,["onClick"]),t(X,{title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:H=>P(p)},{default:s(()=>[t(r,{type:"link",size:"small",danger:""},{default:s(()=>[b(_(e(l)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):N("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","loading","scroll"]))])]),_:1}),t(oe,{show:w.value,"onUpdate:show":a[3]||(a[3]=o=>w.value=o),status:g.value,"cur-data":e(z),sysNormalDisable:e(x),onSuccess:O},null,8,["show","status","cur-data","sysNormalDisable"])],64)}}});export{ge as default};
