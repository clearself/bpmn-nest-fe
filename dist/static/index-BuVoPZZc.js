import{r as S,o as P,$ as l,z as T,q as R}from"./index-BI1T92go.js";import{a as Y}from"./antDesign-wbdAq9hh.js";import{d as K,f as C,r as W,o as X,W as d,X as u,a0 as _,a1 as x,k as n,Z as s,u as e,G as z,a5 as p,a8 as f,Y as Z,F as j}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const A=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"report.columns.num",dataIndex:"num",width:100,ellipsis:!0},{lang:"report.columns.path",dataIndex:"path",ellipsis:!0},{lang:"report.columns.url",dataIndex:"url",ellipsis:!0},{lang:"report.columns.remark",dataIndex:"remark",ellipsis:!0},{lang:"report.columns.createTime",dataIndex:"createTime",width:150,ellipsis:!0},{lang:"report.columns.updateTime",dataIndex:"updateTime",width:150,ellipsis:!0}]}),H=g=>S({method:"GET",url:"/report/super/list",params:g}),J=g=>S({method:"DELETE",url:`/system/notice/${g.id}`}),O={class:"search-wrapper"},Q={class:"ub ub-ac ub-pe top-opt w100"},ee={class:"mt-1 w100",id:"configTable"},te={key:0},ae={key:1},ne={key:2},oe={key:3},se={key:4},ue=K({__name:"index",setup(g){const{pagination:o,loading:m,scrollY:D}=P(),{columns:E}=A(),I=C([]),y=C([]),h=W({remark:""}),N=()=>{h.remark=""};X(()=>{k()});const $=r=>new Promise(async a=>{const i=await J({id:r.recordId});(i==null?void 0:i.code)===200&&(Y.success(l("opeateSuccess")),k()),a(!0)}),k=async()=>{m.value=!0;const r={remark:h.remark,pageNum:o.current,pageSize:o.pageSize},a=await H(r);if((a==null?void 0:a.code)===200){m.value=!1;const{total:i=0,list:v=[]}=a.data;o.total=i,I.value=v}else m.value=!1},B=()=>{o.current=1,k()},F=()=>{o.current=1,N(),k()},U=r=>{o.current=r.current,o.pageSize=r.pageSize,k()};return(r,a)=>{const i=d("a-input"),v=d("a-form-item"),b=d("a-button"),V=d("a-form"),w=d("a-card"),L=R,q=d("a-popconfirm"),G=d("a-table");return u(),_(j,null,[x("div",O,[n(w,{size:"small"},{default:s(()=>[n(V,{model:h,layout:"inline"},{default:s(()=>[n(v,{label:e(l)("report.columns.remark")},{default:s(()=>[n(i,{allowClear:"",value:h.remark,"onUpdate:value":a[0]||(a[0]=t=>h.remark=t),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),n(v,null,{default:s(()=>[x("div",null,[n(b,{loading:e(m),type:"primary",onClick:B},{default:s(()=>[z(p(e(l)("opts.search")),1)]),_:1},8,["loading"]),n(b,{loading:e(m),class:"ml-1",onClick:F},{default:s(()=>[z(p(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),x("div",Q,[x("div",null,[n(b,{type:"link",ref:"ref2",shape:"circle"},{default:s(()=>[n(L,{tabKey:"config-table",value:y.value,"onUpdate:value":a[1]||(a[1]=t=>y.value=t),columns:e(E)},null,8,["value","columns"])]),_:1},512)])]),n(w,{size:"small"},{default:s(()=>[x("div",ee,[n(G,{class:"ant-table-striped","row-class-name":(t,c)=>c%2===1?"table-striped":null,bordered:"",size:"small",columns:y.value,"row-key":t=>t.deptId,"data-source":I.value,pagination:e(o),loading:e(m),scroll:{y:e(D)},onChange:U},{bodyCell:s(({column:t,record:c,index:M})=>[t.dataIndex==="index"?(u(),_("a",te,p((e(o).current-1)*e(o).pageSize+parseInt(M)+1),1)):f("",!0),t.dataIndex==="path"?(u(),_("span",ae,p(decodeURIComponent(c.path)),1)):f("",!0),t.dataIndex==="url"?(u(),_("span",ne,p(decodeURIComponent(c.url)),1)):f("",!0),t.dataIndex==="createTime"?(u(),_("span",oe,p(e(T)(c.createTime)),1)):f("",!0),t.dataIndex==="updateTime"?(u(),_("span",se,p(e(T)(c.updateTime)),1)):f("",!0),t.dataIndex==="operation"?(u(),Z(q,{key:5,title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:le=>$(c)},null,8,["title","ok-text","cancel-text","onConfirm"])):f("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1})],64)}}});export{ue as default};
