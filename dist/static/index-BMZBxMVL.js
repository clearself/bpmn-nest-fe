import{d as Dt,l as Bx,az as Fx,ae as jx,e as Pe,f as fe,w as Ht,n as it,W as re,X as le,a0 as Oe,a1 as Le,k as G,Z as X,a5 as Xe,a8 as we,F as pt,G as se,u as At,a7 as kr,Y as Ae,J as qn,r as Qt,h as Hx,j as Cy,c as Wx,aA as Gx,o as zx,p as Is,a2 as If,B as Vx}from"./vue-CuEiQHfR.js";import{b as Ay,p as Ux,M as fi,o as Yx,a as Ty,q as Zx}from"./antDesign-CdRSJcA9.js";import{y as oi,b as My}from"./index-BeIH9SCz.js";function Xx(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Kx=Xx(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var s=r-Math.floor(r),c="",o=0;o<Math.floor(r);o++){var a=Math.floor(Math.random()*i).toString(i);c=a+c}if(s){var u=Math.pow(i,s),a=Math.floor(Math.random()*u).toString(i);c=a+c}var l=parseInt(c,i);return l!==1/0&&l>=Math.pow(2,n)?t(n,i):c};t.rack=function(n,i,r){var o=function(c){var a=0;do{if(a++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var u=t(n,i)}while(Object.hasOwnProperty.call(s,u));return s[u]=c,u},s=o.hats={};return o.get=function(c){return o.hats[c]},o.set=function(c,a){return o.hats[c]=a,o},o.bits=n||128,o.base=i||16,o}});function Hn(e){if(!(this instanceof Hn))return new Hn(e);e=e||[128,36,1],this._seed=e.length?Kx.rack(e[0],e[1],e[2]):e}Hn.prototype.next=function(e){return this._seed(e||!0)};Hn.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};Hn.prototype.claim=function(e,t){this._seed.set(e,t||!0)};Hn.prototype.assigned=function(e){return this._seed.get(e)||!1};Hn.prototype.unclaim=function(e){delete this._seed.hats[e]};Hn.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};const ih=1,$y=2,Ry=4,Iy=8,Qx=16,Jx=32,qx=64,eE=128,tE=256,nE=512,iE=ih|$y|Ry,rE=ih|Iy,Ve=Object.freeze({ACTIVATED:ih,RUNNING:$y,ENDING:Ry,ENDED:Iy,DESTROYED:Qx,FAILED:Jx,TERMINATED:qx,CANCELED:eE,COMPLETED:tE,COMPENSABLE:nE,ACTIVE:iE,NOT_DEAD:rE}),Do={};function wr(e,t){throw new Error(`illegal transition: ${e.name} -> ${t}`)}function _r(e,t){return e===Do?t:e}class gn{constructor(t,n,{start:i,cancel:r,complete:o,destroy:s,fail:c,terminate:a,compensable:u}={}){this.name=t,this.traits=n,this._start=_r(i,this),this._compensable=_r(u,this),this._cancel=_r(r,this),this._complete=_r(o,this),this._destroy=_r(s,this),this._fail=_r(c,this),this._terminate=_r(a,this)}hasTrait(t){return(this.traits&t)!==0}complete(){return this._complete||wr(this,"complete")}destroy(){return this._destroy||wr(this,"destroy")}cancel(){return this._cancel||wr(this,"cancel")}fail(){return this._fail||wr(this,"fail")}terminate(){return this._terminate||wr(this,"terminate")}compensable(){return this._compensable||wr(this,"compensable")}start(){return this._start||wr(this,"start")}}const nc=new gn("failed",Ve.DESTROYED|Ve.FAILED),ic=new gn("terminated",Ve.DESTROYED|Ve.TERMINATED),rh=new gn("completed",Ve.DESTROYED|Ve.COMPLETED),Ji=new gn("terminating",Ve.ENDING|Ve.TERMINATED,{destroy:ic}),Po=new gn("canceling",Ve.ENDING|Ve.FAILED|Ve.CANCELED,{destroy:nc,complete:Do,terminate:Ji}),oh=new gn("completing",Ve.ENDING|Ve.COMPLETED,{destroy:rh,cancel:Po,terminate:Ji}),ah=new gn("failing",Ve.ENDING|Ve.FAILED,{cancel:Po,complete:oh,destroy:nc,terminate:Ji}),oE=new gn("compensable:failing",Ve.ENDING|Ve.FAILED,{complete:Do,terminate:Ji,destroy:nc}),ky=new gn("compensable:completed",Ve.ENDED|Ve.COMPLETED,{cancel:Po,fail:oE,destroy:rh,compensable:Do}),aE=new gn("compensable:completing",Ve.ENDING|Ve.COMPLETED,{destroy:ky,terminate:Ji,compensable:Do}),sE=new gn("compensable:running",Ve.RUNNING|Ve.COMPENSABLE,{cancel:Po,complete:aE,compensable:Do,destroy:ky,fail:ah,terminate:Ji}),Ly=new gn("running",Ve.RUNNING,{cancel:Po,complete:oh,compensable:sE,destroy:ic,fail:ah,terminate:Ji}),lE=new gn("activated",Ve.ACTIVATED,{start:Ly,destroy:ic}),cE=Object.freeze({ACTIVATED:lE,RUNNING:Ly,CANCELING:Po,COMPLETING:oh,COMPLETED:rh,FAILING:ah,FAILED:nc,TERMINATING:Ji,TERMINATED:ic});class uE{constructor(t,n,i=null,r=null){this.id=t,this.element=n,this.parent=i,this.initiator=r,this.subscriptions=new Set,this.children=[],this.state=cE.ACTIVATED}get running(){return this.hasTrait(Ve.RUNNING)}get destroyed(){return this.hasTrait(Ve.DESTROYED)}get completed(){return this.hasTrait(Ve.COMPLETED)}get canceled(){return this.hasTrait(Ve.CANCELED)}get failed(){return this.hasTrait(Ve.FAILED)}hasTrait(t){return this.state.hasTrait(t)}start(){return this.state=this.state.start(),this}compensable(){return this.state=this.state.compensable(),this}fail(t){return this.failed||(this.state=this.state.fail(),this.failInitiator=t),this}cancel(t){return this.canceled||(this.state=this.state.cancel(),this.cancelInitiator=t),this}terminate(t){return this.state=this.state.terminate(),this.terminateInitiator=t,this}complete(){return this.state=this.state.complete(),this}destroy(t){return this.state=this.state.destroy(),this.destroyInitiator=t,this}getTokens(){return this.children.filter(t=>!t.destroyed).length}getTokensByElement(t){return this.children.filter(n=>!n.destroyed&&n.element===t).length}}function wa(e,t){const n=[];for(const i of e)t(i)&&n.push(i);return n}function kf(e,t){for(const n of e)if(t(n))return n;return null}function sp(e,t){return["type","name","ref","iref"].every(n=>!(n in e)||e[n]===t[n])}function sh(e){return Array.prototype.concat.apply([],e)}const Na=Object.prototype.toString,pE=Object.prototype.hasOwnProperty;function Or(e){return e===void 0}function Pt(e){return e!==void 0}function bo(e){return e==null}function xe(e){return Na.call(e)==="[object Array]"}function ht(e){return Na.call(e)==="[object Object]"}function he(e){return Na.call(e)==="[object Number]"}function ot(e){const t=Na.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function cn(e){return Na.call(e)==="[object String]"}function hE(e){if(!xe(e))throw new Error("must supply array")}function Ut(e,t){return pE.call(e,t)}function Be(e,t){const n=oc(t);let i;return Z(e,function(r,o){if(n(r,o))return i=r,!1}),i}function Dy(e,t){const n=oc(t);let i=xe(e)?-1:void 0;return Z(e,function(r,o){if(n(r,o))return i=o,!1}),i}function $e(e,t){const n=oc(t);let i=[];return Z(e,function(r,o){n(r,o)&&i.push(r)}),i}function Z(e,t){let n,i;if(Or(e))return;const r=xe(e)?vE:mE;for(let o in e)if(Ut(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function dE(e,t){if(Or(e))return[];hE(e);const n=oc(t);return e.filter(function(i,r){return!n(i,r)})}function un(e,t,n){return Z(e,function(i,r){n=t(n,i,r)}),n}function jr(e,t){return!!un(e,function(n,i,r){return n&&t(i,r)},!0)}function qt(e,t){return!!Be(e,t)}function jt(e,t){let n=[];return Z(e,function(i,r){n.push(t(i,r))}),n}function Rl(e){return e&&Object.keys(e)||[]}function fE(e){return Rl(e).length}function rc(e){return jt(e,t=>t)}function Oo(e,t,n={}){return t=lh(t),Z(e,function(i){let r=t(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function Py(e,...t){e=lh(e);let n={};return Z(t,r=>Oo(r,e,n)),jt(n,function(r,o){return r[0]})}const gE=Py;function ii(e,t){t=lh(t);let n=[];return Z(e,function(i,r){let o=t(i,r),s={d:o,v:i};for(var c=0;c<n.length;c++){let{d:a}=n[c];if(o<a){n.splice(c,0,s);return}}n.push(s)}),jt(n,i=>i.v)}function Bn(e){return function(t){return jr(e,function(n,i){return t[i]===n})}}function lh(e){return ot(e)?e:t=>t[e]}function oc(e){return ot(e)?e:t=>t===e}function mE(e){return e}function vE(e){return Number(e)}function Oy(e,t){let n,i,r,o;function s(p){let h=Date.now(),d=p?0:o+t-h;if(d>0)return c(d);e.apply(r,i),a()}function c(p){n=setTimeout(s,p)}function a(){n&&clearTimeout(n),n=o=i=r=void 0}function u(){n&&s(!0),a()}function l(...p){o=Date.now(),i=p,r=this,n||c(t)}return l.flush=u,l.cancel=a,l}function nn(e,t){return e.bind(t)}function J(e,...t){return Object.assign(e,...t)}function yE(e,t,n){let i=e;return Z(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let s=t[o+1],c=i[r];Pt(s)&&bo(c)&&(c=i[r]=isNaN(+s)?{}:[]),Or(s)?Or(n)?delete i[r]:i[r]=n:i=c}),e}function Wn(e,t){let n={},i=Object(e);return Z(t,function(r){r in i&&(n[r]=e[r])}),n}function Cn(e,t){let n={},i=Object(e);return Z(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}function B(e,t){var n=ie(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Re(e,t){return qt(t,function(n){return B(e,n)})}function ie(e){return e&&e.businessObject||e}function je(e){return e&&e.di}function ac(e){return e.filter(t=>B(t,"bpmn:SequenceFlow"))}function lp(e){return B(e,"bpmn:MessageFlow")}function qi(e){return B(e,"bpmn:SequenceFlow")}function Ny(e){return ch(e)&&ph(e,"bpmn:LinkEventDefinition")}function Il(e){return ch(e)&&ph(e,"bpmn:CompensateEventDefinition")}function By(e){return B(e,"bpmn:Activity")&&e.businessObject.isForCompensation}function ch(e){return(B(e,"bpmn:CatchEvent")||B(e,"bpmn:ReceiveTask"))&&!sc(e)}function fl(e){return B(e,"bpmn:BoundaryEvent")&&!sc(e)}function Fy(e){return Lr(e)&&!ph(e)}function uh(e){return!(sc(e)||!Ba(e,["bpmn:Activity","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:Gateway","bpmn:EndEvent"])||Ny(e)||e.incoming.find(qi)||By(e)||Zi(e))}function Lr(e){return B(e,"bpmn:StartEvent")&&!sc(e)}function sc(e){return!!e.labelTarget}function Zi(e){return ie(e).triggeredByEvent}function jy(e){return B(e,"bpmn:StartEvent")&&ie(e).isInterrupting||B(e,"bpmn:BoundaryEvent")&&ie(e).cancelActivity}function Ba(e,t){return t.some(n=>B(e,n))}function ph(e,t){return qt(ie(e).eventDefinitions,n=>t?B(n,t):!0)}function Hy(e,t,n){const i=e.get("scopeIds",!1)||new Hn([32,36]),r={},o={},s=new bE,c=new Set,a=[],u=new Set,l=new Set;W("tick",function(){for(const L of c)N("elementChanged",{element:L});c.clear()});function p(L,j){if(a.push([j,L]),a.length!==1)return;let F;for(;F=a[0];){const[Q,q]=F;q.destroyed||Q(),a.shift()}N("tick")}function h(L){return o[L.type]||s}function d(L){const{element:j,parentScope:F,initiator:Q=null,scope:q=H({element:j,parent:F,initiator:Q})}=L;return p(q,function(){q.running||q.start(),R("signal",{...L,scope:q}),h(j).signal({...L,scope:q}),q.parent&&O(q.parent)}),q}function f(L){const{element:j,scope:F,initiator:Q=F}=L,q=H({element:j,parent:F,initiator:Q});return p(q,function(){q.running||q.start(),R("enter",L),h(j).enter({...L,initiator:Q,scope:q}),q.parent&&O(q.parent)}),q}function g(L){const{element:j,scope:F,initiator:Q=F}=L;p(F,function(){R("exit",L),h(j).exit({...L,initiator:Q}),F.running&&F.complete(),A(F,Q),F.parent&&O(F.parent)})}function m(L){const{event:j,initiator:F,scope:Q}=L,q=x(j),ee=Q.subscriptions,ae=wa(ee,ze=>sp(q,ze.event)),pe=ae.filter(ze=>!ze.event.interrupting),He=ae.filter(ze=>ze.event.interrupting);if(!He.length)return pe.map(ze=>ze.triggerFn(F)).flat();const Qe=He.find(ze=>!ze.event.boundary)||He[0],Ue=wa(ee,ze=>ze.event.persistent||wE(ze.event,Qe.event));return ee.forEach(ze=>{Ue.includes(ze)||ze.remove()}),[Qe.triggerFn(F)].flat().filter(ze=>ze)}function w(L,j,F){j=x(j);const Q=j.element,q={scope:L,event:j,element:Q,triggerFn:F,remove(){_(q)}};return l.add(q),L.subscriptions.add(q),Q&&k(Q),q}function _(L){const{scope:j,event:F}=L;l.delete(L),j.subscriptions.delete(L),F.element&&k(F.element)}function E(L){return B(L,"bpmn:StartEvent")||B(L,"bpmn:IntermediateCatchEvent")||B(L,"bpmn:ReceiveTask")||xE(L)?ie(L).name||L.id:null}function y(L){return{element:L,interrupting:!1,boundary:!1,iref:L.id,type:"none"}}function x(L){if(!L.businessObject)return L;const j=jy(L),F=fl(L),Q=E(L),q={element:L,interrupting:j,boundary:F,...Q?{iref:Q}:{}},ee=Wy(L)[0];if(!ee)return{...q,type:_E(L)?"message":"none"};if(B(ee,"bpmn:LinkEventDefinition"))return{...q,type:"link",name:ee.name};if(B(ee,"bpmn:SignalEventDefinition"))return{...q,type:"signal",ref:ee.signalRef};if(B(ee,"bpmn:TimerEventDefinition"))return{...q,type:"timer"};if(B(ee,"bpmn:ConditionalEventDefinition"))return{...q,type:"condition"};if(B(ee,"bpmn:EscalationEventDefinition"))return{...q,type:"escalation",ref:ee.escalationRef};if(B(ee,"bpmn:CancelEventDefinition"))return{...q,type:"cancel"};if(B(ee,"bpmn:ErrorEventDefinition"))return{...q,type:"error",ref:ee.errorRef};if(B(ee,"bpmn:MessageEventDefinition"))return{...q,type:"message",ref:ee.messageRef};if(B(ee,"bpmn:CompensateEventDefinition")){let ae=ee.activityRef&&n.get(ee.activityRef.id);return ae||(Lr(L)&&Zi(L.parent)?ae=L.parent.parent:fl(L)?ae=L.host:ae=L.parent),{...q,type:"compensate",ref:ae,persistent:!0}}throw new Error("unknown event definition",ee)}function v(L,j=!0){const{element:F,parent:Q,initiator:q}=L;j&&R("createScope",{element:F,scope:Q});const ee=new uE(i.next(),F,Q,q);return Q&&Q.children.push(ee),u.add(ee),j&&N("createScope",{scope:ee}),k(F),Q&&k(Q.element),ee}function S(L){if(typeof L=="function")return L;const{event:j,element:F,scope:Q}=L,q=L.elements||F&&[F],ee=j&&x(j);return ae=>(!ee||sp(ee,ae.event))&&(!q||q.includes(ae.element))&&(!Q||Q===ae.scope)}function M(L){const j=L==="function"?L:S(L);return F=>Array.from(F.subscriptions).some(j)}function $(L){if(typeof L=="function")return L;const{element:j,waitsOnElement:F,parent:Q,trait:q=Ve.RUNNING,subscribedTo:ee}=L,ae=ee?M(ee):()=>!0;return pe=>(!j||pe.element===j)&&(!Q||pe.parent===Q)&&(!F||pe.getTokensByElement(F)>0)&&pe.hasTrait(q)&&ae(pe)}function T(L){return wa(l,S(L))}function I(L){return kf(l,S(L))}function C(L){return wa(u,$(L))}function b(L){return kf(u,$(L))}function A(L,j=null){if(!L.destroyed){L.destroy(j);for(const F of L.subscriptions){const Q=F.event.traits||Ve.ACTIVE;L.hasTrait(Q)||_(F)}if(L.destroyed){for(const F of L.children)F.destroyed||A(F,j);R("destroyScope",{element:L.element,scope:L}),u.delete(L),N("destroyScope",{scope:L})}k(L.element),L.parent&&k(L.parent.element)}}function R(L,j){N("trace",{...j,action:L})}function k(L){c.add(L),a.length||N("tick")}function O(L){N("scopeChanged",{scope:L})}function N(L,j={}){return t.fire(`tokenSimulation.simulator.${L}`,j)}function W(L,j){t.on("tokenSimulation.simulator."+L,j)}function z(L,j){t.off("tokenSimulation.simulator."+L,j)}function V(L,j){const F=Y(L);r[L.id||L]={...F,...j},k(L)}function U(){const L=[];return n.forEach(j=>{if(!Ba(j,["bpmn:Process","bpmn:Participant"]))return;const F=v({element:j},!1);L.push(F);const Q=j.children.filter(Lr),q=j.children.filter(uh);for(const ee of Q){const ae={...x(ee),interrupting:!1};w(F,ae,pe=>d({element:j,startEvent:ee,initiator:pe}))}if(!Q.length)for(const ee of q){const ae=y(ee);w(F,ae,pe=>d({element:j,initiator:pe}))}}),L}function H(L){const{element:j}=L,F=v(L),{children:Q=[],attachers:q=[]}=j;for(const ee of Q)if(Zi(ee)){const ae=ee.children.filter(pe=>Lr(pe)&&!Il(pe));for(const pe of ae)w(F,pe,He=>d({element:ee,parentScope:F,startEvent:pe,initiator:He}))}for(const ee of q)fl(ee)&&!Il(ee)&&w(F,ee,ae=>d({element:ee,parentScope:F.parent,hostScope:F,initiator:ae}));return F}function Y(L){return r[L.id||L]||{}}function K(L,j){if(!j.length)return;const F={type:"all-completed",persistent:!1},Q=new Set(j),q=ee=>{Q.delete(ee.scope),Q.size===0&&(z("destroyScope",q),m({scope:L,event:F}))};return W("destroyScope",q),F}function P(L,j=!0){V(L,{wait:j})}function D(){for(const L of u)A(L);for(const L of U())u.add(L);N("tick"),N("reset")}this.createScope=v,this.destroyScope=A,this.findScope=b,this.findScopes=C,this.findSubscription=I,this.findSubscriptions=T,this.waitAtElement=P,this.waitForScopes=K,this.setConfig=V,this.getConfig=Y,this.signal=d,this.enter=f,this.exit=g,this.subscribe=w,this.trigger=m,this.reset=D,this.on=W,this.off=z,this.registerBehavior=function(L,j){o[L]=j}}Hy.$inject=["injector","eventBus","elementRegistry"];function bE(){this.signal=function(e){e.element},this.exit=function(e){e.element},this.enter=function(e){e.element}}function wE(e,t){return e.type===t.type&&e.boundary&&!t.boundary}function _E(e){return B(e,"bpmn:ReceiveTask")||e.incoming.some(t=>B(t,"bpmn:MessageFlow"))}function xE(e){if(!fl(e))return!1;const t=Wy(e);return!t[0]||Ba(t[0],["bpmn:ConditionalEventDefinition","bpmn:TimerEventDefinition"])}function Wy(e){return e.businessObject.get("eventDefinitions")||[]}function lc(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:StartEvent",this)}lc.prototype.signal=function(e){this._simulator.exit(e)};lc.prototype.exit=function(e){this._activityBehavior.exit(e)};lc.$inject=["simulator","activityBehavior"];function Fa(e,t,n){this._intermediateThrowEventBehavior=n,this._scopeBehavior=t,e.registerBehavior("bpmn:EndEvent",this)}Fa.$inject=["simulator","scopeBehavior","intermediateThrowEventBehavior"];Fa.prototype.enter=function(e){this._intermediateThrowEventBehavior.enter(e)};Fa.prototype.signal=function(e){this._intermediateThrowEventBehavior.signal(e)};Fa.prototype.exit=function(e){const{scope:t}=e;this._scopeBehavior.tryExit(t.parent,t)};function cc(e,t,n){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,e.registerBehavior("bpmn:BoundaryEvent",this)}cc.prototype.signal=function(e){const{element:t,scope:n,hostScope:i=this._simulator.findScope({parent:n.parent,element:t.host})}=e;if(!i)throw new Error("host scope not found");if(ie(t).cancelActivity){this._scopeBehavior.interrupt(i,n);const o=this._scopeBehavior.tryExit(i,n);if(o){const s=this._simulator.subscribe(i,o,c=>(s.remove(),this._simulator.exit(e)));return}}this._simulator.exit(e)};cc.prototype.exit=function(e){this._activityBehavior.exit(e)};cc.$inject=["simulator","activityBehavior","scopeBehavior"];function ja(e,t){this._activityBehavior=t,this._simulator=e,e.registerBehavior("bpmn:IntermediateCatchEvent",this),e.registerBehavior("bpmn:ReceiveTask",this)}ja.$inject=["simulator","activityBehavior"];ja.prototype.signal=function(e){return this._simulator.exit(e)};ja.prototype.enter=function(e){const{element:t}=e;return this._activityBehavior.signalOnEvent(e,t)};ja.prototype.exit=function(e){this._activityBehavior.exit(e)};function Ha(e,t,n){this._simulator=e,this._activityBehavior=t,this._eventBehaviors=n,e.registerBehavior("bpmn:IntermediateThrowEvent",this),e.registerBehavior("bpmn:SendTask",this)}Ha.prototype.enter=function(e){const{element:t}=e,n=this._eventBehaviors.get(t);if(n){const i=n(e);if(i)return this._activityBehavior.signalOnEvent(e,i)}this._activityBehavior.enter(e)};Ha.prototype.signal=function(e){this._activityBehavior.signal(e)};Ha.prototype.exit=function(e){this._activityBehavior.exit(e)};Ha.$inject=["simulator","activityBehavior","eventBehaviors"];function uc(e,t){this._scopeBehavior=t,this._simulator=e,e.registerBehavior("bpmn:ExclusiveGateway",this)}uc.prototype.enter=function(e){this._simulator.exit(e)};uc.prototype.exit=function(e){const{element:t,scope:n}=e,i=ac(t.outgoing);if(i.length===1)return this._simulator.enter({element:i[0],scope:n.parent});const{activeOutgoing:r}=this._simulator.getConfig(t),o=i.find(s=>s===r);return o?this._simulator.enter({element:o,scope:n.parent}):this._scopeBehavior.tryExit(n.parent,n)};uc.$inject=["simulator","scopeBehavior"];function Wa(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:ParallelGateway",this)}Wa.prototype.enter=function(e){const{scope:t}=e,n=this._findJoiningScopes(e);if(n.length){for(const i of n)i!==t&&this._simulator.destroyScope(i.complete(),t);this._simulator.exit(e)}};Wa.prototype._findJoiningScopes=function(e){const{scope:t,element:n}=e,i=ac(n.incoming),{parent:r}=t,o=this._simulator.findScopes({parent:r,element:n}),s=i.map(c=>o.find(a=>a.initiator.element===c)).filter(c=>c);return s.length===i.length?s:[]};Wa.prototype.exit=function(e){this._activityBehavior.exit(e)};Wa.$inject=["simulator","activityBehavior"];function hh(e){this._simulator=e,e.registerBehavior("bpmn:EventBasedGateway",this)}hh.$inject=["simulator"];hh.prototype.enter=function(e){const{element:t,scope:n}=e,i=n.parent,o=EE(t).map(s=>this._simulator.subscribe(i,s,c=>(o.forEach(a=>a.remove()),this._simulator.destroyScope(n,c),this._simulator.signal({element:s,parentScope:i,initiator:c}))))};function EE(e){return e.outgoing.map(t=>t.target).filter(t=>Ba(t,["bpmn:IntermediateCatchEvent","bpmn:ReceiveTask"]))}function wi(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:InclusiveGateway",this)}wi.prototype.enter=function(e){this._tryJoin(e)};wi.prototype.exit=function(e){const{element:t,scope:n}=e;if(ac(t.outgoing).length>1){const{activeOutgoing:r=[]}=this._simulator.getConfig(t);if(!r.length)throw new Error("no outgoing configured");for(const o of r)this._simulator.enter({element:o,scope:n.parent})}else this._activityBehavior.exit(e)};wi.prototype._tryJoin=function(e){const t=this._getRemainingScopes(e),n=t.map(c=>c.element);if(!this._canReachAnyElement(n,e.element))return this._join(e);const i=this._getElementScopes(e),{scope:r}=e;if(i[0]!==r)return;const o=this._simulator.waitForScopes(r,t),s=this._simulator.subscribe(r,o,()=>{s.remove(),this._tryJoin(e)})};wi.prototype._getRemainingScopes=function(e){const{scope:t,element:n}=e,{parent:i}=t;return this._simulator.findScopes(r=>r.parent===i&&r.element!==n)};wi.prototype._join=function(e){const t=this._getElementScopes(e);for(const n of t)n!==e.scope&&this._simulator.destroyScope(n.complete(),e.scope);this._simulator.exit(e)};wi.prototype._getElementScopes=function(e){const{element:t,scope:n}=e;return this._simulator.findScopes({parent:n.parent,element:t})};wi.prototype._canReachAnyElement=function(e,t,n=new Set){if(!e.length||n.has(t))return!1;if(n.add(t),e.some(r=>r===t))return!0;if(qi(t))return this._canReachAnyElement(e,t.source,n);const i=ac(t.incoming);for(const r of i)if(this._canReachAnyElement(e,r,n))return!0;return!1};wi.$inject=["simulator","activityBehavior"];function _i(e,t,n){this._simulator=e,this._scopeBehavior=t,this._transactionBehavior=n;const i=["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"];for(const r of i)e.registerBehavior(r,this)}_i.$inject=["simulator","scopeBehavior","transactionBehavior"];_i.prototype.signal=function(e){const t=this._triggerMessages(e);if(t)return this.signalOnEvent(e,t);this._simulator.exit(e)};_i.prototype.enter=function(e){const{element:t}=e,n=this.waitAtElement(t);if(n)return this.signalOnEvent(e,n);const i=this._triggerMessages(e);if(i)return this.signalOnEvent(e,i);this._simulator.exit(e)};_i.prototype.exit=function(e){const{element:t,scope:n}=e,i=n.parent,r=!n.failed;r&&!Zi(t)&&this._transactionBehavior.registerCompensation(n);const o=r?t.outgoing.filter(qi):[];o.forEach(s=>this._simulator.enter({element:s,scope:i})),o.length===0&&this._scopeBehavior.tryExit(i,n)};_i.prototype.signalOnEvent=function(e,t){const{scope:n,element:i}=e,r=this._simulator.subscribe(n,t,o=>(r.remove(),this._simulator.signal({scope:n,element:i,initiator:o})))};_i.prototype.waitAtElement=function(e){return this._simulator.getConfig(e).wait&&{element:e,type:"continue",interrupting:!1,boundary:!1}};_i.prototype._getMessageContexts=function(e,t=null){const n=t?r=>r.referencePoint.x>t.x:()=>!0,i=(r,o)=>r.referencePoint.x-o.referencePoint.x;return[...e.incoming.filter(lp).map(r=>({incoming:r,referencePoint:CE(r.waypoints)})),...e.outgoing.filter(lp).map(r=>({outgoing:r,referencePoint:SE(r.waypoints)}))].sort(i).filter(n)};_i.prototype._triggerMessages=function(e){const{element:t,initiator:n,scope:i}=e;let r=i.messageContexts;r||(r=i.messageContexts=this._getMessageContexts(t));const o=n&&n.element;if(lp(o)&&i.expectedIncoming!==o){console.debug("Simulator :: ActivityBehavior :: ignoring out-of-bounds message");return}for(;r.length;){const{incoming:s,outgoing:c}=r.shift();if(s){if(!n)continue;return i.expectedIncoming=s,{element:t,type:"message",name:s.id,interrupting:!1,boundary:!1}}this._simulator.signal({element:c})}};function SE(e){return e&&e[0]}function CE(e){return e&&e[e.length-1]}function Hr(e,t,n,i,r){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,this._transactionBehavior=i,this._elementRegistry=r,e.registerBehavior("bpmn:SubProcess",this),e.registerBehavior("bpmn:Transaction",this),e.registerBehavior("bpmn:AdHocSubProcess",this)}Hr.$inject=["simulator","activityBehavior","scopeBehavior","transactionBehavior","elementRegistry"];Hr.prototype.signal=function(e){this._start(e)};Hr.prototype.enter=function(e){const{element:t}=e,n=this._activityBehavior.waitAtElement(t);if(n)return this._activityBehavior.signalOnEvent(e,n);this._start(e)};Hr.prototype.exit=function(e){const{scope:t}=e,n=t.parent;n.failInitiator===t&&n.complete(),this._activityBehavior.exit(e)};Hr.prototype._start=function(e){const{element:t,startEvent:n,scope:i}=e,r=i.parent;if(Zi(t)){if(!n)throw new Error("missing <startEvent>: required for event sub-process")}else if(n)throw new Error("unexpected <startEvent>: not allowed for sub-process");if(r.destroyed)throw new Error(`target scope <${r.id}> destroyed`);AE(t)&&this._transactionBehavior.setup(e),n&&jy(n)&&this._scopeBehavior.interrupt(r,i);const o=this._findStarts(t,n);for(const s of o)Lr(s)?this._simulator.signal({element:s,parentScope:i,initiator:i}):this._simulator.enter({element:s,scope:i,initiator:i})};Hr.prototype._findStarts=function(e,t){e=this._elementRegistry.get(e.id+"_plane")||e;const n=t?i=>t===i:i=>Fy(i);return e.children.filter(i=>n(i)||uh(i))};function AE(e){return B(e,"bpmn:Transaction")}const cp={type:"cancel",interrupting:!0,boundary:!1,persistent:!0};function er(e,t){this._simulator=e,this._scopeBehavior=t}er.$inject=["simulator","scopeBehavior"];er.prototype.setup=function(e){const{scope:t}=e,n=this._simulator.subscribe(t,cp,o=>(n.remove(),this.cancel({scope:t,initiator:o}))),i={type:"compensate",ref:t.element,persistent:!0,traits:Ve.NOT_DEAD},r=this._simulator.subscribe(t,i,o=>t.canceled?(r.remove(),this.compensate({scope:t,element:t.element,initiator:o})):this._simulator.trigger({event:cp,scope:t}))};er.prototype.cancel=function(e){const{scope:t,initiator:n}=e;if(!t.destroyed)return t.cancel(n),this._simulator.trigger({event:{type:"compensate",ref:t.element},initiator:n,scope:t}),this._simulator.trigger({scope:t,initiator:n,event:cp})};er.prototype.registerCompensation=function(e){const{element:t}=e,n=t.children.filter(Zi).map(o=>o.children.find(s=>Lr(s)&&Il(s))).filter(o=>o),i=t.attachers.filter(Il);if(!n.length&&!i.length)return;const r=this.findTransactionScope(e.parent);B(r.element,"bpmn:Transaction")||this.makeCompensable(r);for(const o of n){const s={element:o,type:"compensate",persistent:!0,interrupting:!0,ref:t,traits:Ve.NOT_DEAD},c=o.parent,a=this._simulator.subscribe(e,s,u=>(a.remove(),this._simulator.signal({initiator:u,element:c,startEvent:o,parentScope:e})))}for(const o of i){const s={element:o,type:"compensate",persistent:!0,ref:t,traits:Ve.NOT_DEAD},c=o.outgoing.map(u=>u.target).find(By);if(!c)continue;const a=this._simulator.subscribe(r,s,u=>(a.remove(),this._simulator.enter({initiator:u,element:c,scope:r})))}};er.prototype.makeCompensable=function(e){if(e.hasTrait(Ve.COMPENSABLE)||!e.parent)return;const t={type:"compensate",ref:e.element,interrupting:!0,persistent:!0,traits:Ve.NOT_DEAD};e.compensable();const n=this._simulator.subscribe(e,t,o=>(n.remove(),e.fail(o),this.compensate({scope:e,element:e.element,initiator:o}),this._scopeBehavior.tryExit(e,o),e)),i=e.parent;if(!i)return;const r=this._simulator.subscribe(i,t,o=>(r.remove(),this._simulator.trigger({scope:e,event:t,initiator:o})));this.makeCompensable(i)};er.prototype.findTransactionScope=function(e){let t=e;for(;t;){const n=t.element;if(B(n,"bpmn:SubProcess")&&!Zi(n)||Ba(n,["bpmn:Transaction","bpmn:Process","bpmn:Participant"]))return t;t=t.parent}throw TE(e)};er.prototype.compensate=function(e){const{scope:t,element:n}=e,i=wa(t.subscriptions,s=>sp({type:"compensate"},s.event)),r=i.filter(s=>s.event.ref===n),o=i.filter(s=>s.event.ref!==n);for(const s of r)this._scopeBehavior.preExit(t,c=>this._simulator.trigger(s));for(const s of o.reverse())this._scopeBehavior.preExit(t,c=>this._simulator.trigger(s))};function TE(e){throw new Error(`no transaction context for <${e.id}>`)}function Wr(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:SequenceFlow",this)}Wr.prototype.enter=function(e){this._simulator.exit(e)};Wr.prototype.exit=function(e){const{element:t,scope:n}=e;this._simulator.enter({initiator:n,element:t.target,scope:n.parent})};Wr.$inject=["simulator","scopeBehavior"];function Gr(e){this._simulator=e,e.registerBehavior("bpmn:MessageFlow",this)}Gr.$inject=["simulator"];Gr.prototype.signal=function(e){this._simulator.exit(e)};Gr.prototype.exit=function(e){const{element:t,scope:n}=e,i=t.target,r=ch(i)?i:{type:"message",element:t,name:t.id},o=this._simulator.findSubscription({event:r,elements:[i,i.parent]});o&&this._simulator.trigger({event:r,initiator:n,scope:o.scope})};function Fe(e,t){return e.type==="label"?!1:(Array.isArray(t)||(t=[t]),t.some(function(n){return B(e,n)}))}function ME(e,t){return Be(ie(e).eventDefinitions,n=>Fe(n,t))}function $E(e,t){return qt(ie(e).eventDefinitions,n=>Fe(n,t))}function dh(e,t,n){this._simulator=e,this._elementRegistry=t,this._scopeBehavior=n}dh.$inject=["simulator","elementRegistry","scopeBehavior"];dh.prototype.get=function(e){const n=Object.entries({"bpmn:LinkEventDefinition":i=>{const{element:r,scope:o}=i,s=Lf(r),c=o.parent,u=c.element.children.filter(l=>Ny(l)&&Lf(l).name===s.name);for(const l of u)this._simulator.signal({element:l,parentScope:c,initiator:o})},"bpmn:SignalEventDefinition":i=>{const{element:r,scope:o}=i,s=this._simulator.findSubscriptions({event:r}),c=new Set;for(const a of s){const u=a.scope;c.has(u)||(c.add(u),this._simulator.trigger({event:r,scope:u,initiator:o}))}},"bpmn:EscalationEventDefinition":i=>{const{element:r,scope:o}=i,s=this._simulator.findScopes({subscribedTo:{event:r},trait:Ve.ACTIVE});let c=o;for(;c=c.parent;)if(s.includes(c)){this._simulator.trigger({event:r,scope:c,initiator:o});break}},"bpmn:ErrorEventDefinition":i=>{const{element:r,scope:o}=i;this._simulator.trigger({event:r,initiator:o,scope:wu(o)})},"bpmn:TerminateEventDefinition":i=>{const{scope:r}=i;this._scopeBehavior.terminate(r.parent,r)},"bpmn:CancelEventDefinition":i=>{const{scope:r,element:o}=i;this._simulator.trigger({event:o,initiator:r,scope:wu(r)})},"bpmn:CompensateEventDefinition":i=>{const{scope:r,element:o}=i;return this._simulator.waitForScopes(r,this._simulator.trigger({event:o,scope:wu(r)}))}}).find(i=>$E(e,i[0]));return n&&n[1]};function Lf(e){return ME(e,"bpmn:LinkEventDefinition")}function wu(e){for(;Zi(e.parent.element);)e=e.parent;return e.parent}const Gy={type:"pre-exit",persistent:!0,interrupting:!0,boundary:!1},_u={type:"exit",interrupting:!0,boundary:!1,persistent:!0};function xi(e){this._simulator=e}xi.$inject=["simulator"];xi.prototype.isFinished=function(e,t=null){return t=zy(t),e.children.every(n=>n.destroyed||n.completed||t(n))};xi.prototype.destroyChildren=function(e,t,n=null){n=zy(n),e.children.filter(i=>!i.destroyed&&!n(i)).map(i=>{this._simulator.destroyScope(i,t)})};xi.prototype.terminate=function(e,t){this.destroyChildren(e,t),e.terminate(t),this.tryExit(e,t)};xi.prototype.interrupt=function(e,t){this.destroyChildren(e,t,t),e.fail(t)};xi.prototype.tryExit=function(e,t){if(!e)throw new Error("missing <scope>");if(t||(t=e),!this.isFinished(e,t))return _u;const n=this._simulator.findSubscriptions({event:Gy,scope:e});for(const i of n){const{event:r,scope:o}=i;if(this._simulator.trigger({event:r,scope:o,initiator:t}).length)return _u}this._simulator.trigger({event:_u,scope:e,initiator:t}),this.exit({scope:e,initiator:t})};xi.prototype.exit=function(e){const{scope:t,initiator:n}=e;if(!n)throw new Error("missing <initiator>");this._simulator.exit({element:t.element,scope:t,initiator:n})};xi.prototype.preExit=function(e,t){const n=this._simulator.subscribe(e,Gy,i=>(n.remove(),t(i)));return n};function zy(e){return typeof e=="function"?e:t=>t===e}function Ga(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:Process",this),e.registerBehavior("bpmn:Participant",this)}Ga.prototype.signal=function(e){const{element:t,startEvent:n,startNodes:i=this._findStarts(t,n),scope:r}=e;if(!i.length)throw new Error("missing <startNodes> or <startEvent>");for(const o of i)Lr(o)?this._simulator.signal({element:o,parentScope:r}):this._simulator.enter({element:o,scope:r})};Ga.prototype.exit=function(e){const{scope:t,initiator:n}=e;this._scopeBehavior.destroyChildren(t,n)};Ga.prototype._findStarts=function(e,t){const n=t?i=>t===i:i=>Fy(i);return e.children.filter(i=>n(i)||uh(i))};Ga.$inject=["simulator","scopeBehavior"];const RE={__init__:["startEventBehavior","endEventBehavior","boundaryEventBehavior","intermediateCatchEventBehavior","intermediateThrowEventBehavior","exclusiveGatewayBehavior","parallelGatewayBehavior","eventBasedGatewayBehavior","inclusiveGatewayBehavior","subProcessBehavior","sequenceFlowBehavior","messageFlowBehavior","processBehavior"],startEventBehavior:["type",lc],endEventBehavior:["type",Fa],boundaryEventBehavior:["type",cc],intermediateCatchEventBehavior:["type",ja],intermediateThrowEventBehavior:["type",Ha],exclusiveGatewayBehavior:["type",uc],parallelGatewayBehavior:["type",Wa],eventBasedGatewayBehavior:["type",hh],inclusiveGatewayBehavior:["type",wi],activityBehavior:["type",_i],subProcessBehavior:["type",Hr],sequenceFlowBehavior:["type",Wr],messageFlowBehavior:["type",Gr],eventBehaviors:["type",dh],scopeBehavior:["type",xi],processBehavior:["type",Ga],transactionBehavior:["type",er]},IE=5e3,Vy={__depends__:[RE],__init__:[["eventBus","simulator",function(e,t){e.on(["tokenSimulation.toggleMode","tokenSimulation.resetSimulation"],IE,n=>{t.reset()})}]],simulator:["type",Hy]};function me(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function pc(e,t){e.invoke(Gr,this),this._animation=t}me(pc,Gr);pc.$inject=["injector","animation"];pc.prototype.signal=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Gr.prototype.signal.call(this,e)})};function hc(e,t){e.invoke(Wr,this),this._animation=t}me(hc,Wr);hc.$inject=["injector","animation"];hc.prototype.enter=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Wr.prototype.enter.call(this,e)})};const kE={sequenceFlowBehavior:["type",hc],messageFlowBehavior:["type",pc]},Ot="tokenSimulation.toggleMode",Uy="tokenSimulation.playSimulation",Yy="tokenSimulation.pauseSimulation",Ei="tokenSimulation.resetSimulation",LE="tokenSimulation.animationCreated",Zy="tokenSimulation.animationSpeedChanged",Xy="tokenSimulation.simulator.elementChanged",za="tokenSimulation.simulator.destroyScope",DE="tokenSimulation.simulator.scopeChanged",zr="tokenSimulation.simulator.createScope",No="tokenSimulation.scopeFilterChanged",Ky="tokenSimulation.simulator.trace",Df=e=>!0;function Va(e,t){this._eventBus=e,this._simulator=t,this._filter=Df,e.on([Ot,Ei],()=>{this._filter=Df}),e.on(za,n=>{const{scope:i}=n;this._scope===i&&i.parent&&this.toggle(i.parent)}),e.on(zr,n=>{const{scope:i}=n;!i.parent&&this._scope&&!Qy(this._scope,i)&&this.toggle(null)})}Va.prototype.toggle=function(e){const t=this._scope!==e;this._scope=t?e:null,this._filter=this._scope?n=>Qy(this._scope,n):n=>!0,this._eventBus.fire(No,{filter:this._filter,scope:this._scope})};Va.prototype.isShown=function(e){return typeof e=="string"&&(e=this._simulator.findScope(t=>t.id===e)),e&&this._filter(e)};Va.prototype.findScope=function(e){return this._simulator.findScopes(e).filter(t=>this.isShown(t))[0]};Va.$inject=["eventBus","simulator"];function Qy(e,t){do if(e===t)return!0;while(t=t.parent);return!1}const Bo={scopeFilter:["type",Va]};function PE(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const OE=Object.prototype.toString,NE=Object.prototype.hasOwnProperty;function BE(e){return e===void 0}function FE(e){return OE.call(e)==="[object Array]"}function jE(e,t){return NE.call(e,t)}function Pf(e,t){let n,i;if(BE(e))return;const r=FE(e)?WE:HE;for(let o in e)if(jE(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function HE(e){return e}function WE(e){return Number(e)}function Vt(e,...t){const n=e.style;return Pf(t,function(i){i&&Pf(i,function(r,o){n[o]=r})}),e}function ft(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const GE=Object.prototype.toString;function ve(e){return new Xi(e)}function Xi(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Xi.prototype.add=function(e){return this.list.add(e),this};Xi.prototype.remove=function(e){return GE.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Xi.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Xi.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Xi.prototype.array=function(){return Array.from(this.list)};Xi.prototype.has=Xi.prototype.contains=function(e){return this.list.contains(e)};function Fo(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function ai(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var kl={},Ll,up,fh;function Jy(){Ll=window.addEventListener?"addEventListener":"attachEvent",up=window.removeEventListener?"removeEventListener":"detachEvent",fh=Ll!=="addEventListener"?"on":""}var zE=kl.bind=function(e,t,n,i){return Ll||Jy(),e[Ll](fh+t,n,i||!1),n},VE=kl.unbind=function(e,t,n,i){return up||Jy(),e[up](fh+t,n,i||!1),n},ce=PE({__proto__:null,bind:zE,unbind:VE,default:kl},[kl]),qy=["focus","blur"];function UE(e,t,n,i,r){return qy.indexOf(n)!==-1&&(r=!0),ce.bind(e,n,function(o){var s=o.target||o.srcElement;o.delegateTarget=ai(s,t,!0),o.delegateTarget&&i.call(e,o)},r)}function YE(e,t,n,i){return qy.indexOf(t)!==-1&&(i=!0),ce.unbind(e,t,n,i)}var It={bind:UE,unbind:YE},ZE=XE,eb=!1,ks;typeof document<"u"&&(ks=document.createElement("div"),ks.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',eb=!ks.getElementsByTagName("link").length,ks=void 0);var Ct={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:eb?[1,"X<div>","</div>"]:[0,"",""]};Ct.td=Ct.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Ct.option=Ct.optgroup=[1,'<select multiple="multiple">',"</select>"];Ct.thead=Ct.tbody=Ct.colgroup=Ct.caption=Ct.tfoot=[1,"<table>","</table>"];Ct.polyline=Ct.ellipse=Ct.polygon=Ct.circle=Ct.text=Ct.line=Ct.path=Ct.rect=Ct.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function XE(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var a=t.createElement("html");return a.innerHTML=e,a.removeChild(a.lastChild)}var r=Object.prototype.hasOwnProperty.call(Ct,i)?Ct[i]:Ct._default,o=r[0],s=r[1],c=r[2],a=t.createElement("div");for(a.innerHTML=s+e+c;o--;)a=a.lastChild;if(a.firstChild==a.lastChild)return a.removeChild(a.firstChild);for(var u=t.createDocumentFragment();a.firstChild;)u.appendChild(a.removeChild(a.firstChild));return u}var Ie=ZE;function Ua(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function Ee(e,t){return t=t||document,t.querySelector(e)}function Gn(e,t){return t=t||document,t.querySelectorAll(e)}function ri(e){e.parentNode&&e.parentNode.removeChild(e)}function KE(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function tb(e,t){return t.appendChild(KE(e,t))}var pp=2,nb={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":pp,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":pp,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function QE(e,t){return nb[t]?e.style[t]:e.getAttributeNS(null,t)}function ib(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=nb[i];r?(r===pp&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function JE(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)ib(e,r,t[r])}function gh(e,t,n){if(typeof t=="string")if(n!==void 0)ib(e,t,n);else return QE(e,t);else JE(e,t);return e}var mh={svg:"http://www.w3.org/2000/svg"},Of='<svg xmlns="'+mh.svg+'"';function qE(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(mh.svg)===-1&&(e=Of+e.substring(4)):(e=Of+">"+e+"</svg>",t=!0);var n=e1(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function e1(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function vh(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=qE(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(mh.svg,e),n}function t1(e){var t=e.parentNode;return t&&t.removeChild(e),e}const rb=getComputedStyle(document.documentElement),n1=rb.getPropertyValue("--token-simulation-green-base-44"),i1=rb.getPropertyValue("--token-simulation-white");function r1(){}function o1(e,t){return t.length===2?c1:e===1?s1:e===t.length-1?l1:a1}const a1=function(e){return e},s1=function(e){return-Math.cos(e*Math.PI/2)+1},l1=function(e){return Math.sin(e*Math.PI/2)},c1=function(e){return-Math.cos(e*Math.PI)/2+.5},Ea=20;function mn(e,t,n,i){this._eventBus=n,this._scopeFilter=i,this._canvas=t,this._randomize=e&&e.randomize!==!1,this._animations=new Set,this._speed=1,n.on(Ei,()=>{this.clearAnimations()}),n.on(Yy,()=>{this.pause()}),n.on(Uy,()=>{this.play()}),n.on(No,r=>{this.each(o=>{this._scopeFilter.isShown(o.scope)?o.show():o.hide()})}),n.on(za,r=>{const{scope:o}=r;this.clearAnimations(o)})}mn.prototype.animate=function(e,t,n){this.createAnimation(e,t,n)};mn.prototype.pause=function(){this.each(e=>e.pause())};mn.prototype.play=function(){this.each(e=>e.play())};mn.prototype.each=function(e){this._animations.forEach(e)};mn.prototype.createAnimation=function(e,t,n=r1){const i=this._getGroup(t);if(!i)return;const r=this._createTokenGfx(i,t),o=new zn(r,e.waypoints,this._randomize,()=>{this._animations.delete(o),n()});return o.setSpeed(this.getAnimationSpeed()),this._scopeFilter.isShown(t)||o.hide(),o.scope=t,o.element=e,this._animations.add(o),this._eventBus.fire(LE,{animation:o}),o.play(),o};mn.prototype.setAnimationSpeed=function(e){this._speed=e,this.each(t=>t.setSpeed(e)),this._eventBus.fire(Zy,{speed:e})};mn.prototype.getAnimationSpeed=function(){return this._speed};mn.prototype.clearAnimations=function(e){this.each(t=>{(!e||t.scope===e)&&t.remove()})};mn.prototype._createTokenGfx=function(e,t){const n=vh(this._getTokenSVG(t).trim());return tb(n,e)};mn.prototype._getTokenSVG=function(e){const t=e.colors||{primary:n1,auxiliary:i1};return`
    <g class="bts-token">
      <circle
        class="bts-circle"
        r="${Ea/2}"
        cx="${Ea/2}"
        cy="${Ea/2}"
        fill="${t.primary}"
      />
      <text
        class="bts-text"
        transform="translate(10, 14)"
        text-anchor="middle"
        fill="${t.auxiliary}"
      >1</text>
    </g>
  `};mn.prototype._getGroup=function(e){var t=this._canvas,n,i;"findRoot"in t?(i=t.findRoot(e.element),n=t._findPlaneForRoot(i).layer):n=Ee(".viewport",t._svg);var r=Ee(".bts-animation-tokens",n);return r||(r=vh('<g class="bts-animation-tokens" />'),tb(r,n)),r};mn.$inject=["config.animation","canvas","eventBus","scopeFilter"];function zn(e,t,n,i){this.gfx=e,this.waypoints=t,this.done=i,this.randomize=n,this._paused=!0,this._t=0,this._parts=[],this.create()}zn.prototype.pause=function(){this._paused=!0};zn.prototype.play=function(){this._paused&&(this._paused=!1,this.tick(0)),this.schedule()};zn.prototype.schedule=function(){if(this._paused||this._scheduled)return;const e=Date.now();this._scheduled=!0,requestAnimationFrame(()=>{this._scheduled=!1,!this._paused&&(this.tick((Date.now()-e)*this._speed),this.schedule())})};zn.prototype.tick=function(e){const t=this._t=this._t+e,n=this._parts.find(c=>c.startTime<=t&&c.endTime>t);if(!n)return this.remove();const i=t-n.startTime,r=n.length*n.easing(i/n.duration),o=n.startLength+r,s=this._path.getPointAtLength(o);this.move(s.x,s.y)};zn.prototype.move=function(e,t){gh(this.gfx,"transform",`translate(${e}, ${t})`)};zn.prototype.create=function(){const e=this.waypoints,t=e.reduce((o,s,c)=>{const a=e[c-1];if(a){const u=o[o.length-1],l=u&&u.endLength||0,p=h1(a,s);o.push({startLength:l,endLength:l+p,length:p,easing:o1(c,e)})}return o},[]),n=t.reduce(function(o,s){return o+s.length},0),i=e.reduce((o,s,c)=>{const a=s.x-Ea/2,u=s.y-Ea/2;return o.push([c>0?"L":"M",a,u]),o},[]).flat().join(" "),r=u1(n,this._randomize);this._parts=t.reduce((o,s,c)=>{const a=r/n*s.length,u=c>0?o[c-1].endTime:0,l=u+a;return[...o,{...s,startTime:u,endTime:l,duration:a}]},[]),this._path=vh(`<path d="${i}" />`),this._t=0};zn.prototype.show=function(){gh(this.gfx,"display","")};zn.prototype.hide=function(){gh(this.gfx,"display","none")};zn.prototype.remove=function(){this.pause(),t1(this.gfx),this.done()};zn.prototype.setSpeed=function(e){this._speed=e};function u1(e,t=!1){return Math.log(e)*(t?p1(250,300):250)}function p1(e,t){return e+Math.floor(Math.random()*(t-e))}function h1(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const d1={__depends__:[Vy,kE,Bo],animation:["type",mn]};var _a={exports:{}},f1=_a.exports,Nf;function g1(){return Nf||(Nf=1,function(e,t){(function(n,i){{var r=i();e.exports&&(t=e.exports=r),t.randomColor=r}})(f1,function(){var n=null,i={};w();var r=[],o=function(S){if(S=S||{},S.seed!==void 0&&S.seed!==null&&S.seed===parseInt(S.seed,10))n=S.seed;else if(typeof S.seed=="string")n=x(S.seed);else{if(S.seed!==void 0&&S.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var M,$,T;if(S.count!==null&&S.count!==void 0){for(var I=S.count,C=[],b=0;b<S.count;b++)r.push(!1);for(S.count=null;I>C.length;){var A=o(S);n!==null&&(S.seed=n),C.push(A)}return S.count=I,C}return M=s(S),$=c(M,S),T=a(M,$,S),u([M,$,T],S)};function s(S){if(r.length>0){var M=v(S.hue),$=f(M),T=(M[1]-M[0])/r.length,I=parseInt(($-M[0])/T);r[I]===!0?I=(I+2)%r.length:r[I]=!0;var C=(M[0]+I*T)%359,b=(M[0]+(I+1)*T)%359;return M=[C,b],$=f(M),$<0&&($=360+$),$}else{var M=p(S.hue);return $=f(M),$<0&&($=360+$),$}}function c(S,M){if(M.hue==="monochrome")return 0;if(M.luminosity==="random")return f([0,100]);var $=h(S),T=$[0],I=$[1];switch(M.luminosity){case"bright":T=55;break;case"dark":T=I-10;break;case"light":I=55;break}return f([T,I])}function a(S,M,$){var T=l(S,M),I=100;switch($.luminosity){case"dark":I=T+20;break;case"light":T=(I+T)/2;break;case"random":T=0,I=100;break}return f([T,I])}function u(S,M){switch(M.format){case"hsvArray":return S;case"hslArray":return y(S);case"hsl":var $=y(S);return"hsl("+$[0]+", "+$[1]+"%, "+$[2]+"%)";case"hsla":var T=y(S),b=M.alpha||Math.random();return"hsla("+T[0]+", "+T[1]+"%, "+T[2]+"%, "+b+")";case"rgbArray":return _(S);case"rgb":var I=_(S);return"rgb("+I.join(", ")+")";case"rgba":var C=_(S),b=M.alpha||Math.random();return"rgba("+C.join(", ")+", "+b+")";default:return g(S)}}function l(S,M){for(var $=d(S).lowerBounds,T=0;T<$.length-1;T++){var I=$[T][0],C=$[T][1],b=$[T+1][0],A=$[T+1][1];if(M>=I&&M<=b){var R=(A-C)/(b-I),k=C-R*I;return R*M+k}}return 0}function p(S){if(typeof parseInt(S)=="number"){var M=parseInt(S);if(M<360&&M>0)return[M,M]}if(typeof S=="string"){if(i[S]){var $=i[S];if($.hueRange)return $.hueRange}else if(S.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var T=E(S)[0];return[T,T]}}return[0,360]}function h(S){return d(S).saturationRange}function d(S){S>=334&&S<=360&&(S-=360);for(var M in i){var $=i[M];if($.hueRange&&S>=$.hueRange[0]&&S<=$.hueRange[1])return i[M]}return"Color not found"}function f(S){if(n===null){var M=.618033988749895,$=Math.random();return $+=M,$%=1,Math.floor(S[0]+$*(S[1]+1-S[0]))}else{var T=S[1]||1,I=S[0]||0;n=(n*9301+49297)%233280;var C=n/233280;return Math.floor(I+C*(T-I))}}function g(S){var M=_(S);function $(I){var C=I.toString(16);return C.length==1?"0"+C:C}var T="#"+$(M[0])+$(M[1])+$(M[2]);return T}function m(S,M,$){var T=$[0][0],I=$[$.length-1][0],C=$[$.length-1][1],b=$[0][1];i[S]={hueRange:M,lowerBounds:$,saturationRange:[T,I],brightnessRange:[C,b]}}function w(){m("monochrome",null,[[0,0],[100,0]]),m("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),m("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),m("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),m("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),m("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),m("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),m("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function _(S){var M=S[0];M===0&&(M=1),M===360&&(M=359),M=M/360;var $=S[1]/100,T=S[2]/100,I=Math.floor(M*6),C=M*6-I,b=T*(1-$),A=T*(1-C*$),R=T*(1-(1-C)*$),k=256,O=256,N=256;switch(I){case 0:k=T,O=R,N=b;break;case 1:k=A,O=T,N=b;break;case 2:k=b,O=T,N=R;break;case 3:k=b,O=A,N=T;break;case 4:k=R,O=b,N=T;break;case 5:k=T,O=b,N=A;break}var W=[Math.floor(k*255),Math.floor(O*255),Math.floor(N*255)];return W}function E(S){S=S.replace(/^#/,""),S=S.length===3?S.replace(/(.)/g,"$1$1"):S;var M=parseInt(S.substr(0,2),16)/255,$=parseInt(S.substr(2,2),16)/255,T=parseInt(S.substr(4,2),16)/255,I=Math.max(M,$,T),C=I-Math.min(M,$,T),b=I?C/I:0;switch(I){case M:return[60*(($-T)/C%6)||0,b,I];case $:return[60*((T-M)/C+2)||0,b,I];case T:return[60*((M-$)/C+4)||0,b,I]}}function y(S){var M=S[0],$=S[1]/100,T=S[2]/100,I=(2-$)*T;return[M,Math.round($*T/(I<1?I:2-I)*1e4)/100,I/2*100]}function x(S){for(var M=0,$=0;$!==S.length&&!(M>=Number.MAX_SAFE_INTEGER);$++)M+=S.charCodeAt($);return M}function v(S){if(isNaN(S)){if(typeof S=="string"){if(i[S]){var $=i[S];if($.hueRange)return $.hueRange}else if(S.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var T=E(S)[0];return d(T).hueRange}}}else{var M=parseInt(S);if(M<360&&M>0)return d(S).hueRange}return[0,360]}return o})}(_a,_a.exports)),_a.exports}var m1=g1();const v1=Ay(m1),y1=1500;function ob(e){const t=v1({count:60}).filter(o=>n(o.substring(1))<200);function n(o){var s=parseInt(o.substr(0,2),16),c=parseInt(o.substr(2,2),16),a=parseInt(o.substr(4,2),16),u=(s*299+c*587+a*114)/1e3;return u}let i=0;function r(o){const{element:s}=o;if(s&&s.type==="bpmn:MessageFlow")return{primary:"#999",auxiliary:"#FFF"};if(o.parent)return o.parent.colors;const c=t[i++%t.length];return{primary:c,auxiliary:n(c)>=128?"#111":"#fff"}}e.on(zr,y1,o=>{const{scope:s}=o;s.colors=r(s)})}ob.$inject=["eventBus"];const b1={__init__:["coloredScopes"],coloredScopes:["type",ob]};var w1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"/></svg>',_1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>',x1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg>',E1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',S1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>',C1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"/></svg>',A1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"/></svg>',T1=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 580.5 448">
  <path fill="currentColor" d="M112 0C85 0 64 22 64 48v196l192-89V48c0-26-22-48-48-48zm256 0c-27 0-48 22-48 48v77l190-89c-5-21-24-36-46-36Zm144 105-192 89v70l192-89zM256 224 64 314v70l192-90zm256 21-192 89v66c0 27 21 48 48 48h96c26 0 48-21 48-48zM256 364 89 442c7 4 14 6 23 6h96c26 0 48-21 48-48z"/>
  <rect fill="currentColor" width="63.3" height="618.2" x="311.5" y="-469.4" transform="rotate(65)" rx="10"/>
</svg>
`,M1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Adapted from Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/></svg>',$1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"/></svg>',R1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"/></svg>',I1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',k1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',L1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"/></svg>',D1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"/></svg>';function rn(e){return function(n=""){return`<span class="bts-icon ${n}">${e}</span>`}}const Bf=rn(w1),P1=rn(_1),hp=rn(x1),O1=rn(T1),ab=rn(E1),sb=rn(S1),lb=rn(C1),dp=rn(A1),cb=rn(M1),N1=rn($1),B1=rn(R1),F1=rn(I1),j1=rn(k1),ub=rn(L1),H1=rn(D1);function yh(e){this._exclusiveGatewaySettings=e}yh.prototype.createContextPads=function(e){if(e.outgoing.filter(function(r){return Fe(r,"bpmn:SequenceFlow")}).length<2)return;const n=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${ab()}
    </div>
  `;return[{action:()=>{this._exclusiveGatewaySettings.setSequenceFlow(e)},element:e,html:n}]};yh.$inject=["exclusiveGatewaySettings"];function bh(e){this._inclusiveGatewaySettings=e}bh.prototype.createContextPads=function(e){const t=e.outgoing.filter(qi);if(t.length<2)return;const n=t.filter(r=>{const o=ie(r);return ie(e).default!==o}),i=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${ab()}
    </div>
  `;return n.map(r=>({action:()=>{this._inclusiveGatewaySettings.toggleSequenceFlow(e,r)},element:r,html:i}))};bh.$inject=["inclusiveGatewaySettings"];function Vr(e){this._simulator=e}Vr.prototype.createContextPads=function(e){return Fe(e,"bpmn:ReceiveTask")||Fe(e,"bpmn:SubProcess")&&ie(e).triggeredByEvent?[]:[this.createPauseContextPad(e)]};Vr.prototype.createPauseContextPad=function(e){const t=()=>this._findSubscriptions({element:e}),n=this._isPaused(e),i=`
    <div class="bts-context-pad ${n?"":"show-hover"}" title="${n?"Remove":"Add"} pause point">
      ${(n?O1:dp)("show-hover")}
      ${dp("hide-hover")}
    </div>
  `;return{action:()=>{this._togglePaused(e)},element:e,hideContexts:t,html:i}};Vr.prototype._isPaused=function(e){const{wait:t}=this._simulator.getConfig(e);return t};Vr.prototype._togglePaused=function(e){const t=!this._isPaused(e);this._simulator.waitAtElement(e,t)};Vr.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};Vr.$inject=["simulator"];function Dr(e){this._simulator=e}Dr.$inject=["simulator"];Dr.prototype.createContextPads=function(e){return[this.createTriggerContextPad(e)]};Dr.prototype.createTriggerContextPad=function(e){const t=()=>this._findSubscriptions({element:e}).slice().sort((s,c)=>s.event.type==="none"?1:-1),n=`
    <div class="bts-context-pad" title="Trigger Event">
      ${cb()}
    </div>
  `;return{action:r=>{const{event:o,scope:s}=r[0];return this._simulator.trigger({event:o,scope:s})},element:e,html:n,contexts:t}};Dr.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};const xu=500,W1=-15,G1=-15;function Tn(e,t,n,i,r,o){this._elementRegistry=t,this._overlays=n,this._injector=i,this._canvas=r,this._scopeFilter=o,this._overlayCache=new Map,this._handlerIdx=0,this._handlers=[],this.registerHandler("bpmn:ExclusiveGateway",yh),this.registerHandler("bpmn:InclusiveGateway",bh),this.registerHandler("bpmn:Activity",Vr),this.registerHandler("bpmn:Event",Dr),this.registerHandler("bpmn:Gateway",Dr),this.registerHandler("bpmn:Activity",Dr),e.on(Ot,xu,s=>{s.active?this.openContextPads():this.closeContextPads()}),e.on(Ei,xu,()=>{this.closeContextPads(),this.openContextPads()}),e.on(No,s=>{const c=Gn(".djs-overlay-ts-context-menu [data-scope-ids]",n._overlayRoot);for(const u of c){const p=u.dataset.scopeIds.split(",").some(h=>o.isShown(h));ve(u).toggle("hidden",!p)}const a=Gn(".djs-overlay-ts-context-menu [data-hide-scope-ids]",n._overlayRoot);for(const u of a){const p=u.dataset.hideScopeIds.split(",").some(h=>o.isShown(h));ve(u).toggle("hidden",p)}}),e.on(Xy,xu,s=>{const{element:c}=s;this.updateElementContextPads(c)})}Tn.prototype.registerHandler=function(e,t){const n=this._injector.instantiate(t);n.hash=String(this._handlerIdx++),this._handlers.push({handler:n,type:e})};Tn.prototype.getHandlers=function(e){return this._handlers.filter(({type:t})=>Fe(e,t)).map(({handler:t})=>t)};Tn.prototype.openContextPads=function(e){e||(e=this._canvas.getRootElement()),this._elementRegistry.forEach(t=>{z1(e,t)&&this.updateElementContextPads(t)})};Tn.prototype._getOverlays=function(e){return this._overlayCache.get(e)||[]};Tn.prototype._addOverlay=function(e,t){const{handlerHash:n}=t;if(!n)throw new Error("<handlerHash> required");const i=this._overlays.add(e,"bts-context-menu",{...t,position:{top:W1,left:G1},show:{minZoom:.5}}),r=this._overlays.get(i),o=this._overlayCache;o.has(n)||o.set(n,[]),o.get(n).push(r)};Tn.prototype._removeOverlay=function(e){const{id:t,handlerHash:n}=e;this._overlays.remove(t);const i=this._overlayCache.get(n)||[],r=i.indexOf(e);r!==-1&&i.splice(r,1)};Tn.prototype.updateElementContextPads=function(e){for(const t of this.getHandlers(e))this._updateElementContextPads(e,t)};Tn.prototype._updateElementContextPads=function(e,t){const n=(t.createContextPads(e)||[]).filter(s=>s),i=`${e.id}------${t.hash}`,r=this._getOverlays(i),o=[];for(const s of n){const{element:c,contexts:a,hideContexts:u,action:l,html:p}=s,h=`${s.element.id}-------${p}`;let d=r.find(g=>g.hash===h);const f=d&&d.html||Ie(p);if(a){const g=a();f.dataset.scopeIds=g.map(w=>w.scope.id).join(",");const m=g.filter(w=>this._scopeFilter.isShown(w.scope));ve(f).toggle("hidden",m.length===0)}if(u){const g=u();f.dataset.hideScopeIds=g.map(w=>w.scope.id).join(",");const m=g.filter(w=>this._scopeFilter.isShown(w.scope));ve(f).toggle("hidden",m.length>0)}if(d){o.push(d);continue}l&&ce.bind(f,"click",g=>{g.preventDefault();const m=a?a().filter(w=>this._scopeFilter.isShown(w.scope)):null;l(m)}),this._addOverlay(c,{hash:h,handlerHash:i,html:f})}for(const s of r)o.includes(s)||this._removeOverlay(s)};Tn.prototype.closeContextPads=function(){for(const e of this._overlayCache.values())for(const t of e)this._closeOverlay(t);this._overlayCache.clear()};Tn.prototype._closeOverlay=function(e){this._overlays.remove(e.id)};Tn.$inject=["eventBus","elementRegistry","overlays","injector","canvas","scopeFilter"];function z1(e,t){do{if(e===t)return!0;t=t.parent}while(t);return!1}const V1={__depends__:[Bo],__init__:["contextPads"],contextPads:["type",Tn]};function pb(e,t,n){e.on(za,i=>{const{scope:r}=i,{destroyInitiator:o,element:s}=r;!r.completed||!o||!["bpmn:Process","bpmn:Participant"].includes(s.type)||n.addElementNotification(o.element,{type:"success",icon:hp(),text:"Finished",scope:r})})}pb.$inject=["eventBus","simulator","elementNotifications"];const U1=-15,Y1=15;function Ya(e,t){this._overlays=e,t.on([Ei,zr,Ot],()=>{this.clear()})}Ya.prototype.addElementNotification=function(e,t){const n={top:U1,right:Y1},{type:i,icon:r,text:o,scope:s={}}=t,c=s.colors,a=c?`style="color: ${c.auxiliary}; background: ${c.primary}"`:"",u=Ie(`
    <div class="bts-element-notification ${i||""}" ${a}>
      ${r||""}
      <span class="bts-text">${o}</span>
    </div>
  `);this._overlays.add(e,"bts-element-notification",{position:n,html:u,show:{minZoom:.5}})};Ya.prototype.clear=function(){this._overlays.remove({type:"bts-element-notification"})};Ya.prototype.removeElementNotification=function(e){this._overlays.remove({element:e})};Ya.$inject=["overlays","eventBus"];const hb={elementNotifications:["type",Ya]},Z1=2e3,X1=lb();function Za(e,t,n){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._init(),e.on([Ot,Ei],i=>{this.clear()})}Za.prototype._init=function(){this.container=Ie('<div class="bts-notifications"></div>'),this._canvas.getContainer().appendChild(this.container)};Za.prototype.showNotification=function(e){const{text:t,type:n="info",icon:i=X1,scope:r,ttl:o=Z1}=e;if(r&&!this._scopeFilter.isShown(r))return;const s=i.startsWith("<")?i:`<i class="${i}"></i>`,c=r&&r.colors,a=c?`style="color: ${c.auxiliary}; background: ${c.primary}"`:"",u=Ie(`
    <div class="bts-notification ${n}">
      <span class="bts-icon">${s}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${r?`<span class="bts-scope" ${a}>${r.id}</span>`:""}
    </div>
  `);for(this.container.appendChild(u);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){u.remove()},o)};Za.prototype.clear=function(){for(;this.container.children.length;)this.container.children[0].remove()};Za.$inject=["eventBus","canvas","scopeFilter"];const Xa={__depends__:[Bo],notifications:["type",Za]},K1={__depends__:[hb,Xa],__init__:["simulationState"],simulationState:["type",pb]},Q1="--token-simulation-silver-base-97",J1="--token-simulation-green-base-44",db="show-scopes",q1=3e3;function Mn(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._elementColors=i,this._simulationStyles=r,this._highlight=null,this._init(),e.on(Ot,o=>{o.active?ve(this._container).remove("hidden"):(ve(this._container).add("hidden"),Fo(this._container),this.unhighlightScope())}),e.on(No,o=>{const s=this.getScopeElements();for(const c of s){const a=c.dataset.scopeId;ve(c).toggle("inactive",!this._scopeFilter.isShown(a))}}),e.on(zr,o=>{this.addScope(o.scope)}),e.on(za,o=>{this.removeScope(o.scope)}),e.on(DE,o=>{this.updateScope(o.scope)}),e.on(Ei,()=>{this.removeAllInstances()})}Mn.prototype._init=function(){this._container=Ie('<div class="bts-scopes hidden"></div>'),this._canvas.getContainer().appendChild(this._container)};Mn.prototype.addScope=function(e){const t=["bpmn:Process","bpmn:SubProcess","bpmn:Participant"],{element:n}=e;if(!t.includes(n.type))return;const i=e.colors,r=i?`style="color: ${i.auxiliary}; background: ${i.primary}"`:"",o=Ie(`
    <div data-scope-id="${e.id}" class="bts-scope"
         title="View Process Instance ${e.id}" ${r}>
      ${e.getTokens()}
    </div>
  `);ce.bind(o,"click",()=>{this._scopeFilter.toggle(e)}),ce.bind(o,"mouseenter",()=>{this.highlightScope(n)}),ce.bind(o,"mouseleave",()=>{this.unhighlightScope()}),this._scopeFilter.isShown(e)||ve(o).add("inactive"),this._container.appendChild(o)};Mn.prototype.getScopeElements=function(){return Gn("[data-scope-id]",this._container)};Mn.prototype.getScopeElement=function(e){return Ee(`[data-scope-id="${e.id}"]`,this._container)};Mn.prototype.updateScope=function(e){const t=this.getScopeElement(e);t&&(t.textContent=e.getTokens())};Mn.prototype.removeScope=function(e){const t=this.getScopeElement(e);t&&t.remove()};Mn.prototype.removeAllInstances=function(){this._container.innerHTML=""};Mn.prototype.highlightScope=function(e){this.unhighlightScope(),this._highlight=e,this._elementColors.add(e,db,this._getHighlightColors(),q1),e.parent||ve(this._canvas.getContainer()).add("highlight")};Mn.prototype.unhighlightScope=function(){if(!this._highlight)return;const e=this._highlight;this._elementColors.remove(e,db),e.parent||ve(this._canvas.getContainer()).remove("highlight"),this._highlight=null};Mn.prototype._getHighlightColors=function(){return{fill:this._simulationStyles.get(Q1),stroke:this._simulationStyles.get(J1)}};Mn.$inject=["eventBus","canvas","scopeFilter","elementColors","simulationStyles"];function dc(){this._cache={}}dc.$inject=[];dc.prototype.get=function(e){const t=this._cache[e];return t||(this._computedStyle||(this._computedStyle=this._getComputedStyle()),this._cache[e]=this._computedStyle.getPropertyValue(e).trim())};dc.prototype._getComputedStyle=function(){const e=typeof getComputedStyle=="function"?getComputedStyle:eS,t=typeof document<"u"?document.documentElement:{};return e(t)};function eS(){return{getPropertyValue(){return""}}}const fc={simulationStyles:["type",dc]},tS={__depends__:[Bo,fc],__init__:["showScopes"],showScopes:["type",Mn]};function wh(e){return CSS.escape(e)}var nS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function iS(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return nS[t]})}const rS=lb();function Eu(e){const t=e&&e.businessObject.name;return t&&iS(t)}function Su(e,t){const n=fp(e);return n==="none"?"bpmn-icon-intermediate-event-none":`bpmn-icon-intermediate-event-${t}-${n}`}function fp(e){const t=ie(e);if(t.get("eventDefinitions").length===0)return"none";const n=t.eventDefinitions[0];return Fe(n,"bpmn:MessageEventDefinition")?"message":Fe(n,"bpmn:TimerEventDefinition")?"timer":Fe(n,"bpmn:SignalEventDefinition")?"signal":Fe(n,"bpmn:ErrorEventDefinition")?"error":Fe(n,"bpmn:EscalationEventDefinition")?"escalation":Fe(n,"bpmn:CompensateEventDefinition")?"compensation":Fe(n,"bpmn:ConditionalEventDefinition")?"condition":Fe(n,"bpmn:LinkEventDefinition")?"link":Fe(n,"bpmn:CancelEventDefinition")?"cancel":Fe(n,"bpmn:TerminateEventDefinition")?"terminate":"none"}function Ur(e,t,n,i,r,o){this._notifications=t,this._tokenSimulationPalette=n,this._canvas=i,this._scopeFilter=r,this._init(),e.on(No,s=>{const c=Gn(".bts-entry[data-scope-id]",this._container);for(const a of c){const u=a.dataset.scopeId;ve(a).toggle("inactive",!this._scopeFilter.isShown(u))}}),e.on(za,s=>{const{scope:c}=s,{element:a}=c,u=c.completed;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(a.type))return;const h=`${Fe(a,"bpmn:SubProcess")?Eu(a)||"SubProcess":"Process"} ${u?"finished":"canceled"}`;this.log({text:h,icon:u?hp():F1(),scope:c})}),e.on(zr,s=>{const{scope:c}=s,{element:a}=c;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(a.type))return;const p=`${Fe(a,"bpmn:SubProcess")?Eu(a)||"SubProcess":"Process"} started`;this.log({text:p,icon:hp(),scope:c})}),e.on(Ky,s=>{const{action:c,scope:a,element:u}=s;if(c!=="exit")return;const l=a.parent,p=Eu(u);if(Fe(u,"bpmn:ServiceTask"))return this.log({text:p||"Service Task",icon:"bpmn-icon-service",scope:l});if(Fe(u,"bpmn:UserTask"))return this.log({text:p||"User Task",icon:"bpmn-icon-user",scope:l});if(Fe(u,"bpmn:CallActivity"))return this.log({text:p||"Call Activity",icon:"bpmn-icon-call-activity",scope:l});if(Fe(u,"bpmn:ScriptTask"))return this.log({text:p||"Script Task",icon:"bpmn-icon-script",scope:l});if(Fe(u,"bpmn:BusinessRuleTask"))return this.log({text:p||"Business Rule Task",icon:"bpmn-icon-business-rule",scope:l});if(Fe(u,"bpmn:ManualTask"))return this.log({text:p||"Manual Task",icon:"bpmn-icon-manual-task",scope:l});if(Fe(u,"bpmn:ReceiveTask"))return this.log({text:p||"Receive Task",icon:"bpmn-icon-receive",scope:l});if(Fe(u,"bpmn:SendTask"))return this.log({text:p||"Send Task",icon:"bpmn-icon-send",scope:l});if(Fe(u,"bpmn:Task"))return this.log({text:p||"Task",icon:"bpmn-icon-task",scope:l});if(Fe(u,"bpmn:ExclusiveGateway"))return this.log({text:p||"Exclusive Gateway",icon:"bpmn-icon-gateway-xor",scope:l});if(Fe(u,"bpmn:ParallelGateway"))return this.log({text:p||"Parallel Gateway",icon:"bpmn-icon-gateway-parallel",scope:l});if(Fe(u,"bpmn:InclusiveGateway"))return this.log({text:p||"Inclusive Gateway",icon:"bpmn-icon-gateway-or",scope:l});if(Fe(u,"bpmn:StartEvent"))return this.log({text:p||"Start Event",icon:`bpmn-icon-start-event-${fp(u)}`,scope:l});if(Fe(u,"bpmn:IntermediateCatchEvent"))return this.log({text:p||"Intermediate Event",icon:Su(u,"catch"),scope:l});if(Fe(u,"bpmn:IntermediateThrowEvent"))return this.log({text:p||"Intermediate Event",icon:Su(u,"throw"),scope:l});if(Fe(u,"bpmn:BoundaryEvent"))return this.log({text:p||"Boundary Event",icon:Su(u,"catch"),scope:l});if(Fe(u,"bpmn:EndEvent"))return this.log({text:p||"End Event",icon:`bpmn-icon-end-event-${fp(u)}`,scope:l})}),e.on([Ot,Ei],s=>{this.clear(),this.toggle(!1)})}Ur.prototype._init=function(){this._container=Ie(`
    <div class="bts-log hidden djs-scrollable">
      <div class="bts-header">
        ${Bf("bts-log-icon")}
        Simulation Log
        <button class="bts-close" aria-label="Close">
          ${j1()}
        </button>
      </div>
      <div class="bts-content">
        <p class="bts-entry placeholder">No Entries</p>
      </div>
    </div>
  `),this._placeholder=Ee(".bts-placeholder",this._container),this._content=Ee(".bts-content",this._container),ce.bind(this._content,"mousedown",e=>{e.stopPropagation()}),this._close=Ee(".bts-close",this._container),ce.bind(this._close,"click",()=>{this.toggle(!1)}),this._icon=Ee(".bts-log-icon",this._container),ce.bind(this._icon,"click",()=>{this.toggle()}),this._canvas.getContainer().appendChild(this._container),this.paletteEntry=Ie(`
    <div class="bts-entry" title="Toggle Simulation Log">
      ${Bf()}
    </div>
  `),ce.bind(this.paletteEntry,"click",()=>{this.toggle()}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)};Ur.prototype.isShown=function(){const e=this._container;return!ve(e).has("hidden")};Ur.prototype.toggle=function(e=!this.isShown()){const t=this._container;e?ve(t).remove("hidden"):ve(t).add("hidden")};Ur.prototype.log=function(e){const{text:t,type:n="info",icon:i=rS,scope:r}=e,o=this._content;ve(this._placeholder).add("hidden"),this.isShown()||this._notifications.showNotification(e);const s=i.startsWith("<")?i:`<i class="${i}"></i>`,c=r&&r.colors,a=c?`style="background: ${c.primary}; color: ${c.auxiliary}"`:"",u=Ie(`
    <p class="bts-entry ${n} ${r&&this._scopeFilter.isShown(r)?"":"inactive"}" ${r?`data-scope-id="${r.id}"`:""}>
      <span class="bts-icon">${s}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${r?`<span class="bts-scope" data-scope-id="${r.id}" ${a}>${r.id}</span>`:""}
    </p>
  `);It.bind(u,".bts-scope[data-scope-id]","click",p=>{this._scopeFilter.toggle(r)});const l=Math.abs(o.clientHeight+o.scrollTop-o.scrollHeight)<2;o.appendChild(u),l&&(o.scrollTop=o.scrollHeight)};Ur.prototype.clear=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._placeholder=Ie('<p class="bts-entry placeholder">No Entries</p>'),this._content.appendChild(this._placeholder)};Ur.$inject=["eventBus","notifications","tokenSimulationPalette","canvas","scopeFilter","simulator"];const oS={__depends__:[Xa,Bo],__init__:["log"],log:["type",Ur]},aS=["bpmn:ComplexGateway"];function sS(e){return e.labelTarget}function jo(e,t,n,i,r){this._eventBus=e,this._elementRegistry=t,this._elementNotifications=r,this._notifications=i,this._canvasParent=n.getContainer().parentNode,e.on(Ot,o=>{o.active?this.enable():this.clear()})}jo.prototype.getUnsupportedElements=function(){return this._unsupportedElements};jo.prototype.enable=function(){const e=[];this._elementRegistry.forEach(t=>{sS(t)||Fe(t,aS)&&(this.showWarning(t),e.push(t))}),e.length&&this._notifications.showNotification({text:"Found unsupported elements",icon:sb(),type:"warning",ttl:5e3}),this._unsupportedElements=e};jo.prototype.clear=function(){ve(this._canvasParent).remove("warning")};jo.prototype.showWarning=function(e){this._elementNotifications.addElementNotification(e,{type:"warning",icon:sb(),text:"Not supported"})};jo.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];const lS={__depends__:[hb,Xa],__init__:["elementSupport"],elementSupport:["type",jo]},fb=cb(),cS=dp(),Ff=1500;function tr(e,t,n,i){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this.canvasParent=i.getContainer().parentNode,this.isActive=!1,this.isPaused=!0,this._init(),e.on(zr,Ff,r=>{this.activate(),this.unpause()}),e.on([Ei,Ot],()=>{this.deactivate(),this.pause()}),e.on(Ky,Ff,r=>{this.unpause()})}tr.prototype._init=function(){this.paletteEntry=Ie(`
    <div class="bts-entry disabled" title="Play/Pause Simulation">
      ${fb}
    </div>
  `),ce.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)};tr.prototype.toggle=function(){this.isPaused?this.unpause():this.pause()};tr.prototype.pause=function(){this.isActive&&(ve(this.paletteEntry).remove("active"),ve(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=fb,this._eventBus.fire(Yy),this._notifications.showNotification({text:"Pause Simulation"}),this.isPaused=!0)};tr.prototype.unpause=function(){!this.isActive||!this.isPaused||(ve(this.paletteEntry).add("active"),ve(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML=cS,this._eventBus.fire(Uy),this._notifications.showNotification({text:"Play Simulation"}),this.isPaused=!1)};tr.prototype.activate=function(){this.isActive=!0,ve(this.paletteEntry).remove("disabled")};tr.prototype.deactivate=function(){this.isActive=!1,ve(this.paletteEntry).remove("active"),ve(this.paletteEntry).add("disabled")};tr.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];const uS={__depends__:[Xa],__init__:["pauseSimulation"],pauseSimulation:["type",tr]};function gc(e,t,n){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this._init(),e.on(zr,()=>{ve(this._paletteEntry).remove("disabled")}),e.on(Ot,i=>{(this._active=i.active)||this.resetSimulation()})}gc.prototype._init=function(){this._paletteEntry=Ie(`
    <div class="bts-entry disabled" title="Reset Simulation">
      ${N1()}
    </div>
  `),ce.bind(this._paletteEntry,"click",()=>{this.resetSimulation(),this._notifications.showNotification({text:"Reset Simulation",type:"info"})}),this._tokenSimulationPalette.addEntry(this._paletteEntry,2)};gc.prototype.resetSimulation=function(){ve(this._paletteEntry).add("disabled"),this._eventBus.fire(Ei)};gc.$inject=["eventBus","tokenSimulationPalette","notifications"];const pS={__depends__:[Xa],__init__:["resetSimulation"],resetSimulation:["type",gc]},hS=10,dS=-15,fS=500,gS="--token-simulation-green-base-44",mS="--token-simulation-white";function nr(e,t,n,i,r){this._overlays=t,this._scopeFilter=i,this._simulator=n,this._simulationStyles=r,this.overlayIds={},e.on(Xy,fS,o=>{const{element:s}=o;this.removeTokenCounts(s),this.addTokenCounts(s)}),e.on(No,o=>{const s=Gn(".bts-token-count[data-scope-id]",t._overlayRoot);for(const c of s){const a=c.dataset.scopeId;ve(c).toggle("inactive",!this._scopeFilter.isShown(a))}})}nr.prototype.addTokenCounts=function(e){if(Fe(e,"bpmn:MessageFlow")||Fe(e,"bpmn:SequenceFlow"))return;const t=this._simulator.findScopes(n=>!n.destroyed&&n.children.some(i=>!i.destroyed&&i.element===e&&!i.children.length));this.addTokenCount(e,t)};nr.prototype.addTokenCount=function(e,t){if(!t.length)return;const n=t.map(s=>this._getTokenHTML(e,s)).join(""),i=Ie(`
    <div class="bts-token-count-parent">
      ${n}
    </div>
  `),r={bottom:hS,left:dS},o=this._overlays.add(e,"bts-token-count",{position:r,html:i,show:{minZoom:.5}});this.overlayIds[e.id]=o};nr.prototype.removeTokenCounts=function(e){this.removeTokenCount(e)};nr.prototype.removeTokenCount=function(e){const t=this.overlayIds[e.id];t&&(this._overlays.remove(t),delete this.overlayIds[e.id])};nr.prototype._getTokenHTML=function(e,t){const n=t.colors||this._getDefaultColors();return`
    <div data-scope-id="${t.id}" class="bts-token-count waiting ${this._scopeFilter.isShown(t)?"":"inactive"}"
         style="color: ${n.auxiliary}; background: ${n.primary}">
      ${t.getTokensByElement(e)}
    </div>
  `};nr.prototype._getDefaultColors=function(){return{primary:this._simulationStyles.get(gS),auxiliary:this._simuationStyles.get(mS)}};nr.$inject=["eventBus","overlays","simulator","scopeFilter","simulationStyles"];const vS={__depends__:[Bo,fc],__init__:["tokenCount"],tokenCount:["type",nr]},yS=[["Slow",.5],["Normal",1],["Fast",2]];function Ka(e,t,n){this._canvas=e,this._animation=t,this._eventBus=n,this._init(t.getAnimationSpeed()),n.on(Ot,i=>{i.active?ve(this._container).remove("hidden"):ve(this._container).add("hidden")}),n.on(Zy,i=>{this.setActive(i.speed)})}Ka.prototype.getToggleSpeed=function(e){return parseFloat(e.dataset.speed)};Ka.prototype._init=function(e){this._container=Ie(`
    <div class="bts-set-animation-speed hidden">
      ${B1()}
      <div class="bts-animation-speed-buttons">
        ${yS.map(([t,n],i)=>`
            <button title="Set animation speed = ${t}" data-speed="${n}" class="bts-animation-speed-button ${n===e?"active":""}">
              ${Array.from({length:i+1}).map(()=>P1()).join("")}
            </button>
          `).join("")}
      </div>
    </div>
  `),It.bind(this._container,"[data-speed]","click",t=>{const n=t.delegateTarget,i=this.getToggleSpeed(n);this._animation.setAnimationSpeed(i)}),this._canvas.getContainer().appendChild(this._container)};Ka.prototype.setActive=function(e){Gn("[data-speed]",this._container).forEach(t=>{const n=this.getToggleSpeed(t)===e;ve(t)[n?"add":"remove"]("active")})};Ka.$inject=["canvas","animation","eventBus"];const bS={__init__:["setAnimationSpeed"],setAnimationSpeed:["type",Ka]},wS="--token-simulation-grey-darken-30",_S="--token-simulation-grey-lighten-56";function xS(e,t){var n=e.outgoing.filter(_h),i=n.indexOf(t||e.sequenceFlow);return n[i+1]?n[i+1]:n[0]}function _h(e){return Fe(e,"bpmn:SequenceFlow")}const ES="exclusive-gateway-settings",SS=2e3;function Ho(e,t,n,i,r){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=r,e.on(Ot,o=>{o.active?this.setSequenceFlowsDefault():this.resetSequenceFlows()})}Ho.prototype.setSequenceFlowsDefault=function(){const e=this._elementRegistry.filter(t=>Fe(t,"bpmn:ExclusiveGateway"));for(const t of e)this.setSequenceFlow(t)};Ho.prototype.resetSequenceFlows=function(){this._elementRegistry.filter(t=>Fe(t,"bpmn:ExclusiveGateway")).forEach(t=>{t.outgoing.filter(_h).length&&this.resetSequenceFlow(t)})};Ho.prototype.resetSequenceFlow=function(e){this._simulator.setConfig(e,{activeOutgoing:void 0})};Ho.prototype.setSequenceFlow=function(e){const t=e.outgoing.filter(_h);if(t.length<2)return;const{activeOutgoing:n}=this._simulator.getConfig(e);let i;n?i=xS(e,n):i=t[0],this._simulator.setConfig(e,{activeOutgoing:i}),e.outgoing.forEach(r=>{const o=r===i?wS:_S,s=this._simulationStyles.get(o);this._elementColors.add(r,ES,{stroke:s},SS)})};Ho.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];const jf=5e4;function Vn(e,t,n){this._elementRegistry=e,this._eventBus=t,this._graphicsFactory=n,this._originalColors={},this._customColors={},t.on(Ot,jf,i=>{i.active?this._saveOriginalColors():(this._applyOriginalColors(),this._originalColors={},this._customColors={})}),t.on("saveXML.start",jf,()=>{this._applyOriginalColors(),t.once("saveXML.done",()=>this._applyCustomColors())})}Vn.$inject=["elementRegistry","eventBus","graphicsFactory"];Vn.prototype.add=function(e,t,n,i=1e3){let r=this._customColors[e.id];r||(r=this._customColors[e.id]={}),r[t]={...n,priority:i},this._applyHighestPriorityColor(e)};Vn.prototype.remove=function(e,t){const n=this._customColors[e.id];n&&(delete n[t],Object.keys(n)||delete this._customColors[e.id]),this._applyHighestPriorityColor(e)};Vn.prototype._get=function(e){const t=je(e);if(t){if(gb(e))return{stroke:t.label&&t.label.get("color")};if(Re(t,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return{fill:t.get("background-color"),stroke:t.get("border-color")}}};Vn.prototype._set=function(e,t={}){const{fill:n,stroke:i}=t,r=je(e);r&&(gb(e)?r.label&&r.label.set("color",i):Re(r,["bpmndi:BPMNEdge","bpmndi:BPMNShape"])&&(r.set("background-color",n),r.set("border-color",i)),this._forceRedraw(e))};Vn.prototype._saveOriginalColors=function(){this._originalColors={},this._elementRegistry.forEach(e=>{this._originalColors[e.id]=this._get(e)})};Vn.prototype._applyOriginalColors=function(){this._elementRegistry.forEach(e=>{const t=this._originalColors[e.id];t&&this._set(e,t)})};Vn.prototype._applyCustomColors=function(){this._elementRegistry.forEach(e=>{const t=this._customColors[e.id];t&&this._set(e,mb(t))})};Vn.prototype._applyHighestPriorityColor=function(e){const t=this._customColors[e.id];if(!t){this._set(e,this._originalColors[e.id]);return}this._set(e,mb(t))};Vn.prototype._forceRedraw=function(e){const t=this._elementRegistry.getGraphics(e),n=e.waypoints?"connection":"shape";this._graphicsFactory.update(n,e,t)};function gb(e){return"labelTarget"in e}function mb(e={}){const t=Object.values(e).reduce((n,i)=>{const{priority:r=1e3}=i;return!n||r>n.priority?i:n},void 0);if(t){const{priority:n,...i}=t;return i}}const xh={elementColors:["type",Vn]},CS={__depends__:[xh,fc],exclusiveGatewaySettings:["type",Ho]},AS="neutral-element-colors";function Eh(e,t,n){this._elementRegistry=t,this._elementColors=n,e.on(Ot,i=>{const{active:r}=i;r&&this._setNeutralColors()})}Eh.prototype._setNeutralColors=function(){this._elementRegistry.forEach(e=>{this._elementColors.add(e,AS,{stroke:"#212121",fill:"#fff"})})};Eh.$inject=["eventBus","elementRegistry","elementColors"];const TS={__depends__:[xh],__init__:["neutralElementColors"],neutralElementColors:["type",Eh]},MS="--token-simulation-grey-darken-30",$S="--token-simulation-grey-lighten-56",RS="inclusive-gateway-settings";function Si(e,t,n,i,r){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=r,e.on(Ot,o=>{o.active?this.setDefaults():this.reset()})}Si.prototype.setDefaults=function(){this._elementRegistry.filter(t=>B(t,"bpmn:InclusiveGateway")).forEach(t=>{t.outgoing.filter(qi).length>1&&this._setGatewayDefaults(t)})};Si.prototype.reset=function(){this._elementRegistry.filter(t=>B(t,"bpmn:InclusiveGateway")).forEach(t=>{t.outgoing.filter(qi).length>1&&this._resetGateway(t)})};Si.prototype.toggleSequenceFlow=function(e,t){const n=this._getActiveOutgoing(e),i=Sh(e),r=IS(e);let o;n.includes(t)?o=gp(n,t):o=gp(n,i).concat(t),o.length||(i?o=[i]:o=[r.find(s=>s!==t)]),this._setActiveOutgoing(e,o)};Si.prototype._getActiveOutgoing=function(e){const{activeOutgoing:t}=this._simulator.getConfig(e);return t};Si.prototype._setActiveOutgoing=function(e,t){this._simulator.setConfig(e,{activeOutgoing:t}),e.outgoing.filter(qi).forEach(i=>{const r=!t||t.includes(i)?MS:$S,o=this._simulationStyles.get(r);this._elementColors.add(i,RS,{stroke:o})})};Si.prototype._setGatewayDefaults=function(e){const t=e.outgoing.filter(qi),n=Sh(e),i=gp(t,n);this._setActiveOutgoing(e,i)};Si.prototype._resetGateway=function(e){this._setActiveOutgoing(e,void 0)};Si.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];function Sh(e){const t=ie(e).default;if(t)return e.outgoing.find(n=>ie(n)===t)}function IS(e){const t=Sh(e);return e.outgoing.filter(n=>ie(n)!==t)}function gp(e,t){return e.filter(n=>n!==t)}const kS={__depends__:[xh,fc],inclusiveGatewaySettings:["type",Si]};function mc(e,t){var n=this;this._canvas=t,this.entries=[],this._init(),e.on(Ot,function(i){var r=i.active;r?ve(n.container).remove("hidden"):ve(n.container).add("hidden")})}mc.prototype._init=function(){this.container=Ie('<div class="bts-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)};mc.prototype.addEntry=function(e,t){var n=0;this.entries.forEach(function(i){t>=i.index&&n++}),this.container.insertBefore(e,this.container.childNodes[n]),this.entries.push({entry:e,index:t})};mc.$inject=["eventBus","canvas"];const LS={__init__:["tokenSimulationPalette"],tokenSimulationPalette:["type",mc]},DS={__depends__:[Vy,d1,b1,V1,K1,tS,oS,lS,uS,pS,vS,bS,CS,TS,kS,LS]},PS=10001;function vb(e,t,n,i,r,o,s){let c=!1;e.on(Ot,PS,p=>{c=p.active,c&&(i.cancel(),n.cancel()),s._update()});function a(p,h,d){const f=p[h];p[h]=function(){return d.call(this,f,arguments)}}function u(p,h){a(p,h,function(d,f){if(!c)return d.apply(this,f)})}function l(p,h){a(p,h,function(d,f){if(c)throw new Error("model is read-only");return d.apply(this,f)})}u(n,"init"),u(i,"activate"),u(n,"init"),u(i,"activate"),l(o,"moveShape"),l(o,"updateAttachment"),l(o,"moveElements"),l(o,"moveConnection"),l(o,"layoutConnection"),l(o,"createConnection"),l(o,"createShape"),l(o,"createLabel"),l(o,"appendShape"),l(o,"removeElements"),l(o,"distributeElements"),l(o,"removeShape"),l(o,"removeConnection"),l(o,"replaceShape"),l(o,"pasteElements"),l(o,"alignElements"),l(o,"resizeShape"),l(o,"createSpace"),l(o,"updateWaypoints"),l(o,"reconnectStart"),l(o,"reconnectEnd"),a(r,"trigger",function(p,h){const d=h[0];if(!(c&&OS(["undo","redo","copy","paste","removeSelection","spaceTool","lassoTool","globalConnectTool","distributeElements","alignElements","directEditing"],d)))return p.apply(this,h)})}vb.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette"];function OS(e,t){return e.indexOf(t)>-1}const NS={__init__:["disableModeling"],disableModeling:["type",vb]};function vc(e,t,n,i){this._eventBus=e,this._canvas=t,this._selection=n,this._contextPad=i,this._active=!1,e.on("import.parse.start",()=>{this._active&&(this.toggleMode(!1),e.once("import.done",()=>{this.toggleMode(!0)}))}),e.on("diagram.init",()=>{this._canvasParent=this._canvas.getContainer().parentNode,this._palette=Ee(".djs-palette",this._canvas.getContainer()),this._init()})}vc.prototype._init=function(){this._container=Ie(`
    <div class="bts-toggle-mode">
      Token Simulation <span class="bts-toggle">${ub()}</span>
    </div>
  `),ce.bind(this._container,"click",()=>this.toggleMode()),this._canvas.getContainer().appendChild(this._container)};vc.prototype.toggleMode=function(e=!this._active){if(e!==this._active){if(e)this._container.innerHTML=`Token Simulation <span class="bts-toggle">${H1()}</span>`,ve(this._canvasParent).add("simulation"),ve(this._palette).add("hidden");else{this._container.innerHTML=`Token Simulation <span class="bts-toggle">${ub()}</span>`,ve(this._canvasParent).remove("simulation"),ve(this._palette).remove("hidden");const t=this._selection.get();t.length===1&&this._contextPad.open(t[0])}this._eventBus.fire(Ot,{active:e}),this._active=e}};vc.$inject=["eventBus","canvas","selection","contextPad"];const BS={__init__:["toggleMode"],toggleMode:["type",vc]};function yb(e,t,n,i,r,o){var s=!1;r.register({toggleTokenSimulation:function(){t.toggleMode()}}),r.register({togglePauseTokenSimulation:function(){s&&n.toggle()}}),r.register({resetTokenSimulation:function(){s&&i.resetSimulation()}});const c=o.get("log",!1);c&&r.register({toggleTokenSimulationLog:function(){c.toggle()}}),e.on(Ot,a=>{s=a.active})}yb.$inject=["eventBus","toggleMode","pauseSimulation","resetSimulation","editorActions","injector"];const FS={__init__:["tokenSimulationEditorActions"],tokenSimulationEditorActions:["type",yb]},jS=1e4;function bb(e,t){var n=t.get("editorActions",!1),i=t.get("keyboard",!1);if(!i||!n)return;var r=!1;function o(s){if(Ls(["t","T"],s))return n.trigger("toggleTokenSimulation"),!0;if(r){if(Ls(["l","L"],s))return n.trigger("toggleTokenSimulationLog"),!0;if(Ls([" ","Spacebar"],s))return n.trigger("togglePauseTokenSimulation"),!0;if(Ls(["r","R"],s))return n.trigger("resetTokenSimulation"),!0}}e.on("keyboard.init",function(){i.addListener(jS,function(s){var c=s.keyEvent;o(c)})}),e.on(Ot,function(s){var c=s.active;c?r=!0:r=!1})}bb.$inject=["eventBus","injector"];function Ls(e,t){return e.indexOf(t.key)>-1}const HS={__init__:["tokenSimulationKeyboardBindings"],tokenSimulationKeyboardBindings:["type",bb]},WS={__depends__:[DS,NS,BS,FS,HS]},GS={"Append EndEvent":"","Append Gateway":"","Append Task":"","Append Intermediate/Boundary Event":"/","Activate the global connect tool":"","Append {type}":" {type}","Add Lane above":"","Divide into two Lanes":"","Divide into three Lanes":"","Add Lane below":"","Append compensation activity":"","Append Exclusive Gateway":"","Append Parallel Gateway":"","Change type":"","Connect using Association":"","Connect using Sequence/MessageFlow or Association":"/","Connect using DataInputAssociation":"",Remove:"","Activate the hand tool":"","Activate the lasso tool":"","Activate the create/remove space tool":"/","Create expanded SubProcess":"","Create IntermediateThrowEvent/BoundaryEvent":"/","Create Pool/Participant":"/","Parallel Multi Instance":"","Sequential Multi Instance":"",DataObjectReference:"",DataStoreReference:"",Loop:"","Ad-hoc":"","Create {type}":" {type}",Task:"","Send Task":"","Receive Task":"","User Task":"","Manual Task":"","Business Rule Task":"","Service Task":"","Script Task":"","Call Activity":"","Sub Process (collapsed)":"","Sub Process (expanded)":"","Start Event":"",StartEvent:"","Intermediate Throw Event":"","End Event":"",EndEvent:"","Create StartEvent":"","Create EndEvent":"","Create Task":"","Create User Task":"","Create Script Task":"","Create Service Task":"","Create Receive Task":"","Create Gateway":"","Create DataObjectReference":"","Create DataStoreReference":"","Create Group":"","Create Intermediate/Boundary Event":"/","Message start event":"","Start event":"","Intermediate throw event":"","End event":"","Timer start event":"","Message intermediate catch event":"","Message intermediate throw event":"","Escalation intermediate throw event":"","Conditional intermediate catch event":"","Compensation intermediate throw event":"","Link intermediate catch event":"","Link intermediate throw event":"","Signal intermediate catch event":"","Signal intermediate throw event":"","Timer intermediate catch event":"","Conditional start event":"","Signal start event":"","Error start event":"","Escalation start event":"","Compensation start event":"","Message Start Event (non-interrupting)":"","Timer Start Event (non-interrupting)":"","Conditional Start Event (non-interrupting)":"","Signal Start Event (non-interrupting)":"","Escalation Start Event (non-interrupting)":"","Message Intermediate Catch Event":"","Message Intermediate Throw Event":"","Timer Intermediate Catch Event":"","Escalation Intermediate Throw Event":"","Conditional Intermediate Catch Event":"","Link Intermediate Catch Event":"","Link Intermediate Throw Event":"","Compensation Intermediate Throw Event":"","Signal Intermediate Catch Event":"","Signal Intermediate Throw Event":"","Message end event":"","Escalation end event":"","Error end event":"","Cancel end event":"","Compensation end event":"","Signal end event":"","Terminate end event":"","Message Boundary Event":"","Message Boundary Event (non-interrupting)":"","Timer Boundary Event":"","Timer Boundary Event (non-interrupting)":"","Escalation Boundary Event":"","Escalation Boundary Event (non-interrupting)":"","Conditional Boundary Event":"","Conditional Boundary Event (non-interrupting)":"","Error Boundary Event":"","Cancel Boundary Event":"","Signal Boundary Event":"","Signal Boundary Event (non-interrupting)":"","Compensation Boundary Event":"","Exclusive Gateway":"","Parallel Gateway":"","Inclusive Gateway":"","Complex Gateway":"","Event based Gateway":"",Transaction:"","Sub Process":"","Event Sub Process":"","Collapsed Pool":"","Expanded Pool":"","no parent for {element} in {parent}":"{parent}{element}","no shape type specified":"","flow elements must be children of pools/participants":"/","out of bounds release":"out of bounds release","more than {count} child lanes":"{count} ","element required":"","diagram not part of bpmn:Definitions":"bpmn","no diagram to display":"","no process or collaboration to display":"/","element {element} referenced by {referenced}#{property} not yet drawn":"{referenced}#{property}{element}","already rendered {element}":"{element} ","failed to import {element}":"{element}",Id:"",Name:"",General:"",Details:"","Message Name":"",Message:"",Initiator:"","Asynchronous Continuations":"","Asynchronous Before":"","Asynchronous After":"","Job Configuration":"",Exclusive:"","Job Priority":"","Retry Time Cycle":"",Documentation:"","Element Documentation":"","History Configuration":"","History Time To Live":"",Forms:"","Form Key":"key","Form Fields":"","Business Key":"key","Form Field":"",ID:"",Type:"",Label:"","Default Value":"","Default Flow":"","Conditional Flow":"","Sequence Flow":"",Validation:"","Add Constraint":"",Config:"",Properties:"","Add Property":"",Value:"",Listeners:"","Execution Listener":"","Event Type":"","Listener Type":"","Java Class":"Java",Expression:"","Must provide a value":"","Delegate Expression":"",Script:"","Script Format":"","Script Type":"","Inline Script":"","External Script":"",Resource:"","Field Injection":"",Extensions:"","Input/Output":"/","Input Parameters":"","Output Parameters":"",Parameters:"","Output Parameter":"","Timer Definition Type":"","Timer Definition":"",Date:"",Duration:"",Cycle:"",Signal:"","Signal Name":"",Escalation:"",Error:"","Link Name":"",Condition:"","Variable Name":"","Variable Event":"","Specify more than one variable change event as a comma separated list.":"","Wait for Completion":"","Activity Ref":"","Version Tag":"",Executable:"","External Task Configuration":"","Task Priority":"",External:"",Connector:"","Must configure Connector":"","Connector Id":"",Implementation:"","Field Injections":"",Fields:"","Result Variable":"",Topic:"","Configure Connector":"","Input Parameter":"",Assignee:"","Candidate Users":"","Candidate Groups":"","Due Date":"","Follow Up Date":"",Priority:"","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"EL ${someDate} ,ISO2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"EL ${someDate} ,ISO2015-06-26T09:54:00",Variables:"","Candidate Starter Configuration":"","Candidate Starter Groups":"","This maps to the process definition key.":"","Candidate Starter Users":"","Specify more than one user as a comma separated list.":"","Tasklist Configuration":"Tasklist",Startable:"","Specify more than one group as a comma separated list.":""},zS={zh:GS};function Hf(e){const t=zS[e];return function(i,r){return r=r||{},i=t[i]||i,i.replace(/{([^}]+)}/g,function(o,s){return r[s]||"{"+s+"}"})}}function VS(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function US(e,t){return t.appendChild(VS(e,t))}function de(e,t){return US(t,e),e}var mp=2,wb={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":mp,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":mp,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function YS(e,t){return wb[t]?e.style[t]:e.getAttributeNS(null,t)}function _b(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=wb[i];r?(r===mp&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function ZS(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)_b(e,r,t[r])}function te(e,t,n){if(typeof t=="string")if(n!==void 0)_b(e,t,n);else return YS(e,t);else ZS(e,t);return e}const XS=Object.prototype.toString;function ke(e){return new Ki(e)}function Ki(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Ki.prototype.add=function(e){return this.list.add(e),this};Ki.prototype.remove=function(e){return XS.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Ki.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Ki.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Ki.prototype.array=function(){return Array.from(this.list)};Ki.prototype.has=Ki.prototype.contains=function(e){return this.list.contains(e)};function Yr(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Qa(e){return e.cloneNode(!0)}var Ch={svg:"http://www.w3.org/2000/svg"},Wf='<svg xmlns="'+Ch.svg+'"';function KS(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Ch.svg)===-1&&(e=Wf+e.substring(4)):(e=Wf+">"+e+"</svg>",t=!0);var n=QS(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function QS(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ue(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=KS(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Ch.svg,e),t&&te(n,t),n}var Cu=null;function xb(){return Cu===null&&(Cu=ue("svg")),Cu}function Gf(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function JS(e,t,n,i,r,o){var s=xb().createSVGMatrix();switch(arguments.length){case 0:return s;case 1:return Gf(s,e);case 6:return Gf(s,{a:e,b:t,c:n,d:i,e:r,f:o})}}function yo(e){return xb().createSVGTransform()}var zf=/([&<>]{1})/g,qS=/([&<>\n\r"]{1})/g,eC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function Au(e,t){function n(i,r){return eC[r]||r}return e.replace(t,n)}function Eb(e,t){var n,i,r,o,s;switch(e.nodeType){case 3:t.push(Au(e.textContent,zf));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',Au(o.value,qS),'"');if(e.hasChildNodes()){for(t.push(">"),s=e.childNodes,n=0,i=s.length;n<i;++n)Eb(s.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",Au(e.nodeValue,zf),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function tC(e){for(var t=e.firstChild,n=[];t;)Eb(t,n),t=t.nextSibling;return n.join("")}function Vf(e,t){return tC(e)}function Je(e){var t=e.parentNode;return t&&t.removeChild(e),e}function nC(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function iC(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(nC(e,i))}function wo(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),iC(n,t)),n.consolidate()}const rC=/^class[ {]/;function oC(e){return rC.test(e.toString())}function Ah(e){return Array.isArray(e)}function Tu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gl(...e){e.length===1&&Ah(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const aC=/constructor\s*[^(]*\(\s*([^)]*)\)/m,sC=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,lC=/\/\*([^*]*)\*\//m;function cC(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(oC(e)?aC:sC);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(lC);return(r&&r[1]||i).trim()})||[]}function Sb(e,t){const n=t||{get:function(E,y){if(i.push(E),y===!1)return null;throw c(`No provider for "${E}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),s=o.injector=this,c=function(E){const y=i.join(" -> ");return i.length=0,new Error(y?`${E} (Resolving: ${y})`:E)};function a(E,y){if(!r[E]&&E.includes(".")){const x=E.split(".");let v=a(x.shift());for(;x.length;)v=v[x.shift()];return v}if(Tu(o,E))return o[E];if(Tu(r,E)){if(i.indexOf(E)!==-1)throw i.push(E),c("Cannot resolve circular dependency!");return i.push(E),o[E]=r[E][0](r[E][1]),i.pop(),o[E]}return n.get(E,y)}function u(E,y){if(typeof y>"u"&&(y={}),typeof E!="function")if(Ah(E))E=gl(E.slice());else throw c(`Cannot invoke "${E}". Expected a function!`);const v=(E.$inject||cC(E)).map(S=>Tu(y,S)?y[S]:a(S));return{fn:E,dependencies:v}}function l(E){const{fn:y,dependencies:x}=u(E),v=Function.prototype.bind.call(y,null,...x);return new v}function p(E,y,x){const{fn:v,dependencies:S}=u(E,x);return v.apply(y,S)}function h(E){return gl(y=>E.get(y))}function d(E,y){if(y&&y.length){const x=Object.create(null),v=Object.create(null),S=[],M=[],$=[];let T,I,C,b;for(let A in r)T=r[A],y.indexOf(A)!==-1&&(T[2]==="private"?(I=S.indexOf(T[3]),I===-1?(C=T[3].createChild([],y),b=h(C),S.push(T[3]),M.push(C),$.push(b),x[A]=[b,A,"private",C]):x[A]=[$[I],A,"private",M[I]]):x[A]=[T[2],T[1]],v[A]=!0),(T[2]==="factory"||T[2]==="type")&&T[1].$scope&&y.forEach(R=>{T[1].$scope.indexOf(R)!==-1&&(x[A]=[T[2],T[1]],v[R]=!0)});y.forEach(A=>{if(!v[A])throw new Error('No provider for "'+A+'". Cannot use provider from the parent!')}),E.unshift(x)}return new Sb(E,s)}const f={factory:p,type:l,value:function(E){return E}};function g(E,y){const x=E.__init__||[];return function(){x.forEach(v=>{typeof v=="string"?y.get(v):y.invoke(v)})}}function m(E){const y=E.__exports__;if(y){const x=E.__modules__,v=Object.keys(E).reduce((I,C)=>(C!=="__exports__"&&C!=="__modules__"&&C!=="__init__"&&C!=="__depends__"&&(I[C]=E[C]),I),Object.create(null)),S=(x||[]).concat(v),M=d(S),$=gl(function(I){return M.get(I)});y.forEach(function(I){r[I]=[$,I,"private",M]});const T=(E.__init__||[]).slice();return T.unshift(function(){M.init()}),E=Object.assign({},E,{__init__:T}),g(E,M)}return Object.keys(E).forEach(function(x){if(x==="__init__"||x==="__depends__")return;const v=E[x];if(v[2]==="private"){r[x]=v;return}const S=v[0],M=v[1];r[x]=[f[S],uC(S,M),S]}),g(E,s)}function w(E,y){return E.indexOf(y)!==-1||(E=(y.__depends__||[]).reduce(w,E),E.indexOf(y)!==-1)?E:E.concat(y)}function _(E){const y=E.reduce(w,[]).map(m);let x=!1;return function(){x||(x=!0,y.forEach(v=>v()))}}this.get=a,this.invoke=p,this.instantiate=l,this.createChild=d,this.init=_(e)}function uC(e,t){return e!=="value"&&Ah(t)&&(t=gl(t.slice())),t}var pC=1e3;function Ci(e,t){var n=this;t=t||pC,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,s=r.element,c=r.gfx,a=r.attrs;if(n.canRender(s))return o==="render.shape"?n.drawShape(c,s,a):n.drawConnection(c,s,a)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Ci.prototype.canRender=function(e){};Ci.prototype.drawShape=function(e,t){};Ci.prototype.drawConnection=function(e,t){};Ci.prototype.getShapePath=function(e){};Ci.prototype.getConnectionPath=function(e){};function Zr(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function hC(e){return["M",e.x,e.y]}function Mu(e){return["L",e.x,e.y]}function dC(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function fC(e,t){const n=e.length,i=[hC(e[0])];for(let r=1;r<n;r++){const o=e[r-1],s=e[r],c=e[r+1];if(!c||!t){i.push(Mu(s));continue}const a=Math.min(t,vp(s.x-o.x,s.y-o.y),vp(c.x-s.x,c.y-s.y));if(!a){i.push(Mu(s));continue}const u=Ds(s,o,a),l=Ds(s,o,a*.5),p=Ds(s,c,a),h=Ds(s,c,a*.5);i.push(Mu(u)),i.push(dC(l,h,p))}return i}function Ds(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=vp(i,r),s=n/o;return{x:e.x+i*s,y:e.y+r*s}}function vp(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function yc(e,t,n){he(t)&&(n=t,t=null),t||(t={});const i=ue("path",t);return he(n)&&(i.dataset.cornerRadius=String(n)),Cb(i,e)}function Cb(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return te(e,{d:Zr(fC(t,n))}),e}function bc(e){return $e(e,function(t){return!Be(e,function(n){return n!==t&&Ab(t,n)})})}function Ab(e,t){if(t){if(e===t)return t;if(e.parent)return Ab(e.parent,t)}}function Uf(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Xr(e,t,n){n=n||0,xe(e)||(e=[e]),Z(e,function(i,r){var o=t(i,r,n);xe(o)&&o.length&&Xr(o,t,n+1)})}function gC(e,t,n){var i=[],r=[];return Xr(e,function(o,s,c){Uf(i,o,t);var a=o.children;if(a&&Uf(r,a,t))return a}),i}function Ja(e,t){return gC(e,!t)}function mC(e,t,n){Or(t)&&(t=!0),ht(t)&&(n=t,t=!0),n=n||{};var i=sa(n.allShapes),r=sa(n.allConnections),o=sa(n.enclosedElements),s=sa(n.enclosedConnections),c=sa(n.topLevel,t&&Oo(e,function(l){return l.id}));function a(l){c[l.source.id]&&c[l.target.id]&&(c[l.id]=[l]),i[l.source.id]&&i[l.target.id]&&(s[l.id]=o[l.id]=l),r[l.id]=l}function u(l){if(o[l.id]=l,l.waypoints)s[l.id]=r[l.id]=l;else return i[l.id]=l,Z(l.incoming,a),Z(l.outgoing,a),l.children}return Xr(e,u),{allShapes:i,allConnections:r,topLevel:c,enclosedConnections:s,enclosedElements:o}}function kt(e,t){t=!!t,xe(e)||(e=[e]);var n,i,r,o;return Z(e,function(s){var c=s;s.waypoints&&!t&&(c=kt(s.waypoints,!0));var a=c.x,u=c.y,l=c.height||0,p=c.width||0;(a<n||n===void 0)&&(n=a),(u<i||i===void 0)&&(i=u),(a+p>r||r===void 0)&&(r=a+p),(u+l>o||o===void 0)&&(o=u+l)}),{x:n,y:i,height:o-i,width:r-n}}function vC(e,t){var n={};return Z(e,function(i){var r=i;r.waypoints&&(r=kt(r)),!he(t.y)&&r.x>t.x&&(n[i.id]=i),!he(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(he(t.width)&&he(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!he(t.width)||!he(t.height))&&(n[i.id]=i)}),n}function Tb(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function Mb(e){return!!(e&&e.isFrame)}function sa(e,t){return J({},e||{},t||{})}var yC=1;function ir(e,t){Ci.call(this,e,yC),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}me(ir,Ci);ir.prototype.canRender=function(){return!0};ir.prototype.drawShape=function(t,n,i){var r=ue("rect");return te(r,{x:0,y:0,width:n.width||0,height:n.height||0}),Mb(n)?te(r,J({},this.FRAME_STYLE,i||{})):te(r,J({},this.SHAPE_STYLE,i||{})),de(t,r),r};ir.prototype.drawConnection=function(t,n,i){var r=yc(n.waypoints,J({},this.CONNECTION_STYLE,i||{}));return de(t,r),r};ir.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,s=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return Zr(s)};ir.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return Zr(o)};ir.$inject=["eventBus","styles"];function bC(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return J(o,{class:n})},this.style=function(n,i){!xe(n)&&!i&&(i=n,n=[]);var r=un(n,function(o,s){return J(o,e[s]||{})},{});return i?J(r,i):r},this.computeStyle=function(n,i,r){return xe(i)||(r=i,i=[]),t.style(i||[],J({},r,n||{}))}}const wC={__init__:["defaultRenderer"],defaultRenderer:["type",ir],styles:["type",bC]};function wt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Tt(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Th(e,t){return!e||!t?-1:e.indexOf(t)}function qa(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Mh(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=qa(e,t);return Math.abs(r/o)<=i}var _C=2;function gi(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,o]of Object.entries(i))if(xC(r,n))return o;return!1}function xC(e,t){const n=t[0];return jr(t,function(i){return Math.abs(n[e]-i[e])<=_C})}function Yf(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function yp(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var EC=/,?([a-z]),?/gi,Zf=parseFloat,vt=Math,Bi=vt.PI,Qn=vt.min,Jn=vt.max,Xf=vt.pow,Vi=vt.abs,SC=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,CC=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,Dl=Array.isArray||function(e){return e instanceof Array};function $h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Sa(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)$h(e,n)&&(t[n]=Sa(e[n]));return t}function AC(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function TC(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join(""),r=t.cache=t.cache||{},o=t.count=t.count||[];return $h(r,i)?(AC(o,i),r[i]):(o.length>=1e3&&delete r[o.shift()],o.push(i),r[i]=e(...arguments),r[i])}return t}function MC(e){if(!e)return null;var t=_o(e);if(t.arr)return Sa(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return Dl(e)&&Dl(e[0])&&(i=Sa(e)),i.length||String(e).replace(SC,function(r,o,s){var c=[],a=o.toLowerCase();for(s.replace(CC,function(u,l){l&&c.push(+l)}),a=="m"&&c.length>2&&(i.push([o,...c.splice(0,2)]),a="l",o=o=="m"?"l":"L");c.length>=n[a]&&(i.push([o,...c.splice(0,n[a])]),!!n[a]););}),i.toString=_o.toString,t.arr=Sa(i),i}function _o(e){var t=_o.ps=_o.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)$h(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function bp(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function $b(){return this.join(",").replace(EC,"$1")}function Pl(e){var t=Sa(e);return t.toString=$b,t}function Kf(e,t,n,i,r,o,s,c,a){var u=1-a,l=Xf(u,3),p=Xf(u,2),h=a*a,d=h*a,f=l*e+p*3*a*n+u*3*a*a*r+d*s,g=l*t+p*3*a*i+u*3*a*a*o+d*c;return{x:Ol(f),y:Ol(g)}}function Qf(e){var t=LC(...e);return bp(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Fi(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function $C(e,t){return e=bp(e),t=bp(t),Fi(t,e.x,e.y)||Fi(t,e.x2,e.y)||Fi(t,e.x,e.y2)||Fi(t,e.x2,e.y2)||Fi(e,t.x,t.y)||Fi(e,t.x2,t.y)||Fi(e,t.x,t.y2)||Fi(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function Jf(e,t,n,i,r){var o=-3*t+9*n-9*i+3*r,s=e*o+6*t-12*n+6*i;return e*s-3*t+3*n}function qf(e,t,n,i,r,o,s,c,a){a==null&&(a=1),a=a>1?1:a<0?0:a;for(var u=a/2,l=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<l;f++){var g=u*p[f]+u,m=Jf(g,e,n,r,s),w=Jf(g,t,i,o,c),_=m*m+w*w;d+=h[f]*vt.sqrt(_)}return u*d}function RC(e,t,n,i,r,o,s,c){if(!(Jn(e,n)<Qn(r,s)||Qn(e,n)>Jn(r,s)||Jn(t,i)<Qn(o,c)||Qn(t,i)>Jn(o,c))){var a=(e*i-t*n)*(r-s)-(e-n)*(r*c-o*s),u=(e*i-t*n)*(o-c)-(t-i)*(r*c-o*s),l=(e-n)*(o-c)-(t-i)*(r-s);if(l){var p=Ol(a/l),h=Ol(u/l),d=+p.toFixed(2),f=+h.toFixed(2);if(!(d<+Qn(e,n).toFixed(2)||d>+Jn(e,n).toFixed(2)||d<+Qn(r,s).toFixed(2)||d>+Jn(r,s).toFixed(2)||f<+Qn(t,i).toFixed(2)||f>+Jn(t,i).toFixed(2)||f<+Qn(o,c).toFixed(2)||f>+Jn(o,c).toFixed(2)))return{x:p,y:h}}}}function Ol(e){return Math.round(e*1e11)/1e11}function IC(e,t,n){var i=Qf(e),r=Qf(t);if(!$C(i,r))return n?0:[];for(var o=qf(...e),s=qf(...t),c=eg(e)?1:~~(o/5)||1,a=eg(t)?1:~~(s/5)||1,u=[],l=[],p={},h=n?0:[],d=0;d<c+1;d++){var f=Kf(...e,d/c);u.push({x:f.x,y:f.y,t:d/c})}for(d=0;d<a+1;d++)f=Kf(...t,d/a),l.push({x:f.x,y:f.y,t:d/a});for(d=0;d<c;d++)for(var g=0;g<a;g++){var m=u[d],w=u[d+1],_=l[g],E=l[g+1],y=Vi(w.x-m.x)<.01?"y":"x",x=Vi(E.x-_.x)<.01?"y":"x",v=RC(m.x,m.y,w.x,w.y,_.x,_.y,E.x,E.y),S;if(v){if(S=v.x.toFixed(9)+"#"+v.y.toFixed(9),p[S])continue;p[S]=!0;var M=m.t+Vi((v[y]-m[y])/(w[y]-m[y]))*(w.t-m.t),$=_.t+Vi((v[x]-_[x])/(E[x]-_[x]))*(E.t-_.t);M>=0&&M<=1&&$>=0&&$<=1&&(n?h++:h.push({x:v.x,y:v.y,t1:M,t2:$}))}}return h}function Rb(e,t,n){e=ng(e),t=ng(t);for(var i,r,o,s,c,a,u,l,p,h,d=n?0:[],f=0,g=e.length;f<g;f++){var m=e[f];if(m[0]=="M")i=c=m[1],r=a=m[2];else{m[0]=="C"?(p=[i,r,...m.slice(1)],i=p[6],r=p[7]):(p=[i,r,i,r,c,a,c,a],i=c,r=a);for(var w=0,_=t.length;w<_;w++){var E=t[w];if(E[0]=="M")o=u=E[1],s=l=E[2];else{E[0]=="C"?(h=[o,s,...E.slice(1)],o=h[6],s=h[7]):(h=[o,s,o,s,u,l,u,l],o=u,s=l);var y=IC(p,h,n);if(n)d+=y;else{for(var x=0,v=y.length;x<v;x++)y[x].segment1=f,y[x].segment2=w,y[x].bez1=p,y[x].bez2=h;d=d.concat(y)}}}}}return d}function kC(e){var t=_o(e);if(t.abs)return Pl(t.abs);if((!Dl(e)||!Dl(e&&e[0]))&&(e=MC(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,s=0,c=0,a;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],o=i,s=r,c++,n[0]=["M",i,r]);for(var u,l,p=c,h=e.length;p<h;p++){if(n.push(u=[]),l=e[p],a=l[0],a!=a.toUpperCase())switch(u[0]=a.toUpperCase(),u[0]){case"A":u[1]=l[1],u[2]=l[2],u[3]=l[3],u[4]=l[4],u[5]=l[5],u[6]=+l[6]+i,u[7]=+l[7]+r;break;case"V":u[1]=+l[1]+r;break;case"H":u[1]=+l[1]+i;break;case"M":o=+l[1]+i,s=+l[2]+r;default:for(var d=1,f=l.length;d<f;d++)u[d]=+l[d]+(d%2?i:r)}else for(var g=0,m=l.length;g<m;g++)u[g]=l[g];switch(a=a.toUpperCase(),u[0]){case"Z":i=+o,r=+s;break;case"H":i=u[1];break;case"V":r=u[1];break;case"M":o=u[u.length-2],s=u[u.length-1];default:i=u[u.length-2],r=u[u.length-1]}}return n.toString=$b,t.abs=Pl(n),n}function eg(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Ps(e,t,n,i){return[e,t,n,i,n,i]}function tg(e,t,n,i,r,o){var s=.3333333333333333,c=2/3;return[s*e+c*n,s*t+c*i,s*r+c*n,s*o+c*i,r,o]}function Ib(e,t,n,i,r,o,s,c,a,u){var l=Bi*120/180,p=Bi/180*(+r||0),h=[],d,f=TC(function(D,L,j){var F=D*vt.cos(j)-L*vt.sin(j),Q=D*vt.sin(j)+L*vt.cos(j);return{x:F,y:Q}});if(u)S=u[0],M=u[1],x=u[2],v=u[3];else{d=f(e,t,-p),e=d.x,t=d.y,d=f(c,a,-p),c=d.x,a=d.y;var g=(e-c)/2,m=(t-a)/2,w=g*g/(n*n)+m*m/(i*i);w>1&&(w=vt.sqrt(w),n=w*n,i=w*i);var _=n*n,E=i*i,y=(o==s?-1:1)*vt.sqrt(Vi((_*E-_*m*m-E*g*g)/(_*m*m+E*g*g))),x=y*n*m/i+(e+c)/2,v=y*-i*g/n+(t+a)/2,S=vt.asin(((t-v)/i).toFixed(9)),M=vt.asin(((a-v)/i).toFixed(9));S=e<x?Bi-S:S,M=c<x?Bi-M:M,S<0&&(S=Bi*2+S),M<0&&(M=Bi*2+M),s&&S>M&&(S=S-Bi*2),!s&&M>S&&(M=M-Bi*2)}var $=M-S;if(Vi($)>l){var T=M,I=c,C=a;M=S+l*(s&&M>S?1:-1),c=x+n*vt.cos(M),a=v+i*vt.sin(M),h=Ib(c,a,n,i,r,0,s,I,C,[M,T,x,v])}$=M-S;var b=vt.cos(S),A=vt.sin(S),R=vt.cos(M),k=vt.sin(M),O=vt.tan($/4),N=4/3*n*O,W=4/3*i*O,z=[e,t],V=[e+N*A,t-W*b],U=[c+N*k,a-W*R],H=[c,a];if(V[0]=2*z[0]-V[0],V[1]=2*z[1]-V[1],u)return[V,U,H].concat(h);h=[V,U,H].concat(h).join().split(",");for(var Y=[],K=0,P=h.length;K<P;K++)Y[K]=K%2?f(h[K-1],h[K],p).y:f(h[K],h[K+1],p).x;return Y}function LC(e,t,n,i,r,o,s,c){for(var a=[],u=[[],[]],l,p,h,d,f,g,m,w,_=0;_<2;++_){if(_==0?(p=6*e-12*n+6*r,l=-3*e+9*n-9*r+3*s,h=3*n-3*e):(p=6*t-12*i+6*o,l=-3*t+9*i-9*o+3*c,h=3*i-3*t),Vi(l)<1e-12){if(Vi(p)<1e-12)continue;d=-h/p,0<d&&d<1&&a.push(d);continue}m=p*p-4*h*l,w=vt.sqrt(m),!(m<0)&&(f=(-p+w)/(2*l),0<f&&f<1&&a.push(f),g=(-p-w)/(2*l),0<g&&g<1&&a.push(g))}for(var E=a.length,y=E,x;E--;)d=a[E],x=1-d,u[0][E]=x*x*x*e+3*x*x*d*n+3*x*d*d*r+d*d*d*s,u[1][E]=x*x*x*t+3*x*x*d*i+3*x*d*d*o+d*d*d*c;return u[0][y]=e,u[1][y]=t,u[0][y+1]=s,u[1][y+1]=c,u[0].length=u[1].length=y+2,{x0:Qn(...u[0]),y0:Qn(...u[1]),x1:Jn(...u[0]),y1:Jn(...u[1])}}function ng(e){var t=_o(e);if(t.curve)return Pl(t.curve);for(var n=kC(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(d,f,g){var m,w;if(!d)return["C",f.x,f.y,f.x,f.y,f.x,f.y];switch(!(d[0]in{T:1,Q:1})&&(f.qx=f.qy=null),d[0]){case"M":f.X=d[1],f.Y=d[2];break;case"A":d=["C",...Ib(f.x,f.y,...d.slice(1))];break;case"S":g=="C"||g=="S"?(m=f.x*2-f.bx,w=f.y*2-f.by):(m=f.x,w=f.y),d=["C",m,w,...d.slice(1)];break;case"T":g=="Q"||g=="T"?(f.qx=f.x*2-f.qx,f.qy=f.y*2-f.qy):(f.qx=f.x,f.qy=f.y),d=["C",...tg(f.x,f.y,f.qx,f.qy,d[1],d[2])];break;case"Q":f.qx=d[1],f.qy=d[2],d=["C",...tg(f.x,f.y,d[1],d[2],d[3],d[4])];break;case"L":d=["C",...Ps(f.x,f.y,d[1],d[2])];break;case"H":d=["C",...Ps(f.x,f.y,d[1],f.y)];break;case"V":d=["C",...Ps(f.x,f.y,f.x,d[1])];break;case"Z":d=["C",...Ps(f.x,f.y,f.X,f.Y)];break}return d},o=function(d,f){if(d[f].length>7){d[f].shift();for(var g=d[f];g.length;)s[f]="A",d.splice(f++,0,["C",...g.splice(0,6)]);d.splice(f,1),l=n.length}},s=[],c="",a="",u=0,l=n.length;u<l;u++){n[u]&&(c=n[u][0]),c!="C"&&(s[u]=c,u&&(a=s[u-1])),n[u]=r(n[u],i,a),s[u]!="A"&&c=="C"&&(s[u]="C"),o(n,u);var p=n[u],h=p.length;i.x=p[h-2],i.y=p[h-1],i.bx=Zf(p[h-4])||i.x,i.by=Zf(p[h-3])||i.y}return t.curve=Pl(n),n}function et(e){return ht(e)&&Ut(e,"waypoints")}function Ge(e){return ht(e)&&Ut(e,"labelTarget")}function kb(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function vi(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function be(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function wc(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function DC(e){return vi({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function PC(e){for(var t=e.waypoints,n=t.reduce(function(u,l,p){var h=t[p-1];if(h){var d=u[u.length-1],f=d&&d.endLength||0,g=BC(h,l);u.push({start:h,end:l,startLength:f,endLength:f+g,length:g})}return u},[]),i=n.reduce(function(u,l){return u+l.length},0),r=i/2,o=0,s=n[o];s.endLength<r;)s=n[++o];var c=(r-s.startLength)/s.length,a={x:s.start.x+(s.end.x-s.start.x)*c,y:s.start.y+(s.end.y-s.start.y)*c};return a}function Se(e){return et(e)?PC(e):DC(e)}function Zt(e,t,n){n=n||0,ht(n)||(n={x:n,y:n});var i=be(e),r=be(t),o=i.bottom+n.y<=r.top,s=i.left-n.x>=r.right,c=i.top-n.y>=r.bottom,a=i.right+n.x<=r.left,u=o?"top":c?"bottom":null,l=a?"left":s?"right":null;return l&&u?u+"-"+l:l||u||"intersect"}function wp(e,t,n){var i=OC(e,t);return i.length===1||i.length===2&&qa(i[0],i[1])<1?vi(i[0]):i.length>1?(i=ii(i,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),vi(i[n?0:i.length-1])):null}function OC(e,t){return Rb(e,t)}function NC(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],qa(n,r)===0||Mh(i,r,n)?e.splice(t,1):t++;return e}function BC(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ml(e,t){return Math.round(e*t)/t}function ig(e){return he(e)?e+"px":e}function FC(e){for(;e.parent;)e=e.parent;return e}function jC(e){e=J({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Vt(n,{position:"relative",overflow:"hidden",width:ig(e.width),height:ig(e.height)}),t.appendChild(n),n}function Lb(e,t,n){const i=ue("g");ke(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const HC="base",Db=0,WC=1,GC={shape:["x","y","width","height"],connection:["waypoints"]};function Me(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}Me.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];Me.prototype._init=function(e){const t=this._eventBus,n=this._container=jC(e),i=this._svg=ue("svg");te(i,{width:"100%",height:"100%"}),de(n,i);const r=this._viewport=Lb(i,"viewport");e.deferUpdate&&(this._viewboxChanged=Oy(nn(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};Me.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};Me.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=Tb(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};Me.prototype.getDefaultLayer=function(){return this.getLayer(HC,Db)};Me.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};Me.prototype._getChildIndex=function(e){return un(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};Me.prototype._createLayer=function(e,t){typeof t>"u"&&(t=WC);const n=this._getChildIndex(t);return{group:Lb(this._viewport,"layer-"+e,n),index:t,visible:!0}};Me.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i};Me.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Je(n),t.visible=!1),n};Me.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Je(t.group))};Me.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};Me.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(FC(e))||{}).rootElement:void 0};Me.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};Me.prototype._findPlaneForRoot=function(e){return Be(this._planes,function(t){return t.rootElement===e})};Me.prototype.getContainer=function(){return this._container};Me.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(Z([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),ke(r).add(t)):(e.markers.delete(t),ke(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};Me.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};Me.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};Me.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1};Me.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};Me.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};Me.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,Db);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};Me.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};Me.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};Me.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};Me.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};Me.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};Me.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=GC[e];if(!jr(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};Me.prototype._setParent=function(e,t,n){Tt(t.children,e,n),e.parent=t};Me.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const s=o.create(e,t,i);return this._elementRegistry.add(t,s),o.update(e,t,s),r.fire(e+".added",{element:t,gfx:s}),t};Me.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};Me.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};Me.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),wt(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};Me.prototype.removeShape=function(e){return this._removeElement(e,"shape")};Me.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};Me.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};Me.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};Me.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};Me.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,o,s,c,a,u;if(e)this._changeViewbox(function(){c=Math.min(n.width/e.width,n.height/e.height);const l=this._svg.createSVGMatrix().scale(c).translate(-e.x,-e.y);wo(t,l)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},s=wo(t),r=s?s.matrix:JS(),c=ml(r.a,1e3),a=ml(-r.e||0,1e3),u=ml(-r.f||0,1e3),e=this._cachedViewbox={x:a?a/c:0,y:u?u/c:0,width:n.width/c,height:n.height/c,scale:c,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};Me.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=J({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Pb(t,n)}),{x:n.e,y:n.f}};Me.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=kt(e),o=be(r),s=this.viewbox(),c=this.zoom();let a,u;s.y+=t.top/c,s.x+=t.left/c,s.width-=(t.right+t.left)/c,s.height-=(t.bottom+t.top)/c;const l=be(s);if(!(r.width<s.width&&r.height<s.height))a=r.x-s.x,u=r.y-s.y;else{const h=Math.max(0,o.right-l.right),d=Math.min(0,o.left-l.left),f=Math.max(0,o.bottom-l.bottom),g=Math.min(0,o.top-l.top);a=h||d,u=f||g}this.scroll({dx:-a*c,dy:-u*c})};Me.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),ml(i.a,1e3)};function Pb(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Me.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale};Me.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let s,c,a,u,l;a=i.getCTM();const p=a.a;return t?(s=J(o,t),c=s.matrixTransform(a.inverse()),u=r.translate(c.x,c.y).scale(1/p*e).translate(-c.x,-c.y),l=a.multiply(u)):l=r.scale(e),Pb(this._viewport,l),l};Me.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};Me.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,s=n.height*t.scale;return{x:i,y:r,width:o,height:s}};Me.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var xo="data-element-id";function vn(e){this._elements={},this._eventBus=e}vn.$inject=["eventBus"];vn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),te(t,xo,i),n&&te(n,xo,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};vn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(te(i.gfx,xo,""),i.secondaryGfx&&te(i.secondaryGfx,xo,""),delete t[n])};vn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};vn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&te(t,xo,i),t};vn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&te(e,xo);var n=this._elements[t];return n&&n.element};vn.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};vn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],s=o.element,c=o.gfx;if(e(s,c))return s}};vn.prototype.getAll=function(){return this.filter(function(e){return e})};vn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})};vn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};vn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function zC(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var s=this.indexOf(o);return s!==-1&&(this.splice(s,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,s){var c=this.indexOf(o);if(typeof s>"u"){if(c!==-1)return;s=this.length}c!==-1&&this.splice(c,1),this.splice(s,0,o),c===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function VC(e){return e.__refs_collection===!0}function UC(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function Ob(e,t,n){var i=zC(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function YC(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var s=r;r=null,s&&e.unset(s,i,n),r=o,e.set(r,i,n)}}})}function An(e,t){if(!(this instanceof An))return new An(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}An.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?Ob(this,t,e):YC(this,t,e)};An.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return VC(n)||Ob(this,t,e),n};An.prototype.ensureBound=function(e,t){UC(e,t)||this.bind(e,t)};An.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};An.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Rh=new An({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Nb=new An({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),rg=new An({name:"attachers",collection:!0},{name:"host"}),Bb=new An({name:"outgoing",collection:!0},{name:"source"}),Fb=new An({name:"incoming",collection:!0},{name:"target"});function Wo(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Rh.bind(this,"parent"),Nb.bind(this,"labels"),Bb.bind(this,"outgoing"),Fb.bind(this,"incoming")}function es(){Wo.call(this),Rh.bind(this,"children"),rg.bind(this,"host"),rg.bind(this,"attachers")}me(es,Wo);function jb(){Wo.call(this),Rh.bind(this,"children")}me(jb,es);function Hb(){es.call(this),Nb.bind(this,"labelTarget")}me(Hb,es);function Wb(){Wo.call(this),Bb.bind(this,"source"),Fb.bind(this,"target")}me(Wb,Wo);var ZC={connection:Wb,shape:es,label:Hb,root:jb};function XC(e,t){var n=ZC[e];if(!n)throw new Error("unknown type: <"+e+">");return J(new n,t)}function KC(e){return e instanceof Wo}function Ai(){this._uid=12}Ai.prototype.createRoot=function(e){return this.create("root",e)};Ai.prototype.createLabel=function(e){return this.create("label",e)};Ai.prototype.createShape=function(e){return this.create("shape",e)};Ai.prototype.createConnection=function(e){return this.create("connection",e)};Ai.prototype.create=function(e,t){return t=J({},t||{}),t.id||(t.id=e+"_"+this._uid++),XC(e,t)};var Nl="__fn",Gb=1e3,QC=Array.prototype.slice;function pn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}pn.prototype.on=function(e,t,n,i){if(e=xe(e)?e:[e],ot(t)&&(i=n,n=t,t=Gb),!he(t))throw new Error("priority must be a number");var r=n;i&&(r=nn(n,i),r[Nl]=n[Nl]||n);var o=this;e.forEach(function(s){o._addListener(s,{priority:t,callback:r,next:null})})};pn.prototype.once=function(e,t,n,i){var r=this;if(ot(t)&&(i=n,n=t,t=Gb),!he(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var s=n.apply(i,arguments);return r.off(e,o),s}o[Nl]=n,this.on(e,t,o)};pn.prototype.off=function(e,t){e=xe(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};pn.prototype.createEvent=function(e){var t=new ts;return t.init(e),t};pn.prototype.fire=function(e,t){var n,i,r,o;if(o=QC.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof ts?n=t:n=this.createEvent(t),o[0]=n;var s=n.type;e!==s&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==s&&(n.type=s)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};pn.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};pn.prototype._destroy=function(){this._listeners={}};pn.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};pn.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=JC(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};pn.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};pn.prototype._getListeners=function(e){return this._listeners[e]};pn.prototype._setListeners=function(e,t){this._listeners[e]=t};pn.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[Nl]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function ts(){}ts.prototype.stopPropagation=function(){this.cancelBubble=!0};ts.prototype.preventDefault=function(){this.defaultPrevented=!0};ts.prototype.init=function(e){J(this,e||{})};function JC(e,t){return e.apply(null,t)}function Pr(e){return e.childNodes[0]}function qC(e){return e.parentNode.childNodes[1]}function vl(e,t,n,i,r){var o=yo();o.setTranslate(t,n);var s=yo();s.setRotate(i||0,0,0);var c=yo();c.setScale(1,1),wo(e,[o,s,c])}function Ft(e,t,n){var i=yo();i.setTranslate(t,n),wo(e,i)}function zb(e,t){var n=yo();n.setRotate(t,0,0),wo(e,n)}function yn(e,t){this._eventBus=e,this._elementRegistry=t}yn.$inject=["eventBus","elementRegistry"];yn.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=qC(t),n||(n=ue("g"),ke(n).add("djs-children"),de(t.parentNode,n))):n=t,n};yn.prototype._clear=function(e){var t=Pr(e);return Fo(t),t};yn.prototype._createContainer=function(e,t,n,i){var r=ue("g");ke(r).add("djs-group"),typeof n<"u"?Vb(r,t,t.childNodes[n]):de(t,r);var o=ue("g");ke(o).add("djs-element"),ke(o).add("djs-"+e),i&&ke(o).add("djs-frame"),de(r,o);var s=ue("g");return ke(s).add("djs-visual"),de(o,s),o};yn.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,Mb(t))};yn.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=un(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),Z(i,function(r){var o=r.children;if(o){var s=t._getChildrenContainer(r);Z(o.slice().reverse(),function(c){var a=n.getGraphics(c);Vb(a.parentNode,s)})}})};yn.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};yn.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};yn.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};yn.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};yn.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Ft(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?te(n,"display","none"):te(n,"display","block")}};yn.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Je(t.parentNode)};function Vb(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const eA={__depends__:[wC],__init__:["canvas"],canvas:["type",Me],elementRegistry:["type",vn],elementFactory:["type",Ai],eventBus:["type",pn],graphicsFactory:["type",yn]};function tA(e){var t=new Sb(e);return t.init(),t}function nA(e){e=e||{};var t={config:["value",e]},n=[t,eA].concat(e.modules||[]);return tA(n)}function rr(e,t){this._injector=t||nA(e),this.get("eventBus").fire("diagram.init")}rr.prototype.get=function(e,t){return this._injector.get(e,t)};rr.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)};rr.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};rr.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Ih(){}Ih.prototype.get=function(e){return this.$model.properties.get(this,e)};Ih.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function Ub(e,t){this.model=e,this.properties=t}Ub.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Ih.prototype);Z(e.properties,function(s){!s.isMany&&s.default!==void 0&&(i[s.name]=s.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(s){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),Z(s,nn(function(c,a){this.set(a,c)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var iA={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Yb={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function kh(e,t){var n=Yb[e];return n?n(t):t}function _p(e){return!!iA[e]}function Zb(e){return!!Yb[e]}function Kt(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function bn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}bn.prototype.build=function(){return Wn(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};bn.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};bn.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,s=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var c=r.indexOf(e);if(c===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(c,1),this.addProperty(t,n?void 0:c,s),o[i.name]=o[i.localName]=t};bn.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=Kt(r[0],i),s=Kt(r[1],o.prefix).name,c=this.propertiesByName[s];if(c)this.replaceProperty(c,e,n);else throw new Error("refined property <"+s+"> not found");delete e.redefines};bn.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};bn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};bn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};bn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};bn.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};bn.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};bn.prototype.hasProperty=function(e){return this.propertiesByName[e]};bn.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(Z(e.properties,nn(function(o){o=J({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var s=o.replaces,c=o.redefines;s||c?this.redefineProperty(o,s||c,s):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function or(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,Z(e,nn(this.registerPackage,this))}or.prototype.getPackage=function(e){return this.packageMap[e]};or.prototype.getPackages=function(){return this.packages};or.prototype.registerPackage=function(e){e=J({},e);var t=this.packageMap;og(t,e,"prefix"),og(t,e,"uri"),Z(e.types,nn(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};or.prototype.registerType=function(e,t){e=J({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:J(e.meta||{})});var n=Kt(e.name,t.prefix),i=n.name,r={};Z(e.properties,nn(function(o){var s=Kt(o.name,n.prefix),c=s.name;_p(o.type)||(o.type=Kt(o.type,s.prefix).name),J(o,{ns:s,name:c}),r[c]=o},this)),J(e,{ns:n,name:i,propertiesByName:r}),Z(e.extends,nn(function(o){var s=Kt(o,n.prefix),c=this.typeMap[s.name];c.traits=c.traits||[],c.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};or.prototype.mapTypes=function(e,t,n){var i=_p(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(a,u){var l=Kt(a,_p(a)?"":e.prefix);r.mapTypes(l,t,u)}function s(a){return o(a,!0)}function c(a){return o(a,!1)}if(!i)throw new Error("unknown type <"+e.name+">");Z(i.superClass,n?s:c),t(i,!n),Z(i.traits,s)};or.prototype.getEffectiveDescriptor=function(e){var t=Kt(e),n=new bn(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};or.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function og(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Kr(e){this.model=e}Kr.prototype.set=function(e,t,n){if(!cn(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;rA(n)?i?delete e[r]:delete e.$attrs[xp(t)]:i?r in e?e[r]=n:Xb(e,i,n):e.$attrs[xp(t)]=n};Kr.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[xp(t)];var i=n.name;return!e[i]&&n.isMany&&Xb(e,n,[]),e[i]};Kr.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=J({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Kr.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Kr.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Kr.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function rA(e){return typeof e>"u"}function Xb(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function xp(e){return e.replace(/^:/,"")}function $n(e,t={}){this.properties=new Kr(this),this.factory=new Ub(this,this.properties),this.registry=new or(e,this.properties),this.typeCache={},this.config=t}$n.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};$n.prototype.getType=function(e){var t=this.typeCache,n=cn(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};$n.prototype.createAny=function(e,t,n){var i=Kt(e),r={$type:e,$instanceOf:function(s){return s===this.$type},get:function(s){return this[s]},set:function(s,c){yE(this,[s],c)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),Z(n,function(s,c){ht(s)&&s.value!==void 0?r[s.name]=s.value:r[c]=s}),r};$n.prototype.getPackage=function(e){return this.registry.getPackage(e)};$n.prototype.getPackages=function(){return this.registry.getPackages()};$n.prototype.getElementDescriptor=function(e){return e.$descriptor};$n.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};$n.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};$n.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var ag=String.fromCharCode,oA=Object.prototype.hasOwnProperty,aA=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Ca={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Ca).forEach(function(e){Ca[e.toUpperCase()]=Ca[e]});function sA(e,t,n,i){return i?oA.call(Ca,i)?Ca[i]:"&"+i+";":ag(t||parseInt(n,16))}function xr(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(aA,sA):e}var lA="http://www.w3.org/2001/XMLSchema-instance",cA="xsi",sg="xsi:type",lg="non-whitespace outside of root node";function so(e){return new Error(e)}function cg(e){return"missing namespace for prefix <"+e+">"}function Os(e){return{get:e,enumerable:!0}}function uA(e){var t={},n;for(n in e)t[n]=e[n];return t}function Ep(e){return e+"$uri"}function pA(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Ep(i)]=n;return t}function ug(){return{line:0,column:0}}function hA(e){throw e}function Kb(e){if(!this)return new Kb(e);var t=e&&e.proxy,n,i,r,o,s=hA,c,a,u,l,p=ug,h=!1,d=!1,f=null,g=!1,m;function w(y){y instanceof Error||(y=so(y)),f=y,s(y,p)}function _(y){c&&(y instanceof Error||(y=so(y)),c(y,p))}this.on=function(y,x){if(typeof x!="function")throw so("required args <name, cb>");switch(y){case"openTag":i=x;break;case"text":n=x;break;case"closeTag":r=x;break;case"error":s=x;break;case"warn":c=x;break;case"cdata":o=x;break;case"attention":l=x;break;case"question":u=x;break;case"comment":a=x;break;default:throw so("unsupported event: "+y)}return this},this.ns=function(y){if(typeof y>"u"&&(y={}),typeof y!="object")throw so("required args <nsMap={}>");var x={},v;for(v in y)x[v]=y[v];return x[lA]=cA,d=!0,m=x,this},this.parse=function(y){if(typeof y!="string")throw so("required args <xml=string>");return f=null,E(y),p=ug,g=!1,f},this.stop=function(){g=!0};function E(y){var x=d?[]:null,v=d?pA(m):null,S,M=[],$=0,T=!1,I=!1,C=0,b=0,A,R,k,O,N,W,z,V,U,H="",Y=0,K;function P(){if(K!==null)return K;var L,j,F,Q=d&&v.xmlns,q=d&&h?[]:null,ee=Y,ae=H,pe=ae.length,He,Qe,Ue,ze,Ye,Zn={},Ni={},Bt,ye,Ke;e:for(;ee<pe;ee++)if(Bt=!1,ye=ae.charCodeAt(ee),!(ye===32||ye<14&&ye>8)){for((ye<65||ye>122||ye>90&&ye<97)&&ye!==95&&ye!==58&&(_("illegal first char attribute name"),Bt=!0),Ke=ee+1;Ke<pe;Ke++)if(ye=ae.charCodeAt(Ke),!(ye>96&&ye<123||ye>64&&ye<91||ye>47&&ye<59||ye===46||ye===45||ye===95)){if(ye===32||ye<14&&ye>8){_("missing attribute value"),ee=Ke;continue e}if(ye===61)break;_("illegal attribute name char"),Bt=!0}if(Ye=ae.substring(ee,Ke),Ye==="xmlns:xmlns"&&(_("illegal declaration of xmlns"),Bt=!0),ye=ae.charCodeAt(Ke+1),ye===34)Ke=ae.indexOf('"',ee=Ke+2),Ke===-1&&(Ke=ae.indexOf("'",ee),Ke!==-1&&(_("attribute value quote missmatch"),Bt=!0));else if(ye===39)Ke=ae.indexOf("'",ee=Ke+2),Ke===-1&&(Ke=ae.indexOf('"',ee),Ke!==-1&&(_("attribute value quote missmatch"),Bt=!0));else for(_("missing attribute value quotes"),Bt=!0,Ke=Ke+1;Ke<pe&&(ye=ae.charCodeAt(Ke+1),!(ye===32||ye<14&&ye>8));Ke++);for(Ke===-1&&(_("missing closing quotes"),Ke=pe,Bt=!0),Bt||(Ue=ae.substring(ee,Ke)),ee=Ke;Ke+1<pe&&(ye=ae.charCodeAt(Ke+1),!(ye===32||ye<14&&ye>8));Ke++)ee===Ke&&(_("illegal character after attribute end"),Bt=!0);if(ee=Ke+1,Bt)continue e;if(Ye in Ni){_("attribute <"+Ye+"> already defined");continue}if(Ni[Ye]=!0,!d){Zn[Ye]=Ue;continue}if(h){if(Qe=Ye==="xmlns"?"xmlns":Ye.charCodeAt(0)===120&&Ye.substr(0,6)==="xmlns:"?Ye.substr(6):null,Qe!==null){if(L=xr(Ue),j=Ep(Qe),ze=m[L],!ze){if(Qe==="xmlns"||j in v&&v[j]!==L)do ze="ns"+$++;while(typeof v[ze]<"u");else ze=Qe;m[L]=ze}v[Qe]!==ze&&(He||(v=uA(v),He=!0),v[Qe]=ze,Qe==="xmlns"&&(v[Ep(ze)]=L,Q=ze),v[j]=L),Zn[Ye]=Ue;continue}q.push(Ye,Ue);continue}if(ye=Ye.indexOf(":"),ye===-1){Zn[Ye]=Ue;continue}if(!(F=v[Ye.substring(0,ye)])){_(cg(Ye.substring(0,ye)));continue}Ye=Q===F?Ye.substr(ye+1):F+Ye.substr(ye),Ye===sg&&(ye=Ue.indexOf(":"),ye!==-1?(F=Ue.substring(0,ye),F=v[F]||F,Ue=F+Ue.substring(ye)):Ue=Q+":"+Ue),Zn[Ye]=Ue}if(h)for(ee=0,pe=q.length;ee<pe;ee++){if(Ye=q[ee++],Ue=q[ee],ye=Ye.indexOf(":"),ye!==-1){if(!(F=v[Ye.substring(0,ye)])){_(cg(Ye.substring(0,ye)));continue}Ye=Q===F?Ye.substr(ye+1):F+Ye.substr(ye),Ye===sg&&(ye=Ue.indexOf(":"),ye!==-1?(F=Ue.substring(0,ye),F=v[F]||F,Ue=F+Ue.substring(ye)):Ue=Q+":"+Ue)}Zn[Ye]=Ue}return K=Zn}function D(){for(var L=/(\r\n|\r|\n)/g,j=0,F=0,Q=0,q=b,ee,ae;C>=Q&&(ee=L.exec(y),!(!ee||(q=ee[0].length+ee.index,q>C)));)j+=1,Q=q;return C==-1?(F=q,ae=y.substring(b)):b===0?ae=y.substring(b,C):(F=C-Q,ae=b==-1?y.substring(C):y.substring(C,b+1)),{data:ae,line:j,column:F}}for(p=D,t&&(U=Object.create({},{name:Os(function(){return z}),originalName:Os(function(){return V}),attrs:Os(P),ns:Os(function(){return v})}));b!==-1;){if(y.charCodeAt(b)===60?C=b:C=y.indexOf("<",b),C===-1){if(M.length)return w("unexpected end of file");if(b===0)return w("missing start tag");b<y.length&&y.substring(b).trim()&&_(lg);return}if(b!==C){if(M.length){if(n&&(n(y.substring(b,C),xr,p),g))return}else if(y.substring(b,C).trim()&&(_(lg),g))return}if(O=y.charCodeAt(C+1),O===33){if(k=y.charCodeAt(C+2),k===91&&y.substr(C+3,6)==="CDATA["){if(b=y.indexOf("]]>",C),b===-1)return w("unclosed cdata");if(o&&(o(y.substring(C+9,b),p),g))return;b+=3;continue}if(k===45&&y.charCodeAt(C+3)===45){if(b=y.indexOf("-->",C),b===-1)return w("unclosed comment");if(a&&(a(y.substring(C+4,b),xr,p),g))return;b+=3;continue}}if(O===63){if(b=y.indexOf("?>",C),b===-1)return w("unclosed question");if(u&&(u(y.substring(C,b+2),p),g))return;b+=2;continue}for(A=C+1;;A++){if(N=y.charCodeAt(A),isNaN(N))return b=-1,w("unclosed tag");if(N===34)k=y.indexOf('"',A+1),A=k!==-1?k:A;else if(N===39)k=y.indexOf("'",A+1),A=k!==-1?k:A;else if(N===62){b=A;break}}if(O===33){if(l&&(l(y.substring(C,b+1),xr,p),g))return;b+=1;continue}if(K={},O===47){if(T=!1,I=!0,!M.length)return w("missing open tag");if(A=z=M.pop(),k=C+2+A.length,y.substring(C+2,k)!==A)return w("closing tag mismatch");for(;k<b;k++)if(O=y.charCodeAt(k),!(O===32||O>8&&O<14))return w("close tag")}else{if(y.charCodeAt(b-1)===47?(A=z=y.substring(C+1,b-1),T=!0,I=!0):(A=z=y.substring(C+1,b),T=!0,I=!1),!(O>96&&O<123||O>64&&O<91||O===95||O===58))return w("illegal first char nodeName");for(k=1,R=A.length;k<R;k++)if(O=A.charCodeAt(k),!(O>96&&O<123||O>64&&O<91||O>47&&O<59||O===45||O===95||O==46)){if(O===32||O<14&&O>8){z=A.substring(0,k),K=null;break}return w("invalid nodeName")}I||M.push(z)}if(d){if(S=v,T&&(I||x.push(S),K===null&&(h=A.indexOf("xmlns",k)!==-1)&&(Y=k,H=A,P(),h=!1)),V=z,O=z.indexOf(":"),O!==-1){if(W=v[z.substring(0,O)],!W)return w("missing namespace on <"+V+">");z=z.substr(O+1)}else W=v.xmlns;W&&(z=W+":"+z)}if(T&&(Y=k,H=A,i&&(t?i(U,xr,I,p):i(z,P,xr,I,p),g)))return;if(I){if(r&&(r(t?U:z,xr,T,p),g))return;d&&(T?v=S:v=x.pop())}b+=1}}}function Qb(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var dA={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},_c="xsi:type";function Jb(e){return e.xml&&e.xml.serialize}function qb(e){return Jb(e)===_c}function fA(e){return Jb(e)==="property"}function gA(e){return e.charAt(0).toUpperCase()+e.slice(1)}function ew(e,t){return Qb(t)?e.prefix+":"+gA(e.localName):e.name}function mA(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function vA(e,t){var n=Kt(e),i=t.getPackage(n.prefix);return mA(n,i)}function Qi(e){return new Error(e)}function yi(e){return e.$descriptor}function yA(e){J(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Qi("expected element");var n=this.elementsById,i=yi(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw Qi("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function ns(){}ns.prototype.handleEnd=function(){};ns.prototype.handleText=function(){};ns.prototype.handleNode=function(){};function Lh(){}Lh.prototype=Object.create(ns.prototype);Lh.prototype.handleNode=function(){return this};function Go(){}Go.prototype=Object.create(ns.prototype);Go.prototype.handleText=function(e){this.body=(this.body||"")+e};function is(e,t){this.property=e,this.context=t}is.prototype=Object.create(Go.prototype);is.prototype.handleNode=function(e){if(this.element)throw Qi("expected no sub nodes");return this.element=this.createReference(e),this};is.prototype.handleEnd=function(){this.element.id=this.body};is.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Dh(e,t){this.element=t,this.propertyDesc=e}Dh.prototype=Object.create(Go.prototype);Dh.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=kh(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function xc(){}xc.prototype=Object.create(Go.prototype);xc.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Jt(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Jt.prototype=Object.create(xc.prototype);Jt.prototype.addReference=function(e){this.context.addReference(e)};Jt.prototype.handleText=function(e){var t=this.element,n=yi(t),i=n.bodyProperty;if(!i)throw Qi("unexpected body text <"+e+">");Go.prototype.handleText.call(this,e)};Jt.prototype.handleEnd=function(){var e=this.body,t=this.element,n=yi(t),i=n.bodyProperty;i&&e!==void 0&&(e=kh(i.type,e),t.set(i.name,e))};Jt.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=yi(n),r=this.context,o=new n({}),s=this.model,c;return Z(t,function(a,u){var l=i.propertiesByName[u],p;l&&l.isReference?l.isMany?(p=a.split(" "),Z(p,function(h){r.addReference({element:o,property:l.ns.name,id:h})})):r.addReference({element:o,property:l.ns.name,id:a}):(l?a=kh(l.type,a):u!=="xmlns"&&(c=Kt(u,i.ns.prefix),s.getPackage(c.prefix)&&r.addWarning({message:"unknown attribute <"+u+">",element:o,property:u,value:a})),o.set(u,a))}),o};Jt.prototype.getPropertyForNode=function(e){var t=e.name,n=Kt(t),i=this.type,r=this.model,o=yi(i),s=n.name,c=o.propertiesByName[s],a,u;if(c&&!c.isAttr)return qb(c)&&(a=e.attributes[_c],a)?(a=vA(a,r),u=r.getType(a),J({},c,{effectiveType:yi(u).name})):c;var l=r.getPackage(n.prefix);if(l){if(a=ew(n,l),u=r.getType(a),c=Be(o.properties,function(p){return!p.isVirtual&&!p.isReference&&!p.isAttribute&&u.hasType(p.type)}),c)return J({},c,{effectiveType:yi(u).name})}else if(c=Be(o.properties,function(p){return!p.isReference&&!p.isAttribute&&p.type==="Element"}),c)return c;throw Qi("unrecognized element <"+n.name+">")};Jt.prototype.toString=function(){return"ElementDescriptor["+yi(this.type).name+"]"};Jt.prototype.valueHandler=function(e,t){return new Dh(e,t)};Jt.prototype.referenceHandler=function(e){return new is(e,this.context)};Jt.prototype.handler=function(e){return e==="Element"?new Eo(this.model,e,this.context):new Jt(this.model,e,this.context)};Jt.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,Zb(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(J(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function Ph(e,t,n){Jt.call(this,e,t,n)}Ph.prototype=Object.create(Jt.prototype);Ph.prototype.createElement=function(e){var t=e.name,n=Kt(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),s=o&&ew(n,o)||t;if(!r.hasType(s))throw Qi("unexpected element <"+e.originalName+">");return Jt.prototype.createElement.call(this,e)};function Eo(e,t,n){this.model=e,this.context=n}Eo.prototype=Object.create(xc.prototype);Eo.prototype.createElement=function(e){var t=e.name,n=Kt(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};Eo.prototype.handleChild=function(e){var t=new Eo(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};Eo.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Oh(e){e instanceof $n&&(e={model:e}),J(this,{lax:!1},e)}Oh.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Jt?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,s=new yA(J({},t,{rootHandler:i})),c=new Kb({proxy:!0}),a=bA();i.context=s,a.push(i);function u(x,v,S){var M=v(),$=M.line,T=M.column,I=M.data;I.charAt(0)==="<"&&I.indexOf(" ")!==-1&&(I=I.slice(0,I.indexOf(" "))+">");var C="unparsable content "+(I?I+" ":"")+`detected
	line: `+$+`
	column: `+T+`
	nested error: `+x.message;if(S)return s.addWarning({message:C,error:x}),!0;throw Qi(C)}function l(x,v){return u(x,v,!0)}function p(){var x=s.elementsById,v=s.references,S,M;for(S=0;M=v[S];S++){var $=M.element,T=x[M.id],I=yi($).propertiesByName[M.property];if(T||s.addWarning({message:"unresolved reference <"+M.id+">",element:M.element,property:M.property,value:M.id}),I.isMany){var C=$.get(I.name),b=C.indexOf(M);b===-1&&(b=C.length),T?C[b]=T:C.splice(b,1)}else $.set(I.name,T)}}function h(){a.pop().handleEnd()}var d=/^<\?xml /i,f=/ encoding="([^"]+)"/i,g=/^utf-8$/i;function m(x){if(d.test(x)){var v=f.exec(x),S=v&&v[1];!S||g.test(S)||s.addWarning({message:"unsupported document encoding <"+S+">, falling back to UTF-8"})}}function w(x,v){var S=a.peek();try{a.push(S.handleNode(x))}catch(M){u(M,v,o)&&a.push(new Lh)}}function _(x,v){try{a.peek().handleText(x)}catch(S){l(S,v)}}function E(x,v){x.trim()&&_(x,v)}var y=r.getPackages().reduce(function(x,v){return x[v.uri]=v.prefix,x},{"http://www.w3.org/XML/1998/namespace":"xml"});return c.ns(y).on("openTag",function(x,v,S,M){var $=x.attrs||{},T=Object.keys($).reduce(function(C,b){var A=v($[b]);return C[b]=A,C},{}),I={name:x.name,originalName:x.originalName,attributes:T,ns:x.ns};w(I,M)}).on("question",m).on("closeTag",h).on("cdata",_).on("text",function(x,v,S){E(v(x),S)}).on("error",u).on("warn",l),new Promise(function(x,v){var S;try{c.parse(e),p()}catch(C){S=C}var M=i.element;!S&&!M&&(S=Qi("failed to parse document as <"+i.type.$descriptor.name+">"));var $=s.warnings,T=s.references,I=s.elementsById;return S?(S.warnings=$,v(S)):x({rootElement:M,elementsById:I,references:T,warnings:$})})};Oh.prototype.handler=function(e){return new Ph(this.model,e)};function bA(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var wA=`<?xml version="1.0" encoding="UTF-8"?>
`,_A=/<|>|'|"|&|\n\r|\n/g,tw=/<|>|&/g;function xA(e){var t={},n={},i={},r=[],o=[];this.byUri=function(s){return n[s]||e&&e.byUri(s)},this.add=function(s,c){n[s.uri]=s,c?r.push(s):o.push(s),this.mapPrefix(s.prefix,s.uri)},this.uriByPrefix=function(s){return t[s||"xmlns"]},this.mapPrefix=function(s,c){t[s||"xmlns"]=c},this.getNSKey=function(s){return s.prefix!==void 0?s.uri+"|"+s.prefix:s.uri},this.logUsed=function(s){var c=s.uri,a=this.getNSKey(s);i[a]=this.byUri(c),e&&e.logUsed(s)},this.getUsed=function(s){function c(l){var p=a.getNSKey(l);return i[p]}var a=this,u=[].concat(r,o);return u.filter(c)}}function EA(e){return e.charAt(0).toLowerCase()+e.slice(1)}function SA(e,t){return Qb(t)?EA(e):e}function nw(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function iw(e){return cn(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function CA(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function AA(e,t){return t.isGeneric?J({localName:t.ns.localName},e):J({localName:SA(t.ns.localName,t.$pkg)},e)}function TA(e,t){return J({localName:t.ns.localName},e)}function MA(e){var t=e.$descriptor;return $e(t.properties,function(n){var i=n.name;if(n.isVirtual||!Ut(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var $A={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},RA={"<":"lt",">":"gt","&":"amp"};function rw(e,t,n){return e=cn(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function IA(e){return rw(e,_A,$A)}function kA(e){return rw(e,tw,RA)}function LA(e){return $e(e,function(t){return t.isAttr})}function DA(e){return $e(e,function(t){return!t.isAttr})}function Nh(e){this.tagName=e}Nh.prototype.build=function(e){return this.element=e,this};Nh.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Nr(){}Nr.prototype.serializeValue=Nr.prototype.serializeTo=function(e){e.append(this.escape?kA(this.value):this.value)};Nr.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(tw)!==-1&&(this.escape=!0),this};function Bh(e){this.tagName=e}nw(Bh,Nr);Bh.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function at(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}at.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(r=MA(e),this.parseAttributes(LA(r)),this.parseContainments(DA(r))),this.parseGenericAttributes(e,i),this};at.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return AA(t,e)};at.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return TA(t,e)};at.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};at.prototype.nsAttributeName=function(e){var t;if(cn(e)?t=Kt(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:J({localName:t.localName},n)};at.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return Z(e,function(r,o){var s;o==="$body"?n.push(new Nr().build({type:"String"},r)):o==="$children"?Z(r,function(c){n.push(new at(t).build(c))}):o.indexOf("$")!==0&&(s=t.parseNsAttribute(e,o,r),s&&i.push({name:o,value:r}))}),i};at.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=Kt(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var s=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(s)}};at.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return Z(i,function(o,s){var c=n.parseNsAttribute(e,s,o);c&&r.push(c)}),r};at.prototype.parseGenericAttributes=function(e,t){var n=this;Z(t,function(i){if(i.name!==_c)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};at.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;Z(e,function(r){var o=i.get(r.name),s=r.isReference,c=r.isMany;if(c||(o=[o]),r.isBody)n.push(new Nr().build(r,o[0]));else if(Zb(r.type))Z(o,function(l){n.push(new Bh(t.addTagName(t.nsPropertyTagName(r))).build(r,l))});else if(s)Z(o,function(l){n.push(new Nh(t.addTagName(t.nsPropertyTagName(r))).build(l))});else{var a=qb(r),u=fA(r);Z(o,function(l){var p;a?p=new Ec(t,r):u?p=new at(t,r):p=new at(t),n.push(p.build(l))})}})};at.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new xA(i):t=i),t};at.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,s=i.byUri(r);return(!s||n)&&i.add(e,t),i.mapPrefix(o,r),e};at.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),o=e.prefix,s=e.uri,c,a,u;if(!o&&!s)return{localName:e.localName};if(u=dA[o]||i&&(i.getPackage(o)||{}).uri,s=s||u||r.uriByPrefix(o),!s)throw new Error("no namespace uri given for prefix <"+o+">");if(e=r.byUri(s),!e){for(c=o,a=1;r.uriByPrefix(c);)c=o+"_"+a++;e=this.logNamespace({prefix:c,uri:s},u===s)}return o&&r.mapPrefix(o,s),e};at.prototype.parseAttributes=function(e){var t=this,n=this.element;Z(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];Z(r,function(s){o.push(s.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};at.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),iw(e)};at.prototype.addAttribute=function(e,t){var n=this.attrs;cn(t)&&(t=IA(t));var i=Dy(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};at.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=CA(n).concat(t)),Z(t,function(i){e.append(" ").append(iw(i.name)).append('="').append(i.value).append('"')})};at.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Nr;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),Z(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function Ec(e,t){at.call(this,e,t)}nw(Ec,at);Ec.prototype.parseNsAttributes=function(e){var t=at.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(_c),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t};Ec.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function PA(){this.value="",this.write=function(e){this.value+=e}}function OA(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function NA(e){e=J({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new PA,o=new OA(r,e.format);if(e.preamble&&o.append(wA),new at().build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function Sc(e,t){$n.call(this,e,t)}Sc.prototype=Object.create($n.prototype);Sc.prototype.fromXML=function(e,t,n){cn(t)||(n=t,t="bpmn:Definitions");var i=new Oh(J({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};Sc.prototype.toXML=function(e,t){var n=new NA(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(s){return r(s)}})};var BA="BPMN20",FA="http://www.omg.org/spec/BPMN/20100524/MODEL",jA="bpmn",HA=[],WA=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],GA=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],zA={tagAlias:"lowerCase",typePrefix:"t"},VA={name:BA,uri:FA,prefix:jA,associations:HA,types:WA,enumerations:GA,xml:zA},UA="BPMNDI",YA="http://www.omg.org/spec/BPMN/20100524/DI",ZA="bpmndi",XA=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],KA=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],QA=[],JA={name:UA,uri:YA,prefix:ZA,types:XA,enumerations:KA,associations:QA},qA="DC",eT="http://www.omg.org/spec/DD/20100524/DC",tT="dc",nT=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],iT=[],rT={name:qA,uri:eT,prefix:tT,types:nT,associations:iT},oT="DI",aT="http://www.omg.org/spec/DD/20100524/DI",sT="di",lT=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],cT=[],uT={tagAlias:"lowerCase"},pT={name:oT,uri:aT,prefix:sT,types:lT,associations:cT,xml:uT},hT="bpmn.io colors for BPMN",dT="http://bpmn.io/schema/bpmn/biocolor/1.0",fT="bioc",gT=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],mT=[],vT=[],yT={name:hT,uri:dT,prefix:fT,types:gT,enumerations:mT,associations:vT},bT="BPMN in Color",wT="http://www.omg.org/spec/BPMN/non-normative/color/1.0",_T="color",xT=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],ET=[],ST=[],CT={name:bT,uri:wT,prefix:_T,types:xT,enumerations:ET,associations:ST},AT={bpmn:VA,bpmndi:JA,dc:rT,di:pT,bioc:yT,color:CT};function TT(e,t){var n=J({},AT,e);return new Sc(n,t)}function zt(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var MT="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function ow(e){Ut(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(MT)}})}function tn(e,t){return e.$instanceOf(t)}function $T(e){return Be(e.rootElements,function(t){return tn(t,"bpmn:Process")||tn(t,"bpmn:Collaboration")})}function RT(e){var t={},n=[],i={};function r(U,H){return function(Y){U(Y,H)}}function o(U){t[U.id]=U}function s(U){return t[U.id]}function c(U,H){var Y=U.gfx;if(Y)throw new Error(`already rendered ${zt(U)}`);return e.element(U,i[U.id],H)}function a(U,H){return e.root(U,i[U.id],H)}function u(U,H){try{var Y=i[U.id]&&c(U,H);return o(U),Y}catch(K){l(K.message,{element:U,error:K}),console.error(`failed to import ${zt(U)}`,K)}}function l(U,H){e.error(U,H)}var p=this.registerDi=function(H){var Y=H.bpmnElement;Y?i[Y.id]?l(`multiple DI elements defined for ${zt(Y)}`,{element:Y}):(i[Y.id]=H,ow(Y)):l(`no bpmnElement referenced in ${zt(H)}`,{element:H})};function h(U){d(U.plane)}function d(U){p(U),Z(U.planeElement,f)}function f(U){p(U)}this.handleDefinitions=function(H,Y){var K=H.diagrams;if(Y&&K.indexOf(Y)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!Y&&K&&K.length&&(Y=K[0]),!Y)throw new Error("no diagram to display");i={},h(Y);var P=Y.plane;if(!P)throw new Error(`no plane for ${zt(Y)}`);var D=P.bpmnElement;if(!D)if(D=$T(H),D)l(`correcting missing bpmnElement on ${zt(P)} to ${zt(D)}`),P.bpmnElement=D,p(P);else throw new Error("no process or collaboration to display");var L=a(D,P);if(tn(D,"bpmn:Process")||tn(D,"bpmn:SubProcess"))m(D,L);else if(tn(D,"bpmn:Collaboration"))z(D,L),w(H.rootElements,L);else throw new Error(`unsupported bpmnElement for ${zt(P)}: ${zt(D)}`);g(n)};var g=this.handleDeferred=function(){for(var H;n.length;)H=n.shift(),H()};function m(U,H){O(U,H),$(U.ioSpecification,H),M(U.artifacts,H),o(U)}function w(U,H){var Y=$e(U,function(K){return!s(K)&&tn(K,"bpmn:Process")&&K.laneSets});Y.forEach(r(m,H))}function _(U,H){u(U,H)}function E(U,H){Z(U,r(_,H))}function y(U,H){u(U,H)}function x(U,H){u(U,H)}function v(U,H){u(U,H)}function S(U,H){u(U,H)}function M(U,H){Z(U,function(Y){tn(Y,"bpmn:Association")?n.push(function(){S(Y,H)}):S(Y,H)})}function $(U,H){U&&(Z(U.dataInputs,r(x,H)),Z(U.dataOutputs,r(v,H)))}var T=this.handleSubProcess=function(H,Y){O(H,Y),M(H.artifacts,Y)};function I(U,H){var Y=u(U,H);tn(U,"bpmn:SubProcess")&&T(U,Y||H),tn(U,"bpmn:Activity")&&$(U.ioSpecification,H),n.push(function(){Z(U.dataInputAssociations,r(y,H)),Z(U.dataOutputAssociations,r(y,H))})}function C(U,H){u(U,H)}function b(U,H){u(U,H)}function A(U,H){n.push(function(){var Y=u(U,H);U.childLaneSet&&R(U.childLaneSet,Y||H),V(U)})}function R(U,H){Z(U.lanes,r(A,H))}function k(U,H){Z(U,r(R,H))}function O(U,H){N(U.flowElements,H),U.laneSets&&k(U.laneSets,H)}function N(U,H){Z(U,function(Y){tn(Y,"bpmn:SequenceFlow")?n.push(function(){C(Y,H)}):tn(Y,"bpmn:BoundaryEvent")?n.unshift(function(){I(Y,H)}):tn(Y,"bpmn:FlowNode")?I(Y,H):tn(Y,"bpmn:DataObject")||(tn(Y,"bpmn:DataStoreReference")||tn(Y,"bpmn:DataObjectReference")?b(Y,H):l(`unrecognized flowElement ${zt(Y)} in context ${zt(H&&H.businessObject)}`,{element:Y,context:H}))})}function W(U,H){var Y=u(U,H),K=U.processRef;K&&m(K,Y||H)}function z(U,H){Z(U.participants,r(W,H)),M(U.artifacts,H),n.push(function(){E(U.messageFlows,H)})}function V(U){Z(U.flowNodeRef,function(H){var Y=H.get("lanes");Y&&Y.push(U)})}}function IT(e,t,n){var i,r,o,s,c=[];function a(u,l){var p={root:function(g,m){return i.add(g,m)},element:function(g,m,w){return i.add(g,m,w)},error:function(g,m){c.push({message:g,context:m})}},h=new RT(p);l=l||u.diagrams&&u.diagrams[0];var d=kT(u,l);if(!d)throw new Error("no diagram to display");Z(d,function(g){h.handleDefinitions(u,g)});var f=l.plane.bpmnElement.id;o.setRootElement(o.findRoot(f+"_plane")||o.findRoot(f))}return new Promise(function(u,l){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),a(t,n),r.fire("import.render.complete",{error:s,warnings:c}),u({warnings:c})}catch(p){return p.warnings=c,l(p)}})}function kT(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!B(n,"bpmn:Process")&&!B(n,"bpmn:Collaboration")&&(i=LT(n));var r;B(i,"bpmn:Collaboration")?r=i:r=Be(e.rootElements,function(u){if(B(u,"bpmn:Collaboration"))return Be(u.participants,function(l){return l.processRef===i})});var o=[i];r&&(o=jt(r.participants,function(u){return u.processRef}),o.push(r));var s=aw(o),c=[t],a=[n];return Z(e.diagrams,function(u){if(u.plane){var l=u.plane.bpmnElement;s.indexOf(l)!==-1&&a.indexOf(l)===-1&&(c.push(u),a.push(l))}}),c}}function aw(e){var t=[];return Z(e,function(n){n&&(t.push(n),t=t.concat(aw(n.flowElements)))}),t}function LT(e){for(var t=e;t;){if(B(t,"bpmn:Process"))return t;t=t.$parent}}var DT='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',sw=DT,lw={verticalAlign:"middle"},cw={color:"#404040"},PT={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},OT={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},NT={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},BT='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+sw+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',ei;function FT(){ei=Ie(BT),Vt(ei,PT),Vt(Ee("svg",ei),lw),Vt(Ee(".backdrop",ei),OT),Vt(Ee(".notice",ei),NT),Vt(Ee(".link",ei),cw,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function jT(){ei||(FT(),It.bind(ei,".backdrop","click",function(e){document.body.removeChild(ei)})),document.body.appendChild(ei)}function st(e){e=J({},WT,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),zT(this._container),this._init(this._container,this._moddle,e)}me(st,rr);st.prototype.importXML=async function(t,n){const i=this;function r(s){return i.get("eventBus").createEvent(s)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let s;try{s=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(h){throw this._emit("import.parse.complete",{error:h}),h}let c=s.rootElement;const a=s.references,u=s.warnings,l=s.elementsById;o=o.concat(u),c=this._emit("import.parse.complete",r({error:null,definitions:c,elementsById:l,references:a,warnings:o}))||c;const p=await this.importDefinitions(c,n);return o=o.concat(p.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(s){let c=s;throw o=o.concat(c.warnings||[]),yl(c,o),c=HT(c),this._emit("import.done",{error:c,warnings:c.warnings}),c}};st.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};st.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const o=new Error("no XML imported");throw yl(o,[]),o}if(typeof t=="string"&&(i=GT(n,t),!i)){const o=new Error("BPMNDiagram <"+t+"> not found");throw yl(o,[]),o}try{this.clear()}catch(o){throw yl(o,[]),o}const{warnings:r}=await IT(this,n,i);return{warnings:r}};st.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(s){i=s}const o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o};st.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),o=Ee(":scope > defs",i._svg),s=Vf(r),c=o?"<defs>"+Vf(o)+"</defs>":"",a=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+a.width+'" height="'+a.height+'" viewBox="'+a.x+" "+a.y+" "+a.width+" "+a.height+'" version="1.1">'+c+s+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};st.prototype._setDefinitions=function(e){this._definitions=e};st.prototype.getModules=function(){return this._modules};st.prototype.clear=function(){this.getDefinitions()&&rr.prototype.clear.call(this)};st.prototype.destroy=function(){rr.prototype.destroy.call(this),ri(this._container)};st.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};st.prototype.off=function(e,t){this.get("eventBus").off(e,t)};st.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Ee(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};st.prototype.getDefinitions=function(){return this._definitions};st.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};st.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],s=[].concat(o,i,r),c=J(Cn(n,["additionalModules"]),{canvas:J({},n.canvas,{container:e}),modules:s});rr.call(this,c),n&&n.container&&this.attachTo(n.container)};st.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};st.prototype._createContainer=function(e){const t=Ie('<div class="bjs-container"></div>');return Vt(t,{width:pg(e.width),height:pg(e.height),position:e.position}),t};st.prototype._createModdle=function(e){const t=J({},this._moddleExtensions,e.moddleExtensions);return new TT(t)};st.prototype._modules=[];function yl(e,t){return e.warnings=t,e}function HT(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const WT={width:"100%",height:"100%",position:"relative"};function pg(e){return e+(he(e)?"px":"")}function GT(e,t){return t&&Be(e.diagrams,function(n){return n.id===t})||null}function zT(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+sw+"</a>",i=Ie(n);Vt(Ee("svg",i),lw),Vt(i,cw,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),ce.bind(i,"click",function(r){jT(),r.preventDefault()})}function rs(e){st.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}me(rs,st);rs.prototype._createModdle=function(e){var t=st.prototype._createModdle.call(this,e);return t.ids=new Hn([32,36,1]),t};rs.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function Ne(e,t){return B(e,"bpmn:CallActivity")?!1:B(e,"bpmn:SubProcess")?(t=t||je(e),t&&B(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):B(e,"bpmn:Participant")?!!ie(e).processRef:!0}function Lt(e){if(!(!B(e,"bpmn:Participant")&&!B(e,"bpmn:Lane"))){var t=je(e).isHorizontal;return t===void 0?!0:t}}function VT(e){return e&&ie(e).isInterrupting!==!1}function Yt(e){return e&&!!ie(e).triggeredByEvent}function zo(e,t){var n=ie(e).eventDefinitions;return qt(n,function(i){return B(i,t)})}function UT(e){return zo(e,"bpmn:ErrorEventDefinition")}function YT(e){return zo(e,"bpmn:EscalationEventDefinition")}function ZT(e){return zo(e,"bpmn:CompensateEventDefinition")}var $a={width:90,height:20},hg=15;function Br(e){return B(e,"bpmn:Event")||B(e,"bpmn:Gateway")||B(e,"bpmn:DataStoreReference")||B(e,"bpmn:DataObjectReference")||B(e,"bpmn:DataInput")||B(e,"bpmn:DataOutput")||B(e,"bpmn:SequenceFlow")||B(e,"bpmn:MessageFlow")||B(e,"bpmn:Group")}function Cc(e){return Ge(e.label)}function XT(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=KT(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),s=r.x,c=r.y;return Math.abs(o)<Math.PI/2?c-=hg:s+=hg,{x:s,y:c}}function KT(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Fh(e){return e.waypoints?XT(e.waypoints):B(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+$a.height/2}:{x:e.x+e.width/2,y:e.y+e.height+$a.height/2}}function QT(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max($a.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Fh(t),i=$a),J({x:n.x-i.width/2,y:n.y-i.height/2},i)}function uw(e){if(B(e,"bpmn:FlowElement")||B(e,"bpmn:Participant")||B(e,"bpmn:Lane")||B(e,"bpmn:SequenceFlow")||B(e,"bpmn:MessageFlow")||B(e,"bpmn:DataInput")||B(e,"bpmn:DataOutput"))return"name";if(B(e,"bpmn:TextAnnotation"))return"text";if(B(e,"bpmn:Group"))return"categoryValueRef"}function JT(e){var t=e.categoryValueRef;return t&&t.value||""}function dn(e){var t=e.businessObject,n=uw(t);if(n)return n==="categoryValueRef"?JT(t):t[n]||""}function qT(e,t){var n=e.businessObject,i=uw(n);return i&&(i==="categoryValueRef"?n.categoryValueRef.value=t:n[i]=t),e}var Sp="hsl(225, 10%, 15%)",eM="white";function Xn(e,t){return qt(e.eventDefinitions,function(n){return n.$type===t})}function tM(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function nM(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function De(e,t,n){var i=je(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||eM}function ge(e,t,n){var i=je(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||Sp}function la(e,t,n,i){var r=je(e),o=r.get("label");return i||o&&o.get("color:color")||t||ge(e,n)}function iM(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Zr(r)}function rM(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,s=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-10,t],["l",t*2-r,0],["a",t,t,0,0,1,-10,-10],["l",0,t*2-o],["a",t,t,0,0,1,t,-10],["z"]];return Zr(s)}function oM(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,s=n/2,c=[["M",i+o,r],["l",o,s],["l",-o,s],["l",-o,-s],["z"]];return Zr(c)}function aM(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Zr(o)}function ca(e,t={}){return{width:_n(e,t),height:ln(e,t)}}function _n(e,t={}){return Ut(t,"width")?t.width:e.width}function ln(e,t={}){return Ut(t,"height")?t.height:e.height}var sM=new Hn,lM=10,Ns=3,cM=1.5,bl=10,lo=.95,uM=1,pM=.25;function Qr(e,t,n,i,r,o,s){Ci.call(this,t,s);var c=e&&e.defaultFillColor,a=e&&e.defaultStrokeColor,u=e&&e.defaultLabelColor;function l(P){return n.computeStyle(P,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Sp,strokeWidth:2,fill:"white"})}function p(P){return n.computeStyle(P,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Sp,strokeWidth:2})}function h(P,D){var{ref:L={x:0,y:0},scale:j=1,element:F,parentGfx:Q=r._svg}=D,q=ue("marker",{id:P,viewBox:"0 0 20 20",refX:L.x,refY:L.y,markerWidth:20*j,markerHeight:20*j,orient:"auto"});de(q,F);var ee=Ee(":scope > defs",Q);ee||(ee=ue("defs"),de(Q,ee)),de(ee,q)}function d(P,D,L,j){var F=sM.nextPrefixed("marker-");return f(P,F,D,L,j),"url(#"+F+")"}function f(P,D,L,j,F){if(L==="sequenceflow-end"){var Q=ue("path",{d:"M 1 5 L 11 10 L 1 15 Z",...l({fill:F,stroke:F,strokeWidth:1})});h(D,{element:Q,ref:{x:11,y:10},scale:.5,parentGfx:P})}if(L==="messageflow-start"){var q=ue("circle",{cx:6,cy:6,r:3.5,...l({fill:j,stroke:F,strokeWidth:1,strokeDasharray:[1e4,1]})});h(D,{element:q,ref:{x:6,y:6},parentGfx:P})}if(L==="messageflow-end"){var ee=ue("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...l({fill:j,stroke:F,strokeWidth:1,strokeDasharray:[1e4,1]})});h(D,{element:ee,ref:{x:8.5,y:5},parentGfx:P})}if(L==="association-start"){var ae=ue("path",{d:"M 11 5 L 1 10 L 11 15",...p({fill:"none",stroke:F,strokeWidth:1.5,strokeDasharray:[1e4,1]})});h(D,{element:ae,ref:{x:1,y:10},scale:.5,parentGfx:P})}if(L==="association-end"){var pe=ue("path",{d:"M 1 5 L 11 10 L 1 15",...p({fill:"none",stroke:F,strokeWidth:1.5,strokeDasharray:[1e4,1]})});h(D,{element:pe,ref:{x:11,y:10},scale:.5,parentGfx:P})}if(L==="conditional-flow-marker"){var He=ue("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...l({fill:j,stroke:F})});h(D,{element:He,ref:{x:-1,y:10},scale:.5,parentGfx:P})}if(L==="conditional-default-flow-marker"){var Qe=ue("path",{d:"M 6 4 L 10 16",...l({stroke:F,fill:"none"})});h(D,{element:Qe,ref:{x:0,y:10},scale:.5,parentGfx:P})}}function g(P,D,L,j,F={}){ht(j)&&(F=j,j=0),j=j||0,F=l(F);var Q=D/2,q=L/2,ee=ue("circle",{cx:Q,cy:q,r:Math.round((D+L)/4-j),...F});return de(P,ee),ee}function m(P,D,L,j,F,Q){ht(F)&&(Q=F,F=0),F=F||0,Q=l(Q);var q=ue("rect",{x:F,y:F,width:D-F*2,height:L-F*2,rx:j,ry:j,...Q});return de(P,q),q}function w(P,D,L,j){var F=D/2,Q=L/2,q=[{x:F,y:0},{x:D,y:Q},{x:F,y:L},{x:0,y:Q}],ee=q.map(function(pe){return pe.x+","+pe.y}).join(" ");j=l(j);var ae=ue("polygon",{...j,points:ee});return de(P,ae),ae}function _(P,D,L,j){L=p(L);var F=yc(D,L,j);return de(P,F),F}function E(P,D,L){return _(P,D,L,5)}function y(P,D,L){L=p(L);var j=ue("path",{...L,d:D});return de(P,j),j}function x(P,D,L,j){return y(D,L,J({"data-marker":P},j))}function v(P){return K[P]}function S(P){return function(D,L,j){return v(P)(D,L,j)}}var M={"bpmn:MessageEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:D.width,containerHeight:D.height,position:{mx:.235,my:.315}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill),q=j?De(D,c,L.fill):ge(D,a,L.stroke),ee=y(P,F,{fill:Q,stroke:q,strokeWidth:1});return ee},"bpmn:TimerEventDefinition":function(P,D,L={}){var j=g(P,D.width,D.height,.2*D.height,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:2}),F=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:D.width,containerHeight:D.height,position:{mx:.5,my:.5}});y(P,F,{stroke:ge(D,a,L.stroke),strokeWidth:2});for(var Q=0;Q<12;Q++){var q=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:D.width,containerHeight:D.height,position:{mx:.5,my:.5}}),ee=D.width/2,ae=D.height/2;y(P,q,{strokeWidth:1,stroke:ge(D,a,L.stroke),transform:"rotate("+Q*30+","+ae+","+ee+")"})}return j},"bpmn:EscalationEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.5,my:.2}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill);return y(P,F,{fill:Q,stroke:ge(D,a,L.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(P,D,L={}){var j=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.5,my:.222}});return y(P,j,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.57,my:.263}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill);return y(P,F,{fill:Q,stroke:ge(D,a,L.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:D.width,containerHeight:D.height,position:{mx:.2,my:.722}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill);return y(P,F,{fill:Q,stroke:ge(D,a,L.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.638,my:-.055}}),Q=j?ge(D,a,L.stroke):"none",q=y(P,F,{fill:Q,stroke:ge(D,a,L.stroke),strokeWidth:1});return zb(q,45),q},"bpmn:CompensateEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.22,my:.5}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill);return y(P,F,{fill:Q,stroke:ge(D,a,L.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:D.width,containerHeight:D.height,position:{mx:.5,my:.2}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill);return y(P,F,{strokeWidth:1,fill:Q,stroke:ge(D,a,L.stroke)})},"bpmn:MultipleEventDefinition":function(P,D,L={},j){var F=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:D.width,containerHeight:D.height,position:{mx:.222,my:.36}}),Q=j?ge(D,a,L.stroke):De(D,c,L.fill);return y(P,F,{fill:Q,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(P,D,L={}){var j=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:D.width,containerHeight:D.height,position:{mx:.458,my:.194}});return y(P,j,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(P,D,L={}){var j=g(P,D.width,D.height,8,{fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke),strokeWidth:4});return j}};function $(P,D,L={}){var j=ie(P),F=tM(j);return j.get("eventDefinitions")&&j.get("eventDefinitions").length>1?j.get("parallelMultiple")?M["bpmn:ParallelMultipleEventDefinition"](D,P,L,F):M["bpmn:MultipleEventDefinition"](D,P,L,F):Xn(j,"bpmn:MessageEventDefinition")?M["bpmn:MessageEventDefinition"](D,P,L,F):Xn(j,"bpmn:TimerEventDefinition")?M["bpmn:TimerEventDefinition"](D,P,L,F):Xn(j,"bpmn:ConditionalEventDefinition")?M["bpmn:ConditionalEventDefinition"](D,P,L,F):Xn(j,"bpmn:SignalEventDefinition")?M["bpmn:SignalEventDefinition"](D,P,L,F):Xn(j,"bpmn:EscalationEventDefinition")?M["bpmn:EscalationEventDefinition"](D,P,L,F):Xn(j,"bpmn:LinkEventDefinition")?M["bpmn:LinkEventDefinition"](D,P,L,F):Xn(j,"bpmn:ErrorEventDefinition")?M["bpmn:ErrorEventDefinition"](D,P,L,F):Xn(j,"bpmn:CancelEventDefinition")?M["bpmn:CancelEventDefinition"](D,P,L,F):Xn(j,"bpmn:CompensateEventDefinition")?M["bpmn:CompensateEventDefinition"](D,P,L,F):Xn(j,"bpmn:TerminateEventDefinition")?M["bpmn:TerminateEventDefinition"](D,P,L,F):null}var T={ParticipantMultiplicityMarker:function(P,D,L={}){var j=_n(D,L),F=ln(D,L),Q=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:F,position:{mx:(j/2-6)/j,my:(F-15)/F}});x("participant-multiplicity",P,Q,{strokeWidth:2,fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)})},SubProcessMarker:function(P,D,L={}){var j=m(P,14,14,0,{strokeWidth:1,fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)});Ft(j,D.width/2-7.5,D.height-20);var F=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:D.width,containerHeight:D.height,position:{mx:(D.width/2-7.5)/D.width,my:(D.height-20)/D.height}});x("sub-process",P,F,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)})},ParallelMarker:function(P,D,L){var j=_n(D,L),F=ln(D,L),Q=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:F,position:{mx:(j/2+L.parallel)/j,my:(F-20)/F}});x("parallel",P,Q,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)})},SequentialMarker:function(P,D,L){var j=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:(D.width/2+L.seq)/D.width,my:(D.height-19)/D.height}});x("sequential",P,j,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)})},CompensationMarker:function(P,D,L){var j=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:(D.width/2+L.compensation)/D.width,my:(D.height-13)/D.height}});x("compensation",P,j,{strokeWidth:1,fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)})},LoopMarker:function(P,D,L){var j=_n(D,L),F=ln(D,L),Q=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:F,position:{mx:(j/2+L.loop)/j,my:(F-7)/F}});x("loop",P,Q,{strokeWidth:1.5,fill:"none",stroke:ge(D,a,L.stroke),strokeMiterlimit:.5})},AdhocMarker:function(P,D,L){var j=_n(D,L),F=ln(D,L),Q=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:F,position:{mx:(j/2+L.adhoc)/j,my:(F-15)/F}});x("adhoc",P,Q,{strokeWidth:1,fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke)})}};function I(P,D,L,j){T[P](D,L,j)}function C(P,D,L,j={}){j={fill:j.fill,stroke:j.stroke,width:_n(D,j),height:ln(D,j)};var F=ie(D),Q=L&&L.includes("SubProcessMarker");Q?j={...j,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:j={...j,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},Z(L,function(ae){I(ae,P,D,j)}),F.get("isForCompensation")&&I("CompensationMarker",P,D,j),B(F,"bpmn:AdHocSubProcess")&&I("AdhocMarker",P,D,j);var q=F.get("loopCharacteristics"),ee=q&&q.get("isSequential");q&&(ee===void 0&&I("LoopMarker",P,D,j),ee===!1&&I("ParallelMarker",P,D,j),ee===!0&&I("SequentialMarker",P,D,j))}function b(P,D,L={}){L=J({size:{width:100}},L);var j=o.createText(D||"",L);return ke(j).add("djs-label"),de(P,j),j}function A(P,D,L,j={}){var F=ie(D),Q=ca({x:D.x,y:D.y,width:D.width,height:D.height},j);return b(P,F.name,{align:L,box:Q,padding:7,style:{fill:la(D,u,a,j.stroke)}})}function R(P,D,L={}){var j={width:90,height:30,x:D.width/2+D.x,y:D.height/2+D.y};return b(P,dn(D),{box:j,fitBox:!0,style:J({},o.getExternalStyle(),{fill:la(D,u,a,L.stroke)})})}function k(P,D,L,j={}){var F=Lt(L),Q=b(P,D,{box:{height:30,width:F?ln(L,j):_n(L,j)},align:"center-middle",style:{fill:la(L,u,a,j.stroke)}});if(F){var q=-1*ln(L,j);vl(Q,0,-q,270)}}function O(P,D,L={}){var{width:j,height:F}=ca(D,L);return m(P,j,F,bl,{...L,fill:De(D,c,L.fill),fillOpacity:lo,stroke:ge(D,a,L.stroke)})}function N(P,D,L={}){var j=ie(D),F=De(D,c,L.fill),Q=ge(D,a,L.stroke);return(j.get("associationDirection")==="One"||j.get("associationDirection")==="Both")&&(L.markerEnd=d(P,"association-end",F,Q)),j.get("associationDirection")==="Both"&&(L.markerStart=d(P,"association-start",F,Q)),L=We(L,["markerStart","markerEnd"]),E(P,D.waypoints,{...L,stroke:Q,strokeDasharray:"0, 5"})}function W(P,D,L={}){var j=De(D,c,L.fill),F=ge(D,a,L.stroke),Q=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.474,my:.296}}),q=y(P,Q,{fill:j,fillOpacity:lo,stroke:F}),ee=ie(D);if(nM(ee)){var ae=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:.33,my:(D.height-18)/D.height}});y(P,ae,{strokeWidth:2,fill:j,stroke:F})}return q}function z(P,D,L={}){return g(P,D.width,D.height,{fillOpacity:lo,...L,fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)})}function V(P,D,L={}){return w(P,D.width,D.height,{fill:De(D,c,L.fill),fillOpacity:lo,stroke:ge(D,a,L.stroke)})}function U(P,D,L={}){var j=m(P,_n(D,L),ln(D,L),0,{fill:De(D,c,L.fill),fillOpacity:L.fillOpacity||lo,stroke:ge(D,a,L.stroke),strokeWidth:1.5}),F=ie(D);if(B(F,"bpmn:Lane")){var Q=F.get("name");k(P,Q,D,L)}return j}function H(P,D,L={}){var j=O(P,D,L);Yt(D)&&te(j,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var F=Ne(D);return A(P,D,F?"center-top":"center-middle",L),F?C(P,D,void 0,L):C(P,D,["SubProcessMarker"],L),j}function Y(P,D,L={}){var j=O(P,D,L);return A(P,D,"center-middle",L),C(P,D,void 0,L),j}var K=this.handlers={"bpmn:AdHocSubProcess":function(P,D,L={}){return Ne(D)?L=We(L,["fill","stroke","width","height"]):L=We(L,["fill","stroke"]),H(P,D,L)},"bpmn:Association":function(P,D,L={}){return L=We(L,["fill","stroke"]),N(P,D,L)},"bpmn:BoundaryEvent":function(P,D,L={}){var{renderIcon:j=!0}=L;L=We(L,["fill","stroke"]);var F=ie(D),Q=F.get("cancelActivity");L={strokeWidth:1.5,fill:De(D,c,L.fill),fillOpacity:uM,stroke:ge(D,a,L.stroke)},Q||(L.strokeDasharray="6");var q=z(P,D,L);return g(P,D.width,D.height,Ns,{...L,fill:"none"}),j&&$(D,P,L),q},"bpmn:BusinessRuleTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=Y(P,D,L),F=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),Q=y(P,F);te(Q,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1});var q=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),ee=y(P,q);return te(ee,{fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke),strokeWidth:1}),j},"bpmn:CallActivity":function(P,D,L={}){return L=We(L,["fill","stroke"]),H(P,D,{strokeWidth:5,...L})},"bpmn:ComplexGateway":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=V(P,D,L),F=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:D.width,containerHeight:D.height,position:{mx:.46,my:.26}});return y(P,F,{fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke),strokeWidth:1}),j},"bpmn:DataInput":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=i.getRawPath("DATA_ARROW"),F=W(P,D,L);return y(P,j,{fill:"none",stroke:ge(D,a,L.stroke),strokeWidth:1}),F},"bpmn:DataInputAssociation":function(P,D,L={}){return L=We(L,["fill","stroke"]),N(P,D,{...L,markerEnd:d(P,"association-end",De(D,c,L.fill),ge(D,a,L.stroke))})},"bpmn:DataObject":function(P,D,L={}){return L=We(L,["fill","stroke"]),W(P,D,L)},"bpmn:DataObjectReference":S("bpmn:DataObject"),"bpmn:DataOutput":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=i.getRawPath("DATA_ARROW"),F=W(P,D,L);return y(P,j,{strokeWidth:1,fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke)}),F},"bpmn:DataOutputAssociation":function(P,D,L={}){return L=We(L,["fill","stroke"]),N(P,D,{...L,markerEnd:d(P,"association-end",De(D,c,L.fill),ge(D,a,L.stroke))})},"bpmn:DataStoreReference":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:D.width,containerHeight:D.height,position:{mx:0,my:.133}});return y(P,j,{fill:De(D,c,L.fill),fillOpacity:lo,stroke:ge(D,a,L.stroke),strokeWidth:2})},"bpmn:EndEvent":function(P,D,L={}){var{renderIcon:j=!0}=L;L=We(L,["fill","stroke"]);var F=z(P,D,{...L,strokeWidth:4});return j&&$(D,P,L),F},"bpmn:EventBasedGateway":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=ie(D),F=V(P,D,L);g(P,D.width,D.height,D.height*.2,{fill:De(D,"none",L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1});var Q=j.get("eventGatewayType"),q=!!j.get("instantiate");function ee(){var pe=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:D.width,containerHeight:D.height,position:{mx:.36,my:.44}});y(P,pe,{fill:"none",stroke:ge(D,a,L.stroke),strokeWidth:2})}if(Q==="Parallel"){var ae=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:D.width,containerHeight:D.height,position:{mx:.474,my:.296}});y(P,ae,{fill:"none",stroke:ge(D,a,L.stroke),strokeWidth:1})}else Q==="Exclusive"&&(q||g(P,D.width,D.height,D.height*.26,{fill:"none",stroke:ge(D,a,L.stroke),strokeWidth:1}),ee());return F},"bpmn:ExclusiveGateway":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=V(P,D,L),F=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:D.width,containerHeight:D.height,position:{mx:.32,my:.3}}),Q=je(D);return Q.get("isMarkerVisible")&&y(P,F,{fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke),strokeWidth:1}),j},"bpmn:Gateway":function(P,D,L={}){return L=We(L,["fill","stroke"]),V(P,D,L)},"bpmn:Group":function(P,D,L={}){return L=We(L,["fill","stroke","width","height"]),m(P,D.width,D.height,bl,{stroke:ge(D,a,L.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:_n(D,L),height:ln(D,L)})},"bpmn:InclusiveGateway":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=V(P,D,L);return g(P,D.width,D.height,D.height*.24,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:2.5}),j},"bpmn:IntermediateEvent":function(P,D,L={}){var{renderIcon:j=!0}=L;L=We(L,["fill","stroke"]);var F=z(P,D,{...L,strokeWidth:1.5});return g(P,D.width,D.height,Ns,{fill:"none",stroke:ge(D,a,L.stroke),strokeWidth:1.5}),j&&$(D,P,L),F},"bpmn:IntermediateCatchEvent":S("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":S("bpmn:IntermediateEvent"),"bpmn:Lane":function(P,D,L={}){return L=We(L,["fill","stroke","width","height"]),U(P,D,{...L,fillOpacity:pM})},"bpmn:ManualTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=Y(P,D,L),F=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return y(P,F,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:.5}),j},"bpmn:MessageFlow":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=ie(D),F=je(D),Q=De(D,c,L.fill),q=ge(D,a,L.stroke),ee=E(P,D.waypoints,{markerEnd:d(P,"messageflow-end",Q,q),markerStart:d(P,"messageflow-start",Q,q),stroke:q,strokeDasharray:"10, 11",strokeWidth:1.5});if(j.get("messageRef")){var ae=ee.getPointAtLength(ee.getTotalLength()/2),pe=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:ae.x,y:ae.y}}),He={strokeWidth:1};F.get("messageVisibleKind")==="initiating"?(He.fill=Q,He.stroke=q):(He.fill=q,He.stroke=Q);var Qe=y(P,pe,He),Ue=j.get("messageRef"),ze=Ue.get("name"),Ye=b(P,ze,{align:"center-top",fitBox:!0,style:{fill:q}}),Zn=Qe.getBBox(),Ni=Ye.getBBox(),Bt=ae.x-Ni.width/2,ye=ae.y+Zn.height/2+lM;vl(Ye,Bt,ye,0)}return ee},"bpmn:ParallelGateway":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=V(P,D,L),F=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:D.width,containerHeight:D.height,position:{mx:.46,my:.2}});return y(P,F,{fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke),strokeWidth:1}),j},"bpmn:Participant":function(P,D,L={}){L=We(L,["fill","stroke","width","height"]);var j=U(P,D,L),F=Ne(D),Q=Lt(D),q=ie(D),ee=q.get("name");if(F){var ae=Q?[{x:30,y:0},{x:30,y:ln(D,L)}]:[{x:0,y:30},{x:_n(D,L),y:30}];_(P,ae,{stroke:ge(D,a,L.stroke),strokeWidth:cM}),k(P,ee,D,L)}else{var pe=ca(D,L);Q||(pe.height=_n(D,L),pe.width=ln(D,L));var He=b(P,ee,{box:pe,align:"center-middle",style:{fill:la(D,u,a,L.stroke)}});if(!Q){var Qe=-1*ln(D,L);vl(He,0,-Qe,270)}}return q.get("participantMultiplicity")&&I("ParticipantMultiplicityMarker",P,D,L),j},"bpmn:ReceiveTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=ie(D),F=Y(P,D,L),Q;return j.get("instantiate")?(g(P,28,28,20*.22,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1}),Q=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):Q=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(P,Q,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1}),F},"bpmn:ScriptTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=Y(P,D,L),F=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return y(P,F,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1}),j},"bpmn:SendTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=Y(P,D,L),F=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return y(P,F,{fill:ge(D,a,L.stroke),stroke:De(D,c,L.fill),strokeWidth:1}),j},"bpmn:SequenceFlow":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=De(D,c,L.fill),F=ge(D,a,L.stroke),Q=E(P,D.waypoints,{markerEnd:d(P,"sequenceflow-end",j,F),stroke:F}),q=ie(D),{source:ee}=D;if(ee){var ae=ie(ee);q.get("conditionExpression")&&B(ae,"bpmn:Activity")&&te(Q,{markerStart:d(P,"conditional-flow-marker",j,F)}),ae.get("default")&&(B(ae,"bpmn:Gateway")||B(ae,"bpmn:Activity"))&&ae.get("default")===q&&te(Q,{markerStart:d(P,"conditional-default-flow-marker",j,F)})}return Q},"bpmn:ServiceTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=Y(P,D,L);g(P,10,10,{fill:De(D,c,L.fill),stroke:"none",transform:"translate(6, 6)"});var F=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});y(P,F,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1}),g(P,10,10,{fill:De(D,c,L.fill),stroke:"none",transform:"translate(11, 10)"});var Q=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return y(P,Q,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:1}),j},"bpmn:StartEvent":function(P,D,L={}){var{renderIcon:j=!0}=L;L=We(L,["fill","stroke"]);var F=ie(D);F.get("isInterrupting")||(L={...L,strokeDasharray:"6"});var Q=z(P,D,L);return j&&$(D,P,L),Q},"bpmn:SubProcess":function(P,D,L={}){return Ne(D)?L=We(L,["fill","stroke","width","height"]):L=We(L,["fill","stroke"]),H(P,D,L)},"bpmn:Task":function(P,D,L={}){return L=We(L,["fill","stroke"]),Y(P,D,L)},"bpmn:TextAnnotation":function(P,D,L={}){L=We(L,["fill","stroke","width","height"]);var{width:j,height:F}=ca(D,L),Q=m(P,j,F,0,0,{fill:"none",stroke:"none"}),q=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:j,containerHeight:F,position:{mx:0,my:0}});y(P,q,{stroke:ge(D,a,L.stroke)});var ee=ie(D),ae=ee.get("text")||"";return b(P,ae,{align:"left-top",box:ca(D,L),padding:7,style:{fill:la(D,u,a,L.stroke)}}),Q},"bpmn:Transaction":function(P,D,L={}){Ne(D)?L=We(L,["fill","stroke","width","height"]):L=We(L,["fill","stroke"]);var j=H(P,D,{strokeWidth:1.5,...L}),F=n.style(["no-fill","no-events"],{stroke:ge(D,a,L.stroke),strokeWidth:1.5}),Q=Ne(D);return Q||(L={}),m(P,_n(D,L),ln(D,L),bl-Ns,Ns,F),j},"bpmn:UserTask":function(P,D,L={}){L=We(L,["fill","stroke"]);var j=Y(P,D,L),F=15,Q=12,q=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:F,y:Q}});y(P,q,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:.5});var ee=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:F,y:Q}});y(P,ee,{fill:De(D,c,L.fill),stroke:ge(D,a,L.stroke),strokeWidth:.5});var ae=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:F,y:Q}});return y(P,ae,{fill:ge(D,a,L.stroke),stroke:ge(D,a,L.stroke),strokeWidth:.5}),j},label:function(P,D,L={}){return R(P,D,L)}};this._drawPath=y,this._renderer=v}me(Qr,Ci);Qr.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Qr.prototype.canRender=function(e){return B(e,"bpmn:BaseElement")};Qr.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Qr.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Qr.prototype.getShapePath=function(e){return B(e,"bpmn:Event")?iM(e):B(e,"bpmn:Activity")?rM(e,bl):B(e,"bpmn:Gateway")?oM(e):aM(e)};function We(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var hM=0,dM={width:150,height:50};function fM(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function gM(e){return ht(e)?J({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function mM(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function vM(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=mM(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return yM(e,r,i,o);r=wM(r,o.width,t)}}function yM(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var dg="";function bM(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===dg)&&r.pop();break}var s=r[r.length-1];return s&&s===dg&&(r[r.length-1]="-"),r.join("")}function wM(e,t,n){var i=Math.max(e.length*(n/t),1),r=bM(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function _M(){var e=document.getElementById("helper-svg");return e||(e=ue("svg"),te(e,{id:"helper-svg"}),Vt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function Ac(e){this._config=J({},{size:dM,padding:hM,style:{},align:"center-top"},e||{})}Ac.prototype.createText=function(e,t){return this.layoutText(e,t).element};Ac.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};Ac.prototype.layoutText=function(e,t){var n=J({},this._config.size,t.box),i=J({},this._config.style,t.style),r=fM(t.align||this._config.align),o=gM(t.padding!==void 0?t.padding:this._config.padding),s=t.fitBox||!1,c=xM(i),a=e.split(/\u00AD?\r?\n/),u=[],l=n.width-o.left-o.right,p=ue("text");te(p,{x:0,y:0}),te(p,i);var h=_M();for(de(h,p);a.length;)u.push(vM(a,l,p));r.vertical==="middle"&&(o.top=o.bottom=0);var d=un(u,function(_,E,y){return _+(c||E.height)},0)+o.top+o.bottom,f=un(u,function(_,E,y){return E.width>_?E.width:_},0),g=o.top;r.vertical==="middle"&&(g+=(n.height-d)/2),g-=(c||u[0].height)/4;var m=ue("text");te(m,i),Z(u,function(_){var E;switch(g+=c||_.height,r.horizontal){case"left":E=o.left;break;case"right":E=(s?f:l)-o.right-_.width;break;default:E=Math.max(((s?f:l)-_.width)/2+o.left,0)}var y=ue("tspan");te(y,{x:E,y:g}),y.textContent=_.text,de(m,y)}),Je(p);var w={width:f,height:d};return{dimensions:w,element:m}};function xM(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var EM=12,SM=1.2,CM=30;function pw(e){var t=J({fontFamily:"Arial, sans-serif",fontSize:EM,fontWeight:"normal",lineHeight:SM},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=J({},t,{fontSize:n},e&&e.externalStyle||{}),r=new Ac({style:t});this.getExternalLabelBounds=function(o,s){var c=r.getDimensions(s,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-c.width/2),y:Math.round(o.y),width:Math.ceil(c.width),height:Math.ceil(c.height)}},this.getTextAnnotationBounds=function(o,s){var c=r.getDimensions(s,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(CM,Math.round(c.height))}},this.createText=function(o,s){return r.createText(o,s||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}pw.$inject=["config.textRenderer"];function AM(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var s={};if(n.position){for(var c=n.containerHeight/i.height*n.yScaleFactor,a=n.containerWidth/i.width*n.xScaleFactor,u=0;u<i.heightElements.length;u++)s["y"+u]=i.heightElements[u]*c;for(var l=0;l<i.widthElements.length;l++)s["x"+l]=i.widthElements[l]*a}var p=RM(i.d,{mx:r,my:o,e:s});return p}}var TM=/\{([^{}]+)\}/g,MM=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function $M(e,t,n){var i=n;return t.replace(MM,function(r,o,s,c,a){o=o||c,i&&(o in i&&(i=i[o]),typeof i=="function"&&a&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function RM(e,t){return String(e).replace(TM,function(n,i){return $M(n,i,t)})}const IM={__init__:["bpmnRenderer"],bpmnRenderer:["type",Qr],textRenderer:["type",pw],pathMap:["type",AM]};function kM(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Tc={translate:["value",kM]};function wl(e,t,n){return J({id:e.id,type:e.$type,businessObject:e,di:t},n)}function LM(e,t,n){var i=e.waypoint;return!i||i.length<2?[Se(t),Se(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function hw(e,t,n){return new Error(`element ${zt(t)} referenced by ${zt(e)}#${n} not yet drawn`)}function Ti(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}Ti.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"];Ti.prototype.add=function(e,t,n){var i,r,o;if(B(t,"bpmndi:BPMNPlane")){var s=B(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(wl(e,t,s)),this._canvas.addRootElement(i)}else if(B(t,"bpmndi:BPMNShape")){var c=!Ne(e,t),a=PM(e);r=n&&(n.hidden||n.collapsed);var u=t.bounds;i=this._elementFactory.createShape(wl(e,t,{collapsed:c,hidden:r,x:Math.round(u.x),y:Math.round(u.y),width:Math.round(u.width),height:Math.round(u.height),isFrame:a})),B(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),B(e,"bpmn:Lane")&&(o=0),B(e,"bpmn:DataStoreReference")&&(DM(n,Se(u))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(B(t,"bpmndi:BPMNEdge")){var l=this._getSource(e),p=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(wl(e,t,{hidden:r,source:l,target:p,waypoints:LM(t,l,p)})),B(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(`unknown di ${zt(t)} for element ${zt(e)}`);return Br(e)&&dn(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Ti.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${zt(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw hw(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)};Ti.prototype.addLabel=function(e,t,n){var i,r,o;return i=QT(t,n),r=dn(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(wl(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!dn(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)};Ti.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?hw(e,i,t+"Ref"):new Error(`${zt(e)}#${t} Ref not specified`)};Ti.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Ti.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Ti.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function DM(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function PM(e){return B(e,"bpmn:Group")}const OM={__depends__:[Tc],bpmnImporter:["type",Ti]},NM={__depends__:[IM,OM]};function os(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}os.prototype.next=function(){return this._prefix+ ++this._counter};var BM=new os("ov"),FM=500;function Nt(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=BM,this._overlayDefaults=J({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=jM(n.getContainer()),this._init()}Nt.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Nt.prototype.get=function(e){if(cn(e)&&(e={id:e}),cn(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?$e(t.overlays,Bn({type:e.type})):t.overlays.slice():[]}else return e.type?$e(this._overlays,Bn({type:e.type})):e.id?this._overlays[e.id]:null};Nt.prototype.add=function(e,t,n){if(ht(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=J({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Nt.prototype.remove=function(e){var t=this.get(e)||[];xe(t)||(t=[t]);var n=this;Z(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(ri(i.html),ri(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})};Nt.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Nt.prototype.show=function(){Mc(this._overlayRoot)};Nt.prototype.hide=function(){Mc(this._overlayRoot,!1)};Nt.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Fo(this._overlayRoot)};Nt.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=kt(t);i=o.x,r=o.y}dw(n,i,r),ft(e.html,"data-container-id",t.id)};Nt.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var s;i.waypoints?s=kt(i).width:s=i.width,r=t.right*-1+s}if(t.bottom!==void 0){var c;i.waypoints?c=kt(i).height:c=i.height,o=t.bottom*-1+c}dw(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Nt.prototype._createOverlayContainer=function(e){var t=Ie('<div class="djs-overlays" />');Vt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Nt.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";fw(this._overlayRoot,n)};Nt.prototype._getOverlayContainer=function(e,t){var n=Be(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Nt.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),cn(i)&&(i=Ie(i)),o=this._getOverlayContainer(n),r=Ie('<div class="djs-overlay" data-overlay-id="'+t+'">'),Vt(r,{position:"absolute"}),r.appendChild(i),e.type&&ve(r).add("djs-overlay-"+e.type);var s=this._canvas.findRoot(n),c=this._canvas.getRootElement();Mc(r,s===c),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Nt.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,s=e.htmlContainer,c=this._canvas.getRootElement(),a=!0;(i!==c||n&&(Pt(r)&&r>t.scale||Pt(o)&&o<t.scale))&&(a=!1),Mc(s,a),this._updateOverlayScale(e,t)};Nt.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,s,c="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Pt(i)&&t.scale<i&&(s=(1/t.scale||1)*i),Pt(r)&&t.scale>r&&(s=(1/t.scale||1)*r)),Pt(s)&&(c="scale("+s+","+s+")"),fw(o,c)};Nt.prototype._updateOverlaysVisibilty=function(e){var t=this;Z(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Nt.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});Z(o,function(a){t.remove(a.id)});var s=t._getOverlayContainer(r);if(s){ri(s.html);var c=t._overlayContainers.indexOf(s);c!==-1&&t._overlayContainers.splice(c,1)}}),e.on("element.changed",FM,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(Z(o.overlays,function(s){t._updateOverlay(s)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&ve(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function jM(e){var t=Ie('<div class="djs-overlay-container" />');return Vt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function dw(e,t,n){Vt(e,{left:t+"px",top:n+"px"})}function Mc(e,t){e.style.display=t===!1?"none":""}function fw(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const $c={__init__:["overlays"],overlays:["type",Nt]};function gw(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(Tb(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(s){e.fire("element.changed",{element:s})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}gw.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const jh={__init__:["changeSupport"],changeSupport:["type",gw]};var HM=1e3;function oe(e){this._eventBus=e}oe.$inject=["eventBus"];function WM(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}oe.prototype.on=function(e,t,n,i,r,o){if((ot(t)||he(t))&&(o=r,r=i,i=n,n=t,t=null),ot(n)&&(o=r,r=i,i=n,n=HM),ht(r)&&(o=r,r=!1),!ot(i))throw new Error("handlerFn must be a function");xe(e)||(e=[e]);var s=this._eventBus;Z(e,function(c){var a=["commandStack",c,t].filter(function(u){return u}).join(".");s.on(a,n,r?WM(i,o):i,o)})};oe.prototype.canExecute=Mi("canExecute");oe.prototype.preExecute=Mi("preExecute");oe.prototype.preExecuted=Mi("preExecuted");oe.prototype.execute=Mi("execute");oe.prototype.executed=Mi("executed");oe.prototype.postExecute=Mi("postExecute");oe.prototype.postExecuted=Mi("postExecuted");oe.prototype.revert=Mi("revert");oe.prototype.reverted=Mi("reverted");function Mi(e){return function(n,i,r,o,s){(ot(n)||he(n))&&(s=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,s)}}function Hh(e,t){t.invoke(oe,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}me(Hh,oe);Hh.$inject=["canvas","injector"];const GM={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Hh]};function Ra(e){return CSS.escape(e)}var zM={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Cp(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return zM[t]})}var mw="_plane";function fg(e){var t=e.id;return VM(t)}function di(e){var t=e.id;return B(e,"bpmn:SubProcess")?vw(t):t}function Er(e){return vw(e)}function _l(e){var t=je(e);return B(t,"bpmndi:BPMNPlane")}function vw(e){return e+mw}function VM(e){return e.replace(new RegExp(mw+"$"),"")}var UM="bjs-breadcrumbs-shown";function yw(e,t,n){var i=Ie('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=ve(r);r.appendChild(i);var s=[];e.on("element.changed",function(a){var u=a.element,l=ie(u),p=Be(s,function(h){return h===l});p&&c()});function c(a){a&&(s=YM(a));var u=s.flatMap(function(p){var h=n.findRoot(di(p))||n.findRoot(p.id);if(!h&&B(p,"bpmn:Process")){var d=t.find(function(m){var w=ie(m);return w&&w.get("processRef")===p});h=d&&n.findRoot(d.id)}if(!h)return[];var f=Cp(p.name||p.id),g=Ie('<li><span class="bjs-crumb"><a title="'+f+'">'+f+"</a></span></li>");return g.addEventListener("click",function(){n.setRootElement(h)}),g});i.innerHTML="";var l=u.length>1;o.toggle(UM,l),u.forEach(function(p){i.appendChild(p)})}e.on("root.set",function(a){c(a.element)})}yw.$inject=["eventBus","elementRegistry","canvas"];function YM(e){for(var t=ie(e),n=[],i=t;i;i=i.$parent)(B(i,"bpmn:SubProcess")||B(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function bw(e,t){var n=null,i=new ZM;e.on("root.set",function(r){var o=r.element,s=t.viewbox(),c=i.get(o);if(i.set(n,{x:s.x,y:s.y,zoom:s.scale}),n=o,!(!B(o,"bpmn:SubProcess")&&!c)){c=c||{x:0,y:0,zoom:1};var a=(s.x-c.x)*s.scale,u=(s.y-c.y)*s.scale;(a!==0||u!==0)&&t.scroll({dx:a,dy:u}),c.zoom!==s.scale&&t.zoom(c.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}bw.$inject=["eventBus","canvas"];function ZM(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var gg={x:180,y:160};function Jr(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Jr.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Jr.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var s=o.bpmnElement;if(s){var c=s.$parent;B(s,"bpmn:SubProcess")&&!o.isExpanded&&n.push(s),KM(s,e)&&i.push({diElement:o,parent:c})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var s=t._createDiagram(o);t._processToDiagramMap[o.id]=s,r.push(s)}}),i.forEach(function(o){for(var s=o.diElement,c=o.parent;c&&n.indexOf(c)===-1;)c=c.$parent;if(c){var a=t._processToDiagramMap[c.id];t._moveToDiPlane(s,a.plane)}}),r};Jr.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=XM(e),i={x:n.x-gg.x,y:n.y-gg.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Jr.prototype._moveToDiPlane=function(e,t){var n=ww(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Jr.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Jr.$inject=["eventBus","moddle"];function ww(e){return B(e,"bpmndi:BPMNDiagram")?e:ww(e.$parent)}function XM(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=be(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),wc(t)}function KM(e,t){var n=e.$parent;return!(!B(n,"bpmn:SubProcess")||n===t.bpmnElement||Re(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var Bs=250,QM='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',JM="bjs-drilldown-empty";function ar(e,t,n,i,r){oe.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed("shape.toggleCollapse",Bs,function(s){var c=s.shape;o._canDrillDown(c)?o._addOverlay(c):o._removeOverlay(c)},!0),this.reverted("shape.toggleCollapse",Bs,function(s){var c=s.shape;o._canDrillDown(c)?o._addOverlay(c):o._removeOverlay(c)},!0),this.executed(["shape.create","shape.move","shape.delete"],Bs,function(s){var c=s.oldParent,a=s.newParent||s.parent,u=s.shape;o._canDrillDown(u)&&o._addOverlay(u),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(a),o._updateDrilldownOverlay(u)},!0),this.reverted(["shape.create","shape.move","shape.delete"],Bs,function(s){var c=s.oldParent,a=s.newParent||s.parent,u=s.shape;o._canDrillDown(u)&&o._addOverlay(u),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(a),o._updateDrilldownOverlay(u)},!0),t.on("import.render.complete",function(){n.filter(function(s){return o._canDrillDown(s)}).map(function(s){o._addOverlay(s)})})}me(ar,oe);ar.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};ar.prototype._canDrillDown=function(e){var t=this._canvas;return B(e,"bpmn:SubProcess")&&t.findRoot(di(e))};ar.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=ie(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;ve(i.html).toggle(JM,!r)}};ar.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=ie(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=Ie('<button type="button" class="bjs-drilldown">'+QM+"</button>"),s=i.get("name")||i.get("id"),c=this._translate("Open {element}",{element:s});o.setAttribute("title",c),o.addEventListener("click",function(){t.setRootElement(t.findRoot(di(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)};ar.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};ar.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];const qM={__depends__:[$c,jh,GM],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",yw],drilldownCentering:["type",bw],drilldownOverlayBehavior:["type",ar],subprocessCompatibility:["type",Jr]};var e$=500,t$=1e3;function qr(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var s=ue("rect");return te(s,J({x:0,y:0,rx:4,width:100,height:100},n)),s}e.on(["shape.added","shape.changed"],e$,function(o){var s=o.element,c=o.gfx,a=Ee(".djs-outline",c);a||(a=i.getOutline(s)||r(),de(c,a)),i.updateShapeOutline(a,s)}),e.on(["connection.added","connection.changed"],function(o){var s=o.element,c=o.gfx,a=Ee(".djs-outline",c);a||(a=r(),de(c,a)),i.updateConnectionOutline(a,s)})}qr.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&Z(i,function(r){n=n||r.updateOutline(t,e)}),n||te(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};qr.prototype.updateConnectionOutline=function(e,t){var n=kt(t);te(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};qr.prototype.registerProvider=function(e,t){t||(t=e,e=t$),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};qr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};qr.prototype.getOutline=function(e){var t,n=this._getProviders();return Z(n,function(i){ot(i.getOutline)&&(t=t||i.getOutline(e))}),t};qr.$inject=["eventBus","styles","elementRegistry"];const Wh={__init__:["outline"],outline:["type",qr]},n$="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",i$="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",r$={width:36,height:50},o$={width:50,height:50};function mg(e,t,n){return ue("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const vo=5;function Rc(e,t){this._styles=t,e.registerProvider(this)}Rc.$inject=["outline","styles"];Rc.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Ge(e))return B(e,"bpmn:Gateway")?(n=ue("rect"),J(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),te(n,J({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Re(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ue("rect"),te(n,J({x:-5,y:-5,rx:14,width:e.width+vo*2,height:e.height+vo*2},t))):B(e,"bpmn:EndEvent")?(n=ue("circle"),te(n,J({cx:e.width/2,cy:e.height/2,r:e.width/2+vo+1},t))):B(e,"bpmn:Event")?(n=ue("circle"),te(n,J({cx:e.width/2,cy:e.height/2,r:e.width/2+vo},t))):B(e,"bpmn:DataObjectReference")&&vg(e,"bpmn:DataObjectReference")?n=mg(n$,{x:-6,y:-6},t):B(e,"bpmn:DataStoreReference")&&vg(e,"bpmn:DataStoreReference")&&(n=mg(i$,{x:-6,y:-6},t)),n};Rc.prototype.updateOutline=function(e,t){if(!Ge(e))return Re(e,["bpmn:SubProcess","bpmn:Group"])?(te(t,{width:e.width+vo*2,height:e.height+vo*2}),!0):!!Re(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function vg(e,t){var n;return t==="bpmn:DataObjectReference"?n=r$:t==="bpmn:DataStoreReference"&&(n=o$),e.width===n.width&&e.height===n.height}const a$={__depends__:[Wh],__init__:["outlineProvider"],outlineProvider:["type",Rc]};function yg(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Vo(e){return e.originalEvent||e.srcEvent}function $u(e){yg(e),yg(Vo(e))}function Fr(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function _w(){return/mac/i.test(navigator.platform)}function xw(e,t){return(Vo(e)||e).button===t}function sr(e){return xw(e,0)}function s$(e){return xw(e,1)}function Ia(e){var t=Vo(e)||e;return sr(e)?_w()?t.metaKey:t.ctrlKey:!1}function Bl(e){var t=Vo(e)||e;return sr(e)&&t.shiftKey}function l$(e){return!0}function Fs(e){return sr(e)||s$(e)}var bg=500;function Ew(e,t,n){var i=this;function r(M,$,T){if(!c(M,$)){var I,C,b;T?C=t.getGraphics(T):(I=$.delegateTarget||$.target,I&&(C=I,T=t.get(C))),!(!C||!T)&&(b=e.fire(M,{element:T,gfx:C,originalEvent:$}),b===!1&&($.stopPropagation(),$.preventDefault()))}}var o={};function s(M){return o[M]}function c(M,$){var T=u[M]||sr;return!T($)}var a={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":l$,"element.mousedown":Fs,"element.mouseup":Fs,"element.click":Fs,"element.dblclick":Fs};function l(M,$,T){var I=a[M];if(!I)throw new Error("unmapped DOM event name <"+M+">");return r(I,$,T)}var p="svg, .djs-element";function h(M,$,T,I){var C=o[T]=function(b){r(T,b)};I&&(u[T]=I),C.$delegate=It.bind(M,p,$,C)}function d(M,$,T){var I=s(T);I&&It.unbind(M,$,I.$delegate)}function f(M){Z(a,function($,T){h(M,T,$)})}function g(M){Z(a,function($,T){d(M,T,$)})}e.on("canvas.destroy",function(M){g(M.svg)}),e.on("canvas.init",function(M){f(M.svg)}),e.on(["shape.added","connection.added"],function(M){var $=M.element,T=M.gfx;e.fire("interactionEvents.createHit",{element:$,gfx:T})}),e.on(["shape.changed","connection.changed"],bg,function(M){var $=M.element,T=M.gfx;e.fire("interactionEvents.updateHit",{element:$,gfx:T})}),e.on("interactionEvents.createHit",bg,function(M){var $=M.element,T=M.gfx;i.createDefaultHit($,T)}),e.on("interactionEvents.updateHit",function(M){var $=M.element,T=M.gfx;i.updateDefaultHit($,T)});var m=x("djs-hit djs-hit-stroke"),w=x("djs-hit djs-hit-click-stroke"),_=x("djs-hit djs-hit-all"),E=x("djs-hit djs-hit-no-move"),y={all:_,"click-stroke":w,stroke:m,"no-move":E};function x(M,$){return $=J({stroke:"white",strokeWidth:15},$||{}),n.cls(M,["no-fill","no-border"],$)}function v(M,$){var T=y[$];if(!T)throw new Error("invalid hit type <"+$+">");return te(M,T),M}function S(M,$){de(M,$)}this.removeHits=function(M){var $=Gn(".djs-hit",M);Z($,Je)},this.createDefaultHit=function(M,$){var T=M.waypoints,I=M.isFrame,C;return T?this.createWaypointsHit($,T):(C=I?"stroke":"all",this.createBoxHit($,C,{width:M.width,height:M.height}))},this.createWaypointsHit=function(M,$){var T=yc($);return v(T,"stroke"),S(M,T),T},this.createBoxHit=function(M,$,T){T=J({x:0,y:0},T);var I=ue("rect");return v(I,$),te(I,T),S(M,I),I},this.updateDefaultHit=function(M,$){var T=Ee(".djs-hit",$);if(T)return M.waypoints?Cb(T,M.waypoints):te(T,{width:M.width,height:M.height}),T},this.fire=r,this.triggerMouseEvent=l,this.mouseHandler=s,this.registerEvent=h,this.unregisterEvent=d}Ew.$inject=["eventBus","elementRegistry","styles"];const Ic={__init__:["interactionEvents"],interactionEvents:["type",Ew]};function Uo(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Uo.$inject=["eventBus","canvas"];Uo.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Uo.prototype.get=function(){return this._selectedElements};Uo.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Uo.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();xe(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(s){var c=r.findRoot(s);return o===c}),t?Z(e,function(s){n.indexOf(s)===-1&&n.push(s)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var wg="hover",_g="selected",js=6;function Gh(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(s,c){e.addMarker(s,c)}function o(s,c){e.removeMarker(s,c)}t.on("element.hover",function(s){r(s.element,wg)}),t.on("element.out",function(s){o(s.element,wg)}),t.on("selection.changed",function(s){function c(p){o(p,_g)}function a(p){r(p,_g)}var u=s.oldSelection,l=s.newSelection;Z(u,function(p){l.indexOf(p)===-1&&c(p)}),Z(l,function(p){u.indexOf(p)===-1&&a(p)}),i._updateSelectionOutline(l)}),t.on("element.changed",function(s){n.isSelected(s.element)&&i._updateSelectionOutline(n.get())})}Gh.$inject=["canvas","eventBus","selection"];Gh.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Yr(t);var n=e.length>1,i=this._canvas.getContainer();if(ke(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=c$(kt(e)),o=ue("rect");te(o,J({rx:3},r)),ke(o).add("djs-selection-outline"),de(t,o)}};function c$(e){return{x:e.x-js,y:e.y-js,width:e.width+js*2,height:e.height+js*2}}function Sw(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,s=o.canExecute,c=o.elements,a=o.hints||{},u=a.autoSelect;if(s){if(u===!1)return;xe(u)?t.select(u):t.select(c.filter(u$))}}),e.on("connect.end",500,function(r){var o=r.context,s=o.connection;s&&t.select(s)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],s=i.get(r.context.shape.id),c=Be(o,function(a){return s.id===a.id});c||t.select(s)}),e.on("element.click",function(r){if(sr(r)){var o=r.element;o===n.getRootElement()&&(o=null);var s=t.isSelected(o),c=t.get().length>1,a=Bl(r);if(s&&c)return a?t.deselect(o):t.select(o);s?t.deselect(o):t.select(o,a)}})}Sw.$inject=["eventBus","selection","canvas","elementRegistry"];function u$(e){return!e.hidden}const si={__init__:["selectionVisuals","selectionBehavior"],__depends__:[Ic,Wh],selection:["type",Uo],selectionVisuals:["type",Gh],selectionBehavior:["type",Sw]};function lr(e){st.call(this,e)}me(lr,st);lr.prototype._modules=[NM,qM,a$,$c,si,Tc];lr.prototype._moddleExtensions={};var p$=["c","C"],h$=["v","V"],d$=["y","Y"],Cw=["z","Z"];function f$(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function fn(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Rt(e,t){return e=xe(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function zh(e){return e.shiftKey}function g$(e){return fn(e)&&Rt(p$,e)}function m$(e){return fn(e)&&Rt(h$,e)}function v$(e){return fn(e)&&!zh(e)&&Rt(Cw,e)}function y$(e){return fn(e)&&(Rt(d$,e)||Rt(Cw,e)&&zh(e))}var kc="keyboard.keydown",b$="keyboard.keyup",xg="input-handle-modified-keys",w$=1e3;function Wt(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Wt.$inject=["config.keyboard","eventBus"];Wt.prototype._keydownHandler=function(e){this._keyHandler(e,kc)};Wt.prototype._keyupHandler=function(e){this._keyHandler(e,b$)};Wt.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||kc,i),n&&e.preventDefault()}};Wt.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(_$(e.target)||x$(e.target)&&Rt([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)};Wt.prototype._isModifiedKeyIgnored=function(e){if(!fn(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Wt.prototype._getAllowedModifiers=function(e){var t=ai(e,"["+xg+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(xg).split(",")};Wt.prototype.bind=function(e){this.unbind(),this._node=e,ce.bind(e,"keydown",this._keydownHandler),ce.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Wt.prototype.getBinding=function(){return this._node};Wt.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),ce.unbind(e,"keydown",this._keydownHandler),ce.unbind(e,"keyup",this._keyupHandler)),this._node=null};Wt.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Wt.prototype.addListener=function(e,t,n){ot(e)&&(n=t,t=e,e=w$),this._eventBus.on(n||kc,e,t)};Wt.prototype.removeListener=function(e,t){this._eventBus.off(t||kc,e)};Wt.prototype.hasModifier=f$;Wt.prototype.isCmd=fn;Wt.prototype.isShift=zh;Wt.prototype.isKey=Rt;function _$(e){return e&&(Ua(e,"input, textarea")||e.contentEditable==="true")}function x$(e){return e&&Ua(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var E$=500;function Yo(e,t){var n=this;e.on("editorActions.init",E$,function(i){var r=i.editorActions;n.registerBindings(t,r)})}Yo.$inject=["eventBus","keyboard"];Yo.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(v$(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(y$(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(g$(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(m$(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Rt(["+","Add","="],r)&&fn(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Rt(["-","Subtract"],r)&&fn(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(Rt("0",r)&&fn(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(Rt(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const Vh={__init__:["keyboard","keyboardBindings"],keyboard:["type",Wt],keyboardBindings:["type",Yo]};var S$={moveSpeed:50,moveSpeedAccelerated:200};function Aw(e,t,n){var i=this;this._config=J({},S$,e||{}),t.addListener(r);function r(o){var s=o.keyEvent,c=i._config;if(t.isCmd(s)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],s)){var a=t.isShift(s)?c.moveSpeedAccelerated:c.moveSpeed,u;switch(s.key){case"ArrowLeft":case"Left":u="left";break;case"ArrowUp":case"Up":u="up";break;case"ArrowRight":case"Right":u="right";break;case"ArrowDown":case"Down":u="down";break}return i.moveCanvas({speed:a,direction:u}),!0}}this.moveCanvas=function(o){var s=0,c=0,a=o.speed,u=a/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":s=u;break;case"up":c=u;break;case"right":s=-u;break;case"down":c=-u;break}n.scroll({dx:s,dy:c})}}Aw.$inject=["config.keyboardMove","keyboard","canvas"];const Tw={__depends__:[Vh],__init__:["keyboardMove"],keyboardMove:["type",Aw]};var C$=/^djs-cursor-.*$/;function Lc(e){var t=ve(document.body);t.removeMatching(C$),e&&t.add("djs-cursor-"+e)}function Mw(){Lc(null)}var A$=5e3;function $w(e,t){t=t||"element.click";function n(){return!1}return e.once(t,A$,n),function(){e.off(t,n)}}function Aa(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Fn(e,t){return{x:e.x-t.x,y:e.y-t.y}}var T$=15;function Rw(e,t){var n;e.on("element.mousedown",500,function(s){return o(s.originalEvent)});function i(s){var c=n.start,a=n.button,u=Fr(s),l=Fn(u,c);if(!n.dragging&&M$(l)>T$&&(n.dragging=!0,a===0&&$w(e),Lc("grab")),n.dragging){var p=n.last||n.start;l=Fn(u,p),t.scroll({dx:l.x,dy:l.y}),n.last=u}s.preventDefault()}function r(s){ce.unbind(document,"mousemove",i),ce.unbind(document,"mouseup",r),n=null,Mw()}function o(s){if(!ai(s.target,".djs-draggable")){var c=s.button;if(!(c>=2||s.ctrlKey||s.shiftKey||s.altKey))return n={button:c,start:Fr(s)},ce.bind(document,"mousemove",i),ce.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}Rw.$inject=["eventBus","canvas"];function M$(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const Iw={__init__:["moveCanvas"],moveCanvas:["type",Rw]};function Ap(e){return Math.log(e)/Math.log(10)}function kw(e,t){var n=Ap(e.min),i=Ap(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function $$(e,t){return Math.max(e.min,Math.min(e.max,t))}var R$=Math.sign||function(e){return e>=0?1:-1},Uh={min:.2,max:4},Lw=10,I$=.1,k$=.75;function li(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=nn(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||k$;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}li.$inject=["config.zoomScroll","eventBus","canvas"];li.prototype.scroll=function(t){this._canvas.scroll(t)};li.prototype.reset=function(){this._canvas.zoom("fit-viewport")};li.prototype.zoom=function(t,n){var i=kw(Uh,Lw*2);this._totalDelta+=t,Math.abs(this._totalDelta)>I$&&(this._zoom(t,n,i),this._totalDelta=0)};li.prototype._handleWheel=function(t){if(!ai(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey||_w()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,s;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var c=n.getBoundingClientRect(),a={x:t.clientX-c.left,y:t.clientY-c.top};s=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*R$(t.deltaY)*o,this.zoom(s,a)}else r?s={dx:o*t.deltaY,dy:0}:s={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(s)}};li.prototype.stepZoom=function(t,n){var i=kw(Uh,Lw);this._zoom(t,n,i)};li.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=Ap(i.zoom()),s=Math.round(o/n)*n;s+=n*r;var c=Math.pow(10,s);i.zoom($$(Uh,c),t)};li.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&ce[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};li.prototype._init=function(e){this.toggle(e)};const Dw={__init__:["zoomScroll"],zoomScroll:["type",li]};function ka(e){lr.call(this,e)}me(ka,lr);ka.prototype._navigationModules=[Tw,Iw,Dw];ka.prototype._modules=[].concat(lr.prototype._modules,ka.prototype._navigationModules);function Ru(e){return e&&e[e.length-1]}function Eg(e){return e.y}function Sg(e){return e.x}var L$={left:Sg,center:Sg,right:function(e){return e.x+e.width},top:Eg,middle:Eg,bottom:function(e){return e.y+e.height}};function Zo(e,t){this._modeling=e,this._rules=t}Zo.$inject=["modeling","rules"];Zo.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};Zo.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Zo.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,o={},s={},c=!1,a,u,l;function p(h,d){return Math.round((h[i]+d[i]+d[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][i];else if(this._isType(e,["right","bottom"]))l=Ru(t),o[e]=l[i]+l[r];else if(this._isType(e,["center","middle"])){if(Z(t,function(h){var d=h[i]+Math.round(h[r]/2);s[d]?s[d].elements.push(h):s[d]={elements:[h],center:d}}),a=ii(s,function(h){return h.elements.length>1&&(c=!0),h.elements.length}),c)return o[e]=Ru(a).center,o;u=t[0],t=ii(t,function(h){return h[i]+h[r]}),l=Ru(t),o[e]=p(u,l)}return o};Zo.prototype.trigger=function(e,t){var n=this._modeling,i,r=$e(e,function(a){return!(a.waypoints||a.host||a.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),xe(i)&&(r=i),!(r.length<2||!i)){var o=L$[t],s=ii(r,o),c=this._alignmentPosition(t,s);n.alignElements(s,c)}};const D$={__init__:["alignElements"],alignElements:["type",Zo]},P$=new os;function Xo(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}Xo.$inject=["eventBus"];Xo.prototype.schedule=function(e,t=P$.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise};Xo.prototype._schedule=function(e,t){const{promise:n,resolve:i,reject:r}=O$();return{executionId:requestAnimationFrame(()=>{try{i(e())}catch(s){r(s)}}),promise:n}};Xo.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)};Xo.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function O$(){let e,t;return{promise:new Promise((i,r)=>{e=i,t=r}),resolve:e,reject:t}}const N$={scheduler:["type",Xo]};var B$="djs-element-hidden",Hs=".entry",F$=1e3,Cg=8,j$=300;function Et(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}Et.$inject=["canvas","elementRegistry","eventBus","scheduler"];Et.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,o=xe(r)?r:[r],s=o.filter(function(a){return n.includes(a)});if(s.length){e.close();var c=o.filter(function(a){return e._elementRegistry.get(a.id)});c.length&&e._updateAndOpen(c.length>1?c:c[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current,r=xe(i.target)?i.target:[i.target];r.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()};Et.prototype._createContainer=function(){var e=Ie('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e};Et.prototype.registerProvider=function(e,t){t||(t=e,e=F$),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};Et.prototype.getEntries=function(e){var t=this._getProviders(),n=xe(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return Z(t,function(r){if(ot(r[n])){var o=r[n](e);ot(o)?i=o(i):Z(o,function(s,c){i[c]=s})}}),i};Et.prototype.trigger=function(e,t,n){var i=this,r,o,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(r=ft(s,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(r,"hover",o,n)},j$);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(r,e,o,n)};Et.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,o=this._current.entries,s=o[e];if(s){var c=s.action;if(this._eventBus.fire("contextPad.trigger",{entry:s,event:n})!==!1){if(ot(c)){if(t==="click")return c(n,r,i)}else if(c[t])return c[t](n,r,i);n.preventDefault()}}}};Et.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};Et.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Et.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),i;Z(t,function(r,o){var s=r.group||"default",c=Ie(r.html||'<div class="entry" draggable="true"></div>'),a;ft(c,"data-action",o),a=Ee("[data-group="+Ra(s)+"]",n),a||(a=Ie('<div class="group"></div>'),ft(a,"data-group",s),n.appendChild(a)),a.appendChild(c),r.className&&H$(c,r.className),r.title&&ft(c,"title",r.title),r.imageUrl&&(i=Ie("<img>"),ft(i,"src",r.imageUrl),i.style.width="100%",i.style.height="100%",c.appendChild(i))}),ve(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})};Et.prototype._createHtml=function(e){var t=this,n=Ie('<div class="djs-context-pad"></div>');return It.bind(n,Hs,"click",function(i){t.trigger("click",i)}),It.bind(n,Hs,"dragstart",function(i){t.trigger("dragstart",i)}),It.bind(n,Hs,"mouseover",function(i){t.trigger("mouseover",i)}),It.bind(n,Hs,"mouseout",function(i){t.trigger("mouseout",i)}),ce.bind(n,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n};Et.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&G$(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}};Et.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};Et.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return xe(e)!==xe(n)?!1:xe(e)?e.length===n.length&&jr(e,function(i){return n.includes(i)}):n===e};Et.prototype.isShown=function(){return this.isOpen()&&ve(this._current.html).has("open")};Et.prototype.show=function(){this.isOpen()&&(ve(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))};Et.prototype.hide=function(){this.isOpen()&&(ve(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))};Et.prototype._getPosition=function(e){if(!xe(e)&&et(e)){var t=this._canvas.viewbox(),n=W$(e),i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:i+Cg*this._canvas.zoom(),top:r}}var o=this._canvas.getContainer(),s=o.getBoundingClientRect(),c=this._getTargetBounds(e);return{left:c.right-s.left+Cg*this._canvas.zoom(),top:c.top-s.top}};Et.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(i){i in n&&(t.style[i]=n[i]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")};Et.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,i=xe(n)?n:[n],r=i.some(function(o){return t._canvas.hasMarker(o,B$)});r?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")};Et.prototype._getTargetBounds=function(e){var t=this,n=xe(e)?e:[e],i=n.map(function(r){return t._canvas.getGraphics(r)});return i.reduce(function(r,o){const s=o.getBoundingClientRect();return r.top=Math.min(r.top,s.top),r.right=Math.max(r.right,s.right),r.bottom=Math.max(r.bottom,s.bottom),r.left=Math.min(r.left,s.left),r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function H$(e,t){var n=ve(e);t=xe(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function W$(e){return e.waypoints[e.waypoints.length-1]}function G$(e,t){return e=xe(e)?e:[e],t=xe(t)?t:[t],e.length===t.length&&jr(e,function(n){return t.includes(n)})}const Pw={__depends__:[Ic,N$,$c],contextPad:["type",Et]};var Dc,rt,Ow,Mr,Ag,Nw,Tp,Bw,Yh,Mp,$p,La={},Fw=[],z$=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Zh=Array.isArray;function Ui(e,t){for(var n in t)e[n]=t[n];return e}function Xh(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function jw(e,t,n){var i,r,o,s={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?Dc.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)s[o]===void 0&&(s[o]=e.defaultProps[o]);return xl(e,s,i,r,null)}function xl(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++Ow,__i:-1,__u:0};return r==null&&rt.vnode!=null&&rt.vnode(o),o}function Pc(e){return e.children}function El(e,t){this.props=e,this.context=t}function So(e,t){if(t==null)return e.__?So(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?So(e):null}function Hw(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Hw(e)}}function Tg(e){(!e.__d&&(e.__d=!0)&&Mr.push(e)&&!Fl.__r++||Ag!==rt.debounceRendering)&&((Ag=rt.debounceRendering)||Nw)(Fl)}function Fl(){var e,t,n,i,r,o,s,c;for(Mr.sort(Tp);e=Mr.shift();)e.__d&&(t=Mr.length,i=void 0,o=(r=(n=e).__v).__e,s=[],c=[],n.__P&&((i=Ui({},r)).__v=r.__v+1,rt.vnode&&rt.vnode(i),Kh(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[o]:null,s,o??So(r),!!(32&r.__u),c),i.__v=r.__v,i.__.__k[i.__i]=i,zw(s,i,c),i.__e!=o&&Hw(i)),Mr.length>t&&Mr.sort(Tp));Fl.__r=0}function Ww(e,t,n,i,r,o,s,c,a,u,l){var p,h,d,f,g,m,w=i&&i.__k||Fw,_=t.length;for(a=V$(n,t,w,a,_),p=0;p<_;p++)(d=n.__k[p])!=null&&(h=d.__i===-1?La:w[d.__i]||La,d.__i=p,m=Kh(e,d,h,r,o,s,c,a,u,l),f=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&Qh(h.ref,null,d),l.push(d.ref,d.__c||f,d)),g==null&&f!=null&&(g=f),4&d.__u||h.__k===d.__k?a=Gw(d,a,e):typeof d.type=="function"&&m!==void 0?a=m:f&&(a=f.nextSibling),d.__u&=-7);return n.__e=g,a}function V$(e,t,n,i,r){var o,s,c,a,u,l=n.length,p=l,h=0;for(e.__k=new Array(r),o=0;o<r;o++)(s=t[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(a=o+h,(s=e.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?xl(null,s,null,null,null):Zh(s)?xl(Pc,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?xl(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,c=null,(u=s.__i=U$(s,n,a,p))!==-1&&(p--,(c=n[u])&&(c.__u|=2)),c==null||c.__v===null?(u==-1&&h--,typeof s.type!="function"&&(s.__u|=4)):u!=a&&(u==a-1?h--:u==a+1?h++:(u>a?h--:h++,s.__u|=4))):e.__k[o]=null;if(p)for(o=0;o<l;o++)(c=n[o])!=null&&!(2&c.__u)&&(c.__e==i&&(i=So(c)),Vw(c,c));return i}function Gw(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Gw(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=So(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function U$(e,t,n,i){var r,o,s=e.key,c=e.type,a=t[n];if(a===null||a&&s==a.key&&c===a.type&&!(2&a.__u))return n;if(i>(a!=null&&!(2&a.__u)?1:0))for(r=n-1,o=n+1;r>=0||o<t.length;){if(r>=0){if((a=t[r])&&!(2&a.__u)&&s==a.key&&c===a.type)return r;r--}if(o<t.length){if((a=t[o])&&!(2&a.__u)&&s==a.key&&c===a.type)return o;o++}}return-1}function Mg(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||z$.test(t)?n:n+"px"}function Ws(e,t,n,i,r){var o;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||Mg(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||Mg(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")o=t!=(t=t.replace(Bw,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=Yh,e.addEventListener(t,o?$p:Mp,o)):e.removeEventListener(t,o?$p:Mp,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function $g(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Yh++;else if(t.t<n.u)return;return n(rt.event?rt.event(t):t)}}}function Kh(e,t,n,i,r,o,s,c,a,u){var l,p,h,d,f,g,m,w,_,E,y,x,v,S,M,$,T,I=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(a=!!(32&n.__u),o=[c=t.__e=n.__e]),(l=rt.__b)&&l(t);e:if(typeof I=="function")try{if(w=t.props,_="prototype"in I&&I.prototype.render,E=(l=I.contextType)&&i[l.__c],y=l?E?E.props.value:l.__:i,n.__c?m=(p=t.__c=n.__c).__=p.__E:(_?t.__c=p=new I(w,y):(t.__c=p=new El(w,y),p.constructor=I,p.render=Z$),E&&E.sub(p),p.props=w,p.state||(p.state={}),p.context=y,p.__n=i,h=p.__d=!0,p.__h=[],p._sb=[]),_&&p.__s==null&&(p.__s=p.state),_&&I.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Ui({},p.__s)),Ui(p.__s,I.getDerivedStateFromProps(w,p.__s))),d=p.props,f=p.state,p.__v=t,h)_&&I.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),_&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(_&&I.getDerivedStateFromProps==null&&w!==d&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(w,y),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(w,p.__s,y)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(p.props=w,p.state=p.__s,p.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(C){C&&(C.__=t)}),x=0;x<p._sb.length;x++)p.__h.push(p._sb[x]);p._sb=[],p.__h.length&&s.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(w,p.__s,y),_&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(d,f,g)})}if(p.context=y,p.props=w,p.__P=e,p.__e=!1,v=rt.__r,S=0,_){for(p.state=p.__s,p.__d=!1,v&&v(t),l=p.render(p.props,p.state,p.context),M=0;M<p._sb.length;M++)p.__h.push(p._sb[M]);p._sb=[]}else do p.__d=!1,v&&v(t),l=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++S<25);p.state=p.__s,p.getChildContext!=null&&(i=Ui(Ui({},i),p.getChildContext())),_&&!h&&p.getSnapshotBeforeUpdate!=null&&(g=p.getSnapshotBeforeUpdate(d,f)),c=Ww(e,Zh($=l!=null&&l.type===Pc&&l.key==null?l.props.children:l)?$:[$],t,n,i,r,o,s,c,a,u),p.base=t.__e,t.__u&=-161,p.__h.length&&s.push(p),m&&(p.__E=p.__=null)}catch(C){if(t.__v=null,a||o!=null)if(C.then){for(t.__u|=a?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,t.__e=c}else for(T=o.length;T--;)Xh(o[T]);else t.__e=n.__e,t.__k=n.__k;rt.__e(C,t,n)}else o==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=Y$(n.__e,t,n,i,r,o,s,a,u);return(l=rt.diffed)&&l(t),128&t.__u?void 0:c}function zw(e,t,n){for(var i=0;i<n.length;i++)Qh(n[i],n[++i],n[++i]);rt.__c&&rt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){rt.__e(o,r.__v)}})}function Y$(e,t,n,i,r,o,s,c,a){var u,l,p,h,d,f,g,m=n.props,w=t.props,_=t.type;if(_=="svg"?r="http://www.w3.org/2000/svg":_=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(u=0;u<o.length;u++)if((d=o[u])&&"setAttribute"in d==!!_&&(_?d.localName==_:d.nodeType==3)){e=d,o[u]=null;break}}if(e==null){if(_==null)return document.createTextNode(w);e=document.createElementNS(r,_,w.is&&w),c&&(rt.__m&&rt.__m(t,o),c=!1),o=null}if(_===null)m===w||c&&e.data===w||(e.data=w);else{if(o=o&&Dc.call(e.childNodes),m=n.props||La,!c&&o!=null)for(m={},u=0;u<e.attributes.length;u++)m[(d=e.attributes[u]).name]=d.value;for(u in m)if(d=m[u],u!="children"){if(u=="dangerouslySetInnerHTML")p=d;else if(!(u in w)){if(u=="value"&&"defaultValue"in w||u=="checked"&&"defaultChecked"in w)continue;Ws(e,u,null,d,r)}}for(u in w)d=w[u],u=="children"?h=d:u=="dangerouslySetInnerHTML"?l=d:u=="value"?f=d:u=="checked"?g=d:c&&typeof d!="function"||m[u]===d||Ws(e,u,d,m[u],r);if(l)c||p&&(l.__html===p.__html||l.__html===e.innerHTML)||(e.innerHTML=l.__html),t.__k=[];else if(p&&(e.innerHTML=""),Ww(e,Zh(h)?h:[h],t,n,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,s,o?o[0]:n.__k&&So(n,0),c,a),o!=null)for(u=o.length;u--;)Xh(o[u]);c||(u="value",_=="progress"&&f==null?e.removeAttribute("value"):f!==void 0&&(f!==e[u]||_=="progress"&&!f||_=="option"&&f!==m[u])&&Ws(e,u,f,m[u],r),u="checked",g!==void 0&&g!==e[u]&&Ws(e,u,g,m[u],r))}return e}function Qh(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){rt.__e(r,n)}}function Vw(e,t,n){var i,r;if(rt.unmount&&rt.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||Qh(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){rt.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&Vw(i[r],t,n||typeof e.type!="function");n||Xh(e.__e),e.__c=e.__=e.__e=void 0}function Z$(e,t,n){return this.constructor(e,n)}function Uw(e,t,n){var i,r,o,s;t==document&&(t=document.documentElement),rt.__&&rt.__(e,t),r=(i=!1)?null:t.__k,o=[],s=[],Kh(t,e=t.__k=jw(Pc,null,[e]),r||La,La,t.namespaceURI,r?null:t.firstChild?Dc.call(t.childNodes):null,o,r?r.__e:t.firstChild,i,s),zw(o,e,s)}Dc=Fw.slice,rt={__e:function(e,t,n,i){for(var r,o,s;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),s=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),s=r.__d),s)return r.__E=r}catch(c){e=c}throw e}},Ow=0,El.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ui({},this.state),typeof e=="function"&&(e=e(Ui({},n),this.props)),e&&Ui(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Tg(this))},El.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Tg(this))},El.prototype.render=Pc,Mr=[],Nw=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Tp=function(e,t){return e.__v.__b-t.__v.__b},Fl.__r=0,Bw=/(PointerCapture)$|Capture$/i,Yh=0,Mp=$g(!1),$p=$g(!0);var Yw=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var s=t[o++],c=t[o]?(t[0]|=s?1:2,n[t[o++]]):t[++o];s===3?i[0]=c:s===4?i[1]=Object.assign(i[1]||{},c):s===5?(i[1]=i[1]||{})[t[++o]]=c:s===6?i[1][t[++o]]+=c+"":s?(r=e.apply(c,Yw(e,c,n,["",null])),i.push(r),c[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(c)}return i},Rg=new Map;function X$(e){var t=Rg.get(this);return t||(t=new Map,Rg.set(this,t)),(t=Yw(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,o=1,s="",c="",a=[0],u=function(h){o===1&&(h||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,h,s):o===3&&(h||s)?(a.push(3,h,s),o=2):o===2&&s==="..."&&h?a.push(4,h,0):o===2&&s&&!h?a.push(5,0,!0,s):o>=5&&((s||!h&&o===5)&&(a.push(o,0,s,r),o=6),h&&(a.push(o,h,0,r),o=6)),s=""},l=0;l<n.length;l++){l&&(o===1&&u(),u(l));for(var p=0;p<n[l].length;p++)i=n[l][p],o===1?i==="<"?(u(),a=[a],o=3):s+=i:o===4?s==="--"&&i===">"?(o=1,s=""):s=i+s[0]:c?i===c?c="":s+=i:i==='"'||i==="'"?c=i:i===">"?(u(),o=1):o&&(i==="="?(o=5,r=s,s=""):i==="/"&&(o<5||n[l][p+1]===">")?(u(),o===3&&(a=a[0]),o=a,(a=a[0]).push(2,0,o),o=0):i===" "||i==="	"||i===`
`||i==="\r"?(u(),o=2):s+=i),o===3&&s==="!--"&&(o=4,a=a[0])}return u(),a}(e)),t),arguments,[])).length>1?t:t[0]}var dt=X$.bind(jw),Co,yt,Iu,Ig,Da=0,Zw=[],St=rt,kg=St.__b,Lg=St.__r,Dg=St.diffed,Pg=St.__c,Og=St.unmount,Ng=St.__;function Oc(e,t){St.__h&&St.__h(yt,e,Da||t),Da=0;var n=yt.__H||(yt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ku(e){return Da=1,K$(Kw,e)}function K$(e,t,n){var i=Oc(Co++,2);if(i.t=e,!i.__c&&(i.__=[Kw(void 0,t),function(c){var a=i.__N?i.__N[0]:i.__[0],u=i.t(a,c);a!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=yt,!yt.u)){var r=function(c,a,u){if(!i.__c.__H)return!0;var l=i.__c.__H.__.filter(function(h){return!!h.__c});if(l.every(function(h){return!h.__N}))return!o||o.call(this,c,a,u);var p=i.__c.props!==c;return l.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(p=!0)}}),o&&o.call(this,c,a,u)||p};yt.u=!0;var o=yt.shouldComponentUpdate,s=yt.componentWillUpdate;yt.componentWillUpdate=function(c,a,u){if(this.__e){var l=o;o=void 0,r(c,a,u),o=l}s&&s.call(this,c,a,u)},yt.shouldComponentUpdate=r}return i.__N||i.__}function Rp(e,t){var n=Oc(Co++,3);!St.__s&&Jh(n.__H,t)&&(n.__=e,n.i=t,yt.__H.__h.push(n))}function Ip(e,t){var n=Oc(Co++,4);!St.__s&&Jh(n.__H,t)&&(n.__=e,n.i=t,yt.__h.push(n))}function Xw(e){return Da=5,Ao(function(){return{current:e}},[])}function Ao(e,t){var n=Oc(Co++,7);return Jh(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ua(e,t){return Da=8,Ao(function(){return e},t)}function Q$(){for(var e;e=Zw.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Sl),e.__H.__h.forEach(kp),e.__H.__h=[]}catch(t){e.__H.__h=[],St.__e(t,e.__v)}}St.__b=function(e){yt=null,kg&&kg(e)},St.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ng&&Ng(e,t)},St.__r=function(e){Lg&&Lg(e),Co=0;var t=(yt=e.__c).__H;t&&(Iu===yt?(t.__h=[],yt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(Sl),t.__h.forEach(kp),t.__h=[],Co=0)),Iu=yt},St.diffed=function(e){Dg&&Dg(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Zw.push(t)!==1&&Ig===St.requestAnimationFrame||((Ig=St.requestAnimationFrame)||J$)(Q$)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Iu=yt=null},St.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Sl),n.__h=n.__h.filter(function(i){return!i.__||kp(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],St.__e(i,n.__v)}}),Pg&&Pg(e,t)},St.unmount=function(e){Og&&Og(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Sl(i)}catch(r){t=r}}),n.__H=void 0,t&&St.__e(t,n.__v))};var Bg=typeof requestAnimationFrame=="function";function J$(e){var t,n=function(){clearTimeout(i),Bg&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);Bg&&(t=requestAnimationFrame(n))}function Sl(e){var t=yt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),yt=t}function kp(e){var t=yt;e.__c=e.__(),yt=t}function Jh(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Kw(e,t){return typeof t=="function"?t(e):t}function Qw(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Qw(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function jl(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Qw(e))&&(i&&(i+=" "),i+=t);return i}function q$(e){const{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:r,title:o}=e,s=Ao(()=>eR(t),[t]);return dt`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${s.map(c=>dt`
        <ul key=${c.id} class="djs-popup-header-group" data-header-group=${c.id}>

          ${c.entries.map(a=>dt`
            <li key=${a.id}>
              <${a.action?"button":"span"}
                class=${tR(a,a===i)}
                onClick=${u=>a.action&&n(u,a)}
                title=${a.title||a.label}
                data-id=${a.id}
                onMouseEnter=${()=>a.action&&r(a)}
                onMouseLeave=${()=>a.action&&r(null)}
                onFocus=${()=>a.action&&r(a)}
                onBlur=${()=>a.action&&r(null)}
              >
                ${a.imageUrl&&dt`<img class="djs-popup-entry-icon" src=${a.imageUrl} alt="" />`||a.imageHtml&&dt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:a.imageHtml}} />`}
                ${a.label?dt`
                  <span class="djs-popup-label">${a.label}</span>
                `:null}
              </${a.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function eR(e){return e.reduce((t,n)=>{const i=n.group||"default",r=t.find(o=>o.id===i);return r?r.entries.push(n):t.push({id:i,entries:[n]}),t},[])}function tR(e,t){return jl("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function nR(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:o}=e;return dt`
    <li
      class=${jl("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${s=>o(s,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${jl("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&dt`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&dt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?dt`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&dt`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&dt`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${s=>s.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function iR(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...r}=e,o=Xw(),s=Ao(()=>rR(i),[i]);return Ip(()=>{const c=o.current;if(!c)return;const a=c.querySelector(".selected");a&&oR(a)},[t]),dt`
    <div class="djs-popup-results" ref=${o}>
      ${s.map(c=>dt`
        ${c.name&&dt`
          <div key=${c.id} class="entry-header" title=${c.name}>
            ${c.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${c.id}>
          ${c.entries.map(a=>dt`
            <${nR}
              key=${a.id}
              entry=${a}
              selected=${a===t}
              onMouseEnter=${()=>n(a)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function rR(e){const t=[],n=o=>t.find(s=>o.id===s.id),i=o=>!!n(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const s=o.group?r(o.group):{id:"default"};i(s)?n(s).entries.push(o):t.push({...s,entries:[o]})}),t}function oR(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function aR(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:o,title:s,width:c,scale:a,search:u,emptyPlaceholder:l,entries:p,onOpened:h,onClosed:d}=e,f=Ao(()=>Pt(u)?p.length>5:!1,[u,p]),[g,m]=ku(""),w=ua((I,C)=>{if(!f)return I;const b=A=>{if(!C)return(A.rank||0)>=0;if(A.searchable===!1)return!1;const R=[A.description||"",A.label||"",A.search||""].map(k=>k.toLowerCase());return C.toLowerCase().split(/\s/g).every(k=>R.some(O=>O.includes(k)))};return I.filter(b)},[f]),[_,E]=ku(w(p,g)),[y,x]=ku(_[0]),v=ua(I=>{(!y||!I.includes(y))&&x(I[0]),E(I)},[y,E,x]);Rp(()=>{v(w(p,g))},[g,p]);const S=ua(I=>{let b=_.indexOf(y)+I;b<0&&(b=_.length-1),b>=_.length&&(b=0),x(_[b])},[_,y,x]),M=ua(I=>{if(I.key==="Enter"&&y)return n(I,y);if(I.key==="ArrowUp")return S(-1),I.preventDefault();if(I.key==="ArrowDown")return S(1),I.preventDefault()},[n,y,S]),$=ua(I=>{Ua(I.target,"input")&&m(()=>I.target.value)},[m]);Rp(()=>(h(),()=>{d()}),[]);const T=Ao(()=>s||r.length>0,[s,r]);return dt`
    <${Fg}
      onClose=${t}
      onKeyup=${$}
      onKeydown=${M}
      className=${i}
      position=${o}
      width=${c}
      scale=${a}
    >
      ${T&&dt`
        <${q$}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${y}
          setSelectedEntry=${x}
          title=${s}
        />
      `}
      ${p.length>0&&dt`
        <div class="djs-popup-body">

          ${f&&dt`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${s}" />
          </div>
          `}

          <${iR}
            entries=${_}
            selectedEntry=${y}
            setSelectedEntry=${x}
            onAction=${n}
          />
        </div>
      `}
    ${l&&_.length===0&&dt`
      <div class="djs-popup-no-results">${ot(l)?l(g):l}</div>
    `}
    </${Fg}>
  `}function Fg(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:o,position:s}=e,c=Xw();return Ip(()=>{if(typeof s!="function")return;const a=c.current,u=s(a);a.style.left=`${u.x}px`,a.style.top=`${u.y}px`},[c.current,s]),Ip(()=>{const a=c.current;if(!a)return;(a.querySelector("input")||a).focus()},[]),Rp(()=>{const a=l=>{if(l.key==="Escape")return l.preventDefault(),t()},u=l=>{if(!ai(l.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",a),document.body.addEventListener("click",u),()=>{document.documentElement.removeEventListener("keydown",a),document.body.removeEventListener("click",u)}},[]),dt`
    <div
      class=${jl("djs-popup",r)}
      style=${sR(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${c}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function sR(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var lR="data-id",Jw=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],cR=1e3;function lt(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var i=Pt(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",r=>{const o=this.isOpen()&&this._current.target;r.element===o&&this.refresh()})}lt.$inject=["config.popupMenu","eventBus","canvas"];lt.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:r,options:o}=this._current,s=Object.entries(n).map(([h,d])=>({id:h,...d})),c=Object.entries(i).map(([h,d])=>({id:h,...d})),a=e&&(h=>this._ensureVisible(h,e)),u=this._updateScale(this._current.container);Uw(dt`
      <${aR}
        onClose=${h=>this.close(h)}
        onSelect=${(h,d,f)=>this.trigger(h,d,f)}
        position=${a}
        className=${t}
        entries=${s}
        headerEntries=${c}
        emptyPlaceholder=${r}
        scale=${u}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};lt.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:o,emptyPlaceholder:s}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:s,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};lt.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:r}=this._getContext(e,t);this._current={...this._current,entries:n,headerEntries:i,emptyPlaceholder:r},this._emit("refresh"),this._render()};lt.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(i).length||Object.keys(r).length)}};lt.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};lt.prototype.reset=function(){const e=this._current.container;Uw(null,e),ri(e)};lt.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};lt.prototype._onOpened=function(){this._emit("opened")};lt.prototype._onClosed=function(){this._emit("closed")};lt.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=Ie(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};lt.prototype._bindAutoClose=function(){this._eventBus.once(Jw,this.close,this)};lt.prototype._unbindAutoClose=function(){this._eventBus.off(Jw,this.close,this)};lt.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,r=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),Pt(n)&&e<n&&(r=n),Pt(i)&&e>i&&(r=i)),r};lt.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},o=t.x,s=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(o=t.x-i.width,s=t.y-i.height):r.x?(o=t.x-i.width,s=t.y):r.y&&t.y<i.height?(o=t.x,s=10):r.y&&(o=t.x,s=t.y-i.height),t.y<n.top&&(s=t.y+i.height),{x:o,y:s}};lt.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};lt.prototype.registerProvider=function(e,t,n){n||(n=t,t=cR),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};lt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};lt.prototype._getEntries=function(e,t){var n={};return Z(t,function(i){if(!i.getPopupMenuEntries){Z(i.getEntries(e),function(o){var s=o.id;if(!s)throw new Error("entry ID is missing");n[s]=Cn(o,["id"])});return}var r=i.getPopupMenuEntries(e);ot(r)?n=r(n):Z(r,function(o,s){n[s]=o})}),n};lt.prototype._getHeaderEntries=function(e,t){var n={};return Z(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;Z(i.getHeaderEntries(e),function(o){var s=o.id;if(!s)throw new Error("entry ID is missing");n[s]=Cn(o,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);ot(r)?n=r(n):Z(r,function(o,s){n[s]=o})}),n};lt.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>ot(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};lt.prototype.isOpen=function(){return!!this._current};lt.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=ai(e.delegateTarget||e.target,".entry",!0),o=ft(r,lR);t={id:o,...this._getEntry(o)}}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(ot(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};lt.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const qh={__init__:["popupMenu"],popupMenu:["type",lt]};var qw={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},uR=900;function Ko(e,t,n,i){e.registerProvider(uR,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}Ko.$inject=["contextPad","popupMenu","translate","canvas"];Ko.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};Ko.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Ko.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${qw.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);J(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}};Ko.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var pR=["left","center","right","top","middle","bottom"];function as(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}as.$inject=["popupMenu","alignElements","translate","rules"];as.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};as.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};as.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return Z(pR,function(o){r["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:qw[o],action:function(){t.trigger(e,o),i.close()}}}),r};function Rn(e){oe.call(this,e),this.init()}Rn.$inject=["eventBus"];me(Rn,oe);Rn.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,s,c){return n(o)},!0)})};Rn.prototype.init=function(){};function Nc(e){Rn.call(this,e)}Nc.$inject=["eventBus"];me(Nc,Rn);Nc.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=$e(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=bc(n),n.length<2?!1:n})};const hR={__depends__:[D$,Pw,qh],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Ko],alignElementsMenuProvider:["type",as],bpmnAlignElements:["type",Nc]};var dR=10,e0=50,fR=250;function ed(e,t,n,i){for(var r;r=gR(e,n,t);)n=i(t,n,r);return n}function td(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var s=e[o];if(s){var c=o==="x"?"width":"height",a=s.margin,u=s.minDistance;a<0?r[o]=Math.min(i[o]+a-t[c]/2,n[o]-u+a):r[o]=Math.max(i[o]+i[c]+a+t[c]/2,n[o]+u+a)}}),r}}function gR(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=vR(e);return Be(r,function(o){if(o===n)return!1;var s=Zt(o,i,dR);return s==="intersect"})}function mR(e,t){t||(t={});function n(f){return f.source===e?1:-1}var i=t.defaultDistance||e0,r=t.direction||"e",o=t.filter,s=t.getWeight||n,c=t.maxDistance||fR,a=t.reference||"start";o||(o=wR);function u(f,g){return r==="n"?a==="start"?be(f).top-be(g).bottom:a==="center"?be(f).top-Se(g).y:be(f).top-be(g).top:r==="w"?a==="start"?be(f).left-be(g).right:a==="center"?be(f).left-Se(g).x:be(f).left-be(g).left:r==="s"?a==="start"?be(g).top-be(f).bottom:a==="center"?Se(g).y-be(f).bottom:be(g).bottom-be(f).bottom:a==="start"?be(g).left-be(f).right:a==="center"?Se(g).x-be(f).right:be(g).right-be(f).right}var l=e.incoming.filter(o).map(function(f){var g=s(f),m=g<0?u(f.source,e):u(e,f.source);return{id:f.source.id,distance:m,weight:g}}),p=e.outgoing.filter(o).map(function(f){var g=s(f),m=g>0?u(e,f.target):u(f.target,e);return{id:f.target.id,distance:m,weight:g}}),h=l.concat(p).reduce(function(f,g){return f[g.id+"__weight_"+g.weight]=g,f},{}),d=un(h,function(f,g){var m=g.distance,w=g.weight;return m<0||m>c||(f[String(m)]||(f[String(m)]=0),f[String(m)]+=1*w,(!f.distance||f[f.distance]<f[String(m)])&&(f.distance=m)),f},{});return d.distance||i}function vR(e){var t=Lu(e);return e.host&&(t=t.concat(Lu(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(Lu(i))},[]))),t}function Lu(e){return bR(e).concat(yR(e))}function yR(e){return e.incoming.map(function(t){return t.source})}function bR(e){return e.outgoing.map(function(t){return t.target})}function wR(){return!0}var _R=100;function t0(e,t,n){e.on("autoPlace",_R,function(i){var r=i.shape,o=i.source;return xR(o,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){e.fire("autoPlace.start",{source:i,shape:r});var s=e.fire("autoPlace",{source:i,shape:r}),c=t.appendShape(i,r,s,i.parent,o);return e.fire("autoPlace.end",{source:i,shape:c}),c}}t0.$inject=["eventBus","modeling","canvas"];function xR(e,t,n){n||(n={});var i=n.defaultDistance||e0,r=Se(e),o=be(e);return{x:o.right+i+t.width/2,y:r.y}}function n0(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}n0.$inject=["eventBus","selection"];const ER={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",t0],autoPlaceSelectionBehavior:["type",n0]};function To(e,t){for(cn(t)&&(t=[t]);e=e.parent;)if(Re(e,t))return e;return null}function i0(e,t){var n=To(e,"bpmn:Process");if(n)return!0;var i=["bpmn:Participant","bpmn:Lane"];if(n=To(e,i),n)return Lt(n);if(Re(e,i))return Lt(e);var r;for(r=ie(e);r&&!B(r,"bpmn:Process");r=r.$parent);if(!t)return!0;var o=t.find(function(s){var c=ie(s);return c&&c.get("processRef")===r});return o?Lt(o):!0}function r0(e,t,n){var i=i0(e,n);if(B(t,"bpmn:TextAnnotation"))return CR(e,t,i);if(Re(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return AR(e,t,i);if(B(t,"bpmn:FlowNode"))return SR(e,t,i)}function SR(e,t,n){var i=be(e),r=Se(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},s=mR(e,{filter:function(d){return B(d,"bpmn:SequenceFlow")},direction:o.directionHint}),c=30,a=o.minDistance,u=o.baseOrientation;B(e,"bpmn:BoundaryEvent")&&(u=Zt(e,e.host,-25),u.indexOf(o.boundaryOrientation)!==-1&&(c*=-1));var l=n?{x:i.right+s+t.width/2,y:r.y+jg(u,a,o)}:{x:r.x+jg(u,a,o),y:i.bottom+s+t.height/2},p={margin:c,minDistance:a},h=n?{y:p}:{x:p};return ed(e,t,l,td(h))}function jg(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function CR(e,t,n){var i=be(e),r=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};et(e)&&(r=Se(e),n?(r.x+=100,r.y-=50):(r.x+=100,r.y+=50));var o={margin:n?-30:30,minDistance:20},s=n?{y:o}:{x:o};return ed(e,t,r,td(s))}function AR(e,t,n){var i=be(e),r=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},o={margin:30,minDistance:30},s=n?{x:o}:{y:o};return ed(e,t,r,td(s))}function o0(e,t){e.on("autoPlace",function(n){var i=n.shape,r=n.source;return r0(r,i,t)})}o0.$inject=["eventBus","elementRegistry"];const nd={__depends__:[ER],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",o0]};function $i(e,t,n,i){oe.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var s=o.context,c=s.hints||{},a=s.shape,u=s.parent||s.newParent;c.autoResize!==!1&&r._expand([a],u)}),this.postExecuted(["elements.move"],function(o){var s=o.context,c=sh(rc(s.closure.topLevel)),a=s.hints,u=a?a.autoResize:!0;if(u!==!1){var l=Oo(c,function(p){return p.parent.id});Z(l,function(p,h){xe(u)&&(p=p.filter(function(d){return Be(u,Bn({id:d.id}))})),r._expand(p,h)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var s=o.context,c=s.hints,a=s.shape;c&&c.autoResize===!1||a.collapsed||r._expand(a.children||[],a)}),this.postExecuted(["shape.resize"],function(o){var s=o.context,c=s.hints,a=s.shape,u=a.parent;c&&c.autoResize===!1||u&&r._expand([a],u)})}$i.$inject=["eventBus","elementRegistry","modeling","rules"];me($i,oe);$i.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=be(kt(e)),o=be(t),s={};return r.top-o.top<i.top&&(s.top=r.top-n.top),r.left-o.left<i.left&&(s.left=r.left-n.left),o.right-r.right<i.right&&(s.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(s.bottom=r.bottom+n.bottom),wc(J({},o,s))};$i.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(TR(i,t)){var r=MR(Wn(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}};$i.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};$i.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};$i.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function TR(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function MR(e,t){var n="";return e=be(e),t=be(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Bc(e){e.invoke($i,this)}Bc.$inject=["injector"];me(Bc,$i);Bc.prototype.resize=function(e,t,n){B(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function ss(e){Rn.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}ss.$inject=["eventBus"];me(ss,Rn);ss.prototype.canResize=function(e,t){return!1};function Fc(e,t){ss.call(this,e),this._modeling=t}me(Fc,ss);Fc.$inject=["eventBus","modeling"];Fc.prototype.canResize=function(e,t){if(B(t.di,"bpmndi:BPMNPlane")||!B(t,"bpmn:Participant")&&!B(t,"bpmn:Lane")&&!B(t,"bpmn:SubProcess"))return!1;var n=!0;return Z(e,function(i){if(B(i,"bpmn:Lane")||Ge(i)){n=!1;return}}),n};const $R={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Bc],bpmnAutoResizeProvider:["type",Fc]};var Hg=1500;function a0(e,t,n){var i=this,r=n.get("dragging",!1);function o(s){if(!s.hover){var c=s.originalEvent,a=i._findTargetGfx(c),u=a&&e.get(a);a&&u&&(s.stopPropagation(),r.hover({element:u,gfx:a}),r.move(c))}}r&&t.on("drag.start",function(s){t.once("drag.move",Hg,function(c){o(c)})}),function(){var s,c;t.on("element.hover",function(a){s=a.gfx,c=a.element}),t.on("element.hover",Hg,function(a){c&&t.fire("element.out",{element:c,gfx:s})}),t.on("element.out",function(){s=null,c=null})}(),this._findTargetGfx=function(s){var c,a;if(s instanceof MouseEvent)return c=Fr(s),a=document.elementFromPoint(c.x,c.y),RR(a)}}a0.$inject=["elementRegistry","eventBus","injector"];function RR(e){return ai(e,"svg, .djs-element",!0)}const IR={__init__:["hoverFix"],hoverFix:["type",a0]};var co=Math.round,Wg="djs-drag-active";function Sr(e){e.preventDefault()}function kR(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function LR(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function s0(e,t,n,i){var r={threshold:5,trapClick:!0},o;function s(E){var y=t.viewbox(),x=t._container.getBoundingClientRect();return{x:y.x+(E.x-x.left)/y.scale,y:y.y+(E.y-x.top)/y.scale}}function c(E,y){y=y||o;var x=e.createEvent(J({},y.payload,y.data,{isTouch:y.isTouch}));return e.fire("drag."+E,x)===!1?!1:e.fire(y.prefix+"."+E,x)}function a(E){var y=E.filter(function(x){return i.get(x.id)});y.length&&n.select(y)}function u(E,y){var x=o.payload,v=o.displacement,S=o.globalStart,M=Fr(E),$=Fn(M,S),T=o.localStart,I=s(M),C=Fn(I,T);if(!o.active&&(y||LR($)>o.threshold)){if(J(x,{x:co(T.x+v.x),y:co(T.y+v.y),dx:0,dy:0},{originalEvent:E}),c("start")===!1)return m();o.active=!0,o.keepSelection||(x.previousSelection=n.get(),n.select(null)),o.cursor&&Lc(o.cursor),t.addMarker(t.getRootElement(),Wg)}$u(E),o.active&&(J(x,{x:co(I.x+v.x),y:co(I.y+v.y),dx:co(C.x),dy:co(C.y)},{originalEvent:E}),c("move"))}function l(E){var y,x=!0;o.active&&(E&&(o.payload.originalEvent=E,$u(E)),x=c("end")),x===!1&&c("rejected"),y=w(x!==!0),c("ended",y)}function p(E){Rt("Escape",E)&&(Sr(E),m())}function h(E){var y;o.active&&(y=$w(e),setTimeout(y,400),Sr(E)),l(E)}function d(E){u(E)}function f(E){var y=o.payload;y.hoverGfx=E.gfx,y.hover=E.element,c("hover")}function g(E){c("out");var y=o.payload;y.hoverGfx=null,y.hover=null}function m(E){var y;if(o){var x=o.active;x&&c("cancel"),y=w(E),x&&c("canceled",y)}}function w(E){var y,x;c("cleanup"),Mw(),o.trapClick?x=h:x=l,ce.unbind(document,"mousemove",u),ce.unbind(document,"dragstart",Sr),ce.unbind(document,"selectstart",Sr),ce.unbind(document,"mousedown",x,!0),ce.unbind(document,"mouseup",x,!0),ce.unbind(document,"keyup",p),ce.unbind(document,"touchstart",d,!0),ce.unbind(document,"touchcancel",m,!0),ce.unbind(document,"touchmove",u,!0),ce.unbind(document,"touchend",l,!0),e.off("element.hover",f),e.off("element.out",g),t.removeMarker(t.getRootElement(),Wg);var v=o.payload.previousSelection;return E!==!1&&v&&!n.get().length&&a(v),y=o,o=null,y}function _(E,y,x,v){o&&m(!1),typeof y=="string"&&(v=x,x=y,y=null),v=J({},r,v||{});var S=v.data||{},M,$,T,I,C;v.trapClick?I=h:I=l,E?(M=Vo(E)||E,$=Fr(E),$u(E),M.type==="dragstart"&&Sr(M)):(M=null,$={x:0,y:0}),T=s($),y||(y=T),C=kR(M),o=J({prefix:x,data:S,payload:{},globalStart:$,displacement:Fn(y,T),localStart:T,isTouch:C},v),v.manual||(C?(ce.bind(document,"touchstart",d,!0),ce.bind(document,"touchcancel",m,!0),ce.bind(document,"touchmove",u,!0),ce.bind(document,"touchend",l,!0)):(ce.bind(document,"mousemove",u),ce.bind(document,"dragstart",Sr),ce.bind(document,"selectstart",Sr),ce.bind(document,"mousedown",I,!0),ce.bind(document,"mouseup",I,!0)),ce.bind(document,"keyup",p),e.on("element.hover",f),e.on("element.out",g)),c("init"),v.autoActivate&&u(E,!0)}e.on("diagram.destroy",m),this.init=_,this.move=u,this.hover=f,this.out=g,this.end=l,this.cancel=m,this.context=function(){return o},this.setOptions=function(E){J(r,E)}}s0.$inject=["eventBus","canvas","selection","elementRegistry"];const Ri={__depends__:[IR,si],dragging:["type",s0]};function Qo(e,t,n){this._canvas=n,this._opts=J({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}Qo.$inject=["config.autoScroll","eventBus","canvas"];Qo.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var s=0,c=0,a=0;a<4;a++)DR(o[a],n.scrollThresholdOut[a],n.scrollThresholdIn[a])&&(a===0?s=n.scrollStep:a==1?c=n.scrollStep:a==2?s=-n.scrollStep:a==3&&(c=-n.scrollStep));(s!==0||c!==0)&&(t.scroll({dx:s,dy:c}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function DR(e,t,n){return t<e&&e<n}Qo.prototype.stopScroll=function(){clearTimeout(this._scrolling)};Qo.prototype.setOptions=function(e){this._opts=J({},this._opts,e)};Qo.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Fr(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const PR={__depends__:[Ri],__init__:["autoScroll"],autoScroll:["type",Qo]};function id(e){this._commandStack=e.get("commandStack",!1)}id.$inject=["injector"];id.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const ci={__init__:["rules"],rules:["type",id]};var Gs=Math.round,OR=Math.max;function NR(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-10],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function BR(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var l0=10;function FR(e,t){var n,i;for(n=0;i=e[n];n++)if(qa(i,t)<=l0)return{point:e[n],bendpoint:!0,index:n};return null}function jR(e,t){var n=Rb(NR(t,l0),BR(e)),i=n[0],r=n[n.length-1],o;return i?i!==r?i.segment2!==r.segment2?(o=OR(i.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Gs(i.x+r.x)/2,y:Gs(i.y+r.y)/2},index:i.segment2}:{point:{x:Gs(i.x),y:Gs(i.y)},index:i.segment2}:null}function Lp(e,t){return FR(e,t)||jR(e,t)}function c0(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Gg(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function HR(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function WR(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/o}function rd(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=WR([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function u0(e,t){var n=rd(e,t),i={x:n.x-e.x,y:n.y-e.y};return c0(i)}function Hl(e,t){return c0({x:e.x-t.x,y:e.y-t.y})}var p0="djs-bendpoint",h0="djs-segment-dragger";function GR(e,t){var n=Fr(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var o=e.viewbox();return{x:o.x+(n.x-r.x)/o.scale,y:o.y+(n.y-r.y)/o.scale}}function Dp(e,t,n){var i=GR(e,n),r=Lp(t,i);return r}function Pp(e,t){var n=ue("g");ke(n).add(p0),de(e,n);var i=ue("circle");te(i,{cx:0,cy:0,r:4}),ke(i).add("djs-visual"),de(n,i);var r=ue("circle");return te(r,{cx:0,cy:0,r:10}),ke(r).add("djs-hit"),de(n,r),t&&ke(n).add(t),n}function zR(e,t,n,i){var r=ue("g");de(e,r);var o=18,s=6,c=11,a=UR(t,n,i),u=s+c,l=ue("rect");te(l,{x:-18/2,y:-6/2,width:o,height:s}),ke(l).add("djs-visual"),de(r,l);var p=ue("rect");return te(p,{x:-a/2,y:-17/2,width:a,height:u}),ke(p).add("djs-hit"),de(r,p),zb(r,i==="v"?90:0),r}function d0(e,t,n){var i=ue("g"),r=yp(t,n),o=gi(t,n);return de(e,i),zR(i,t,n,o),ke(i).add(h0),ke(i).add(o==="h"?"horizontal":"vertical"),Ft(i,r.x,r.y),i}function Op(e){return Math.abs(Math.round(e*2/3))}function VR(e,t){var n=YR(e,t);return rd(e,n)}function UR(e,t,n){var i=t.x-e.x,r=t.y-e.y;return Op(n==="h"?i:r)}function YR(e,t){for(var n=t.waypoints,i=1/0,r,o=0;o<n.length-1;o++){var s=n[o],c=n[o+1],a=u0(e,[s,c]);a<i&&(i=a,r=o)}return[n[r],n[r+1]]}function f0(e,t,n,i,r){function o(E,y,x){var v=E.index,S=E.point,M,$,T,I,C,b;return v<=0||E.bendpoint?!1:(M=y[v-1],$=y[v],T=yp(M,$),I=gi(M,$),C=Math.abs(S.x-T.x),b=Math.abs(S.y-T.y),I&&C<=x&&b<=x)}function s(E,y){var x=E.waypoints,v,S,M,$;return y.index<=0||y.bendpoint||(v={start:x[y.index-1],end:x[y.index]},S=gi(v.start,v.end),!S)?null:(S==="h"?M=v.end.x-v.start.x:M=v.end.y-v.start.y,$=Op(M)/2,$)}function c(E,y){var x=y.waypoints,v=Dp(t,x,E),S;if(v)return S=s(y,v),o(v,x,S)?r.start(E,y,v.index):i.start(E,y,v.index,!v.bendpoint),!0}function a(E,y,x){ce.bind(E,y,function(v){n.triggerMouseEvent(y,v,x),v.stopPropagation()})}function u(E,y){var x=t.getLayer("overlays"),v=Ee('.djs-bendpoints[data-element-id="'+Ra(E.id)+'"]',x);return!v&&y&&(v=ue("g"),te(v,{"data-element-id":E.id}),ke(v).add("djs-bendpoints"),de(x,v),a(v,"mousedown",E),a(v,"click",E),a(v,"dblclick",E)),v}function l(E,y){return Ee('.djs-segment-dragger[data-segment-idx="'+E+'"]',y)}function p(E,y){y.waypoints.forEach(function(x,v){var S=Pp(E);de(E,S),Ft(S,x.x,x.y)}),Pp(E,"floating")}function h(E,y){for(var x=y.waypoints,v,S,M,$=1;$<x.length;$++)v=x[$-1],S=x[$],gi(v,S)&&(M=d0(E,v,S),te(M,{"data-segment-idx":$}),a(M,"mousemove",y))}function d(E){Z(Gn("."+p0,E),function(y){Je(y)})}function f(E){Z(Gn("."+h0,E),function(y){Je(y)})}function g(E){var y=u(E);return y||(y=u(E,!0),p(y,E),h(y,E)),y}function m(E){var y=u(E);y&&(f(y),d(y),h(y,E),p(y,E))}function w(E,y){var x=Ee(".floating",E),v=y.point;x&&Ft(x,v.x,v.y)}function _(E,y,x){var v=l(y.index,E),S=x[y.index-1],M=x[y.index],$=y.point,T=yp(S,M),I=gi(S,M),C,b;v&&(C=ZR(v),b={x:$.x-T.x,y:$.y-T.y},I==="v"&&(b={x:b.y,y:b.x}),Ft(C,b.x,b.y))}e.on("connection.changed",function(E){m(E.element)}),e.on("connection.remove",function(E){var y=u(E.element);y&&Je(y)}),e.on("element.marker.update",function(E){var y=E.element,x;y.waypoints&&(x=g(y),E.add?ke(x).add(E.marker):ke(x).remove(E.marker))}),e.on("element.mousemove",function(E){var y=E.element,x=y.waypoints,v,S;if(x){if(v=u(y,!0),S=Dp(t,x,E.originalEvent),!S)return;w(v,S),S.bendpoint||_(v,S,x)}}),e.on("element.mousedown",function(E){if(sr(E)){var y=E.originalEvent,x=E.element;if(x.waypoints)return c(y,x)}}),e.on("selection.changed",function(E){var y=E.newSelection,x=y[0];x&&x.waypoints&&g(x)}),e.on("element.hover",function(E){var y=E.element;y.waypoints&&(g(y),n.registerEvent(E.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(E){n.unregisterEvent(E.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(E){var y=E.element,x=E.newId;if(y.waypoints){var v=u(y);v&&te(v,{"data-element-id":x})}}),this.addHandles=g,this.updateHandles=m,this.getBendpointsContainer=u,this.getSegmentDragger=l}f0.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function ZR(e){return Ee(".djs-visual",e)}var zg=Math.round,Ar="reconnectStart",Tr="reconnectEnd",pa="updateWaypoints";function od(e,t,n,i,r,o){this._injector=e,this.start=function(s,c,a,u){var l=n.getGraphics(c),p=c.source,h=c.target,d=c.waypoints,f;!u&&a===0?f=Ar:!u&&a===d.length-1?f=Tr:f=pa;var g=f===pa?"connection.updateWaypoints":"connection.reconnect",m=r.allowed(g,{connection:c,source:p,target:h});m===!1&&(m=r.allowed(g,{connection:c,source:h,target:p})),m!==!1&&i.init(s,"bendpoint.move",{data:{connection:c,connectionGfx:l,context:{allowed:m,bendpointIndex:a,connection:c,source:p,target:h,insert:u,type:f}}})},t.on("bendpoint.move.hover",function(s){var c=s.context,a=c.connection,u=a.source,l=a.target,p=s.hover,h=c.type;c.hover=p;var d;if(p){var f=h===pa?"connection.updateWaypoints":"connection.reconnect";if(d=c.allowed=r.allowed(f,{connection:a,source:h===Ar?p:u,target:h===Tr?p:l}),d){c.source=h===Ar?p:u,c.target=h===Tr?p:l;return}d===!1&&(d=c.allowed=r.allowed(f,{connection:a,source:h===Tr?p:l,target:h===Ar?p:u})),d&&(c.source=h===Tr?p:l,c.target=h===Ar?p:u)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(s){var c=s.context,a=c.type;c.hover=null,c.source=null,c.target=null,a!==pa&&(c.allowed=!1)}),t.on("bendpoint.move.end",function(s){var c=s.context,a=c.allowed,u=c.bendpointIndex,l=c.connection,p=c.insert,h=l.waypoints.slice(),d=c.source,f=c.target,g=c.type,m=c.hints||{},w={x:zg(s.x),y:zg(s.y)};if(!a)return!1;g===pa?(p?h.splice(u,0,w):h[u]=w,m.bendpointMove={insert:p,bendpointIndex:u},h=this.cropWaypoints(l,h),o.updateWaypoints(l,NC(h),m)):(g===Ar?(m.docking="source",Wl(c)&&(m.docking="target",m.newWaypoints=h.reverse())):g===Tr&&(m.docking="target",Wl(c)&&(m.docking="source",m.newWaypoints=h.reverse())),o.reconnect(l,d,f,w,m))},this)}od.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];od.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function Wl(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===Ar)return t&&i&&t===i&&n!==i;if(r===Tr)return t&&n&&t===n&&n!==i}var XR="reconnectStart",KR="reconnectEnd",Vg="updateWaypoints",ha="connect-ok",zs="connect-not-ok",Ug="connect-hover",Yg="djs-updating",Zg="djs-dragging",Xg=1100;function g0(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var s=o.context,c=s.bendpointIndex,a=s.connection,u=s.insert,l=a.waypoints,p=l.slice();s.waypoints=l,u&&p.splice(c,0,{x:o.x,y:o.y}),a.waypoints=p;var h=s.draggerGfx=Pp(i.getLayer("overlays"));ke(h).add("djs-dragging"),i.addMarker(a,Zg),i.addMarker(a,Yg)}),n.on("bendpoint.move.hover",function(o){var s=o.context,c=s.allowed,a=s.hover,u=s.type;if(a){if(i.addMarker(a,Ug),u===Vg)return;c?(i.removeMarker(a,zs),i.addMarker(a,ha)):c===!1&&(i.removeMarker(a,ha),i.addMarker(a,zs))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Xg,function(o){var s=o.context,c=s.hover,a=s.target;c&&(i.removeMarker(c,Ug),i.removeMarker(c,a?ha:zs))}),n.on("bendpoint.move.move",function(o){var s=o.context,c=s.allowed,a=s.bendpointIndex,u=s.draggerGfx,l=s.hover,p=s.type,h=s.connection,d=h.source,f=h.target,g=h.waypoints.slice(),m={x:o.x,y:o.y},w=s.hints||{},_={};r&&(w.connectionStart&&(_.connectionStart=w.connectionStart),w.connectionEnd&&(_.connectionEnd=w.connectionEnd),p===XR?Wl(s)?(_.connectionEnd=_.connectionEnd||m,_.source=f,_.target=l||d,g=g.reverse()):(_.connectionStart=_.connectionStart||m,_.source=l||d,_.target=f):p===KR?Wl(s)?(_.connectionStart=_.connectionStart||m,_.source=l||f,_.target=d,g=g.reverse()):(_.connectionEnd=_.connectionEnd||m,_.source=d,_.target=l||f):(_.noCropping=!0,_.noLayout=!0,g[a]=m),p===Vg&&(g=e.cropWaypoints(h,g)),_.waypoints=g,r.drawPreview(s,c,_)),Ft(u,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Xg,function(o){var s=o.context,c=s.connection,a=s.draggerGfx,u=s.hover,l=s.target,p=s.waypoints;c.waypoints=p,Je(a),i.removeMarker(c,Yg),i.removeMarker(c,Zg),u&&(i.removeMarker(u,ha),i.removeMarker(u,l?ha:zs)),r&&r.cleanUp(s)})}g0.$inject=["bendpointMove","injector","eventBus","canvas"];var Kg="connect-hover",Qg="djs-updating";function Jg(e,t,n){return ad(e,t,e[t]+n)}function ad(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function QR(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]),s=20,c=Math.min(Math.max(o+s,e[i]),r-s);return ad(t,i,c)}function m0(e){return e==="x"?"y":"x"}function qg(e,t,n){var i,r;return e.original?e.original:(i=Se(t),r=m0(n),ad(e,r,i[r]))}function v0(e,t,n,i,r,o){var s=e.get("connectionDocking",!1);this.start=function(p,h,d){var f,g=n.getGraphics(h),m=d-1,w=d,_=h.waypoints,E=_[m],y=_[w],x=Dp(n,_,p),v,S,M;v=gi(E,y),v&&(S=v==="v"?"x":"y",m===0&&(E=qg(E,h.source,S)),w===_.length-1&&(y=qg(y,h.target,S)),x?M=x.point:M={x:(E.x+y.x)/2,y:(E.y+y.y)/2},f={connection:h,segmentStartIndex:m,segmentEndIndex:w,segmentStart:E,segmentEnd:y,axis:S,dragPosition:M},i.init(p,M,"connectionSegment.move",{cursor:S==="x"?"resize-ew":"resize-ns",data:{connection:h,connectionGfx:g,context:f}}))};function c(p,h){if(!s)return h;var d=p.waypoints,f;return p.waypoints=h,f=s.getCroppedWaypoints(p),p.waypoints=d,f}function a(p){r.update("connection",p.connection,p.connectionGfx)}function u(p,h,d){var f=p.newWaypoints,g=p.segmentStartIndex+h,m=f[g],w=p.segmentEndIndex+h,_=f[w],E=m0(p.axis),y=QR(d,m,_,E);Ft(p.draggerGfx,y.x,y.y)}function l(p,h){var d=0,f=p.filter(function(g,m){return Mh(p[m-1],p[m+1],g)?(d=m<=h?d-1:d,!1):!0});return{waypoints:f,segmentOffset:d}}t.on("connectionSegment.move.start",function(p){var h=p.context,d=p.connection,f=n.getLayer("overlays");h.originalWaypoints=d.waypoints.slice(),h.draggerGfx=d0(f,h.segmentStart,h.segmentEnd),ke(h.draggerGfx).add("djs-dragging"),n.addMarker(d,Qg)}),t.on("connectionSegment.move.move",function(p){var h=p.context,d=h.connection,f=h.segmentStartIndex,g=h.segmentEndIndex,m=h.segmentStart,w=h.segmentEnd,_=h.axis,E=h.originalWaypoints.slice(),y=Jg(m,_,p["d"+_]),x=Jg(w,_,p["d"+_]),v=E.length,S=0;E[f]=y,E[g]=x;var M,$;f<2&&(M=Zt(d.source,y),f===1?M==="intersect"&&(E.shift(),E[0]=y,S--):M!=="intersect"&&(E.unshift(m),S++)),g>v-3&&($=Zt(d.target,x),g===v-2?$==="intersect"&&(E.pop(),E[E.length-1]=x):$!=="intersect"&&E.push(w)),h.newWaypoints=d.waypoints=c(d,E),u(h,S,p),h.newSegmentStartIndex=f+S,a(p)}),t.on("connectionSegment.move.hover",function(p){p.context.hover=p.hover,n.addMarker(p.hover,Kg)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(p){var h=p.context.hover;h&&n.removeMarker(h,Kg)}),t.on("connectionSegment.move.cleanup",function(p){var h=p.context,d=h.connection;h.draggerGfx&&Je(h.draggerGfx),n.removeMarker(d,Qg)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(p){var h=p.context,d=h.connection;d.waypoints=h.originalWaypoints,a(p)}),t.on("connectionSegment.move.end",function(p){var h=p.context,d=h.connection,f=h.newWaypoints,g=h.newSegmentStartIndex;f=f.map(function(x){return{original:x.original,x:Math.round(x.x),y:Math.round(x.y)}});var m=l(f,g),w=m.waypoints,_=c(d,w),E=m.segmentOffset,y={segmentMove:{segmentStartIndex:h.segmentStartIndex,newSegmentStartIndex:g+E}};o.updateWaypoints(d,_,y)})}v0.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var JR=Math.abs,em=Math.round;function qR(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],JR(r-e)<=n)return r}function y0(e){return{x:e.x,y:e.y}}function b0(e){return{x:e.x+e.width,y:e.y+e.height}}function Sn(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:em(e.x+e.width/2),y:em(e.y+e.height/2)}}function Mo(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function bt(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function w0(e){return e.children||[]}var eI=Math.abs,tm=Math.round,Du=10;function _0(e){function t(o,s){if(xe(o)){for(var c=o.length;c--;)if(eI(o[c]-s)<=Du)return o[c]}else{o=+o;var a=s%o;if(a<Du)return s-a;if(a>o-Du)return s-a+o}return s}function n(o,s){if(o.waypoints)return VR(s,o);if(o.width)return{x:tm(o.width/2+o.x),y:tm(o.height/2+o.y)}}function i(o){var s=o.context,c=s.snapPoints,a=s.connection,u=a.waypoints,l=s.segmentStart,p=s.segmentStartIndex,h=s.segmentEnd,d=s.segmentEndIndex,f=s.axis;if(c)return c;var g=[u[p-1],l,h,u[d+1]];return p<2&&g.unshift(n(a.source,o)),d>u.length-3&&g.unshift(n(a.target,o)),s.snapPoints=c={horizontal:[],vertical:[]},Z(g,function(m){m&&(m=m.original||m,f==="y"&&c.horizontal.push(m.y),f==="x"&&c.vertical.push(m.x))}),c}e.on("connectionSegment.move.move",1500,function(o){var s=i(o),c=o.x,a=o.y,u,l;if(s){u=t(s.vertical,c),l=t(s.horizontal,a);var p=c-u,h=a-l;J(o,{dx:o.dx-p,dy:o.dy-h,x:u,y:l}),(p||s.vertical.indexOf(c)!==-1)&&bt(o,"x",u),(h||s.horizontal.indexOf(a)!==-1)&&bt(o,"y",l)}});function r(o){var s=o.snapPoints,c=o.connection.waypoints,a=o.bendpointIndex;if(s)return s;var u=[c[a-1],c[a+1]];return o.snapPoints=s={horizontal:[],vertical:[]},Z(u,function(l){l&&(l=l.original||l,s.horizontal.push(l.y),s.vertical.push(l.x))}),s}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var s=o.context,c=s.hover,a=c&&n(c,o);!et(c)||!a||!a.x||!a.y||(bt(o,"x",a.x),bt(o,"y",a.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var s=o.context,c=r(s),a=s.hover,u=a&&n(a,o),l=o.x,p=o.y,h,d;if(c){h=t(u?c.vertical.concat([u.x]):c.vertical,l),d=t(u?c.horizontal.concat([u.y]):c.horizontal,p);var f=l-h,g=p-d;J(o,{dx:o.dx-f,dy:o.dy-g,x:o.x-f,y:o.y-g}),(f||c.vertical.indexOf(l)!==-1)&&bt(o,"x",h),(g||c.horizontal.indexOf(p)!==-1)&&bt(o,"y",d)}})}_0.$inject=["eventBus"];const tI={__depends__:[Ri,ci],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",f0],bendpointMove:["type",od],bendpointMovePreview:["type",g0],connectionSegmentMove:["type",v0],bendpointSnapping:["type",_0]};function x0(e,t,n,i){function r(s,c){return i.allowed("connection.create",{source:s,target:c})}function o(s,c){return r(c,s)}e.on("connect.hover",function(s){var c=s.context,a=c.start,u=s.hover,l;if(c.hover=u,l=c.canExecute=r(a,u),!bo(l)){if(l!==!1){c.source=a,c.target=u;return}l=c.canExecute=o(a,u),!bo(l)&&l!==!1&&(c.source=u,c.target=a)}}),e.on(["connect.out","connect.cleanup"],function(s){var c=s.context;c.hover=null,c.source=null,c.target=null,c.canExecute=!1}),e.on("connect.end",function(s){var c=s.context,a=c.canExecute,u=c.connectionStart,l={x:s.x,y:s.y},p=c.source,h=c.target;if(!a)return!1;var d=null,f={connectionStart:Np(c)?l:u,connectionEnd:Np(c)?u:l};ht(a)&&(d=a),c.connection=n.connect(p,h,d,f)}),this.start=function(s,c,a,u){ht(a)||(u=a,a=Se(c)),t.init(s,"connect",{autoActivate:u,data:{shape:c,context:{start:c,connectionStart:a}}})}}x0.$inject=["eventBus","dragging","modeling","rules"];function Np(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var nI=1100,iI=900,nm="connect-ok",im="connect-not-ok";function E0(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,s=o.canExecute,c=o.hover,a=o.source,u=o.start,l=o.startPosition,p=o.target,h=o.connectionStart||l,d=o.connectionEnd||{x:r.x,y:r.y},f=h,g=d;Np(o)&&(f=d,g=h),i.drawPreview(o,s,{source:a||u,target:p||c,connectionStart:f,connectionEnd:g})}),t.on("connect.hover",iI,function(r){var o=r.context,s=r.hover,c=o.canExecute;c!==null&&n.addMarker(s,c?nm:im)}),t.on(["connect.out","connect.cleanup"],nI,function(r){var o=r.hover;o&&(n.removeMarker(o,nm),n.removeMarker(o,im))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}E0.$inject=["injector","eventBus","canvas"];const sd={__depends__:[si,ci,Ri],__init__:["connectPreview"],connect:["type",x0],connectPreview:["type",E0]};var rI="djs-dragger";function Ii(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Ii.$inject=["injector","canvas","graphicsFactory","elementFactory"];Ii.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,o=n.source,s=n.target,c=n.waypoints,a=n.connectionStart,u=n.connectionEnd,l=n.noLayout,p=n.noCropping,h=n.noNoop,d,f=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Yr(i),r||(r=e.getConnection=oI(function(g,m,w){return f.getConnection(g,m,w)})),t&&(d=r(t,o,s)),!d){!h&&this.drawNoopPreview(i,n);return}d.waypoints=c||[],this._layouter&&!l&&(d.waypoints=this._layouter.layoutConnection(d,{source:o,target:s,connectionStart:a,connectionEnd:u,waypoints:n.waypoints||d.waypoints})),(!d.waypoints||!d.waypoints.length)&&(d.waypoints=[o?Se(o):a,s?Se(s):u]),this._connectionDocking&&(o||s)&&!p&&(d.waypoints=this._connectionDocking.getCroppedWaypoints(d,o,s)),this._graphicsFactory.drawConnection(i,d,{stroke:"var(--element-dragger-color)"})};Ii.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||Se(n),o=t.connectionEnd||Se(i),s=this.cropWaypoints(r,o,n,i),c=this.createNoopConnection(s[0],s[1]);de(e,c)};Ii.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),s=i&&r.getShapePath(i),c=r.getConnectionPath({waypoints:[e,t]});return e=n&&wp(o,c,!0)||e,t=i&&wp(s,c,!1)||t,[e,t]};Ii.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Je(e.connectionPreviewGfx)};Ii.prototype.getConnection=function(e){var t=aI(e);return this._elementFactory.createConnection(t)};Ii.prototype.createConnectionPreviewGfx=function(){var e=ue("g");return te(e,{pointerEvents:"none"}),ke(e).add(rI),de(this._canvas.getActiveLayer(),e),e};Ii.prototype.createNoopConnection=function(e,t){return yc([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function oI(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function aI(e){return ht(e)?e:{}}const sI={__init__:["connectionPreview"],connectionPreview:["type",Ii]},lI=new os("ps");var cI=["marker-start","marker-mid","marker-end"],uI=["circle","ellipse","line","path","polygon","polyline","path","rect"];function cr(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}cr.$inject=["elementRegistry","eventBus","canvas","styles"];cr.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")};cr.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};cr.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=Qa(n),o=n.getBoundingClientRect();return this._cloneMarkers(Pr(r),i),te(r,this._styles.cls(i,[],{x:o.top,y:o.left})),de(t,r),te(r,"data-preview-support-element-id",e.id),r};cr.prototype.addFrame=function(e,t){var n=ue("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return de(t,n),te(n,"data-preview-support-element-id",e.id),n};cr.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;if(e.childNodes)for(var r=0;r<e.childNodes.length;r++)i._cloneMarkers(e.childNodes[r],t,n);fI(e)&&cI.forEach(function(o){if(te(e,o)){var s=pI(e,o,i._canvas.getContainer());s&&i._cloneMarker(n,e,s,o,t)}})};cr.prototype._cloneMarker=function(e,t,n,i,r="djs-dragger"){var o=[n.id,r,lI.next()].join("-"),s=Ee("marker#"+n.id,e);e=e||this._canvas._svg;var c=s||Qa(n);c.id=o,ke(c).add(r);var a=Ee(":scope > defs",e);a||(a=ue("defs"),de(e,a)),de(a,c);var u=dI(c.id);te(t,i,u)};function pI(e,t,n){var i=hI(te(e,t));return Ee("marker#"+i,n||document)}function hI(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function dI(e){return"url(#"+e+")"}function fI(e){return uI.indexOf(e.nodeName)!==-1}const Jo={__init__:["previewSupport"],previewSupport:["type",cr]},Vs="complex-preview";class S0{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:r=[],resized:o=[]}=t,s=this._canvas.getLayer(Vs);n.filter(c=>!gI(c)).forEach(c=>{let a;et(c)?(a=this._graphicsFactory._createContainer("connection",ue("g")),this._graphicsFactory.drawConnection(Pr(a),c)):(a=this._graphicsFactory._createContainer("shape",ue("g")),this._graphicsFactory.drawShape(Pr(a),c),Ft(a,c.x,c.y)),this._previewSupport.addDragger(c,s,a)}),i.forEach(({element:c,delta:a})=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"]);const u=this._previewSupport.addDragger(c,s);et(c)?Ft(u,a.x,a.y):Ft(u,c.x+a.x,c.y+a.y)}),r.forEach(c=>{this._previewSupport.addDragger(c,s,void 0,"djs-dragging"),this._canvas.addMarker(c,"djs-element-hidden"),this._markers.push([c,"djs-element-hidden"])}),o.forEach(({shape:c,bounds:a})=>{this._canvas.addMarker(c,"djs-hidden"),this._markers.push([c,"djs-hidden"]),this._previewSupport.addDragger(c,s,void 0,"djs-dragging");const u=this._graphicsFactory._createContainer("shape",ue("g"));this._graphicsFactory.drawShape(Pr(u),c,{width:a.width,height:a.height}),Ft(u,a.x,a.y),this._previewSupport.addDragger(c,s,u)})}cleanUp(){Yr(this._canvas.getLayer(Vs)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(Vs)}hide(){this._canvas.hideLayer(Vs)}}S0.$inject=["canvas","graphicsFactory","previewSupport"];function gI(e){return e.hidden}const mI={__depends__:[Jo],__init__:["complexPreview"],complexPreview:["type",S0]};var ld=["top","bottom","left","right"],Us=10;function cd(e,t){oe.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,s=o.connection,c=s.source,a=s.target,u=o.hints||{};u.createElementsBehavior!==!1&&(n(c),n(a))}),this.postExecuted(["label.create"],function(r){var o=r.context,s=o.shape,c=o.hints||{};c.createElementsBehavior!==!1&&n(s.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,s=o.elements,c=o.hints||{};c.createElementsBehavior!==!1&&s.forEach(function(a){n(a)})});function n(r){if(Cc(r)){var o=bI(r);o&&i(r,o)}}function i(r,o){var s=Se(r),c=r.label,a=Se(c);if(c.parent){var u=be(r),l;switch(o){case"top":l={x:s.x,y:u.top-Us-c.height/2};break;case"left":l={x:u.left-Us-c.width/2,y:s.y};break;case"bottom":l={x:s.x,y:u.bottom+Us+c.height/2};break;case"right":l={x:u.right+Us+c.width/2,y:s.y};break}var p=Fn(l,a);t.moveShape(c,p)}}}me(cd,oe);cd.$inject=["eventBus","modeling"];function vI(e){var t=e.host,n=Se(e),i=Zt(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var o=ld.filter(function(s){return r.indexOf(s)===-1});return o}function yI(e){var t=Se(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return C0(t,i)});return n}function bI(e){var t=Se(e.label),n=Se(e),i=C0(n,t);if(wI(i)){var r=yI(e);if(e.host){var o=vI(e);r=r.concat(o)}var s=ld.filter(function(c){return r.indexOf(c)===-1});if(s.indexOf(i)===-1)return s[0]}}function C0(e,t){return Zt(t,e,5)}function wI(e){return ld.indexOf(e)!==-1}function ud(e){oe.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(B(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}me(ud,oe);ud.$inject=["eventBus"];function pd(e,t){e.invoke(oe,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,o=$e(r.incoming.concat(r.outgoing),function(s){return B(s,"bpmn:Association")});Z(o,function(s){t.moveConnection(s,{x:0,y:0},i)})},!0)}me(pd,oe);pd.$inject=["injector","modeling"];var rm=500;function jc(e,t){t.invoke(oe,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",rm,function(i){var r=i.elements;r=r.filter(function(o){var s=o.host;return om(o,s)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var s=r[o];i.elements[o]=n._replaceShape(r[o],s)})},!0),this.preExecute("elements.move",rm,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var s=r[0];om(s,o)&&(i.shapes=[n._replaceShape(s,o)])}},!0)}jc.$inject=["bpmnReplace","injector"];me(jc,oe);jc.prototype._replaceShape=function(e,t){var n=_I(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function _I(e){var t=ie(e),n=t.eventDefinitions;return n&&n[0]}function om(e,t){return!Ge(e)&&Re(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function hd(e,t){oe.call(this,e);function n(i){return $e(i.attachers,function(r){return B(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,o=i.context.target,s=n(o);B(r,"bpmn:EventBasedGateway")&&B(o,"bpmn:ReceiveTask")&&s.length>0&&t.removeElements(s)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,o=i.context.newSource;B(r,"bpmn:Gateway")&&B(o,"bpmn:EventBasedGateway")&&Z(o.outgoing,function(s){var c=s.target,a=n(c);B(c,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)})})}hd.$inject=["eventBus","modeling"];me(hd,oe);function dd(e,t,n){oe.call(this,e),this.preExecute("shape.replace",c,!0),this.postExecuted("shape.replace",a,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",s,!0);function i(m){const w=m.source,_=m.target;uo(w)&&da(_)&&l(_)}function r(m){const w=m.connection,_=m.source,E=m.target;uo(_)&&Ys(E)&&(u(E),h(_,[w]))}function o(m){const w=m.newTarget,_=m.oldSource,E=m.oldTarget;if(E!==w){const y=_;da(E)&&l(E),uo(y)&&Ys(w)&&u(w)}}function s(m){const{element:w}=m;da(w)?(p(w),d(w)):Ys(w)&&f(w)}function c(m){const{newData:w,oldShape:_}=m;if(uo(m.oldShape)&&w.eventDefinitionType!=="bpmn:CompensateEventDefinition"||w.type!=="bpmn:BoundaryEvent"){const E=_.outgoing.find(({target:y})=>da(y));E&&E.target&&(m._connectionTarget=E.target)}else if(!uo(m.oldShape)&&w.eventDefinitionType==="bpmn:CompensateEventDefinition"&&w.type==="bpmn:BoundaryEvent"){const E=_.outgoing.find(({target:y})=>Ys(y));E&&E.target&&(m._connectionTarget=E.target),g(_)}}function a(m){const{_connectionTarget:w,newShape:_}=m;w&&t.connect(_,w)}function u(m){t.updateProperties(m,{isForCompensation:!0})}function l(m){t.updateProperties(m,{isForCompensation:void 0})}function p(m){for(const w of m.incoming)n.canConnect(w.source,m)||t.removeConnection(w);for(const w of m.outgoing)n.canConnect(m,w.target)||t.removeConnection(w)}function h(m,w){m.outgoing.filter(y=>B(y,"bpmn:Association")).filter(y=>da(y.target)&&!w.includes(y)).forEach(y=>t.removeConnection(y))}function d(m){const w=m.attachers.slice();w.length&&t.removeElements(w)}function f(m){const w=m.incoming.filter(_=>uo(_.source));t.removeElements(w)}function g(m){const w=m.outgoing.filter(_=>B(_,"bpmn:SequenceFlow"));t.removeElements(w)}}me(dd,oe);dd.$inject=["eventBus","modeling","bpmnRules"];function da(e){const t=ie(e);return t&&t.get("isForCompensation")}function uo(e){return e&&B(e,"bpmn:BoundaryEvent")&&zo(e,"bpmn:CompensateEventDefinition")}function Ys(e){return e&&B(e,"bpmn:Activity")&&!Yt(e)}function fd(e){e.invoke(oe,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;B(i,"bpmn:Lane")&&!B(r,"bpmn:Lane")&&(n.parent=To(i,"bpmn:Participant"))})}fd.$inject=["injector"];me(fd,oe);function gd(e,t){oe.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,r=i.shape;if(B(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}gd.$inject=["eventBus","bpmnFactory"];me(gd,oe);var Bp=20,Fp=20,A0=30,Zs=2e3;function md(e,t,n){oe.call(this,t),t.on(["create.start","shape.move.start"],Zs,function(r){var o=r.context,s=o.shape,c=e.getRootElement();if(!(!B(s,"bpmn:Participant")||!B(c,"bpmn:Process")||!c.children.length)){var a=c.children.filter(function(p){return!B(p,"bpmn:Group")&&!Ge(p)&&!et(p)});if(a.length){var u=kt(a),l=xI(s,u);J(s,l),o.createConstraints=EI(s,u)}}}),t.on("create.start",Zs,function(r){var o=r.context,s=o.shape,c=e.getRootElement(),a=e.getGraphics(c);function u(l){l.element=c,l.gfx=a}B(s,"bpmn:Participant")&&B(c,"bpmn:Process")&&(t.on("element.hover",Zs,u),t.once("create.cleanup",function(){t.off("element.hover",u)}))});function i(){var r=e.getRootElement();return B(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",Zs,function(r){var o=r.elements,s=r.parent,c=SI(o),a;c&&B(s,"bpmn:Process")&&(r.parent=i(),a=r.hints=r.hints||{},a.participant=c,a.process=s,a.processRef=ie(c).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,s=r.shape;B(s,"bpmn:Participant")&&B(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=ie(s).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},s=r.process||o.process,c=r.shape,a=o.participant;s&&(!a||c===a)&&ie(c).set("processRef",ie(s))},!0),this.revert("shape.create",function(r){var o=r.hints||{},s=r.process||o.process,c=r.processRef||o.processRef,a=r.shape,u=o.participant;s&&(!u||a===u)&&ie(a).set("processRef",c)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},s=r.process||r.hints.process,c=r.shape,a=o.participant;if(s){var u=s.children.slice();a?c===a&&n.moveElements(u,{x:0,y:0},a):n.moveElements(u,{x:0,y:0},c)}},!0)}md.$inject=["canvas","eventBus","modeling"];me(md,oe);function xI(e,t){t={width:t.width+Bp*2+A0,height:t.height+Fp*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function EI(e,t){return t=be(t),{bottom:t.top+e.height/2-Fp,left:t.right-e.width/2+Bp,top:t.bottom-e.height/2+Fp,right:t.left+e.width/2-Bp-A0}}function SI(e){return Be(e,function(t){return B(t,"bpmn:Participant")})}var am="__targetRef_placeholder";function vd(e,t){oe.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],sm(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],sm(o));function n(s,c,a){var u=s.get("dataInputAssociations");return Be(u,function(l){return l!==a&&l.targetRef===c})}function i(s,c){var a=s.get("properties"),u=Be(a,function(l){return l.name===am});return!u&&c&&(u=t.create("bpmn:Property",{name:am}),Tt(a,u)),u}function r(s,c){var a=i(s);a&&(n(s,a,c)||wt(s.get("properties"),a))}function o(s){var c=s.context,a=c.connection,u=a.businessObject,l=a.target,p=l&&l.businessObject,h=c.newTarget,d=h&&h.businessObject,f=c.oldTarget||c.target,g=f&&f.businessObject,m=a.businessObject,w;g&&g!==p&&r(g,u),d&&d!==p&&r(d,u),p?(w=i(p,!0),m.targetRef=w):m.targetRef=null}}vd.$inject=["eventBus","bpmnFactory"];me(vd,oe);function sm(e){return function(t){var n=t.context,i=n.connection;if(B(i,"bpmn:DataInputAssociation"))return e(t)}}function Hc(e){this._bpmnUpdater=e}Hc.$inject=["bpmnUpdater"];Hc.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};Hc.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};function yd(e,t,n,i){oe.call(this,i),t.registerHandler("dataStore.updateContainment",Hc);function r(){return n.filter(function(c){return B(c,"bpmn:Participant")&&ie(c).processRef})[0]}function o(c){return c.children.filter(function(a){return B(a,"bpmn:DataStoreReference")&&!a.labelTarget})}function s(c,a){var u=c.businessObject||c;if(a=a||r(),a){var l=a.businessObject||a;t.execute("dataStore.updateContainment",{dataStoreBo:u,dataStoreDi:je(c),newSemanticParent:l.processRef||l,newDiParent:je(a)})}}this.preExecute("shape.create",function(c){var a=c.context,u=a.shape;B(u,"bpmn:DataStoreReference")&&u.type!=="label"&&(a.hints||(a.hints={}),a.hints.autoResize=!1)}),this.preExecute("elements.move",function(c){var a=c.context,u=a.shapes,l=u.filter(function(p){return B(p,"bpmn:DataStoreReference")});l.length&&(a.hints||(a.hints={}),a.hints.autoResize=u.filter(function(p){return!B(p,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(c){var a=c.context,u=a.shape,l=u.parent;B(u,"bpmn:DataStoreReference")&&u.type!=="label"&&B(l,"bpmn:Collaboration")&&s(u)}),this.postExecute("shape.move",function(c){var a=c.context,u=a.shape,l=a.oldParent,p=u.parent;if(!B(l,"bpmn:Collaboration")&&B(u,"bpmn:DataStoreReference")&&u.type!=="label"&&B(p,"bpmn:Collaboration")){var h=B(l,"bpmn:Participant")?l:AI(l,"bpmn:Participant");s(u,h)}}),this.postExecute("shape.delete",function(c){var a=c.context,u=a.shape,l=e.getRootElement();Re(u,["bpmn:Participant","bpmn:SubProcess"])&&B(l,"bpmn:Collaboration")&&o(l).filter(function(p){return CI(p,u)}).forEach(function(p){s(p)})}),this.postExecute("canvas.updateRoot",function(c){var a=c.context,u=a.oldRoot,l=a.newRoot,p=o(u);p.forEach(function(h){B(l,"bpmn:Process")&&s(h,l)})})}yd.$inject=["canvas","commandStack","elementRegistry","eventBus"];me(yd,oe);function CI(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function AI(e,t){for(;e.parent;){if(B(e.parent,t))return e.parent;e=e.parent}}var Gl=Math.max,zl=Math.min,TI=20;function T0(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function MI(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+i:t.indexOf("w")!==-1&&(o.x=e.x+i,o.width=e.width-i),o}function $I(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function Xs(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return he(r)&&(i=(/top|left/.test(e)?zl:Gl)(i,r)),he(o)&&(i=(/top|left/.test(e)?Gl:zl)(i,o)),i}function RI(e,t){if(!t)return e;var n=be(e);return wc({top:Xs("top",n,t),right:Xs("right",n,t),bottom:Xs("bottom",n,t),left:Xs("left",n,t)})}function II(e,t,n,i){var r=be(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},s=i?be(i):o,c={top:zl(o.top,s.top),left:zl(o.left,s.left),bottom:Gl(o.bottom,s.bottom),right:Gl(o.right,s.right)};return wc(c)}function fa(e,t){return typeof e<"u"?e:TI}function kI(e,t){var n,i,r,o;return typeof t=="object"?(n=fa(t.left),i=fa(t.right),r=fa(t.top),o=fa(t.bottom)):n=i=r=o=fa(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function LI(e){return!(e.waypoints||e.type==="label")}function M0(e,t){var n;if(e.length===void 0?n=$e(e.children,LI):n=e,n.length)return kI(kt(n),t)}var ji=Math.abs;function DI(e,t){return T0(be(t),be(e))}var PI=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],xn=30;function Wc(e,t){return t=t||[],e.children.filter(function(n){B(n,"bpmn:Lane")&&(Wc(n,t),t.push(n))}),t}function ki(e){return e.children.filter(function(t){return B(t,"bpmn:Lane")})}function En(e){return To(e,PI)||e}function OI(e,t){var n=En(e),i=B(n,"bpmn:Process")?[]:[n],r=Wc(n,i),o=be(e),s=be(t),c=DI(e,t),a=[],u=Lt(e);return r.forEach(function(l){if(l!==e){var p=u?0:c.top,h=u?c.right:0,d=u?0:c.bottom,f=u?c.left:0,g=be(l);c.top&&(ji(g.bottom-o.top)<10&&(d=s.top-g.bottom),ji(g.top-o.top)<5&&(p=s.top-g.top)),c.left&&(ji(g.right-o.left)<10&&(h=s.left-g.right),ji(g.left-o.left)<5&&(f=s.left-g.left)),c.bottom&&(ji(g.top-o.bottom)<10&&(p=s.bottom-g.top),ji(g.bottom-o.bottom)<5&&(d=s.bottom-g.bottom)),c.right&&(ji(g.left-o.right)<10&&(f=s.right-g.left),ji(g.right-o.right)<5&&(h=s.right-g.right)),(p||h||d||f)&&a.push({shape:l,newBounds:$I(l,{top:p,right:h,bottom:d,left:f})})}}),a}var NI=500;function bd(e,t){oe.call(this,e);function n(i,r){var o=Lt(i),s=ki(r),c=[],a=[],u=[],l=[];if(Xr(s,function(m){return o?m.y>i.y?a.push(m):c.push(m):m.x>i.x?l.push(m):u.push(m),m.children}),!!s.length){var p;o?a.length&&c.length?p=i.height/2:p=i.height:l.length&&u.length?p=i.width/2:p=i.width;var h,d,f,g;c.length&&(h=t.calculateAdjustments(c,"y",p,i.y-10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:p},"s")),a.length&&(d=t.calculateAdjustments(a,"y",-p,i.y+i.height+10),t.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:-p},"n")),u.length&&(f=t.calculateAdjustments(u,"x",p,i.x-10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:p,y:0},"e")),l.length&&(g=t.calculateAdjustments(l,"x",-p,i.x+i.width+10),t.makeSpace(g.movingShapes,g.resizingShapes,{x:-p,y:0},"w"))}}this.postExecuted("shape.delete",NI,function(i){var r=i.context,o=r.hints,s=r.shape,c=r.oldParent;B(s,"bpmn:Lane")&&(o&&o.nested||n(s,c))})}bd.$inject=["eventBus","spaceTool"];me(bd,oe);var lm=500;function Gc(e,t){t.invoke(oe,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",lm,function(i){var r=i.elements;r.filter(function(o){var s=o.host;return cm(o,s)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n._replaceShape(r[o])})},!0),this.preExecute("elements.move",lm,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(s,c){var a=s.host;cm(s,FI(r,a)?a:o)&&(r[c]=n._replaceShape(s))})},!0)}Gc.$inject=["bpmnReplace","injector"];me(Gc,oe);Gc.prototype._replaceShape=function(e){var t=BI(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function BI(e){var t=ie(e),n=t.eventDefinitions;return n&&n[0]}function cm(e,t){return!Ge(e)&&B(e,"bpmn:BoundaryEvent")&&!t}function FI(e,t){return e.indexOf(t)!==-1}function wd(e,t,n){oe.call(this,e);function i(r,o,s){var c=o.waypoints,a,u,l,p,h,d,f,g=r.outgoing.slice(),m=r.incoming.slice(),w;he(s.width)?w=Se(s):w=s;var _=Lp(c,w);if(_){if(a=c.slice(0,_.index),u=c.slice(_.index+(_.bendpoint?1:0)),!a.length||!u.length)return;l=_.bendpoint?c[_.index]:w,(a.length===1||!um(r,a[a.length-1]))&&a.push(pm(l)),(u.length===1||!um(r,u[0]))&&u.unshift(pm(l))}p=o.source,h=o.target,t.canConnect(p,r,o)&&(n.reconnectEnd(o,r,a||w),d=o),t.canConnect(r,h,o)&&(d?f=n.connect(r,h,{type:o.type,waypoints:u}):(n.reconnectStart(o,r,u||w),f=o));var E=[].concat(d&&$e(m,function(y){return y.source===d.source})||[],f&&$e(g,function(y){return y.target===f.target})||[]);E.length&&n.removeElements(E)}this.preExecute("elements.move",function(r){var o=r.newParent,s=r.shapes,c=r.delta,a=s[0];if(!(!a||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var u=Se(a),l={x:u.x+c.x,y:u.y+c.y},p=Be(o.children,function(h){var d=t.canInsert(s,h);return d&&Lp(h.waypoints,l)});p&&(r.targetFlow=p,r.position=l)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,s=r.targetFlow,c=r.position;s&&i(o[0],s,c)},!0),this.preExecute("shape.create",function(r){var o=r.parent,s=r.shape;t.canInsert(s,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,s=r.targetFlow,c=r.position;s&&i(o,s,c)},!0)}me(wd,oe);wd.$inject=["eventBus","bpmnRules","modeling"];function um(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function pm(e){return J({},e)}function _d(e,t){oe.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,o=i.source,s=i.target,c=i.hints;if(!(c&&c.createElementsBehavior===!1)&&po(r)){var a=[];B(o,"bpmn:EventBasedGateway")?a=s.incoming.filter(u=>u!==r&&po(u)):a=s.incoming.filter(u=>u!==r&&po(u)&&B(u.source,"bpmn:EventBasedGateway")),a.forEach(function(u){t.removeConnection(u)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(B(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(po).reduce(function(s,c){return s.includes(c.target)?s:s.concat(c.target)},[]);o.forEach(function(s){s.incoming.filter(po).forEach(function(c){const a=s.incoming.filter(po).filter(function(u){return u.source===r});(c.source!==r||a.length>1)&&t.removeConnection(c)})})}})}_d.$inject=["eventBus","modeling"];me(_d,oe);function po(e){return B(e,"bpmn:SequenceFlow")}var Ks=1500,hm=2e3;function $0(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Ks,function(i){var r=i.context,o=r.shape||i.shape,s=i.hover;B(s,"bpmn:Lane")&&!Re(o,["bpmn:Lane","bpmn:Participant"])&&(i.hover=En(s),i.hoverGfx=e.getGraphics(i.hover));var c=n.getRootElement();s!==c&&(o.labelTarget||Re(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=c,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Ks,function(i){var r=i.hover;B(r,"bpmn:Lane")&&(i.hover=En(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],Ks,function(i){var r=i.context,o=i.hover,s=r.type;B(o,"bpmn:Lane")&&/reconnect/.test(s)&&(i.hover=En(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],Ks,function(i){var r=i.context,o=r.start;B(o,"bpmn:Lane")&&(r.start=En(o)||o)}),t.on("shape.move.start",hm,function(i){var r=i.shape;B(r,"bpmn:Lane")&&(i.shape=En(r)||r)}),t.on("spaceTool.move",hm,function(i){var r=i.hover;r&&B(r,"bpmn:Lane")&&(i.hover=En(r))})}$0.$inject=["elementRegistry","eventBus","canvas"];function jI(e){return e.create("bpmn:Category")}function HI(e){return e.create("bpmn:CategoryValue")}function WI(e,t,n){return Tt(t.get("categoryValue"),e),e.$parent=t,Tt(n.get("rootElements"),t),t.$parent=n,e}function GI(e){var t=e.$parent;return t&&(wt(t.get("categoryValue"),e),e.$parent=null),e}function zI(e){var t=e.$parent;return t&&(wt(t.get("rootElements"),e),e.$parent=null),e}var dm=770;function xd(e,t,n,i,r,o){r.invoke(oe,this);function s(){return n.filter(function(f){return B(f,"bpmn:Group")})}function c(f,g){return f.some(function(m){var w=ie(m),_=w.categoryValueRef&&w.categoryValueRef.$parent;return _===g})}function a(f,g){return f.some(function(m){var w=ie(m);return w.categoryValueRef===g})}function u(f,g,m){var w=s().filter(function(_){return _.businessObject!==m});g&&!c(w,g)&&zI(g),f&&!a(w,f)&&GI(f)}function l(f,g){return WI(f,g,t.getDefinitions())}function p(f,g){var m=ie(f),w=m.categoryValueRef;w||(w=m.categoryValueRef=g.categoryValue=g.categoryValue||HI(e));var _=w.$parent;_||(_=w.$parent=g.category=g.category||jI(e)),l(w,_,t.getDefinitions())}function h(f,g){var m=g.category,w=g.categoryValue,_=ie(f);w?(_.categoryValueRef=null,u(w,m,_)):u(null,_.categoryValueRef.$parent,_)}this.execute("label.create",function(f){var g=f.context,m=g.labelTarget;B(m,"bpmn:Group")&&p(m,g)}),this.revert("label.create",function(f){var g=f.context,m=g.labelTarget;B(m,"bpmn:Group")&&h(m,g)}),this.execute("shape.delete",function(f){var g=f.context,m=g.shape,w=ie(m);if(!(!B(m,"bpmn:Group")||m.labelTarget)){var _=g.categoryValue=w.categoryValueRef,E;_&&(E=g.category=_.$parent,u(_,E,w),w.categoryValueRef=null)}}),this.reverted("shape.delete",function(f){var g=f.context,m=g.shape;if(!(!B(m,"bpmn:Group")||m.labelTarget)){var w=g.category,_=g.categoryValue,E=ie(m);_&&(E.categoryValueRef=_,l(_,w))}}),this.execute("shape.create",function(f){var g=f.context,m=g.shape;!B(m,"bpmn:Group")||m.labelTarget||ie(m).categoryValueRef&&p(m,g)}),this.reverted("shape.create",function(f){var g=f.context,m=g.shape;!B(m,"bpmn:Group")||m.labelTarget||ie(m).categoryValueRef&&h(m,g)});function d(f,g){var m=e.create(f.$type);return o.copyElement(f,m,null,g)}i.on("copyPaste.copyElement",dm,function(f){var g=f.descriptor,m=f.element;if(!(!B(m,"bpmn:Group")||m.labelTarget)){var w=ie(m);if(w.categoryValueRef){var _=w.categoryValueRef;g.categoryValue=d(_,!0),_.$parent&&(g.category=d(_.$parent,!0))}}}),i.on("copyPaste.pasteElement",dm,function(f){var g=f.descriptor,m=g.businessObject,w=g.categoryValue,_=g.category;w&&(w=m.categoryValueRef=d(w)),_&&(w.$parent=d(_)),delete g.category,delete g.categoryValue})}xd.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];me(xd,oe);function jp(e,t,n,i){var r,o,s,c,a;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(o=e.y-n.y,s=e.x-n.x,a=(i.x-n.x)*o-(i.y-n.y)*s,c=a/r,{x:Math.round(e.x+c*(t.x-e.x)),y:Math.round(e.y+c*(t.y-e.y))})}function R0(e){function t(i,r,o){var s={x:o.x,y:o.y-50},c={x:o.x-50,y:o.y},a=jp(i,r,o,s),u=jp(i,r,o,c),l;a&&u?fm(a,o)>fm(u,o)?l=u:l=a:l=a||u,i.original=l}function n(i){var r=i.waypoints;t(r[0],r[1],Se(i.source)),t(r[r.length-1],r[r.length-2],Se(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}R0.$inject=["eventBus"];function fm(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ed(e){oe.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=ie(i),o=je(i);if(Re(r,t)){var s=o.get("isHorizontal");s===void 0&&(s=!0),o.set("isHorizontal",s)}})}Ed.$inject=["eventBus"];me(Ed,oe);var I0=Math.sqrt,k0=Math.min,VI=Math.max,gm=Math.abs;function mm(e){return Math.pow(e,2)}function ga(e,t){return I0(mm(e.x-t.x)+mm(e.y-t.y))}function UI(e,t){var n=0,i,r,o,s,c,a,u,l,p,h,d;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],ym(i,r)?u=[i]:(o=ga(e,i),s=ga(e,r),a=k0(o,s),u=YI(i,r,e,a)),u.length<1)throw new Error("expected between [1, 2] circle -> line intersections");u.length===1&&(l={type:"bendpoint",position:u[0],segmentIndex:n,bendpointIndex:ym(i,u[0])?n:n+1}),u.length===2&&(c=XI(u[0],u[1]),l={type:"segment",position:c,segmentIndex:n,relativeLocation:ga(i,c)/ga(i,r)}),p=ga(l.position,e),(!d||h>p)&&(d=l,h=p)}return d}function YI(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,s=n.x-e.x,c=n.y-e.y,a=r*r+o*o,u=r*s+o*c,l=s*s+c*c-i*i,p=u/a,h=l/a,d=p*p-h;if(d<0&&d>-1e-6&&(d=0),d<0)return[];var f=I0(d),g=-p+f,m=-p-f,w={x:e.x-r*g,y:e.y-o*g};if(d===0)return[w];var _={x:e.x-r*m,y:e.y-o*m};return[w,_].filter(function(E){return ZI(E,e,t)})}function ZI(e,t,n){return vm(e.x,t.x,n.x)&&vm(e.y,t.y,n.y)}function vm(e,t,n){return e>=k0(t,n)-Vl&&e<=VI(t,n)+Vl}function XI(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var Vl=.1;function ym(e,t){return gm(e.x-t.x)<=Vl&&gm(e.y-t.y)<=Vl}function KI(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var s=i.segmentMove.segmentStartIndex,c=i.segmentMove.newSegmentStartIndex;return r===s?c:r>=c?r+o<c?c:r+o:r}if(i.bendpointMove){var a=i.bendpointMove.insert,u=i.bendpointMove.bendpointIndex,l;if(o===0)return r;if(r>=u&&(l=a?r+1:r-1),r<u&&(l=r,a&&n.type!=="bendpoint"&&u-1===r)){var p=D0(t,u);p<n.relativeLocation&&l++}return l}return o===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function L0(e,t,n,i){var r=0,o=0,s={point:e,delta:{x:0,y:0}},c=UI(e,n),a=c.segmentIndex,u=KI(n,t,c,i);if(u<0||u>t.length-2||u===null)return s;var l=bm(n,a),p=bm(t,u),h=c.position,d=JI(l,h),f=QI(l,p);if(c.type==="bendpoint"){var g=t.length-n.length,m=c.bendpointIndex,w=n[m];if(t.indexOf(w)!==-1)return s;if(g===0){var _=t[m];return r=_.x-c.position.x,o=_.y-c.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}g<0&&m!==0&&m<n.length-1&&(d=D0(n,m))}var E={x:(p[1].x-p[0].x)*d+p[0].x,y:(p[1].y-p[0].y)*d+p[0].y},y=HR({x:e.x-h.x,y:e.y-h.y},f);return r=E.x+y.x-e.x,o=E.y+y.y-e.y,{point:vi(E),delta:vi({x:r,y:o})}}function D0(e,t){var n=Hl(e[t-1],e[t]),i=Hl(e[t],e[t+1]),r=n/(n+i);return r}function QI(e,t){var n=Gg(e),i=Gg(t);return i-n}function bm(e,t){return[e[t],e[t+1]]}function JI(e,t){var n=Hl(e[0],e[1]),i=Hl(e[0],t);return n===0?0:i/n}function qI(e,t,n,i){var r=Se(e);return L0(r,t,n,i).delta}function ls(e,t,n){var i=Aa(t),r=Aa(n),o=Fn(e,i),s={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return vi({x:r.x+s.x,y:r.y+s.y})}function wm(e,t,n){var i=Aa(e),r=Aa(t),o=Aa(n),s=Fn(e,i),c=Fn(i,r),a=e2(i,t,n);if(a)return a;var u={x:c.x*(n.width/t.width),y:c.y*(n.height/t.height)},l={x:o.x+u.x,y:o.y+u.y};return vi({x:l.x+s.x-e.x,y:l.y+s.y-e.y})}function e2(e,t,n){var i=be(t),r=be(n);if(t2(i,r))return null;var o=Zt(t,e),s,c,a;if(o==="top")s={x:0,y:r.bottom-i.bottom};else if(o==="bottom")s={x:0,y:r.top-i.top};else if(o==="right")s={x:r.left-i.left,y:0};else if(o==="left")s={x:r.right-i.right,y:0};else return null;return c={x:e.x+s.x,y:e.y+s.y},a=Zt(n,c),a!==o?null:s}function t2(e,t){return n2(e,t)||i2(e,t)}function n2(e,t){return e.right!==t.right&&e.left!==t.left}function i2(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var _m="name",xm="text";function Sd(e,t,n,i){oe.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",s=>{ie(s.context.element)===s.context.moddleElement&&r(s)});function r(s){var c=s.context,a=c.element,u=c.properties;if(_m in u&&t.updateLabel(a,u[_m]),xm in u&&B(a,"bpmn:TextAnnotation")){var l=i.getTextAnnotationBounds({x:a.x,y:a.y,width:a.width,height:a.height},u[xm]||"");t.updateLabel(a,u.text,l)}}this.postExecute(["shape.create","connection.create"],function(s){var c=s.context,a=c.hints||{};if(a.createElementsBehavior!==!1){var u=c.shape||c.connection;Ge(u)||!Br(u)||dn(u)&&t.updateLabel(u,dn(u))}}),this.postExecute("shape.delete",function(s){var c=s.context,a=c.labelTarget,u=c.hints||{};a&&u.unsetLabel!==!1&&t.updateLabel(a,null,null,{removeShape:!1})});function o(s){var c=s.context,a=c.connection,u=a.label,l=J({},c.hints),p=c.newWaypoints||a.waypoints,h=c.oldWaypoints;return typeof l.startChanged>"u"&&(l.startChanged=!!l.connectionStart),typeof l.endChanged>"u"&&(l.endChanged=!!l.connectionEnd),qI(u,p,h,l)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(s){var c=s.context,a=c.hints||{};if(a.labelBehavior!==!1){var u=c.connection,l=u.label,p;!l||!l.parent||(p=o(s),t.moveShape(l,p))}}),this.postExecute(["shape.replace"],function(s){var c=s.context,a=c.newShape,u=c.oldShape,l=ie(a);l&&Br(l)&&u.label&&a.label&&(a.label.x=u.label.x,a.label.y=u.label.y)}),this.postExecute("shape.resize",function(s){var c=s.context,a=c.shape,u=c.newBounds,l=c.oldBounds;if(Cc(a)){var p=a.label,h=Se(p),d=a2(l),f=o2(h,d),g=r2(f,l,u);t.moveShape(p,g)}})}me(Sd,oe);Sd.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function r2(e,t,n){var i=ls(e,t,n);return vi(Fn(i,e))}function o2(e,t){if(t.length){var n=s2(e,t);return rd(e,n)}}function a2(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function s2(e,t){var n=t.map(function(r){return{line:r,distance:u0(e,r)}}),i=ii(n,"distance");return i[0].line}function l2(e,t,n,i){return L0(e,t,n,i).point}function Cd(e,t){oe.call(this,e);function n(i,r){var o=i.context,s=o.connection,c=J({},o.hints),a=o.newWaypoints||s.waypoints,u=o.oldWaypoints;return typeof c.startChanged>"u"&&(c.startChanged=!!c.connectionStart),typeof c.endChanged>"u"&&(c.endChanged=!!c.connectionEnd),l2(r,a,u,c)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,s=o.outgoing,c=o.incoming;c.forEach(function(a){var u=a.waypoints[a.waypoints.length-1],l=n(i,u),p=[].concat(a.waypoints.slice(0,-1),[l]);t.updateWaypoints(a,p)}),s.forEach(function(a){var u=a.waypoints[0],l=n(i,u),p=[].concat([l],a.waypoints.slice(1));t.updateWaypoints(a,p)})}),this.postExecute(["connection.move"],function(i){var r=i.context,o=r.connection,s=o.outgoing,c=o.incoming,a=r.delta;c.forEach(function(u){var l=u.waypoints[u.waypoints.length-1],p={x:l.x+a.x,y:l.y+a.y},h=[].concat(u.waypoints.slice(0,-1),[p]);t.updateWaypoints(u,h)}),s.forEach(function(u){var l=u.waypoints[0],p={x:l.x+a.x,y:l.y+a.y},h=[].concat([p],u.waypoints.slice(1));t.updateWaypoints(u,h)})})}me(Cd,oe);Cd.$inject=["eventBus","modeling"];function zc(e,t,n){var i=Uc(e),r=O0(i,t),o=i[0];return r.length?r[r.length-1]:ls(o.original||o,n,t)}function Vc(e,t,n){var i=Uc(e),r=O0(i,t),o=i[i.length-1];return r.length?r[0]:ls(o.original||o,n,t)}function Ad(e,t,n){var i=Uc(e),r=P0(t,n),o=i[0];return ls(o.original||o,r,t)}function Td(e,t,n){var i=Uc(e),r=P0(t,n),o=i[i.length-1];return ls(o.original||o,r,t)}function P0(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Uc(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function O0(e,t){var n=jt(e,u2);return $e(n,function(i){return c2(i,t)})}function c2(e,t){return Zt(t,e,1)==="intersect"}function u2(e){return e.original||e}function Md(e,t){oe.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(p2(i,r)){var o=h2(i);o.incoming.forEach(function(s){var c=Vc(s,r,i);t.reconnectEnd(s,r,c)}),o.outgoing.forEach(function(s){var c=zc(s,r,i);t.reconnectStart(s,r,c)})}},!0)}Md.$inject=["eventBus","modeling"];me(Md,oe);function p2(e,t){return B(e,"bpmn:Participant")&&Ne(e)&&B(t,"bpmn:Participant")&&!Ne(t)}function h2(e){var t=Ja([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){B(o,"bpmn:MessageFlow")&&n.push(o)}),r.outgoing.forEach(function(o){B(o,"bpmn:MessageFlow")&&i.push(o)}))},[]),{incoming:n,outgoing:i}}const d2=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function N0(e){const t=ie(e);if(!B(t,"bpmn:BoundaryEvent")&&!(B(t,"bpmn:StartEvent")&&Yt(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:d2.some(i=>B(n[0],i))}function B0(e){return B(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function $d(e,t){e.invoke(oe,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,r=n.context.newShape,o=n.context.hints;if(!N0(r))return;const s=B0(r);if(o.targetElement&&o.targetElement[s]!==void 0)return;const a=ie(i).get(s),u=ie(r).get(s);a!==u&&t.updateProperties(r,{[s]:a})})}$d.$inject=["injector","modeling"];me($d,oe);function Rd(e,t){oe.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=je(i),o=r&&r.get("label"),s=o&&o.get("bounds");s&&t.updateModdleProperties(i,o,{bounds:void 0})},!0)}me(Rd,oe);Rd.$inject=["eventBus","modeling"];function Id(e,t,n){oe.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],s=r.outgoing[0];if(!(!B(o,"bpmn:SequenceFlow")||!B(s,"bpmn:SequenceFlow"))&&t.canConnect(o.source,s.target,o)){var c=f2(o.waypoints,s.waypoints);n.reconnectEnd(o,s.target,c)}}})}me(Id,oe);Id.$inject=["eventBus","bpmnRules","modeling"];function ho(e){return e.original||e}function f2(e,t){var n=jp(ho(e[e.length-2]),ho(e[e.length-1]),ho(t[1]),ho(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[ho(e[0]),ho(t[t.length-1])]}function kd(e,t){oe.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;B(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;if(i&&!i.businessObject.participants.length){var r=t.makeProcess(),o=i.children.slice();t.moveElements(o,{x:0,y:0},r)}},!0)}kd.$inject=["eventBus","modeling"];me(kd,oe);function Ld(e,t,n,i){oe.call(this,e);var r=i.get("dragging",!1);function o(a){var u=a.source,l=a.target,p=a.parent;if(p){var h,d;B(a,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(u,l)||(d=!0),n.canConnectMessageFlow(u,l)&&(h="bpmn:MessageFlow")),B(a,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(u,l)||(d=!0),n.canConnectSequenceFlow(u,l)&&(h="bpmn:SequenceFlow")),d&&t.removeConnection(a),h&&t.connect(u,l,{type:h,waypoints:a.waypoints.slice()})}}function s(a){var u=a.context,l=u.connection,p=u.newSource||l.source,h=u.newTarget||l.target,d,f;d=n.canConnect(p,h),!(!d||d.type===l.type)&&(f=t.connect(p,h,{type:d.type,associationDirection:d.associationDirection,waypoints:l.waypoints.slice()}),l.parent&&t.removeConnection(l),u.connection=f,r&&c(l,f))}function c(a,u){var l=r.context(),p=l&&l.payload.previousSelection,h;!p||!p.length||(h=p.indexOf(a),h!==-1&&p.splice(h,1,u))}this.postExecuted("elements.move",function(a){var u=a.closure,l=u.allConnections;Z(l,o)},!0),this.preExecute("connection.reconnect",s),this.postExecuted("element.updateProperties",function(a){var u=a.context,l=u.properties,p=u.element,h=p.businessObject,d;l.default&&(d=Be(p.outgoing,Bn({id:p.businessObject.default.id})),d&&t.updateProperties(d,{conditionExpression:void 0})),l.conditionExpression&&h.sourceRef.default===h&&t.updateProperties(p.source,{default:void 0})})}me(Ld,oe);Ld.$inject=["eventBus","modeling","bpmnRules","injector"];function Yc(e,t,n,i,r,o){i.invoke(oe,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(s){var c=s.context,a=c.parent,u=c.elements,l=un(u,function(p,h){var d=t.canReplace([h],h.host||h.parent||a);return d?p.concat(d.replacements):p},[]);l.length&&this._replaceElements(u,l)},this),this.postExecuted(["elements.move"],500,function(s){var c=s.context,a=c.newParent,u=c.newHost,l=[];Z(c.closure.topLevel,function(h){Yt(h)?l=l.concat(h.children):l=l.concat(h)}),l.length===1&&u&&(a=u);var p=t.canReplace(l,a);p&&this._replaceElements(l,p.replacements,u)},this),this.postExecute(["shape.replace"],1500,function(s){var c=s.context,a=c.oldShape,u=c.newShape,l=a.attachers,p;l&&l.length&&(p=t.canReplace(l,u),this._replaceElements(l,p.replacements))},this),this.postExecuted(["shape.replace"],1500,function(s){var c=s.context,a=c.oldShape,u=c.newShape;r.unclaimId(a.businessObject.id,a.businessObject),r.updateProperties(u,{id:a.id})})}me(Yc,oe);Yc.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;Z(t,function(o){var s={type:o.newElementType},c=n.get(o.oldElementId),a=e.indexOf(c);e[a]=i.replaceElement(c,s,{select:!1})}),t&&r.select(e)};Yc.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var g2=1500,m2={width:140,height:120},Dd={width:300,height:60},Pd={width:60,height:300},Cl={width:300,height:150},Al={width:150,height:300},F0={width:140,height:120},j0={width:50,height:30};function H0(e){e.on("resize.start",g2,function(t){var n=t.context,i=n.shape,r=n.direction,o=n.balanced;(B(i,"bpmn:Lane")||B(i,"bpmn:Participant"))&&(n.resizeConstraints=_2(i,r,o)),B(i,"bpmn:SubProcess")&&Ne(i)&&(n.minDimensions=F0),B(i,"bpmn:TextAnnotation")&&(n.minDimensions=j0)})}H0.$inject=["eventBus"];var Hi=Math.abs,v2=Math.min,y2=Math.max;function W0(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function fo(e,t,n){return W0(e,t,n,v2)}function go(e,t,n){return W0(e,t,n,y2)}var b2={top:20,left:50,right:20,bottom:20},w2={top:50,left:20,right:20,bottom:20};function _2(e,t,n){var i=En(e),r=!0,o=!0,s=Wc(i,[i]),c=be(e),a={},u={},l=Lt(e),p=l?Dd:Pd;/n/.test(t)?u.top=c.bottom-p.height:/e/.test(t)?u.right=c.left+p.width:/s/.test(t)?u.bottom=c.top+p.height:/w/.test(t)&&(u.left=c.right-p.width),s.forEach(function(f){var g=be(f);l?(g.top<c.top-10&&(r=!1),g.bottom>c.bottom+10&&(o=!1)):(g.left<c.left-10&&(r=!1),g.right>c.right+10&&(o=!1)),/n/.test(t)&&(n&&Hi(c.top-g.bottom)<10&&go(a,"top",g.top+p.height),Hi(c.top-g.top)<5&&fo(u,"top",g.bottom-p.height)),/e/.test(t)&&(n&&Hi(c.right-g.left)<10&&fo(a,"right",g.right-p.width),Hi(c.right-g.right)<5&&go(u,"right",g.left+p.width)),/s/.test(t)&&(n&&Hi(c.bottom-g.top)<10&&fo(a,"bottom",g.bottom-p.height),Hi(c.bottom-g.bottom)<5&&go(u,"bottom",g.top+p.height)),/w/.test(t)&&(n&&Hi(c.left-g.right)<10&&go(a,"left",g.left+p.width),Hi(c.left-g.left)<5&&fo(u,"left",g.right-p.width))});var h=i.children.filter(function(f){return!f.hidden&&!f.waypoints&&(B(f,"bpmn:FlowElement")||B(f,"bpmn:Artifact"))}),d=l?b2:w2;return h.forEach(function(f){var g=be(f);/n/.test(t)&&(!l||r)&&fo(u,"top",g.top-d.top),/e/.test(t)&&(l||o)&&go(u,"right",g.right+d.right),/s/.test(t)&&(!l||o)&&go(u,"bottom",g.bottom+d.bottom),/w/.test(t)&&(l||r)&&fo(u,"left",g.left-d.left)}),{min:u,max:a}}var Em=1001;function G0(e,t){e.on("resize.start",Em+500,function(n){var i=n.context,r=i.shape;(B(r,"bpmn:Lane")||B(r,"bpmn:Participant"))&&(i.balanced=!Ia(n))}),e.on("resize.end",Em,function(n){var i=n.context,r=i.shape,o=i.canExecute,s=i.newBounds;if(B(r,"bpmn:Lane")||B(r,"bpmn:Participant"))return o&&(s=kb(s),t.resizeLane(r,s,i.balanced)),!1})}G0.$inject=["eventBus","modeling"];var x2=500;function Od(e,t,n,i,r){n.invoke(oe,this);function o(l){return Re(l,["bpmn:ReceiveTask","bpmn:SendTask"])||E2(l,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function s(l){var p=e.getDefinitions(),h=p.get("rootElements");return!!Be(h,Bn({id:l.id}))}function c(l){if(B(l,"bpmn:ErrorEventDefinition"))return"errorRef";if(B(l,"bpmn:EscalationEventDefinition"))return"escalationRef";if(B(l,"bpmn:MessageEventDefinition"))return"messageRef";if(B(l,"bpmn:SignalEventDefinition"))return"signalRef"}function a(l){if(Re(l,["bpmn:ReceiveTask","bpmn:SendTask"]))return l.get("messageRef");var p=l.get("eventDefinitions"),h=p[0];return h.get(c(h))}function u(l,p){if(Re(l,["bpmn:ReceiveTask","bpmn:SendTask"]))return l.set("messageRef",p);var h=l.get("eventDefinitions"),d=h[0];return d.set(c(d),p)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(l){var p=l.shape||l.element;if(o(p)){var h=ie(p),d=a(h),f;d&&!s(d)&&(f=e.getDefinitions().get("rootElements"),Tt(f,d),l.addedRootElement=d)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(l){var p=l.addedRootElement;if(p){var h=e.getDefinitions().get("rootElements");wt(h,p)}},!0),t.on("copyPaste.copyElement",function(l){var p=l.descriptor,h=l.element;if(!(h.labelTarget||!o(h))){var d=ie(h),f=a(d);f&&(p.referencedRootElement=f)}}),t.on("copyPaste.pasteElement",x2,function(l){var p=l.descriptor,h=p.businessObject,d=p.referencedRootElement;d&&(s(d)||(d=i.copyElement(d,r.create(d.$type))),u(h,d),delete p.referencedRootElement)})}Od.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];me(Od,oe);function E2(e,t){return xe(t)||(t=[t]),qt(t,function(n){return zo(e,n)})}var z0=Math.max;function V0(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,o={};return Z(n,function(s){var c=s.id;B(s,"bpmn:Participant")&&(o[c]=C2(s,i,r)),B(s,"bpmn:Lane")&&(o[c]=Lt(s)?Dd:Pd),B(s,"bpmn:SubProcess")&&Ne(s)&&(o[c]=F0),B(s,"bpmn:TextAnnotation")&&(o[c]=j0),B(s,"bpmn:Group")&&(o[c]=m2)}),o})}V0.$inject=["eventBus"];function S2(e){return e==="x"}function C2(e,t,n){var i=Lt(e);if(!M2(e))return i?Cl:Al;var r=S2(t),o={};return r?i?o=Cl:o={width:T2(e,n,r),height:Al.height}:i?o={width:Cl.width,height:A2(e,n,r)}:o=Al,o}function A2(e,t,n){var i;return i=$2(e,t,n),z0(Cl.height,i)}function T2(e,t,n){var i;return i=R2(e,t,n),z0(Al.width,i)}function M2(e){return!!ki(e).length}function $2(e,t,n){var i=ki(e),r;return r=Nd(i,t,n),e.height-r.height+Dd.height}function R2(e,t,n){var i=ki(e),r;return r=Nd(i,t,n),e.width-r.width+Pd.width}function Nd(e,t,n){var i,r,o;for(i=0;i<e.length;i++)if(r=e[i],!n&&t>=r.y&&t<=r.y+r.height||n&&t>=r.x&&t<=r.x+r.width)return o=ki(r),o.length?Nd(o,t,n):r}var Sm=400,I2=600,Cm={x:180,y:160};function ur(e,t,n,i,r,o,s){oe.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=s;var c=this;function a(p){return B(p,"bpmn:SubProcess")&&!Ne(p)}function u(p){var h=p.shape,d=p.newRootElement,f=ie(h);d=c._addDiagram(d||f),p.newRootElement=e.addRootElement(d)}function l(p){var h=p.shape,d=ie(h);c._removeDiagram(d);var f=p.newRootElement=s.get(di(d));e.removeRootElement(f)}this.executed("shape.create",function(p){var h=p.shape;a(h)&&u(p)},!0),this.postExecuted("shape.create",function(p){var h=p.shape,d=p.newRootElement;!d||!h.children||(c._showRecursively(h.children),c._moveChildrenToShape(h,d))},!0),this.reverted("shape.create",function(p){var h=p.shape;a(h)&&l(p)},!0),this.preExecuted("shape.delete",function(p){var h=p.shape;if(a(h)){var d=s.get(di(h));d&&n.removeElements(d.children.slice())}},!0),this.executed("shape.delete",function(p){var h=p.shape;a(h)&&l(p)},!0),this.reverted("shape.delete",function(p){var h=p.shape;a(h)&&u(p)},!0),this.preExecuted("shape.replace",function(p){var h=p.oldShape,d=p.newShape;!a(h)||!a(d)||(p.oldRoot=e.removeRootElement(di(h)))},!0),this.postExecuted("shape.replace",function(p){var h=p.newShape,d=p.oldRoot,f=e.findRoot(di(h));if(!(!d||!f)){var g=d.children;n.moveElements(g,{x:0,y:0},f)}},!0),this.executed("element.updateProperties",function(p){var h=p.element;if(B(h,"bpmn:SubProcess")){var d=p.properties,f=p.oldProperties,g=f.id,m=d.id;if(g!==m){if(_l(h)){s.updateId(h,Er(m)),s.updateId(g,m);return}var w=s.get(Er(g));w&&s.updateId(Er(g),Er(m))}}},!0),this.reverted("element.updateProperties",function(p){var h=p.element;if(B(h,"bpmn:SubProcess")){var d=p.properties,f=p.oldProperties,g=f.id,m=d.id;if(g!==m){if(_l(h)){s.updateId(h,Er(g)),s.updateId(m,g);return}var w=s.get(Er(m));w&&s.updateId(w,Er(g))}}},!0),t.on("element.changed",function(p){var h=p.element;if(_l(h)){var d=h,f=s.get(fg(d));!f||f===d||t.fire("element.changed",{element:f})}}),this.executed("shape.toggleCollapse",Sm,function(p){var h=p.shape;B(h,"bpmn:SubProcess")&&(Ne(h)?l(p):(u(p),c._showRecursively(h.children)))},!0),this.reverted("shape.toggleCollapse",Sm,function(p){var h=p.shape;B(h,"bpmn:SubProcess")&&(Ne(h)?l(p):(u(p),c._showRecursively(h.children)))},!0),this.postExecuted("shape.toggleCollapse",I2,function(p){var h=p.shape;if(B(h,"bpmn:SubProcess")){var d=p.newRootElement;d&&(Ne(h)?c._moveChildrenToShape(d,h):c._moveChildrenToShape(h,d))}},!0),t.on("copyPaste.createTree",function(p){var h=p.element,d=p.children;if(a(h)){var f=di(h),g=s.get(f);g&&d.push.apply(d,g.children)}}),t.on("copyPaste.copyElement",function(p){var h=p.descriptor,d=p.element,f=p.elements,g=d.parent,m=B(je(g),"bpmndi:BPMNPlane");if(m){var w=fg(g),_=Be(f,function(E){return E.id===w});_&&(h.parent=_.id)}}),t.on("copyPaste.pasteElement",function(p){var h=p.descriptor;h.parent&&(a(h.parent)||h.parent.hidden)&&(h.hidden=!0)})}me(ur,oe);ur.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(u,l){return l.label&&l.label.parent!==e?u.concat(l.label):u},[]));var o=i.filter(function(u){return!u.hidden});if(!o.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var s=kt(o);if(!t.x)r={x:Cm.x-s.x,y:Cm.y-s.y};else{var c=Se(t),a=Se(s);r={x:c.x-a.x,y:c.y-a.y}}n.moveElements(i,r,t,{autoResize:!1})}};ur.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i};ur.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};ur.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var o=n.createRoot({id:di(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return o};ur.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=Be(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};ur.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function Bd(e,t){e.invoke(oe,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!B(r,"bpmn:SubProcess")||!(B(i,"bpmn:Task")||B(i,"bpmn:CallActivity"))||!Ne(r))){var o=k2(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}Bd.$inject=["injector","modeling"];me(Bd,oe);function k2(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function Fd(e){oe.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;B(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&B(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}me(Fd,oe);Fd.$inject=["eventBus"];function jd(e,t){oe.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(Ne(i))return;var r=Ja(i);r.forEach(function(s){var c=s.incoming.slice(),a=s.outgoing.slice();Z(c,function(u){o(u,!0)}),Z(a,function(u){o(u,!1)})});function o(s,c){r.indexOf(s.source)!==-1&&r.indexOf(s.target)!==-1||(c?t.reconnectEnd(s,i,Se(i)):t.reconnectStart(s,i,Se(i)))}},!0)}me(jd,oe);jd.$inject=["eventBus","modeling"];var Pu=500;function Hd(e,t,n){oe.call(this,e);function i(s){s.length&&s.forEach(function(c){c.type==="label"&&!c.businessObject.name&&(c.hidden=!0)})}function r(s,c){var a=s.children,u=c,l,p;return l=L2(a).concat([s]),p=M0(l),p?(u.width=Math.max(p.width,u.width),u.height=Math.max(p.height,u.height),u.x=p.x+(p.width-u.width)/2,u.y=p.y+(p.height-u.height)/2):(u.x=s.x+(s.width-u.width)/2,u.y=s.y+(s.height-u.height)/2),u}function o(s,c){return{x:s.x+(s.width-c.width)/2,y:s.y+(s.height-c.height)/2,width:c.width,height:c.height}}this.executed(["shape.toggleCollapse"],Pu,function(s){var c=s.context,a=c.shape;B(a,"bpmn:SubProcess")&&(a.collapsed?je(a).isExpanded=!1:(i(a.children),je(a).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],Pu,function(s){var c=s.context,a=c.shape;a.collapsed?je(a).isExpanded=!1:je(a).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],Pu,function(s){var c=s.context.shape,a=t.getDefaultSize(c),u;c.collapsed?u=o(c,a):u=r(c,a),n.resizeShape(c,u,null,{autoResize:c.collapsed?!1:"nwse"})})}me(Hd,oe);Hd.$inject=["eventBus","elementFactory","modeling"];function L2(e){return e.filter(function(t){return!t.hidden})}function Wd(e,t,n,i){t.invoke(oe,this),this.preExecute("shape.delete",function(r){var o=r.context,s=o.shape,c=s.businessObject;Ge(s)||(B(s,"bpmn:Participant")&&Ne(s)&&n.ids.unclaim(c.processRef.id),i.unclaimId(c.id,c))}),this.preExecute("connection.delete",function(r){var o=r.context,s=o.connection,c=s.businessObject;i.unclaimId(c.id,c)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;B(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}me(Wd,oe);Wd.$inject=["canvas","injector","moddle","modeling"];function Gd(e,t){oe.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,o=r.source;D2(r,o)&&t.updateProperties(o,{default:null})})}me(Gd,oe);Gd.$inject=["eventBus","modeling"];function D2(e,t){if(!B(e,"bpmn:SequenceFlow"))return!1;var n=ie(t),i=ie(e);return n.get("default")===i}var P2=500,O2=5e3;function zd(e,t){oe.call(this,e);var n;function i(){return n=n||new N2,n.enter(),n}function r(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var c=n.leave();return c&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),c}var s=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(s,O2,function(c){i()}),this.postExecuted(s,P2,function(c){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(c){var a=c.context,u=a.shape,l=r();u.labelTarget||(B(u,"bpmn:Lane")&&l.addLane(u),B(u,"bpmn:FlowNode")&&l.addFlowNode(u))})}zd.$inject=["eventBus","modeling"];me(zd,oe);function N2(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function Vd(e,t){oe.call(this,e),this.postExecuted("elements.create",function(n){const i=n.context,r=i.elements;for(const o of r)B2(o)&&!j2(o)&&t.updateProperties(o,{isForCompensation:void 0})})}me(Vd,oe);Vd.$inject=["eventBus","modeling"];function B2(e){const t=ie(e);return t&&t.isForCompensation}function F2(e){return e&&B(e,"bpmn:BoundaryEvent")&&zo(e,"bpmn:CompensateEventDefinition")}function j2(e){return e.incoming.filter(n=>F2(n.source)).length>0}const H2={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",cd],appendBehavior:["type",ud],associationBehavior:["type",pd],attachEventBehavior:["type",jc],boundaryEventBehavior:["type",hd],compensateBoundaryEventBehaviour:["type",dd],createBehavior:["type",fd],createDataObjectBehavior:["type",gd],createParticipantBehavior:["type",md],dataInputAssociationBehavior:["type",vd],dataStoreBehavior:["type",yd],deleteLaneBehavior:["type",bd],detachEventBehavior:["type",Gc],dropOnFlowBehavior:["type",wd],eventBasedGatewayBehavior:["type",_d],fixHoverBehavior:["type",$0],groupBehavior:["type",xd],importDockingFix:["type",R0],isHorizontalFix:["type",Ed],labelBehavior:["type",Sd],layoutConnectionBehavior:["type",Cd],messageFlowBehavior:["type",Md],nonInterruptingBehavior:["type",$d],removeElementBehavior:["type",Id],removeEmbeddedLabelBoundsBehavior:["type",Rd],removeParticipantBehavior:["type",kd],replaceConnectionBehavior:["type",Ld],replaceElementBehaviour:["type",Yc],resizeBehavior:["type",H0],resizeLaneBehavior:["type",G0],rootElementReferenceBehavior:["type",Od],spaceToolBehavior:["type",V0],subProcessPlaneBehavior:["type",ur],subProcessStartEventBehavior:["type",Bd],textAnnotationBehavior:["type",Fd],toggleCollapseConnectionBehaviour:["type",jd],toggleElementCollapseBehaviour:["type",Hd],unclaimIdBehavior:["type",Wd],unsetDefaultFlowBehavior:["type",Gd],updateFlowNodeRefsBehavior:["type",zd],setCompensationActivityAfterPasteBehavior:["type",Vd]};function U0(e,t){var n=Zt(e,t,-15);return n!=="intersect"?n:null}function Gt(e){Rn.call(this,e)}me(Gt,Rn);Gt.$inject=["eventBus"];Gt.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return W2(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,o=i.targetAttach;if(o)return!1;r&&(n.parent=r);try{return Tl(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return Tl(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return t_(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return et(i)&&!Ul(t,i)?!1:jr(t,function(r){return et(r)?Tl(r.source,r.target,r):r.host?Ta(r,r.host,null,n):zp(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return Ta(n,t,null,i)||q0(n,t,i)||e_(n,t)||Ul(n,t)}),this.addRule("shape.create",function(e){return zp(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return Ta(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return a_(n,t)})};Gt.prototype.canConnectMessageFlow=r_;Gt.prototype.canConnectSequenceFlow=o_;Gt.prototype.canConnectDataAssociation=Yd;Gt.prototype.canConnectAssociation=n_;Gt.prototype.canConnectCompensationAssociation=i_;Gt.prototype.canMove=e_;Gt.prototype.canAttach=Ta;Gt.prototype.canReplace=q0;Gt.prototype.canDrop=$o;Gt.prototype.canInsert=Ul;Gt.prototype.canCreate=zp;Gt.prototype.canConnect=Tl;Gt.prototype.canResize=t_;Gt.prototype.canCopy=a_;function W2(e){return Hp(e)?null:Re(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function Hp(e){return!e||Ge(e)}function G2(e,t){return e===t}function Am(e){do{if(B(e,"bpmn:Process"))return ie(e);if(B(e,"bpmn:Participant"))return ie(e).processRef||ie(e)}while(e=e.parent)}function Wp(e){return B(e,"bpmn:TextAnnotation")}function Ud(e){return B(e,"bpmn:Group")&&!e.labelTarget}function Y0(e){return B(e,"bpmn:BoundaryEvent")&&ti(e,"bpmn:CompensateEventDefinition")}function Zc(e){return ie(e).isForCompensation}function z2(e,t){var n=Am(e),i=Am(t);return n===i}function V2(e){return B(e,"bpmn:InteractionNode")&&!B(e,"bpmn:BoundaryEvent")&&(!B(e,"bpmn:Event")||B(e,"bpmn:ThrowEvent")&&X0(e,"bpmn:MessageEventDefinition"))}function U2(e){return B(e,"bpmn:InteractionNode")&&!Zc(e)&&(!B(e,"bpmn:Event")||B(e,"bpmn:CatchEvent")&&X0(e,"bpmn:MessageEventDefinition"))&&!(B(e,"bpmn:BoundaryEvent")&&!ti(e,"bpmn:MessageEventDefinition"))}function Tm(e){for(var t=e;t=t.parent;){if(B(t,"bpmn:FlowElementsContainer"))return ie(t);if(B(t,"bpmn:Participant"))return ie(t).processRef}return null}function Z0(e,t){var n=Tm(e),i=Tm(t);return n===i}function ti(e,t){var n=ie(e);return!!Be(n.eventDefinitions||[],function(i){return B(i,t)})}function X0(e,t){var n=ie(e);return(n.eventDefinitions||[]).every(function(i){return B(i,t)})}function Y2(e){return B(e,"bpmn:FlowNode")&&!B(e,"bpmn:EndEvent")&&!Yt(e)&&!(B(e,"bpmn:IntermediateThrowEvent")&&ti(e,"bpmn:LinkEventDefinition"))&&!Y0(e)&&!Zc(e)}function Z2(e){return B(e,"bpmn:FlowNode")&&!B(e,"bpmn:StartEvent")&&!B(e,"bpmn:BoundaryEvent")&&!Yt(e)&&!(B(e,"bpmn:IntermediateCatchEvent")&&ti(e,"bpmn:LinkEventDefinition"))&&!Zc(e)}function X2(e){return B(e,"bpmn:ReceiveTask")||B(e,"bpmn:IntermediateCatchEvent")&&(ti(e,"bpmn:MessageEventDefinition")||ti(e,"bpmn:TimerEventDefinition")||ti(e,"bpmn:ConditionalEventDefinition")||ti(e,"bpmn:SignalEventDefinition"))}function K2(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function Gp(e,t){var n=K2(t);return n.indexOf(e)!==-1}function Tl(e,t,n){if(Hp(e)||Hp(t))return null;if(!B(n,"bpmn:DataAssociation")){if(r_(e,t))return{type:"bpmn:MessageFlow"};if(o_(e,t))return{type:"bpmn:SequenceFlow"}}var i=Yd(e,t);return i||(i_(e,t)?{type:"bpmn:Association",associationDirection:"One"}:n_(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function $o(e,t){return Ge(e)||Ud(e)?!0:B(t,"bpmn:Participant")&&!Ne(t)?!1:B(e,"bpmn:Participant")?B(t,"bpmn:Process")||B(t,"bpmn:Collaboration"):Re(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:B(e,"bpmn:Lane")?B(t,"bpmn:Participant")||B(t,"bpmn:Lane"):B(e,"bpmn:BoundaryEvent")&&!Q2(e)?!1:B(e,"bpmn:FlowElement")&&!B(e,"bpmn:DataStoreReference")?B(t,"bpmn:FlowElementsContainer")?Ne(t):Re(t,["bpmn:Participant","bpmn:Lane"]):B(e,"bpmn:DataStoreReference")&&B(t,"bpmn:Collaboration")?qt(ie(t).get("participants"),function(n){return!!n.get("processRef")}):Re(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Re(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):B(e,"bpmn:MessageFlow")?B(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function Q2(e){return ie(e).cancelActivity&&(K0(e)||Q0(e))}function J2(e){return!Ge(e)&&B(e,"bpmn:BoundaryEvent")}function q2(e){return B(e,"bpmn:Lane")}function ek(e){return J2(e)||B(e,"bpmn:IntermediateThrowEvent")&&K0(e)?!0:B(e,"bpmn:IntermediateCatchEvent")&&Q0(e)}function K0(e){var t=ie(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function Q0(e){return J0(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function J0(e,t){return t.some(function(n){return ti(e,n)})}function tk(e){return B(e,"bpmn:ReceiveTask")&&Be(e.incoming,function(t){return B(t.source,"bpmn:EventBasedGateway")})}function Ta(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Ge(r)||!ek(r)||Yt(t)||!B(t,"bpmn:Activity")||Zc(t)||i&&!U0(i,t)||tk(t)?!1:"attach"}function q0(e,t,n){if(!t)return!1;var i={replacements:[]};return Z(e,function(r){Yt(t)||B(r,"bpmn:StartEvent")&&r.type!=="label"&&$o(r,t)&&(VT(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(UT(r)||YT(r)||ZT(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),J0(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&B(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),B(t,"bpmn:Transaction")||ti(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(B(r,"bpmn:EndEvent")&&$o(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),B(r,"bpmn:BoundaryEvent")&&Ta(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function e_(e,t){return qt(e,q2)?!1:t?e.every(function(n){return $o(n,t)}):!0}function zp(e,t,n,i){return t?Ge(e)||Ud(e)?!0:G2(n,t)||n&&Gp(n,t)?!1:$o(e,t)||Ul(e,t):!1}function t_(e,t){return B(e,"bpmn:SubProcess")?Ne(e)&&(!t||t.width>=100&&t.height>=80):!!(B(e,"bpmn:Lane")||B(e,"bpmn:Participant")||Wp(e)||Ud(e))}function nk(e,t){var n=Wp(e),i=Wp(t);return(n||i)&&n!==i}function n_(e,t){return Gp(t,e)||Gp(e,t)?!1:nk(e,t)?!0:!!Yd(e,t)}function i_(e,t){return Z0(e,t)&&Y0(e)&&B(t,"bpmn:Activity")&&!rk(t,e)&&!Yt(t)}function r_(e,t){return Mm(e)&&!Mm(t)?!1:V2(e)&&U2(t)&&!z2(e,t)}function o_(e,t){return Y2(e)&&Z2(t)&&Z0(e,t)&&!(B(e,"bpmn:EventBasedGateway")&&!X2(t))}function Yd(e,t){return Re(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Re(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:Re(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Re(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Ul(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:Re(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Ge(t)&&B(e,"bpmn:FlowNode")&&!B(e,"bpmn:BoundaryEvent")&&$o(e,t.parent)}function ik(e,t){return e&&t&&e.indexOf(t)!==-1}function a_(e,t){return Ge(t)?!0:!(B(t,"bpmn:Lane")&&!ik(e,t.parent))}function Mm(e){return To(e,"bpmn:Process")||To(e,"bpmn:Collaboration")}function rk(e,t){return e.attachers.includes(t)}const ok={__depends__:[ci],__init__:["bpmnRules"],bpmnRules:["type",Gt]};var ak=2e3;function s_(e,t){e.on("saveXML.start",ak,n);function n(){var i=t.getRootElements();Z(i,function(r){var o=je(r),s,c;s=Ja([r],!1),s=$e(s,function(a){return a!==r&&!a.labelTarget}),c=jt(s,je),o.set("planeElement",c)})}}s_.$inject=["eventBus","canvas"];const sk={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",s_]};function Xc(e){oe.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,s=t.getOrdering(r,o);s&&(s.parent!==void 0&&(i.parent=s.parent),i.parentIndex=s.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,s=t.getOrdering(r,o);s&&(s.parent!==void 0&&(i.newParent=s.parent),i.newParentIndex=s.index)})}Xc.prototype.getOrdering=function(e,t){return null};me(Xc,oe);function Zd(e,t){Xc.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(s){if(s.labelTarget)return{level:10};var c=Be(n,function(a){return Re(s,[a.type])});return c&&c.order||{level:1}}function r(s){var c=s.order;if(c||(s.order=c=i(s)),!c)throw new Error(`no order for <${s.id}>`);return c}function o(s,c,a){for(var u=c;u&&!Re(u,a);)u=u.parent;if(!u)throw new Error(`no parent for <${s.id}> in <${c&&c.id}>`);return u}this.getOrdering=function(s,c){if(s.labelTarget||B(s,"bpmn:TextAnnotation"))return{parent:t.findRoot(c)||t.getRootElement(),index:-1};var a=r(s);a.containers&&(c=o(s,c,a.containers));var u=c.children.indexOf(s),l=Dy(c.children,function(p){return!s.labelTarget&&p.labelTarget?!1:a.level<r(p).level});return l!==-1&&u!==-1&&u<l&&(l-=1),{index:l,parent:c}}}Zd.$inject=["eventBus","canvas"];me(Zd,Xc);const lk={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",Zd]};function cs(){}cs.prototype.get=function(){return this._data};cs.prototype.set=function(e){this._data=e};cs.prototype.clear=function(){var e=this._data;return delete this._data,e};cs.prototype.isEmpty=function(){return!this._data};const ck={clipboard:["type",cs]};var uk="drop-ok",$m="drop-not-ok",Rm="attach-ok",Im="new-parent",km="create",pk=2e3;function l_(e,t,n,i,r){function o(a,u,l,p,h){if(!u)return!1;a=$e(a,function(_){var E=_.labelTarget;return!_.parent&&!(Ge(_)&&a.indexOf(E)!==-1)});var d=Be(a,function(_){return!et(_)}),f=!1,g=!1,m=!1;Dm(a)&&(f=r.allowed("shape.attach",{position:l,shape:d,target:u})),f||(Dm(a)?m=r.allowed("shape.create",{position:l,shape:d,source:p,target:u}):m=r.allowed("elements.create",{elements:a,position:l,target:u}));var w=h.connectionTarget;return m||f?(d&&p&&(g=r.allowed("connection.create",{source:w===p?d:p,target:w===p?p:d,hints:{targetParent:u,targetAttach:f}})),{attach:f,connect:g}):m===null||f===null?null:!1}function s(a,u){[Rm,uk,$m,Im].forEach(function(l){l===u?e.addMarker(a,l):e.removeMarker(a,l)})}n.on(["create.move","create.hover"],function(a){var u=a.context,l=u.elements,p=a.hover,h=u.source,d=u.hints||{};if(!p){u.canExecute=!1,u.target=null;return}Lm(a);var f={x:a.x,y:a.y},g=u.canExecute=p&&o(l,p,f,h,d);p&&g!==null&&(u.target=p,g&&g.attach?s(p,Rm):s(p,g?Im:$m))}),n.on(["create.end","create.out","create.cleanup"],function(a){var u=a.hover;u&&s(u,null)}),n.on("create.end",function(a){var u=a.context,l=u.source,p=u.shape,h=u.elements,d=u.target,f=u.canExecute,g=f&&f.attach,m=f&&f.connect,w=u.hints||{};if(f===!1||!d)return!1;Lm(a);var _={x:a.x,y:a.y};m?p=i.appendShape(l,p,_,d,{attach:g,connection:m===!0?{}:m,connectionTarget:w.connectionTarget}):(h=i.createElements(h,_,d,J({},w,{attach:g})),p=Be(h,function(E){return!et(E)})),J(u,{elements:h,shape:p}),J(a,{elements:h,shape:p})});function c(){var a=t.context();a&&a.prefix===km&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],pk,function(){n.off("elements.changed",c)})}),this.start=function(a,u,l){xe(u)||(u=[u]);var p=Be(u,function(f){return!et(f)});if(p){l=J({elements:u,hints:{},shape:p},l||{}),Z(u,function(f){he(f.x)||(f.x=0),he(f.y)||(f.y=0)});var h=$e(u,function(f){return!f.hidden}),d=kt(h);Z(u,function(f){et(f)&&(f.waypoints=jt(f.waypoints,function(g){return{x:g.x-d.x-d.width/2,y:g.y-d.y-d.height/2}})),J(f,{x:f.x-d.x-d.width/2,y:f.y-d.y-d.height/2})}),t.init(a,km,{cursor:"grabbing",autoActivate:!0,data:{shape:p,elements:u,context:l}})}}}l_.$inject=["canvas","dragging","eventBus","modeling","rules"];function Lm(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function Dm(e){return e&&e.length===1&&!et(e[0])}var hk=750;function c_(e,t,n,i,r){function o(s){var c=ue("g");te(c,r.cls("djs-drag-group",["no-events"]));var a=ue("g");return s.forEach(function(u){var l;u.hidden||(u.waypoints?(l=n._createContainer("connection",a),n.drawConnection(Pr(l),u)):(l=n._createContainer("shape",a),n.drawShape(Pr(l),u),Ft(l,u.x,u.y)),i.addDragger(u,c,l))}),c}t.on("create.move",hk,function(s){var c=s.hover,a=s.context,u=a.elements,l=a.dragGroup;l||(l=a.dragGroup=o(u));var p;c?(l.parentNode||(p=e.getActiveLayer(),de(p,l)),Ft(l,s.x,s.y)):Je(l)}),t.on("create.cleanup",function(s){var c=s.context,a=c.dragGroup;a&&Je(a)})}c_.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const Kc={__depends__:[Ri,Jo,ci,si],__init__:["create","createPreview"],create:["type",l_],createPreview:["type",c_]};function Xd(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}Xd.$inject=["eventBus"];Xd.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||dk(0,0)};function dk(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,s=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,s,!1,!1,!1,!1,0,null),n}const us={__init__:["mouse"],mouse:["type",Xd]};function Un(e,t,n,i,r,o,s,c){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=s,this._rules=c,r.on("copyPaste.copyElement",function(a){var u=a.descriptor,l=a.element,p=a.elements;u.priority=1,u.id=l.id;var h=Be(p,function(d){return d===l.parent});h&&(u.parent=l.parent.id),fk(l)&&(u.priority=2,u.host=l.host.id),et(l)&&(u.priority=3,u.source=l.source.id,u.target=l.target.id,u.waypoints=gk(l)),Ge(l)&&(u.priority=4,u.labelTarget=l.labelTarget.id),Z(["x","y","width","height"],function(d){he(l[d])&&(u[d]=l[d])}),u.hidden=l.hidden,u.collapsed=l.collapsed}),r.on("copyPaste.pasteElements",function(a){var u=a.hints;J(u,{createElementsBehavior:!1})})}Un.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Un.prototype.copy=function(e){var t,n;return xe(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(xe(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Un.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n})}};Un.prototype._paste=function(e,t,n,i){Z(e,function(o){he(o.x)||(o.x=0),he(o.y)||(o.y=0)});var r=kt(e);return Z(e,function(o){et(o)&&(o.waypoints=jt(o.waypoints,function(s){return{x:s.x-r.x-r.width/2,y:s.y-r.y-r.height/2}})),J(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,J({},i))};Un.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return Z(e,function(o,s){o=ii(o,"priority"),Z(o,function(c){var a=J({},Cn(c,["priority"]));i[c.parent]?a.parent=i[c.parent]:delete a.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:a});var u;if(et(a)){a.source=i[c.source],a.target=i[c.target],u=i[c.id]=t.createConnection(a),r.push(u);return}if(Ge(a)){a.labelTarget=i[a.labelTarget],u=i[c.id]=t.createLabel(a),r.push(u);return}a.host&&(a.host=i[a.host]),u=i[c.id]=t.createShape(a),r.push(u)})}),r};Un.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Cn(e,["id"]));return t};Un.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Cn(e,["id"]));return t};Un.prototype.createShape=function(e){var t=this._elementFactory.createShape(Cn(e,["id"]));return t};Un.prototype.hasRelations=function(e,t){var n,i,r;return!(et(e)&&(i=Be(t,Bn({id:e.source.id})),r=Be(t,Bn({id:e.target.id})),!i||!r)||Ge(e)&&(n=Be(t,Bn({id:e.labelTarget.id})),!n))};Un.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],o=bc(e);function s(u,l){return t.allowed("element.copy",{element:u,elements:l})}function c(u,l){var p=Be(r,function(h){return u===h.element});if(!p){r.push({element:u,depth:l});return}p.depth<l&&(r=a(p,r),r.push({element:p.element,depth:l}))}function a(u,l){var p=l.indexOf(u);return p!==-1&&l.splice(p,1),l}return Xr(o,function(u,l,p){if(Ge(u))return;Z(u.labels,function(f){c(f,p)});function h(f){f&&f.length&&Z(f,function(g){Z(g.labels,function(m){c(m,p)}),c(g,p)})}Z([u.attachers,u.incoming,u.outgoing],h),c(u,p);var d=[];return u.children&&(d=u.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:u,children:d}),d}),e=jt(r,function(u){return u.element}),r=jt(r,function(u){return u.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:u.descriptor,element:u.element,elements:e}),u}),r=ii(r,function(u){return u.descriptor.priority}),e=jt(r,function(u){return u.element}),Z(r,function(u){var l=u.depth;if(!n.hasRelations(u.element,e)){Om(u.element,e);return}if(!s(u.element,e)){Om(u.element,e);return}i[l]||(i[l]=[]),i[l].push(u.descriptor)}),i};function fk(e){return!!e.host}function gk(e){return jt(e.waypoints,function(t){return t=Pm(t),t.original&&(t.original=Pm(t.original)),t})}function Pm(e){return J({},e)}function Om(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const mk={__depends__:[ck,Kc,us,ci],__init__:["copyPaste"],copyPaste:["type",Un]};function Ou(e,t,n){xe(n)||(n=[n]),Z(n,function(i){Or(e[i])||(t[i]=e[i])})}var Nu=750;function u_(e,t,n){function i(a,u){var l=e.create(a.$type);return n.copyElement(a,l,null,u)}t.on("copyPaste.copyElement",Nu,function(a){var u=a.descriptor,l=a.element,p=ie(l);if(Ge(l))return u;var h=u.businessObject=i(p,!0),d=u.di=i(je(l),!0);d.bpmnElement=h,Ou(h,u,"name"),Ou(d,u,"isExpanded"),p.default&&(u.default=p.default.id)});var r="-bpmn-js-refs";function o(a){return a[r]=a[r]||{}}function s(a,u){a[r]=u}function c(a,u,l){var p=ie(a);return a.default&&(l[a.default]={element:p,property:"default"}),a.host&&(ie(a).attachedToRef=ie(u[a.host])),Cn(l,un(l,function(h,d,f){var g=d.element,m=d.property;return f===a.id&&(g.set(m,p),h.push(a.id)),h},[]))}t.on("copyPaste.pasteElement",function(a){var u=a.cache,l=a.descriptor,p=l.businessObject,h=l.di;if(Ge(l)){l.businessObject=ie(u[l.labelTarget]),l.di=je(u[l.labelTarget]);return}p=l.businessObject=i(p),h=l.di=i(h),h.bpmnElement=p,Ou(l,p,["isExpanded","name"]),l.type=p.$type}),t.on("copyPaste.copyElement",Nu,function(a){var u=a.descriptor,l=a.element;if(B(l,"bpmn:Participant")){var p=ie(l);p.processRef&&(u.processRef=i(p.processRef,!0))}}),t.on("copyPaste.pasteElement",function(a){var u=a.descriptor,l=u.processRef;l&&(u.processRef=i(l))}),t.on("copyPaste.pasteElement",Nu,function(a){var u=a.cache,l=a.descriptor;s(u,c(l,u,o(u)))})}u_.$inject=["bpmnFactory","eventBus","moddleCopy"];var vk=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function ps(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return ii(r,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=ht(r)&&r.$descriptor,s=i.propertyName;if(s&&vk.indexOf(s)!==-1||s&&o&&!Be(o.properties,Bn({name:s})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(yk(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}ps.$inject=["eventBus","bpmnFactory","moddle"];ps.prototype.copyElement=function(e,t,n,i=!1){var r=this;n&&!xe(n)&&(n=[n]),n=n||Vp(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return o===!1||(xe(o)&&(n=o),Z(n,function(s){var c;Ut(e,s)&&(c=e.get(s));var a=r.copyProperty(c,t,s,i);if(Pt(a)){var u=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:a,propertyName:s});u!==!1&&t.set(s,a)}})),t};ps.prototype.copyProperty=function(e,t,n,i=!1){var r=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(o!==!1){if(o)return ht(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var s=this._moddle.getPropertyDescriptor(t,n);if(!s.isReference)return s.isId?e&&this._copyId(e,t,i):xe(e)?un(e,function(c,a){return o=r.copyProperty(a,t,n,i),o?c.concat(o):c},[]):ht(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=r._bpmnFactory.create(e.$type),o.$parent=t,o=r.copyElement(e,o,null,i),o):e}};ps.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function Vp(e,t){return un(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function yk(e,t){return e&&ot(e.$instanceOf)&&e.$instanceOf(t)}const p_={__depends__:[mk],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",u_],moddleCopy:["type",ps]};var Nm=Math.round;function Kd(e,t){this._modeling=e,this._eventBus=t}Kd.$inject=["modeling","eventBus"];Kd.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,s=t.height||e.height,c=t.x||e.x,a=t.y||e.y,u=Nm(c+o/2),l=Nm(a+s/2),p=i.replaceShape(e,J({},t,{x:u,y:l,width:o,height:s}),n);return r.fire("replace.end",{element:e,newElement:p,hints:n}),p};function h_(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}h_.$inject=["selection","eventBus"];const bk={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",h_],replace:["type",Kd]};function wk(e,t,n){xe(n)||(n=[n]),Z(n,function(i){Or(e[i])||(t[i]=e[i])})}var _k=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function xk(e,t){var n=e&&Ut(e,"collapsed")?e.collapsed:!Ne(e),i;return t&&(Ut(t,"collapsed")||Ut(t,"isExpanded"))?i=Ut(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function d_(e,t,n,i,r,o){function s(c,a,u){u=u||{};var l=a.type,p=c.businessObject;if(Qs(p)&&l==="bpmn:SubProcess"&&xk(c,a))return i.toggleCollapse(c),c;var h=e.create(l),d={type:l,businessObject:h};d.di={},l==="bpmn:ExclusiveGateway"&&(d.di.isMarkerVisible=!0),wk(c.di,d.di,["fill","stroke","background-color","border-color","color"]);var f=Vp(p.$descriptor),g=Vp(h.$descriptor,!0),m=Ek(f,g);J(h,Wn(a,_k));var w=$e(m,function(y){return y==="eventDefinitions"?Bm(c,a.eventDefinitionType):y==="loopCharacteristics"?!Yt(h):Ut(h,y)||y==="processRef"&&a.isExpanded===!1||y==="triggeredByEvent"?!1:y==="isForCompensation"?!Yt(h):!0});if(h=n.copyElement(p,h,w),a.eventDefinitionType&&(Bm(h,a.eventDefinitionType)||(d.eventDefinitionType=a.eventDefinitionType,d.eventDefinitionAttrs=a.eventDefinitionAttrs)),B(p,"bpmn:Activity")){if(Qs(p))d.isExpanded=Ne(c);else if(a&&Ut(a,"isExpanded")){d.isExpanded=a.isExpanded;var _=t.getDefaultSize(h,{isExpanded:d.isExpanded});d.width=_.width,d.height=_.height,d.x=c.x-(d.width-c.width)/2,d.y=c.y-(d.height-c.height)/2}Ne(c)&&!B(p,"bpmn:Task")&&d.isExpanded&&(d.width=c.width,d.height=c.height)}if(Qs(p)&&!Qs(h)&&(u.moveChildren=!1),B(p,"bpmn:Participant")){a.isExpanded===!0?h.processRef=e.create("bpmn:Process"):u.moveChildren=!1;var E=Lt(c);je(c).isHorizontal||(je(d).isHorizontal=E),d.width=E?c.width:t.getDefaultSize(d).width,d.height=E?t.getDefaultSize(d).height:c.height}return o.allowed("shape.resize",{shape:h})||(d.height=t.getDefaultSize(d).height,d.width=t.getDefaultSize(d).width),h.name=p.name,Re(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Re(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(h.default=p.default),a.host&&!B(p,"bpmn:BoundaryEvent")&&B(h,"bpmn:BoundaryEvent")&&(d.host=a.host),(d.type==="bpmn:DataStoreReference"||d.type==="bpmn:DataObjectReference")&&(d.x=c.x+(c.width-d.width)/2),r.replaceElement(c,d,{...u,targetElement:a})}this.replaceElement=s}d_.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Qs(e){return B(e,"bpmn:SubProcess")}function Bm(e,t){var n=ie(e);return t&&n.get("eventDefinitions").some(function(i){return B(i,t)})}function Ek(e,t){return e.filter(function(n){return t.includes(n)})}const f_={__depends__:[p_,bk,si],bpmnReplace:["type",d_]};var Sk=250;function eo(e){this._eventBus=e,this._tools=[],this._active=null}eo.$inject=["eventBus"];eo.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};eo.prototype.isActive=function(e){return e&&this._active===e};eo.prototype.length=function(e){return this._tools.length};eo.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};eo.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(r){var o=r.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),Z(t,function(r){i.push(r+".ended"),i.push(r+".canceled")}),n.on(i,Sk,function(r){this._active&&(Ck(r)||this.setActive(null))},this)};function Ck(e){var t=e.originalEvent&&e.originalEvent.target;return t&&ai(t,'.group[data-group="tools"]')}const Qc={__depends__:[Ri],__init__:["toolManager"],toolManager:["type",eo]};function Ak(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function Tk(e,t){var n=[];return Z(e.concat(t),function(i){var r=i.incoming,o=i.outgoing;Z(r.concat(o),function(s){var c=s.source,a=s.target;(ma(e,c)||ma(e,a)||ma(t,c)||ma(t,a))&&(ma(n,s)||n.push(s))})}),n}function ma(e,t){return e.indexOf(t)!==-1}function Mk(e,t,n){var i=e.x,r=e.y,o=e.width,s=e.height,c=n.x,a=n.y;switch(t){case"n":return{x:i,y:r+a,width:o,height:s-a};case"s":return{x:i,y:r,width:o,height:s+a};case"w":return{x:i+c,y:r,width:o-c,height:s};case"e":return{x:i,y:r,width:o+c,height:s};default:throw new Error("unknown direction: "+t)}}var Bu=Math.abs,$k=Math.round,pi={x:"width",y:"height"},g_="crosshair",Wi={n:"top",w:"left",s:"bottom",e:"right"},Rk=1500,Js={n:"s",w:"e",s:"n",e:"w"},qs=20;function In(e,t,n,i,r,o,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=s;var c=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(a){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(a.originalEvent)})}),n.on("spaceTool.move",Rk,function(a){var u=a.context,l=u.initialized;l||(l=u.initialized=c.init(a,u)),l&&jm(a)}),n.on("spaceTool.end",function(a){var u=a.context,l=u.axis,p=u.direction,h=u.movingShapes,d=u.resizingShapes,f=u.start;if(u.initialized){jm(a);var g={x:0,y:0};g[l]=$k(a["d"+l]),c.makeSpace(h,d,g,p,f),n.once("spaceTool.ended",function(m){c.activateSelection(m.originalEvent,!0,!0)})}})}In.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];In.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:g_,data:{context:{reactivate:n}},trapClick:!1})};In.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:g_,data:{context:{}}})};In.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};In.prototype.init=function(e,t){var n=Bu(e.dx)>Bu(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(Bu(i)<5)return!1;i<0&&(i*=-1),Ia(e)&&(i*=-1);var o=Ak(n,i),s=this._canvas.getRootElement();!Bl(e)&&e.hover&&(s=e.hover);var c=[...Ja(s,!0),...s.attachers||[]],a=this.calculateAdjustments(c,n,i,r),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:a.resizingShapes,start:r}),l=Ik(a,n,o,r,u);return J(t,a,{axis:n,direction:o,spaceToolConstraints:l,start:r}),Lc("resize-"+(n==="x"?"ew":"ns")),!0};In.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],s=[],c=[],a=[];function u(h){o.includes(h)||o.push(h);var d=h.label;d&&!o.includes(d)&&o.push(d)}function l(h){s.includes(h)||s.push(h)}Z(e,function(h){if(!(!h.parent||Ge(h))){if(et(h)){a.push(h);return}var d=h[t],f=d+h[pi[t]];if(kk(h)&&(n>0&&Se(h)[t]>i||n<0&&Se(h)[t]<i)){c.push(h);return}if(n>0&&d>i||n<0&&f<i){u(h);return}if(d<i&&f>i&&r.allowed("shape.resize",{shape:h})){l(h);return}}}),Z(o,function(h){var d=h.attachers;d&&Z(d,function(f){u(f)})});var p=o.concat(s);return Z(c,function(h){var d=h.host;$r(p,d)&&u(h)}),p=o.concat(s),Z(a,function(h){var d=h.source,f=h.target,g=h.label;$r(p,d)&&$r(p,f)&&g&&u(g)}),{movingShapes:o,resizingShapes:s}};In.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};In.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function Fm(e){return{top:e.top-qs,right:e.right+qs,bottom:e.bottom+qs,left:e.left-qs}}function jm(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;he(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),he(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),he(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),he(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function Ik(e,t,n,i,r){var o=e.movingShapes,s=e.resizingShapes;if(s.length){var c={},a,u;return Z(s,function(l){var p=l.attachers,h=l.children,d=be(l),f=$e(h,function(T){return!et(T)&&!Ge(T)&&!$r(o,T)&&!$r(s,T)}),g=$e(h,function(T){return!et(T)&&!Ge(T)&&$r(o,T)}),m,w,_,E=[],y=[],x,v,S,M;f.length&&(w=Fm(be(kt(f))),m=i-d[Wi[n]]+w[Wi[n]],n==="n"?c.bottom=u=he(u)?Math.min(u,m):m:n==="w"?c.right=u=he(u)?Math.min(u,m):m:n==="s"?c.top=a=he(a)?Math.max(a,m):m:n==="e"&&(c.left=a=he(a)?Math.max(a,m):m)),g.length&&(_=Fm(be(kt(g))),m=i-_[Wi[Js[n]]]+d[Wi[Js[n]]],n==="n"?c.bottom=u=he(u)?Math.min(u,m):m:n==="w"?c.right=u=he(u)?Math.min(u,m):m:n==="s"?c.top=a=he(a)?Math.max(a,m):m:n==="e"&&(c.left=a=he(a)?Math.max(a,m):m)),p&&p.length&&(p.forEach(function(T){$r(o,T)?E.push(T):y.push(T)}),E.length&&(x=be(kt(E.map(Se))),v=d[Wi[Js[n]]]-(x[Wi[Js[n]]]-i)),y.length&&(S=be(kt(y.map(Se))),M=S[Wi[n]]-(d[Wi[n]]-i)),n==="n"?(m=Math.min(v||1/0,M||1/0),c.bottom=u=he(u)?Math.min(u,m):m):n==="w"?(m=Math.min(v||1/0,M||1/0),c.right=u=he(u)?Math.min(u,m):m):n==="s"?(m=Math.max(v||-1/0,M||-1/0),c.top=a=he(a)?Math.max(a,m):m):n==="e"&&(m=Math.max(v||-1/0,M||-1/0),c.left=a=he(a)?Math.max(a,m):m));var $=r&&r[l.id];$&&(n==="n"?(m=i+l[pi[t]]-$[pi[t]],c.bottom=u=he(u)?Math.min(u,m):m):n==="w"?(m=i+l[pi[t]]-$[pi[t]],c.right=u=he(u)?Math.min(u,m):m):n==="s"?(m=i-l[pi[t]]+$[pi[t]],c.top=a=he(a)?Math.max(a,m):m):n==="e"&&(m=i-l[pi[t]]+$[pi[t]],c.left=a=he(a)?Math.max(a,m):m))}),c}}function $r(e,t){return e.indexOf(t)!==-1}function kk(e){return!!e.host}var Fu="djs-dragging",Hm="djs-resizing",Lk=250,el=Math.max;function m_(e,t,n,i,r){function o(s,c){Z(s,function(a){r.addDragger(a,c),n.addMarker(a,Fu)})}e.on("spaceTool.selection.start",function(s){var c=n.getLayer("space"),a=s.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},l=ue("g");te(l,i.cls("djs-crosshair-group",["no-events"])),de(c,l);var p=ue("path");te(p,"d",u.x),ke(p).add("djs-crosshair"),de(l,p);var h=ue("path");te(h,"d",u.y),ke(h).add("djs-crosshair"),de(l,h),a.crosshairGroup=l}),e.on("spaceTool.selection.move",function(s){var c=s.context.crosshairGroup;Ft(c,s.x,s.y)}),e.on("spaceTool.selection.cleanup",function(s){var c=s.context,a=c.crosshairGroup;a&&Je(a)}),e.on("spaceTool.move",Lk,function(s){var c=s.context,a=c.line,u=c.axis,l=c.movingShapes,p=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var h=n.getLayer("space");a=ue("path"),te(a,"d","M0,0 L0,0"),ke(a).add("djs-crosshair"),de(h,a),c.line=a;var d=ue("g");te(d,i.cls("djs-drag-group",["no-events"])),de(n.getActiveLayer(),d),o(l,d);var f=c.movingConnections=t.filter(function(y){var x=!1;Z(l,function($){Z($.outgoing,function(T){y===T&&(x=!0)})});var v=!1;Z(l,function($){Z($.incoming,function(T){y===T&&(v=!0)})});var S=!1;Z(p,function($){Z($.outgoing,function(T){y===T&&(S=!0)})});var M=!1;return Z(p,function($){Z($.incoming,function(T){y===T&&(M=!0)})}),et(y)&&(x||S)&&(v||M)});o(f,d),c.dragGroup=d}if(!c.frameGroup){var g=ue("g");te(g,i.cls("djs-frame-group",["no-events"])),de(n.getActiveLayer(),g);var m=[];Z(p,function(y){var x=r.addFrame(y,g),v=x.getBBox();m.push({element:x,initialBounds:v}),n.addMarker(y,Hm)}),c.frameGroup=g,c.frames=m}var w={x:"M"+s.x+", -10000 L"+s.x+", 10000",y:"M -10000, "+s.y+" L 10000, "+s.y};te(a,{d:w[u]});var _={x:"y",y:"x"},E={x:s.dx,y:s.dy};E[_[c.axis]]=0,Ft(c.dragGroup,E.x,E.y),Z(c.frames,function(y){var x=y.element,v=y.initialBounds,S,M;c.direction==="e"?te(x,{width:el(v.width+E.x,5)}):(S=el(v.width-E.x,5),te(x,{width:S,x:v.x+v.width-S})),c.direction==="s"?te(x,{height:el(v.height+E.y,5)}):(M=el(v.height-E.y,5),te(x,{height:M,y:v.y+v.height-M}))})}}),e.on("spaceTool.cleanup",function(s){var c=s.context,a=c.movingShapes,u=c.movingConnections,l=c.resizingShapes,p=c.line,h=c.dragGroup,d=c.frameGroup;Z(a,function(f){n.removeMarker(f,Fu)}),Z(u,function(f){n.removeMarker(f,Fu)}),h&&(Je(p),Je(h)),Z(l,function(f){n.removeMarker(f,Hm)}),d&&Je(d)})}m_.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const Dk={__init__:["spaceToolPreview"],__depends__:[Ri,ci,Qc,Jo,us],spaceTool:["type",In],spaceToolPreview:["type",m_]};function Jc(e){e.invoke(In,this)}Jc.$inject=["injector"];me(Jc,In);Jc.prototype.calculateAdjustments=function(e,t,n,i){var r=In.prototype.calculateAdjustments.call(this,e,t,n,i);return r.resizingShapes=r.resizingShapes.filter(function(o){return!(B(o,"bpmn:TextAnnotation")||Pk(o)&&(t==="y"&&Lt(o)||t==="x"&&!Lt(o)))}),r};function Pk(e){return B(e,"bpmn:Participant")&&!ie(e).processRef}const v_={__depends__:[Dk],spaceTool:["type",Jc]};function ct(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}ct.$inject=["eventBus","injector"];ct.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};ct.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};ct.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};ct.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};ct.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};ct.prototype.register=function(e,t){this._setHandler(e,t)};ct.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};ct.prototype.canUndo=function(){return!!this._getUndoAction()};ct.prototype.canRedo=function(){return!!this._getRedoAction()};ct.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};ct.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};ct.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};ct.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const o of i)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r};ct.prototype._createId=function(){return this._uid++};ct.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};ct.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()};ct.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};ct.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:Py("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};ct.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=xe(e)?e:[e],t.dirty=t.dirty.concat(e))};ct.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};ct.prototype._revertedAction=function(e){this._stackIdx--};ct.prototype._getHandler=function(e){return this._handlerMap[e]};ct.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const Ok={commandStack:["type",ct]};function Yi(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var Nk=250,Wm=1400;function Qd(e,t,n){oe.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",Wm,function(r){var o=r.context,s=o.shapes,c=o.validatedShapes;o.shapes=Gm(s),o.validatedShapes=Gm(c)}),i&&t.on("shape.move.start",Nk,function(r){var o=r.context,s=o.shapes,c=[];Z(s,function(a){Z(a.labels,function(u){!u.hidden&&o.shapes.indexOf(u)===-1&&c.push(u),a.labelTarget&&c.push(a)})}),Z(c,function(a){i.makeDraggable(o,a,!0)})}),this.preExecuted("elements.move",Wm,function(r){var o=r.context,s=o.closure,c=s.enclosedElements,a=[];Z(c,function(u){Z(u.labels,function(l){c[l.id]||a.push(l)})}),s.addAll(a)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,s=o.connection||o.shape;Yi(s.labels,function(c){n.removeShape(c,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,s=o.shape,c=s.labelTarget;c&&(o.labelTargetIndex=Th(c.labels,s),o.labelTarget=c,s.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,s=o.shape,c=o.labelTarget,a=o.labelTargetIndex;c&&(Tt(c.labels,s,a),s.labelTarget=c)})}me(Qd,oe);Qd.$inject=["injector","eventBus","modeling"];function Gm(e){return $e(e,function(t){return e.indexOf(t.labelTarget)===-1})}const Bk={__init__:["labelSupport"],labelSupport:["type",Qd]};var Fk=251,zm=1401,Vm="attach-ok";function Jd(e,t,n,i,r){oe.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",zm,function(s){var c=s.context,a=c.shapes,u=c.validatedShapes;c.shapes=jk(a),c.validatedShapes=Hk(u)}),o&&t.on("shape.move.start",Fk,function(s){var c=s.context,a=c.shapes,u=Up(a);Z(u,function(l){o.makeDraggable(c,l,!0),Z(l.labels,function(p){o.makeDraggable(c,p,!0)})})}),o&&t.on("shape.move.start",function(s){var c=s.context,a=c.shapes;if(a.length===1){var u=a[0],l=u.host;l&&(n.addMarker(l,Vm),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(l,Vm)}))}}),this.preExecuted("elements.move",zm,function(s){var c=s.context,a=c.closure,u=c.shapes,l=Up(u);Z(l,function(p){a.add(p,a.topLevel[p.host.id])})}),this.postExecuted("elements.move",function(s){var c=s.context,a=c.shapes,u=c.newHost,l;u&&a.length!==1||(u?l=a:l=$e(a,function(p){var h=p.host;return Wk(p)&&!Gk(a,h)}),Z(l,function(p){r.updateAttachment(p,u)}))}),this.postExecuted("elements.move",function(s){var c=s.context.shapes;Z(c,function(a){Z(a.attachers,function(u){Z(u.outgoing.slice(),function(l){var p=i.allowed("connection.reconnect",{connection:l,source:l.source,target:l.target});p||r.removeConnection(l)}),Z(u.incoming.slice(),function(l){var p=i.allowed("connection.reconnect",{connection:l,source:l.source,target:l.target});p||r.removeConnection(l)})})})}),this.postExecute("shape.create",function(s){var c=s.context,a=c.shape,u=c.host;u&&r.updateAttachment(a,u)}),this.postExecute("shape.replace",function(s){var c=s.context,a=c.oldShape,u=c.newShape;Yi(a.attachers,function(l){var p=i.allowed("elements.move",{target:u,shapes:[l]});p==="attach"?r.updateAttachment(l,u):r.removeShape(l)}),u.attachers.length&&Z(u.attachers,function(l){var p=wm(l,a,u);r.moveShape(l,p,l.parent)})}),this.postExecute("shape.resize",function(s){var c=s.context,a=c.shape,u=c.oldBounds,l=c.newBounds,p=a.attachers,h=c.hints||{};h.attachSupport!==!1&&Z(p,function(d){var f=wm(d,u,l);r.moveShape(d,f,d.parent),Z(d.labels,function(g){r.moveShape(g,f,g.parent)})})}),this.preExecute("shape.delete",function(s){var c=s.context.shape;Yi(c.attachers,function(a){r.removeShape(a)}),c.host&&r.updateAttachment(c,null)})}me(Jd,oe);Jd.$inject=["injector","eventBus","canvas","rules","modeling"];function Up(e){return sh(jt(e,function(t){return t.attachers||[]}))}function jk(e){var t=Up(e);return gE("id",e,t)}function Hk(e){var t=Oo(e,"id");return $e(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function Wk(e){return!!e.host}function Gk(e,t){return e.indexOf(t)!==-1}const zk={__depends__:[ci],__init__:["attachSupport"],attachSupport:["type",Jd]};function kn(e){this._model=e}kn.$inject=["moddle"];kn.prototype._needsId=function(e){return Re(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};kn.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;B(e,"bpmn:Activity")?t="Activity":B(e,"bpmn:Event")?t="Event":B(e,"bpmn:Gateway")?t="Gateway":Re(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};kn.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};kn.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};kn.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",J({bpmnElement:e,bounds:this.createDiBounds()},t))};kn.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};kn.prototype.createDiWaypoints=function(e){var t=this;return jt(e,function(n){return t.createDiWaypoint(n)})};kn.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Wn(e,["x","y"]))};kn.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",J({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};kn.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",J({bpmnElement:e},t))};function hn(e,t,n){oe.call(this,e),this._bpmnFactory=t;var i=this;function r(d){var f=d.context,g=f.hints||{},m;!f.cropped&&g.createElementsBehavior!==!1&&(m=f.connection,m.waypoints=n.getCroppedWaypoints(m),f.cropped=!0)}this.executed(["connection.layout","connection.create"],r),this.reverted(["connection.layout"],function(d){delete d.context.cropped});function o(d){var f=d.context;i.updateParent(f.shape||f.connection,f.oldParent)}function s(d){var f=d.context,g=f.shape||f.connection,m=f.parent||f.newParent;i.updateParent(g,m)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],sn(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],sn(s));function c(d){var f=d.context,g=f.oldRoot,m=g.children;Z(m,function(w){B(w,"bpmn:BaseElement")&&i.updateParent(w)})}this.executed(["canvas.updateRoot"],c),this.reverted(["canvas.updateRoot"],c);function a(d){var f=d.context.shape;B(f,"bpmn:BaseElement")&&i.updateBounds(f)}this.executed(["shape.move","shape.create","shape.resize"],sn(function(d){d.context.shape.type!=="label"&&a(d)})),this.reverted(["shape.move","shape.create","shape.resize"],sn(function(d){d.context.shape.type!=="label"&&a(d)})),e.on("shape.changed",function(d){d.element.type==="label"&&a({context:{shape:d.element}})});function u(d){i.updateConnection(d.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],sn(u)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],sn(u));function l(d){i.updateConnectionWaypoints(d.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],sn(l)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],sn(l)),this.executed("connection.reconnect",sn(function(d){var f=d.context,g=f.connection,m=f.oldSource,w=f.newSource,_=ie(g),E=ie(m),y=ie(w);_.conditionExpression&&!Re(y,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(f.oldConditionExpression=_.conditionExpression,delete _.conditionExpression),m!==w&&E.default===_&&(f.oldDefault=E.default,delete E.default)})),this.reverted("connection.reconnect",sn(function(d){var f=d.context,g=f.connection,m=f.oldSource,w=f.newSource,_=ie(g),E=ie(m),y=ie(w);f.oldConditionExpression&&(_.conditionExpression=f.oldConditionExpression),f.oldDefault&&(E.default=f.oldDefault,delete y.default)}));function p(d){i.updateAttachment(d.context)}this.executed(["element.updateAttachment"],sn(p)),this.reverted(["element.updateAttachment"],sn(p)),this.executed("element.updateLabel",sn(h)),this.reverted("element.updateLabel",sn(h));function h(d){const{element:f}=d.context,g=dn(f),m=je(f),w=m&&m.get("label");Br(f)||_l(f)||(g&&!w?m.set("label",t.create("bpmndi:BPMNLabel")):!g&&w&&m.set("label",void 0))}}me(hn,oe);hn.$inject=["eventBus","bpmnFactory","connectionDocking"];hn.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};hn.prototype.updateParent=function(e,t){if(!Ge(e)&&!(B(e,"bpmn:DataStoreReference")&&e.parent&&B(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=je(e),o=n&&n.businessObject,s=je(n);B(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),B(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),B(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(i,o),B(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(r,s)}};hn.prototype.updateBounds=function(e){var t=je(e),n=Uk(e);if(n){var i=Fn(n,t.get("bounds"));J(n,{x:e.x+i.x,y:e.y+i.y})}var r=Ge(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),J(o,{x:e.x,y:e.y,width:e.width,height:e.height})};hn.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;B(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),wt(i,e)),B(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),Tt(r,e))}};hn.prototype.updateDiConnection=function(e,t,n){var i=je(e),r=je(t),o=je(n);i.sourceElement&&i.sourceElement.bpmnElement!==ie(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==ie(n)&&(i.targetElement=n&&o)};hn.prototype.updateDiParent=function(e,t){if(t&&!B(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(wt(n,e),e.$parent=null)}};function Vk(e){for(;e&&!B(e,"bpmn:Definitions");)e=e.$parent;return e}hn.prototype.getLaneSet=function(e){var t,n;return B(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(B(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};hn.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&!((B(e,"bpmn:DataInput")||B(e,"bpmn:DataOutput"))&&(B(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(B(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(B(e,"bpmn:FlowElement")){if(t){if(B(t,"bpmn:Participant"))t=t.processRef;else if(B(t,"bpmn:Lane"))do t=t.$parent.$parent;while(B(t,"bpmn:Lane"))}i="flowElements"}else if(B(e,"bpmn:Artifact")){for(;t&&!B(t,"bpmn:Process")&&!B(t,"bpmn:SubProcess")&&!B(t,"bpmn:Collaboration");)if(B(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(B(e,"bpmn:MessageFlow"))i="messageFlows";else if(B(e,"bpmn:Participant")){i="participants";var r=e.processRef,o;r&&(o=Vk(e.$parent||t),e.$parent&&(wt(o.get("rootElements"),r),r.$parent=null),t&&(Tt(o.get("rootElements"),r),r.$parent=o))}else B(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":B(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var s;if(e.$parent&&(s=e.$parent.get(i),wt(s,e)),t?(s=t.get(i),s.push(e),e.$parent=t):e.$parent=null,n){var c=n.get(i);wt(s,e),t&&(c||(c=[],t.set(i,c)),c.push(e))}}};hn.prototype.updateConnectionWaypoints=function(e){var t=je(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};hn.prototype.updateConnection=function(e){var t=e.connection,n=ie(t),i=t.source,r=ie(i),o=t.target,s=ie(t.target),c;if(B(n,"bpmn:DataAssociation"))B(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,c=e.parent||e.newParent||s,this.updateSemanticParent(n,s,c)):B(n,"bpmn:DataOutputAssociation")&&(c=e.parent||e.newParent||r,this.updateSemanticParent(n,r,c),n.targetRef=s);else{var a=B(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(a&&(wt(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==s&&(a&&(wt(n.targetRef&&n.targetRef.get("incoming"),n),s&&s.get("incoming")&&s.get("incoming").push(n)),n.targetRef=s)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,o)};hn.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function sn(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;B(i,"bpmn:BaseElement")&&e(t)}}function Uk(e){if(B(e,"bpmn:Activity")){var t=je(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function pr(e,t){Ai.call(this),this._bpmnFactory=e,this._moddle=t}me(pr,Ai);pr.$inject=["bpmnFactory","moddle"];pr.prototype._baseCreate=Ai.prototype.create;pr.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,J({type:"label",di:n},$a,t))}return this.createElement(e,t)};pr.prototype.createElement=function(e,t){t=J({},t||{});var n,i=t.businessObject,r=t.di;if(!i){if(!t.type)throw new Error("no shape type specified");i=this._bpmnFactory.create(t.type),ow(i)}if(!Zk(r)){var o=J({},r||{},{id:i.id+"_di"});e==="root"?r=this._bpmnFactory.createDiPlane(i,o):e==="connection"?r=this._bpmnFactory.createDiEdge(i,o):r=this._bpmnFactory.createDiShape(i,o)}B(i,"bpmn:Group")&&(t=J({isFrame:!0},t)),t=Yk(i,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Yp(r,t,"isExpanded")),Re(i,["bpmn:Lane","bpmn:Participant"])&&(t=Yp(r,t,"isHorizontal")),B(i,"bpmn:SubProcess")&&(t.collapsed=!Ne(i,r)),B(i,"bpmn:ExclusiveGateway")&&(Ut(r,"isMarkerVisible")?r.isMarkerVisible===void 0&&(r.isMarkerVisible=!1):r.isMarkerVisible=!0),Pt(t.triggeredByEvent)&&(i.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Pt(t.cancelActivity)&&(i.cancelActivity=t.cancelActivity,delete t.cancelActivity);var s,c;return t.eventDefinitionType&&(s=i.get("eventDefinitions")||[],c=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(c.condition=this._bpmnFactory.create("bpmn:FormalExpression")),s.push(c),c.$parent=i,i.eventDefinitions=s,delete t.eventDefinitionType),n=this.getDefaultSize(i,r),t=J({id:i.id},n,t,{businessObject:i,di:r}),this._baseCreate(e,t)};pr.prototype.getDefaultSize=function(e,t){var n=ie(e);if(t=t||je(e),B(n,"bpmn:SubProcess"))return Ne(n,t)?{width:350,height:200}:{width:100,height:80};if(B(n,"bpmn:Task"))return{width:100,height:80};if(B(n,"bpmn:Gateway"))return{width:50,height:50};if(B(n,"bpmn:Event"))return{width:36,height:36};if(B(n,"bpmn:Participant")){var i=t.isHorizontal===void 0||t.isHorizontal===!0;return Ne(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return B(n,"bpmn:Lane")?{width:400,height:100}:B(n,"bpmn:DataObjectReference")?{width:36,height:50}:B(n,"bpmn:DataStoreReference")?{width:50,height:50}:B(n,"bpmn:TextAnnotation")?{width:100,height:30}:B(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};pr.prototype.createParticipantShape=function(e){return ht(e)||(e={isExpanded:e}),e=J({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function Yk(e,t,n){return Z(n,function(i){t=Yp(e,t,i)}),t}function Yp(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Cn(t,[n]))}function Zk(e){return Re(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function qc(e,t){this._modeling=e,this._canvas=t}qc.$inject=["modeling","canvas"];qc.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;Z(n,function(r){var o={x:0,y:0};Pt(i.left)?o.x=i.left-r.x:Pt(i.right)?o.x=i.right-r.width-r.x:Pt(i.center)?o.x=i.center-Math.round(r.width/2)-r.x:Pt(i.top)?o.y=i.top-r.y:Pt(i.bottom)?o.y=i.bottom-r.height-r.y:Pt(i.middle)&&(o.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})};qc.prototype.postExecute=function(e){};function eu(e){this._modeling=e}eu.$inject=["modeling"];eu.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};eu.prototype.postExecute=function(e){var t=e.hints||{};Xk(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function Xk(e,t){return qt(e.outgoing,function(n){return n.target===t})}function tu(e,t){this._canvas=e,this._layouter=t}tu.$inject=["canvas","layouter"];tu.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,s=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,s)),this._canvas.addConnection(t,r,o),t};tu.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var tl=Math.round;function qd(e){this._modeling=e}qd.$inject=["modeling"];qd.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,s=this._modeling;Z(t,function(p){he(p.x)||(p.x=0),he(p.y)||(p.y=0)});var c=$e(t,function(p){return!p.hidden}),a=kt(c);Z(t,function(p){et(p)&&(p.waypoints=jt(p.waypoints,function(h){return{x:tl(h.x-a.x-a.width/2+r.x),y:tl(h.y-a.y-a.height/2+r.y)}})),J(p,{x:tl(p.x-a.x-a.width/2+r.x),y:tl(p.y-a.y-a.height/2+r.y)})});var u=bc(t),l={};Z(t,function(p){if(et(p)){l[p.id]=he(i)?s.createConnection(l[p.source.id],l[p.target.id],i,p,p.parent||n,o):s.createConnection(l[p.source.id],l[p.target.id],p,p.parent||n,o);return}var h=J({},o);u.indexOf(p)===-1&&(h.autoResize=!1),Ge(p)&&(h=Cn(h,["attach"])),l[p.id]=he(i)?s.createShape(p,Wn(p,["x","y","width","height"]),p.parent||n,i,h):s.createShape(p,Wn(p,["x","y","width","height"]),p.parent||n,h)}),e.elements=rc(l)};var Um=Math.round;function hr(e){this._canvas=e}hr.$inject=["canvas"];hr.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?J(t,n):J(t,{x:n.x-Um(t.width/2),y:n.y-Um(t.height/2)}),this._canvas.addShape(t,i,r),t};hr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function hs(e){hr.call(this,e)}me(hs,hr);hs.$inject=["canvas"];var Kk=hr.prototype.execute;hs.prototype.execute=function(e){var t=e.shape;return Jk(t),t.labelTarget=e.labelTarget,Kk.call(this,e)};var Qk=hr.prototype.revert;hs.prototype.revert=function(e){return e.shape.labelTarget=null,Qk.call(this,e)};function Jk(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function ds(e,t){this._canvas=e,this._modeling=t}ds.$inject=["canvas","modeling"];ds.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Yi(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Yi(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};ds.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Th(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};ds.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,Tt(n.children,t,i),this._canvas.addConnection(t,n),t};function ef(e,t){this._modeling=e,this._elementRegistry=t}ef.$inject=["modeling","elementRegistry"];ef.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;Z(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function fs(e,t){this._canvas=e,this._modeling=t}fs.$inject=["canvas","modeling"];fs.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Yi(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Yi(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),Yi(n.children,function(i){et(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};fs.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=Th(i.children,n),t.removeShape(n),n};fs.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return Tt(i.children,n,r),t.addShape(n,i),n};function nu(e){this._modeling=e}nu.$inject=["modeling"];var Ym={x:"y",y:"x"};nu.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(m,w){m.range.min=Math.min(w[i],m.range.min),m.range.max=Math.max(w[i]+w[r],m.range.max)}function s(m){return m[i]+m[r]/2}function c(m){return m.length-1}function a(m){return m.max-m.min}function u(m,w){var _={y:0};_[i]=m-s(w),_[i]&&(_[Ym[i]]=0,t.moveElements([w],_,w.parent))}var l=n[0],p=c(n),h=n[p],d,f,g=0;Z(n,function(m,w){var _,E,y;if(m.elements.length<2){w&&w!==n.length-1&&(o(m,m.elements[0]),g+=a(m.range));return}_=ii(m.elements,i),E=_[0],w===p&&(E=_[c(_)]),y=s(E),m.range=null,Z(_,function(x){if(u(y,x),m.range===null){m.range={min:x[i],max:x[i]+x[r]};return}o(m,x)}),w&&w!==n.length-1&&(g+=a(m.range))}),f=Math.abs(h.range.min-l.range.max),d=Math.round((f-g)/(n.length-1)),!(d<n.length-1)&&Z(n,function(m,w){var _={},E;m===l||m===h||(E=n[w-1],m.range.max=0,Z(m.elements,function(y,x){_[Ym[i]]=0,_[i]=E.range.max-y[i]+d,m.range.min!==y[i]&&(_[i]+=y[i]-m.range.min),_[i]&&t.moveElements([y],_,y.parent),m.range.max=Math.max(y[i]+y[r],x?m.range.max:0)}))})};nu.prototype.postExecute=function(e){};function iu(e,t){this._layouter=e,this._canvas=t}iu.$inject=["layouter","canvas"];iu.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return J(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};iu.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function tf(){}tf.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=wt(o.children,t),Tt(i.children,t,r),t.parent=i,Z(t.waypoints,function(s){s.x+=n.x,s.y+=n.y,s.original&&(s.original.x+=n.x,s.original.y+=n.y)}),t};tf.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return wt(n.children,t),Tt(i.children,t,r),t.parent=i,Z(t.waypoints,function(s){s.x-=o.x,s.y-=o.y,s.original&&(s.original.x-=o.x,s.original.y-=o.y)}),t};function nf(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}nf.prototype.add=function(e,t){return this.addAll([e],t)};nf.prototype.addAll=function(e,t){var n=mC(e,!!t,this);return J(this,n),this};function gs(e){this._modeling=e}gs.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};gs.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,s=e.allShapes,c=e.allConnections,a=e.enclosedConnections,u=e.topLevel,l=!1;r&&r.parent===n&&(l=!0),Z(s,function(p){o.moveShape(p,t,u[p.id]&&!l&&n,{recurse:!1,layout:!1})}),Z(c,function(p){var h=!!s[p.source.id],d=!!s[p.target.id];a[p.id]&&h&&d?o.moveConnection(p,t,u[p.id]&&!l&&n):o.layoutConnection(p,{connectionStart:h&&Ad(p,p.source,t),connectionEnd:d&&Td(p,p.target,t)})})};gs.prototype.getClosure=function(e){return new nf().addAll(e,!0)};function ru(e){this._helper=new gs(e)}ru.$inject=["modeling"];ru.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};ru.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function to(e){this._modeling=e,this._helper=new gs(e)}to.$inject=["modeling"];to.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=Wn(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=wt(o.children,t),Tt(i.children,t,r),J(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};to.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(Z(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:Td(o,t,n)})}),Z(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:Ad(o,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};to.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return Tt(n.children,t,i),J(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};to.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};to.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function ms(e){this._modeling=e}ms.$inject=["modeling"];ms.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return xe(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};ms.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},s={};o.connectionStart&&(s.connectionStart=o.connectionStart),o.connectionEnd&&(s.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!i||o.docking==="source")&&(s.connectionStart=s.connectionStart||Zm(xe(r)?r[0]:r)),i&&(!n||o.docking==="target")&&(s.connectionEnd=s.connectionEnd||Zm(xe(r)?r[r.length-1]:r)),o.newWaypoints&&(s.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,s))};ms.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function Zm(e){return e.original||e}function Li(e,t){this._modeling=e,this._rules=t}Li.$inject=["modeling","rules"];Li.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,o=e.newData,s=e.hints||{},c;function a(f,g,m){return i.allowed("connection.reconnect",{connection:m,source:f,target:g})}var u={x:o.x,y:o.y},l={x:r.x,y:r.y,width:r.width,height:r.height};c=e.newShape=e.newShape||t.createShape(o,u,r.parent,s),r.host&&n.updateAttachment(c,r.host);var p;s.moveChildren!==!1&&(p=r.children.slice(),n.moveElements(p,{x:0,y:0},c,s));var h=r.incoming.slice(),d=r.outgoing.slice();Z(h,function(f){var g=f.source,m=a(g,c,f);m&&t.reconnectEnd(f,c,Vc(f,c,l),s)}),Z(d,function(f){var g=f.target,m=a(c,g,f);m&&t.reconnectStart(f,c,zc(f,c,l),s)})};Li.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};Li.prototype.execute=function(e){};Li.prototype.revert=function(e){};Li.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};Li.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};Li.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function vs(e){this._modeling=e}vs.$inject=["modeling"];vs.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},J(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};vs.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(Z(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:Vc(o,n,i)})}),Z(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:zc(o,n,i)})}))};vs.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return J(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function dr(e){this._modeling=e}dr.$inject=["modeling"];dr.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,s={};this.moveShapes(i,t),Z(r,function(c){s[c.id]=eL(c)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(Tk(i,r),t,n,o,i,r,s)};dr.prototype.execute=function(){};dr.prototype.revert=function(){};dr.prototype.moveShapes=function(e,t){var n=this;Z(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};dr.prototype.resizeShapes=function(e,t,n){var i=this;Z(e,function(r){var o=Mk(r,n,t);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};dr.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,s){var c=this,a=r.concat(o);Z(e,function(u){var l=u.source,p=u.target,h=qk(u),d=y_(n),f={};Gi(a,l)&&Gi(a,p)?(h=jt(h,function(g){return Km(g,i,n)&&(g[d]=g[d]+t[d]),g.original&&Km(g.original,i,n)&&(g.original[d]=g.original[d]+t[d]),g}),c._modeling.updateWaypoints(u,h,{labelBehavior:!1})):(Gi(a,l)||Gi(a,p))&&(Gi(r,l)?f.connectionStart=Ad(u,l,t):Gi(r,p)?f.connectionEnd=Td(u,p,t):Gi(o,l)?f.connectionStart=zc(u,l,s[l.id]):Gi(o,p)&&(f.connectionEnd=Vc(u,p,s[p.id])),c._modeling.layoutConnection(u,f))})};function Xm(e){return J({},e)}function qk(e){return jt(e.waypoints,function(t){return t=Xm(t),t.original&&(t.original=Xm(t.original)),t})}function y_(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Km(e,t,n){var i=y_(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function Gi(e,t){return e.indexOf(t)!==-1}function eL(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function ou(e){this._modeling=e}ou.$inject=["modeling"];ou.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=b_(n),t.collapsed=!t.collapsed;var i=w_(n,t.collapsed);return[t].concat(i)};ou.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=__(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function b_(e){var t={};return Z(e,function(n){t[n.id]=n.hidden,n.children&&(t=J({},t,b_(n.children)))}),t}function w_(e,t){var n=[];return Z(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(w_(i.children,i.collapsed||t)))}),n}function __(e,t){var n=[];return Z(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(__(i.children,t)))}),n}function au(e){this._modeling=e}au.$inject=["modeling"];au.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=x_(i,t),E_(n,t),t.host=n,t};au.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,x_(n,t),E_(i,t,r),t};function x_(e,t){return wt(e&&e.attachers,t)}function E_(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),Tt(i,t,n)}}function rf(){}rf.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};rf.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function qe(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}qe.$inject=["eventBus","elementFactory","commandStack"];qe.prototype.getHandlers=function(){return{"shape.append":eu,"shape.create":hr,"shape.delete":fs,"shape.move":to,"shape.resize":vs,"shape.replace":Li,"shape.toggleCollapse":ou,spaceTool:dr,"label.create":hs,"connection.create":tu,"connection.delete":ds,"connection.move":tf,"connection.layout":iu,"connection.updateWaypoints":rf,"connection.reconnect":ms,"elements.create":qd,"elements.move":ru,"elements.delete":ef,"elements.distribute":nu,"elements.align":qc,"element.updateAttachment":au}};qe.prototype.registerHandlers=function(e){Z(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};qe.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)};qe.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};qe.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,o=n,s;r===!0?(s=n,o=n.parent):r===!1&&(s=null);var c={shapes:e,delta:t,newParent:o,newHost:s,hints:i};this._commandStack.execute("elements.move",c)};qe.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)};qe.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};qe.prototype.createConnection=function(e,t,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var s={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",s),s.connection};qe.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var o=r.attach,s,c;e=this._create("shape",e),o?(s=n.parent,c=n):s=n;var a={position:t,shape:e,parent:s,parentIndex:i,host:c,hints:r};return this._commandStack.execute("shape.create",a),a.shape};qe.prototype.createElements=function(e,t,n,i,r){xe(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var o={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",o),o.elements};qe.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};qe.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape};qe.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};qe.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};qe.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};qe.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};qe.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};qe.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};qe.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};qe.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)};qe.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};qe.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)};qe.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,J(i,{docking:"source"}))};qe.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,J(i,{docking:"target"}))};qe.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};qe.prototype._create=function(e,t){return KC(t)?t:this._elementFactory.create(e,t)};qe.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function ys(e){this._elementRegistry=e}ys.$inject=["elementRegistry"];ys.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||tL(n,Rl(i));return S_(n,i),e.oldProperties=o,e.changed=r,r};ys.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return S_(n,t),i};ys.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return B(e,"bpmn:DataObject")?nL(e,t):[]};function tL(e,t){return un(t,function(n,i){return n[i]=e.get(i),n},{})}function S_(e,t){Z(t,function(n,i){e.set(i,n)})}function nL(e,t){return t.filter(function(n){return B(n,"bpmn:DataObjectReference")&&ie(n).dataObjectRef===e})}var va="default",bi="id",C_="di",iL={width:0,height:0};function bs(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}bs.$inject=["elementRegistry","moddle","modeling","textRenderer"];bs.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,s=lL(e.properties),c=e.oldProperties||rL(t,s);return A_(s,o)&&(r.unclaim(o[bi]),i.updateId(t,s[bi]),r.claim(s[bi],o)),va in s&&(s[va]&&n.push(i.get(s[va].id)),o[va]&&n.push(i.get(o[va].id))),T_(t,s),e.oldProperties=c,e.changed=n,n};bs.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&ie(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,iL)}};bs.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,s=this._moddle.ids;return T_(t,i),A_(n,r)&&(s.unclaim(n[bi]),o.updateId(t,i[bi]),s.claim(i[bi],r)),e.changed};function A_(e,t){return bi in e&&e[bi]!==t[bi]}function rL(e,t){var n=Rl(t),i=e.businessObject,r=je(e);return un(n,function(o,s){return s!==C_?o[s]=i.get(s):o[s]=oL(r,Rl(t.di)),o},{})}function oL(e,t){return un(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function T_(e,t){var n=e.businessObject,i=je(e);Z(t,function(r,o){o!==C_?n.set(o,r):i&&aL(i,r)})}function aL(e,t){Z(t,function(n,i){e.set(i,n)})}var sL=["default"];function lL(e){var t=J({},e);return sL.forEach(function(n){n in e&&(t[n]=ie(t[n]))}),t}function su(e,t){this._canvas=e,this._modeling=t}su.$inject=["canvas","modeling"];su.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,s=o.$parent,c=je(r);return t.setRootElement(n),t.removeRootElement(r),Tt(s.rootElements,i),i.$parent=s,wt(s.rootElements,o),o.$parent=null,r.di=null,c.bpmnElement=i,n.di=c,e.oldRoot=r,[]};su.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,o=r.businessObject,s=i.$parent,c=je(n);return t.setRootElement(r),t.removeRootElement(n),wt(s.rootElements,i),i.$parent=null,Tt(s.rootElements,o),o.$parent=s,n.di=null,c.bpmnElement=o,r.di=c,[]};function of(e,t){this._modeling=e,this._spaceTool=t}of.$inject=["modeling","spaceTool"];of.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=En(i),s=o===i,c=s?i:i.parent,a=ki(c),u=Lt(i);if(u?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!a.length){var l=u?{x:i.x+xn,y:i.y,width:i.width-xn,height:i.height}:{x:i.x,y:i.y+xn,width:i.width,height:i.height-xn};n.createShape({type:"bpmn:Lane",isHorizontal:u},l,c)}var p=[];Xr(o,function(y){return p.push(y),y.label&&p.push(y.label),y===i?[]:$e(y.children,function(x){return x!==i})});var h,d,f,g,m;r==="top"?(h=-120,d=i.y,f=d+10,g="n",m="y"):r==="left"?(h=-120,d=i.x,f=d+10,g="w",m="x"):r==="bottom"?(h=120,d=i.y+i.height,f=d-10,g="s",m="y"):r==="right"&&(h=120,d=i.x+i.width,f=d-10,g="e",m="x");var w=t.calculateAdjustments(p,m,h,f),_=u?{x:0,y:h}:{x:h,y:0};t.makeSpace(w.movingShapes,w.resizingShapes,_,g,f);var E=u?{x:i.x+(s?xn:0),y:d-(r==="top"?120:0),width:i.width-(s?xn:0),height:120}:{x:d-(r==="left"?120:0),y:i.y+(s?xn:0),width:120,height:i.height-(s?xn:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:u},E,c)};function af(e){this._modeling=e}af.$inject=["modeling"];af.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,r=ki(n),o=r.length;if(o>i)throw new Error(`more than <${i}> child lanes`);var s=Lt(n),c=s?n.height:n.width,a=Math.round(c/i),u,l,p,h;for(h=0;h<i;h++)h===i-1?u=c-a*h:u=a,l=s?{x:n.x+xn,y:n.y+h*a,width:n.width-xn,height:u}:{x:n.x+h*a,y:n.y+xn,width:u,height:n.height-xn},h<o?t.resizeShape(r[h],l):(p={type:"bpmn:Lane",isHorizontal:s},t.createShape(p,l,n))};function ws(e,t){this._modeling=e,this._spaceTool=t}ws.$inject=["modeling","spaceTool"];ws.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};ws.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=OI(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};ws.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=be(e),r=be(t),o=T0(r,i),s=En(e),c=[],a=[];Xr(s,function(f){return c.push(f),(B(f,"bpmn:Lane")||B(f,"bpmn:Participant"))&&a.push(f),f.children});var u,l,p,h,d;(o.bottom||o.top)&&(u=o.bottom||o.top,l=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),p=o.bottom?"s":"n",h=o.top>0||o.bottom<0?-u:u,d=n.calculateAdjustments(c,"y",h,l),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:u},p)),(o.left||o.right)&&(u=o.right||o.left,l=e.x+(o.right?e.width:0)+(o.right?-10:100),p=o.right?"e":"w",h=o.left>0||o.right<0?-u:u,d=n.calculateAdjustments(a,"x",h,l),n.makeSpace(d.movingShapes,d.resizingShapes,{x:u,y:0},p))};var Pa="flowNodeRef",sf="lanes";function _s(e){this._elementRegistry=e}_s.$inject=["elementRegistry"];_s.prototype._computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function s(l,p){var h=be(p),d={x:l.x+l.width/2,y:l.y+l.height/2};return d.x>h.left&&d.x<h.right&&d.y>h.top&&d.y<h.bottom}function c(l){n.indexOf(l)===-1&&(o.push(l),n.push(l))}function a(l){var p=En(l);return r[p.id]||(r[p.id]=Wc(p)),r[p.id]}function u(l){if(!l.parent)return[];var p=a(l);return p.filter(function(h){return s(l,h)}).map(function(h){return h.businessObject})}return t.forEach(function(l){var p=En(l);if(!(!p||n.indexOf(p)!==-1)){var h=p.children.filter(function(d){return B(d,"bpmn:FlowNode")});h.forEach(c),n.push(p)}}),e.forEach(c),o.forEach(function(l){var p=l.businessObject,h=p.get(sf),d=h.slice(),f=u(l);i.push({flowNode:p,remove:d,add:f})}),t.forEach(function(l){var p=l.businessObject;l.parent||p.get(Pa).forEach(function(h){i.push({flowNode:h,remove:[p],add:[]})})}),i};_s.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(sf);n.remove.forEach(function(o){wt(r,o),wt(o.get(Pa),i)}),n.add.forEach(function(o){Tt(r,o),Tt(o.get(Pa),i)})}),[]};_s.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,r=i.get(sf);n.add.forEach(function(o){wt(r,o),wt(o.get(Pa),i)}),n.remove.forEach(function(o){Tt(r,o),Tt(o.get(Pa),i)})}),[]};function lu(e){this._moddle=e}lu.$inject=["moddle"];lu.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.claim(n,i):t.unclaim(n),[]};lu.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.unclaim(n):t.claim(n,i),[]};var cL={fill:void 0,stroke:void 0};function lf(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(cn(t)){var n=uL(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}lf.$inject=["commandStack"];lf.prototype.postExecute=function(e){var t=e.elements,n=e.colors||cL,i=this,r={};"fill"in n&&J(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&J(r,{"border-color":this._normalizeColor(n.stroke)}),Z(t,function(o){var s=et(o)?Wn(r,["border-color"]):r,c=je(o);if(pL(s),Ge(o))i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:c.label,properties:{color:r["border-color"]}});else{if(!Re(c,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:o,properties:{di:s}})}})};function uL(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function pL(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var hL={width:0,height:0};function M_(e,t,n){function i(a,u){var l=a.label||a,p=a.labelTarget||a;return qT(l,u),[l,p]}function r(a){var u=a.element,l=u.businessObject,p=a.newLabel;if(!Ge(u)&&Br(u)&&!Cc(u)&&!Qm(p)){var h=7,d=Fh(u);d={x:d.x,y:d.y+h},e.createLabel(u,d,{id:l.id+"_label",businessObject:l,di:u.di})}}function o(a){return a.oldLabel=dn(a.element),i(a.element,a.newLabel)}function s(a){return i(a.element,a.oldLabel)}function c(a){var u=a.element,l=u.label||u,p=a.newLabel,h=a.newBounds,d=a.hints||{};if(!(!Ge(l)&&!B(l,"bpmn:TextAnnotation"))){if(Ge(l)&&Qm(p)){d.removeShape!==!1&&e.removeShape(l,{unsetLabel:!1});return}var f=dn(u);typeof h>"u"&&(h=t.getExternalLabelBounds(l,f)),h&&e.resizeShape(l,h,hL)}}this.preExecute=r,this.execute=o,this.revert=s,this.postExecute=c}M_.$inject=["modeling","textRenderer","bpmnFactory"];function Qm(e){return!e||!e.trim()}function Xt(e,t,n,i){qe.call(this,e,t,n),this._bpmnRules=i}me(Xt,qe);Xt.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];Xt.prototype.getHandlers=function(){var e=qe.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=ys,e["element.updateProperties"]=bs,e["canvas.updateRoot"]=su,e["lane.add"]=of,e["lane.resize"]=ws,e["lane.split"]=af,e["lane.updateRefs"]=_s,e["id.updateClaim"]=lu,e["element.setColor"]=lf,e["element.updateLabel"]=M_,e};Xt.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};Xt.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};Xt.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};Xt.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};Xt.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};Xt.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};Xt.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};Xt.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Xt.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Xt.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};Xt.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};Xt.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};Xt.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function $_(){}$_.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Se(t.source||e.source),t.connectionEnd||Se(t.target||e.target)]};var nl=20,dL=5,Yl=Math.round,Jm=20,fL={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function gL(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function mL(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function R_(e,t,n){var i=Zt(t,e,dL),r=n.split(":")[0],o=Yl((t.x-e.x)/2+e.x),s=Yl((t.y-e.y)/2+e.y),c,a,u=mL(r,i),l=/h|r|l/.test(r),p=!1,h=!1;return u?(c=l?{x:o,y:e.y}:{x:e.x,y:s},a=l?"h:h":"v:v"):(p=gL(i,r),a=l?"h:v":"v:h",p?l?(h=s===e.y,c={x:e.x+nl*(/l/.test(r)?-1:1),y:h?s+nl:s}):(h=o===e.x,c={x:h?o+nl:o,y:e.y+nl*(/t/.test(r)?-1:1)}):c={x:o,y:s}),{waypoints:cf(e,c,a).concat(c),directions:a,turnNextDirections:h}}function vL(e,t,n){return R_(e,t,n)}function yL(e,t,n){var i=R_(t,e,qm(n));return{waypoints:i.waypoints.slice().reverse(),directions:qm(i.directions),turnNextDirections:i.turnNextDirections}}function bL(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,o=cf(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function qm(e){return e.split(":").reverse().join(":")}function wL(e,t,n){var i=Yl((t.x-e.x)/2+e.x),r=Yl((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function cf(e,t,n){if(n=n||"h:h",!$L(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(I_(n)){var i=vL(e,t,n),r=yL(e,t,n),o=bL(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return wL(e,t,n)}function _L(e,t,n){var i=cf(e,t,n);return i.unshift(e),i.push(t),k_(i)}function xL(e,t,n,i,r){var o=r&&r.preferredLayouts||[],s=dE(o,"straight")[0]||"h:h",c=fL[s]||0,a=Zt(e,t,c),u=ML(a,s);n=n||Se(e),i=i||Se(t);var l=u.split(":"),p=tv(n,e,l[0],RL(a)),h=tv(i,t,l[1],a);return _L(p,h,u)}function EL(e,t,n,i,r,o){xe(n)&&(r=n,o=i,n=Se(e),i=Se(t)),o=J({preferredLayouts:[]},o),r=r||[];var s=o.preferredLayouts,c=s.indexOf("straight")!==-1,a;return a=c&&CL(e,t,n,i,o),a||(a=o.connectionEnd&&TL(t,e,i,r),a)||(a=o.connectionStart&&AL(e,t,n,r),a)?a:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:xL(e,t,n,i,o)}function SL(e,t,n){return e>=t&&e<=n}function ev(e,t,n){var i={x:"width",y:"height"};return SL(t[e],n[e],n[e]+n[i[e]])}function CL(e,t,n,i,r){var o={},s,c;return c=Zt(e,t),/^(top|bottom|left|right)$/.test(c)?(/top|bottom/.test(c)&&(s="x"),/left|right/.test(c)&&(s="y"),r.preserveDocking==="target"?ev(s,i,e)?(o[s]=i[s],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:i.x,y:i.y}]):null:ev(s,n,t)?(o[s]=n[s],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}}]):null):null}function AL(e,t,n,i){return uf(e,t,n,i)}function TL(e,t,n,i){var r=i.slice().reverse();return r=uf(e,t,n,r),r?r.reverse():null}function uf(e,t,n,i){function r(l){return l.length<3?!0:l.length>4?!1:!!Be(l,function(p,h){var d=l[h-1];return d&&qa(p,d)<3})}function o(l,p,h){var d=gi(p,l);switch(d){case"v":return{x:h.x,y:l.y};case"h":return{x:l.x,y:h.y}}return{x:l.x,y:l.y}}function s(l,p,h){var d;for(d=l.length-2;d!==0;d--)if(Yf(l[d],p,Jm)||Yf(l[d],h,Jm))return l.slice(d);return l}if(r(i))return null;var c=i[0],a=i.slice(),u;return a[0]=n,a[1]=o(a[1],c,n),u=s(a,e,t),u!==a&&(a=uf(e,t,n,u)),a&&gi(a)?null:a}function ML(e,t){if(I_(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function $L(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function I_(e){return e&&/t|r|b|l/.test(e)}function RL(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function tv(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function k_(e){return e.reduce(function(t,n,i){var r=t[t.length-1],o=e[i+1];return Mh(r,o,n,0)||t.push(n),t},[])}var IL=-10,kL=40,LL={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},DL={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},pf={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},xa={top:"t",right:"r",bottom:"b",left:"l"};function cu(e){this._elementRegistry=e}me(cu,$_);cu.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,s=t.connectionEnd,c=this._elementRegistry,a,u;if(o||(o=nv(r&&r[0],n)),s||(s=nv(r&&r[r.length-1],i)),(B(e,"bpmn:Association")||B(e,"bpmn:DataAssociation"))&&r&&!iv(n,i))return[].concat([o],r.slice(1,-1),[s]);var l=i0(n,c)?LL:DL;return B(e,"bpmn:MessageFlow")?a=OL(n,i,l):(B(e,"bpmn:SequenceFlow")||iv(n,i))&&(n===i?a={preferredLayouts:WL(n,e,l)}:B(n,"bpmn:BoundaryEvent")?a={preferredLayouts:GL(n,i,s,l)}:Oa(n)||Oa(i)?a={preferredLayouts:l.subProcess,preserveDocking:BL(n)}:B(n,"bpmn:Gateway")?a={preferredLayouts:l.fromGateway}:B(i,"bpmn:Gateway")?a={preferredLayouts:l.toGateway}:a={preferredLayouts:l.default}),a&&(a=J(a,t),u=k_(EL(n,i,o,s,r,a))),u||[o,s]};function PL(e){var t=e.host;return Zt(Se(e),t,IL)}function OL(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:NL(e,t)}}function NL(e,t){return B(t,"bpmn:Participant")?"source":B(e,"bpmn:Participant")?"target":Oa(t)?"source":Oa(e)||B(t,"bpmn:Event")?"target":B(e,"bpmn:Event")?"source":null}function BL(e){return Oa(e)?"target":"source"}function nv(e,t){return e?e.original||e:Se(t)}function iv(e,t){return B(t,"bpmn:Activity")&&B(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Oa(e){return B(e,"bpmn:SubProcess")&&Ne(e)}function Rr(e,t){return e===t}function FL(e,t){return t.indexOf(e)!==-1}function Ro(e){var t=/right|left/.exec(e);return t&&t[0]}function Io(e){var t=/top|bottom/.exec(e);return t&&t[0]}function rv(e,t){return pf[e]===t}function jL(e,t){var n=Ro(e),i=pf[n];return t.indexOf(i)!==-1}function HL(e,t){var n=Io(e),i=pf[n];return t.indexOf(i)!==-1}function L_(e){return e==="right"||e==="left"}function WL(e,t,n){var i=t.waypoints,r=i&&i.length&&Zt(i[0],e);return r==="top"?n.loop.fromTop:r==="right"?n.loop.fromRight:r==="left"?n.loop.fromLeft:n.loop.fromBottom}function GL(e,t,n,i){var r=Se(e),o=Se(t),s=PL(e),c,a,u=Rr(e.host,t),l=FL(s,["top","right","bottom","left"]),p=Zt(o,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return u?zL(s,l,e,t,n,i):(c=VL(s,p,l,i.isHorizontal),a=UL(s,p,l,i.isHorizontal),[c+":"+a])}function zL(e,t,n,i,r,o){var s=t?e:o.isHorizontal?Io(e):Ro(e),c=xa[s],a;return t?L_(e)?a=ov("y",n,i,r)?"h":o.boundaryLoop.alternateHorizontalSide:a=ov("x",n,i,r)?"v":o.boundaryLoop.alternateVerticalSide:a=o.boundaryLoop.default,[c+":"+a]}function ov(e,t,n,i){var r=kL;return!(ju(e,i,n,r)||ju(e,i,{x:n.x+n.width,y:n.y+n.height},r)||ju(e,i,Se(t),r))}function ju(e,t,n,i){return Math.abs(t[e]-n[e])<i}function VL(e,t,n,i){if(n)return xa[e];var r=Io(e),o=Ro(e),s=Io(t),c=Ro(t);if(i){if(Rr(r,s)||rv(o,c))return xa[r]}else if(Rr(o,c)||rv(r,s))return xa[o];return xa[i?o:r]}function UL(e,t,n,i){return n?L_(e)?jL(e,t)||Rr(e,t)?"h":"v":HL(e,t)||Rr(e,t)?"v":"h":i?Rr(Io(e),Io(t))?"h":"v":Rr(Ro(e),Ro(t))?"v":"h"}cu.$inject=["elementRegistry"];function av(e){return J({original:e.point.original||e.point},e.actual)}function fr(e,t){this._elementRegistry=e,this._graphicsFactory=t}fr.$inject=["elementRegistry","graphicsFactory"];fr.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(av(i)),o.push(av(r)),o};fr.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,o,s;return r=n?0:i.length-1,o=i[r],s=this._getIntersection(t,e,n),{point:o,actual:s||o,idx:r}};fr.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return wp(i,r,n)};fr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};fr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};fr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const D_={__init__:["modeling","bpmnUpdater"],__depends__:[H2,ok,sk,lk,f_,Ok,Bk,zk,si,jh,v_],bpmnFactory:["type",kn],bpmnUpdater:["type",hn],elementFactory:["type",pr],modeling:["type",Xt],layouter:["type",cu],connectionDocking:["type",fr]},sv=Math.round;function uu(e,t,n,i,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=r,this._rules=o}uu.prototype.create=function(e,t,n){const i=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,s=this._eventBus,c=this._layouter,a=this._rules,u=o.createShape(J({type:t},n)),l=s.fire("autoPlace",{source:e,shape:u});if(!l)return;J(u,{x:l.x-sv(u.width/2),y:l.y-sv(u.height/2)});const p=a.allowed("connection.create",{source:e,target:u,hints:{targetParent:e.parent}});let h=null;p&&(h=o.createConnection(p),h.waypoints=c.layoutConnection(h,{source:e,target:u}),h.waypoints=r.getCroppedWaypoints(h,e,u)),i.create({created:[u,h].filter(d=>!bo(d))})};uu.prototype.cleanUp=function(){this._complexPreview.cleanUp()};uu.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const YL={__depends__:[nd,mI,D_],__init__:["appendPreview"],appendPreview:["type",uu]};var lv=Math.min,cv=Math.max;function Hu(e){e.preventDefault()}function Ma(e){e.stopPropagation()}function ZL(e){return e.nodeType===Node.TEXT_NODE}function XL(e){return[].slice.call(e)}function Yn(e){this.container=e.container,this.parent=Ie('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Ee("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=nn(this.autoResize,this),this.handlePaste=nn(this.handlePaste,this)}Yn.prototype.create=function(e,t,n,i){var r=this,o=this.parent,s=this.content,c=this.container;i=this.options=i||{},t=this.style=t||{};var a=Wn(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);J(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},a);var u=Wn(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return J(s.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},u),i.centerVertically&&J(s.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},u),s.innerText=n,ce.bind(s,"keydown",this.keyHandler),ce.bind(s,"mousedown",Ma),ce.bind(s,"paste",r.handlePaste),i.autoResize&&ce.bind(s,"input",this.autoResize),i.resizable&&this.resizable(t),c.appendChild(o),this.setSelection(s.lastChild,s.lastChild&&s.lastChild.length),o};Yn.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};Yn.prototype.insertText=function(e){e=KL(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Yn.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,o=t.endOffset,s=t.commonAncestorContainer,c=XL(s.childNodes),a,u;if(ZL(s)){var l=n.textContent;n.textContent=l.substring(0,r)+e+l.substring(o),a=n,u=r+e.length}else if(n===this.content&&i===this.content){var p=document.createTextNode(e);this.content.insertBefore(p,c[r]),a=p,u=p.textContent.length}else{var h=c.indexOf(n),d=c.indexOf(i);c.forEach(function(f,g){g===h?f.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(o):g>h&&g<=d&&ri(f)}),a=n,u=r+e.length}a&&u!==void 0&&setTimeout(function(){self.setSelection(a,u)})};Yn.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};Yn.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,s=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=Ie('<div class="djs-direct-editing-resize-handle"></div>');var c,a,u,l,p=function(f){Hu(f),Ma(f),c=f.clientX,a=f.clientY;var g=t.getBoundingClientRect();u=g.width,l=g.height,ce.bind(document,"mousemove",h),ce.bind(document,"mouseup",d)},h=function(f){Hu(f),Ma(f);var g=lv(cv(u+f.clientX-c,i),o),m=lv(cv(l+f.clientY-a,r),s);t.style.width=g+"px",t.style.height=m+"px",e.resizeHandler({width:u,height:l,dx:f.clientX-c,dy:f.clientY-a})},d=function(f){Hu(f),Ma(f),ce.unbind(document,"mousemove",h,!1),ce.unbind(document,"mouseup",d,!1)};ce.bind(n,"mousedown",p)}J(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Yn.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),ce.unbind(t,"keydown",this.keyHandler),ce.unbind(t,"mousedown",Ma),ce.unbind(t,"input",this.autoResize),ce.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),ri(n)),ri(e)};Yn.prototype.getValue=function(){return this.content.innerText.trim()};Yn.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Yn.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function KL(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Ln(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new Yn({container:t.getContainer(),keyHandler:nn(this._handleKey,this),resizeHandler:nn(this._handleResize,this)})}Ln.$inject=["eventBus","canvas"];Ln.prototype.registerProvider=function(e){this._providers.push(e)};Ln.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Ln.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Ln.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Ln.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()};Ln.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};Ln.prototype.getValue=function(){return this._textbox.getValue()};Ln.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Ln.prototype._handleResize=function(e){this._fire("resize",e)};Ln.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=Be(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const P_={__depends__:[Ic],__init__:["directEditing"],directEditing:["type",Ln]};function QL(e){return function(t){var n=t.target,i=ie(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,s=(r&&r.$type)===n.eventDefinitionType,c=!!n.triggeredByEvent==!!i.triggeredByEvent,a=n.isExpanded===void 0||n.isExpanded===Ne(e);return!o||!s||!c||!a}}var JL=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],qL=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],eD=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],tD=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],nD=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],iD=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],O_=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],rD=O_,uv=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],oD=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],aD=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],sD=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],lD=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],cD=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],uD=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const pv={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function wn(e,t,n,i,r,o,s,c){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=s,this._moddleCopy=c,this._register()}wn.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];wn.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};wn.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[];if(xe(e)||!n.allowed("shape.replace",{element:e}))return{};var r=QL(e);return B(t,"bpmn:DataObjectReference")?this._createEntries(e,oD):B(t,"bpmn:DataStoreReference")&&!B(e.parent,"bpmn:Collaboration")?this._createEntries(e,aD):B(t,"bpmn:StartEvent")&&!B(t.$parent,"bpmn:SubProcess")?(i=$e(JL,r),this._createEntries(e,i)):B(t,"bpmn:Participant")?(i=$e(uD,function(o){return Ne(e)!==o.target.isExpanded}),this._createEntries(e,i)):B(t,"bpmn:StartEvent")&&Yt(t.$parent)?(i=$e(lD,function(o){var s=o.target,c=s.isInterrupting!==!1,a=t.isInterrupting===c;return r(o)||!r(o)&&!a}),this._createEntries(e,i)):B(t,"bpmn:StartEvent")&&!Yt(t.$parent)&&B(t.$parent,"bpmn:SubProcess")?(i=$e(qL,r),this._createEntries(e,i)):B(t,"bpmn:EndEvent")?(i=$e(tD,function(o){var s=o.target;return s.eventDefinitionType=="bpmn:CancelEventDefinition"&&!B(t.$parent,"bpmn:Transaction")?!1:r(o)}),this._createEntries(e,i)):B(t,"bpmn:BoundaryEvent")?(i=$e(sD,function(o){var s=o.target;if(s.eventDefinitionType=="bpmn:CancelEventDefinition"&&!B(t.attachedToRef,"bpmn:Transaction"))return!1;var c=s.cancelActivity!==!1,a=t.cancelActivity==c;return r(o)||!r(o)&&!a}),this._createEntries(e,i)):B(t,"bpmn:IntermediateCatchEvent")||B(t,"bpmn:IntermediateThrowEvent")?(i=$e(eD,r),this._createEntries(e,i)):B(t,"bpmn:Gateway")?(i=$e(nD,r),this._createEntries(e,i)):B(t,"bpmn:Transaction")?(i=$e(O_,r),this._createEntries(e,i)):Yt(t)&&Ne(e)?(i=$e(rD,r),this._createEntries(e,i)):B(t,"bpmn:SubProcess")&&Ne(e)?(i=$e(iD,r),this._createEntries(e,i)):B(t,"bpmn:AdHocSubProcess")&&!Ne(e)?(i=$e(uv,function(o){var s=o.target,c=s.type==="bpmn:SubProcess",a=s.isExpanded===!0;return!c||a}),this._createEntries(e,i)):B(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,cD):B(t,"bpmn:FlowNode")?(i=$e(uv,r),B(t,"bpmn:SubProcess")&&!Ne(e)&&(i=$e(i,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,i)):{}};wn.prototype.getPopupMenuHeaderEntries=function(e){var t={};return B(e,"bpmn:Activity")&&!Yt(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),B(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),B(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),B(e,"bpmn:SubProcess")&&!B(e,"bpmn:Transaction")&&!Yt(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),N0(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};wn.prototype._createEntries=function(e,t){var n={},i=this;return Z(t,function(r){n[r.actionName]=i._createEntry(r,e)}),n};wn.prototype._createSequenceFlowEntries=function(e,t){var n=ie(e),i={},r=this._modeling,o=this._moddle,s=this;return Z(t,function(c){switch(c.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(B(n.sourceRef,"bpmn:ExclusiveGateway")||B(n.sourceRef,"bpmn:InclusiveGateway")||B(n.sourceRef,"bpmn:ComplexGateway")||B(n.sourceRef,"bpmn:Activity"))&&(i={...i,[c.actionName]:s._createEntry(c,e,function(){r.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&B(n.sourceRef,"bpmn:Activity")&&(i={...i,[c.actionName]:s._createEntry(c,e,function(){var a=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:a})})});break;default:B(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[c.actionName]:s._createEntry(c,e,function(){r.updateProperties(e,{conditionExpression:void 0})})}),(B(n.sourceRef,"bpmn:ExclusiveGateway")||B(n.sourceRef,"bpmn:InclusiveGateway")||B(n.sourceRef,"bpmn:ComplexGateway")||B(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[c.actionName]:s._createEntry(c,e,function(){r.updateProperties(e.source,{default:void 0})})})}}),i};wn.prototype._createEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},s=e.label;return s&&typeof s=="function"&&(s=s(t)),n=n||o,{label:i(s),className:e.className,action:n}};wn.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(u,l){if(l.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const p=e.businessObject.get("loopCharacteristics"),h=t._moddle.create(l.options.loopCharacteristics);p&&t._moddleCopy.copyElement(p,h),h.set("isSequential",l.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:h})}var r=ie(e),o=r.loopCharacteristics,s,c,a;return o&&(s=o.isSequential,c=o.isSequential===void 0,a=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:s,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:c,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};wn.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function r(s,c){t._modeling.updateModdleProperties(e,i,{isCollection:!c.active})}var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:r}}};wn.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(s,c){var a=c.active,u;a||(u=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:u})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:r}}};wn.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=ie(e),i=B(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,s){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};wn.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=ie(e),i=this,r=B0(e),o=B(e,"bpmn:BoundaryEvent")?pv["intermediate-event-non-interrupting"]:pv["start-event-non-interrupting"],s=!n[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:s,action:function(){i._modeling.updateProperties(e,{[r]:!!s})}}}};const pD={__depends__:[qh,f_,nd],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",wn]};function xs(e,t,n,i,r,o,s,c,a,u,l,p,h){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=s,this._create=c,this._popupMenu=a,this._canvas=u,this._rules=l,this._translate=p,this._eventBus=n,this._appendPreview=h,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(d){var f=d.context,g=f.shape;if(!(!Ia(d)||!i.isOpen(g))){var m=i.getEntries(g);m.replace&&m.replace.action.click(d,g)}}),n.on("contextPad.close",function(){h.cleanUp()})}xs.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];xs.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&J(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n};xs.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return xe(t)?jr(e,n=>t.includes(n)):t};xs.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,s=this._popupMenu,c=this._autoPlace,a=this._translate,u=this._appendPreview,l={};if(e.type==="label")return this._isDeleteAllowed([e])&&J(l,f()),l;var p=e.businessObject;function h(E,y){r.start(E,y)}function d(E,y){n.removeElements([y])}function f(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:a("Delete"),action:{click:d}}}}function g(E){var y=5,x=t.getPad(E).html,v=x.getBoundingClientRect(),S={x:v.left,y:v.bottom+y};return S}function m(E,y,x,v){function S(T,I){var C=i.createShape(J({type:E},v));o.start(T,C,{source:I})}var M=c?function(T,I){var C=i.createShape(J({type:E},v));c.append(I,C)}:S,$=c?function(T,I){return u.create(I,E,v),()=>{u.cleanUp()}}:null;return{group:"model",className:y,title:x,action:{dragstart:S,click:M,hover:$}}}function w(E){return function(y,x){n.splitLane(x,E),t.open(x,!0)}}if(Re(p,["bpmn:Lane","bpmn:Participant"])&&Ne(e)){var _=ki(e);J(l,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:a("Add lane above"),action:{click:function(E,y){n.addLane(y,"top")}}}}),_.length<2&&((Lt(e)?e.height>=120:e.width>=120)&&J(l,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:a("Divide into two lanes"),action:{click:w(2)}}}),(Lt(e)?e.height>=180:e.width>=180)&&J(l,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:a("Divide into three lanes"),action:{click:w(3)}}})),J(l,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:a("Add lane below"),action:{click:function(E,y){n.addLane(y,"bottom")}}}})}return B(p,"bpmn:FlowNode")&&(B(p,"bpmn:EventBasedGateway")?J(l,{"append.receive-task":m("bpmn:ReceiveTask","bpmn-icon-receive-task",a("Append receive task")),"append.message-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",a("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",a("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",a("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",a("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):hv(p,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?J(l,{"append.compensation-activity":m("bpmn:Task","bpmn-icon-task",a("Append compensation activity"),{isForCompensation:!0})}):!B(p,"bpmn:EndEvent")&&!p.isForCompensation&&!hv(p,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Yt(p)&&J(l,{"append.end-event":m("bpmn:EndEvent","bpmn-icon-end-event-none",a("Append end event")),"append.gateway":m("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",a("Append gateway")),"append.append-task":m("bpmn:Task","bpmn-icon-task",a("Append task")),"append.intermediate-event":m("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",a("Append intermediate/boundary event"))})),s.isEmpty(e,"bpmn-replace")||J(l,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:a("Change element"),action:{click:function(E,y){var x=J(g(y),{cursor:{x:E.x,y:E.y}});s.open(y,"bpmn-replace",x,{title:a("Change element"),width:300,search:!0})}}}}),B(p,"bpmn:SequenceFlow")&&J(l,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",a("Add text annotation"))}),Re(p,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&J(l,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",a("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:a("Connect to other element"),action:{click:h,dragstart:h}}}),B(p,"bpmn:TextAnnotation")&&J(l,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:a("Connect using association"),action:{click:h,dragstart:h}}}),Re(p,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&J(l,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:a("Connect using data input association"),action:{click:h,dragstart:h}}}),B(p,"bpmn:Group")&&J(l,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",a("Add text annotation"))}),this._isDeleteAllowed([e])&&J(l,f()),l};function hv(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return Z(o,function(s){s.$type===n&&(r=!0)}),i&&r}const hD={__depends__:[YL,P_,Pw,si,sd,Kc,pD],__init__:["contextPadProvider"],contextPadProvider:["type",xs]};var dD={horizontal:["x","width"],vertical:["y","height"]},dv=5;function Di(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return xe(i)?i:i?n:[]})}Di.$inject=["modeling","rules"];Di.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Di.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Di.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(Z(t,function(o){r=o(r,n,i)}),r):e};Di.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var o=ii(e,i);return Z(o,function(s,c){var a=n._findRange(s,i,r),u,l=t[t.length-1];l&&n._hasIntersection(l.range,a)?t[t.length-1].elements.push(s):(u={range:a,elements:[s]},t.push(u))}),t};Di.prototype._setOrientation=function(e){var t=dD[e];this._axis=t[0],this._dimension=t[1]};Di.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Di.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+dv,max:t+n-dv}};const fD={__init__:["distributeElements"],distributeElements:["type",Di]};function pu(e){Rn.call(this,e)}pu.$inject=["eventBus"];me(pu,Rn);pu.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=$e(t,function(n){var i=Re(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=bc(t),t.length<3?!1:t})};var fv={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},gD=900;function Es(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",gD,this)}Es.$inject=["popupMenu","distributeElements","translate","rules"];Es.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&J(t,this._getEntries(e)),t};Es.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};Es.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:fv.horizontal,action:function(o,s){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:fv.vertical,action:function(o,s){t.trigger(e,"vertical"),i.close()}}};return r};const mD={__depends__:[qh,fD],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",pu],distributeElementsMenuProvider:["type",Es]};var N_="is not a registered action",vD="is already registered";function Dn(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Dn.$inject=["eventBus","injector"];Dn.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),s=e.get("canvas",!1),c=e.get("rules",!1),a=e.get("keyboardMove",!1),u=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&i&&this.register("copy",function(){var l=i.get();if(l.length)return o.copy(l)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(l){r.stepZoom(l.value)}),s&&this.register("zoom",function(l){s.zoom(l.value)}),n&&i&&c&&this.register("removeSelection",function(){var l=i.get();if(l.length){var p=c.allowed("elements.delete",{elements:l}),h;p!==!1&&(xe(p)?h=p:h=l,h.length&&n.removeElements(h.slice()))}}),a&&this.register("moveCanvas",function(l){a.moveCanvas(l)}),u&&this.register("moveSelection",function(l){u.moveSelection(l.direction,l.accelerated)})};Dn.prototype.trigger=function(e,t){if(!this._actions[e])throw hf(e,N_);return this._actions[e](t)};Dn.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);Z(e,function(i,r){n._registerAction(r,i)})};Dn.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw hf(e,vD);this._actions[e]=t};Dn.prototype.unregister=function(e){if(!this.isRegistered(e))throw hf(e,N_);this._actions[e]=void 0};Dn.prototype.getActions=function(){return Object.keys(this._actions)};Dn.prototype.isRegistered=function(e){return!!this._actions[e]};function hf(e,t){return new Error(e+" "+t)}const yD={__init__:["editorActions"],editorActions:["type",Dn]};function hu(e){e.invoke(Dn,this)}me(hu,Dn);hu.$inject=["injector"];hu.prototype._registerDefaultActions=function(e){Dn.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),s=e.get("handTool",!1),c=e.get("globalConnect",!1),a=e.get("distributeElements",!1),u=e.get("alignElements",!1),l=e.get("directEditing",!1),p=e.get("searchPad",!1),h=e.get("modeling",!1),d=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var f=t.getRootElement(),g=n.filter(function(m){return m!==f});return i.select(g),g}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),s&&this._registerAction("handTool",function(){s.toggle()}),c&&this._registerAction("globalConnectTool",function(){c.toggle()}),i&&a&&this._registerAction("distributeElements",function(f){var g=i.get(),m=f.type;g.length&&a.trigger(g,m)}),i&&u&&this._registerAction("alignElements",function(f){var g=i.get(),m=[],w=f.type;g.length&&(m=$e(g,function(_){return!B(_,"bpmn:Lane")}),u.trigger(m,w))}),i&&h&&this._registerAction("setColor",function(f){var g=i.get();g.length&&h.setColor(g,f)}),i&&l&&this._registerAction("directEditing",function(){var f=i.get();f.length&&l.activate(f[0])}),p&&this._registerAction("find",function(){p.toggle()}),t&&h&&this._registerAction("moveToOrigin",function(){var f=t.getRootElement(),g,m;B(f,"bpmn:Collaboration")?m=n.filter(function(w){return B(w.parent,"bpmn:Collaboration")}):m=n.filter(function(w){return w!==f&&!B(w.parent,"bpmn:SubProcess")}),g=kt(m),h.moveElements(m,{x:-g.x,y:-g.y},f)}),i&&d&&this._registerAction("replaceElement",function(f){d.triggerEntry("replace","click",f)})};const bD={__depends__:[yD],editorActions:["type",hu]};function B_(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;Re(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}B_.$inject=["eventBus"];var Ml=10;function Wu(e,t,n){return n||(n="round"),Math[n](e/t)*t}var wD=1200,_D=800;function gr(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",_D,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],wD,function(o){var s=o.originalEvent;if(!(!r.active||s&&fn(s))){var c=o.context,a=c.gridSnappingContext;a||(a=c.gridSnappingContext={}),["x","y"].forEach(function(u){var l={},p=ED(o,u,e);p&&(l.offset=p);var h=xD(o,u);h&&J(l,h),Mo(o,u)||r.snapEvent(o,u,l)})}})}gr.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);bt(e,t,i)};gr.prototype.getGridSpacing=function(){return Ml};gr.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=Wu(e,Ml);var i,r;return t&&t.min&&(i=t.min,he(i)&&(i=Wu(i+n,Ml,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,he(r)&&(r=Wu(r+n,Ml,"floor"),e=Math.min(e,r))),e-=n,e};gr.prototype.isActive=function(){return this.active};gr.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};gr.prototype.toggleActive=function(){this.setActive(!this.active)};gr.$inject=["elementRegistry","eventBus","config.gridSnapping"];function xD(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,s=o.snapConstraints;if(s&&s[t])return s[t];s||(s=o.snapConstraints={}),s[t]||(s[t]={});var c=n.direction;i&&($l(t)?(s.x.min=i.left,s.x.max=i.right):(s.y.min=i.top,s.y.max=i.bottom));var a=r.min,u=r.max;return a&&($l(t)?mv(c)?s.x.max=a.left:s.x.min=a.right:gv(c)?s.y.max=a.top:s.y.min=a.bottom),u&&($l(t)?mv(c)?s.x.min=u.left:s.x.max=u.right:gv(c)?s.y.min=u.top:s.y.max=u.bottom),s[t]}function ED(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,s=o.snapLocation,c=o.snapOffset;return c&&he(c[t])||(c||(c=o.snapOffset={}),he(c[t])||(c[t]=0),!r)||(n.get(r.id)||($l(t)?c[t]+=r[t]+r.width/2:c[t]+=r[t]+r.height/2),!s)||(t==="x"?/left/.test(s)?c[t]-=r.width/2:/right/.test(s)&&(c[t]+=r.width/2):/top/.test(s)?c[t]-=r.height/2:/bottom/.test(s)&&(c[t]+=r.height/2)),c[t]}function $l(e){return e==="x"}function gv(e){return e.indexOf("n")!==-1}function mv(e){return e.indexOf("w")!==-1}function no(e,t){oe.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=r.hints||{},s=o.autoResize;if(s){var c=r.shape,a=r.newBounds;cn(s)?r.newBounds=n.snapComplex(a,s):r.newBounds=n.snapSimple(c,a)}})}no.$inject=["eventBus","gridSnapping","modeling"];me(no,oe);no.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};no.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};no.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),J(e,o),e};no.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),J(e,o),e};var SD=2e3;function F_(e,t){e.on(["spaceTool.move","spaceTool.end"],SD,function(n){var i=n.context;if(i.initialized){var r=i.axis,o;r==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}F_.$inject=["eventBus","gridSnapping"];const CD={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",no],gridSnappingSpaceToolBehavior:["type",F_]},AD={__depends__:[CD],__init__:["gridSnapping"],gridSnapping:["type",gr]};var TD=2e3;function j_(e,t,n){e.on("autoPlace",TD,function(i){var r=i.source,o=Se(r),s=i.shape,c=r0(r,s,n);return["x","y"].forEach(function(a){var u={};c[a]!==o[a]&&(c[a]>o[a]?u.min=c[a]:u.max=c[a],B(s,"bpmn:TextAnnotation")&&(MD(a)?u.offset=-s.width/2:u.offset=-s.height/2),c[a]=t.snapValue(c[a],u))}),c})}j_.$inject=["eventBus","gridSnapping","elementRegistry"];function MD(e){return e==="x"}var $D=1750;function H_(e,t,n){t.on(["create.start","shape.move.start"],$D,function(i){var r=i.context,o=r.shape,s=e.getRootElement();if(!(!B(o,"bpmn:Participant")||!B(s,"bpmn:Process")||!s.children.length)){var c=r.createConstraints;c&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}H_.$inject=["canvas","eventBus","gridSnapping"];var RD=3e3;function du(e,t,n){oe.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],RD,function(r){var o=r.context,s=o.connection,c=o.hints||{},a=s.waypoints;c.connectionStart||c.connectionEnd||c.createElementsBehavior===!1||ID(a)&&n.updateWaypoints(s,i.snapMiddleSegments(a))})}du.$inject=["eventBus","gridSnapping","modeling"];me(du,oe);du.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=DD(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function ID(e){return e.length>3}function kD(e){return e==="h"}function LD(e){return e==="v"}function DD(e,t,n){var i=gi(t,n),r={};return kD(i)&&(r.y=e.snapValue(t.y)),LD(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=J({},t,r),n=J({},n,r)),[t,n]}const PD={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",j_],gridSnappingParticipantBehavior:["type",H_],gridSnappingLayoutConnectionBehavior:["type",du]},OD={__depends__:[AD,PD],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",B_]};var ND=30,W_=30;function Ss(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;if(B(r,"bpmn:Lane"))return n._createParticipantHit(r,o);if(B(r,"bpmn:Participant"))return Ne(r)?n._createParticipantHit(r,o):n._createDefaultHit(r,o);if(B(r,"bpmn:SubProcess"))return Ne(r)?n._createSubProcessHit(r,o):n._createDefaultHit(r,o)})}Ss.$inject=["eventBus","interactionEvents"];Ss.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};Ss.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=Lt(e)?{width:ND,height:e.height}:{width:e.width,height:W_};return this._interactionEvents.createBoxHit(t,"all",n),!0};Ss.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:W_}),!0};const BD={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",Ss]};function fu(e){e.invoke(Yo,this)}me(fu,Yo);fu.$inject=["injector"];fu.prototype.registerBindings=function(e,t){Yo.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};const FD={__depends__:[Vh],__init__:["keyboardBindings"],keyboardBindings:["type",fu]};var jD={moveSpeed:1,moveSpeedAccelerated:10},HD=1500,vv="left",yv="up",bv="right",wv="down",WD={ArrowLeft:vv,Left:vv,ArrowUp:yv,Up:yv,ArrowRight:bv,Right:bv,ArrowDown:wv,Down:wv},GD={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function G_(e,t,n,i,r){var o=this;this._config=J({},jD,e||{}),t.addListener(HD,function(s){var c=s.keyEvent,a=WD[c.key];if(a&&!t.isCmd(c)){var u=t.isShift(c);return o.moveSelection(a,u),!0}}),this.moveSelection=function(s,c){var a=r.get();if(a.length){var u=this._config[c?"moveSpeedAccelerated":"moveSpeed"],l=GD[s](u),p=i.allowed("elements.move",{shapes:a});p&&n.moveElements(a,l)}}}G_.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const zD={__depends__:[Vh,si],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",G_]};var _v=10;function Cs(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(a,u){var l=a.shape,p=a.direction,h=a.resizeConstraints,d;a.delta=u,d=MI(l,p,u),a.newBounds=RI(d,h),a.canExecute=r.canResize(a)}function s(a){var u=a.resizeConstraints,l=a.minBounds;u===void 0&&(l===void 0&&(l=r.computeMinResizeBox(a)),a.resizeConstraints={min:be(l)})}function c(a){var u=a.shape,l=a.canExecute,p=a.newBounds;if(l){if(p=kb(p),!VD(u,p))return;n.resizeShape(u,p)}}e.on("resize.start",function(a){s(a.context)}),e.on("resize.move",function(a){var u={x:a.dx,y:a.dy};o(a.context,u)}),e.on("resize.end",function(a){c(a.context)})}Cs.prototype.canResize=function(e){var t=this._rules,n=Wn(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};Cs.prototype.activate=function(e,t,n){var i=this._dragging,r,o;if(typeof n=="string"&&(n={direction:n}),r=J({shape:t},n),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,z_(t,o),"resize",{autoActivate:!0,cursor:UD(o),data:{shape:t,context:r}})};Cs.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:_v,height:_v},r=M0(t,e.childrenBoxPadding),II(n,t,i,r)};Cs.$inject=["eventBus","rules","modeling","dragging"];function VD(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function z_(e,t){var n=Se(e),i=be(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function UD(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var xv="djs-resizing",Ev="resize-not-ok",YD=500;function V_(e,t,n){function i(o){var s=o.shape,c=o.newBounds,a=o.frame;a||(a=o.frame=n.addFrame(s,t.getActiveLayer()),t.addMarker(s,xv)),c.width>5&&te(a,{x:c.x,width:c.width}),c.height>5&&te(a,{y:c.y,height:c.height}),o.canExecute?ke(a).remove(Ev):ke(a).add(Ev)}function r(o){var s=o.shape,c=o.frame;c&&Je(o.frame),t.removeMarker(s,xv)}e.on("resize.move",YD,function(o){i(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}V_.$inject=["eventBus","canvas","previewSupport"];var Sv=-6,Cv=8,Av=20,ya="djs-resizer",ZD=["n","w","s","e","nw","ne","se","sw"];function mr(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(o){var s=o.newSelection;r.removeResizers(),s.length===1&&Z(s,nn(r.addResizer,r))}),e.on("shape.changed",function(o){var s=o.element;n.isSelected(s)&&(r.removeResizers(),r.addResizer(s))})}mr.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(o){sr(o)&&i.activate(o,e,n)}ce.bind(t,"mousedown",r),ce.bind(t,"touchstart",r)};mr.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=XD(i),s=ue("g");ke(s).add(ya),ke(s).add(ya+"-"+e.id),ke(s).add(ya+"-"+i),de(r,s);var c=ue("rect");te(c,{x:-8/2+o.x,y:-8/2+o.y,width:Cv,height:Cv}),ke(c).add(ya+"-visual"),de(s,c);var a=ue("rect");return te(a,{x:-20/2+o.x,y:-20/2+o.y,width:Av,height:Av}),ke(a).add(ya+"-hit"),de(s,a),vl(s,t,n),s};mr.prototype.createResizer=function(e,t){var n=z_(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};mr.prototype.addResizer=function(e){var t=this;et(e)||!this._resize.canResize({shape:e})||Z(ZD,function(n){t.createResizer(e,n)})};mr.prototype.removeResizers=function(){var e=this._getResizersParent();Yr(e)};mr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};mr.$inject=["eventBus","canvas","selection","resize"];function XD(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=6:e.indexOf("w")!==-1&&(t.x=Sv),e.indexOf("s")!==-1?t.y=6:e.indexOf("n")!==-1&&(t.y=Sv),t}const U_={__depends__:[ci,Ri,Jo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Cs],resizePreview:["type",V_],resizeHandles:["type",mr]};var KD=2e3;function As(e,t,n,i,r,o,s){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=s,i.registerProvider(this),e.on("element.dblclick",function(a){c(a.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],KD,function(a){i.isActive(a.element)&&i.cancel()}),e.on(["commandStack.changed"],function(a){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(a){o.removeResizers()}),e.on("create.end",500,function(a){var u=a.context,l=u.shape,p=a.context.canExecute,h=a.isTouch;h||p&&(u.hints&&u.hints.createElementsBehavior===!1||c(l))}),e.on("autoPlace.end",500,function(a){c(a.shape)});function c(a,u){(u||Re(a,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||df(a))&&i.activate(a)}}As.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];As.prototype.activate=function(e){var t=dn(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);J(n,i);var r={},o=n.style||{};return J(o,{backgroundColor:null,border:null}),(Re(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||df(e))&&J(r,{centerVertically:!0}),Br(e)&&(J(r,{autoResize:!0}),J(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),B(e,"bpmn:TextAnnotation")&&(J(r,{resizable:!0,autoResize:!0}),J(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),J(n,{options:r,style:o}),n}};As.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},s=t.zoom(),c=this._textRenderer.getDefaultStyle(),a=this._textRenderer.getExternalStyle(),u=a.fontSize*s,l=a.lineHeight,p=c.fontSize*s,h=c.lineHeight,d={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(B(e,"bpmn:Lane")||qD(e)){var f=Lt(e),g=f?{width:i.height,height:30*s,x:i.x-i.height/2+15*s,y:r.y-30*s/2}:{width:i.width,height:30*s};J(o,g),J(d,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:f?"rotate(-90deg)":null})}if(JD(e)){var m=Lt(e),w=m?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:r.x-i.height/2,y:r.y-i.width/2};J(o,w),J(d,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px",transform:m?null:"rotate(-90deg)"})}(Re(e,["bpmn:Task","bpmn:CallActivity"])||df(e))&&(J(o,{width:i.width,height:i.height}),J(d,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"})),QD(e)&&(J(o,{width:i.width,x:i.x}),J(d,{fontSize:p+"px",lineHeight:h,paddingTop:7*s+"px",paddingBottom:7*s+"px",paddingLeft:5*s+"px",paddingRight:5*s+"px"}));var _=90*s,E=7*s,y=4*s;if(n.labelTarget&&(J(o,{width:_,height:i.height+E+y,x:r.x-_/2,y:i.y-E}),J(d,{fontSize:u+"px",lineHeight:l,paddingTop:E+"px",paddingBottom:y+"px"})),Br(n)&&!Cc(n)&&!Ge(n)){var x=Fh(e),v=t.getAbsoluteBBox({x:x.x,y:x.y,width:0,height:0}),S=u+E+y;J(o,{width:_,height:S,x:v.x-_/2,y:v.y-S/2}),J(d,{fontSize:u+"px",lineHeight:l,paddingTop:E+"px",paddingBottom:y+"px"})}return B(e,"bpmn:TextAnnotation")&&(J(o,{width:i.width,height:i.height,minWidth:30*s,minHeight:10*s}),J(d,{textAlign:"left",paddingTop:5*s+"px",paddingBottom:7*s+"px",paddingLeft:7*s+"px",paddingRight:5*s+"px",fontSize:p+"px",lineHeight:h})),{bounds:o,style:d}};As.prototype.update=function(e,t,n,i){var r,o;B(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),eP(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function df(e){return B(e,"bpmn:SubProcess")&&!Ne(e)}function QD(e){return B(e,"bpmn:SubProcess")&&Ne(e)}function JD(e){return B(e,"bpmn:Participant")&&!Ne(e)}function qD(e){return B(e,"bpmn:Participant")&&Ne(e)}function eP(e){return!e||!e.trim()}var Tv="djs-element-hidden",Mv="djs-label-hidden";function Y_(e,t,n){var i=this,r=t.getDefaultLayer(),o,s,c;e.on("directEditing.activate",function(a){var u=a.active;if(o=u.element.label||u.element,B(o,"bpmn:TextAnnotation")){s=t.getAbsoluteBBox(o),c=ue("g");var l=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),p=i.path=ue("path");te(p,{d:l,strokeWidth:2,stroke:tP(o)}),de(c,p),de(r,c),Ft(c,o.x,o.y)}B(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,Tv):(B(o,"bpmn:Task")||B(o,"bpmn:CallActivity")||B(o,"bpmn:SubProcess")||B(o,"bpmn:Participant")||B(o,"bpmn:Lane"))&&t.addMarker(o,Mv)}),e.on("directEditing.resize",function(a){if(B(o,"bpmn:TextAnnotation")){var u=a.height,l=a.dy,p=Math.max(o.height/s.height*(u+l),0),h=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:p,position:{mx:0,my:0}});te(i.path,{d:h})}}),e.on(["directEditing.complete","directEditing.cancel"],function(a){var u=a.active;u&&(t.removeMarker(u.element.label||u.element,Tv),t.removeMarker(o,Mv)),o=void 0,s=void 0,c&&(Je(c),c=void 0)})}Y_.$inject=["eventBus","canvas","pathMap"];function tP(e,t){var n=je(e);return n.get("stroke")||t||"black"}const nP={__depends__:[jh,U_,P_],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",As],labelEditingPreview:["type",Y_]};var iP=new os("tt");function rP(e){var t=Ie('<div class="djs-tooltip-container" />');return Vt(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function oP(e,t,n){Vt(e,{left:t+"px",top:n+"px"})}function ff(e,t){e.style.display=t===!1?"none":""}var Z_="djs-tooltip",Gu="."+Z_;function on(e,t){this._eventBus=e,this._canvas=t,this._ids=iP,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=rP(t.getContainer());var n=this;It.bind(this._tooltipRoot,Gu,"mousedown",function(i){i.stopPropagation()}),It.bind(this._tooltipRoot,Gu,"mouseover",function(i){n.trigger("mouseover",i)}),It.bind(this._tooltipRoot,Gu,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}on.$inject=["eventBus","canvas"];on.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=J({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};on.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(ft(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};on.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};on.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};on.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};on.prototype.remove=function(e){var t=this.get(e);t&&(ri(t.html),ri(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};on.prototype.show=function(){ff(this._tooltipRoot)};on.prototype.hide=function(){ff(this._tooltipRoot,!1)};on.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};on.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),cn(n)&&(n=Ie(n)),i=Ie('<div data-tooltip-id="'+t+'" class="'+Z_+'">'),Vt(i,{position:"absolute"}),i.appendChild(n),e.type&&ve(i).add("djs-tooltip-"+e.type),e.className&&ve(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};on.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;oP(n,t.x,t.y)};on.prototype._updateTooltipVisibilty=function(e){Z(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),ff(i,r))})};on.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const aP={__init__:["tooltips"],tooltips:["type",on]};var sP="flow elements must be children of pools/participants";function X_(e,t,n){function i(r,o,s){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,s=o.shape,c=o.target;B(c,"bpmn:Collaboration")&&B(s,"bpmn:FlowNode")&&i(r,n(sP))})}X_.$inject=["eventBus","tooltips","translate"];const lP={__depends__:[aP],__init__:["modelingFeedback"],modelingFeedback:["type",X_]};var cP=500,uP=1250,pP=1500,Zl=Math.round;function hP(e){return{x:e.x+Zl(e.width/2),y:e.y+Zl(e.height/2)}}function K_(e,t,n,i,r){function o(c,a,u,l){return r.allowed("elements.move",{shapes:c,delta:a,position:u,target:l})}e.on("shape.move.start",pP,function(c){var a=c.context,u=c.shape,l=i.get().slice();l.indexOf(u)===-1&&(l=[u]),l=dP(l),J(a,{shapes:l,validatedShapes:l,shape:u})}),e.on("shape.move.start",uP,function(c){var a=c.context,u=a.validatedShapes,l;if(l=a.canExecute=o(u),!l)return!1}),e.on("shape.move.move",cP,function(c){var a=c.context,u=a.validatedShapes,l=c.hover,p={x:c.dx,y:c.dy},h={x:c.x,y:c.y},d;if(d=o(u,p,h,l),a.delta=p,a.canExecute=d,d===null){a.target=null;return}a.target=l}),e.on("shape.move.end",function(c){var a=c.context,u=a.delta,l=a.canExecute,p=l==="attach",h=a.shapes;if(l===!1)return!1;u.x=Zl(u.x),u.y=Zl(u.y),!(u.x===0&&u.y===0)&&n.moveElements(h,u,a.target,{primaryShape:a.shape,attach:p})}),e.on("element.mousedown",function(c){if(sr(c)){var a=Vo(c);if(!a)throw new Error("must supply DOM mousedown event");return s(a,c.element)}});function s(c,a,u,l){if(ht(u)&&(l=u,u=!1),!(a.waypoints||!a.parent)&&!ke(c.target).has("djs-hit-no-move")){var p=hP(a);return t.init(c,p,"shape.move",{cursor:"grabbing",autoActivate:u,data:{shape:a,context:l||{}}}),!0}}this.start=s}K_.$inject=["eventBus","dragging","modeling","selection","rules"];function dP(e){var t=Oo(e,"id");return $e(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var $v=499,zu="djs-dragging",Rv="drop-ok",Iv="drop-not-ok",kv="new-parent",Lv="attach-ok";function Q_(e,t,n,i){function r(a){var u=o(a),l=fP(u);return l}function o(a){var u=Ja(a,!0),l=u.flatMap(d=>(d.incoming||[]).concat(d.outgoing||[])),p=u.concat(l),h=[...new Set(p)];return h}function s(a,u){[Lv,Rv,Iv,kv].forEach(function(l){l===u?t.addMarker(a,l):t.removeMarker(a,l)})}function c(a,u,l){i.addDragger(u,a.dragGroup),l&&t.addMarker(u,zu),a.allDraggedElements?a.allDraggedElements.push(u):a.allDraggedElements=[u]}e.on("shape.move.start",$v,function(a){var u=a.context,l=u.shapes,p=u.allDraggedElements,h=r(l);if(!u.dragGroup){var d=ue("g");te(d,n.cls("djs-drag-group",["no-events"]));var f=t.getActiveLayer();de(f,d),u.dragGroup=d}h.forEach(function(g){i.addDragger(g,u.dragGroup)}),p?p=sh([p,o(l)]):p=o(l),Z(p,function(g){t.addMarker(g,zu)}),u.allDraggedElements=p,u.differentParents=gP(l)}),e.on("shape.move.move",$v,function(a){var u=a.context,l=u.dragGroup,p=u.target,h=u.shape.parent,d=u.canExecute;p&&(d==="attach"?s(p,Lv):u.canExecute&&h&&p.id!==h.id?s(p,kv):s(p,u.canExecute?Rv:Iv)),Ft(l,a.dx,a.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(a){var u=a.context,l=u.target;l&&s(l,null)}),e.on("shape.move.cleanup",function(a){var u=a.context,l=u.allDraggedElements,p=u.dragGroup;Z(l,function(h){t.removeMarker(h,zu)}),p&&Je(p)}),this.makeDraggable=c}Q_.$inject=["eventBus","canvas","styles","previewSupport"];function fP(e){var t=$e(e,function(n){return et(n)?Be(e,Bn({id:n.source.id}))&&Be(e,Bn({id:n.target.id})):!0});return t}function gP(e){return fE(Oo(e,function(t){return t.parent&&t.parent.id}))!==1}const mP={__depends__:[Ic,si,Wh,ci,Ri,Jo],__init__:["move","movePreview"],move:["type",K_],movePreview:["type",Q_]};var J_=".djs-palette-toggle",q_=".entry",vP=J_+", "+q_,Zp="djs-palette-",yP="shown",Xp="open",Dv="two-column",bP=1e3;function _t(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}_t.$inject=["eventBus","canvas"];_t.prototype.registerProvider=function(e,t){t||(t=e,e=bP),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};_t.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(_P,{})};_t.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};_t.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=Ie(_t.HTML_MARKUP);n.appendChild(i),ve(n).add(Zp+yP),It.bind(i,vP,"click",function(r){var o=r.delegateTarget;if(Ua(o,J_))return e.toggle();e.trigger("click",r)}),ce.bind(i,"mousedown",function(r){r.stopPropagation()}),It.bind(i,q_,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};_t.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};_t.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=ve(n),s=ve(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(Dv,r),s.toggle(Zp+Dv,r),"open"in e&&(o.toggle(Xp,e.open),s.toggle(Zp+Xp,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};_t.prototype._update=function(){var e=Ee(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Fo(e),Z(t,function(n,i){var r=n.group||"default",o=Ee("[data-group="+Ra(r)+"]",e);o||(o=Ie('<div class="group"></div>'),ft(o,"data-group",r),e.appendChild(o));var s=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=Ie(s);if(o.appendChild(c),!n.separator&&(ft(c,"data-action",i),n.title&&ft(c,"title",n.title),n.className&&wP(c,n.className),n.imageUrl)){var a=Ie("<img>");ft(a,"src",n.imageUrl),c.appendChild(a)}}),this.open()};_t.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=ft(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};_t.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,s;if(o=r[e],!!o&&(s=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(ot(s)){if(t==="click")return s(n,i)}else if(s[t])return s[t](n,i);n.preventDefault()}};_t.prototype._layoutChanged=function(){this._toggleState({})};_t.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};_t.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};_t.prototype.open=function(){this._toggleState({open:!0})};_t.prototype.toggle=function(){this.isOpen()?this.close():this.open()};_t.prototype.isActiveTool=function(e){return e&&this._activeTool===e};_t.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Ee(".djs-palette-entries",this._container),this._toolsContainer=Ee("[data-group=tools]",t)),n=this._toolsContainer,Z(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=ve(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};_t.prototype.isOpen=function(){return ve(this._container).has(Xp)};_t.prototype._getParentContainer=function(){return this._canvas.getContainer()};_t.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function wP(e,t){var n=ve(e),i=xe(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function _P(e,t){var n=t.getPaletteEntries();return ot(n)?n(e):(Z(n,function(i,r){e[r]=i}),e)}const xP={__init__:["palette"],palette:["type",_t]};var ex="crosshair";function io(e,t,n,i,r,o,s){this._selection=r,this._dragging=n,this._mouse=s;var c=this,a={create:function(u){var l=t.getActiveLayer(),p;p=u.frame=ue("rect"),te(p,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),de(l,p)},update:function(u){var l=u.frame,p=u.bbox;te(l,{x:p.x,y:p.y,width:p.width,height:p.height})},remove:function(u){u.frame&&Je(u.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var l=u.originalEvent.target;!u.hover&&!(l instanceof SVGElement)||e.once("lasso.selection.ended",function(){c.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",0,function(u){var l=u.context,p=Vu(u),h=i.filter(function(f){return f}),d=Bl(u);c.select(h,p,d?l.selection:[])}),e.on("lasso.start",function(u){var l=u.context;l.bbox=Vu(u),a.create(l),l.selection=r.get()}),e.on("lasso.move",function(u){var l=u.context;l.bbox=Vu(u),a.update(l)}),e.on("lasso.cleanup",function(u){var l=u.context;a.remove(l)}),e.on("element.mousedown",1500,function(u){if(Bl(u))return c.activateLasso(u.originalEvent),!0})}io.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];io.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:ex,data:{context:{}}})};io.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:ex,data:{context:{}},keepSelection:!0})};io.prototype.select=function(e,t,n=[]){var i=vC(e,t);this._selection.select([...n,...rc(i)])};io.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};io.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Vu(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const EP={__depends__:[Qc,us],__init__:["lassoTool"],lassoTool:["type",io]};var Uu=1500,tx="grab";function qo(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var s=this,c=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Uu,function(a){if(Ia(a))return s.activateMove(a.originalEvent,!0),!1}),c&&c.addListener(Uu,function(a){if(!(!Pv(a.keyEvent)||s.isActive())){var u=s._mouse.getLastMoveEvent();s.activateMove(u,!!u)}},"keyboard.keydown"),c&&c.addListener(Uu,function(a){!Pv(a.keyEvent)||!s.isActive()||s.toggle()},"keyboard.keyup"),e.on("hand.end",function(a){var u=a.originalEvent.target;if(!a.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){s.activateMove(a.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(a){var u=t.viewbox().scale;t.scroll({dx:a.dx*u,dy:a.dy*u})}),e.on("hand.move.end",function(a){var u=a.context,l=u.reactivate;return!Ia(a)&&l&&e.once("hand.move.ended",function(p){s.activateHand(p.originalEvent,!0,!0)}),!1})}qo.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];qo.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:tx,data:{context:n||{}}})};qo.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:tx,data:{context:{reactivate:n}}})};qo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};qo.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function Pv(e){return Rt("Space",e)}const SP={__depends__:[Qc,us],__init__:["handTool"],handTool:["type",qo]};var Ov="connect-ok",Nv="connect-not-ok";function ea(e,t,n,i,r,o,s){var c=this;this._dragging=t,this._rules=o,this._mouse=s,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(a){var u=a.context,l=a.hover,p=u.canStartConnect=c.canStartConnect(l);p!==null&&(u.startTarget=l,i.addMarker(l,p?Ov:Nv))}),e.on(["global-connect.out","global-connect.cleanup"],function(a){var u=a.context.startTarget,l=a.context.canStartConnect;u&&i.removeMarker(u,l?Ov:Nv)}),e.on(["global-connect.ended"],function(a){var u=a.context,l=u.startTarget,p={x:a.x,y:a.y},h=c.canStartConnect(l);if(h)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,l,p)}),!1})}ea.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];ea.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};ea.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};ea.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};ea.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const CP={__depends__:[sd,ci,Ri,Qc,us],globalConnect:["type",ea]};function gf(e,t,n,i,r,o,s,c){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=s,this._translate=c,e.registerProvider(this)}gf.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];gf.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,o=this._handTool,s=this._globalConnect,c=this._translate;function a(p,h,d,f,g){function m(w){var _=n.createShape(J({type:p},g));t.start(w,_)}return{group:h,className:d,title:f,action:{dragstart:m,click:m}}}function u(p){var h=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),d=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:h});t.start(p,[h,d],{hints:{autoSelect:[h]}})}function l(p){t.start(p,n.createParticipantShape())}return J(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:c("Activate hand tool"),action:{click:function(p){o.activateHand(p)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:c("Activate lasso tool"),action:{click:function(p){r.activateSelection(p)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:c("Activate create/remove space tool"),action:{click:function(p){i.activateSelection(p)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:c("Activate global connect tool"),action:{click:function(p){s.start(p)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":a("bpmn:StartEvent","event","bpmn-icon-start-event-none",c("Create start event")),"create.intermediate-event":a("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",c("Create intermediate/boundary event")),"create.end-event":a("bpmn:EndEvent","event","bpmn-icon-end-event-none",c("Create end event")),"create.exclusive-gateway":a("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",c("Create gateway")),"create.task":a("bpmn:Task","activity","bpmn-icon-task",c("Create task")),"create.data-object":a("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",c("Create data object reference")),"create.data-store":a("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",c("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:c("Create expanded sub-process"),action:{dragstart:u,click:u}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:c("Create pool/participant"),action:{dragstart:l,click:l}},"create.group":a("bpmn:Group","artifact","bpmn-icon-group",c("Create group"))}),e};const AP={__depends__:[xP,Kc,v_,EP,SP,CP,Tc],__init__:["paletteProvider"],paletteProvider:["type",gf]};var TP=250;function mf(e,t,n,i,r){oe.call(this,e);function o(c){var a=c.canExecute.replacements;Z(a,function(u){var l=u.oldElementId,p={type:u.newElementType};if(!c.visualReplacements[l]){var h=t.get(l);J(p,{x:h.x,y:h.y});var d=n.createShape(p);i.addShape(d,h.parent);var f=Ee('[data-element-id="'+Ra(h.id)+'"]',c.dragGroup);f&&te(f,{display:"none"});var g=r.addDragger(d,c.dragGroup);c.visualReplacements[l]=g,i.removeShape(d)}})}function s(c){var a=c.visualReplacements;Z(a,function(u,l){var p=Ee('[data-element-id="'+Ra(l)+'"]',c.dragGroup);p&&te(p,{display:"inline"}),u.remove(),a[l]&&delete a[l]})}e.on("shape.move.move",TP,function(c){var a=c.context,u=a.canExecute;a.visualReplacements||(a.visualReplacements={}),u&&u.replacements?o(a):s(a)})}mf.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];me(mf,oe);const MP={__depends__:[Jo],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",mf]};var $P=1250,Yu=40,RP=20,IP=10,Bv=20,nx=["x","y"],kP=Math.abs;function ix(e){e.on(["connect.hover","connect.move","connect.end"],$P,function(t){var n=t.context,i=n.canExecute,r=n.start,o=n.hover,s=n.source,c=n.target;t.originalEvent&&fn(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&LP(t,o,NP(o)),o&&OP(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Sn(r),Re(o,["bpmn:Event","bpmn:Gateway"])&&Fv(t,Sn(o)),Re(o,["bpmn:Task","bpmn:SubProcess"])&&DP(t,o),B(s,"bpmn:BoundaryEvent")&&c===s.host&&PP(t)):rx(i,"bpmn:MessageFlow")?(B(r,"bpmn:Event")&&(n.connectionStart=Sn(r)),B(o,"bpmn:Event")&&Fv(t,Sn(o))):n.connectionStart=n.initialConnectionStart)})}ix.$inject=["eventBus"];function LP(e,t,n){nx.forEach(function(i){var r=ox(i,t);e[i]<t[i]+n?bt(e,i,t[i]+n):e[i]>t[i]+r-n&&bt(e,i,t[i]+r-n)})}function DP(e,t){var n=Sn(t);nx.forEach(function(i){BP(e,t,i)&&bt(e,i,n[i])})}function PP(e){var t=e.context,n=t.source,i=t.target;if(!FP(t)){var r=Sn(n),o=Zt(r,i,-10),s=[];/top|bottom/.test(o)&&s.push("x"),/left|right/.test(o)&&s.push("y"),s.forEach(function(c){var a=e[c],u;kP(a-r[c])<Yu&&(a>r[c]?u=r[c]+Yu:u=r[c]-Yu,bt(e,c,u))})}}function Fv(e,t){bt(e,"x",t.x),bt(e,"y",t.y)}function rx(e,t){return e&&e.type===t}function OP(e,t){return qt(t,function(n){return rx(e,n)})}function ox(e,t){return e==="x"?t.width:t.height}function NP(e){return B(e,"bpmn:Task")?IP:RP}function BP(e,t,n){return e[n]>t[n]+Bv&&e[n]<t[n]+ox(n,t)-Bv}function FP(e){var t=e.hover,n=e.source;return t&&n&&t===n}function vr(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}vr.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};vr.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};vr.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};vr.prototype.getSnapLocations=function(){return this._snapLocations};vr.prototype.setSnapLocations=function(e){this._snapLocations=e};vr.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new gu,n.initDefaults(this._defaultSnaps)),n};function gu(){this._snapValues={}}gu.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};gu.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&qR(e[n],r[n],i)};gu.prototype.initDefaults=function(e){var t=this;Z(e||{},function(n,i){Z(n,function(r){t.add(i,r)})})};var jP=1250;function ui(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],jP,function(r){var o=r.context,s=o.shape,c=o.snapContext,a=o.target;if(!(r.originalEvent&&fn(r.originalEvent))&&!(Mo(r)||!a)){var u=c.pointsForTarget(a);u.initialized||(u=i.addSnapTargetPoints(u,s,a),u.initialized=!0),n.snap(r,u)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}ui.$inject=["elementRegistry","eventBus","snapping"];ui.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new vr);var o;t.get(i.id)?o=Sn(i,e):o={x:e.x+Sn(i).x,y:e.y+Sn(i).y};var s={x:o.x-i.width/2,y:o.y-i.height/2},c={x:o.x+i.width/2,y:o.y+i.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Ge(i)||(r.setSnapOrigin("top-left",{x:s.x-e.x,y:s.y-e.y}),r.setSnapOrigin("bottom-right",{x:c.x-e.x,y:c.y-e.y})),r};ui.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return Z(i,function(r){if(Ge(r)){Ge(t)&&e.add("mid",Sn(r));return}if(et(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);Z(o,function(s){e.add("mid",s)});return}e.add("mid",Sn(r))}),!he(t.x)||!he(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Sn(t)),e};ui.prototype.getSnapTargets=function(e,t){return w0(t).filter(function(n){return!HP(n)})};function HP(e){return!!e.hidden}var jv=1500;function ta(e,t){t.invoke(ui,this),e.on(["create.move","create.end"],jv,VP),e.on(["create.move","create.end","shape.move.move","shape.move.end"],jv,function(n){var i=n.context,r=i.canExecute,o=i.target,s=r&&(r==="attach"||r.attach);s&&!Mo(n)&&WP(n,o)})}me(ta,ui);ta.$inject=["eventBus","injector"];ta.prototype.initSnap=function(e){var t=ui.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return Z(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",Wv(o,i,e))}),Z(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",Wv(o,i,e))}),B(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};ta.prototype.addSnapTargetPoints=function(e,t,n){ui.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);Z(i,function(o){(zP(o)||GP([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",y0(o)),e.add("bottom-right",b0(o)))});var r=this._elementRegistry;return Z(t.incoming,function(o){if(r.get(t.id)){Hv(i,o.source)||e.add("mid",Se(o.source));var s=o.waypoints[0];e.add(o.id+"-docking",s.original||s)}}),Z(t.outgoing,function(o){if(r.get(t.id)){Hv(i,o.target)||e.add("mid",Se(o.target));var s=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",s.original||s)}}),B(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};ta.prototype.getSnapTargets=function(e,t){return ui.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!B(n,"bpmn:Lane")})};function WP(e,t){var n=be(t),i=U0(e,t),r=e.context,o=r.shape,s;o.parent?s={x:0,y:0}:s=Se(o),/top/.test(i)?bt(e,"y",n.top-s.y):/bottom/.test(i)&&bt(e,"y",n.bottom-s.y),/left/.test(i)?bt(e,"x",n.left-s.x):/right/.test(i)&&bt(e,"x",n.right-s.x)}function GP(e,t){return e.every(function(n){return B(n,t)})}function zP(e){return B(e,"bpmn:SubProcess")&&Ne(e)?!0:B(e,"bpmn:Participant")}function VP(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,o=n.bottom,s=n.left;(s&&s>=e.x||r&&r<=e.x)&&bt(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&bt(e,"y",e.y)}}function Hv(e,t){return e.indexOf(t)!==-1}function Wv(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var UP=1250;function Ts(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],UP,function(i){var r=i.context,o=r.shape,s=o.parent,c=r.direction,a=r.snapContext;if(!(i.originalEvent&&fn(i.originalEvent))&&!Mo(i)){var u=a.pointsForTarget(s);u.initialized||(u=n.addSnapTargetPoints(u,o,s,c),u.initialized=!0),XP(c)&&bt(i,"x",i.x),KP(c)&&bt(i,"y",i.y),t.snap(i,u)}}),e.on(["resize.cleanup"],function(){t.hide()})}Ts.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new vr);var o=ax(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r};Ts.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return Z(r,function(o){e.add("corner",b0(o)),e.add("corner",y0(o))}),e.add("corner",ax(t,i)),e};Ts.$inject=["eventBus","snapping"];Ts.prototype.getSnapTargets=function(e,t){return w0(t).filter(function(n){return!YP(n,e)&&!et(n)&&!ZP(n)&&!Ge(n)})};function ax(e,t){var n=Se(e),i=be(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function YP(e,t){return e.host===t}function ZP(e){return!!e.hidden}function XP(e){return e==="n"||e==="s"}function KP(e){return e==="e"||e==="w"}var QP=7,JP=1e3;function yr(e){this._canvas=e,this._asyncHide=Oy(nn(this.hide,this),JP)}yr.$inject=["canvas"];yr.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),o={x:Mo(e,"x"),y:Mo(e,"y")};Z(r,function(s){var c=i.getSnapOrigin(s),a={x:e.x+c.x,y:e.y+c.y};if(Z(["x","y"],function(u){var l;o[u]||(l=t.snap(a,s,u,QP),l!==void 0&&(o[u]={value:l,originValue:l-c[u]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),Z(["x","y"],function(s){var c=o[s];ht(c)&&bt(e,s,c.originValue)})};yr.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=ue("path");return te(n,{d:"M0,0 L0,0"}),ke(n).add("djs-snap-line"),de(t,n),{update:function(i){he(i)?e==="horizontal"?te(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):te(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):te(n,{display:"none"})}}};yr.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};yr.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};yr.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};yr.prototype.hide=function(){Z(this._snapLines,function(e){e.update()})};const qP={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ui],resizeSnapping:["type",Ts],snapping:["type",yr]},eO={__depends__:[qP],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",ix],createMoveSnapping:["type",ta]};var sx=300;function Te(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=Ee(Te.INPUT_SELECTOR,this._container),this._resultsContainer=Ee(Te.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Te.$inject=["canvas","eventBus","selection","translate"];Te.prototype._bindEvents=function(){var e=this;function t(n,i,r,o){e._eventMaps.push({el:n,type:r,listener:It.bind(n,i,r,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,Te.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Te.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Te.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Te.INPUT_SELECTOR,"keydown",function(n){Rt("ArrowUp",n)&&n.preventDefault(),Rt("ArrowDown",n)&&n.preventDefault()}),t(this._container,Te.INPUT_SELECTOR,"keyup",function(n){if(Rt("Escape",n))return e.close();if(Rt("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close(!1)}if(Rt("ArrowUp",n))return e._scrollToDirection(!0);if(Rt("ArrowDown",n))return e._scrollToDirection();Rt(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};Te.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){It.unbind(e.el,e.type,e.listener)})};Te.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(r){return!t._canvas.getRootElements().includes(r.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(r){var o=r.element.id,s=t._createResultNode(r,o);t._results[o]={element:r.element,node:s}});var i=Ee(Te.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}};Te.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Te.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};Te.prototype._clearResults=function(){Fo(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")};Te.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")};Te.prototype._getCurrentResult=function(){return Ee(Te.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Te.prototype._createResultNode=function(e,t){var n=Ie(Te.RESULT_HTML);return e.primaryTokens.length>0&&Gv(n,e.primaryTokens,Te.RESULT_PRIMARY_HTML),Gv(n,e.secondaryTokens,Te.RESULT_SECONDARY_HTML),ft(n,Te.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Te.prototype.registerProvider=function(e){this._searchProvider=e};Te.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,ve(this._canvas.getContainer()).add("djs-search-open"),ve(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Te.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,ve(this._canvas.getContainer()).remove("djs-search-open"),ve(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))};Te.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Te.prototype.isOpen=function(){return this._open};Te.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&ve(t).remove(Te.RESULT_SELECTED_CLASS);var n=ft(e,Te.RESULT_ID_ATTRIBUTE),i=this._results[n].element;ve(e).add(Te.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:sx}),this._selection.select(i),this._canvas.addMarker(i,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",i)}};Te.prototype._select=function(e){var t=ft(e,Te.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:sx}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Te.prototype._getBoxHtml=function(){const e=Ie(Te.BOX_HTML),t=Ee(Te.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function Gv(e,t,n){var i=tO(t),r=Ie(n);r.innerHTML=i,e.appendChild(r)}function tO(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+Te.RESULT_HIGHLIGHT_CLASS+'">'+Cp(n.matched)+"</b>":t+=Cp(n.normal)}),t!==""?t:null}Te.CONTAINER_SELECTOR=".djs-search-container";Te.INPUT_SELECTOR=".djs-search-input input";Te.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Te.RESULT_SELECTOR=".djs-search-result";Te.RESULT_SELECTED_CLASS="djs-search-result-selected";Te.RESULT_SELECTED_SELECTOR="."+Te.RESULT_SELECTED_CLASS;Te.RESULT_ID_ATTRIBUTE="data-result-id";Te.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Te.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`;Te.RESULT_HTML='<div class="djs-search-result"></div>';Te.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Te.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const nO={__depends__:[Tc,$c,si],searchPad:["type",Te]};function vf(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}vf.$inject=["elementRegistry","searchPad","canvas"];vf.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(i){return!Ge(i)&&!t.includes(i)});return n.reduce(function(i,r){var o=dn(r),s=Uv(o,e),c=Uv(r.id,e);return Xl(s)||Xl(c)?[...i,{primaryTokens:s,secondaryTokens:c,element:r}]:i},[]).sort(function(i,r){return zv(i.primaryTokens,r.primaryTokens)||zv(i.secondaryTokens,r.secondaryTokens)||Vv(dn(i.element),dn(r.element))||Vv(i.element.id,r.element.id)}).map(function(i){return{element:i.element,primaryTokens:i.primaryTokens.map(function(r){return Cn(r,["index"])}),secondaryTokens:i.secondaryTokens.map(function(r){return Cn(r,["index"])})}})};function Kp(e){return"matched"in e}function Xl(e){return e.find(Kp)}function zv(e,t){const n=Xl(e),i=Xl(t);if(n&&!i)return-1;if(!n&&i)return 1;if(!n&&!i)return 0;const r=e.find(Kp),o=t.find(Kp);return r.index<o.index?-1:r.index>o.index?1:0}function Vv(e="",t=""){return e.localeCompare(t)}function Uv(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.slice(0,r),index:0}),n.push({matched:i.slice(r,r+t.length),index:r}),t.length+r<e.length&&n.push({normal:i.slice(r+t.length),index:r+t.length})):n.push({normal:i,index:0}),n}const iO={__depends__:[nO],__init__:["bpmnSearch"],bpmnSearch:["type",vf]};var rO='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function jn(e){rs.call(this,e)}me(jn,rs);jn.Viewer=lr;jn.NavigatedViewer=ka;jn.prototype.createDiagram=function(){return this.importXML(rO)};jn.prototype._interactionModules=[Tw,Iw,Dw];jn.prototype._modelingModules=[hR,nd,PR,$R,tI,sd,sI,hD,p_,Kc,mD,bD,OD,BD,FD,zD,nP,D_,lP,mP,AP,MP,U_,eO,iO];jn.prototype._modules=[].concat(lr.prototype._modules,jn.prototype._interactionModules,jn.prototype._modelingModules);const oO=(e,t,n)=>{const i="currentUser";return n||(n="camunda"),`<?xml version="1.0" encoding="UTF-8"?>
    <bpmn2:definitions
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
    xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
    id="diagram_${e}"
    targetNamespace="${{activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n]}">
  <bpmn2:process id="Process_${e}" name="${t}" isExecutable="true">
    <bpmn2:startEvent id="Event_178kjur" name="">
      <bpmn2:outgoing>Flow_0girvld</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:userTask id="Activity_108ybh5" name="" camunda:assignee="${i}" camunda:candidateUsers="" camunda:candidateGroups="" dataType="INITIATOR" text="">
      <bpmn2:incoming>Flow_0girvld</bpmn2:incoming>
      <bpmn2:outgoing>Flow_1ni5oq0</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="Flow_0girvld" sourceRef="Event_178kjur" targetRef="Activity_108ybh5" />
    <bpmn2:exclusiveGateway id="Gateway_0finfu0">
      <bpmn2:incoming>Flow_0s1ezcy</bpmn2:incoming>
      <bpmn2:outgoing>Flow_02rgowj</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_0uf3b6k</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="Flow_1ni5oq0" sourceRef="Activity_108ybh5" targetRef="Event_1fn5snq" />
    <bpmn2:userTask id="Activity_0skpz90" name="" camunda:candidateUsers="" camunda:candidateGroups="2" dataType="ROLES" text="">
      <bpmn2:incoming>Flow_02rgowj</bpmn2:incoming>
      <bpmn2:outgoing>Flow_08ruziy</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="Flow_02rgowj" name="money&#60;=500" sourceRef="Gateway_0finfu0" targetRef="Activity_0skpz90">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">&lt;=500</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:userTask id="Activity_1krg6rf" name="" camunda:candidateUsers="" camunda:candidateGroups="1" dataType="ROLES" text="">
      <bpmn2:incoming>Flow_0uf3b6k</bpmn2:incoming>
      <bpmn2:outgoing>Flow_086481q</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="Flow_0uf3b6k" name="money&#62;500" sourceRef="Gateway_0finfu0" targetRef="Activity_1krg6rf">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">&gt;500</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:endEvent id="Event_05xkxhs" name="">
      <bpmn2:incoming>Flow_08ruziy</bpmn2:incoming>
      <bpmn2:incoming>Flow_086481q</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="Flow_08ruziy" sourceRef="Activity_0skpz90" targetRef="Event_05xkxhs" />
    <bpmn2:sequenceFlow id="Flow_086481q" sourceRef="Activity_1krg6rf" targetRef="Event_05xkxhs" />
    <bpmn2:intermediateCatchEvent id="Event_1fn5snq" name="5">
      <bpmn2:incoming>Flow_1ni5oq0</bpmn2:incoming>
      <bpmn2:outgoing>Flow_0s1ezcy</bpmn2:outgoing>
      <bpmn2:timerEventDefinition id="TimerEventDefinition_1n3lqzc">
        <bpmn2:timeDuration xsi:type="bpmn2:tFormalExpression">PT5M</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:sequenceFlow id="Flow_0s1ezcy" sourceRef="Event_1fn5snq" targetRef="Gateway_0finfu0" />
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_${e}">
      <bpmndi:BPMNShape id="Event_178kjur_di" bpmnElement="Event_178kjur">
        <dc:Bounds x="182" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="189" y="275" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_108ybh5_di" bpmnElement="Activity_108ybh5">
        <dc:Bounds x="270" y="210" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_05xkxhs_di" bpmnElement="Event_05xkxhs">
        <dc:Bounds x="1022" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1029" y="275" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0skpz90_di" bpmnElement="Activity_0skpz90">
        <dc:Bounds x="720" y="210" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1krg6rf_di" bpmnElement="Activity_1krg6rf">
        <dc:Bounds x="720" y="370" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0finfu0_di" bpmnElement="Gateway_0finfu0" isMarkerVisible="true">
        <dc:Bounds x="555" y="225" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0qbuued_di" bpmnElement="Event_1fn5snq">
        <dc:Bounds x="442" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="425" y="275" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0girvld_di" bpmnElement="Flow_0girvld">
        <di:waypoint x="218" y="250" />
        <di:waypoint x="270" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ni5oq0_di" bpmnElement="Flow_1ni5oq0">
        <di:waypoint x="370" y="250" />
        <di:waypoint x="442" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02rgowj_di" bpmnElement="Flow_02rgowj">
        <di:waypoint x="605" y="250" />
        <di:waypoint x="720" y="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="631" y="232" width="65" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uf3b6k_di" bpmnElement="Flow_0uf3b6k">
        <di:waypoint x="580" y="275" />
        <di:waypoint x="580" y="410" />
        <di:waypoint x="720" y="410" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="510" y="375" width="59" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08ruziy_di" bpmnElement="Flow_08ruziy">
        <di:waypoint x="820" y="250" />
        <di:waypoint x="1022" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_086481q_di" bpmnElement="Flow_086481q">
        <di:waypoint x="820" y="410" />
        <di:waypoint x="920" y="410" />
        <di:waypoint x="920" y="250" />
        <di:waypoint x="1022" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s1ezcy_di" bpmnElement="Flow_0s1ezcy">
        <di:waypoint x="478" y="250" />
        <di:waypoint x="555" y="250" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
`},aO=(e,t,n)=>(n||(n="camunda"),`
    <?xml version="1.0" encoding="UTF-8"?>
    <bpmn2:definitions
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
      xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
      xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
      xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
      xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
      id="diagram_${e}"
      targetNamespace="${{activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n]}">
    <bpmn2:process id="Process_${e}" name="${t}" isExecutable="true">
      </bpmn2:process>
      <bpmndi:BPMNDiagram id="BPMNDiagram_1">
        <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${e}">
        </bpmndi:BPMNPlane>
      </bpmndi:BPMNDiagram>
    </bpmn2:definitions>
  `);function Yv(e,t,n){return Math[n](e/t)*t}function ni(e){return ht(e)&&Ut(e,"waypoints")}function Kl(e){return ht(e)&&Ut(e,"labelTarget")}function sO(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function ba(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function lO(e){return sO({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function cO(e){for(var t=e.waypoints,n=t.reduce(function(u,l,p){var h=t[p-1];if(h){var d=u[u.length-1],f=d&&d.endLength||0,g=uO(h,l);u.push({start:h,end:l,startLength:f,endLength:f+g,length:g})}return u},[]),i=n.reduce(function(u,l){return u+l.length},0),r=i/2,o=0,s=n[o];s.endLength<r;)s=n[++o];var c=(r-s.startLength)/s.length,a={x:s.start.x+(s.end.x-s.start.x)*c,y:s.start.y+(s.end.y-s.start.y)*c};return a}function ko(e){return ni(e)?cO(e):lO(e)}function uO(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}var Qp=function(){return Qp=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Qp.apply(this,arguments)},lx=10,pO=lx*10,hO=.5,dO=.4,fO="#ccc",gO="djs-grid-line",Zv={width:1e5,height:1e5},cx=function(){function e(t,n,i){var r=this;this._config=Qp({smallGridSpacing:lx,gridSpacing:pO,gridLineStroke:hO,gridLineOpacity:dO,gridLineColor:fO},t||{}),this._canvas=n,this._visible=!1,i.on("diagram.init",function(){r._init(),r.toggle(!0)}),i.on("gridSnapping.toggle",function(o){var s=o.active;r.toggle(s),r._centerGridAroundViewbox()}),i.on("canvas.viewbox.changed",function(o){var s=o.viewbox;r._centerGridAroundViewbox(s)})}return e.prototype._init=function(){var t=Ee("defs",this._canvas._svg);t||(t=ue("defs"),de(this._canvas._svg,t));var n=ue("pattern"),i="djs-small-grid-pattern-"+Xv();te(n,{id:i,width:this._config.smallGridSpacing,height:this._config.smallGridSpacing,patternUnits:"userSpaceOnUse"});var r=ue("path");te(r,{d:"M ".concat(this._config.smallGridSpacing,",0 L 0,0 0,").concat(this._config.smallGridSpacing," ").concat(this._config.smallGridSpacing,",").concat(this._config.smallGridSpacing," Z"),fill:"none",stroke:this._config.gridLineColor,strokeWidth:this._config.gridLineStroke,opacity:this._config.gridLineOpacity}),de(n,r);var o=this._pattern=ue("pattern"),s="djs-grid-pattern-"+Xv();te(o,{id:s,width:this._config.gridSpacing,height:this._config.gridSpacing,patternUnits:"userSpaceOnUse"});var c=ue("path");te(c,{d:"M ".concat(this._config.gridSpacing,",0 L 0,0 0,").concat(this._config.gridSpacing," ").concat(this._config.gridSpacing,",").concat(this._config.gridSpacing," Z"),fill:"none",stroke:this._config.gridLineColor,strokeWidth:this._config.gridLineStroke*2,opacity:this._config.gridLineOpacity*2}),de(o,c);var a=ue("rect");te(a,{width:this._config.gridSpacing,height:this._config.gridSpacing,fill:"url(#".concat(i,")")}),de(o,a),de(t,n),de(t,o);var u=this._gfx=ue("rect");te(u,{x:-5e4,y:-5e4,width:Zv.width,height:Zv.height,fill:"url(#".concat(s,")")})},e.prototype._centerGridAroundViewbox=function(t){t||(t=this._canvas.viewbox());var n=ko(t);te(this._gfx,{x:-5e4+Yv(n.x,this._config.gridSpacing,"round"),y:-5e4+Yv(n.y,this._config.gridSpacing,"round")})},e.prototype.isVisible=function(){return this._visible},e.prototype.toggle=function(t){if(typeof t>"u"&&(t=!this._visible),t!==this._visible){var n=this._getParent();t?de(n,this._gfx):Yr(n),this._visible=t}},e.prototype._getParent=function(){return this._canvas.getLayer(gO,-2)},e}();cx.$inject=["config.gridLine","canvas","eventBus"];function Xv(){return Math.round(Math.random()*1e6)}var Kv={__init__:["gridLineBg"],gridLineBg:["type",cx]};const yf=Object.prototype.toString,mO=Object.prototype.hasOwnProperty;function vO(e){return e===void 0}function yO(e){return e==null}function bO(e){return yf.call(e)==="[object Array]"}function wO(e){return yf.call(e)==="[object Object]"}function _O(e){return yf.call(e)==="[object Number]"}function xO(e,t){return!yO(e)&&mO.call(e,t)}function EO(e,t){let n,i;if(vO(e))return;const r=bO(e)?TO:AO;for(let o in e)if(xO(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function SO(e,t,n){return EO(e,function(i,r){n=t(n,i,r)}),n}function CO(e,t){return!!SO(e,function(n,i,r){return n&&t(i,r)},!0)}function AO(e){return e}function TO(e){return Number(e)}function On(e,...t){return Object.assign(e,...t)}function Ql(e){return e.childNodes[0]}function ux(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}ux.prototype.next=function(){return this._prefix+ ++this._counter};var il=50,MO=new ux,Qv={min:.2,max:4},$O=10,RO=.1,IO=250;function en(e,t,n,i,r){var o=this;this._canvas=i,this._elementRegistry=r,this._eventBus=n,this._injector=t,this._state={isOpen:void 0,isDragging:!1,initialDragPosition:null,offsetViewport:null,cachedViewbox:null,dragger:null,svgClientRect:null,parentClientRect:null,zoomDelta:0},this._minimapId=MO.next(),this._init(),this.toggle(e&&e.open||!1);function s(l){(!o._state._svgClientRect||ol(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect());var p=rl({x:l.x-o._state._svgClientRect.left,y:l.y-o._state._svgClientRect.top},o._svg,o._lastViewbox);Zu(p,o._canvas),o._update()}function c(l){return function(h){var d=Xu(h);(!o._state._svgClientRect||ol(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect()),l&&s(d);var f=rl({x:d.x-o._state._svgClientRect.left,y:d.y-o._state._svgClientRect.top},o._svg,o._lastViewbox),g=i.viewbox(),m=LO(f,g),w=o._viewportDom.getBoundingClientRect(),_={x:d.x-w.left+1,y:d.y-w.top+1};On(o._state,{cachedViewbox:g,initialDragPosition:{x:d.x,y:d.y},isDragging:!0,offsetViewport:m,offsetViewportDom:_,viewportClientRect:o._viewport.getBoundingClientRect(),parentClientRect:o._parent.getBoundingClientRect()}),ce.bind(document,"mousemove",a),ce.bind(document,"mouseup",u)}}function a(l){var p=Xu(l);if(o._state.isDragging){(!o._state._svgClientRect||ol(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect());var h=o._state.offsetViewportDom,d=o._state.viewportClientRect,f=o._state.parentClientRect;On(o._viewportDom.style,{top:p.y-h.y-f.top+"px",left:p.x-h.x-f.left+"px"});var g=px(f,{top:p.y-h.y-f.top,left:p.x-h.x-f.left,width:d.width,height:d.height});On(o._overlay.style,{clipPath:g});var m=rl({x:p.x-o._state._svgClientRect.left,y:p.y-o._state._svgClientRect.top},o._svg,o._lastViewbox);Zu({x:m.x-o._state.offsetViewport.x,y:m.y-o._state.offsetViewport.y},o._canvas)}}function u(l){var p=Xu(l);o._state.isDragging&&(o._state.initialDragPosition.x===p.x&&o._state.initialDragPosition.y===p.y&&s(l),o._update(),On(o._state,{cachedViewbox:null,initialDragPosition:null,isDragging:!1,offsetViewport:null,offsetViewportDom:null}),ce.unbind(document,"mousemove",a),ce.unbind(document,"mouseup",u))}ce.bind(this._viewportDom,"mousedown",c(!1)),ce.bind(this._svg,"mousedown",c(!0)),ce.bind(this._parent,"wheel",function(l){if(l.preventDefault(),l.stopPropagation(),!!l.ctrlKey&&((!o._state._svgClientRect||ol(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect()),!!NO(l,o._state._svgClientRect))){var p=l.deltaMode===0?.02:.32,h=Math.sqrt(Math.pow(l.deltaY,2)+Math.pow(l.deltaX,2))*BO(l.deltaY)*-p;if(o._state.zoomDelta+=h,Math.abs(o._state.zoomDelta)>RO){var d=h>0?1:-1,f=Math.log(i.zoom())/Math.log(10),g=FO(Qv,$O*2),m=Math.round(f/g)*g;m+=g*d;var w=Math.pow(10,m);i.zoom(jO(Qv,w),_),o._state.zoomDelta=0;var _=rl({x:l.clientX-o._state._svgClientRect.left,y:l.clientY-o._state._svgClientRect.top},o._svg,o._lastViewbox);Zu(_,o._canvas),o._update()}}}),ce.bind(this._toggle,"click",function(l){l.preventDefault(),l.stopPropagation(),o.toggle()}),n.on(["shape.added","connection.added"],function(l){var p=l.element;o._addElement(p),o._update()}),n.on(["shape.removed","connection.removed"],function(l){var p=l.element;o._removeElement(p),o._update()}),n.on("elements.changed",IO,function(l){var p=l.elements;p.forEach(function(h){o._updateElement(h)}),o._update()}),n.on("element.updateId",function(l){var p=l.element,h=l.newId;o._updateElementId(p,h)}),n.on("canvas.viewbox.changed",function(){o._state.isDragging||o._update()}),n.on("canvas.resized",function(){document.body.contains(o._parent)&&(o._state.isDragging||o._update(),o._state._svgClientRect=o._svg.getBoundingClientRect())}),n.on(["root.set","plane.set"],function(l){o._clear();var p=l.element||l.plane.rootElement;p.children.forEach(function(h){o._addElement(h)}),o._update()})}en.$inject=["config.minimap","injector","eventBus","canvas","elementRegistry"];en.prototype._init=function(){var e=this._canvas,t=e.getContainer(),n=this._parent=document.createElement("div");ve(n).add("djs-minimap"),t.appendChild(n);var i=this._toggle=document.createElement("div");ve(i).add("toggle"),n.appendChild(i);var r=this._map=document.createElement("div");ve(r).add("map"),n.appendChild(r);var o=this._svg=ue("svg");te(o,{width:"100%",height:"100%"}),de(r,o);var s=this._elementsGroup=ue("g");de(o,s);var c=this._viewportGroup=ue("g");de(o,c);var a=this._viewport=ue("rect");ke(a).add("viewport"),de(c,a),ce.bind(n,"mousedown",function(p){p.stopPropagation()});var u=this._viewportDom=document.createElement("div");ve(u).add("viewport-dom"),this._parent.appendChild(u);var l=this._overlay=document.createElement("div");ve(l).add("overlay"),this._parent.appendChild(l)};en.prototype._update=function(){var e=this._canvas.viewbox(),t=e.inner,n=e.outer;if(hx(e)){var i,r,o,s,c=n.width-t.width,a=n.height-t.height;t.width<n.width?(i=t.x-c/2,o=n.width,t.x+t.width<n.width&&(i=Math.min(0,t.x))):(i=t.x,o=t.width),t.height<n.height?(r=t.y-a/2,s=n.height,t.y+t.height<n.height&&(r=Math.min(0,t.y))):(r=t.y,s=t.height),i=i-il,r=r-il,o=o+il*2,s=s+il*2,this._lastViewbox={x:i,y:r,width:o,height:s},te(this._svg,{viewBox:i+", "+r+", "+o+", "+s}),te(this._viewport,{x:e.x,y:e.y,width:e.width,height:e.height});var u=this._state._parentClientRect=this._parent.getBoundingClientRect(),l=this._viewport.getBoundingClientRect(),p={top:l.top-u.top,left:l.left-u.left,width:l.width,height:l.height};On(this._viewportDom.style,{top:p.top+"px",left:p.left+"px",width:p.width+"px",height:p.height+"px"});var h=px(u,p);On(this._overlay.style,{clipPath:h})}};en.prototype.open=function(){On(this._state,{isOpen:!0}),ve(this._parent).add("open");var e=this._injector.get("translate",!1)||function(t){return t};ft(this._toggle,"title",e("Close minimap")),this._update(),this._eventBus.fire("minimap.toggle",{open:!0})};en.prototype.close=function(){On(this._state,{isOpen:!1}),ve(this._parent).remove("open");var e=this._injector.get("translate",!1)||function(t){return t};ft(this._toggle,"title",e("Open minimap")),this._eventBus.fire("minimap.toggle",{open:!1})};en.prototype.toggle=function(e){var t=this.isOpen();typeof e>"u"&&(e=!t),e!=t&&(e?this.open():this.close())};en.prototype.isOpen=function(){return this._state.isOpen};en.prototype._updateElement=function(e){try{e.parent!==void 0&&e.parent!==null&&(this._removeElement(e),this._addElement(e))}catch(t){console.warn("Minimap#_updateElement errored",t)}};en.prototype._updateElementId=function(e,t){try{var n=Ee("#"+wh(this._prefixId(e.id)),this._elementsGroup);n&&(n.id=this._prefixId(t))}catch(i){console.warn("Minimap#_updateElementId errored",i)}};en.prototype.isOnActivePlane=function(e){var t=this._canvas;return t.findRoot?t.findRoot(e)===t.getRootElement():t.findPlane?t.findPlane(e)===t.getActivePlane():!0};en.prototype._addElement=function(e){var t=this;if(this._removeElement(e),!!this.isOnActivePlane(e)){var n,i,r,o=this._createElement(e),s=Ee("#"+wh(this._prefixId(e.parent.id)),this._elementsGroup);if(o){var c=this._elementRegistry.getGraphics(e),a=this._elementRegistry.getGraphics(e.parent),u=PO(c,a);return u!=="undefined"?s?s.childNodes.length>u?qv(o,s,u):qv(o,s,s.childNodes.length-1):this._elementsGroup.appendChild(o):this._elementsGroup.appendChild(o),kO(e)?(n=e.parent,i=0,r=0,typeof n.x<"u"&&typeof n.y<"u"&&(i=-n.x,r=-n.y),te(o,{transform:"translate("+i+" "+r+")"})):(i=e.x,r=e.y,s&&(n=e.parent,i-=n.x,r-=n.y),te(o,{transform:"translate("+i+" "+r+")"})),e.children&&e.children.length&&e.children.forEach(function(l){t._addElement(l)}),o}}};en.prototype._removeElement=function(e){var t=this._svg.getElementById(this._prefixId(e.id));t&&Je(t)};en.prototype._createElement=function(e){var t=this._elementRegistry.getGraphics(e),n;if(t&&(n=Ql(t),n)){var i=HO(Qa(n));return te(i,{id:this._prefixId(e.id)}),i}};en.prototype._clear=function(){Yr(this._elementsGroup)};en.prototype._prefixId=function(e){return"djs-minimap-"+e+"-"+this._minimapId};function kO(e){return e.waypoints}function LO(e,t){var n={x:t.x+t.width/2,y:t.y+t.height/2};return{x:e.x-n.x,y:e.y-n.y}}function rl(e,t,n){var i=t.getBoundingClientRect(),r=DO(n,i.width/i.height),o=Jv(e.x,0,i.width,r.x,r.x+r.width),s=Jv(e.y,0,i.height,r.y,r.y+r.height);return{x:o,y:s}}function Zu(e,t){var n=t.viewbox(),i=n.width,r=n.height;t.viewbox({x:e.x-i/2,y:e.y-r/2,width:i,height:r})}function DO(e,t){var n=e.width/e.height,i=On({},{x:e.x,y:e.y,width:e.width,height:e.height});if(n>t){var r=i.width*(1/t),o=i.y-(r-i.height)/2;On(i,{y:o,height:r})}else if(n<t){var s=i.height*t,c=i.x-(s-i.width)/2;On(i,{x:c,width:s})}return i}function Jv(e,t,n,i,r){var o=n-t,s=r-i;return(e-t)*s/o+i}function PO(e,t){var n=Ee(".djs-children",t.parentNode);if(n){var i=[].slice.call(n.childNodes),r=-1;return i.forEach(function(o,s){Ee(".djs-element",o)===e&&(r=s)}),r}}function qv(e,t,n){var i=OO(t),r=[].slice.call(i.childNodes),o=r[n];o?t.insertBefore(e,o.nextSibling):t.appendChild(e)}function OO(e){var t=Ee(".children",e);return t||(t=ue("g",{class:"children"}),de(e,t)),t}function ol(e){return e.width===0&&e.height===0}function NO(e,t){return e.x>t.left&&e.x<t.left+t.width&&e.y>t.top&&e.y<t.top+t.height}var BO=Math.sign||function(e){return e>=0?1:-1};function FO(e,t){var n=Math.log(e.min)/Math.log(10),i=Math.log(e.max)/Math.log(10),r=Math.abs(n)+Math.abs(i);return r/t}function jO(e,t){return Math.max(e.min,Math.min(e.max,t))}function px(e,t){var n=[Kn(t.left,t.top),Kn(t.left+t.width,t.top),Kn(t.left+t.width,t.top+t.height),Kn(t.left,t.top+t.height),Kn(t.left,e.height),Kn(e.width,e.height),Kn(e.width,0),Kn(0,0),Kn(0,e.height),Kn(t.left,e.height)].join(", ");return"polygon("+n+")"}function Kn(e,t){return e+"px "+t+"px"}function hx(e){return CO(e,function(t){return wO(t)?hx(t):_O(t)&&isFinite(t)})}function Xu(e){return e.center?e.center:{x:e.clientX,y:e.clientY}}function HO(e){return Gn("[id]",e).forEach(function(t){t.remove()}),e}var WO={__init__:["minimap"],minimap:["type",en]},dx=".djs-palette-toggle",fx=".entry",GO=dx+", "+fx,Jp="djs-palette-",zO="shown",qp="open",ey="two-column",VO=1e3;function xt(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}xt.$inject=["eventBus","canvas"];xt.prototype.registerProvider=function(e,t){t||(t=e,e=VO),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};xt.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(YO,{})};xt.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};xt.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=Ie(xt.HTML_MARKUP);n.appendChild(i),ve(n).add(Jp+zO),It.bind(i,GO,"click",function(r){var o=r.delegateTarget;if(Ua(o,dx))return e.toggle();e.trigger("click",r)}),ce.bind(i,"mousedown",function(r){r.stopPropagation()}),It.bind(i,fx,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};xt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};xt.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=ve(n),s=ve(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(ey,r),s.toggle(Jp+ey,r),"open"in e&&(o.toggle(qp,e.open),s.toggle(Jp+qp,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};xt.prototype._update=function(){var e=Ee(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Fo(e),Z(t,function(n,i){var r=n.group||"default",o=Ee("[data-group="+wh(r)+"]",e);o||(o=Ie('<div class="group"></div>'),ft(o,"data-group",r),e.appendChild(o));var s=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),c=Ie(s);if(o.appendChild(c),!n.separator&&(ft(c,"data-action",i),n.title&&ft(c,"title",n.title),n.className&&UO(c,n.className),n.imageUrl)){var a=Ie("<img>");ft(a,"src",n.imageUrl),c.appendChild(a)}}),this.open()};xt.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=ft(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};xt.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,s;if(o=r[e],!!o&&(s=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(ot(s)){if(t==="click")return s(n,i)}else if(s[t])return s[t](n,i);n.preventDefault()}};xt.prototype._layoutChanged=function(){this._toggleState({})};xt.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};xt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};xt.prototype.open=function(){this._toggleState({open:!0})};xt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};xt.prototype.isActiveTool=function(e){return e&&this._activeTool===e};xt.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Ee(".djs-palette-entries",this._container),this._toolsContainer=Ee("[data-group=tools]",t)),n=this._toolsContainer,Z(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=ve(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};xt.prototype.isOpen=function(){return ve(this._container).has(qp)};xt.prototype._getParentContainer=function(){return this._canvas.getContainer()};xt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function UO(e,t){var n=ve(e),i=xe(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function YO(e,t){var n=t.getPaletteEntries();return ot(n)?n(e):(Z(n,function(i,r){e[r]=i}),e)}const ZO={__init__:["palette"],palette:["type",xt]};function ty(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Ms(e){return e.originalEvent||e.srcEvent}function Ku(e){ty(e),ty(Ms(e))}function eh(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}var ny=1500;function gx(e,t,n){var i=this,r=n.get("dragging",!1);function o(s){if(!s.hover){var c=s.originalEvent,a=i._findTargetGfx(c),u=a&&e.get(a);a&&u&&(s.stopPropagation(),r.hover({element:u,gfx:a}),r.move(c))}}r&&t.on("drag.start",function(s){t.once("drag.move",ny,function(c){o(c)})}),function(){var s,c;t.on("element.hover",function(a){s=a.gfx,c=a.element}),t.on("element.hover",ny,function(a){c&&t.fire("element.out",{element:c,gfx:s})}),t.on("element.out",function(){s=null,c=null})}(),this._findTargetGfx=function(s){var c,a;if(s instanceof MouseEvent)return c=eh(s),a=document.elementFromPoint(c.x,c.y),XO(a)}}gx.$inject=["elementRegistry","eventBus","injector"];function XO(e){return ai(e,"svg, .djs-element",!0)}const KO={__init__:["hoverFix"],hoverFix:["type",gx]};function QO(){return/mac/i.test(navigator.platform)}function mx(e,t){return(Ms(e)||e).button===t}function $s(e){return mx(e,0)}function JO(e){return mx(e,1)}function Jl(e){var t=Ms(e)||e;return $s(e)?QO()?t.metaKey:t.ctrlKey:!1}function ql(e){var t=Ms(e)||e;return $s(e)&&t.shiftKey}function qO(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function eN(e){return["M",e.x,e.y]}function Qu(e){return["L",e.x,e.y]}function tN(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function nN(e,t){const n=e.length,i=[eN(e[0])];for(let r=1;r<n;r++){const o=e[r-1],s=e[r],c=e[r+1];if(!c||!t){i.push(Qu(s));continue}const a=Math.min(t,th(s.x-o.x,s.y-o.y),th(c.x-s.x,c.y-s.y));if(!a){i.push(Qu(s));continue}const u=al(s,o,a),l=al(s,o,a*.5),p=al(s,c,a),h=al(s,c,a*.5);i.push(Qu(u)),i.push(tN(l,h,p))}return i}function al(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=th(i,r),s=n/o;return{x:e.x+i*s,y:e.y+r*s}}function th(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function iN(e,t,n){he(t)&&(n=t,t=null),t||(t={});const i=ue("path",t);return he(n)&&(i.dataset.cornerRadius=String(n)),vx(i,e)}function vx(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return te(e,{d:qO(nN(t,n))}),e}function rN(e){return!0}function sl(e){return $s(e)||JO(e)}var iy=500;function yx(e,t,n){var i=this;function r(M,$,T){if(!c(M,$)){var I,C,b;T?C=t.getGraphics(T):(I=$.delegateTarget||$.target,I&&(C=I,T=t.get(C))),!(!C||!T)&&(b=e.fire(M,{element:T,gfx:C,originalEvent:$}),b===!1&&($.stopPropagation(),$.preventDefault()))}}var o={};function s(M){return o[M]}function c(M,$){var T=u[M]||$s;return!T($)}var a={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},u={"element.contextmenu":rN,"element.mousedown":sl,"element.mouseup":sl,"element.click":sl,"element.dblclick":sl};function l(M,$,T){var I=a[M];if(!I)throw new Error("unmapped DOM event name <"+M+">");return r(I,$,T)}var p="svg, .djs-element";function h(M,$,T,I){var C=o[T]=function(b){r(T,b)};I&&(u[T]=I),C.$delegate=It.bind(M,p,$,C)}function d(M,$,T){var I=s(T);I&&It.unbind(M,$,I.$delegate)}function f(M){Z(a,function($,T){h(M,T,$)})}function g(M){Z(a,function($,T){d(M,T,$)})}e.on("canvas.destroy",function(M){g(M.svg)}),e.on("canvas.init",function(M){f(M.svg)}),e.on(["shape.added","connection.added"],function(M){var $=M.element,T=M.gfx;e.fire("interactionEvents.createHit",{element:$,gfx:T})}),e.on(["shape.changed","connection.changed"],iy,function(M){var $=M.element,T=M.gfx;e.fire("interactionEvents.updateHit",{element:$,gfx:T})}),e.on("interactionEvents.createHit",iy,function(M){var $=M.element,T=M.gfx;i.createDefaultHit($,T)}),e.on("interactionEvents.updateHit",function(M){var $=M.element,T=M.gfx;i.updateDefaultHit($,T)});var m=x("djs-hit djs-hit-stroke"),w=x("djs-hit djs-hit-click-stroke"),_=x("djs-hit djs-hit-all"),E=x("djs-hit djs-hit-no-move"),y={all:_,"click-stroke":w,stroke:m,"no-move":E};function x(M,$){return $=J({stroke:"white",strokeWidth:15},$||{}),n.cls(M,["no-fill","no-border"],$)}function v(M,$){var T=y[$];if(!T)throw new Error("invalid hit type <"+$+">");return te(M,T),M}function S(M,$){de(M,$)}this.removeHits=function(M){var $=Gn(".djs-hit",M);Z($,Je)},this.createDefaultHit=function(M,$){var T=M.waypoints,I=M.isFrame,C;return T?this.createWaypointsHit($,T):(C=I?"stroke":"all",this.createBoxHit($,C,{width:M.width,height:M.height}))},this.createWaypointsHit=function(M,$){var T=iN($);return v(T,"stroke"),S(M,T),T},this.createBoxHit=function(M,$,T){T=J({x:0,y:0},T);var I=ue("rect");return v(I,$),te(I,T),S(M,I),I},this.updateDefaultHit=function(M,$){var T=Ee(".djs-hit",$);if(T)return M.waypoints?vx(T,M.waypoints):te(T,{width:M.width,height:M.height}),T},this.fire=r,this.triggerMouseEvent=l,this.mouseHandler=s,this.registerEvent=h,this.unregisterEvent=d}yx.$inject=["eventBus","elementRegistry","styles"];const oN={__init__:["interactionEvents"],interactionEvents:["type",yx]};function ry(e,t,n){var i=!0;return e.push(t),i}function bx(e,t,n){n=n||0,xe(e)||(e=[e]),Z(e,function(i,r){var o=t(i,r,n);xe(o)&&o.length&&bx(o,t,n+1)})}function aN(e,t,n){var i=[],r=[];return bx(e,function(o,s,c){ry(i,o);var a=o.children;if(a&&ry(r,a))return a}),i}function sN(e,t){return aN(e)}function mi(e,t){t=!!t,xe(e)||(e=[e]);var n,i,r,o;return Z(e,function(s){var c=s;s.waypoints&&!t&&(c=mi(s.waypoints,!0));var a=c.x,u=c.y,l=c.height||0,p=c.width||0;(a<n||n===void 0)&&(n=a),(u<i||i===void 0)&&(i=u),(a+p>r||r===void 0)&&(r=a+p),(u+l>o||o===void 0)&&(o=u+l)}),{x:n,y:i,height:o-i,width:r-n}}function lN(e,t){var n={};return Z(e,function(i){var r=i;r.waypoints&&(r=mi(r)),!he(t.y)&&r.x>t.x&&(n[i.id]=i),!he(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(he(t.width)&&he(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!he(t.width)||!he(t.height))&&(n[i.id]=i)}),n}var cN=500,uN=1e3;function ro(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var s=ue("rect");return te(s,J({x:0,y:0,rx:4,width:100,height:100},n)),s}e.on(["shape.added","shape.changed"],cN,function(o){var s=o.element,c=o.gfx,a=Ee(".djs-outline",c);a||(a=i.getOutline(s)||r(),de(c,a)),i.updateShapeOutline(a,s)}),e.on(["connection.added","connection.changed"],function(o){var s=o.element,c=o.gfx,a=Ee(".djs-outline",c);a||(a=r(),de(c,a)),i.updateConnectionOutline(a,s)})}ro.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&Z(i,function(r){n=n||r.updateOutline(t,e)}),n||te(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};ro.prototype.updateConnectionOutline=function(e,t){var n=mi(t);te(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};ro.prototype.registerProvider=function(e,t){t||(t=e,e=uN),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};ro.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};ro.prototype.getOutline=function(e){var t,n=this._getProviders();return Z(n,function(i){ot(i.getOutline)&&(t=t||i.getOutline(e))}),t};ro.$inject=["eventBus","styles","elementRegistry"];const pN={__init__:["outline"],outline:["type",ro]};function na(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}na.$inject=["eventBus","canvas"];na.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};na.prototype.get=function(){return this._selectedElements};na.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};na.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();xe(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(s){var c=r.findRoot(s);return o===c}),t?Z(e,function(s){n.indexOf(s)===-1&&n.push(s)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var oy="hover",ay="selected",ll=6;function bf(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(s,c){e.addMarker(s,c)}function o(s,c){e.removeMarker(s,c)}t.on("element.hover",function(s){r(s.element,oy)}),t.on("element.out",function(s){o(s.element,oy)}),t.on("selection.changed",function(s){function c(p){o(p,ay)}function a(p){r(p,ay)}var u=s.oldSelection,l=s.newSelection;Z(u,function(p){l.indexOf(p)===-1&&c(p)}),Z(l,function(p){u.indexOf(p)===-1&&a(p)}),i._updateSelectionOutline(l)}),t.on("element.changed",function(s){n.isSelected(s.element)&&i._updateSelectionOutline(n.get())})}bf.$inject=["canvas","eventBus","selection"];bf.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Yr(t);var n=e.length>1,i=this._canvas.getContainer();if(ke(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=hN(mi(e)),o=ue("rect");te(o,J({rx:3},r)),ke(o).add("djs-selection-outline"),de(t,o)}};function hN(e){return{x:e.x-ll,y:e.y-ll,width:e.width+ll*2,height:e.height+ll*2}}function wx(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,s=o.canExecute,c=o.elements,a=o.hints||{},u=a.autoSelect;if(s){if(u===!1)return;xe(u)?t.select(u):t.select(c.filter(dN))}}),e.on("connect.end",500,function(r){var o=r.context,s=o.connection;s&&t.select(s)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],s=i.get(r.context.shape.id),c=Be(o,function(a){return s.id===a.id});c||t.select(s)}),e.on("element.click",function(r){if($s(r)){var o=r.element;o===n.getRootElement()&&(o=null);var s=t.isSelected(o),c=t.get().length>1,a=ql(r);if(s&&c)return a?t.deselect(o):t.select(o);s?t.deselect(o):t.select(o,a)}})}wx.$inject=["eventBus","selection","canvas","elementRegistry"];function dN(e){return!e.hidden}const wf={__init__:["selectionVisuals","selectionBehavior"],__depends__:[oN,pN],selection:["type",na],selectionVisuals:["type",bf],selectionBehavior:["type",wx]};var fN=/^djs-cursor-.*$/;function _f(e){var t=ve(document.body);t.removeMatching(fN),e&&t.add("djs-cursor-"+e)}function gN(){_f(null)}var mN=5e3;function vN(e,t){t=t||"element.click";function n(){return!1}return e.once(t,mN,n),function(){e.off(t,n)}}function Ju(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _x(e,t){return e=xe(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}var mo=Math.round,sy="djs-drag-active";function Cr(e){e.preventDefault()}function yN(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function bN(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function xx(e,t,n,i){var r={threshold:5,trapClick:!0},o;function s(E){var y=t.viewbox(),x=t._container.getBoundingClientRect();return{x:y.x+(E.x-x.left)/y.scale,y:y.y+(E.y-x.top)/y.scale}}function c(E,y){y=y||o;var x=e.createEvent(J({},y.payload,y.data,{isTouch:y.isTouch}));return e.fire("drag."+E,x)===!1?!1:e.fire(y.prefix+"."+E,x)}function a(E){var y=E.filter(function(x){return i.get(x.id)});y.length&&n.select(y)}function u(E,y){var x=o.payload,v=o.displacement,S=o.globalStart,M=eh(E),$=Ju(M,S),T=o.localStart,I=s(M),C=Ju(I,T);if(!o.active&&(y||bN($)>o.threshold)){if(J(x,{x:mo(T.x+v.x),y:mo(T.y+v.y),dx:0,dy:0},{originalEvent:E}),c("start")===!1)return m();o.active=!0,o.keepSelection||(x.previousSelection=n.get(),n.select(null)),o.cursor&&_f(o.cursor),t.addMarker(t.getRootElement(),sy)}Ku(E),o.active&&(J(x,{x:mo(I.x+v.x),y:mo(I.y+v.y),dx:mo(C.x),dy:mo(C.y)},{originalEvent:E}),c("move"))}function l(E){var y,x=!0;o.active&&(E&&(o.payload.originalEvent=E,Ku(E)),x=c("end")),x===!1&&c("rejected"),y=w(x!==!0),c("ended",y)}function p(E){_x("Escape",E)&&(Cr(E),m())}function h(E){var y;o.active&&(y=vN(e),setTimeout(y,400),Cr(E)),l(E)}function d(E){u(E)}function f(E){var y=o.payload;y.hoverGfx=E.gfx,y.hover=E.element,c("hover")}function g(E){c("out");var y=o.payload;y.hoverGfx=null,y.hover=null}function m(E){var y;if(o){var x=o.active;x&&c("cancel"),y=w(E),x&&c("canceled",y)}}function w(E){var y,x;c("cleanup"),gN(),o.trapClick?x=h:x=l,ce.unbind(document,"mousemove",u),ce.unbind(document,"dragstart",Cr),ce.unbind(document,"selectstart",Cr),ce.unbind(document,"mousedown",x,!0),ce.unbind(document,"mouseup",x,!0),ce.unbind(document,"keyup",p),ce.unbind(document,"touchstart",d,!0),ce.unbind(document,"touchcancel",m,!0),ce.unbind(document,"touchmove",u,!0),ce.unbind(document,"touchend",l,!0),e.off("element.hover",f),e.off("element.out",g),t.removeMarker(t.getRootElement(),sy);var v=o.payload.previousSelection;return E!==!1&&v&&!n.get().length&&a(v),y=o,o=null,y}function _(E,y,x,v){o&&m(!1),typeof y=="string"&&(v=x,x=y,y=null),v=J({},r,v||{});var S=v.data||{},M,$,T,I,C;v.trapClick?I=h:I=l,E?(M=Ms(E)||E,$=eh(E),Ku(E),M.type==="dragstart"&&Cr(M)):(M=null,$={x:0,y:0}),T=s($),y||(y=T),C=yN(M),o=J({prefix:x,data:S,payload:{},globalStart:$,displacement:Ju(y,T),localStart:T,isTouch:C},v),v.manual||(C?(ce.bind(document,"touchstart",d,!0),ce.bind(document,"touchcancel",m,!0),ce.bind(document,"touchmove",u,!0),ce.bind(document,"touchend",l,!0)):(ce.bind(document,"mousemove",u),ce.bind(document,"dragstart",Cr),ce.bind(document,"selectstart",Cr),ce.bind(document,"mousedown",I,!0),ce.bind(document,"mouseup",I,!0)),ce.bind(document,"keyup",p),e.on("element.hover",f),e.on("element.out",g)),c("init"),v.autoActivate&&u(E,!0)}e.on("diagram.destroy",m),this.init=_,this.move=u,this.hover=f,this.out=g,this.end=l,this.cancel=m,this.context=function(){return o},this.setOptions=function(E){J(r,E)}}xx.$inject=["eventBus","canvas","selection","elementRegistry"];const Rs={__depends__:[KO,wf],dragging:["type",xx]};var wN=["marker-start","marker-mid","marker-end"],_N=["circle","ellipse","line","path","polygon","polyline","path","rect"];function br(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;t.on("drag.cleanup",function(){r.cleanUp()})}br.$inject=["elementRegistry","eventBus","canvas","styles"];br.prototype.cleanUp=function(){var e=this;Z(e._clonedMarkers,function(t){Je(t)}),e._clonedMarkers={}};br.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};br.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=Qa(n),o=n.getBoundingClientRect();return this._cloneMarkers(Ql(r),i),te(r,this._styles.cls(i,[],{x:o.top,y:o.left})),de(t,r),te(r,"data-preview-support-element-id",e.id),r};br.prototype.addFrame=function(e,t){var n=ue("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return de(t,n),te(n,"data-preview-support-element-id",e.id),n};br.prototype._cloneMarkers=function(e,t="djs-dragger"){var n=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)n._cloneMarkers(e.childNodes[i],t);CN(e)&&wN.forEach(function(r){if(te(e,r)){var o=xN(e,r,n._canvas.getContainer());n._cloneMarker(e,o,r,t)}})};br.prototype._cloneMarker=function(e,t,n,i="djs-dragger"){var r=t.id+"-"+i,o=this._clonedMarkers[r];if(!o){o=Qa(t);var s=r+"-clone";o.id=s,ke(o).add(i),this._clonedMarkers[r]=o;var c=Ee("defs",this._canvas._svg);c||(c=ue("defs"),de(this._canvas._svg,c)),de(c,o)}var a=SN(this._clonedMarkers[r].id);te(e,n,a)};function xN(e,t,n){var i=EN(te(e,t));return Ee("marker#"+i,n||document)}function EN(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function SN(e){return"url(#"+e+")"}function CN(e){return _N.indexOf(e.nodeName)!==-1}const Ex={__init__:["previewSupport"],previewSupport:["type",br]};function xf(e){this._commandStack=e.get("commandStack",!1)}xf.$inject=["injector"];xf.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const mu={__init__:["rules"],rules:["type",xf]};var AN="drop-ok",ly="drop-not-ok",cy="attach-ok",uy="new-parent",py="create",TN=2e3;function Sx(e,t,n,i,r){function o(a,u,l,p,h){if(!u)return!1;a=$e(a,function(_){var E=_.labelTarget;return!_.parent&&!(Kl(_)&&a.indexOf(E)!==-1)});var d=Be(a,function(_){return!ni(_)}),f=!1,g=!1,m=!1;dy(a)&&(f=r.allowed("shape.attach",{position:l,shape:d,target:u})),f||(dy(a)?m=r.allowed("shape.create",{position:l,shape:d,source:p,target:u}):m=r.allowed("elements.create",{elements:a,position:l,target:u}));var w=h.connectionTarget;return m||f?(d&&p&&(g=r.allowed("connection.create",{source:w===p?d:p,target:w===p?p:d,hints:{targetParent:u,targetAttach:f}})),{attach:f,connect:g}):m===null||f===null?null:!1}function s(a,u){[cy,AN,ly,uy].forEach(function(l){l===u?e.addMarker(a,l):e.removeMarker(a,l)})}n.on(["create.move","create.hover"],function(a){var u=a.context,l=u.elements,p=a.hover,h=u.source,d=u.hints||{};if(!p){u.canExecute=!1,u.target=null;return}hy(a);var f={x:a.x,y:a.y},g=u.canExecute=p&&o(l,p,f,h,d);p&&g!==null&&(u.target=p,g&&g.attach?s(p,cy):s(p,g?uy:ly))}),n.on(["create.end","create.out","create.cleanup"],function(a){var u=a.hover;u&&s(u,null)}),n.on("create.end",function(a){var u=a.context,l=u.source,p=u.shape,h=u.elements,d=u.target,f=u.canExecute,g=f&&f.attach,m=f&&f.connect,w=u.hints||{};if(f===!1||!d)return!1;hy(a);var _={x:a.x,y:a.y};m?p=i.appendShape(l,p,_,d,{attach:g,connection:m===!0?{}:m,connectionTarget:w.connectionTarget}):(h=i.createElements(h,_,d,J({},w,{attach:g})),p=Be(h,function(E){return!ni(E)})),J(u,{elements:h,shape:p}),J(a,{elements:h,shape:p})});function c(){var a=t.context();a&&a.prefix===py&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",c),n.once(["create.cancel","create.end"],TN,function(){n.off("elements.changed",c)})}),this.start=function(a,u,l){xe(u)||(u=[u]);var p=Be(u,function(f){return!ni(f)});if(p){l=J({elements:u,hints:{},shape:p},l||{}),Z(u,function(f){he(f.x)||(f.x=0),he(f.y)||(f.y=0)});var h=$e(u,function(f){return!f.hidden}),d=mi(h);Z(u,function(f){ni(f)&&(f.waypoints=jt(f.waypoints,function(g){return{x:g.x-d.x-d.width/2,y:g.y-d.y-d.height/2}})),J(f,{x:f.x-d.x-d.width/2,y:f.y-d.y-d.height/2})}),t.init(a,py,{cursor:"grabbing",autoActivate:!0,data:{shape:p,elements:u,context:l}})}}}Sx.$inject=["canvas","dragging","eventBus","modeling","rules"];function hy(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function dy(e){return e&&e.length===1&&!ni(e[0])}function ec(e,t,n){var i=yo();i.setTranslate(t,n),wo(e,i)}var MN=750;function Cx(e,t,n,i,r){function o(s){var c=ue("g");te(c,r.cls("djs-drag-group",["no-events"]));var a=ue("g");return s.forEach(function(u){var l;u.hidden||(u.waypoints?(l=n._createContainer("connection",a),n.drawConnection(Ql(l),u)):(l=n._createContainer("shape",a),n.drawShape(Ql(l),u),ec(l,u.x,u.y)),i.addDragger(u,c,l))}),c}t.on("create.move",MN,function(s){var c=s.hover,a=s.context,u=a.elements,l=a.dragGroup;l||(l=a.dragGroup=o(u));var p;c?(l.parentNode||(p=e.getActiveLayer(),de(p,l)),ec(l,s.x,s.y)):Je(l)}),t.on("create.cleanup",function(s){var c=s.context,a=c.dragGroup;a&&Je(a)})}Cx.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const $N={__depends__:[Rs,Ex,mu,wf],__init__:["create","createPreview"],create:["type",Sx],createPreview:["type",Cx]};var RN=250;function oo(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}oo.$inject=["eventBus","dragging"];oo.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};oo.prototype.isActive=function(e){return e&&this._active===e};oo.prototype.length=function(e){return this._tools.length};oo.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};oo.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",function(o){var s=o.context;if(!s.reactivate&&this.isActive(e)){this.setActive(null),i.cancel();return}this.setActive(e)},this),Z(t,function(o){r.push(o+".ended"),r.push(o+".canceled")}),n.on(r,RN,function(o){this._active&&(IN(o)||this.setActive(null))},this)};function IN(e){var t=e.originalEvent&&e.originalEvent.target;return t&&ai(t,'.group[data-group="tools"]')}const vu={__depends__:[Rs],__init__:["toolManager"],toolManager:["type",oo]};function Ef(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}Ef.$inject=["eventBus"];Ef.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||kN(0,0)};function kN(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,s=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,s,!1,!1,!1,!1,0,null),n}const yu={__init__:["mouse"],mouse:["type",Ef]};function LN(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}var qu=Math.abs,DN=Math.round,hi={x:"width",y:"height"},Ax="crosshair",zi={n:"top",w:"left",s:"bottom",e:"right"},PN=1500,cl={n:"s",w:"e",s:"n",e:"w"},ul=20;function Pi(e,t,n,i,r,o,s){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=s;var c=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(a){n.once("spaceTool.selection.ended",function(){c.activateMakeSpace(a.originalEvent)})}),n.on("spaceTool.move",PN,function(a){var u=a.context,l=u.initialized;l||(l=u.initialized=c.init(a,u)),l&&gy(a)}),n.on("spaceTool.end",function(a){var u=a.context,l=u.axis,p=u.direction,h=u.movingShapes,d=u.resizingShapes,f=u.start;if(u.initialized){gy(a);var g={x:0,y:0};g[l]=DN(a["d"+l]),c.makeSpace(h,d,g,p,f),n.once("spaceTool.ended",function(m){c.activateSelection(m.originalEvent,!0,!0)})}})}Pi.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];Pi.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:Ax,data:{context:{reactivate:n}},trapClick:!1})};Pi.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:Ax,data:{context:{}}})};Pi.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};Pi.prototype.init=function(e,t){var n=qu(e.dx)>qu(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(qu(i)<5)return!1;i<0&&(i*=-1),Jl(e)&&(i*=-1);var o=LN(n,i),s=this._canvas.getRootElement();!ql(e)&&e.hover&&(s=e.hover);var c=[...sN(s),...s.attachers||[]],a=this.calculateAdjustments(c,n,i,r),u=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:a.resizingShapes,start:r}),l=ON(a,n,o,r,u);return J(t,a,{axis:n,direction:o,spaceToolConstraints:l,start:r}),_f("resize-"+(n==="x"?"ew":"ns")),!0};Pi.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],s=[],c=[],a=[];function u(h){o.includes(h)||o.push(h);var d=h.label;d&&!o.includes(d)&&o.push(d)}function l(h){s.includes(h)||s.push(h)}Z(e,function(h){if(!(!h.parent||Kl(h))){if(ni(h)){a.push(h);return}var d=h[t],f=d+h[hi[t]];if(NN(h)&&(n>0&&ko(h)[t]>i||n<0&&ko(h)[t]<i)){c.push(h);return}if(n>0&&d>i||n<0&&f<i){u(h);return}if(d<i&&f>i&&r.allowed("shape.resize",{shape:h})){l(h);return}}}),Z(o,function(h){var d=h.attachers;d&&Z(d,function(f){u(f)})});var p=o.concat(s);return Z(c,function(h){var d=h.host;Ir(p,d)&&u(h)}),p=o.concat(s),Z(a,function(h){var d=h.source,f=h.target,g=h.label;Ir(p,d)&&Ir(p,f)&&g&&u(g)}),{movingShapes:o,resizingShapes:s}};Pi.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};Pi.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function fy(e){return{top:e.top-ul,right:e.right+ul,bottom:e.bottom+ul,left:e.left-ul}}function gy(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;he(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),he(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),he(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),he(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function ON(e,t,n,i,r){var o=e.movingShapes,s=e.resizingShapes;if(s.length){var c={},a,u;return Z(s,function(l){var p=l.attachers,h=l.children,d=ba(l),f=$e(h,function(T){return!ni(T)&&!Kl(T)&&!Ir(o,T)&&!Ir(s,T)}),g=$e(h,function(T){return!ni(T)&&!Kl(T)&&Ir(o,T)}),m,w,_,E=[],y=[],x,v,S,M;f.length&&(w=fy(ba(mi(f))),m=i-d[zi[n]]+w[zi[n]],n==="n"?c.bottom=u=he(u)?Math.min(u,m):m:n==="w"?c.right=u=he(u)?Math.min(u,m):m:n==="s"?c.top=a=he(a)?Math.max(a,m):m:n==="e"&&(c.left=a=he(a)?Math.max(a,m):m)),g.length&&(_=fy(ba(mi(g))),m=i-_[zi[cl[n]]]+d[zi[cl[n]]],n==="n"?c.bottom=u=he(u)?Math.min(u,m):m:n==="w"?c.right=u=he(u)?Math.min(u,m):m:n==="s"?c.top=a=he(a)?Math.max(a,m):m:n==="e"&&(c.left=a=he(a)?Math.max(a,m):m)),p&&p.length&&(p.forEach(function(T){Ir(o,T)?E.push(T):y.push(T)}),E.length&&(x=ba(mi(E.map(ko))),v=d[zi[cl[n]]]-(x[zi[cl[n]]]-i)),y.length&&(S=ba(mi(y.map(ko))),M=S[zi[n]]-(d[zi[n]]-i)),n==="n"?(m=Math.min(v||1/0,M||1/0),c.bottom=u=he(u)?Math.min(u,m):m):n==="w"?(m=Math.min(v||1/0,M||1/0),c.right=u=he(u)?Math.min(u,m):m):n==="s"?(m=Math.max(v||-1/0,M||-1/0),c.top=a=he(a)?Math.max(a,m):m):n==="e"&&(m=Math.max(v||-1/0,M||-1/0),c.left=a=he(a)?Math.max(a,m):m));var $=r&&r[l.id];$&&(n==="n"?(m=i+l[hi[t]]-$[hi[t]],c.bottom=u=he(u)?Math.min(u,m):m):n==="w"?(m=i+l[hi[t]]-$[hi[t]],c.right=u=he(u)?Math.min(u,m):m):n==="s"?(m=i-l[hi[t]]+$[hi[t]],c.top=a=he(a)?Math.max(a,m):m):n==="e"&&(m=i-l[hi[t]]+$[hi[t]],c.left=a=he(a)?Math.max(a,m):m))}),c}}function Ir(e,t){return e.indexOf(t)!==-1}function NN(e){return!!e.host}var ep="djs-dragging",my="djs-resizing",BN=250,pl=Math.max;function Tx(e,t,n,i,r){function o(s,c){Z(s,function(a){r.addDragger(a,c),n.addMarker(a,ep)})}e.on("spaceTool.selection.start",function(s){var c=n.getLayer("space"),a=s.context,u={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},l=ue("g");te(l,i.cls("djs-crosshair-group",["no-events"])),de(c,l);var p=ue("path");te(p,"d",u.x),ke(p).add("djs-crosshair"),de(l,p);var h=ue("path");te(h,"d",u.y),ke(h).add("djs-crosshair"),de(l,h),a.crosshairGroup=l}),e.on("spaceTool.selection.move",function(s){var c=s.context.crosshairGroup;ec(c,s.x,s.y)}),e.on("spaceTool.selection.cleanup",function(s){var c=s.context,a=c.crosshairGroup;a&&Je(a)}),e.on("spaceTool.move",BN,function(s){var c=s.context,a=c.line,u=c.axis,l=c.movingShapes,p=c.resizingShapes;if(c.initialized){if(!c.dragGroup){var h=n.getLayer("space");a=ue("path"),te(a,"d","M0,0 L0,0"),ke(a).add("djs-crosshair"),de(h,a),c.line=a;var d=ue("g");te(d,i.cls("djs-drag-group",["no-events"])),de(n.getActiveLayer(),d),o(l,d);var f=c.movingConnections=t.filter(function(y){var x=!1;Z(l,function($){Z($.outgoing,function(T){y===T&&(x=!0)})});var v=!1;Z(l,function($){Z($.incoming,function(T){y===T&&(v=!0)})});var S=!1;Z(p,function($){Z($.outgoing,function(T){y===T&&(S=!0)})});var M=!1;return Z(p,function($){Z($.incoming,function(T){y===T&&(M=!0)})}),ni(y)&&(x||S)&&(v||M)});o(f,d),c.dragGroup=d}if(!c.frameGroup){var g=ue("g");te(g,i.cls("djs-frame-group",["no-events"])),de(n.getActiveLayer(),g);var m=[];Z(p,function(y){var x=r.addFrame(y,g),v=x.getBBox();m.push({element:x,initialBounds:v}),n.addMarker(y,my)}),c.frameGroup=g,c.frames=m}var w={x:"M"+s.x+", -10000 L"+s.x+", 10000",y:"M -10000, "+s.y+" L 10000, "+s.y};te(a,{d:w[u]});var _={x:"y",y:"x"},E={x:s.dx,y:s.dy};E[_[c.axis]]=0,ec(c.dragGroup,E.x,E.y),Z(c.frames,function(y){var x=y.element,v=y.initialBounds,S,M;c.direction==="e"?te(x,{width:pl(v.width+E.x,5)}):(S=pl(v.width-E.x,5),te(x,{width:S,x:v.x+v.width-S})),c.direction==="s"?te(x,{height:pl(v.height+E.y,5)}):(M=pl(v.height-E.y,5),te(x,{height:M,y:v.y+v.height-M}))})}}),e.on("spaceTool.cleanup",function(s){var c=s.context,a=c.movingShapes,u=c.movingConnections,l=c.resizingShapes,p=c.line,h=c.dragGroup,d=c.frameGroup;Z(a,function(f){n.removeMarker(f,ep)}),Z(u,function(f){n.removeMarker(f,ep)}),h&&(Je(p),Je(h)),Z(l,function(f){n.removeMarker(f,my)}),d&&Je(d)})}Tx.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const FN={__init__:["spaceToolPreview"],__depends__:[Rs,mu,vu,Ex,yu],spaceTool:["type",Pi],spaceToolPreview:["type",Tx]};var Mx="crosshair";function ao(e,t,n,i,r,o,s){this._selection=r,this._dragging=n,this._mouse=s;var c=this,a={create:function(u){var l=t.getActiveLayer(),p;p=u.frame=ue("rect"),te(p,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),de(l,p)},update:function(u){var l=u.frame,p=u.bbox;te(l,{x:p.x,y:p.y,width:p.width,height:p.height})},remove:function(u){u.frame&&Je(u.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(u){var l=u.originalEvent.target;!u.hover&&!(l instanceof SVGElement)||e.once("lasso.selection.ended",function(){c.activateLasso(u.originalEvent,!0)})}),e.on("lasso.end",0,function(u){var l=u.context,p=tp(u),h=i.filter(function(f){return f}),d=ql(u);c.select(h,p,d?l.selection:[])}),e.on("lasso.start",function(u){var l=u.context;l.bbox=tp(u),a.create(l),l.selection=r.get()}),e.on("lasso.move",function(u){var l=u.context;l.bbox=tp(u),a.update(l)}),e.on("lasso.cleanup",function(u){var l=u.context;a.remove(l)}),e.on("element.mousedown",1500,function(u){if(ql(u))return c.activateLasso(u.originalEvent),!0})}ao.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];ao.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:Mx,data:{context:{}}})};ao.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:Mx,data:{context:{}},keepSelection:!0})};ao.prototype.select=function(e,t,n=[]){var i=lN(e,t);this._selection.select([...n,...rc(i)])};ao.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};ao.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function tp(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const jN={__depends__:[vu,yu],__init__:["lassoTool"],lassoTool:["type",ao]};var np=1500,$x="grab";function ia(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var s=this,c=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",np,function(a){if(Jl(a))return s.activateMove(a.originalEvent,!0),!1}),c&&c.addListener(np,function(a){if(!(!vy(a.keyEvent)||s.isActive())){var u=s._mouse.getLastMoveEvent();s.activateMove(u,!!u)}},"keyboard.keydown"),c&&c.addListener(np,function(a){!vy(a.keyEvent)||!s.isActive()||s.toggle()},"keyboard.keyup"),e.on("hand.end",function(a){var u=a.originalEvent.target;if(!a.hover&&!(u instanceof SVGElement))return!1;e.once("hand.ended",function(){s.activateMove(a.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(a){var u=t.viewbox().scale;t.scroll({dx:a.dx*u,dy:a.dy*u})}),e.on("hand.move.end",function(a){var u=a.context,l=u.reactivate;return!Jl(a)&&l&&e.once("hand.move.ended",function(p){s.activateHand(p.originalEvent,!0,!0)}),!1})}ia.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];ia.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:$x,data:{context:n||{}}})};ia.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:$x,data:{context:{reactivate:n}}})};ia.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};ia.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function vy(e){return _x("Space",e)}const HN={__depends__:[vu,yu],__init__:["handTool"],handTool:["type",ia]};function Rx(e,t,n,i){function r(s,c){return i.allowed("connection.create",{source:s,target:c})}function o(s,c){return r(c,s)}e.on("connect.hover",function(s){var c=s.context,a=c.start,u=s.hover,l;if(c.hover=u,l=c.canExecute=r(a,u),!bo(l)){if(l!==!1){c.source=a,c.target=u;return}l=c.canExecute=o(a,u),!bo(l)&&l!==!1&&(c.source=u,c.target=a)}}),e.on(["connect.out","connect.cleanup"],function(s){var c=s.context;c.hover=null,c.source=null,c.target=null,c.canExecute=!1}),e.on("connect.end",function(s){var c=s.context,a=c.canExecute,u=c.connectionStart,l={x:s.x,y:s.y},p=c.source,h=c.target;if(!a)return!1;var d=null,f={connectionStart:nh(c)?l:u,connectionEnd:nh(c)?u:l};ht(a)&&(d=a),c.connection=n.connect(p,h,d,f)}),this.start=function(s,c,a,u){ht(a)||(u=a,a=ko(c)),t.init(s,"connect",{autoActivate:u,data:{shape:c,context:{start:c,connectionStart:a}}})}}Rx.$inject=["eventBus","dragging","modeling","rules"];function nh(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var WN=1100,GN=900,yy="connect-ok",by="connect-not-ok";function Ix(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,s=o.canExecute,c=o.hover,a=o.source,u=o.start,l=o.startPosition,p=o.target,h=o.connectionStart||l,d=o.connectionEnd||{x:r.x,y:r.y},f=h,g=d;nh(o)&&(f=d,g=h),i.drawPreview(o,s,{source:a||u,target:p||c,connectionStart:f,connectionEnd:g})}),t.on("connect.hover",GN,function(r){var o=r.context,s=r.hover,c=o.canExecute;c!==null&&n.addMarker(s,c?yy:by)}),t.on(["connect.out","connect.cleanup"],WN,function(r){var o=r.hover;o&&(n.removeMarker(o,yy),n.removeMarker(o,by))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}Ix.$inject=["injector","eventBus","canvas"];const zN={__depends__:[wf,mu,Rs],__init__:["connectPreview"],connect:["type",Rx],connectPreview:["type",Ix]};var wy="connect-ok",_y="connect-not-ok";function ra(e,t,n,i,r,o,s){var c=this;this._dragging=t,this._rules=o,this._mouse=s,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(a){var u=a.context,l=a.hover,p=u.canStartConnect=c.canStartConnect(l);p!==null&&(u.startTarget=l,i.addMarker(l,p?wy:_y))}),e.on(["global-connect.out","global-connect.cleanup"],function(a){var u=a.context.startTarget,l=a.context.canStartConnect;u&&i.removeMarker(u,l?wy:_y)}),e.on(["global-connect.ended"],function(a){var u=a.context,l=u.startTarget,p={x:a.x,y:a.y},h=c.canStartConnect(l);if(h)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,l,p)}),!1})}ra.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];ra.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};ra.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};ra.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};ra.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const VN={__depends__:[zN,mu,Rs,vu,yu],globalConnect:["type",ra]};function UN(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const YN={translate:["value",UN]};function Sf(e,t,n,i,r,o,s,c){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=s,this._translate=c,e.registerProvider(this)}Sf.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Sf.prototype.getPaletteEntries=function(e){const t={},n=this._create,i=this._elementFactory,r=this._spaceTool,o=this._lassoTool,s=this._handTool,c=this._globalConnect,a=this._translate;function u(h,d,f,g,m){function w(E){const y=i.createShape(Object.assign({type:h},m));n.start(E,y)}const _=h.replace(/^bpmn:/,"");return{group:d,className:f,title:g||a("Create {type}",{type:_}),action:{dragstart:w,click:w}}}function l(h){const d=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),f=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:d});n.start(h,[d,f],{hints:{autoSelect:[d]}})}function p(h){n.start(h,i.createParticipantShape())}return Object.assign(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:a("Activate the hand tool"),action:{click:function(h){s.activateHand(h)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:a("Activate the lasso tool"),action:{click:function(h){o.activateSelection(h)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:a("Activate the create/remove space tool"),action:{click:function(h){r.activateSelection(h)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:a("Activate the global connect tool"),action:{click:function(h){c.start(h)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":u("bpmn:StartEvent","event","bpmn-icon-start-event-none",a("Create StartEvent")),"create.intermediate-event":u("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",a("Create Intermediate/Boundary Event")),"create.end-event":u("bpmn:EndEvent","event","bpmn-icon-end-event-none",a("Create EndEvent")),"create.exclusive-gateway":u("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-xor",a("Exclusive Gateway")),"create.paralle-gateway":u("bpmn:ParallelGateway","gateway","bpmn-icon-gateway-parallel",a("Parallel Gateway")),"create.task":u("bpmn:Task","activity","bpmn-icon-task",a("Create Task")),"create.user-task":u("bpmn:UserTask","activity","bpmn-icon-user-task",a("Create User Task")),"create.service-task":u("bpmn:ServiceTask","activity","bpmn-icon-service-task",a("Create Service Task")),"create.script-task":u("bpmn:ScriptTask","activity","bpmn-icon-script-task",a("Create Script Task")),"create.receive-task":u("bpmn:ReceiveTask","activity","bpmn-icon-receive-task",a("Create Receive Task")),"create.data-object":u("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",a("Create DataObjectReference")),"create.data-store":u("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",a("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:a("Create expanded SubProcess"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:a("Create Pool/Participant"),action:{dragstart:p,click:p}},"create.group":u("bpmn:Group","artifact","bpmn-icon-group",a("Create Group"))}),t};const ZN={__depends__:[ZO,$N,FN,jN,HN,VN,YN],__init__:["paletteProvider"],paletteProvider:["type",Sf]};function Cf(e,t,n,i,r,o,s,c,a,u,l,p){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=s,this._create=c,this._popupMenu=a,this._canvas=u,this._rules=l,this._translate=p,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(h){const d=h.context,f=d.shape;if(!Jl(h)||!i.isOpen(f))return;const g=i.getEntries(f);g.replace&&g.replace.action.click(h,f)})}Cf.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];Cf.prototype.getContextPadEntries=function(e){const t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,s=this._popupMenu,c=this._canvas,a=this._autoPlace,u=this._translate,l={},p=e.businessObject;function h(w,_,E,y){typeof E!="string"&&(y=E,E=u("Append {type}",{type:w.replace(/^bpmn:/,"")}));function x(S,M){const $=i.createShape(Object.assign({type:w},y));o.start(S,$,{source:M})}return{group:"model",className:_,title:E,action:{dragstart:x,click:a?function(S,M){const $=i.createShape(Object.assign({type:w},y));a.append(M,$)}:x}}}function d(w){n.removeElements([e])}function f(w,_){r.start(w,_)}function g(w){const E=c.getContainer(),y=t.getPad(w).html,x=E.getBoundingClientRect(),v=y.getBoundingClientRect(),S=v.top-x.top;return{x:v.left-x.left,y:S+v.height+5}}function m(w){return function(_,E){n.splitLane(E,w),t.open(E,!0)}}if(Re(p,["bpmn:Lane","bpmn:Participant"])&&Ne(p)){const w=ki(e);Object.assign(l,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:u("Add Lane above"),action:{click:function(_,E){n.addLane(E,"top")}}}}),w.length<2&&(e.height>=120&&Object.assign(l,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:u("Divide into two Lanes"),action:{click:m(2)}}}),e.height>=180&&Object.assign(l,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:u("Divide into three Lanes"),action:{click:m(3)}}})),Object.assign(l,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:u("Add Lane below"),action:{click:function(_,E){n.addLane(E,"bottom")}}}})}return e.type==="bpmn:SequenceFlow"?Object.assign(l,{delete:{group:"edit",className:"bpmn-icon-trash",title:u("Remove"),action:{click:d}}}):(Object.assign(l,{"append.end-event":h("bpmn:EndEvent","bpmn-icon-end-event-none",u("Append EndEvent")),"append.append-task":h("bpmn:UserTask","bpmn-icon-user-task",u("Append Task")),"append.intermediate-event":h("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",u("Append Intermediate/Boundary Event")),"append.exclusive-gateway":h("bpmn:ExclusiveGateway","bpmn-icon-gateway-xor",u("Append Exclusive Gateway")),"append.parallel-gateway":h("bpmn:ParallelGateway","bpmn-icon-gateway-parallel",u("Append Parallel Gateway"))}),!s.isEmpty(e,"bpmn-replace")&&e.type.indexOf("Event")>-1&&Object.assign(l,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:u("Change type"),action:{click:function(w,_){const E=Object.assign(g(_),{cursor:{x:w.x,y:w.y}});s.open(_,"bpmn-replace",E)}}}}),Object.assign(l,{delete:{group:"edit",className:"bpmn-icon-trash",title:u("Remove"),action:{click:d}},connect:{group:"connect",className:"bpmn-icon-connection-multi",title:u("Connect using Association"),action:{click:f,dragstart:f}}})),l};const XN={__init__:["contextPadProvider"],contextPadProvider:["type",Cf]},KN="Camunda",QN="http://camunda.org/schema/1.0/bpmn",JN="camunda",qN={tagAlias:"lowerCase"},eB=[],tB=JSON.parse('[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","camunda:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"camunda:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"},{"name":"modelerTemplateVersion","isAttr":true,"type":"Integer"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"processCategory","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["camunda:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","camunda:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","camunda:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["camunda:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true},{"name":"id","type":"String","isAttr":true},{"name":"eventDefinitions","type":"bpmn:TimerEventDefinition","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvents","isAttr":true,"type":"String"}]}]'),nB=[],iB={name:KN,uri:QN,prefix:JN,xml:qN,associations:eB,types:tB,emumerations:nB},rB="Activiti",oB="http://activiti.org/bpmn",aB="activiti",sB={tagAlias:"lowerCase"},lB=[],cB=JSON.parse('[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","activiti:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"activiti:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"processCategory","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true},{"name":"executionListener","isAbstract":true,"type":"Expression"}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"multiinstance_type","superClass":["Element"]},{"name":"multiinstance_condition","superClass":["Element"]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"},{"name":"multiinstance_condition","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["activiti:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","activiti:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","activiti:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["activiti:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ExtensionElements","properties":[{"name":"operationList","type":"String","isAttr":true}]},{"name":"OperationList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"operationList","type":"FormOperation","isMany":true}]},{"name":"FormOperation","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"showOrder","type":"String","isAttr":true},{"name":"multiSignAssignee","type":"String","isAttr":true}]},{"name":"VariableList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"variableList","type":"FormVariable","isMany":true}]},{"name":"FormVariable","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"DeptPostList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"deptPostList","type":"DeptPost","isMany":true}]},{"name":"DeptPost","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"postId","type":"String","isAttr":true},{"name":"deptPostId","type":"String","isAttr":true}]},{"name":"UserCandidateGroups","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"CustomCondition","superClass":["Element"],"meta":{"allowedIn":["bpmn:SequenceFlow"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"operationType","type":"String","isAttr":true},{"name":"parallelRefuse","type":"Boolean","isAttr":true,"default":false}]},{"name":"AssigneeList","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"assigneeList","type":"Assignee","isMany":true},{"name":"type","type":"String","isAttr":true}]},{"name":"Assignee","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}]'),uB=[],pB={name:rB,uri:oB,prefix:aB,xml:sB,associations:lB,types:cB,emumerations:uB},hB="Flowable",dB="http://flowable.org/bpmn",fB="flowable",gB={tagAlias:"lowerCase"},mB=[],vB=JSON.parse('[{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","flowable:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"flowable:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"},{"name":"localScope","isAttr":true,"type":"Boolean","default":false}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"processCategory","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"xcField","isAbstract":true,"properties":[{"name":"xcString","isMany":true,"type":"Element"},{"name":"name","isAttr":true,"type":"String"}]},{"name":"xcString","isAbstract":true,"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"dataType","isAttr":true,"type":"String"},{"name":"assignee","isAttr":true,"type":"String"},{"name":"xcformKey","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"text","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["flowable:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","flowable:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","flowable:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["flowable:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ExtensionElements","properties":[{"name":"operationList","type":"String","isAttr":true}]},{"name":"OperationList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"operationList","type":"FormOperation","isMany":true}]},{"name":"FormOperation","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"showOrder","type":"String","isAttr":true},{"name":"multiSignAssignee","type":"String","isAttr":true}]},{"name":"VariableList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"variableList","type":"FormVariable","isMany":true}]},{"name":"FormVariable","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"DeptPostList","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"deptPostList","type":"DeptPost","isMany":true}]},{"name":"DeptPost","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"postId","type":"String","isAttr":true},{"name":"deptPostId","type":"String","isAttr":true}]},{"name":"UserCandidateGroups","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"CustomCondition","superClass":["Element"],"meta":{"allowedIn":["bpmn:SequenceFlow"]},"properties":[{"name":"type","type":"String","isAttr":true},{"name":"operationType","type":"String","isAttr":true},{"name":"parallelRefuse","type":"Boolean","isAttr":true,"default":false}]},{"name":"AssigneeList","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"assigneeList","type":"Assignee","isMany":true},{"name":"type","type":"String","isAttr":true}]},{"name":"Assignee","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"}]}]'),yB=[],bB={name:hB,uri:dB,prefix:fB,xml:gB,associations:mB,types:vB,emumerations:yB},wB="*";function oa(e){const t=this;e.on("moddleCopy.canCopyProperty",function(n){const i=n.property,r=n.parent;return t.canCopyProperty(i,r)})}oa.$inject=["eventBus"];oa.prototype.canCopyProperty=function(e,t){if(ht(e)&&!_B(e,t)||Lo(e,"camunda:InputOutput")&&!this.canHostInputOutput(t)||kx(e,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(t)||Lo(e,"camunda:In")&&!this.canHostIn(t))return!1};oa.prototype.canHostInputOutput=function(e){if(Nn(e,"camunda:Connector"))return!0;const n=Nn(e,"bpmn:FlowNode");return!(!n||kx(n,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])||Lo(n,"bpmn:SubProcess")&&n.get("triggeredByEvent"))};oa.prototype.canHostConnector=function(e){const t=Nn(e,"camunda:ServiceTaskLike");return Lo(t,"bpmn:MessageEventDefinition")?Nn(e,"bpmn:IntermediateThrowEvent")||Nn(e,"bpmn:EndEvent"):!0};oa.prototype.canHostIn=function(e){return Nn(e,"bpmn:CallActivity")?!0:Nn(e,"bpmn:SignalEventDefinition")?Nn(e,"bpmn:IntermediateThrowEvent")||Nn(e,"bpmn:EndEvent"):!0};function Lo(e,t){return e&&ot(e.$instanceOf)&&e.$instanceOf(t)}function kx(e,t){return qt(t,function(n){return Lo(e,n)})}function Nn(e,t){if(!t)return e.$parent;if(Lo(e,t))return e;if(e.$parent)return Nn(e.$parent,t)}function _B(e,t){const n=e.$type&&e.$model.getTypeDescriptor(e.$type),i=n&&n.meta&&n.meta.allowedIn;return!i||xB(i)?!0:qt(i,function(r){return Nn(t,r)})}function xB(e){return e.indexOf(wB)!==-1}const EB={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",oa]},SB={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function Af(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}function CB(e){return e&&e.length}function hl(e,t){return CB(e)&&qt(e,function(n){return Af(n,t)})}function AB(e,t){return qt(t,function(n){return Af(e,n)})}function ip(e,t,n){const i=t.name,r=SB[i.replace(/activiti:/,"")];return i===e&&AB(n,r)}function Tf(e){e.on("property.clone",function(t){const n=t.newElement,i=t.propertyDescriptor;this.canCloneProperty(n,i)},this)}Tf.$inject=["eventBus"];Tf.prototype.canCloneProperty=function(e,t){if(ip("activiti:FailedJobRetryTimeCycle",t,e))return hl(e.eventDefinitions,"bpmn:TimerEventDefinition")||hl(e.eventDefinitions,"bpmn:SignalEventDefinition")||Af(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics");if(ip("activiti:Connector",t,e)||ip("activiti:Field",t,e))return hl(e.eventDefinitions,"bpmn:MessageEventDefinition")};const TB={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",Tf]},MB={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function Mf(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}function $B(e){return e&&e.length}function dl(e,t){return $B(e)&&qt(e,function(n){return Mf(n,t)})}function RB(e,t){return qt(t,function(n){return Mf(e,n)})}function rp(e,t,n){const i=t.name,r=MB[i.replace(/flowable:/,"")];return i===e&&RB(n,r)}function $f(e){e.on("property.clone",function(t){const n=t.newElement,i=t.propertyDescriptor;this.canCloneProperty(n,i)},this)}$f.$inject=["eventBus"];$f.prototype.canCloneProperty=function(e,t){if(rp("flowable:FailedJobRetryTimeCycle",t,e))return dl(e.eventDefinitions,"bpmn:TimerEventDefinition")||dl(e.eventDefinitions,"bpmn:SignalEventDefinition")||Mf(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics");if(rp("flowable:Connector",t,e)||rp("flowable:Field",t,e))return dl(e.eventDefinitions,"bpmn:MessageEventDefinition")};const IB={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",$f]};var op={exports:{}},xy;function kB(){return xy||(xy=1,function(e,t){(function(){var n="ace",i=function(){return this}();!i&&typeof window<"u"&&(i=window);var r=function(l,p,h){if(typeof l!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(h=p),r.modules[l]||(r.payloads[l]=h,r.modules[l]=null)};r.modules={},r.payloads={};var o=function(l,p,h){if(typeof p=="string"){var d=a(l,p);if(d!=null)return h&&h(),d}else if(Object.prototype.toString.call(p)==="[object Array]"){for(var f=[],g=0,m=p.length;g<m;++g){var w=a(l,p[g]);if(w==null&&s.original)return;f.push(w)}return h&&h.apply(null,f)||!0}},s=function(l,p){var h=o("",l,p);return h==null&&s.original?s.original.apply(this,arguments):h},c=function(l,p){if(p.indexOf("!")!==-1){var h=p.split("!");return c(l,h[0])+"!"+c(l,h[1])}if(p.charAt(0)=="."){var d=l.split("/").slice(0,-1).join("/");for(p=d+"/"+p;p.indexOf(".")!==-1&&f!=p;){var f=p;p=p.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return p},a=function(l,p){p=c(l,p);var h=r.modules[p];if(!h){if(h=r.payloads[p],typeof h=="function"){var d={},f={id:p,uri:"",exports:d,packaged:!0},g=function(w,_){return o(p,w,_)},m=h(g,d,f);d=m||f.exports,r.modules[p]=d,delete r.payloads[p]}h=r.modules[p]=d||h}return h};function u(l){var p=i;i[l]||(i[l]={}),p=i[l],(!p.define||!p.define.packaged)&&(r.original=p.define,p.define=r,p.define.packaged=!0),(!p.require||!p.require.packaged)&&(s.original=p.require,p.require=s,p.require.packaged=!0)}u(n)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(n,i,r){function o(s,c,a){Object.defineProperty(s,c,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||o(String.prototype,"startsWith",function(s,c){return c=c||0,this.lastIndexOf(s,c)===c}),String.prototype.endsWith||o(String.prototype,"endsWith",function(s,c){var a=this;(c===void 0||c>a.length)&&(c=a.length),c-=s.length;var u=a.indexOf(s,c);return u!==-1&&u===c}),String.prototype.repeat||o(String.prototype,"repeat",function(s){for(var c="",a=this;s>0;)s&1&&(c+=a),(s>>=1)&&(a+=a);return c}),String.prototype.includes||o(String.prototype,"includes",function(s,c){return this.indexOf(s,c)!=-1}),Object.assign||(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(s),a=1;a<arguments.length;a++){var u=arguments[a];u!=null&&Object.keys(u).forEach(function(l){c[l]=u[l]})}return c}),Object.values||(Object.values=function(s){return Object.keys(s).map(function(c){return s[c]})}),Array.prototype.find||o(Array.prototype,"find",function(s){for(var c=this.length,a=arguments[1],u=0;u<c;u++){var l=this[u];if(s.call(a,l,u,this))return l}}),Array.prototype.findIndex||o(Array.prototype,"findIndex",function(s){for(var c=this.length,a=arguments[1],u=0;u<c;u++){var l=this[u];if(s.call(a,l,u,this))return u}}),Array.prototype.includes||o(Array.prototype,"includes",function(s,c){return this.indexOf(s,c)!=-1}),Array.prototype.fill||o(Array.prototype,"fill",function(s){for(var c=this,a=c.length>>>0,u=arguments[1],l=u>>0,p=l<0?Math.max(a+l,0):Math.min(l,a),h=arguments[2],d=h===void 0?a:h>>0,f=d<0?Math.max(a+d,0):Math.min(d,a);p<f;)c[p]=s,p++;return c}),Array.of||o(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(n,i,r){n("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(n,i,r){i.deepCopy=function o(s){if(typeof s!="object"||!s)return s;var c;if(Array.isArray(s)){c=[];for(var a=0;a<s.length;a++)c[a]=o(s[a]);return c}if(Object.prototype.toString.call(s)!=="[object Object]")return s;c={};for(var a in s)c[a]=o(s[a]);return c}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(n,i,r){i.last=function(c){return c[c.length-1]},i.stringReverse=function(c){return c.split("").reverse().join("")},i.stringRepeat=function(c,a){for(var u="";a>0;)a&1&&(u+=c),(a>>=1)&&(c+=c);return u};var o=/^\s\s*/,s=/\s\s*$/;i.stringTrimLeft=function(c){return c.replace(o,"")},i.stringTrimRight=function(c){return c.replace(s,"")},i.copyObject=function(c){var a={};for(var u in c)a[u]=c[u];return a},i.copyArray=function(c){for(var a=[],u=0,l=c.length;u<l;u++)c[u]&&typeof c[u]=="object"?a[u]=this.copyObject(c[u]):a[u]=c[u];return a},i.deepCopy=n("./deep_copy").deepCopy,i.arrayToMap=function(c){for(var a={},u=0;u<c.length;u++)a[c[u]]=1;return a},i.createMap=function(c){var a=Object.create(null);for(var u in c)a[u]=c[u];return a},i.arrayRemove=function(c,a){for(var u=0;u<=c.length;u++)a===c[u]&&c.splice(u,1)},i.escapeRegExp=function(c){return c.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},i.escapeHTML=function(c){return(""+c).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},i.getMatchOffsets=function(c,a){var u=[];return c.replace(a,function(l){u.push({offset:arguments[arguments.length-2],length:l.length})}),u},i.deferredCall=function(c){var a=null,u=function(){a=null,c()},l=function(p){return l.cancel(),a=setTimeout(u,p||0),l};return l.schedule=l,l.call=function(){return this.cancel(),c(),l},l.cancel=function(){return clearTimeout(a),a=null,l},l.isPending=function(){return a},l},i.delayedCall=function(c,a){var u=null,l=function(){u=null,c()},p=function(h){u==null&&(u=setTimeout(l,h||a))};return p.delay=function(h){u&&clearTimeout(u),u=setTimeout(l,h||a)},p.schedule=p,p.call=function(){this.cancel(),c()},p.cancel=function(){u&&clearTimeout(u),u=null},p.isPending=function(){return u},p},i.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},i.skipEmptyMatch=function(c,a,u){return u&&c.codePointAt(a)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(n,i,r){i.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},i.getOS=function(){return i.isMac?i.OS.MAC:i.isLinux?i.OS.LINUX:i.OS.WINDOWS};var o=typeof navigator=="object"?navigator:{},s=(/mac|win|linux/i.exec(o.platform)||["other"])[0].toLowerCase(),c=o.userAgent||"",a=o.appName||"";i.isWin=s=="win",i.isMac=s=="mac",i.isLinux=s=="linux",i.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((c.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((c.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),i.isOldIE=i.isIE&&i.isIE<9,i.isGecko=i.isMozilla=c.match(/ Gecko\/\d+/),i.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",i.isWebKit=parseFloat(c.split("WebKit/")[1])||void 0,i.isChrome=parseFloat(c.split(" Chrome/")[1])||void 0,i.isSafari=parseFloat(c.split(" Safari/")[1])&&!i.isChrome||void 0,i.isEdge=parseFloat(c.split(" Edge/")[1])||void 0,i.isAIR=c.indexOf("AdobeAIR")>=0,i.isAndroid=c.indexOf("Android")>=0,i.isChromeOS=c.indexOf(" CrOS ")>=0,i.isIOS=/iPad|iPhone|iPod/.test(c)&&!window.MSStream,i.isIOS&&(i.isMac=!0),i.isMobile=i.isIOS||i.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(n,i,r){var o=n("./useragent"),s="http://www.w3.org/1999/xhtml";i.buildDom=function h(d,f,g){if(typeof d=="string"&&d){var m=document.createTextNode(d);return f&&f.appendChild(m),m}if(!Array.isArray(d))return d&&d.appendChild&&f&&f.appendChild(d),d;if(typeof d[0]!="string"||!d[0]){for(var w=[],_=0;_<d.length;_++){var E=h(d[_],f,g);E&&w.push(E)}return w}var y=document.createElement(d[0]),x=d[1],v=1;x&&typeof x=="object"&&!Array.isArray(x)&&(v=2);for(var _=v;_<d.length;_++)h(d[_],y,g);return v==2&&Object.keys(x).forEach(function(S){var M=x[S];S==="class"?y.className=Array.isArray(M)?M.join(" "):M:typeof M=="function"||S=="value"||S[0]=="$"?y[S]=M:S==="ref"?g&&(g[M]=y):S==="style"?typeof M=="string"&&(y.style.cssText=M):M!=null&&y.setAttribute(S,M)}),f&&f.appendChild(y),y},i.getDocumentHead=function(h){return h||(h=document),h.head||h.getElementsByTagName("head")[0]||h.documentElement},i.createElement=function(h,d){return document.createElementNS?document.createElementNS(d||s,h):document.createElement(h)},i.removeChildren=function(h){h.innerHTML=""},i.createTextNode=function(h,d){var f=d?d.ownerDocument:document;return f.createTextNode(h)},i.createFragment=function(h){var d=h?h.ownerDocument:document;return d.createDocumentFragment()},i.hasCssClass=function(h,d){var f=(h.className+"").split(/\s+/g);return f.indexOf(d)!==-1},i.addCssClass=function(h,d){i.hasCssClass(h,d)||(h.className+=" "+d)},i.removeCssClass=function(h,d){for(var f=h.className.split(/\s+/g);;){var g=f.indexOf(d);if(g==-1)break;f.splice(g,1)}h.className=f.join(" ")},i.toggleCssClass=function(h,d){for(var f=h.className.split(/\s+/g),g=!0;;){var m=f.indexOf(d);if(m==-1)break;g=!1,f.splice(m,1)}return g&&f.push(d),h.className=f.join(" "),g},i.setCssClass=function(h,d,f){f?i.addCssClass(h,d):i.removeCssClass(h,d)},i.hasCssString=function(h,d){var f=0,g;if(d=d||document,g=d.querySelectorAll("style")){for(;f<g.length;)if(g[f++].id===h)return!0}},i.removeElementById=function(h,d){d=d||document,d.getElementById(h)&&d.getElementById(h).remove()};var c,a=[];i.useStrictCSP=function(h){c=h,h==!1?u():a||(a=[])};function u(){var h=a;a=null,h&&h.forEach(function(d){l(d[0],d[1])})}function l(h,d,f){if(!(typeof document>"u")){if(a){if(f)u();else if(f===!1)return a.push([h,d])}if(!c){var g=f;!f||!f.getRootNode?g=document:(g=f.getRootNode(),(!g||g==f)&&(g=document));var m=g.ownerDocument||g;if(d&&i.hasCssString(d,g))return null;d&&(h+=`
/*# sourceURL=ace/css/`+d+" */");var w=i.createElement("style");w.appendChild(m.createTextNode(h)),d&&(w.id=d),g==m&&(g=i.getDocumentHead(m)),g.insertBefore(w,g.firstChild)}}}if(i.importCssString=l,i.importCssStylsheet=function(h,d){i.buildDom(["link",{rel:"stylesheet",href:h}],i.getDocumentHead(d))},i.scrollbarWidth=function(h){var d=i.createElement("ace_inner");d.style.width="100%",d.style.minWidth="0px",d.style.height="200px",d.style.display="block";var f=i.createElement("ace_outer"),g=f.style;g.position="absolute",g.left="-10000px",g.overflow="hidden",g.width="200px",g.minWidth="0px",g.height="150px",g.display="block",f.appendChild(d);var m=h&&h.documentElement||document&&document.documentElement;if(!m)return 0;m.appendChild(f);var w=d.offsetWidth;g.overflow="scroll";var _=d.offsetWidth;return w===_&&(_=f.clientWidth),m.removeChild(f),w-_},i.computedStyle=function(h,d){return window.getComputedStyle(h,"")||{}},i.setStyle=function(h,d,f){h[d]!==f&&(h[d]=f)},i.HAS_CSS_ANIMATION=!1,i.HAS_CSS_TRANSFORMS=!1,i.HI_DPI=o.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,o.isChromeOS&&(i.HI_DPI=!1),typeof document<"u"){var p=document.createElement("div");i.HI_DPI&&p.style.transform!==void 0&&(i.HAS_CSS_TRANSFORMS=!0),!o.isEdge&&typeof p.style.animationName<"u"&&(i.HAS_CSS_ANIMATION=!0),p=null}i.HAS_CSS_TRANSFORMS?i.translate=function(h,d,f){h.style.transform="translate("+Math.round(d)+"px, "+Math.round(f)+"px)"}:i.translate=function(h,d,f){h.style.top=Math.round(f)+"px",h.style.left=Math.round(d)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("./dom");i.get=function(s,c){var a=new XMLHttpRequest;a.open("GET",s,!0),a.onreadystatechange=function(){a.readyState===4&&c(a.responseText)},a.send(null)},i.loadScript=function(s,c){var a=o.getDocumentHead(),u=document.createElement("script");u.src=s,a.appendChild(u),u.onload=u.onreadystatechange=function(l,p){(p||!u.readyState||u.readyState=="loaded"||u.readyState=="complete")&&(u=u.onload=u.onreadystatechange=null,p||c())}},i.qualifyURL=function(s){var c=document.createElement("a");return c.href=s,c.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(n,i,r){i.inherits=function(o,s){o.super_=s,o.prototype=Object.create(s.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})},i.mixin=function(o,s){for(var c in s)o[c]=s[c];return o},i.implement=function(o,s){i.mixin(o,s)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(n,i,r){var o={},s=function(){this.propagationStopped=!0},c=function(){this.defaultPrevented=!0};o._emit=o._dispatchEvent=function(a,u){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var l=this._eventRegistry[a]||[],p=this._defaultHandlers[a];if(!(!l.length&&!p)){(typeof u!="object"||!u)&&(u={}),u.type||(u.type=a),u.stopPropagation||(u.stopPropagation=s),u.preventDefault||(u.preventDefault=c),l=l.slice();for(var h=0;h<l.length&&(l[h](u,this),!u.propagationStopped);h++);if(p&&!u.defaultPrevented)return p(u,this)}},o._signal=function(a,u){var l=(this._eventRegistry||{})[a];if(l){l=l.slice();for(var p=0;p<l.length;p++)l[p](u,this)}},o.once=function(a,u){var l=this;if(this.on(a,function p(){l.off(a,p),u.apply(null,arguments)}),!u)return new Promise(function(p){u=p})},o.setDefaultHandler=function(a,u){var l=this._defaultHandlers;if(l||(l=this._defaultHandlers={_disabled_:{}}),l[a]){var p=l[a],h=l._disabled_[a];h||(l._disabled_[a]=h=[]),h.push(p);var d=h.indexOf(u);d!=-1&&h.splice(d,1)}l[a]=u},o.removeDefaultHandler=function(a,u){var l=this._defaultHandlers;if(l){var p=l._disabled_[a];if(l[a]==u)p&&this.setDefaultHandler(a,p.pop());else if(p){var h=p.indexOf(u);h!=-1&&p.splice(h,1)}}},o.on=o.addEventListener=function(a,u,l){this._eventRegistry=this._eventRegistry||{};var p=this._eventRegistry[a];return p||(p=this._eventRegistry[a]=[]),p.indexOf(u)==-1&&p[l?"unshift":"push"](u),u},o.off=o.removeListener=o.removeEventListener=function(a,u){this._eventRegistry=this._eventRegistry||{};var l=this._eventRegistry[a];if(l){var p=l.indexOf(u);p!==-1&&l.splice(p,1)}},o.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},i.EventEmitter=o}),ace.define("ace/lib/report_error",["require","exports","module"],function(n,i,r){i.reportError=function(s,c){var a=new Error(s);a.data=c,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(n,i,r){var o={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor gutter","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions"};i.defaultEnglishMessages=o}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(n,i,r){"no use strict";var o=n("./oop"),s=n("./event_emitter").EventEmitter,c=n("./report_error").reportError,a=n("./default_english_messages").defaultEnglishMessages,u={setOptions:function(f){Object.keys(f).forEach(function(g){this.setOption(g,f[g])},this)},getOptions:function(f){var g={};if(f)Array.isArray(f)||(g=f,f=Object.keys(g));else{var m=this.$options;f=Object.keys(m).filter(function(w){return!m[w].hidden})}return f.forEach(function(w){g[w]=this.getOption(w)},this),g},setOption:function(f,g){if(this["$"+f]!==g){var m=this.$options[f];if(!m)return l('misspelled option "'+f+'"');if(m.forwardTo)return this[m.forwardTo]&&this[m.forwardTo].setOption(f,g);m.handlesSet||(this["$"+f]=g),m&&m.set&&m.set.call(this,g)}},getOption:function(f){var g=this.$options[f];return g?g.forwardTo?this[g.forwardTo]&&this[g.forwardTo].getOption(f):g&&g.get?g.get.call(this):this["$"+f]:l('misspelled option "'+f+'"')}};function l(f){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var p,h,d=function(){function f(){this.$defaultOptions={},p=a,h="dollarSigns"}return f.prototype.defineOptions=function(g,m,w){return g.$options||(this.$defaultOptions[m]=g.$options={}),Object.keys(w).forEach(function(_){var E=w[_];typeof E=="string"&&(E={forwardTo:E}),E.name||(E.name=_),g.$options[E.name]=E,"initialValue"in E&&(g["$"+E.name]=E.initialValue)}),o.implement(g,u),this},f.prototype.resetOptions=function(g){Object.keys(g.$options).forEach(function(m){var w=g.$options[m];"value"in w&&g.setOption(m,w.value)})},f.prototype.setDefaultValue=function(g,m,w){if(!g){for(g in this.$defaultOptions)if(this.$defaultOptions[g][m])break;if(!this.$defaultOptions[g][m])return!1}var _=this.$defaultOptions[g]||(this.$defaultOptions[g]={});_[m]&&(_.forwardTo?this.setDefaultValue(_.forwardTo,m,w):_[m].value=w)},f.prototype.setDefaultValues=function(g,m){Object.keys(m).forEach(function(w){this.setDefaultValue(g,w,m[w])},this)},f.prototype.setMessages=function(g,m){p=g,m&&m.placeholders&&(h=m.placeholders)},f.prototype.nls=function(g,m,w){p[g]||(l("No message found for the key '"+g+"' in messages with id "+p.$id+", trying to find a translation for the default string '"+m+"'."),p[m]||l("No message found for the default string '"+m+"' in the provided messages. Falling back to the default English message."));var _=p[g]||p[m]||m;return w&&(h==="dollarSigns"&&(_=_.replace(/\$(\$|[\d]+)/g,function(E,y){return y=="$"?"$":w[y]})),h==="curlyBrackets"&&(_=_.replace(/\{([^\}]+)\}/g,function(E,y){return w[y]}))),_},f}();d.prototype.warn=l,d.prototype.reportError=c,o.implement(d.prototype,s),i.AppConfig=d}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(n,i,r){r.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(n,i,r){i.isDark=!1,i.cssClass="ace-tm",i.cssText=n("./textmate-css"),i.$id="ace/theme/textmate";var o=n("../lib/dom");o.importCssString(i.cssText,i.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(n,i,r){"no use strict";var o=n("./lib/lang"),s=n("./lib/net"),c=n("./lib/dom"),a=n("./lib/app_config").AppConfig;r.exports=i=new a;var u={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};i.get=function(d){if(!u.hasOwnProperty(d))throw new Error("Unknown config key: "+d);return u[d]},i.set=function(d,f){if(u.hasOwnProperty(d))u[d]=f;else if(this.setDefaultValue("",d,f)==!1)throw new Error("Unknown config key: "+d);d=="useStrictCSP"&&c.useStrictCSP(f)},i.all=function(){return o.copyObject(u)},i.$modes={},i.moduleUrl=function(d,f){if(u.$moduleUrls[d])return u.$moduleUrls[d];var g=d.split("/");f=f||g[g.length-2]||"";var m=f=="snippets"?"/":"-",w=g[g.length-1];if(f=="worker"&&m=="-"){var _=new RegExp("^"+f+"[\\-_]|[\\-_]"+f+"$","g");w=w.replace(_,"")}(!w||w==f)&&g.length>1&&(w=g[g.length-2]);var E=u[f+"Path"];return E==null?E=u.basePath:m=="/"&&(f=m=""),E&&E.slice(-1)!="/"&&(E+="/"),E+f+m+w+this.get("suffix")},i.setModuleUrl=function(d,f){return u.$moduleUrls[d]=f};var l=function(d,f){if(d==="ace/theme/textmate"||d==="./theme/textmate")return f(null,n("./theme/textmate"));if(p)return p(d,f);console.error("loader is not configured")},p;i.setLoader=function(d){p=d},i.dynamicModules=Object.create(null),i.$loading={},i.$loaded={},i.loadModule=function(d,f){var g;if(Array.isArray(d))var m=d[0],w=d[1];else if(typeof d=="string")var w=d;var _=function(E){if(E&&!i.$loading[w])return f&&f(E);if(i.$loading[w]||(i.$loading[w]=[]),i.$loading[w].push(f),!(i.$loading[w].length>1)){var y=function(){l(w,function(x,v){v&&(i.$loaded[w]=v),i._emit("load.module",{name:w,module:v});var S=i.$loading[w];i.$loading[w]=null,S.forEach(function(M){M&&M(v)})})};if(!i.get("packaged"))return y();s.loadScript(i.moduleUrl(w,m),y),h()}};if(i.dynamicModules[w])i.dynamicModules[w]().then(function(E){E.default?_(E.default):_(E)});else{try{g=this.$require(w)}catch{}_(g||i.$loaded[w])}},i.$require=function(d){if(typeof r.require=="function"){var f="require";return r[f](d)}},i.setModuleLoader=function(d,f){i.dynamicModules[d]=f};var h=function(){!u.basePath&&!u.workerPath&&!u.modePath&&!u.themePath&&!Object.keys(u.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),h=function(){})};i.version="1.37.5"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(n,i,r){n("./lib/fixoldbrowsers");var o=n("./config");o.setLoader(function(u,l){n([u],function(p){l(null,p)})});var s=function(){return this||typeof window<"u"&&window}();r.exports=function(u){o.init=c,o.$require=n,u.require=n},c(!0);function c(u){if(!(!s||!s.document)){o.set("packaged",u||n.packaged||r.packaged||s.define&&(void 0).packaged);var l={},p="",h=document.currentScript||document._currentScript,d=h&&h.ownerDocument||document;h&&h.src&&(p=h.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var f=d.getElementsByTagName("script"),g=0;g<f.length;g++){var m=f[g],w=m.src||m.getAttribute("src");if(w){for(var _=m.attributes,E=0,y=_.length;E<y;E++){var x=_[E];x.name.indexOf("data-ace-")===0&&(l[a(x.name.replace(/^data-ace-/,""))]=x.value)}var v=w.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);v&&(p=v[1])}}p&&(l.base=l.base||p,l.packaged=!0),l.basePath=l.base,l.workerPath=l.workerPath||l.base,l.modePath=l.modePath||l.base,l.themePath=l.themePath||l.base,delete l.base;for(var S in l)typeof l[S]<"u"&&o.set(S,l[S])}}function a(u){return u.replace(/-(.)/g,function(l,p){return p.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(n,i,r){var o=function(){function s(c,a,u,l){this.start={row:c,column:a},this.end={row:u,column:l}}return s.prototype.isEqual=function(c){return this.start.row===c.start.row&&this.end.row===c.end.row&&this.start.column===c.start.column&&this.end.column===c.end.column},s.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},s.prototype.contains=function(c,a){return this.compare(c,a)==0},s.prototype.compareRange=function(c){var a,u=c.end,l=c.start;return a=this.compare(u.row,u.column),a==1?(a=this.compare(l.row,l.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(l.row,l.column),a==-1?-1:a==1?42:0)},s.prototype.comparePoint=function(c){return this.compare(c.row,c.column)},s.prototype.containsRange=function(c){return this.comparePoint(c.start)==0&&this.comparePoint(c.end)==0},s.prototype.intersects=function(c){var a=this.compareRange(c);return a==-1||a==0||a==1},s.prototype.isEnd=function(c,a){return this.end.row==c&&this.end.column==a},s.prototype.isStart=function(c,a){return this.start.row==c&&this.start.column==a},s.prototype.setStart=function(c,a){typeof c=="object"?(this.start.column=c.column,this.start.row=c.row):(this.start.row=c,this.start.column=a)},s.prototype.setEnd=function(c,a){typeof c=="object"?(this.end.column=c.column,this.end.row=c.row):(this.end.row=c,this.end.column=a)},s.prototype.inside=function(c,a){return this.compare(c,a)==0?!(this.isEnd(c,a)||this.isStart(c,a)):!1},s.prototype.insideStart=function(c,a){return this.compare(c,a)==0?!this.isEnd(c,a):!1},s.prototype.insideEnd=function(c,a){return this.compare(c,a)==0?!this.isStart(c,a):!1},s.prototype.compare=function(c,a){return!this.isMultiLine()&&c===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:c<this.start.row?-1:c>this.end.row?1:this.start.row===c?a>=this.start.column?0:-1:this.end.row===c?a<=this.end.column?0:1:0},s.prototype.compareStart=function(c,a){return this.start.row==c&&this.start.column==a?-1:this.compare(c,a)},s.prototype.compareEnd=function(c,a){return this.end.row==c&&this.end.column==a?1:this.compare(c,a)},s.prototype.compareInside=function(c,a){return this.end.row==c&&this.end.column==a?1:this.start.row==c&&this.start.column==a?-1:this.compare(c,a)},s.prototype.clipRows=function(c,a){if(this.end.row>a)var u={row:a+1,column:0};else if(this.end.row<c)var u={row:c,column:0};if(this.start.row>a)var l={row:a+1,column:0};else if(this.start.row<c)var l={row:c,column:0};return s.fromPoints(l||this.start,u||this.end)},s.prototype.extend=function(c,a){var u=this.compare(c,a);if(u==0)return this;if(u==-1)var l={row:c,column:a};else var p={row:c,column:a};return s.fromPoints(l||this.start,p||this.end)},s.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},s.prototype.isMultiLine=function(){return this.start.row!==this.end.row},s.prototype.clone=function(){return s.fromPoints(this.start,this.end)},s.prototype.collapseRows=function(){return this.end.column==0?new s(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new s(this.start.row,0,this.end.row,0)},s.prototype.toScreenRange=function(c){var a=c.documentToScreenPosition(this.start),u=c.documentToScreenPosition(this.end);return new s(a.row,a.column,u.row,u.column)},s.prototype.moveBy=function(c,a){this.start.row+=c,this.start.column+=a,this.end.row+=c,this.end.column+=a},s}();o.fromPoints=function(s,c){return new o(s.row,s.column,c.row,c.column)},o.comparePoints=function(s,c){return s.row-c.row||s.column-c.column},i.Range=o}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(n,i,r){for(var o=n("./oop"),s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},c={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},a=0;a<10;a++)c["Digit"+a]=48+a,c["Numpad"+a]=96+a,s.PRINTABLE_KEYS[48+a]=""+a,s.FUNCTION_KEYS[96+a]="Numpad"+a;for(var a=65;a<91;a++){var u=String.fromCharCode(a+32);c["Key"+u.toUpperCase()]=a,s.PRINTABLE_KEYS[a]=u}for(var a=1;a<13;a++)c["F"+a]=111+a,s.FUNCTION_KEYS[111+a]="F"+a;var l={Shift:16,Control:17,Alt:18,Meta:224};for(var p in l)c[p]=c[p+"Left"]=c[p+"Right"]=l[p];i.$codeToKeyCode=c,s.PRINTABLE_KEYS[173]="-";for(var h in s.FUNCTION_KEYS){var d=s.FUNCTION_KEYS[h].toLowerCase();s[d]=parseInt(h,10)}for(var h in s.PRINTABLE_KEYS){var d=s.PRINTABLE_KEYS[h].toLowerCase();s[d]=parseInt(h,10)}o.mixin(s,s.MODIFIER_KEYS),o.mixin(s,s.PRINTABLE_KEYS),o.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var f=["cmd","ctrl","alt","shift"],g=Math.pow(2,f.length);g--;)s.KEY_MODS[g]=f.filter(function(m){return g&s.KEY_MODS[m]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",o.mixin(i,s),i.default=i,i.keyCodeToString=function(f){var g=s[f];return typeof g!="string"&&(g=String.fromCharCode(f)),g.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,i,r){var o=n("./keys"),s=n("./useragent"),c=null,a=0,u;function l(){u=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return u={passive:!1},!0}})}catch{}}function p(){return u==null&&l(),u}function h(E,y,x){this.elem=E,this.type=y,this.callback=x}h.prototype.destroy=function(){f(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var d=i.addListener=function(E,y,x,v){E.addEventListener(y,x,p()),v&&v.$toDestroy.push(new h(E,y,x))},f=i.removeListener=function(E,y,x){E.removeEventListener(y,x,p())};i.stopEvent=function(E){return i.stopPropagation(E),i.preventDefault(E),!1},i.stopPropagation=function(E){E.stopPropagation&&E.stopPropagation()},i.preventDefault=function(E){E.preventDefault&&E.preventDefault()},i.getButton=function(E){return E.type=="dblclick"?0:E.type=="contextmenu"||s.isMac&&E.ctrlKey&&!E.altKey&&!E.shiftKey?2:E.button},i.capture=function(E,y,x){var v=E&&E.ownerDocument||document;function S(M){y&&y(M),x&&x(M),f(v,"mousemove",y),f(v,"mouseup",S),f(v,"dragstart",S)}return d(v,"mousemove",y),d(v,"mouseup",S),d(v,"dragstart",S),S},i.addMouseWheelListener=function(E,y,x){d(E,"wheel",function(v){var S=.15,M=v.deltaX||0,$=v.deltaY||0;switch(v.deltaMode){case v.DOM_DELTA_PIXEL:v.wheelX=M*S,v.wheelY=$*S;break;case v.DOM_DELTA_LINE:var T=15;v.wheelX=M*T,v.wheelY=$*T;break;case v.DOM_DELTA_PAGE:var I=150;v.wheelX=M*I,v.wheelY=$*I;break}y(v)},x)},i.addMultiMouseDownListener=function(E,y,x,v,S){var M=0,$,T,I,C={2:"dblclick",3:"tripleclick",4:"quadclick"};function b(A){if(i.getButton(A)!==0?M=0:A.detail>1?(M++,M>4&&(M=1)):M=1,s.isIE){var R=Math.abs(A.clientX-$)>5||Math.abs(A.clientY-T)>5;(!I||R)&&(M=1),I&&clearTimeout(I),I=setTimeout(function(){I=null},y[M-1]||600),M==1&&($=A.clientX,T=A.clientY)}if(A._clicks=M,x[v]("mousedown",A),M>4)M=0;else if(M>1)return x[v](C[M],A)}Array.isArray(E)||(E=[E]),E.forEach(function(A){d(A,"mousedown",b,S)})};function g(E){return 0|(E.ctrlKey?1:0)|(E.altKey?2:0)|(E.shiftKey?4:0)|(E.metaKey?8:0)}i.getModifierString=function(E){return o.KEY_MODS[g(E)]};function m(E,y,x){var v=g(y);if(!x&&y.code&&(x=o.$codeToKeyCode[y.code]||x),!s.isMac&&c){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(v|=8),c.altGr)if((3&v)!=3)c.altGr=0;else return;if(x===18||x===17){var S=y.location;if(x===17&&S===1)c[x]==1&&(a=y.timeStamp);else if(x===18&&v===3&&S===2){var M=y.timeStamp-a;M<50&&(c.altGr=!0)}}}if(x in o.MODIFIER_KEYS&&(x=-1),!(!v&&x===13&&y.location===3&&(E(y,v,-x),y.defaultPrevented))){if(s.isChromeOS&&v&8){if(E(y,v,x),y.defaultPrevented)return;v&=-9}return!v&&!(x in o.FUNCTION_KEYS)&&!(x in o.PRINTABLE_KEYS)?!1:E(y,v,x)}}i.addCommandKeyListener=function(E,y,x){var v=null;d(E,"keydown",function(S){c[S.keyCode]=(c[S.keyCode]||0)+1;var M=m(y,S,S.keyCode);return v=S.defaultPrevented,M},x),d(E,"keypress",function(S){v&&(S.ctrlKey||S.altKey||S.shiftKey||S.metaKey)&&(i.stopEvent(S),v=null)},x),d(E,"keyup",function(S){c[S.keyCode]=null},x),c||(w(),d(window,"focus",w))};function w(){c=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!s.isOldIE){var _=1;i.nextTick=function(E,y){y=y||window;var x="zero-timeout-message-"+_++,v=function(S){S.data==x&&(i.stopPropagation(S),f(y,"message",v),E())};d(y,"message",v),y.postMessage(x,"*")}}i.$idleBlocked=!1,i.onIdle=function(E,y){return setTimeout(function x(){i.$idleBlocked?setTimeout(x,100):E()},y)},i.$idleBlockId=null,i.blockIdle=function(E){i.$idleBlockId&&clearTimeout(i.$idleBlockId),i.$idleBlocked=!0,i.$idleBlockId=setTimeout(function(){i.$idleBlocked=!1},E||100)},i.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),i.nextFrame?i.nextFrame=i.nextFrame.bind(window):i.nextFrame=function(E){setTimeout(E,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(n,i,r){var o;r.exports={lineMode:!1,pasteCancelled:function(){return o&&o>Date.now()-50?!0:o=!1},cancel:function(){o=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(n,i,r){var o=n("../lib/event"),s=n("../config").nls,c=n("../lib/useragent"),a=n("../lib/dom"),u=n("../lib/lang"),l=n("../clipboard"),p=c.isChrome<18,h=c.isIE,d=c.isChrome>63,f=400,g=n("../lib/keys"),m=g.KEY_MODS,w=c.isIOS,_=w?/\s/:/\n/,E=c.isMobile,y;y=function(x,v){var S=a.createElement("textarea");S.className="ace_text-input",S.setAttribute("wrap","off"),S.setAttribute("autocorrect","off"),S.setAttribute("autocapitalize","off"),S.setAttribute("spellcheck","false"),S.style.opacity="0",x.insertBefore(S,x.firstChild);var M=!1,$=!1,T=!1,I=!1,C="";E||(S.style.fontSize="1px");var b=!1,A=!1,R="",k=0,O=0,N=0,W=Number.MAX_SAFE_INTEGER,z=Number.MIN_SAFE_INTEGER,V=0;try{var U=document.activeElement===S}catch{}this.setNumberOfExtraLines=function(ne){if(W=Number.MAX_SAFE_INTEGER,z=Number.MIN_SAFE_INTEGER,ne<0){V=0;return}V=ne},this.setAriaLabel=function(){var ne="";if(v.$textInputAriaLabel&&(ne+="".concat(v.$textInputAriaLabel,", ")),v.session){var _e=v.session.selection.cursor.row;ne+=s("text-input.aria-label","Cursor at row $0",[_e+1])}S.setAttribute("aria-label",ne)},this.setAriaOptions=function(ne){ne.activeDescendant?(S.setAttribute("aria-haspopup","true"),S.setAttribute("aria-autocomplete",ne.inline?"both":"list"),S.setAttribute("aria-activedescendant",ne.activeDescendant)):(S.setAttribute("aria-haspopup","false"),S.setAttribute("aria-autocomplete","both"),S.removeAttribute("aria-activedescendant")),ne.role&&S.setAttribute("role",ne.role),ne.setLabel&&(S.setAttribute("aria-roledescription",s("text-input.aria-roledescription","editor")),this.setAriaLabel())},this.setAriaOptions({role:"textbox"}),o.addListener(S,"blur",function(ne){A||(v.onBlur(ne),U=!1)},v),o.addListener(S,"focus",function(ne){if(!A){if(U=!0,c.isEdge)try{if(!document.hasFocus())return}catch{}v.onFocus(ne),c.isEdge?setTimeout(Y):Y()}},v),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:v.renderer.enableKeyboardAccessibility}),C||d||this.$focusScroll=="browser")return S.focus({preventScroll:!0});var ne=S.style.top;S.style.position="fixed",S.style.top="0px";try{var _e=S.getBoundingClientRect().top!=0}catch{return}var Ce=[];if(_e)for(var Ze=S.parentElement;Ze&&Ze.nodeType==1;)Ce.push(Ze),Ze.setAttribute("ace_nocontext","true"),!Ze.parentElement&&Ze.getRootNode?Ze=Ze.getRootNode().host:Ze=Ze.parentElement;S.focus({preventScroll:!0}),_e&&Ce.forEach(function(tt){tt.removeAttribute("ace_nocontext")}),setTimeout(function(){S.style.position="",S.style.top=="0px"&&(S.style.top=ne)},0)},this.blur=function(){S.blur()},this.isFocused=function(){return U},v.on("beforeEndOperation",function(){var ne=v.curOp,_e=ne&&ne.command&&ne.command.name;if(_e!="insertstring"){var Ce=_e&&(ne.docChanged||ne.selectionChanged);T&&Ce&&(R=S.value="",Ue()),Y()}}),v.on("changeSelection",this.setAriaLabel);var H=function(ne,_e){for(var Ce=_e,Ze=1;Ze<=ne-W&&Ze<2*V+1;Ze++)Ce+=v.session.getLine(ne-Ze).length+1;return Ce},Y=w?function(ne){if(!(!U||M&&!ne||I)){ne||(ne="");var _e=`
 ab`+ne+`cde fg
`;_e!=S.value&&(S.value=R=_e);var Ce=4,Ze=4+(ne.length||(v.selection.isEmpty()?0:1));(k!=Ce||O!=Ze)&&S.setSelectionRange(Ce,Ze),k=Ce,O=Ze}}:function(){if(!(T||I)&&!(!U&&!L)){T=!0;var ne=0,_e=0,Ce="";if(v.session){var Ze=v.selection,tt=Ze.getRange(),gt=Ze.cursor.row;gt===z+1?(W=z+1,z=W+2*V):gt===W-1?(z=W-1,W=z-2*V):(gt<W-1||gt>z+1)&&(W=gt>V?gt-V:0,z=gt>V?gt+V:2*V);for(var $t=[],mt=W;mt<=z;mt++)$t.push(v.session.getLine(mt));if(Ce=$t.join(`
`),ne=H(tt.start.row,tt.start.column),_e=H(tt.end.row,tt.end.column),tt.start.row<W){var ut=v.session.getLine(W-1);ne=tt.start.row<W-1?0:ne,_e+=ut.length+1,Ce=ut+`
`+Ce}else if(tt.end.row>z){var nt=v.session.getLine(z+1);_e=tt.end.row>z+1?nt.length:tt.end.column,_e+=Ce.length+1,Ce=Ce+`
`+nt}else E&&gt>0&&(Ce=`
`+Ce,_e+=1,ne+=1);Ce.length>f&&(ne<f&&_e<f?Ce=Ce.slice(0,f):(Ce=`
`,ne==_e?ne=_e=0:(ne=0,_e=1)));var an=Ce+`

`;an!=R&&(S.value=R=an,k=O=an.length)}if(L&&(k=S.selectionStart,O=S.selectionEnd),O!=_e||k!=ne||S.selectionEnd!=O)try{S.setSelectionRange(ne,_e),k=ne,O=_e}catch{}T=!1}};this.resetSelection=Y,U&&v.onFocus();var K=function(ne){return ne.selectionStart===0&&ne.selectionEnd>=R.length&&ne.value===R&&R&&ne.selectionEnd!==O},P=function(ne){T||(M?M=!1:K(S)?(v.selectAll(),Y()):E&&S.selectionStart!=k&&Y())},D=null;this.setInputHandler=function(ne){D=ne},this.getInputHandler=function(){return D};var L=!1,j=function(ne,_e){if(L&&(L=!1),$)return Y(),ne&&v.onPaste(ne),$=!1,"";for(var Ce=S.selectionStart,Ze=S.selectionEnd,tt=k,gt=R.length-O,$t=ne,mt=ne.length-Ce,ut=ne.length-Ze,nt=0;tt>0&&R[nt]==ne[nt];)nt++,tt--;for($t=$t.slice(nt),nt=1;gt>0&&R.length-nt>k-1&&R[R.length-nt]==ne[ne.length-nt];)nt++,gt--;mt-=nt-1,ut-=nt-1;var an=$t.length-nt+1;if(an<0&&(tt=-an,an=0),$t=$t.slice(0,an),!_e&&!$t&&!mt&&!tt&&!gt&&!ut)return"";I=!0;var aa=!1;return c.isAndroid&&$t==". "&&($t="  ",aa=!0),$t&&!tt&&!gt&&!mt&&!ut||b?v.onTextInput($t):v.onTextInput($t,{extendLeft:tt,extendRight:gt,restoreStart:mt,restoreEnd:ut}),I=!1,R=ne,k=Ce,O=Ze,N=ut,aa?`
`:$t},F=function(ne){if(T)return Qe();if(ne&&ne.inputType){if(ne.inputType=="historyUndo")return v.execCommand("undo");if(ne.inputType=="historyRedo")return v.execCommand("redo")}var _e=S.value,Ce=j(_e,!0);(_e.length>f+100||_.test(Ce)||E&&k<1&&k==O)&&Y()},Q=function(ne,_e,Ce){var Ze=ne.clipboardData||window.clipboardData;if(!(!Ze||p)){var tt=h||Ce?"Text":"text/plain";try{return _e?Ze.setData(tt,_e)!==!1:Ze.getData(tt)}catch(gt){if(!Ce)return Q(gt,_e,!0)}}},q=function(ne,_e){var Ce=v.getCopyText();if(!Ce)return o.preventDefault(ne);Q(ne,Ce)?(w&&(Y(Ce),M=Ce,setTimeout(function(){M=!1},10)),_e?v.onCut():v.onCopy(),o.preventDefault(ne)):(M=!0,S.value=Ce,S.select(),setTimeout(function(){M=!1,Y(),_e?v.onCut():v.onCopy()}))},ee=function(ne){q(ne,!0)},ae=function(ne){q(ne,!1)},pe=function(ne){var _e=Q(ne);l.pasteCancelled()||(typeof _e=="string"?(_e&&v.onPaste(_e,ne),c.isIE&&setTimeout(Y),o.preventDefault(ne)):(S.value="",$=!0))};o.addCommandKeyListener(S,function(ne,_e,Ce){if(!T)return v.onCommandKey(ne,_e,Ce)},v),o.addListener(S,"select",P,v),o.addListener(S,"input",F,v),o.addListener(S,"cut",ee,v),o.addListener(S,"copy",ae,v),o.addListener(S,"paste",pe,v),(!("oncut"in S)||!("oncopy"in S)||!("onpaste"in S))&&o.addListener(x,"keydown",function(ne){if(!(c.isMac&&!ne.metaKey||!ne.ctrlKey))switch(ne.keyCode){case 67:ae(ne);break;case 86:pe(ne);break;case 88:ee(ne);break}},v);var He=function(ne){if(!(T||!v.onCompositionStart||v.$readOnly)&&(T={},!b)){ne.data&&(T.useTextareaForIME=!1),setTimeout(Qe,0),v._signal("compositionStart"),v.on("mousedown",ze);var _e=v.getSelectionRange();_e.end.row=_e.start.row,_e.end.column=_e.start.column,T.markerRange=_e,T.selectionStart=k,v.onCompositionStart(T),T.useTextareaForIME?(R=S.value="",k=0,O=0):(S.msGetInputContext&&(T.context=S.msGetInputContext()),S.getInputContext&&(T.context=S.getInputContext()))}},Qe=function(){if(!(!T||!v.onCompositionUpdate||v.$readOnly)){if(b)return ze();if(T.useTextareaForIME)v.onCompositionUpdate(S.value);else{var ne=S.value;j(ne),T.markerRange&&(T.context&&(T.markerRange.start.column=T.selectionStart=T.context.compositionStartOffset),T.markerRange.end.column=T.markerRange.start.column+O-T.selectionStart+N)}}},Ue=function(ne){!v.onCompositionEnd||v.$readOnly||(T=!1,v.onCompositionEnd(),v.off("mousedown",ze),ne&&F())};function ze(){A=!0,S.blur(),S.focus(),A=!1}var Ye=u.delayedCall(Qe,50).schedule.bind(null,null);function Zn(ne){ne.keyCode==27&&S.value.length<S.selectionStart&&(T||(R=S.value),k=O=-1,Y()),Ye()}o.addListener(S,"compositionstart",He,v),o.addListener(S,"compositionupdate",Qe,v),o.addListener(S,"keyup",Zn,v),o.addListener(S,"keydown",Ye,v),o.addListener(S,"compositionend",Ue,v),this.getElement=function(){return S},this.setCommandMode=function(ne){b=ne,S.readOnly=!1},this.setReadOnly=function(ne){b||(S.readOnly=ne)},this.setCopyWithEmptySelection=function(ne){},this.onContextMenu=function(ne){L=!0,Y(),v._emit("nativecontextmenu",{target:v,domEvent:ne}),this.moveToMouse(ne,!0)},this.moveToMouse=function(ne,_e){C||(C=S.style.cssText),S.style.cssText=(_e?"z-index:100000;":"")+(c.isIE?"opacity:0.1;":"")+"text-indent: -"+(k+O)*v.renderer.characterWidth*.5+"px;";var Ce=v.container.getBoundingClientRect(),Ze=a.computedStyle(v.container),tt=Ce.top+(parseInt(Ze.borderTopWidth)||0),gt=Ce.left+(parseInt(Ce.borderLeftWidth)||0),$t=Ce.bottom-tt-S.clientHeight-2,mt=function(ut){a.translate(S,ut.clientX-gt-2,Math.min(ut.clientY-tt-2,$t))};mt(ne),ne.type=="mousedown"&&(v.renderer.$isMousePressed=!0,clearTimeout(Ni),c.isWin&&o.capture(v.container,mt,Bt))},this.onContextMenuClose=Bt;var Ni;function Bt(){clearTimeout(Ni),Ni=setTimeout(function(){C&&(S.style.cssText=C,C=""),v.renderer.$isMousePressed=!1,v.renderer.$keepTextAreaAtCursor&&v.renderer.$moveTextAreaToCursor()},0)}var ye=function(ne){v.textInput.onContextMenu(ne),Bt()};o.addListener(S,"mouseup",ye,v),o.addListener(S,"mousedown",function(ne){ne.preventDefault(),Bt()},v),o.addListener(v.renderer.scroller,"contextmenu",ye,v),o.addListener(S,"contextmenu",ye,v),w&&Ke(x,v,S);function Ke(ne,_e,Ce){var Ze=null,tt=!1;Ce.addEventListener("keydown",function($t){Ze&&clearTimeout(Ze),tt=!0},!0),Ce.addEventListener("keyup",function($t){Ze=setTimeout(function(){tt=!1},100)},!0);var gt=function($t){if(document.activeElement===Ce&&!(tt||T||_e.$mouseHandler.isMousePressed)&&!M){var mt=Ce.selectionStart,ut=Ce.selectionEnd,nt=null,an=0;if(mt==0?nt=g.up:mt==1?nt=g.home:ut>O&&R[ut]==`
`?nt=g.end:mt<k&&R[mt-1]==" "?(nt=g.left,an=m.option):mt<k||mt==k&&O!=k&&mt==ut?nt=g.left:ut>O&&R.slice(0,ut).split(`
`).length>2?nt=g.down:ut>O&&R[ut-1]==" "?(nt=g.right,an=m.option):(ut>O||ut==O&&O!=k&&mt==ut)&&(nt=g.right),mt!==ut&&(an|=m.shift),nt){var aa=_e.onCommandKey({},an,nt);if(!aa&&_e.commands){nt=g.keyCodeToString(nt);var Rf=_e.commands.findKeyCommand(an,nt);Rf&&_e.execCommand(Rf)}k=mt,O=ut,Y("")}}};document.addEventListener("selectionchange",gt),_e.on("destroy",function(){document.removeEventListener("selectionchange",gt)})}this.destroy=function(){S.parentElement&&S.parentElement.removeChild(S)}},i.TextInput=y,i.$setUserAgentForTests=function(x,v){E=x,w=v}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(n,i,r){var o=n("../lib/useragent"),s=0,c=550,a=function(){function p(h){h.$clickSelection=null;var d=h.editor;d.setDefaultHandler("mousedown",this.onMouseDown.bind(h)),d.setDefaultHandler("dblclick",this.onDoubleClick.bind(h)),d.setDefaultHandler("tripleclick",this.onTripleClick.bind(h)),d.setDefaultHandler("quadclick",this.onQuadClick.bind(h)),d.setDefaultHandler("mousewheel",this.onMouseWheel.bind(h));var f=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];f.forEach(function(g){h[g]=this[g]},this),h.selectByLines=this.extendSelectionBy.bind(h,"getLineRange"),h.selectByWords=this.extendSelectionBy.bind(h,"getWordRange")}return p.prototype.onMouseDown=function(h){var d=h.inSelection(),f=h.getDocumentPosition();this.mousedownEvent=h;var g=this.editor,m=h.getButton();if(m!==0){var w=g.getSelectionRange(),_=w.isEmpty();(_||m==1)&&g.selection.moveToPosition(f),m==2&&(g.textInput.onContextMenu(h.domEvent),o.isMozilla||h.preventDefault());return}if(this.mousedownEvent.time=Date.now(),d&&!g.isFocused()&&(g.focus(),this.$focusTimeout&&!this.$clickSelection&&!g.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(h);return}return this.captureMouse(h),this.startSelect(f,h.domEvent._clicks>1),h.preventDefault()},p.prototype.startSelect=function(h,d){h=h||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var f=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?f.selection.selectToPosition(h):d||f.selection.moveToPosition(h),d||this.select(),f.setStyle("ace_selecting"),this.setState("select"))},p.prototype.select=function(){var h,d=this.editor,f=d.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var g=this.$clickSelection.comparePoint(f);if(g==-1)h=this.$clickSelection.end;else if(g==1)h=this.$clickSelection.start;else{var m=l(this.$clickSelection,f);f=m.cursor,h=m.anchor}d.selection.setSelectionAnchor(h.row,h.column)}d.selection.selectToPosition(f),d.renderer.scrollCursorIntoView()},p.prototype.extendSelectionBy=function(h){var d,f=this.editor,g=f.renderer.screenToTextCoordinates(this.x,this.y),m=f.selection[h](g.row,g.column);if(this.$clickSelection){var w=this.$clickSelection.comparePoint(m.start),_=this.$clickSelection.comparePoint(m.end);if(w==-1&&_<=0)d=this.$clickSelection.end,(m.end.row!=g.row||m.end.column!=g.column)&&(g=m.start);else if(_==1&&w>=0)d=this.$clickSelection.start,(m.start.row!=g.row||m.start.column!=g.column)&&(g=m.end);else if(w==-1&&_==1)g=m.end,d=m.start;else{var E=l(this.$clickSelection,g);g=E.cursor,d=E.anchor}f.selection.setSelectionAnchor(d.row,d.column)}f.selection.selectToPosition(g),f.renderer.scrollCursorIntoView()},p.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},p.prototype.focusWait=function(){var h=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),d=Date.now();(h>s||d-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},p.prototype.onDoubleClick=function(h){var d=h.getDocumentPosition(),f=this.editor,g=f.session,m=g.getBracketRange(d);m?(m.isEmpty()&&(m.start.column--,m.end.column++),this.setState("select")):(m=f.selection.getWordRange(d.row,d.column),this.setState("selectByWords")),this.$clickSelection=m,this.select()},p.prototype.onTripleClick=function(h){var d=h.getDocumentPosition(),f=this.editor;this.setState("selectByLines");var g=f.getSelectionRange();g.isMultiLine()&&g.contains(d.row,d.column)?(this.$clickSelection=f.selection.getLineRange(g.start.row),this.$clickSelection.end=f.selection.getLineRange(g.end.row).end):this.$clickSelection=f.selection.getLineRange(d.row),this.select()},p.prototype.onQuadClick=function(h){var d=this.editor;d.selectAll(),this.$clickSelection=d.getSelectionRange(),this.setState("selectAll")},p.prototype.onMouseWheel=function(h){if(!h.getAccelKey()){h.getShiftKey()&&h.wheelY&&!h.wheelX&&(h.wheelX=h.wheelY,h.wheelY=0);var d=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var f=this.$lastScroll,g=h.domEvent.timeStamp,m=g-f.t,w=m?h.wheelX/m:f.vx,_=m?h.wheelY/m:f.vy;m<c&&(w=(w+f.vx)/2,_=(_+f.vy)/2);var E=Math.abs(w/_),y=!1;if(E>=1&&d.renderer.isScrollableBy(h.wheelX*h.speed,0)&&(y=!0),E<=1&&d.renderer.isScrollableBy(0,h.wheelY*h.speed)&&(y=!0),y)f.allowed=g;else if(g-f.allowed<c){var x=Math.abs(w)<=1.5*Math.abs(f.vx)&&Math.abs(_)<=1.5*Math.abs(f.vy);x?(y=!0,f.allowed=g):f.allowed=0}if(f.t=g,f.vx=w,f.vy=_,y)return d.renderer.scrollBy(h.wheelX*h.speed,h.wheelY*h.speed),h.stop()}},p}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,i.DefaultHandlers=a;function u(p,h,d,f){return Math.sqrt(Math.pow(d-p,2)+Math.pow(f-h,2))}function l(p,h){if(p.start.row==p.end.row)var d=2*h.column-p.start.column-p.end.column;else if(p.start.row==p.end.row-1&&!p.start.column&&!p.end.column)var d=h.column-4;else var d=2*h.row-p.start.row-p.end.row;return d<0?{cursor:p.start,anchor:p.end}:{cursor:p.end,anchor:p.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(n,i,r){i.preventParentScroll=function(s){s.stopPropagation();var c=s.currentTarget,a=c.scrollHeight>c.clientHeight;a||s.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(n,i,r){var o=this&&this.__extends||function(){var g=function(m,w){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var y in E)Object.prototype.hasOwnProperty.call(E,y)&&(_[y]=E[y])},g(m,w)};return function(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");g(m,w);function _(){this.constructor=m}m.prototype=w===null?Object.create(w):(_.prototype=w.prototype,new _)}}(),s=this&&this.__values||function(g){var m=typeof Symbol=="function"&&Symbol.iterator,w=m&&g[m],_=0;if(w)return w.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&_>=g.length&&(g=void 0),{value:g&&g[_++],done:!g}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},c=n("./lib/dom");n("./lib/event");var a=n("./range").Range,u=n("./lib/scroll").preventParentScroll,l="ace_tooltip",p=function(){function g(m){this.isOpen=!1,this.$element=null,this.$parentNode=m}return g.prototype.$init=function(){return this.$element=c.createElement("div"),this.$element.className=l,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},g.prototype.getElement=function(){return this.$element||this.$init()},g.prototype.setText=function(m){this.getElement().textContent=m},g.prototype.setHtml=function(m){this.getElement().innerHTML=m},g.prototype.setPosition=function(m,w){this.getElement().style.left=m+"px",this.getElement().style.top=w+"px"},g.prototype.setClassName=function(m){c.addCssClass(this.getElement(),m)},g.prototype.setTheme=function(m){this.$element.className=l+" "+(m.isDark?"ace_dark ":"")+(m.cssClass||"")},g.prototype.show=function(m,w,_){m!=null&&this.setText(m),w!=null&&_!=null&&this.setPosition(w,_),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},g.prototype.hide=function(m){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=l,this.isOpen=!1)},g.prototype.getHeight=function(){return this.getElement().offsetHeight},g.prototype.getWidth=function(){return this.getElement().offsetWidth},g.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},g}(),h=function(){function g(){this.popups=[]}return g.prototype.addPopup=function(m){this.popups.push(m),this.updatePopups()},g.prototype.removePopup=function(m){var w=this.popups.indexOf(m);w!==-1&&(this.popups.splice(w,1),this.updatePopups())},g.prototype.updatePopups=function(){var m,w,_,E;this.popups.sort(function(C,b){return b.priority-C.priority});var y=[];try{for(var x=s(this.popups),v=x.next();!v.done;v=x.next()){var S=v.value,M=!0;try{for(var $=(_=void 0,s(y)),T=$.next();!T.done;T=$.next()){var I=T.value;if(this.doPopupsOverlap(I,S)){M=!1;break}}}catch(C){_={error:C}}finally{try{T&&!T.done&&(E=$.return)&&E.call($)}finally{if(_)throw _.error}}M?y.push(S):S.hide()}}catch(C){m={error:C}}finally{try{v&&!v.done&&(w=x.return)&&w.call(x)}finally{if(m)throw m.error}}},g.prototype.doPopupsOverlap=function(m,w){var _=m.getElement().getBoundingClientRect(),E=w.getElement().getBoundingClientRect();return _.left<E.right&&_.right>E.left&&_.top<E.bottom&&_.bottom>E.top},g}(),d=new h;i.popupManager=d,i.Tooltip=p;var f=function(g){o(m,g);function m(w){w===void 0&&(w=document.body);var _=g.call(this,w)||this;_.timeout=void 0,_.lastT=0,_.idleTime=350,_.lastEvent=void 0,_.onMouseOut=_.onMouseOut.bind(_),_.onMouseMove=_.onMouseMove.bind(_),_.waitForHover=_.waitForHover.bind(_),_.hide=_.hide.bind(_);var E=_.getElement();return E.style.whiteSpace="pre-wrap",E.style.pointerEvents="auto",E.addEventListener("mouseout",_.onMouseOut),E.tabIndex=-1,E.addEventListener("blur",(function(){E.contains(document.activeElement)||this.hide()}).bind(_)),E.addEventListener("wheel",u),_}return m.prototype.addToEditor=function(w){w.on("mousemove",this.onMouseMove),w.on("mousedown",this.hide),w.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},m.prototype.removeFromEditor=function(w){w.off("mousemove",this.onMouseMove),w.off("mousedown",this.hide),w.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},m.prototype.onMouseMove=function(w,_){this.lastEvent=w,this.lastT=Date.now();var E=_.$mouseHandler.isMousePressed;if(this.isOpen){var y=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(y.row,y.column)||E||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||E||(this.lastEvent=w,this.timeout=setTimeout(this.waitForHover,this.idleTime))},m.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var w=Date.now()-this.lastT;if(this.idleTime-w>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-w);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},m.prototype.isOutsideOfText=function(w){var _=w.editor,E=w.getDocumentPosition(),y=_.session.getLine(E.row);if(E.column==y.length){var x=_.renderer.pixelToScreenCoordinates(w.clientX,w.clientY),v=_.session.documentToScreenPosition(E.row,E.column);if(v.column!=x.column||v.row!=x.row)return!0}return!1},m.prototype.setDataProvider=function(w){this.$gatherData=w},m.prototype.showForRange=function(w,_,E,y){var x=10;if(!(y&&y!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var v=w.renderer;this.isOpen||(d.addPopup(this),this.$registerCloseEvents(),this.setTheme(v.theme)),this.isOpen=!0,this.addMarker(_,w.session),this.range=a.fromPoints(_.start,_.end);var S=v.textToScreenCoordinates(_.start.row,_.start.column),M=v.scroller.getBoundingClientRect();S.pageX<M.left&&(S.pageX=M.left);var $=this.getElement();$.innerHTML="",$.appendChild(E),$.style.maxHeight="",$.style.display="block";var T=$.clientHeight,I=$.clientWidth,C=window.innerHeight-S.pageY-v.lineHeight,b=!0;S.pageY-T<0&&S.pageY<C&&(b=!1),$.style.maxHeight=(b?S.pageY:C)-x+"px",$.style.top=b?"":S.pageY+v.lineHeight+"px",$.style.bottom=b?window.innerHeight-S.pageY+"px":"",$.style.left=Math.min(S.pageX,window.innerWidth-I-x)+"px"}},m.prototype.addMarker=function(w,_){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=_,this.marker=_&&_.addMarker(w,"ace_highlight-marker","text")},m.prototype.hide=function(w){!w&&document.activeElement==this.getElement()||w&&w.target&&(w.type!="keydown"||w.ctrlKey||w.metaKey)&&this.$element.contains(w.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,d.removePopup(this)))},m.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},m.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},m.prototype.onMouseOut=function(w){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!w.relatedTarget||this.getElement().contains(w.relatedTarget)||w&&w.currentTarget.contains(w.relatedTarget)||w.relatedTarget.classList.contains("ace_content")||this.hide())},m}(p);i.HoverTooltip=f}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(n,i,r){var o=this&&this.__extends||function(){var d=function(f,g){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(m[_]=w[_])},d(f,g)};return function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");d(f,g);function m(){this.constructor=f}f.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),s=this&&this.__values||function(d){var f=typeof Symbol=="function"&&Symbol.iterator,g=f&&d[f],m=0;if(g)return g.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&m>=d.length&&(d=void 0),{value:d&&d[m++],done:!d}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},c=n("../lib/dom"),a=n("../lib/event"),u=n("../tooltip").Tooltip,l=n("../config").nls;n("../lib/lang");function p(d){var f=d.editor,g=f.renderer.$gutterLayer,m=new h(f);d.editor.setDefaultHandler("guttermousedown",function(v){if(!(!f.isFocused()||v.getButton()!=0)){var S=g.getRegion(v);if(S!="foldWidgets"){var M=v.getDocumentPosition().row,$=f.session.selection;if(v.getShiftKey())$.selectTo(M,0);else{if(v.domEvent.detail==2)return f.selectAll(),v.preventDefault();d.$clickSelection=f.selection.getLineRange(M)}return d.setState("selectByLines"),d.captureMouse(v),v.preventDefault()}}});var w,_;function E(){var v=_.getDocumentPosition().row,S=f.session.getLength();if(v==S){var M=f.renderer.pixelToScreenCoordinates(0,_.y).row,$=_.$pos;if(M>f.session.documentToScreenRow($.row,$.column))return y()}if(m.showTooltip(v),!!m.isOpen)if(f.on("mousewheel",y),d.$tooltipFollowsMouse)x(_);else{var T=_.getGutterRow(),I=g.$lines.get(T);if(I){var C=I.element.querySelector(".ace_gutter_annotation"),b=C.getBoundingClientRect(),A=m.getElement().style;A.left=b.right+"px",A.top=b.bottom+"px"}else x(_)}}function y(){w&&(w=clearTimeout(w)),m.isOpen&&(m.hideTooltip(),f.off("mousewheel",y))}function x(v){m.setPosition(v.x,v.y)}d.editor.setDefaultHandler("guttermousemove",function(v){var S=v.domEvent.target||v.domEvent.srcElement;if(c.hasCssClass(S,"ace_fold-widget"))return y();m.isOpen&&d.$tooltipFollowsMouse&&x(v),_=v,!w&&(w=setTimeout(function(){w=null,_&&!d.isMousePressed?E():y()},50))}),a.addListener(f.renderer.$gutter,"mouseout",function(v){_=null,!(!m.isOpen||w)&&(w=setTimeout(function(){w=null,y()},50))},f),f.on("changeSession",y),f.on("input",y)}i.GutterHandler=p;var h=function(d){o(f,d);function f(g){var m=d.call(this,g.container)||this;return m.editor=g,m.visibleTooltipRow,m}return f.prototype.setPosition=function(g,m){var w=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,E=this.getWidth(),y=this.getHeight();g+=15,m+=15,g+E>w&&(g-=g+E-w),m+y>_&&(m-=20+y),u.prototype.setPosition.call(this,g,m)},Object.defineProperty(f,"annotationLabels",{get:function(){return{error:{singular:l("gutter-tooltip.aria-label.error.singular","error"),plural:l("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:l("gutter-tooltip.aria-label.security.singular","security finding"),plural:l("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:l("gutter-tooltip.aria-label.warning.singular","warning"),plural:l("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:l("gutter-tooltip.aria-label.info.singular","information message"),plural:l("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:l("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:l("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),f.prototype.showTooltip=function(g){var m,w=this.editor.renderer.$gutterLayer,_=w.$annotations[g],E;_?E={displayText:Array.from(_.displayText),type:Array.from(_.type)}:E={displayText:[],type:[]};var y=w.session.getFoldLine(g);if(y&&w.$showFoldedAnnotations){for(var x={error:[],security:[],warning:[],info:[],hint:[]},v={error:1,security:2,warning:3,info:4,hint:5},S,M=g+1;M<=y.end.row;M++)if(w.$annotations[M])for(var $=0;$<w.$annotations[M].text.length;$++){var T=w.$annotations[M].type[$];x[T].push(w.$annotations[M].text[$]),(!S||v[T]<v[S])&&(S=T)}if(["error","security","warning"].includes(S)){var I="".concat(f.annotationsToSummaryString(x)," in folded code.");E.displayText.push(I),E.type.push(S+"_fold")}}if(E.displayText.length===0)return this.hideTooltip();for(var C={error:[],security:[],warning:[],info:[],hint:[]},b=w.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",M=0;M<E.displayText.length;M++){var A=c.createElement("span"),R=c.createElement("span");(m=R.classList).add.apply(m,["ace_".concat(E.type[M]),b]),R.setAttribute("aria-label","".concat(f.annotationLabels[E.type[M].replace("_fold","")].singular)),R.setAttribute("role","img"),R.appendChild(c.createTextNode(" ")),A.appendChild(R),A.appendChild(c.createTextNode(E.displayText[M])),A.appendChild(c.createElement("br")),C[E.type[M].replace("_fold","")].push(A)}var k=this.getElement();c.removeChildren(k),C.error.forEach(function(O){return k.appendChild(O)}),C.security.forEach(function(O){return k.appendChild(O)}),C.warning.forEach(function(O){return k.appendChild(O)}),C.info.forEach(function(O){return k.appendChild(O)}),C.hint.forEach(function(O){return k.appendChild(O)}),k.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.visibleTooltipRow=g,this.editor._signal("showGutterTooltip",this)},f.prototype.hideTooltip=function(){this.isOpen&&(this.$element.removeAttribute("aria-live"),this.hide(),this.visibleTooltipRow=void 0,this.editor._signal("hideGutterTooltip",this))},f.annotationsToSummaryString=function(g){var m,w,_=[],E=["error","security","warning","info","hint"];try{for(var y=s(E),x=y.next();!x.done;x=y.next()){var v=x.value;if(g[v].length){var S=g[v].length===1?f.annotationLabels[v].singular:f.annotationLabels[v].plural;_.push("".concat(g[v].length," ").concat(S))}}}catch(M){m={error:M}}finally{try{x&&!x.done&&(w=y.return)&&w.call(y)}finally{if(m)throw m.error}}return _.join(", ")},f}(u);i.GutterTooltip=h}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,i,r){var o=n("../lib/event"),s=n("../lib/useragent"),c=function(){function a(u,l){this.speed,this.wheelX,this.wheelY,this.domEvent=u,this.editor=l,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){o.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){o.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var u=this.getDocumentPosition().row,l=this.editor.session.documentToScreenRow(u,0),p=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return l-p},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,l=u.getSelectionRange();if(l.isEmpty())this.$inSelection=!1;else{var p=this.getDocumentPosition();this.$inSelection=l.contains(p.row,p.column)}return this.$inSelection},a.prototype.getButton=function(){return o.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return s.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();i.MouseEvent=c}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(n,i,r){var o=n("../lib/dom"),s=n("../lib/event"),c=n("../lib/useragent"),a=200,u=200,l=5;function p(d){var f=d.editor,g=o.createElement("div");g.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",g.textContent="";var m=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];m.forEach(function(H){d[H]=this[H]},this),f.on("mousedown",this.onMouseDown.bind(d));var w=f.container,_,E,y,x,v,S,M=0,$,T,I,C,b;this.onDragStart=function(H){if(this.cancelDrag||!w.draggable){var Y=this;return setTimeout(function(){Y.startSelect(),Y.captureMouse(H)},0),H.preventDefault()}v=f.getSelectionRange();var K=H.dataTransfer;K.effectAllowed=f.getReadOnly()?"copy":"copyMove",f.container.appendChild(g),K.setDragImage&&K.setDragImage(g,0,0),setTimeout(function(){f.container.removeChild(g)}),K.clearData(),K.setData("Text",f.session.getTextRange()),T=!0,this.setState("drag")},this.onDragEnd=function(H){if(w.draggable=!1,T=!1,this.setState(null),!f.getReadOnly()){var Y=H.dataTransfer.dropEffect;!$&&Y=="move"&&f.session.remove(f.getSelectionRange()),f.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(H){if(!(f.getReadOnly()||!V(H.dataTransfer)))return E=H.clientX,y=H.clientY,_||O(),M++,H.dataTransfer.dropEffect=$=U(H),s.preventDefault(H)},this.onDragOver=function(H){if(!(f.getReadOnly()||!V(H.dataTransfer)))return E=H.clientX,y=H.clientY,_||(O(),M++),W!==null&&(W=null),H.dataTransfer.dropEffect=$=U(H),s.preventDefault(H)},this.onDragLeave=function(H){if(M--,M<=0&&_)return N(),$=null,s.preventDefault(H)},this.onDrop=function(H){if(S){var Y=H.dataTransfer;if(T)switch($){case"move":v.contains(S.row,S.column)?v={start:S,end:S}:v=f.moveText(v,S);break;case"copy":v=f.moveText(v,S,!0);break}else{var K=Y.getData("Text");v={start:S,end:f.session.insert(S,K)},f.focus(),$=null}return N(),s.preventDefault(H)}},s.addListener(w,"dragstart",this.onDragStart.bind(d),f),s.addListener(w,"dragend",this.onDragEnd.bind(d),f),s.addListener(w,"dragenter",this.onDragEnter.bind(d),f),s.addListener(w,"dragover",this.onDragOver.bind(d),f),s.addListener(w,"dragleave",this.onDragLeave.bind(d),f),s.addListener(w,"drop",this.onDrop.bind(d),f);function A(H,Y){var K=Date.now(),P=!Y||H.row!=Y.row,D=!Y||H.column!=Y.column;if(!C||P||D)f.moveCursorToPosition(H),C=K,b={x:E,y};else{var L=h(b.x,b.y,E,y);L>l?C=null:K-C>=u&&(f.renderer.scrollCursorIntoView(),C=null)}}function R(H,Y){var K=Date.now(),P=f.renderer.layerConfig.lineHeight,D=f.renderer.layerConfig.characterWidth,L=f.renderer.scroller.getBoundingClientRect(),j={x:{left:E-L.left,right:L.right-E},y:{top:y-L.top,bottom:L.bottom-y}},F=Math.min(j.x.left,j.x.right),Q=Math.min(j.y.top,j.y.bottom),q={row:H.row,column:H.column};F/D<=2&&(q.column+=j.x.left<j.x.right?-3:2),Q/P<=1&&(q.row+=j.y.top<j.y.bottom?-1:1);var ee=H.row!=q.row,ae=H.column!=q.column,pe=!Y||H.row!=Y.row;ee||ae&&!pe?I?K-I>=a&&f.renderer.scrollCursorIntoView(q):I=K:I=null}function k(){var H=S;S=f.renderer.screenToTextCoordinates(E,y),A(S,H),R(S,H)}function O(){v=f.selection.toOrientedRange(),_=f.session.addMarker(v,"ace_selection",f.getSelectionStyle()),f.clearSelection(),f.isFocused()&&f.renderer.$cursorLayer.setBlinking(!1),clearInterval(x),k(),x=setInterval(k,20),M=0,s.addListener(document,"mousemove",z)}function N(){clearInterval(x),f.session.removeMarker(_),_=null,f.selection.fromOrientedRange(v),f.isFocused()&&!T&&f.$resetCursorStyle(),v=null,S=null,M=0,I=null,C=null,s.removeListener(document,"mousemove",z)}var W=null;function z(){W==null&&(W=setTimeout(function(){W!=null&&_&&N()},20))}function V(H){var Y=H.types;return!Y||Array.prototype.some.call(Y,function(K){return K=="text/plain"||K=="Text"})}function U(H){var Y=["copy","copymove","all","uninitialized"],K=["move","copymove","linkmove","all","uninitialized"],P=c.isMac?H.altKey:H.ctrlKey,D="uninitialized";try{D=H.dataTransfer.effectAllowed.toLowerCase()}catch{}var L="none";return P&&Y.indexOf(D)>=0?L="copy":K.indexOf(D)>=0?L="move":Y.indexOf(D)>=0&&(L="copy"),L}}(function(){this.dragWait=function(){var d=Date.now()-this.mousedownEvent.time;d>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var d=this.editor.container;d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(d){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var d=this.editor,f=d.container;f.draggable=!0,d.renderer.$cursorLayer.setBlinking(!1),d.setStyle("ace_dragging");var g=c.isWin?"default":"move";d.renderer.setCursorStyle(g),this.setState("dragReady")},this.onMouseDrag=function(d){var f=this.editor.container;if(c.isIE&&this.state=="dragReady"){var g=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);g>3&&f.dragDrop()}if(this.state==="dragWait"){var g=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);g>0&&(f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(d){if(this.$dragEnabled){this.mousedownEvent=d;var f=this.editor,g=d.inSelection(),m=d.getButton(),w=d.domEvent.detail||1;if(w===1&&m===0&&g){if(d.editor.inMultiSelectMode&&(d.getAccelKey()||d.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=d.domEvent.target||d.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),f.getDragDelay()){if(c.isWebKit){this.cancelDrag=!0;var E=f.container;E.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(d,this.onMouseDrag.bind(this)),d.defaultPrevented=!0}}}}).call(p.prototype);function h(d,f,g,m){return Math.sqrt(Math.pow(g-d,2)+Math.pow(m-f,2))}i.DragdropHandler=p}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(n,i,r){var o=n("./mouse_event").MouseEvent,s=n("../lib/event"),c=n("../lib/dom");i.addTouchListeners=function(a,u){var l="scroll",p,h,d,f,g,m,w=0,_,E=0,y=0,x=0,v,S;function M(){var A=window.navigator&&window.navigator.clipboard,R=!1,k=function(){var W=u.getCopyText(),z=u.session.getUndoManager().hasUndo();S.replaceChild(c.buildDom(R?["span",!W&&O("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],W&&O("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],W&&O("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],A&&O("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],z&&O("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],O("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],O("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),S.firstChild)},O=function(W){return u.commands.canExecute(W,u)},N=function(W){var z=W.target.getAttribute("action");if(z=="more"||!R)return R=!R,k();z=="paste"?A.readText().then(function(V){u.execCommand(z,V)}):z&&((z=="cut"||z=="copy")&&(A?A.writeText(u.getCopyText()):document.execCommand("copy")),u.execCommand(z)),S.firstChild.style.display="none",R=!1,z!="openCommandPalette"&&u.focus()};S=c.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(W){l="menu",W.stopPropagation(),W.preventDefault(),u.textInput.focus()},ontouchend:function(W){W.stopPropagation(),W.preventDefault(),N(W)},onclick:N},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],u.container)}function $(){if(!u.getOption("enableMobileMenu")){S&&T();return}S||M();var A=u.selection.cursor,R=u.renderer.textToScreenCoordinates(A.row,A.column),k=u.renderer.textToScreenCoordinates(0,0).pageX,O=u.renderer.scrollLeft,N=u.container.getBoundingClientRect();S.style.top=R.pageY-N.top-3+"px",R.pageX-N.left<N.width-70?(S.style.left="",S.style.right="10px"):(S.style.right="",S.style.left=k+O-N.left+"px"),S.style.display="",S.firstChild.style.display="none",u.on("input",T)}function T(A){S&&(S.style.display="none"),u.off("input",T)}function I(){g=null,clearTimeout(g);var A=u.selection.getRange(),R=A.contains(_.row,_.column);(A.isEmpty()||!R)&&(u.selection.moveToPosition(_),u.selection.selectWord()),l="wait",$()}function C(){g=null,clearTimeout(g),u.selection.moveToPosition(_);var A=E>=2?u.selection.getLineRange(_.row):u.session.getBracketRange(_);A&&!A.isEmpty()?u.selection.setRange(A):u.selection.selectWord(),l="wait"}s.addListener(a,"contextmenu",function(A){if(v){var R=u.textInput.getElement();R.focus()}},u),s.addListener(a,"touchstart",function(A){var R=A.touches;if(g||R.length>1){clearTimeout(g),g=null,d=-1,l="zoom";return}v=u.$mouseHandler.isMousePressed=!0;var k=u.renderer.layerConfig.lineHeight,O=u.renderer.layerConfig.lineHeight,N=A.timeStamp;f=N;var W=R[0],z=W.clientX,V=W.clientY;Math.abs(p-z)+Math.abs(h-V)>k&&(d=-1),p=A.clientX=z,h=A.clientY=V,y=x=0;var U=new o(A,u);if(_=U.getDocumentPosition(),N-d<500&&R.length==1&&!w)E++,A.preventDefault(),A.button=0,C();else{E=0;var H=u.selection.cursor,Y=u.selection.isEmpty()?H:u.selection.anchor,K=u.renderer.$cursorLayer.getPixelPosition(H,!0),P=u.renderer.$cursorLayer.getPixelPosition(Y,!0),D=u.renderer.scroller.getBoundingClientRect(),L=u.renderer.layerConfig.offset,j=u.renderer.scrollLeft,F=function(ee,ae){return ee=ee/O,ae=ae/k-.75,ee*ee+ae*ae};if(A.clientX<D.left){l="zoom";return}var Q=F(A.clientX-D.left-K.left+j,A.clientY-D.top-K.top+L),q=F(A.clientX-D.left-P.left+j,A.clientY-D.top-P.top+L);Q<3.5&&q<3.5&&(l=Q>q?"cursor":"anchor"),q<3.5?l="anchor":Q<3.5?l="cursor":l="scroll",g=setTimeout(I,450)}d=N},u),s.addListener(a,"touchend",function(A){v=u.$mouseHandler.isMousePressed=!1,m&&clearInterval(m),l=="zoom"?(l="",w=0):g?(u.selection.moveToPosition(_),w=0,$()):l=="scroll"?(b(),T()):$(),clearTimeout(g),g=null},u),s.addListener(a,"touchmove",function(A){g&&(clearTimeout(g),g=null);var R=A.touches;if(!(R.length>1||l=="zoom")){var k=R[0],O=p-k.clientX,N=h-k.clientY;if(l=="wait")if(O*O+N*N>4)l="cursor";else return A.preventDefault();p=k.clientX,h=k.clientY,A.clientX=k.clientX,A.clientY=k.clientY;var W=A.timeStamp,z=W-f;if(f=W,l=="scroll"){var V=new o(A,u);V.speed=1,V.wheelX=O,V.wheelY=N,10*Math.abs(O)<Math.abs(N)&&(O=0),10*Math.abs(N)<Math.abs(O)&&(N=0),z!=0&&(y=O/z,x=N/z),u._emit("mousewheel",V),V.propagationStopped||(y=x=0)}else{var U=new o(A,u),H=U.getDocumentPosition();l=="cursor"?u.selection.moveCursorToPosition(H):l=="anchor"&&u.selection.setSelectionAnchor(H.row,H.column),u.renderer.scrollCursorIntoView(H),A.preventDefault()}}},u);function b(){w+=60,m=setInterval(function(){w--<=0&&(clearInterval(m),m=null),Math.abs(y)<.01&&(y=0),Math.abs(x)<.01&&(x=0),w<20&&(y=.9*y),w<20&&(x=.9*x);var A=u.session.getScrollTop();u.renderer.scrollBy(10*y,10*x),A==u.session.getScrollTop()&&(w=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(n,i,r){var o=n("../lib/event"),s=n("../lib/useragent"),c=n("./default_handlers").DefaultHandlers,a=n("./default_gutter_handler").GutterHandler,u=n("./mouse_event").MouseEvent,l=n("./dragdrop_handler").DragdropHandler,p=n("./touch_handler").addTouchListeners,h=n("../config"),d=function(){function f(g){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var m=this;this.editor=g,new c(this),new a(this),new l(this);var w=function(y){var x=!document.hasFocus||!document.hasFocus()||!g.isFocused()&&document.activeElement==(g.textInput&&g.textInput.getElement());x&&window.focus(),g.focus(),setTimeout(function(){g.isFocused()||g.focus()})},_=g.renderer.getMouseEventTarget();o.addListener(_,"click",this.onMouseEvent.bind(this,"click"),g),o.addListener(_,"mousemove",this.onMouseMove.bind(this,"mousemove"),g),o.addMultiMouseDownListener([_,g.renderer.scrollBarV&&g.renderer.scrollBarV.inner,g.renderer.scrollBarH&&g.renderer.scrollBarH.inner,g.textInput&&g.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",g),o.addMouseWheelListener(g.container,this.onMouseWheel.bind(this,"mousewheel"),g),p(g.container,g);var E=g.renderer.$gutter;o.addListener(E,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),g),o.addListener(E,"click",this.onMouseEvent.bind(this,"gutterclick"),g),o.addListener(E,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),g),o.addListener(E,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),g),o.addListener(_,"mousedown",w,g),o.addListener(E,"mousedown",w,g),s.isIE&&g.renderer.scrollBarV&&(o.addListener(g.renderer.scrollBarV.element,"mousedown",w,g),o.addListener(g.renderer.scrollBarH.element,"mousedown",w,g)),g.on("mousemove",function(y){if(!(m.state||m.$dragDelay||!m.$dragEnabled)){var x=g.renderer.screenToTextCoordinates(y.x,y.y),v=g.session.selection.getRange(),S=g.renderer;!v.isEmpty()&&v.insideStart(x.row,x.column)?S.setCursorStyle("default"):S.setCursorStyle("")}},g)}return f.prototype.onMouseEvent=function(g,m){this.editor.session&&this.editor._emit(g,new u(m,this.editor))},f.prototype.onMouseMove=function(g,m){var w=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!w||!w.length||this.editor._emit(g,new u(m,this.editor))},f.prototype.onMouseWheel=function(g,m){var w=new u(m,this.editor);w.speed=this.$scrollSpeed*2,w.wheelX=m.wheelX,w.wheelY=m.wheelY,this.editor._emit(g,w)},f.prototype.setState=function(g){this.state=g},f.prototype.captureMouse=function(g,m){this.x=g.x,this.y=g.y,this.isMousePressed=!0;var w=this.editor,_=this.editor.renderer;_.$isMousePressed=!0;var E=this,y=function($){if($){if(s.isWebKit&&!$.which&&E.releaseMouse)return E.releaseMouse();E.x=$.clientX,E.y=$.clientY,m&&m($),E.mouseEvent=new u($,E.editor),E.$mouseMoved=!0}},x=function($){w.off("beforeEndOperation",S),clearInterval(M),w.session&&v(),E[E.state+"End"]&&E[E.state+"End"]($),E.state="",E.isMousePressed=_.$isMousePressed=!1,_.$keepTextAreaAtCursor&&_.$moveTextAreaToCursor(),E.$onCaptureMouseMove=E.releaseMouse=null,$&&E.onMouseEvent("mouseup",$),w.endOperation()},v=function(){E[E.state]&&E[E.state](),E.$mouseMoved=!1};if(s.isOldIE&&g.domEvent.type=="dblclick")return setTimeout(function(){x(g)});var S=function($){E.releaseMouse&&w.curOp.command.name&&w.curOp.selectionChanged&&(E[E.state+"End"]&&E[E.state+"End"](),E.state="",E.releaseMouse())};w.on("beforeEndOperation",S),w.startOperation({command:{name:"mouse"}}),E.$onCaptureMouseMove=y,E.releaseMouse=o.capture(this.editor.container,y,x);var M=setInterval(v,20)},f.prototype.cancelContextMenu=function(){var g=(function(m){m&&m.domEvent&&m.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",g),m&&m.domEvent&&o.stopEvent(m.domEvent))}).bind(this);setTimeout(g,10),this.editor.on("nativecontextmenu",g)},f.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},f}();d.prototype.releaseMouse=null,h.defineOptions(d.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:s.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),i.MouseHandler=d}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("../lib/dom"),s=function(){function c(a){a.on("click",function(u){var l=u.getDocumentPosition(),p=a.session,h=p.getFoldAt(l.row,l.column,1);h&&(u.getAccelKey()?p.removeFold(h):p.expandFold(h),u.stop());var d=u.domEvent&&u.domEvent.target;d&&o.hasCssClass(d,"ace_inline_button")&&o.hasCssClass(d,"ace_toggle_wrap")&&(p.setOption("wrap",!p.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(u){var l=a.renderer.$gutterLayer.getRegion(u);if(l=="foldWidgets"){var p=u.getDocumentPosition().row,h=a.session;h.foldWidgets&&h.foldWidgets[p]&&a.session.onFoldWidgetClick(p,u),a.isFocused()||a.focus(),u.stop()}}),a.on("gutterdblclick",function(u){var l=a.renderer.$gutterLayer.getRegion(u);if(l=="foldWidgets"){var p=u.getDocumentPosition().row,h=a.session,d=h.getParentFoldRangeData(p,!0),f=d.range||d.firstRange;if(f){p=f.start.row;var g=h.getFoldAt(p,h.getLine(p).length,1);g?h.removeFold(g):(h.addFold("...",f),a.renderer.scrollCursorIntoView({row:f.start.row,column:0}))}u.stop()}})}return c}();i.FoldHandler=s}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(n,i,r){var o=n("../lib/keys"),s=n("../lib/event"),c=function(){function a(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)}return a.prototype.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},a.prototype.setKeyboardHandler=function(u){var l=this.$handlers;if(l[l.length-1]!=u){for(;l[l.length-1]&&l[l.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(l[l.length-1]);this.addKeyboardHandler(u,1)}},a.prototype.addKeyboardHandler=function(u,l){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var p=this.$handlers.indexOf(u);p!=-1&&this.$handlers.splice(p,1),l==null?this.$handlers.push(u):this.$handlers.splice(l,0,u),p==-1&&u.attach&&u.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(u){var l=this.$handlers.indexOf(u);return l==-1?!1:(this.$handlers.splice(l,1),u.detach&&u.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var u=this.$data,l=u.editor;return this.$handlers.map(function(p){return p.getStatusText&&p.getStatusText(l,u)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(u,l,p,h){for(var d,f=!1,g=this.$editor.commands,m=this.$handlers.length;m--&&(d=this.$handlers[m].handleKeyboard(this.$data,u,l,p,h),!(!(!d||!d.command)&&(d.command=="null"?f=!0:f=g.exec(d.command,this.$editor,d.args,h),f&&h&&u!=-1&&d.passEvent!=!0&&d.command.passEvent!=!0&&s.stopEvent(h),f))););return!f&&u==-1&&(d={command:"insertstring"},f=g.exec("insertstring",this.$editor,l)),f&&this.$editor._signal&&this.$editor._signal("keyboardActivity",d),f},a.prototype.onCommandKey=function(u,l,p){var h=o.keyCodeToString(p);return this.$callKeyboardHandlers(l,h,p,u)},a.prototype.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)},a}();i.KeyBinding=c}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(n,i,r){var o=0,s=0,c=!1,a=!1,u=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,d=1,f=0,g=1,m=2,w=3,_=4,E=5,y=6,x=7,v=8,S=9,M=10,$=11,T=12,I=13,C=14,b=15,A=16,R=17,k=18,O=[k,k,k,k,k,k,k,k,k,y,E,y,v,E,k,k,k,k,k,k,k,k,k,k,k,k,k,k,E,E,E,y,v,_,_,$,$,$,_,_,_,_,_,M,S,M,S,S,m,m,m,m,m,m,m,m,m,m,S,_,_,_,_,_,_,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,_,_,_,_,_,_,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,_,_,_,_,k,k,k,k,k,k,E,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,S,_,$,$,$,$,_,_,_,_,f,_,_,k,_,_,$,$,m,m,_,f,_,_,_,m,f,_,_,_,_,_],N=[v,v,v,v,v,v,v,v,v,v,v,k,k,k,f,g,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,v,E,I,C,b,A,R,S,$,$,$,$,$,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,S,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,v];function W(H,Y,K,P){var D=o?p:l,L=null,j=null,F=null,Q=0,q=null,ee=null,ae=-1,pe=null,He=null,Qe=[];if(!P)for(pe=0,P=[];pe<K;pe++)P[pe]=U(H[pe]);for(s=o,c=!1,a=!1,u=!1,He=0;He<K;He++){if(L=Q,Qe[He]=j=V(H,P,Qe,He),Q=D[L][j],q=Q&240,Q&=15,Y[He]=F=D[Q][5],q>0)if(q==16){for(pe=ae;pe<He;pe++)Y[pe]=1;ae=-1}else ae=-1;if(ee=D[Q][6],ee)ae==-1&&(ae=He);else if(ae>-1){for(pe=ae;pe<He;pe++)Y[pe]=F;ae=-1}P[He]==E&&(Y[He]=0),s|=F}if(u){for(pe=0;pe<K;pe++)if(P[pe]==y){Y[pe]=o;for(var Ue=pe-1;Ue>=0&&P[Ue]==v;Ue--)Y[Ue]=o}}}function z(H,Y,K){if(!(s<H)){if(H==1&&o==d&&!a){K.reverse();return}for(var P=K.length,D=0,L,j,F,Q;D<P;){if(Y[D]>=H){for(L=D+1;L<P&&Y[L]>=H;)L++;for(j=D,F=L-1;j<F;j++,F--)Q=K[j],K[j]=K[F],K[F]=Q;D=L}D++}}}function V(H,Y,K,P){var D=Y[P],L,j,F,Q;switch(D){case f:case g:c=!1;case _:case w:return D;case m:return c?w:m;case x:return c=!0,g;case v:return _;case S:return P<1||P+1>=Y.length||(L=K[P-1])!=m&&L!=w||(j=Y[P+1])!=m&&j!=w?_:(c&&(j=w),j==L?j:_);case M:return L=P>0?K[P-1]:E,L==m&&P+1<Y.length&&Y[P+1]==m?m:_;case $:if(P>0&&K[P-1]==m)return m;if(c)return _;for(Q=P+1,F=Y.length;Q<F&&Y[Q]==$;)Q++;return Q<F&&Y[Q]==m?m:_;case T:for(F=Y.length,Q=P+1;Q<F&&Y[Q]==T;)Q++;if(Q<F){var q=H[P],ee=q>=1425&&q<=2303||q==64286;if(L=Y[Q],ee&&(L==g||L==x))return g}return P<1||(L=Y[P-1])==E?_:K[P-1];case E:return c=!1,a=!0,o;case y:return u=!0,_;case I:case C:case A:case R:case b:c=!1;case k:return _}}function U(H){var Y=H.charCodeAt(0),K=Y>>8;return K==0?Y>191?f:O[Y]:K==5?/[\u0591-\u05f4]/.test(H)?g:f:K==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(H)?T:/[\u0660-\u0669\u066b-\u066c]/.test(H)?w:Y==1642?$:/[\u06f0-\u06f9]/.test(H)?m:x:K==32&&Y<=8287?N[Y&255]:K==254&&Y>=65136?x:_}i.L=f,i.R=g,i.EN=m,i.ON_R=3,i.AN=4,i.R_H=5,i.B=6,i.RLE=7,i.DOT="",i.doBidiReorder=function(H,Y,K){if(H.length<2)return{};var P=H.split(""),D=new Array(P.length),L=new Array(P.length),j=[];o=K?d:h,W(P,j,P.length,Y);for(var F=0;F<D.length;D[F]=F,F++);z(2,j,D),z(1,j,D);for(var F=0;F<D.length-1;F++)Y[F]===w?j[F]=i.AN:j[F]===g&&(Y[F]>x&&Y[F]<I||Y[F]===_||Y[F]===k)?j[F]=i.ON_R:F>0&&P[F-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(P[F])&&(j[F-1]=j[F]=i.R_H,F++);P[P.length-1]===i.DOT&&(j[P.length-1]=i.B),P[0]===""&&(j[0]=i.RLE);for(var F=0;F<D.length;F++)L[F]=j[D[F]];return{logicalFromVisual:D,bidiLevels:L}},i.hasBidiCharacters=function(H,Y){for(var K=!1,P=0;P<H.length;P++)Y[P]=U(H.charAt(P)),!K&&(Y[P]==g||Y[P]==x||Y[P]==w)&&(K=!0);return K},i.getVisualFromLogicalIdx=function(H,Y){for(var K=0;K<Y.logicalFromVisual.length;K++)if(Y.logicalFromVisual[K]==H)return K;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(n,i,r){var o=n("./lib/bidiutil"),s=n("./lib/lang"),c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function u(l){this.session=l,this.bidiMap={},this.currentRow=null,this.bidiUtil=o,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=c.test(l.getValue())}return u.prototype.isBidiRow=function(l,p,h){return this.seenBidi?(l!==this.currentRow&&(this.currentRow=l,this.updateRowLine(p,h),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},u.prototype.onChange=function(l){this.seenBidi?this.currentRow=null:l.action=="insert"&&c.test(l.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},u.prototype.getDocumentRow=function(){var l=0,p=this.session.$screenRowCache;if(p.length){var h=this.session.$getRowCacheIndex(p,this.currentRow);h>=0&&(l=this.session.$docRowCache[h])}return l},u.prototype.getSplitIndex=function(){var l=0,p=this.session.$screenRowCache;if(p.length)for(var h,d=this.session.$getRowCacheIndex(p,this.currentRow);this.currentRow-l>0&&(h=this.session.$getRowCacheIndex(p,this.currentRow-l-1),h===d);)d=h,l++;else l=this.currentRow;return l},u.prototype.updateRowLine=function(l,p){l===void 0&&(l=this.getDocumentRow());var h=l===this.session.getLength()-1,d=h?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(l),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var f=this.session.$wrapData[l];f&&(p===void 0&&(p=this.getSplitIndex()),p>0&&f.length?(this.wrapIndent=f.indent,this.wrapOffset=this.wrapIndent*this.charWidths[o.L],this.line=p<f.length?this.line.substring(f[p-1],f[p]):this.line.substring(f[f.length-1])):this.line=this.line.substring(0,f[p]),p==f.length&&(this.line+=this.showInvisibles?d:o.DOT))}else this.line+=this.showInvisibles?d:o.DOT;var g=this.session,m=0,w;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(_,E){return _==="	"||g.isFullWidth(_.charCodeAt(0))?(w=_==="	"?g.getScreenTabSize(E+m):2,m+=w-1,s.stringRepeat(o.DOT,w)):_}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==o.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},u.prototype.updateBidiMap=function(){var l=[];o.hasBidiCharacters(this.line,l)||this.isRtlDir?this.bidiMap=o.doBidiReorder(this.line,l,this.isRtlDir):this.bidiMap={}},u.prototype.markAsDirty=function(){this.currentRow=null},u.prototype.updateCharacterWidths=function(l){if(this.characterWidth!==l.$characterSize.width){this.fontMetrics=l;var p=this.characterWidth=l.$characterSize.width,h=l.$measureCharWidth("");this.charWidths[o.L]=this.charWidths[o.EN]=this.charWidths[o.ON_R]=p,this.charWidths[o.R]=this.charWidths[o.AN]=h,this.charWidths[o.R_H]=h*.45,this.charWidths[o.B]=this.charWidths[o.RLE]=0,this.currentRow=null}},u.prototype.setShowInvisibles=function(l){this.showInvisibles=l,this.currentRow=null},u.prototype.setEolChar=function(l){this.EOL=l},u.prototype.setContentWidth=function(l){this.contentWidth=l},u.prototype.isRtlLine=function(l){return this.$isRtl?!0:l!=null?this.session.getLine(l).charAt(0)==this.RLE:this.isRtlDir},u.prototype.setRtlDirection=function(l,p){for(var h=l.getCursorPosition(),d=l.selection.getSelectionAnchor().row;d<=h.row;d++)!p&&l.session.getLine(d).charAt(0)===l.session.$bidiHandler.RLE?l.session.doc.removeInLine(d,0,1):p&&l.session.getLine(d).charAt(0)!==l.session.$bidiHandler.RLE&&l.session.doc.insert({column:0,row:d},l.session.$bidiHandler.RLE)},u.prototype.getPosLeft=function(l){l-=this.wrapIndent;var p=this.line.charAt(0)===this.RLE?1:0,h=l>p?this.session.getOverwrite()?l:l-1:p,d=o.getVisualFromLogicalIdx(h,this.bidiMap),f=this.bidiMap.bidiLevels,g=0;!this.session.getOverwrite()&&l<=p&&f[d]%2!==0&&d++;for(var m=0;m<d;m++)g+=this.charWidths[f[m]];return!this.session.getOverwrite()&&l>p&&f[d]%2===0&&(g+=this.charWidths[f[d]]),this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(g+=this.rtlLineOffset),g},u.prototype.getSelections=function(l,p){var h=this.bidiMap,d=h.bidiLevels,f,g=[],m=0,w=Math.min(l,p)-this.wrapIndent,_=Math.max(l,p)-this.wrapIndent,E=!1,y=!1,x=0;this.wrapIndent&&(m+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var v,S=0;S<d.length;S++)v=h.logicalFromVisual[S],f=d[S],E=v>=w&&v<_,E&&!y?x=m:!E&&y&&g.push({left:x,width:m-x}),m+=this.charWidths[f],y=E;if(E&&S===d.length&&g.push({left:x,width:m-x}),this.isRtlDir)for(var M=0;M<g.length;M++)g[M].left+=this.rtlLineOffset;return g},u.prototype.offsetToCol=function(h){this.isRtlDir&&(h-=this.rtlLineOffset);var p=0,h=Math.max(h,0),d=0,f=0,g=this.bidiMap.bidiLevels,m=this.charWidths[g[f]];for(this.wrapIndent&&(h-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);h>d+m/2;){if(d+=m,f===g.length-1){m=0;break}m=this.charWidths[g[++f]]}return f>0&&g[f-1]%2!==0&&g[f]%2===0?(h<d&&f--,p=this.bidiMap.logicalFromVisual[f]):f>0&&g[f-1]%2===0&&g[f]%2!==0?p=1+(h>d?this.bidiMap.logicalFromVisual[f]:this.bidiMap.logicalFromVisual[f-1]):this.isRtlDir&&f===g.length-1&&m===0&&g[f-1]%2===0||!this.isRtlDir&&f===0&&g[f]%2!==0?p=1+this.bidiMap.logicalFromVisual[f]:(f>0&&g[f-1]%2!==0&&m!==0&&f--,p=this.bidiMap.logicalFromVisual[f]),p===0&&this.isRtlDir&&p++,p+this.wrapIndent},u}();i.BidiHandler=a}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(n,i,r){var o=n("./lib/oop"),s=n("./lib/lang"),c=n("./lib/event_emitter").EventEmitter,a=n("./range").Range,u=function(){function l(p){this.session=p,this.doc=p.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var h=this;this.cursor.on("change",function(d){h.$cursorChanged=!0,h.$silent||h._emit("changeCursor"),!h.$isEmpty&&!h.$silent&&h._emit("changeSelection"),!h.$keepDesiredColumnOnChange&&d.old.column!=d.value.column&&(h.$desiredColumn=null)}),this.anchor.on("change",function(){h.$anchorChanged=!0,!h.$isEmpty&&!h.$silent&&h._emit("changeSelection")})}return l.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},l.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},l.prototype.getCursor=function(){return this.lead.getPosition()},l.prototype.setAnchor=function(p,h){this.$isEmpty=!1,this.anchor.setPosition(p,h)},l.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},l.prototype.getSelectionLead=function(){return this.lead.getPosition()},l.prototype.isBackwards=function(){var p=this.anchor,h=this.lead;return p.row>h.row||p.row==h.row&&p.column>h.column},l.prototype.getRange=function(){var p=this.anchor,h=this.lead;return this.$isEmpty?a.fromPoints(h,h):this.isBackwards()?a.fromPoints(h,p):a.fromPoints(p,h)},l.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},l.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},l.prototype.setRange=function(p,h){var d=h?p.end:p.start,f=h?p.start:p.end;this.$setSelection(d.row,d.column,f.row,f.column)},l.prototype.$setSelection=function(p,h,d,f){if(!this.$silent){var g=this.$isEmpty,m=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(p,h),this.cursor.setPosition(d,f),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||g!=this.$isEmpty||m)&&this._emit("changeSelection")}},l.prototype.$moveSelection=function(p){var h=this.lead;this.$isEmpty&&this.setSelectionAnchor(h.row,h.column),p.call(this)},l.prototype.selectTo=function(p,h){this.$moveSelection(function(){this.moveCursorTo(p,h)})},l.prototype.selectToPosition=function(p){this.$moveSelection(function(){this.moveCursorToPosition(p)})},l.prototype.moveTo=function(p,h){this.clearSelection(),this.moveCursorTo(p,h)},l.prototype.moveToPosition=function(p){this.clearSelection(),this.moveCursorToPosition(p)},l.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},l.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},l.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},l.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},l.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},l.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},l.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},l.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},l.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},l.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},l.prototype.getWordRange=function(p,h){if(typeof h>"u"){var d=p||this.lead;p=d.row,h=d.column}return this.session.getWordRange(p,h)},l.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},l.prototype.selectAWord=function(){var p=this.getCursor(),h=this.session.getAWordRange(p.row,p.column);this.setSelectionRange(h)},l.prototype.getLineRange=function(p,h){var d=typeof p=="number"?p:this.lead.row,f,g=this.session.getFoldLine(d);return g?(d=g.start.row,f=g.end.row):f=d,h===!0?new a(d,0,f,this.session.getLine(f).length):new a(d,0,f+1,0)},l.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},l.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},l.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},l.prototype.wouldMoveIntoSoftTab=function(p,h,d){var f=p.column,g=p.column+h;return d<0&&(f=p.column-h,g=p.column),this.session.isTabStop(p)&&this.doc.getLine(p.row).slice(f,g).split(" ").length-1==h},l.prototype.moveCursorLeft=function(){var p=this.lead.getPosition(),h;if(h=this.session.getFoldAt(p.row,p.column,-1))this.moveCursorTo(h.start.row,h.start.column);else if(p.column===0)p.row>0&&this.moveCursorTo(p.row-1,this.doc.getLine(p.row-1).length);else{var d=this.session.getTabSize();this.wouldMoveIntoSoftTab(p,d,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-d):this.moveCursorBy(0,-1)}},l.prototype.moveCursorRight=function(){var p=this.lead.getPosition(),h;if(h=this.session.getFoldAt(p.row,p.column,1))this.moveCursorTo(h.end.row,h.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var d=this.session.getTabSize(),p=this.lead;this.wouldMoveIntoSoftTab(p,d,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,d):this.moveCursorBy(0,1)}},l.prototype.moveCursorLineStart=function(){var p=this.lead.row,h=this.lead.column,d=this.session.documentToScreenRow(p,h),f=this.session.screenToDocumentPosition(d,0),g=this.session.getDisplayLine(p,null,f.row,f.column),m=g.match(/^\s*/);m[0].length!=h&&!this.session.$useEmacsStyleLineStart&&(f.column+=m[0].length),this.moveCursorToPosition(f)},l.prototype.moveCursorLineEnd=function(){var p=this.lead,h=this.session.getDocumentLastRowColumnPosition(p.row,p.column);if(this.lead.column==h.column){var d=this.session.getLine(h.row);if(h.column==d.length){var f=d.search(/\s+$/);f>0&&(h.column=f)}}this.moveCursorTo(h.row,h.column)},l.prototype.moveCursorFileEnd=function(){var p=this.doc.getLength()-1,h=this.doc.getLine(p).length;this.moveCursorTo(p,h)},l.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},l.prototype.moveCursorLongWordRight=function(){var p=this.lead.row,h=this.lead.column,d=this.doc.getLine(p),f=d.substring(h);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var g=this.session.getFoldAt(p,h,1);if(g){this.moveCursorTo(g.end.row,g.end.column);return}if(this.session.nonTokenRe.exec(f)&&(h+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,f=d.substring(h)),h>=d.length){this.moveCursorTo(p,d.length),this.moveCursorRight(),p<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(f)&&(h+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(p,h)},l.prototype.moveCursorLongWordLeft=function(){var p=this.lead.row,h=this.lead.column,d;if(d=this.session.getFoldAt(p,h,-1)){this.moveCursorTo(d.start.row,d.start.column);return}var f=this.session.getFoldStringAt(p,h,-1);f==null&&(f=this.doc.getLine(p).substring(0,h));var g=s.stringReverse(f);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(g)&&(h-=this.session.nonTokenRe.lastIndex,g=g.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),h<=0){this.moveCursorTo(p,0),this.moveCursorLeft(),p>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(g)&&(h-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(p,h)},l.prototype.$shortWordEndIndex=function(p){var h=0,d,f=/\s/,g=this.session.tokenRe;if(g.lastIndex=0,this.session.tokenRe.exec(p))h=this.session.tokenRe.lastIndex;else{for(;(d=p[h])&&f.test(d);)h++;if(h<1){for(g.lastIndex=0;(d=p[h])&&!g.test(d);)if(g.lastIndex=0,h++,f.test(d))if(h>2){h--;break}else{for(;(d=p[h])&&f.test(d);)h++;if(h>2)break}}}return g.lastIndex=0,h},l.prototype.moveCursorShortWordRight=function(){var p=this.lead.row,h=this.lead.column,d=this.doc.getLine(p),f=d.substring(h),g=this.session.getFoldAt(p,h,1);if(g)return this.moveCursorTo(g.end.row,g.end.column);if(h==d.length){var m=this.doc.getLength();do p++,f=this.doc.getLine(p);while(p<m&&/^\s*$/.test(f));/^\s+/.test(f)||(f=""),h=0}var w=this.$shortWordEndIndex(f);this.moveCursorTo(p,h+w)},l.prototype.moveCursorShortWordLeft=function(){var p=this.lead.row,h=this.lead.column,d;if(d=this.session.getFoldAt(p,h,-1))return this.moveCursorTo(d.start.row,d.start.column);var f=this.session.getLine(p).substring(0,h);if(h===0){do p--,f=this.doc.getLine(p);while(p>0&&/^\s*$/.test(f));h=f.length,/\s+$/.test(f)||(f="")}var g=s.stringReverse(f),m=this.$shortWordEndIndex(g);return this.moveCursorTo(p,h-m)},l.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},l.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},l.prototype.moveCursorBy=function(p,h){var d=this.session.documentToScreenPosition(this.lead.row,this.lead.column),f;if(h===0&&(p!==0&&(this.session.$bidiHandler.isBidiRow(d.row,this.lead.row)?(f=this.session.$bidiHandler.getPosLeft(d.column),d.column=Math.round(f/this.session.$bidiHandler.charWidths[0])):f=d.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?d.column=this.$desiredColumn:this.$desiredColumn=d.column),p!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var g=this.session.lineWidgets[this.lead.row];p<0?p-=g.rowsAbove||0:p>0&&(p+=g.rowCount-(g.rowsAbove||0))}var m=this.session.screenToDocumentPosition(d.row+p,d.column,f);p!==0&&h===0&&m.row===this.lead.row&&(m.column,this.lead.column),this.moveCursorTo(m.row,m.column+h,h===0)},l.prototype.moveCursorToPosition=function(p){this.moveCursorTo(p.row,p.column)},l.prototype.moveCursorTo=function(p,h,d){var f=this.session.getFoldAt(p,h,1);f&&(p=f.start.row,h=f.start.column),this.$keepDesiredColumnOnChange=!0;var g=this.session.getLine(p);/[\uDC00-\uDFFF]/.test(g.charAt(h))&&g.charAt(h-1)&&(this.lead.row==p&&this.lead.column==h+1?h=h-1:h=h+1),this.lead.setPosition(p,h),this.$keepDesiredColumnOnChange=!1,d||(this.$desiredColumn=null)},l.prototype.moveCursorToScreen=function(p,h,d){var f=this.session.screenToDocumentPosition(p,h);this.moveCursorTo(f.row,f.column,d)},l.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},l.prototype.fromOrientedRange=function(p){this.setSelectionRange(p,p.cursor==p.start),this.$desiredColumn=p.desiredColumn||this.$desiredColumn},l.prototype.toOrientedRange=function(p){var h=this.getRange();return p?(p.start.column=h.start.column,p.start.row=h.start.row,p.end.column=h.end.column,p.end.row=h.end.row):p=h,p.cursor=this.isBackwards()?p.start:p.end,p.desiredColumn=this.$desiredColumn,p},l.prototype.getRangeOfMovements=function(p){var h=this.getCursor();try{p(this);var d=this.getCursor();return a.fromPoints(h,d)}catch{return a.fromPoints(h,h)}finally{this.moveCursorToPosition(h)}},l.prototype.toJSON=function(){if(this.rangeCount)var p=this.ranges.map(function(h){var d=h.clone();return d.isBackwards=h.cursor==h.start,d});else{var p=this.getRange();p.isBackwards=this.isBackwards()}return p},l.prototype.fromJSON=function(p){if(p.start==null)if(this.rangeList&&p.length>1){this.toSingleRange(p[0]);for(var h=p.length;h--;){var d=a.fromPoints(p[h].start,p[h].end);p[h].isBackwards&&(d.cursor=d.start),this.addRange(d,!0)}return}else p=p[0];this.rangeList&&this.toSingleRange(p),this.setSelectionRange(p,p.isBackwards)},l.prototype.isEqual=function(p){if((p.length||this.rangeCount)&&p.length!=this.rangeCount)return!1;if(!p.length||!this.ranges)return this.getRange().isEqual(p);for(var h=this.ranges.length;h--;)if(!this.ranges[h].isEqual(p[h]))return!1;return!0},l}();u.prototype.setSelectionAnchor=u.prototype.setAnchor,u.prototype.getSelectionAnchor=u.prototype.getAnchor,u.prototype.setSelectionRange=u.prototype.setRange,o.implement(u.prototype,c),i.Selection=u}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(n,i,r){var o=n("./lib/report_error").reportError,s=2e3,c=function(){function a(u){this.splitRegex,this.states=u,this.regExps={},this.matchMappings={};for(var l in this.states){for(var p=this.states[l],h=[],d=0,f=this.matchMappings[l]={defaultToken:"text"},g="g",m=[],w=0;w<p.length;w++){var _=p[w];if(_.defaultToken&&(f.defaultToken=_.defaultToken),_.caseInsensitive&&g.indexOf("i")===-1&&(g+="i"),_.unicode&&g.indexOf("u")===-1&&(g+="u"),_.regex!=null){_.regex instanceof RegExp&&(_.regex=_.regex.toString().slice(1,-1));var E=_.regex,y=new RegExp("(?:("+E+")|(.))").exec("a").length-2;Array.isArray(_.token)?_.token.length==1||y==1?_.token=_.token[0]:y-1!=_.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:_,groupCount:y-1}),_.token=_.token[0]):(_.tokenArray=_.token,_.token=null,_.onMatch=this.$arrayTokens):typeof _.token=="function"&&!_.onMatch&&(y>1?_.onMatch=this.$applyToken:_.onMatch=_.token),y>1&&(/\\\d/.test(_.regex)?E=_.regex.replace(/\\([0-9]+)/g,function(x,v){return"\\"+(parseInt(v,10)+d+1)}):(y=1,E=this.removeCapturingGroups(_.regex)),!_.splitRegex&&typeof _.token!="string"&&m.push(_)),f[d]=w,d+=y,h.push(E),_.onMatch||(_.onMatch=null)}}h.length||(f[0]=0,h.push("$")),m.forEach(function(x){x.splitRegex=this.createSplitterRegexp(x.regex,g)},this),this.regExps[l]=new RegExp("("+h.join(")|(")+")|($)",g)}}return a.prototype.$setMaxTokenCount=function(u){s=u|0},a.prototype.$applyToken=function(u){var l=this.splitRegex.exec(u).slice(1),p=this.token.apply(this,l);if(typeof p=="string")return[{type:p,value:u}];for(var h=[],d=0,f=p.length;d<f;d++)l[d]&&(h[h.length]={type:p[d],value:l[d]});return h},a.prototype.$arrayTokens=function(u){if(!u)return[];var l=this.splitRegex.exec(u);if(!l)return"text";for(var p=[],h=this.tokenArray,d=0,f=h.length;d<f;d++)l[d+1]&&(p[p.length]={type:h[d],value:l[d+1]});return p},a.prototype.removeCapturingGroups=function(u){var l=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(p,h){return h?"(?:":p});return l},a.prototype.createSplitterRegexp=function(u,l){if(u.indexOf("(?=")!=-1){var p=0,h=!1,d={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(f,g,m,w,_,E){return h?h=_!="]":_?h=!0:w?(p==d.stack&&(d.end=E+1,d.stack=-1),p--):m&&(p++,m.length!=1&&(d.stack=p,d.start=E)),f}),d.end!=null&&/^\)*$/.test(u.substr(d.end))&&(u=u.substring(0,d.start)+u.substr(d.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(l||"").replace("g",""))},a.prototype.getLineTokens=function(u,l){if(l&&typeof l!="string"){var p=l.slice(0);l=p[0],l==="#tmp"&&(p.shift(),l=p.shift())}else var p=[];var h=l||"start",d=this.states[h];d||(h="start",d=this.states[h]);var f=this.matchMappings[h],g=this.regExps[h];g.lastIndex=0;for(var m,w=[],_=0,E=0,y={type:null,value:""};m=g.exec(u);){var x=f.defaultToken,v=null,S=m[0],M=g.lastIndex;if(M-S.length>_){var $=u.substring(_,M-S.length);y.type==x?y.value+=$:(y.type&&w.push(y),y={type:x,value:$})}for(var T=0;T<m.length-2;T++)if(m[T+1]!==void 0){v=d[f[T]],v.onMatch?x=v.onMatch(S,h,p,u):x=v.token,v.next&&(typeof v.next=="string"?h=v.next:h=v.next(h,p),d=this.states[h],d||(this.reportError("state doesn't exist",h),h="start",d=this.states[h]),f=this.matchMappings[h],_=M,g=this.regExps[h],g.lastIndex=M),v.consumeLineEnd&&(_=M);break}if(S){if(typeof x=="string")(!v||v.merge!==!1)&&y.type===x?y.value+=S:(y.type&&w.push(y),y={type:x,value:S});else if(x){y.type&&w.push(y),y={type:null,value:""};for(var T=0;T<x.length;T++)w.push(x[T])}}if(_==u.length)break;if(_=M,E++>s){for(E>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:l,line:u});_<u.length;)y.type&&w.push(y),y={value:u.substring(_,_+=500),type:"overflow"};h="start",p=[];break}}return y.type&&w.push(y),p.length>1&&p[0]!==h&&p.unshift("#tmp",h),{tokens:w,state:p.length?p:h}},a}();c.prototype.reportError=o,i.Tokenizer=c}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(n,i,r){var o=n("../lib/deep_copy").deepCopy,s;s=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(u,l){if(!l){for(var p in u)this.$rules[p]=u[p];return}for(var p in u){for(var h=u[p],d=0;d<h.length;d++){var f=h[d];(f.next||f.onMatch)&&(typeof f.next=="string"&&f.next.indexOf(l)!==0&&(f.next=l+f.next),f.nextState&&f.nextState.indexOf(l)!==0&&(f.nextState=l+f.nextState))}this.$rules[l+p]=h}},this.getRules=function(){return this.$rules},this.embedRules=function(u,l,p,h,d){var f=typeof u=="function"?new u().getRules():u;if(h)for(var g=0;g<h.length;g++)h[g]=l+h[g];else{h=[];for(var m in f)h.push(l+m)}if(this.addRules(f,l),p)for(var w=Array.prototype[d?"push":"unshift"],g=0;g<h.length;g++)w.apply(this.$rules[h[g]],o(p));this.$embeds||(this.$embeds=[]),this.$embeds.push(l)},this.getEmbeds=function(){return this.$embeds};var c=function(u,l){return(u!="start"||l.length)&&l.unshift(this.nextState,u),this.nextState},a=function(u,l){return l.shift(),l.shift()||"start"};this.normalizeRules=function(){var u=0,l=this.$rules;function p(h){var d=l[h];d.processed=!0;for(var f=0;f<d.length;f++){var g=d[f],m=null;Array.isArray(g)&&(m=g,g={}),!g.regex&&g.start&&(g.regex=g.start,g.next||(g.next=[]),g.next.push({defaultToken:g.token},{token:g.token+".end",regex:g.end||g.start,next:"pop"}),g.token=g.token+".start",g.push=!0);var w=g.next||g.push;if(w&&Array.isArray(w)){var _=g.stateName;_||(_=g.token,typeof _!="string"&&(_=_[0]||""),l[_]&&(_+=u++)),l[_]=w,g.next=_,p(_)}else w=="pop"&&(g.next=a);if(g.push&&(g.nextState=g.next||g.push,g.next=c,delete g.push),g.rules)for(var E in g.rules)l[E]?l[E].push&&l[E].push.apply(l[E],g.rules[E]):l[E]=g.rules[E];var y=typeof g=="string"?g:g.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?m=y.map(function(v){return l[v]}):m=l[y]),m){var x=[f,1].concat(m);g.noEscape&&(x=x.filter(function(v){return!v.next})),d.splice.apply(d,x),f--}g.keywordMap&&(g.token=this.createKeywordMapper(g.keywordMap,g.defaultToken||"text",g.caseInsensitive),delete g.defaultToken)}}Object.keys(l).forEach(p,this)},this.createKeywordMapper=function(u,l,p,h){var d=Object.create(null);return this.$keywordList=[],Object.keys(u).forEach(function(f){for(var g=u[f],m=g.split(h||"|"),w=m.length;w--;){var _=m[w];this.$keywordList.push(_),p&&(_=_.toLowerCase()),d[_]=f}},this),u=null,p?function(f){return d[f.toLowerCase()]||l}:function(f){return d[f]||l}},this.getKeywords=function(){return this.$keywords}}).call(s.prototype),i.TextHighlightRules=s}),ace.define("ace/mode/behaviour",["require","exports","module"],function(n,i,r){var o;o=function(){this.$behaviours={}},(function(){this.add=function(s,c,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[s]:this.$behaviours[s]={}}this.$behaviours[s][c]=a},this.addBehaviours=function(s){for(var c in s)for(var a in s[c])this.add(c,a,s[c][a])},this.remove=function(s){this.$behaviours&&this.$behaviours[s]&&delete this.$behaviours[s]},this.inherit=function(s,c){if(typeof s=="function")var a=new s().getBehaviours(c);else var a=s.getBehaviours(c);this.addBehaviours(a)},this.getBehaviours=function(s){if(s){for(var c={},a=0;a<s.length;a++)this.$behaviours[s[a]]&&(c[s[a]]=this.$behaviours[s[a]]);return c}else return this.$behaviours}}).call(o.prototype),i.Behaviour=o}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(n,i,r){var o=n("./range").Range,s=function(){function c(a,u,l){this.$session=a,this.$row=u,this.$rowTokens=a.getTokens(u);var p=a.getTokenAt(u,l);this.$tokenIndex=p?p.index:-1}return c.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},c.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},c.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},c.prototype.getCurrentTokenRow=function(){return this.$row},c.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,u=this.$tokenIndex,l=a[u].start;if(l!==void 0)return l;for(l=0;u>0;)u-=1,l+=a[u].value.length;return l},c.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},c.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new o(this.$row,u,this.$row,u+a.value.length)},c}();i.TokenIterator=s}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(n,i,r){var o=n("../../lib/oop"),s=n("../behaviour").Behaviour,c=n("../../token_iterator").TokenIterator,a=n("../../lib/lang"),u=["text","paren.rparen","rparen","paren","punctuation.operator"],l=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],p,h={},d={'"':'"',"'":"'"},f=function(w){var _=-1;if(w.multiSelect&&(_=w.selection.index,h.rangeCount!=w.multiSelect.rangeCount&&(h={rangeCount:w.multiSelect.rangeCount})),h[_])return p=h[_];p=h[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},g=function(w,_,E,y){var x=w.end.row-w.start.row;return{text:E+_+y,selection:[0,w.start.column+1,x,w.end.column+(x?0:1)]}},m;m=function(w){w=w||{},this.add("braces","insertion",function(_,E,y,x,v){var S=y.getCursorPosition(),M=x.doc.getLine(S.row);if(v=="{"){f(y);var $=y.getSelectionRange(),T=x.doc.getTextRange($),I=x.getTokenAt(S.row,S.column);if(T!==""&&T!=="{"&&y.getWrapBehavioursEnabled())return g($,T,"{","}");if(I&&/(?:string)\.quasi|\.xml/.test(I.type)){var C=[/tag\-(?:open|name)/,/attribute\-name/];return C.some(function(W){return W.test(I.type)})||/(string)\.quasi/.test(I.type)&&I.value[S.column-I.start-1]!=="$"?void 0:(m.recordAutoInsert(y,x,"}"),{text:"{}",selection:[1,1]})}else if(m.isSaneInsertion(y,x))return/[\]\}\)]/.test(M[S.column])||y.inMultiSelectMode||w.braces?(m.recordAutoInsert(y,x,"}"),{text:"{}",selection:[1,1]}):(m.recordMaybeInsert(y,x,"{"),{text:"{",selection:[1,1]})}else if(v=="}"){f(y);var b=M.substring(S.column,S.column+1);if(b=="}"){var A=x.$findOpeningBracket("}",{column:S.column+1,row:S.row});if(A!==null&&m.isAutoInsertedClosing(S,M,v))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(v==`
`||v==`\r
`){f(y);var R="";m.isMaybeInsertedClosing(S,M)&&(R=a.stringRepeat("}",p.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var b=M.substring(S.column,S.column+1);if(b==="}"){var k=x.findMatchingBracket({row:S.row,column:S.column+1},"}");if(!k)return null;var O=this.$getIndent(x.getLine(k.row))}else if(R)var O=this.$getIndent(M);else{m.clearMaybeInsertedClosing();return}var N=O+x.getTabString();return{text:`
`+N+`
`+O+R,selection:[1,N.length,1,N.length]}}else m.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,E,y,x,v){var S=x.doc.getTextRange(v);if(!v.isMultiLine()&&S=="{"){f(y);var M=x.doc.getLine(v.start.row),$=M.substring(v.end.column,v.end.column+1);if($=="}")return v.end.column++,v;p.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,E,y,x,v){if(v=="("){f(y);var S=y.getSelectionRange(),M=x.doc.getTextRange(S);if(M!==""&&y.getWrapBehavioursEnabled())return g(S,M,"(",")");if(m.isSaneInsertion(y,x))return m.recordAutoInsert(y,x,")"),{text:"()",selection:[1,1]}}else if(v==")"){f(y);var $=y.getCursorPosition(),T=x.doc.getLine($.row),I=T.substring($.column,$.column+1);if(I==")"){var C=x.$findOpeningBracket(")",{column:$.column+1,row:$.row});if(C!==null&&m.isAutoInsertedClosing($,T,v))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,E,y,x,v){var S=x.doc.getTextRange(v);if(!v.isMultiLine()&&S=="("){f(y);var M=x.doc.getLine(v.start.row),$=M.substring(v.start.column+1,v.start.column+2);if($==")")return v.end.column++,v}}),this.add("brackets","insertion",function(_,E,y,x,v){if(v=="["){f(y);var S=y.getSelectionRange(),M=x.doc.getTextRange(S);if(M!==""&&y.getWrapBehavioursEnabled())return g(S,M,"[","]");if(m.isSaneInsertion(y,x))return m.recordAutoInsert(y,x,"]"),{text:"[]",selection:[1,1]}}else if(v=="]"){f(y);var $=y.getCursorPosition(),T=x.doc.getLine($.row),I=T.substring($.column,$.column+1);if(I=="]"){var C=x.$findOpeningBracket("]",{column:$.column+1,row:$.row});if(C!==null&&m.isAutoInsertedClosing($,T,v))return m.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,E,y,x,v){var S=x.doc.getTextRange(v);if(!v.isMultiLine()&&S=="["){f(y);var M=x.doc.getLine(v.start.row),$=M.substring(v.start.column+1,v.start.column+2);if($=="]")return v.end.column++,v}}),this.add("string_dquotes","insertion",function(_,E,y,x,v){var S=x.$mode.$quotes||d;if(v.length==1&&S[v]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(v)!=-1)return;f(y);var M=v,$=y.getSelectionRange(),T=x.doc.getTextRange($);if(T!==""&&(T.length!=1||!S[T])&&y.getWrapBehavioursEnabled())return g($,T,M,M);if(!T){var I=y.getCursorPosition(),C=x.doc.getLine(I.row),b=C.substring(I.column-1,I.column),A=C.substring(I.column,I.column+1),R=x.getTokenAt(I.row,I.column),k=x.getTokenAt(I.row,I.column+1);if(b=="\\"&&R&&/escape/.test(R.type))return null;var O=R&&/string|escape/.test(R.type),N=!k||/string|escape/.test(k.type),W;if(A==M)W=O!==N,W&&/string\.end/.test(k.type)&&(W=!1);else{if(O&&!N||O&&N)return null;var z=x.$mode.tokenRe;z.lastIndex=0;var V=z.test(b);z.lastIndex=0;var U=z.test(A),H=x.$mode.$pairQuotesAfter,Y=H&&H[M]&&H[M].test(b);if(!Y&&V||U||A&&!/[\s;,.})\]\\]/.test(A))return null;var K=C[I.column-2];if(b==M&&(K==M||z.test(K)))return null;W=!0}return{text:W?M+M:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,E,y,x,v){var S=x.$mode.$quotes||d,M=x.doc.getTextRange(v);if(!v.isMultiLine()&&S.hasOwnProperty(M)){f(y);var $=x.doc.getLine(v.start.row),T=$.substring(v.start.column+1,v.start.column+2);if(T==M)return v.end.column++,v}}),w.closeDocComment!==!1&&this.add("doc comment end","insertion",function(_,E,y,x,v){if(_==="doc-start"&&(v===`
`||v===`\r
`)&&y.selection.isEmpty()){var S=y.getCursorPosition();if(S.column===0)return;for(var M=x.doc.getLine(S.row),$=x.doc.getLine(S.row+1),T=x.getTokens(S.row),I=0,C=0;C<T.length;C++){I+=T[C].value.length;var b=T[C];if(I>=S.column){if(I===S.column){if(!/\.doc/.test(b.type))return;if(/\*\//.test(b.value)){var A=T[C+1];if(!A||!/\.doc/.test(A.type))return}}var R=S.column-(I-b.value.length),k=b.value.indexOf("*/"),O=b.value.indexOf("/**",k>-1?k+2:0);if(O!==-1&&R>O&&R<O+3||k!==-1&&O!==-1&&R>=k&&R<=O||!/\.doc/.test(b.type))return;break}}var N=this.$getIndent(M);if(/\s*\*/.test($))return/^\s*\*/.test(M)?{text:v+N+"* ",selection:[1,2+N.length,1,2+N.length]}:{text:v+N+" * ",selection:[1,3+N.length,1,3+N.length]};if(/\/\*\*/.test(M.substring(0,S.column)))return{text:v+N+" * "+v+" "+N+"*/",selection:[1,4+N.length,1,4+N.length]}}})},m.isSaneInsertion=function(w,_){var E=w.getCursorPosition(),y=new c(_,E.row,E.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",u)){if(/[)}\]]/.test(w.session.getLine(E.row)[E.column]))return!0;var x=new c(_,E.row,E.column+1);if(!this.$matchTokenType(x.getCurrentToken()||"text",u))return!1}return y.stepForward(),y.getCurrentTokenRow()!==E.row||this.$matchTokenType(y.getCurrentToken()||"text",l)},m.$matchTokenType=function(w,_){return _.indexOf(w.type||w)>-1},m.recordAutoInsert=function(w,_,E){var y=w.getCursorPosition(),x=_.doc.getLine(y.row);this.isAutoInsertedClosing(y,x,p.autoInsertedLineEnd[0])||(p.autoInsertedBrackets=0),p.autoInsertedRow=y.row,p.autoInsertedLineEnd=E+x.substr(y.column),p.autoInsertedBrackets++},m.recordMaybeInsert=function(w,_,E){var y=w.getCursorPosition(),x=_.doc.getLine(y.row);this.isMaybeInsertedClosing(y,x)||(p.maybeInsertedBrackets=0),p.maybeInsertedRow=y.row,p.maybeInsertedLineStart=x.substr(0,y.column)+E,p.maybeInsertedLineEnd=x.substr(y.column),p.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(w,_,E){return p.autoInsertedBrackets>0&&w.row===p.autoInsertedRow&&E===p.autoInsertedLineEnd[0]&&_.substr(w.column)===p.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(w,_){return p.maybeInsertedBrackets>0&&w.row===p.maybeInsertedRow&&_.substr(w.column)===p.maybeInsertedLineEnd&&_.substr(0,w.column)==p.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){p.autoInsertedLineEnd=p.autoInsertedLineEnd.substr(1),p.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){p&&(p.maybeInsertedBrackets=0,p.maybeInsertedRow=-1)},o.inherits(m,s),i.CstyleBehaviour=m}),ace.define("ace/unicode",["require","exports","module"],function(n,i,r){for(var o=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],s=0,c=[],a=0;a<o.length;a+=2)c.push(s+=o[a]),o[a+1]&&c.push(45,s+=o[a+1]);i.wordChars=String.fromCharCode.apply(null,c)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(n,i,r){var o=n("../config"),s=n("../tokenizer").Tokenizer,c=n("./text_highlight_rules").TextHighlightRules,a=n("./behaviour/cstyle").CstyleBehaviour,u=n("../unicode"),l=n("../lib/lang"),p=n("../token_iterator").TokenIterator,h=n("../range").Range,d;d=function(){this.HighlightRules=c},(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+u.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+u.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new s(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(f,g,m,w){var _=g.doc,E=!0,y=!0,x=1/0,v=g.getTabSize(),S=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var T=this.lineCommentStart.map(l.escapeRegExp).join("|"),M=this.lineCommentStart[0];else var T=l.escapeRegExp(this.lineCommentStart),M=this.lineCommentStart;T=new RegExp("^(\\s*)(?:"+T+") ?"),S=g.getUseSoftTabs();var b=function(U,H){var Y=U.match(T);if(Y){var K=Y[1].length,P=Y[0].length;!k(U,K,P)&&Y[0][P-1]==" "&&P--,_.removeInLine(H,K,P)}},R=M+" ",C=function(U,H){(!E||/\S/.test(U))&&(k(U,x,x)?_.insertInLine({row:H,column:x},R):_.insertInLine({row:H,column:x},M))},A=function(U,H){return T.test(U)},k=function(U,H,Y){for(var K=0;H--&&U.charAt(H)==" ";)K++;if(K%v!=0)return!1;for(var K=0;U.charAt(Y++)==" ";)K++;return v>2?K%v!=v-1:K%v==0}}else{if(!this.blockComment)return!1;var M=this.blockComment.start,$=this.blockComment.end,T=new RegExp("^(\\s*)(?:"+l.escapeRegExp(M)+")"),I=new RegExp("(?:"+l.escapeRegExp($)+")\\s*$"),C=function(W,z){A(W,z)||(!E||/\S/.test(W))&&(_.insertInLine({row:z,column:W.length},$),_.insertInLine({row:z,column:x},M))},b=function(W,z){var V;(V=W.match(I))&&_.removeInLine(z,W.length-V[0].length,W.length),(V=W.match(T))&&_.removeInLine(z,V[1].length,V[0].length)},A=function(W,z){if(T.test(W))return!0;for(var V=g.getTokens(z),U=0;U<V.length;U++)if(V[U].type==="comment")return!0}}function O(W){for(var z=m;z<=w;z++)W(_.getLine(z),z)}var N=1/0;O(function(W,z){var V=W.search(/\S/);V!==-1?(V<x&&(x=V),y&&!A(W,z)&&(y=!1)):N>W.length&&(N=W.length)}),x==1/0&&(x=N,E=!1,y=!1),S&&x%v!=0&&(x=Math.floor(x/v)*v),O(y?b:C)},this.toggleBlockComment=function(f,g,m,w){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var E=new p(g,w.row,w.column),y=E.getCurrentToken();g.selection;var x=g.selection.toOrientedRange(),v,S;if(y&&/comment/.test(y.type)){for(var M,$;y&&/comment/.test(y.type);){var T=y.value.indexOf(_.start);if(T!=-1){var I=E.getCurrentTokenRow(),C=E.getCurrentTokenColumn()+T;M=new h(I,C,I,C+_.start.length);break}y=E.stepBackward()}for(var E=new p(g,w.row,w.column),y=E.getCurrentToken();y&&/comment/.test(y.type);){var T=y.value.indexOf(_.end);if(T!=-1){var I=E.getCurrentTokenRow(),C=E.getCurrentTokenColumn()+T;$=new h(I,C,I,C+_.end.length);break}y=E.stepForward()}$&&g.remove($),M&&(g.remove(M),v=M.start.row,S=-_.start.length)}else S=_.start.length,v=m.start.row,g.insert(m.end,_.end),g.insert(m.start,_.start);x.start.row==v&&(x.start.column+=S),x.end.row==v&&(x.end.column+=S),g.selection.fromOrientedRange(x)}},this.getNextLineIndent=function(f,g,m){return this.$getIndent(g)},this.checkOutdent=function(f,g,m){return!1},this.autoOutdent=function(f,g,m){},this.$getIndent=function(f){return f.match(/^\s*/)[0]},this.createWorker=function(f){return null},this.createModeDelegates=function(f){this.$embeds=[],this.$modes={};for(var g in f)if(f[g]){var m=f[g],w=m.prototype.$id,_=o.$modes[w];_||(o.$modes[w]=_=new m),o.$modes[g]||(o.$modes[g]=_),this.$embeds.push(g),this.$modes[g]=_}for(var E=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(v){(function(S){var M=E[v],$=S[M];S[E[v]]=function(){return this.$delegator(M,arguments,$)}})(x)},x=this,g=0;g<E.length;g++)y(g)},this.$delegator=function(f,g,m){var w=g[0]||"start";if(typeof w!="string"){if(Array.isArray(w[2])){var _=w[2][w[2].length-1],E=this.$modes[_];if(E)return E[f].apply(E,[w[1]].concat([].slice.call(g,1)))}w=w[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var x=w.split(this.$embeds[y]);if(!x[0]&&x[1]){g[0]=x[1];var E=this.$modes[this.$embeds[y]];return E[f].apply(E,g)}}var v=m.apply(this,g);return m?v:void 0},this.transformAction=function(f,g,m,w,_){if(this.$behaviour){var E=this.$behaviour.getBehaviours();for(var y in E)if(E[y][g]){var x=E[y][g].apply(this,arguments);if(x)return x}}},this.getKeywords=function(f){if(!this.completionKeywords){var g=this.$tokenizer.rules,m=[];for(var w in g)for(var _=g[w],E=0,y=_.length;E<y;E++)if(typeof _[E].token=="string")/keyword|support|storage/.test(_[E].token)&&m.push(_[E].regex);else if(typeof _[E].token=="object"){for(var x=0,v=_[E].token.length;x<v;x++)if(/keyword|support|storage/.test(_[E].token[x])){var w=_[E].regex.match(/\(.+?\)/g)[x];m.push(w.substr(1,w.length-2))}}this.completionKeywords=m}return f?m.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(f,g,m,w){var _=this.$keywordList||this.$createKeywordList();return _.map(function(E){return{name:E,value:E,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(d.prototype),i.Mode=d}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("./lib/dom"),s=function(){function c(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return c.prototype.getRowLength=function(a){var u;return this.lineWidgets?u=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[a]?1+u:this.$wrapData[a].length+1+u},c.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(a+=u.rowCount)}),a},c.prototype.$onChangeEditor=function(a){this.attach(a.editor)},c.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},c.prototype.detach=function(a){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var l=this.session.lineWidgets;l&&l.forEach(function(p){p&&p.el&&p.el.parentNode&&(p._inDocument=!1,p.el.parentNode.removeChild(p.el))})}},c.prototype.updateOnFold=function(a,u){var l=u.lineWidgets;if(!(!l||!a.action)){for(var p=a.data,h=p.start.row,d=p.end.row,f=a.action=="add",g=h+1;g<d;g++)l[g]&&(l[g].hidden=f);l[d]&&(f?l[h]?l[d].hidden=f:l[h]=l[d]:(l[h]==l[d]&&(l[h]=void 0),l[d].hidden=f))}},c.prototype.updateOnChange=function(a){var u=this.session.lineWidgets;if(u){var l=a.start.row,p=a.end.row-l;if(p!==0)if(a.action=="remove"){var h=u.splice(l+1,p);!u[l]&&h[h.length-1]&&(u[l]=h.pop()),h.forEach(function(f){f&&this.removeLineWidget(f)},this),this.$updateRows()}else{var d=new Array(p);u[l]&&u[l].column!=null&&a.start.column>u[l].column&&l++,d.unshift(l,0),u.splice.apply(u,d),this.$updateRows()}}},c.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var u=!0;a.forEach(function(l,p){if(l)for(u=!1,l.row=p;l.$oldWidget;)l.$oldWidget.row=p,l=l.$oldWidget}),u&&(this.session.lineWidgets=null)}},c.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[a.row];return u&&(a.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},c.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var u=this.editor.renderer;a.html&&!a.el&&(a.el=o.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=o.createElement("div"),a.el.textContent=a.text),a.el&&(o.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&o.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",u.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/u.layerConfig.lineHeight);var l=this.session.getFoldAt(a.row,0);if(a.$fold=l,l){var p=this.session.lineWidgets;a.row==l.end.row&&!p[l.start.row]?p[l.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(a),a},c.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[a.row];if(u==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;u;){if(u.$oldWidget==a){u.$oldWidget=a.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},c.prototype.getWidgetsAtRow=function(a){for(var u=this.session.lineWidgets,l=u&&u[a],p=[];l;)p.push(l),l=l.$oldWidget;return p},c.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},c.prototype.measureWidgets=function(a,u){var l=this.session._changedWidgets,p=u.layerConfig;if(!(!l||!l.length)){for(var h=1/0,d=0;d<l.length;d++){var f=l[d];if(!(!f||!f.el)&&f.session==this.session){if(!f._inDocument){if(this.session.lineWidgets[f.row]!=f)continue;f._inDocument=!0,u.container.appendChild(f.el)}f.h=f.el.offsetHeight,f.fixedWidth||(f.w=f.el.offsetWidth,f.screenWidth=Math.ceil(f.w/p.characterWidth));var g=f.h/p.lineHeight;f.coverLine&&(g-=this.session.getRowLineCount(f.row),g<0&&(g=0)),f.rowCount!=g&&(f.rowCount=g,f.row<h&&(h=f.row))}}h!=1/0&&(this.session._emit("changeFold",{data:{start:{row:h}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},c.prototype.renderWidgets=function(a,u){var l=u.layerConfig,p=this.session.lineWidgets;if(p){for(var h=Math.min(this.firstRow,l.firstRow),d=Math.max(this.lastRow,l.lastRow,p.length);h>0&&!p[h];)h--;this.firstRow=l.firstRow,this.lastRow=l.lastRow,u.$cursorLayer.config=l;for(var f=h;f<=d;f++){var g=p[f];if(!(!g||!g.el)){if(g.hidden){g.el.style.top=-100-(g.pixelHeight||0)+"px";continue}g._inDocument||(g._inDocument=!0,u.container.appendChild(g.el));var m=u.$cursorLayer.getPixelPosition({row:f,column:0},!0).top;g.coverLine||(m+=l.lineHeight*this.session.getRowLineCount(g.row)),g.el.style.top=m-l.offset+"px";var w=g.coverGutter?0:u.gutterWidth;g.fixedWidth||(w-=u.scrollLeft),g.el.style.left=w+"px",g.fullWidth&&g.screenWidth&&(g.el.style.minWidth=l.width+2*l.padding+"px"),g.fixedWidth?g.el.style.right=u.scrollBar.getWidth()+"px":g.el.style.right=""}}}},c}();i.LineWidgets=s}),ace.define("ace/apply_delta",["require","exports","module"],function(n,i,r){i.applyDelta=function(o,s,c){var a=s.start.row,u=s.start.column,l=o[a]||"";switch(s.action){case"insert":var p=s.lines;if(p.length===1)o[a]=l.substring(0,u)+s.lines[0]+l.substring(u);else{var h=[a,1].concat(s.lines);o.splice.apply(o,h),o[a]=l.substring(0,u)+o[a],o[a+s.lines.length-1]+=l.substring(u)}break;case"remove":var d=s.end.column,f=s.end.row;a===f?o[a]=l.substring(0,u)+l.substring(d):o.splice(a,f-a+1,l.substring(0,u)+o[f].substring(d));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,i,r){var o=n("./lib/oop"),s=n("./lib/event_emitter").EventEmitter,c=function(){function l(p,h,d){this.$onChange=this.onChange.bind(this),this.attach(p),typeof h!="number"?this.setPosition(h.row,h.column):this.setPosition(h,d)}return l.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},l.prototype.getDocument=function(){return this.document},l.prototype.onChange=function(p){if(!(p.start.row==p.end.row&&p.start.row!=this.row)&&!(p.start.row>this.row)){var h=u(p,{row:this.row,column:this.column},this.$insertRight);this.setPosition(h.row,h.column,!0)}},l.prototype.setPosition=function(p,h,d){var f;if(d?f={row:p,column:h}:f=this.$clipPositionToDocument(p,h),!(this.row==f.row&&this.column==f.column)){var g={row:this.row,column:this.column};this.row=f.row,this.column=f.column,this._signal("change",{old:g,value:f})}},l.prototype.detach=function(){this.document.off("change",this.$onChange)},l.prototype.attach=function(p){this.document=p||this.document,this.document.on("change",this.$onChange)},l.prototype.$clipPositionToDocument=function(p,h){var d={};return p>=this.document.getLength()?(d.row=Math.max(0,this.document.getLength()-1),d.column=this.document.getLine(d.row).length):p<0?(d.row=0,d.column=0):(d.row=p,d.column=Math.min(this.document.getLine(d.row).length,Math.max(0,h))),h<0&&(d.column=0),d},l}();c.prototype.$insertRight=!1,o.implement(c.prototype,s);function a(l,p,h){var d=h?l.column<=p.column:l.column<p.column;return l.row<p.row||l.row==p.row&&d}function u(l,p,h){var d=l.action=="insert",f=(d?1:-1)*(l.end.row-l.start.row),g=(d?1:-1)*(l.end.column-l.start.column),m=l.start,w=d?m:l.end;return a(p,m,h)?{row:p.row,column:p.column}:a(w,p,!h)?{row:p.row+f,column:p.column+(p.row==w.row?g:0)}:{row:m.row,column:m.column}}i.Anchor=c}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(n,i,r){var o=n("./lib/oop"),s=n("./apply_delta").applyDelta,c=n("./lib/event_emitter").EventEmitter,a=n("./range").Range,u=n("./anchor").Anchor,l=function(){function p(h){this.$lines=[""],h.length===0?this.$lines=[""]:Array.isArray(h)?this.insertMergedLines({row:0,column:0},h):this.insert({row:0,column:0},h)}return p.prototype.setValue=function(h){var d=this.getLength()-1;this.remove(new a(0,0,d,this.getLine(d).length)),this.insert({row:0,column:0},h||"")},p.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},p.prototype.createAnchor=function(h,d){return new u(this,h,d)},p.prototype.$detectNewLine=function(h){var d=h.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=d?d[1]:`
`,this._signal("changeNewLineMode")},p.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},p.prototype.setNewLineMode=function(h){this.$newLineMode!==h&&(this.$newLineMode=h,this._signal("changeNewLineMode"))},p.prototype.getNewLineMode=function(){return this.$newLineMode},p.prototype.isNewLine=function(h){return h==`\r
`||h=="\r"||h==`
`},p.prototype.getLine=function(h){return this.$lines[h]||""},p.prototype.getLines=function(h,d){return this.$lines.slice(h,d+1)},p.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},p.prototype.getLength=function(){return this.$lines.length},p.prototype.getTextRange=function(h){return this.getLinesForRange(h).join(this.getNewLineCharacter())},p.prototype.getLinesForRange=function(h){var d;if(h.start.row===h.end.row)d=[this.getLine(h.start.row).substring(h.start.column,h.end.column)];else{d=this.getLines(h.start.row,h.end.row),d[0]=(d[0]||"").substring(h.start.column);var f=d.length-1;h.end.row-h.start.row==f&&(d[f]=d[f].substring(0,h.end.column))}return d},p.prototype.insertLines=function(h,d){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(h,d)},p.prototype.removeLines=function(h,d){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(h,d)},p.prototype.insertNewLine=function(h){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(h,["",""])},p.prototype.insert=function(h,d){return this.getLength()<=1&&this.$detectNewLine(d),this.insertMergedLines(h,this.$split(d))},p.prototype.insertInLine=function(h,d){var f=this.clippedPos(h.row,h.column),g=this.pos(h.row,h.column+d.length);return this.applyDelta({start:f,end:g,action:"insert",lines:[d]},!0),this.clonePos(g)},p.prototype.clippedPos=function(h,d){var f=this.getLength();h===void 0?h=f:h<0?h=0:h>=f&&(h=f-1,d=void 0);var g=this.getLine(h);return d==null&&(d=g.length),d=Math.min(Math.max(d,0),g.length),{row:h,column:d}},p.prototype.clonePos=function(h){return{row:h.row,column:h.column}},p.prototype.pos=function(h,d){return{row:h,column:d}},p.prototype.$clipPosition=function(h){var d=this.getLength();return h.row>=d?(h.row=Math.max(0,d-1),h.column=this.getLine(d-1).length):(h.row=Math.max(0,h.row),h.column=Math.min(Math.max(h.column,0),this.getLine(h.row).length)),h},p.prototype.insertFullLines=function(h,d){h=Math.min(Math.max(h,0),this.getLength());var f=0;h<this.getLength()?(d=d.concat([""]),f=0):(d=[""].concat(d),h--,f=this.$lines[h].length),this.insertMergedLines({row:h,column:f},d)},p.prototype.insertMergedLines=function(h,d){var f=this.clippedPos(h.row,h.column),g={row:f.row+d.length-1,column:(d.length==1?f.column:0)+d[d.length-1].length};return this.applyDelta({start:f,end:g,action:"insert",lines:d}),this.clonePos(g)},p.prototype.remove=function(h){var d=this.clippedPos(h.start.row,h.start.column),f=this.clippedPos(h.end.row,h.end.column);return this.applyDelta({start:d,end:f,action:"remove",lines:this.getLinesForRange({start:d,end:f})}),this.clonePos(d)},p.prototype.removeInLine=function(h,d,f){var g=this.clippedPos(h,d),m=this.clippedPos(h,f);return this.applyDelta({start:g,end:m,action:"remove",lines:this.getLinesForRange({start:g,end:m})},!0),this.clonePos(g)},p.prototype.removeFullLines=function(h,d){h=Math.min(Math.max(0,h),this.getLength()-1),d=Math.min(Math.max(0,d),this.getLength()-1);var f=d==this.getLength()-1&&h>0,g=d<this.getLength()-1,m=f?h-1:h,w=f?this.getLine(m).length:0,_=g?d+1:d,E=g?0:this.getLine(_).length,y=new a(m,w,_,E),x=this.$lines.slice(h,d+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),x},p.prototype.removeNewLine=function(h){h<this.getLength()-1&&h>=0&&this.applyDelta({start:this.pos(h,this.getLine(h).length),end:this.pos(h+1,0),action:"remove",lines:["",""]})},p.prototype.replace=function(h,d){if(h instanceof a||(h=a.fromPoints(h.start,h.end)),d.length===0&&h.isEmpty())return h.start;if(d==this.getTextRange(h))return h.end;this.remove(h);var f;return d?f=this.insert(h.start,d):f=h.start,f},p.prototype.applyDeltas=function(h){for(var d=0;d<h.length;d++)this.applyDelta(h[d])},p.prototype.revertDeltas=function(h){for(var d=h.length-1;d>=0;d--)this.revertDelta(h[d])},p.prototype.applyDelta=function(h,d){var f=h.action=="insert";(f?h.lines.length<=1&&!h.lines[0]:!a.comparePoints(h.start,h.end))||(f&&h.lines.length>2e4?this.$splitAndapplyLargeDelta(h,2e4):(s(this.$lines,h,d),this._signal("change",h)))},p.prototype.$safeApplyDelta=function(h){var d=this.$lines.length;(h.action=="remove"&&h.start.row<d&&h.end.row<d||h.action=="insert"&&h.start.row<=d)&&this.applyDelta(h)},p.prototype.$splitAndapplyLargeDelta=function(h,d){for(var f=h.lines,g=f.length-d+1,m=h.start.row,w=h.start.column,_=0,E=0;_<g;_=E){E+=d-1;var y=f.slice(_,E);y.push(""),this.applyDelta({start:this.pos(m+_,w),end:this.pos(m+E,w=0),action:h.action,lines:y},!0)}h.lines=f.slice(_),h.start.row=m+_,h.start.column=w,this.applyDelta(h,!0)},p.prototype.revertDelta=function(h){this.$safeApplyDelta({start:this.clonePos(h.start),end:this.clonePos(h.end),action:h.action=="insert"?"remove":"insert",lines:h.lines.slice()})},p.prototype.indexToPosition=function(h,d){for(var f=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,m=d||0,w=f.length;m<w;m++)if(h-=f[m].length+g,h<0)return{row:m,column:h+f[m].length+g};return{row:w-1,column:h+f[w-1].length+g}},p.prototype.positionToIndex=function(h,d){for(var f=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,m=0,w=Math.min(h.row,f.length),_=d||0;_<w;++_)m+=f[_].length+g;return m+h.column},p.prototype.$split=function(h){return h.split(/\r\n|\r|\n/)},p}();l.prototype.$autoNewLine="",l.prototype.$newLineMode="auto",o.implement(l.prototype,c),i.Document=l}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,i,r){var o=n("./lib/oop"),s=n("./lib/event_emitter").EventEmitter,c=function(){function a(u,l){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var p=this;this.$worker=function(){if(p.running){for(var h=new Date,d=p.currentLine,f=-1,g=p.doc,m=d;p.lines[d];)d++;var w=g.getLength(),_=0;for(p.running=!1;d<w;){p.$tokenizeRow(d),f=d;do d++;while(p.lines[d]);if(_++,_%5===0&&new Date-h>20){p.running=setTimeout(p.$worker,20);break}}p.currentLine=d,f==-1&&(f=d),m<=f&&p.fireUpdateEvent(m,f)}}}return a.prototype.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(u,l){var p={first:u,last:l};this._signal("update",{data:p})},a.prototype.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(u){var l=u.start.row,p=u.end.row-l;if(p===0)this.lines[l]=null;else if(u.action=="remove")this.lines.splice(l,p+1,null),this.states.splice(l,p+1,null);else{var h=Array(p+1);h.unshift(l,1),this.lines.splice.apply(this.lines,h),this.states.splice.apply(this.states,h)}this.currentLine=Math.min(l,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},a.prototype.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},a.prototype.$tokenizeRow=function(u){var l=this.doc.getLine(u),p=this.states[u-1],h=this.tokenizer.getLineTokens(l,p,u);return this.states[u]+""!=h.state+""?(this.states[u]=h.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=h.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();o.implement(c.prototype,s),i.BackgroundTokenizer=c}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(n,i,r){var o=n("./lib/lang"),s=n("./range").Range,c=function(){function a(u,l,p){p===void 0&&(p="text"),this.setRegexp(u),this.clazz=l,this.type=p}return a.prototype.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},a.prototype.update=function(u,l,p,h){if(this.regExp)for(var d=h.firstRow,f=h.lastRow,g={},m=d;m<=f;m++){var w=this.cache[m];w==null&&(w=o.getMatchOffsets(p.getLine(m),this.regExp),w.length>this.MAX_RANGES&&(w=w.slice(0,this.MAX_RANGES)),w=w.map(function(x){return new s(m,x.offset,m,x.offset+x.length)}),this.cache[m]=w.length?w:"");for(var _=w.length;_--;){var E=w[_].toScreenRange(p),y=E.toString();g[y]||(g[y]=!0,l.drawSingleLineMarker(u,E,this.clazz,h))}}},a}();c.prototype.MAX_RANGES=500,i.SearchHighlight=c}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(n,i,r){var o=function(){function x(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return x.prototype.addSession=function(v){this.$session=v},x.prototype.add=function(v,S,M){if(!this.$fromUndo&&v!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),S===!1||!this.lastDeltas){this.lastDeltas=[];var $=this.$undoStack.length;$>this.$undoDepth-1&&this.$undoStack.splice(0,$-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),v.id=this.$rev=++this.$maxRev}(v.action=="remove"||v.action=="insert")&&(this.$lastDelta=v),this.lastDeltas.push(v)}},x.prototype.addSelection=function(v,S){this.selections.push({value:v,rev:S||this.$rev})},x.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},x.prototype.markIgnored=function(v,S){S==null&&(S=this.$rev+1);for(var M=this.$undoStack,$=M.length;$--;){var T=M[$][0];if(T.id<=v)break;T.id<S&&(T.ignore=!0)}this.lastDeltas=null},x.prototype.getSelection=function(v,S){for(var M=this.selections,$=M.length;$--;){var T=M[$];if(T.rev<v)return S&&(T=M[$+1]),T}},x.prototype.getRevision=function(){return this.$rev},x.prototype.getDeltas=function(v,S){S==null&&(S=this.$rev+1);for(var M=this.$undoStack,$=null,T=0,I=M.length;I--;){var C=M[I][0];if(C.id<S&&!$&&($=I+1),C.id<=v){T=I+1;break}}return M.slice(T,$)},x.prototype.getChangedRanges=function(v,S){S==null&&(S=this.$rev+1)},x.prototype.getChangedLines=function(v,S){S==null&&(S=this.$rev+1)},x.prototype.undo=function(v,S){this.lastDeltas=null;var M=this.$undoStack;if(s(M,M.length)){v||(v=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var $=M.pop(),T=null;return $&&(T=v.undoChanges($,S),this.$redoStack.push($),this.$syncRev()),this.$fromUndo=!1,T}},x.prototype.redo=function(v,S){if(this.lastDeltas=null,v||(v=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var M=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);y(this.$redoStack,M),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(I){I[0].id=++this.$maxRev},this)}var $=this.$redoStack.pop(),T=null;return $&&(T=v.redoChanges($,S),this.$undoStack.push($),this.$syncRev()),this.$fromUndo=!1,T},x.prototype.$syncRev=function(){var v=this.$undoStack,S=v[v.length-1],M=S&&S[0].id||0;this.$redoStackBaseRev=M,this.$rev=M},x.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},x.prototype.canUndo=function(){return this.$undoStack.length>0},x.prototype.canRedo=function(){return this.$redoStack.length>0},x.prototype.bookmark=function(v){v==null&&(v=this.$rev),this.mark=v},x.prototype.isAtBookmark=function(){return this.$rev===this.mark},x.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},x.prototype.fromJSON=function(v){this.reset(),this.$undoStack=v.$undoStack,this.$redoStack=v.$redoStack},x.prototype.$prettyPrint=function(v){return v?p(v):p(this.$undoStack)+`
---
`+p(this.$redoStack)},x}();o.prototype.hasUndo=o.prototype.canUndo,o.prototype.hasRedo=o.prototype.canRedo,o.prototype.isClean=o.prototype.isAtBookmark,o.prototype.markClean=o.prototype.bookmark;function s(x,v){for(var S=v;S--;){var M=x[S];if(M&&!M[0].ignore){for(;S<v-1;){var $=f(x[S],x[S+1]);x[S]=$[0],x[S+1]=$[1],S++}return!0}}}var c=n("./range").Range,a=c.comparePoints;c.comparePoints;function u(x){return{row:x.row,column:x.column}}function l(x){return{start:u(x.start),end:u(x.end),action:x.action,lines:x.lines.slice()}}function p(x){if(x=x||this,Array.isArray(x))return x.map(p).join(`
`);var v="";return x.action?(v=x.action=="insert"?"+":"-",v+="["+x.lines+"]"):x.value&&(Array.isArray(x.value)?v=x.value.map(h).join(`
`):v=h(x.value)),x.start&&(v+=h(x)),(x.id||x.rev)&&(v+="	("+(x.id||x.rev)+")"),v}function h(x){return x.start.row+":"+x.start.column+"=>"+x.end.row+":"+x.end.column}function d(x,v){var S=x.action=="insert",M=v.action=="insert";if(S&&M)if(a(v.start,x.end)>=0)m(v,x,-1);else if(a(v.start,x.start)<=0)m(x,v,1);else return null;else if(S&&!M)if(a(v.start,x.end)>=0)m(v,x,-1);else if(a(v.end,x.start)<=0)m(x,v,-1);else return null;else if(!S&&M)if(a(v.start,x.start)>=0)m(v,x,1);else if(a(v.start,x.start)<=0)m(x,v,1);else return null;else if(!S&&!M)if(a(v.start,x.start)>=0)m(v,x,1);else if(a(v.end,x.start)<=0)m(x,v,-1);else return null;return[v,x]}function f(x,v){for(var S=x.length;S--;)for(var M=0;M<v.length;M++)if(!d(x[S],v[M])){for(;S<x.length;){for(;M--;)d(v[M],x[S]);M=v.length,S++}return[x,v]}return x.selectionBefore=v.selectionBefore=x.selectionAfter=v.selectionAfter=null,[v,x]}function g(x,v){var S=x.action=="insert",M=v.action=="insert";if(S&&M)a(x.start,v.start)<0?m(v,x,1):m(x,v,1);else if(S&&!M)a(x.start,v.end)>=0?m(x,v,-1):(a(x.start,v.start)<=0||m(x,c.fromPoints(v.start,x.start),-1),m(v,x,1));else if(!S&&M)a(v.start,x.end)>=0?m(v,x,-1):(a(v.start,x.start)<=0||m(v,c.fromPoints(x.start,v.start),-1),m(x,v,1));else if(!S&&!M)if(a(v.start,x.end)>=0)m(v,x,-1);else if(a(v.end,x.start)<=0)m(x,v,-1);else{var $,T;return a(x.start,v.start)<0&&($=x,x=_(x,v.start)),a(x.end,v.end)>0&&(T=_(x,v.end)),w(v.end,x.start,x.end,-1),T&&!$&&(x.lines=T.lines,x.start=T.start,x.end=T.end,T=x),[v,$,T].filter(Boolean)}return[v,x]}function m(x,v,S){w(x.start,v.start,v.end,S),w(x.end,v.start,v.end,S)}function w(x,v,S,M){x.row==(M==1?v:S).row&&(x.column+=M*(S.column-v.column)),x.row+=M*(S.row-v.row)}function _(x,v){var S=x.lines,M=x.end;x.end=u(v);var $=x.end.row-x.start.row,T=S.splice($,S.length),I=$?v.column:v.column-x.start.column;S.push(T[0].substring(0,I)),T[0]=T[0].substr(I);var C={start:u(v),end:M,lines:T,action:x.action};return C}function E(x,v){v=l(v);for(var S=x.length;S--;){for(var M=x[S],$=0;$<M.length;$++){var T=M[$],I=g(T,v);v=I[0],I.length!=2&&(I[2]?(M.splice($+1,1,I[1],I[2]),$++):I[1]||(M.splice($,1),$--))}M.length||x.splice(S,1)}return x}function y(x,v){for(var S=0;S<v.length;S++)for(var M=v[S],$=0;$<M.length;$++)E(x,M[$])}i.UndoManager=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(n,i,r){var o=n("../range").Range,s=function(){function c(a,u){this.foldData=a,Array.isArray(u)?this.folds=u:u=this.folds=[u];var l=u[u.length-1];this.range=new o(u[0].start.row,u[0].start.column,l.end.row,l.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(p){p.setFoldLine(this)},this)}return c.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(u){u.start.row+=a,u.end.row+=a})},c.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(u,l){return-u.range.compareEnd(l.start.row,l.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},c.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},c.prototype.walk=function(a,u,l){var p=0,h=this.folds,d,f,g,m=!0;u==null&&(u=this.end.row,l=this.end.column);for(var w=0;w<h.length;w++){if(d=h[w],f=d.range.compareStart(u,l),f==-1){a(null,u,l,p,m);return}if(g=a(null,d.start.row,d.start.column,p,m),g=!g&&a(d.placeholder,d.start.row,d.start.column,p),g||f===0)return;m=!d.sameRow,p=d.end.column}a(null,u,l,p,m)},c.prototype.getNextFoldTo=function(a,u){for(var l,p,h=0;h<this.folds.length;h++){if(l=this.folds[h],p=l.range.compareEnd(a,u),p==-1)return{fold:l,kind:"after"};if(p===0)return{fold:l,kind:"inside"}}return null},c.prototype.addRemoveChars=function(a,u,l){var p=this.getNextFoldTo(a,u),h,d;if(p){if(h=p.fold,p.kind=="inside"&&h.start.column!=u&&h.start.row!=a)window.console&&window.console.log(a,u,h);else if(h.start.row==a){d=this.folds;var f=d.indexOf(h);for(f===0&&(this.start.column+=l),f;f<d.length;f++){if(h=d[f],h.start.column+=l,!h.sameRow)return;h.end.column+=l}this.end.column+=l}}},c.prototype.split=function(a,u){var l=this.getNextFoldTo(a,u);if(!l||l.kind=="inside")return null;var p=l.fold,h=this.folds,d=this.foldData,f=h.indexOf(p),g=h[f-1];this.end.row=g.end.row,this.end.column=g.end.column,h=h.splice(f,h.length-f);var m=new c(d,h);return d.splice(d.indexOf(this)+1,0,m),m},c.prototype.merge=function(a){for(var u=a.folds,l=0;l<u.length;l++)this.addFold(u[l]);var p=this.foldData;p.splice(p.indexOf(a),1)},c.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(u){a.push("  "+u.toString())}),a.push("]"),a.join(`
`)},c.prototype.idxToPosition=function(a){for(var u=0,l=0;l<this.folds.length;l++){var p=this.folds[l];if(a-=p.start.column-u,a<0)return{row:p.start.row,column:p.start.column+a};if(a-=p.placeholder.length,a<0)return p.start;u=p.end.column}return{row:this.end.row,column:this.end.column+a}},c}();i.FoldLine=s}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(n,i,r){var o=n("./range").Range,s=o.comparePoints,c=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(u,l,p){for(var h=this.ranges,d=p||0;d<h.length;d++){var f=h[d],g=s(u,f.end);if(!(g>0)){var m=s(u,f.start);return g===0?l&&m!==0?-d-2:d:m>0||m===0&&!l?d:-d-1}}return-d-1},a.prototype.add=function(u){var l=!u.isEmpty(),p=this.pointIndex(u.start,l);p<0&&(p=-p-1);var h=this.pointIndex(u.end,l,p);return h<0?h=-h-1:h++,this.ranges.splice(p,h-p,u)},a.prototype.addList=function(u){for(var l=[],p=u.length;p--;)l.push.apply(l,this.add(u[p]));return l},a.prototype.substractPoint=function(u){var l=this.pointIndex(u);if(l>=0)return this.ranges.splice(l,1)},a.prototype.merge=function(){var u=[],l=this.ranges;l=l.sort(function(g,m){return s(g.start,m.start)});for(var p=l[0],h,d=1;d<l.length;d++){h=p,p=l[d];var f=s(h.end,p.start);f<0||f==0&&!h.isEmpty()&&!p.isEmpty()||(s(h.end,p.end)<0&&(h.end.row=p.end.row,h.end.column=p.end.column),l.splice(d,1),u.push(p),p=h,d--)}return this.ranges=l,u},a.prototype.contains=function(u,l){return this.pointIndex({row:u,column:l})>=0},a.prototype.containsPoint=function(u){return this.pointIndex(u)>=0},a.prototype.rangeAtPoint=function(u){var l=this.pointIndex(u);if(l>=0)return this.ranges[l]},a.prototype.clipRows=function(u,l){var p=this.ranges;if(p[0].start.row>l||p[p.length-1].start.row<u)return[];var h=this.pointIndex({row:u,column:0});h<0&&(h=-h-1);var d=this.pointIndex({row:l,column:0},h);d<0&&(d=-d-1);for(var f=[],g=h;g<d;g++)f.push(p[g]);return f},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(u){for(var l=u.start,p=u.end,h=l.row,d=p.row,f=this.ranges,g=0,m=f.length;g<m;g++){var w=f[g];if(w.end.row>=h)break}if(u.action=="insert")for(var _=d-h,E=-l.column+p.column;g<m;g++){var w=f[g];if(w.start.row>h)break;if(w.start.row==h&&w.start.column>=l.column&&(w.start.column==l.column&&this.$bias<=0||(w.start.column+=E,w.start.row+=_)),w.end.row==h&&w.end.column>=l.column){if(w.end.column==l.column&&this.$bias<0)continue;w.end.column==l.column&&E>0&&g<m-1&&w.end.column>w.start.column&&w.end.column==f[g+1].start.column&&(w.end.column-=E),w.end.column+=E,w.end.row+=_}}else for(var _=h-d,E=l.column-p.column;g<m;g++){var w=f[g];if(w.start.row>d)break;w.end.row<d&&(h<w.end.row||h==w.end.row&&l.column<w.end.column)?(w.end.row=h,w.end.column=l.column):w.end.row==d?w.end.column<=p.column?(_||w.end.column>l.column)&&(w.end.column=l.column,w.end.row=l.row):(w.end.column+=E,w.end.row+=_):w.end.row>d&&(w.end.row+=_),w.start.row<d&&(h<w.start.row||h==w.start.row&&l.column<w.start.column)?(w.start.row=h,w.start.column=l.column):w.start.row==d?w.start.column<=p.column?(_||w.start.column>l.column)&&(w.start.column=l.column,w.start.row=l.row):(w.start.column+=E,w.start.row+=_):w.start.row>d&&(w.start.row+=_)}if(_!=0&&g<m)for(;g<m;g++){var w=f[g];w.start.row+=_,w.end.row+=_}},a}();c.prototype.comparePoints=s,i.RangeList=c}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(n,i,r){var o=this&&this.__extends||function(){var h=function(d,f){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(g[w]=m[w])},h(d,f)};return function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");h(d,f);function g(){this.constructor=d}d.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}(),s=n("../range_list").RangeList,c=function(h){o(d,h);function d(f,g){var m=h.call(this)||this;return m.foldLine=null,m.placeholder=g,m.range=f,m.start=f.start,m.end=f.end,m.sameRow=f.start.row==f.end.row,m.subFolds=m.ranges=[],m}return d.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},d.prototype.setFoldLine=function(f){this.foldLine=f,this.subFolds.forEach(function(g){g.setFoldLine(f)})},d.prototype.clone=function(){var f=this.range.clone(),g=new d(f,this.placeholder);return this.subFolds.forEach(function(m){g.subFolds.push(m.clone())}),g.collapseChildren=this.collapseChildren,g},d.prototype.addSubFold=function(f){if(!this.range.isEqual(f)){u(f,this.start);for(var E=f.start.row,y=f.start.column,g=0,m=-1;g<this.subFolds.length&&(m=this.subFolds[g].range.compare(E,y),m==1);g++);var w=this.subFolds[g],_=0;if(m==0){if(w.range.containsRange(f))return w.addSubFold(f);_=1}for(var E=f.range.end.row,y=f.range.end.column,x=g,m=-1;x<this.subFolds.length&&(m=this.subFolds[x].range.compare(E,y),m==1);x++);m==0&&x++;for(var v=this.subFolds.splice(g,x-g,f),S=m==0?v.length-1:v.length,M=_;M<S;M++)f.addSubFold(v[M]);return f.setFoldLine(this.foldLine),f}},d.prototype.restoreRange=function(f){return p(f,this.start)},d}(s);function a(h,d){h.row-=d.row,h.row==0&&(h.column-=d.column)}function u(h,d){a(h.start,d),a(h.end,d)}function l(h,d){h.row==0&&(h.column+=d.column),h.row+=d.row}function p(h,d){l(h.start,d),l(h.end,d)}i.Fold=c}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(n,i,r){var o=n("../range").Range,s=n("./fold_line").FoldLine,c=n("./fold").Fold,a=n("../token_iterator").TokenIterator,u=n("../mouse/mouse_event").MouseEvent;function l(){this.getFoldAt=function(p,h,d){var f=this.getFoldLine(p);if(!f)return null;for(var g=f.folds,m=0;m<g.length;m++){var w=g[m].range;if(w.contains(p,h)){if(d==1&&w.isEnd(p,h)&&!w.isEmpty())continue;if(d==-1&&w.isStart(p,h)&&!w.isEmpty())continue;return g[m]}}},this.getFoldsInRange=function(p){var h=p.start,d=p.end,f=this.$foldData,g=[];h.column+=1,d.column-=1;for(var m=0;m<f.length;m++){var w=f[m].range.compareRange(p);if(w!=2){if(w==-2)break;for(var _=f[m].folds,E=0;E<_.length;E++){var y=_[E];if(w=y.range.compareRange(p),w==-2)break;if(w==2)continue;if(w==42)break;g.push(y)}}}return h.column-=1,d.column+=1,g},this.getFoldsInRangeList=function(p){if(Array.isArray(p)){var h=[];p.forEach(function(d){h=h.concat(this.getFoldsInRange(d))},this)}else var h=this.getFoldsInRange(p);return h},this.getAllFolds=function(){for(var p=[],h=this.$foldData,d=0;d<h.length;d++)for(var f=0;f<h[d].folds.length;f++)p.push(h[d].folds[f]);return p},this.getFoldStringAt=function(p,h,d,f){if(f=f||this.getFoldLine(p),!f)return null;for(var g={end:{column:0}},m,w,_=0;_<f.folds.length;_++){w=f.folds[_];var E=w.range.compareEnd(p,h);if(E==-1){m=this.getLine(w.start.row).substring(g.end.column,w.start.column);break}else if(E===0)return null;g=w}return m||(m=this.getLine(w.start.row).substring(g.end.column)),d==-1?m.substring(0,h-g.end.column):d==1?m.substring(h-g.end.column):m},this.getFoldLine=function(p,h){var d=this.$foldData,f=0;for(h&&(f=d.indexOf(h)),f==-1&&(f=0),f;f<d.length;f++){var g=d[f];if(g.start.row<=p&&g.end.row>=p)return g;if(g.end.row>p)return null}return null},this.getNextFoldLine=function(p,h){var d=this.$foldData,f=0;for(h&&(f=d.indexOf(h)),f==-1&&(f=0),f;f<d.length;f++){var g=d[f];if(g.end.row>=p)return g}return null},this.getFoldedRowCount=function(p,h){for(var d=this.$foldData,f=h-p+1,g=0;g<d.length;g++){var m=d[g],w=m.end.row,_=m.start.row;if(w>=h){_<h&&(_>=p?f-=h-_:f=0);break}else w>=p&&(_>=p?f-=w-_:f-=w-p+1)}return f},this.$addFoldLine=function(p){return this.$foldData.push(p),this.$foldData.sort(function(h,d){return h.start.row-d.start.row}),p},this.addFold=function(p,h){var d=this.$foldData,f=!1,g;p instanceof c?g=p:(g=new c(h,p),g.collapseChildren=h.collapseChildren),this.$clipRangeToDocument(g.range);var m=g.start.row,w=g.start.column,_=g.end.row,E=g.end.column,y=this.getFoldAt(m,w,1),x=this.getFoldAt(_,E,-1);if(y&&x==y)return y.addSubFold(g);y&&!y.range.isStart(m,w)&&this.removeFold(y),x&&!x.range.isEnd(_,E)&&this.removeFold(x);var v=this.getFoldsInRange(g.range);v.length>0&&(this.removeFolds(v),g.collapseChildren||v.forEach(function(T){g.addSubFold(T)}));for(var S=0;S<d.length;S++){var M=d[S];if(_==M.start.row){M.addFold(g),f=!0;break}else if(m==M.end.row){if(M.addFold(g),f=!0,!g.sameRow){var $=d[S+1];if($&&$.start.row==_){M.merge($);break}}break}else if(_<=M.start.row)break}return f||(M=this.$addFoldLine(new s(this.$foldData,g))),this.$useWrapMode?this.$updateWrapData(M.start.row,M.start.row):this.$updateRowLengthCache(M.start.row,M.start.row),this.$modified=!0,this._signal("changeFold",{data:g,action:"add"}),g},this.addFolds=function(p){p.forEach(function(h){this.addFold(h)},this)},this.removeFold=function(p){var h=p.foldLine,d=h.start.row,f=h.end.row,g=this.$foldData,m=h.folds;if(m.length==1)g.splice(g.indexOf(h),1);else if(h.range.isEnd(p.end.row,p.end.column))m.pop(),h.end.row=m[m.length-1].end.row,h.end.column=m[m.length-1].end.column;else if(h.range.isStart(p.start.row,p.start.column))m.shift(),h.start.row=m[0].start.row,h.start.column=m[0].start.column;else if(p.sameRow)m.splice(m.indexOf(p),1);else{var w=h.split(p.start.row,p.start.column);m=w.folds,m.shift(),w.start.row=m[0].start.row,w.start.column=m[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(d,f):this.$updateRowLengthCache(d,f)),this.$modified=!0,this._signal("changeFold",{data:p,action:"remove"})},this.removeFolds=function(p){for(var h=[],d=0;d<p.length;d++)h.push(p[d]);h.forEach(function(f){this.removeFold(f)},this),this.$modified=!0},this.expandFold=function(p){this.removeFold(p),p.subFolds.forEach(function(h){p.restoreRange(h),this.addFold(h)},this),p.collapseChildren>0&&this.foldAll(p.start.row+1,p.end.row,p.collapseChildren-1),p.subFolds=[]},this.expandFolds=function(p){p.forEach(function(h){this.expandFold(h)},this)},this.unfold=function(p,h){var d,f;if(p==null)d=new o(0,0,this.getLength(),0),h==null&&(h=!0);else if(typeof p=="number")d=new o(p,0,p,this.getLine(p).length);else if("row"in p)d=o.fromPoints(p,p);else{if(Array.isArray(p))return f=[],p.forEach(function(m){f=f.concat(this.unfold(m))},this),f;d=p}f=this.getFoldsInRangeList(d);for(var g=f;f.length==1&&o.comparePoints(f[0].start,d.start)<0&&o.comparePoints(f[0].end,d.end)>0;)this.expandFolds(f),f=this.getFoldsInRangeList(d);if(h!=!1?this.removeFolds(f):this.expandFolds(f),g.length)return g},this.isRowFolded=function(p,h){return!!this.getFoldLine(p,h)},this.getRowFoldEnd=function(p,h){var d=this.getFoldLine(p,h);return d?d.end.row:p},this.getRowFoldStart=function(p,h){var d=this.getFoldLine(p,h);return d?d.start.row:p},this.getFoldDisplayLine=function(p,h,d,f,g){f==null&&(f=p.start.row),g==null&&(g=0),h==null&&(h=p.end.row),d==null&&(d=this.getLine(h).length);var m=this.doc,w="";return p.walk(function(_,E,y,x){if(!(E<f)){if(E==f){if(y<g)return;x=Math.max(g,x)}_!=null?w+=_:w+=m.getLine(E).substring(x,y)}},h,d),w},this.getDisplayLine=function(p,h,d,f){var g=this.getFoldLine(p);if(g)return this.getFoldDisplayLine(g,p,h,d,f);var m;return m=this.doc.getLine(p),m.substring(f||0,h||m.length)},this.$cloneFoldData=function(){var p=[];return p=this.$foldData.map(function(h){var d=h.folds.map(function(f){return f.clone()});return new s(p,d)}),p},this.toggleFold=function(p){var h=this.selection,d=h.getRange(),f,g;if(d.isEmpty()){var m=d.start;if(f=this.getFoldAt(m.row,m.column),f){this.expandFold(f);return}else(g=this.findMatchingBracket(m))?d.comparePoint(g)==1?d.end=g:(d.start=g,d.start.column++,d.end.column--):(g=this.findMatchingBracket({row:m.row,column:m.column+1}))?(d.comparePoint(g)==1?d.end=g:d.start=g,d.start.column++):d=this.getCommentFoldRange(m.row,m.column)||d}else{var w=this.getFoldsInRange(d);if(p&&w.length){this.expandFolds(w);return}else w.length==1&&(f=w[0])}if(f||(f=this.getFoldAt(d.start.row,d.start.column)),f&&f.range.toString()==d.toString()){this.expandFold(f);return}var _="...";if(!d.isMultiLine()){if(_=this.getTextRange(d),_.length<4)return;_=_.trim().substring(0,2)+".."}this.addFold(_,d)},this.getCommentFoldRange=function(p,h,d){var f=new a(this,p,h),g=f.getCurrentToken(),m=g&&g.type;if(g&&/^comment|string/.test(m)){m=m.match(/comment|string/)[0],m=="comment"&&(m+="|doc-start|\\.doc");var w=new RegExp(m),_=new o;if(d!=1){do g=f.stepBackward();while(g&&w.test(g.type));g=f.stepForward()}_.start.row=f.getCurrentTokenRow(),_.start.column=f.getCurrentTokenColumn()+g.value.length,f=new a(this,p,h);var E=this.getState(f.$row);if(d!=-1){var y=-1;do if(g=f.stepForward(),y==-1){var x=this.getState(f.$row);E.toString()!==x.toString()&&(y=f.$row)}else if(f.$row>y)break;while(g&&w.test(g.type));g=f.stepBackward()}else g=f.getCurrentToken();return _.end.row=f.getCurrentTokenRow(),_.end.column=f.getCurrentTokenColumn(),_}},this.foldAll=function(p,h,d,f){d==null&&(d=1e5);var g=this.foldWidgets;if(g){h=h||this.getLength(),p=p||0;for(var m=p;m<h;m++)if(g[m]==null&&(g[m]=this.getFoldWidget(m)),g[m]=="start"&&!(f&&!f(m))){var w=this.getFoldWidgetRange(m);w&&w.isMultiLine()&&w.end.row<=h&&w.start.row>=p&&(m=w.end.row,w.collapseChildren=d,this.addFold("...",w))}}},this.foldToLevel=function(p){for(this.foldAll();p-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var p=this;this.foldAll(null,null,null,function(h){for(var d=p.getTokens(h),f=0;f<d.length;f++){var g=d[f];if(!(g.type=="text"&&/^\s+$/.test(g.value)))return!!/comment/.test(g.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(p){if(!this.$foldStyles[p])throw new Error("invalid fold style: "+p+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=p){this.$foldStyle=p,p=="manual"&&this.unfold();var h=this.$foldMode;this.$setFolding(null),this.$setFolding(h)}},this.$setFolding=function(p){if(this.$foldMode!=p){if(this.$foldMode=p,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!p||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=p.getFoldWidget.bind(p,this,this.$foldStyle),this.getFoldWidgetRange=p.getFoldWidgetRange.bind(p,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(p,h){var d=this.foldWidgets;if(!d||h&&d[p])return{};for(var f=p-1,g;f>=0;){var m=d[f];if(m==null&&(m=d[f]=this.getFoldWidget(f)),m=="start"){var w=this.getFoldWidgetRange(f);if(g||(g=w),w&&w.end.row>=p)break}f--}return{range:f!==-1&&w,firstRange:g}},this.onFoldWidgetClick=function(p,h){h instanceof u&&(h=h.domEvent);var d={children:h.shiftKey,all:h.ctrlKey||h.metaKey,siblings:h.altKey},f=this.$toggleFoldWidget(p,d);if(!f){var g=h.target||h.srcElement;g&&/ace_fold-widget/.test(g.className)&&(g.className+=" ace_invalid")}},this.$toggleFoldWidget=function(p,h){if(this.getFoldWidget){var d=this.getFoldWidget(p),f=this.getLine(p),g=d==="end"?-1:1,m=this.getFoldAt(p,g===-1?0:f.length,g);if(m)return h.children||h.all?this.removeFold(m):this.expandFold(m),m;var w=this.getFoldWidgetRange(p,!0);if(w&&!w.isMultiLine()&&(m=this.getFoldAt(w.start.row,w.start.column,1),m&&w.isEqual(m.range)))return this.removeFold(m),m;if(h.siblings){var _=this.getParentFoldRangeData(p);if(_.range)var E=_.range.start.row+1,y=_.range.end.row;this.foldAll(E,y,h.all?1e4:0)}else h.children?(y=w?w.end.row:this.getLength(),this.foldAll(p+1,y,h.all?1e4:0)):w&&(h.all&&(w.collapseChildren=1e4),this.addFold("...",w));return w}},this.toggleFoldWidget=function(p){var h=this.selection.getCursor().row;h=this.getRowFoldStart(h);var d=this.$toggleFoldWidget(h,{});if(!d){var f=this.getParentFoldRangeData(h,!0);if(d=f.range||f.firstRange,d){h=d.start.row;var g=this.getFoldAt(h,this.getLine(h).length,1);g?this.removeFold(g):this.addFold("...",d)}}},this.updateFoldWidgets=function(p){var h=p.start.row,d=p.end.row-h;if(d===0)this.foldWidgets[h]=null;else if(p.action=="remove")this.foldWidgets.splice(h,d+1,null);else{var f=Array(d+1);f.unshift(h,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}},this.tokenizerUpdateFoldWidgets=function(p){var h=p.data;h.first!=h.last&&this.foldWidgets.length>h.first&&this.foldWidgets.splice(h.first,this.foldWidgets.length)}}i.Folding=l}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(n,i,r){var o=n("../token_iterator").TokenIterator,s=n("../range").Range;function c(){this.findMatchingBracket=function(a,u){if(a.column==0)return null;var l=u||this.getLine(a.row).charAt(a.column-1);if(l=="")return null;var p=l.match(/([\(\[\{])|([\)\]\}])/);return p?p[1]?this.$findClosingBracket(p[1],a):this.$findOpeningBracket(p[2],a):null},this.getBracketRange=function(a){var u=this.getLine(a.row),l=!0,p,h=u.charAt(a.column-1),d=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(d||(h=u.charAt(a.column),a={row:a.row,column:a.column+1},d=h&&h.match(/([\(\[\{])|([\)\]\}])/),l=!1),!d)return null;if(d[1]){var f=this.$findClosingBracket(d[1],a);if(!f)return null;p=s.fromPoints(a,f),l||(p.end.column++,p.start.column--),p.cursor=p.end}else{var f=this.$findOpeningBracket(d[2],a);if(!f)return null;p=s.fromPoints(f,a),l||(p.start.column++,p.end.column--),p.cursor=p.start}return p},this.getMatchingBracketRanges=function(a,u){var l=this.getLine(a.row),p=/([\(\[\{])|([\)\]\}])/,h=!u&&l.charAt(a.column-1),d=h&&h.match(p);if(d||(h=(u===void 0||u)&&l.charAt(a.column),a={row:a.row,column:a.column+1},d=h&&h.match(p)),!d)return null;var f=new s(a.row,a.column-1,a.row,a.column),g=d[1]?this.$findClosingBracket(d[1],a):this.$findOpeningBracket(d[2],a);if(!g)return[f];var m=new s(g.row,g.column,g.row,g.column+1);return[f,m]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,u,l){var p=this.$brackets[a],h=1,d=new o(this,u.row,u.column),f=d.getCurrentToken();if(f||(f=d.stepForward()),!!f){l||(l=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var g=u.column-d.getCurrentTokenColumn()-2,m=f.value;;){for(;g>=0;){var w=m.charAt(g);if(w==p){if(h-=1,h==0)return{row:d.getCurrentTokenRow(),column:g+d.getCurrentTokenColumn()}}else w==a&&(h+=1);g-=1}do f=d.stepBackward();while(f&&!l.test(f.type));if(f==null)break;m=f.value,g=m.length-1}return null}},this.$findClosingBracket=function(a,u,l){var p=this.$brackets[a],h=1,d=new o(this,u.row,u.column),f=d.getCurrentToken();if(f||(f=d.stepForward()),!!f){l||(l=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var g=u.column-d.getCurrentTokenColumn();;){for(var m=f.value,w=m.length;g<w;){var _=m.charAt(g);if(_==p){if(h-=1,h==0)return{row:d.getCurrentTokenRow(),column:g+d.getCurrentTokenColumn()}}else _==a&&(h+=1);g+=1}do f=d.stepForward();while(f&&!l.test(f.type));if(f==null)break;g=0}return null}},this.getMatchingTags=function(a){var u=new o(this,a.row,a.column),l=this.$findTagName(u);if(l){var p=u.stepBackward();return p.value==="<"?this.$findClosingTag(u,l):this.$findOpeningTag(u,l)}},this.$findTagName=function(a){var u=a.getCurrentToken(),l=!1,p=!1;if(u&&u.type.indexOf("tag-name")===-1)do p?u=a.stepBackward():u=a.stepForward(),u&&(u.value==="/>"?p=!0:u.type.indexOf("tag-name")!==-1&&(l=!0));while(u&&!l);return u},this.$findClosingTag=function(a,u){var l,p=u.value,h=u.value,d=0,f=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);u=a.stepForward();var g=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+u.value.length),m=!1;do{if(l=u,l.type.indexOf("tag-close")!==-1&&!m){var w=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);m=!0}if(u=a.stepForward(),u){if(u.value===">"&&!m){var w=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);m=!0}if(u.type.indexOf("tag-name")!==-1){if(p=u.value,h===p){if(l.value==="<")d++;else if(l.value==="</"&&(d--,d<0)){a.stepBackward();var _=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);u=a.stepForward();var E=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=a.stepForward()),u&&u.value===">")var y=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(h===p&&u.value==="/>"&&(d--,d<0))var _=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),E=_,y=E,w=new s(g.end.row,g.end.column,g.end.row,g.end.column+1)}}while(u&&d>=0);if(f&&w&&_&&y&&g&&E)return{openTag:new s(f.start.row,f.start.column,w.end.row,w.end.column),closeTag:new s(_.start.row,_.start.column,y.end.row,y.end.column),openTagName:g,closeTagName:E}},this.$findOpeningTag=function(a,u){var l=a.getCurrentToken(),p=u.value,h=0,d=a.getCurrentTokenRow(),f=a.getCurrentTokenColumn(),g=f+2,m=new s(d,f,d,g);a.stepForward();var w=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+u.value.length);if(u.type.indexOf("tag-close")===-1&&(u=a.stepForward()),!(!u||u.value!==">")){var _=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(u=l,d=a.getCurrentTokenRow(),f=a.getCurrentTokenColumn(),g=f+u.value.length,l=a.stepBackward(),u){if(u.type.indexOf("tag-name")!==-1){if(p===u.value)if(l.value==="<"){if(h++,h>0){var E=new s(d,f,d,g),y=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do u=a.stepForward();while(u&&u.value!==">");var x=new s(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else l.value==="</"&&h--}else if(u.value==="/>"){for(var v=0,S=l;S;){if(S.type.indexOf("tag-name")!==-1&&S.value===p){h--;break}else if(S.value==="<")break;S=a.stepBackward(),v++}for(var M=0;M<v;M++)a.stepForward()}}while(l&&h<=0);if(y&&x&&m&&_&&E&&w)return{openTag:new s(y.start.row,y.start.column,x.end.row,x.end.column),closeTag:new s(m.start.row,m.start.column,_.end.row,_.end.column),openTagName:E,closeTagName:w}}}}i.BracketMatch=c}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/line_widgets","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(n,i,r){var o=n("./lib/oop"),s=n("./lib/lang"),c=n("./bidihandler").BidiHandler,a=n("./config"),u=n("./lib/event_emitter").EventEmitter,l=n("./selection").Selection,p=n("./mode/text").Mode,h=n("./range").Range,d=n("./line_widgets").LineWidgets,f=n("./document").Document,g=n("./background_tokenizer").BackgroundTokenizer,m=n("./search_highlight").SearchHighlight,w=n("./undomanager").UndoManager,_=function(){function C(b,A){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++C.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new g(new p().getTokenizer(),this);var R=this;this.bgTokenizer.on("update",function(k){R._signal("tokenizerUpdate",k)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof b!="object"||!b.getLine)&&(b=new f(b)),this.setDocument(b),this.selection=new l(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new c(this),a.resetOptions(this),this.setMode(A),a._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}return C.prototype.$initOperationListeners=function(){var b=this;this.curOp=null,this.on("change",function(){b.curOp||(b.startOperation(),b.curOp.selectionBefore=b.$lastSel),b.curOp.docChanged=!0},!0),this.on("changeSelection",function(){b.curOp||(b.startOperation(),b.curOp.selectionBefore=b.$lastSel),b.curOp.selectionChanged=!0},!0),this.$operationResetTimer=s.delayedCall(this.endOperation.bind(this,!0))},C.prototype.startOperation=function(b){if(this.curOp){if(!b||this.curOp.command)return;this.prevOp=this.curOp}b||(b={}),this.$operationResetTimer.schedule(),this.curOp={command:b.command||{},args:b.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",b)},C.prototype.endOperation=function(b){if(this.curOp){if(b&&b.returnValue===!1){this.curOp=null,this._signal("endOperation",b);return}if(b==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;var A=this.selection.toJSON();this.curOp.selectionAfter=A,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(A),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",b)}},C.prototype.setDocument=function(b){this.doc&&this.doc.off("change",this.$onChange),this.doc=b,b.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},C.prototype.getDocument=function(){return this.doc},Object.defineProperty(C.prototype,"widgetManager",{get:function(){var b=new d(this);return this.widgetManager=b,this.$editor&&b.attach(this.$editor),b},set:function(b){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:b})},enumerable:!1,configurable:!0}),C.prototype.$resetRowCache=function(b){if(!b){this.$docRowCache=[],this.$screenRowCache=[];return}var A=this.$docRowCache.length,R=this.$getRowCacheIndex(this.$docRowCache,b)+1;A>R&&(this.$docRowCache.splice(R,A),this.$screenRowCache.splice(R,A))},C.prototype.$getRowCacheIndex=function(b,A){for(var R=0,k=b.length-1;R<=k;){var O=R+k>>1,N=b[O];if(A>N)R=O+1;else if(A<N)k=O-1;else return O}return R-1},C.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},C.prototype.onChangeFold=function(b){var A=b.data;this.$resetRowCache(A.start.row)},C.prototype.onChange=function(b){this.$modified=!0,this.$bidiHandler.onChange(b),this.$resetRowCache(b.start.row);var A=this.$updateInternalDataOnChange(b);!this.$fromUndo&&this.$undoManager&&(A&&A.length&&(this.$undoManager.add({action:"removeFolds",folds:A},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(b,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(b),this._signal("change",b)},C.prototype.onSelectionChange=function(){this._signal("changeSelection")},C.prototype.setValue=function(b){this.doc.setValue(b),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},C.fromJSON=function(b){typeof b=="string"&&(b=JSON.parse(b));var A=new w;A.$undoStack=b.history.undo,A.$redoStack=b.history.redo,A.mark=b.history.mark,A.$rev=b.history.rev;var R=new C(b.value);return b.folds.forEach(function(k){R.addFold("...",h.fromPoints(k.start,k.end))}),R.setAnnotations(b.annotations),R.setBreakpoints(b.breakpoints),R.setMode(b.mode),R.setScrollLeft(b.scrollLeft),R.setScrollTop(b.scrollTop),R.setUndoManager(A),R.selection.fromJSON(b.selection),R},C.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(b){return b.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},C.prototype.toString=function(){return this.doc.getValue()},C.prototype.getSelection=function(){return this.selection},C.prototype.getState=function(b){return this.bgTokenizer.getState(b)},C.prototype.getTokens=function(b){return this.bgTokenizer.getTokens(b)},C.prototype.getTokenAt=function(b,A){var R=this.bgTokenizer.getTokens(b),k,O=0;if(A==null){var N=R.length-1;O=this.getLine(b).length}else for(var N=0;N<R.length&&(O+=R[N].value.length,!(O>=A));N++);return k=R[N],k?(k.index=N,k.start=O-k.value.length,k):null},C.prototype.setUndoManager=function(b){if(this.$undoManager=b,this.$informUndoManager&&this.$informUndoManager.cancel(),b){var A=this;b.addSession(this),this.$syncInformUndoManager=function(){A.$informUndoManager.cancel(),A.mergeUndoDeltas=!1},this.$informUndoManager=s.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},C.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},C.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},C.prototype.getTabString=function(){return this.getUseSoftTabs()?s.stringRepeat(" ",this.getTabSize()):"	"},C.prototype.setUseSoftTabs=function(b){this.setOption("useSoftTabs",b)},C.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},C.prototype.setTabSize=function(b){this.setOption("tabSize",b)},C.prototype.getTabSize=function(){return this.$tabSize},C.prototype.isTabStop=function(b){return this.$useSoftTabs&&b.column%this.$tabSize===0},C.prototype.setNavigateWithinSoftTabs=function(b){this.setOption("navigateWithinSoftTabs",b)},C.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},C.prototype.setOverwrite=function(b){this.setOption("overwrite",b)},C.prototype.getOverwrite=function(){return this.$overwrite},C.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},C.prototype.addGutterDecoration=function(b,A){this.$decorations[b]||(this.$decorations[b]=""),this.$decorations[b]+=" "+A,this._signal("changeBreakpoint",{})},C.prototype.removeGutterDecoration=function(b,A){this.$decorations[b]=(this.$decorations[b]||"").replace(" "+A,""),this._signal("changeBreakpoint",{})},C.prototype.getBreakpoints=function(){return this.$breakpoints},C.prototype.setBreakpoints=function(b){this.$breakpoints=[];for(var A=0;A<b.length;A++)this.$breakpoints[b[A]]="ace_breakpoint";this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},C.prototype.setBreakpoint=function(b,A){A===void 0&&(A="ace_breakpoint"),A?this.$breakpoints[b]=A:delete this.$breakpoints[b],this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoint=function(b){delete this.$breakpoints[b],this._signal("changeBreakpoint",{})},C.prototype.addMarker=function(b,A,R,k){var O=this.$markerId++,N={range:b,type:R||"line",renderer:typeof R=="function"?R:null,clazz:A,inFront:!!k,id:O};return k?(this.$frontMarkers[O]=N,this._signal("changeFrontMarker")):(this.$backMarkers[O]=N,this._signal("changeBackMarker")),O},C.prototype.addDynamicMarker=function(b,A){if(b.update){var R=this.$markerId++;return b.id=R,b.inFront=!!A,A?(this.$frontMarkers[R]=b,this._signal("changeFrontMarker")):(this.$backMarkers[R]=b,this._signal("changeBackMarker")),b}},C.prototype.removeMarker=function(b){var A=this.$frontMarkers[b]||this.$backMarkers[b];if(A){var R=A.inFront?this.$frontMarkers:this.$backMarkers;delete R[b],this._signal(A.inFront?"changeFrontMarker":"changeBackMarker")}},C.prototype.getMarkers=function(b){return b?this.$frontMarkers:this.$backMarkers},C.prototype.highlight=function(b){if(!this.$searchHighlight){var A=new m(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(A)}this.$searchHighlight.setRegexp(b)},C.prototype.highlightLines=function(b,A,R,k){typeof A!="number"&&(R=A,A=b),R||(R="ace_step");var O=new h(b,0,A,1/0);return O.id=this.addMarker(O,R,"fullLine",k),O},C.prototype.setAnnotations=function(b){this.$annotations=b,this._signal("changeAnnotation",{})},C.prototype.getAnnotations=function(){return this.$annotations||[]},C.prototype.clearAnnotations=function(){this.setAnnotations([])},C.prototype.$detectNewLine=function(b){var A=b.match(/^.*?(\r?\n)/m);A?this.$autoNewLine=A[1]:this.$autoNewLine=`
`},C.prototype.getWordRange=function(b,A){var R=this.getLine(b),k=!1;if(A>0&&(k=!!R.charAt(A-1).match(this.tokenRe)),k||(k=!!R.charAt(A).match(this.tokenRe)),k)var O=this.tokenRe;else if(/^\s+$/.test(R.slice(A-1,A+1)))var O=/\s/;else var O=this.nonTokenRe;var N=A;if(N>0){do N--;while(N>=0&&R.charAt(N).match(O));N++}for(var W=A;W<R.length&&R.charAt(W).match(O);)W++;return new h(b,N,b,W)},C.prototype.getAWordRange=function(b,A){for(var R=this.getWordRange(b,A),k=this.getLine(R.end.row);k.charAt(R.end.column).match(/[ \t]/);)R.end.column+=1;return R},C.prototype.setNewLineMode=function(b){this.doc.setNewLineMode(b)},C.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},C.prototype.setUseWorker=function(b){this.setOption("useWorker",b)},C.prototype.getUseWorker=function(){return this.$useWorker},C.prototype.onReloadTokenizer=function(b){var A=b.data;this.bgTokenizer.start(A.first),this._signal("tokenizerUpdate",b)},C.prototype.setMode=function(b,A){if(b&&typeof b=="object"){if(b.getTokenizer)return this.$onChangeMode(b);var R=b,k=R.path}else k=b||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new p),this.$modes[k]&&!R){this.$onChangeMode(this.$modes[k]),A&&A();return}this.$modeId=k,a.loadModule(["mode",k],(function(O){if(this.$modeId!==k)return A&&A();this.$modes[k]&&!R?this.$onChangeMode(this.$modes[k]):O&&O.Mode&&(O=new O.Mode(R),R||(this.$modes[k]=O,O.$id=k),this.$onChangeMode(O)),A&&A()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},C.prototype.$onChangeMode=function(b,A){if(A||(this.$modeId=b.$id),this.$mode!==b){var R=this.$mode;this.$mode=b,this.$stopWorker(),this.$useWorker&&this.$startWorker();var k=b.getTokenizer();if(k.on!==void 0){var O=this.onReloadTokenizer.bind(this);k.on("update",O)}this.bgTokenizer.setTokenizer(k),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=b.tokenRe,this.nonTokenRe=b.nonTokenRe,A||(b.attachToSession&&b.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(b.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:R,mode:b}))}},C.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},C.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(b){a.warn("Could not load worker",b),this.$worker=null}},C.prototype.getMode=function(){return this.$mode},C.prototype.setScrollTop=function(b){this.$scrollTop===b||isNaN(b)||(this.$scrollTop=b,this._signal("changeScrollTop",b))},C.prototype.getScrollTop=function(){return this.$scrollTop},C.prototype.setScrollLeft=function(b){this.$scrollLeft===b||isNaN(b)||(this.$scrollLeft=b,this._signal("changeScrollLeft",b))},C.prototype.getScrollLeft=function(){return this.$scrollLeft},C.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},C.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var b=0;return this.lineWidgets.forEach(function(A){A&&A.screenWidth>b&&(b=A.screenWidth)}),this.lineWidgetWidth=b},C.prototype.$computeWidth=function(b){if(this.$modified||b){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var A=this.doc.getAllLines(),R=this.$rowLengthCache,k=0,O=0,N=this.$foldData[O],W=N?N.start.row:1/0,z=A.length,V=0;V<z;V++){if(V>W){if(V=N.end.row+1,V>=z)break;N=this.$foldData[O++],W=N?N.start.row:1/0}R[V]==null&&(R[V]=this.$getStringScreenWidth(A[V])[0]),R[V]>k&&(k=R[V])}this.screenWidth=k}},C.prototype.getLine=function(b){return this.doc.getLine(b)},C.prototype.getLines=function(b,A){return this.doc.getLines(b,A)},C.prototype.getLength=function(){return this.doc.getLength()},C.prototype.getTextRange=function(b){return this.doc.getTextRange(b||this.selection.getRange())},C.prototype.insert=function(b,A){return this.doc.insert(b,A)},C.prototype.remove=function(b){return this.doc.remove(b)},C.prototype.removeFullLines=function(b,A){return this.doc.removeFullLines(b,A)},C.prototype.undoChanges=function(b,A){if(b.length){this.$fromUndo=!0;for(var R=b.length-1;R!=-1;R--){var k=b[R];k.action=="insert"||k.action=="remove"?this.doc.revertDelta(k):k.folds&&this.addFolds(k.folds)}!A&&this.$undoSelect&&(b.selectionBefore?this.selection.fromJSON(b.selectionBefore):this.selection.setRange(this.$getUndoSelection(b,!0))),this.$fromUndo=!1}},C.prototype.redoChanges=function(b,A){if(b.length){this.$fromUndo=!0;for(var R=0;R<b.length;R++){var k=b[R];(k.action=="insert"||k.action=="remove")&&this.doc.$safeApplyDelta(k)}!A&&this.$undoSelect&&(b.selectionAfter?this.selection.fromJSON(b.selectionAfter):this.selection.setRange(this.$getUndoSelection(b,!1))),this.$fromUndo=!1}},C.prototype.setUndoSelect=function(b){this.$undoSelect=b},C.prototype.$getUndoSelection=function(b,A){function R(z){return A?z.action!=="insert":z.action==="insert"}for(var k,O,N=0;N<b.length;N++){var W=b[N];if(W.start){if(!k){R(W)?k=h.fromPoints(W.start,W.end):k=h.fromPoints(W.start,W.start);continue}R(W)?(O=W.start,k.compare(O.row,O.column)==-1&&k.setStart(O),O=W.end,k.compare(O.row,O.column)==1&&k.setEnd(O)):(O=W.start,k.compare(O.row,O.column)==-1&&(k=h.fromPoints(W.start,W.start)))}}return k},C.prototype.replace=function(b,A){return this.doc.replace(b,A)},C.prototype.moveText=function(b,A,R){var k=this.getTextRange(b),O=this.getFoldsInRange(b),N=h.fromPoints(A,A);if(!R){this.remove(b);var W=b.start.row-b.end.row,z=W?-b.end.column:b.start.column-b.end.column;z&&(N.start.row==b.end.row&&N.start.column>b.end.column&&(N.start.column+=z),N.end.row==b.end.row&&N.end.column>b.end.column&&(N.end.column+=z)),W&&N.start.row>=b.end.row&&(N.start.row+=W,N.end.row+=W)}if(N.end=this.insert(N.start,k),O.length){var V=b.start,U=N.start,W=U.row-V.row,z=U.column-V.column;this.addFolds(O.map(function(K){return K=K.clone(),K.start.row==V.row&&(K.start.column+=z),K.end.row==V.row&&(K.end.column+=z),K.start.row+=W,K.end.row+=W,K}))}return N},C.prototype.indentRows=function(b,A,R){R=R.replace(/\t/g,this.getTabString());for(var k=b;k<=A;k++)this.doc.insertInLine({row:k,column:0},R)},C.prototype.outdentRows=function(b){for(var A=b.collapseRows(),R=new h(0,0,0,0),k=this.getTabSize(),O=A.start.row;O<=A.end.row;++O){var N=this.getLine(O);R.start.row=O,R.end.row=O;for(var W=0;W<k&&N.charAt(W)==" ";++W);W<k&&N.charAt(W)=="	"?(R.start.column=W,R.end.column=W+1):(R.start.column=0,R.end.column=W),this.remove(R)}},C.prototype.$moveLines=function(b,A,R){if(b=this.getRowFoldStart(b),A=this.getRowFoldEnd(A),R<0){var k=this.getRowFoldStart(b+R);if(k<0)return 0;var O=k-b}else if(R>0){var k=this.getRowFoldEnd(A+R);if(k>this.doc.getLength()-1)return 0;var O=k-A}else{b=this.$clipRowToDocument(b),A=this.$clipRowToDocument(A);var O=A-b+1}var N=new h(b,0,A,Number.MAX_VALUE),W=this.getFoldsInRange(N).map(function(V){return V=V.clone(),V.start.row+=O,V.end.row+=O,V}),z=R==0?this.doc.getLines(b,A):this.doc.removeFullLines(b,A);return this.doc.insertFullLines(b+O,z),W.length&&this.addFolds(W),O},C.prototype.moveLinesUp=function(b,A){return this.$moveLines(b,A,-1)},C.prototype.moveLinesDown=function(b,A){return this.$moveLines(b,A,1)},C.prototype.duplicateLines=function(b,A){return this.$moveLines(b,A,0)},C.prototype.$clipRowToDocument=function(b){return Math.max(0,Math.min(b,this.doc.getLength()-1))},C.prototype.$clipColumnToRow=function(b,A){return A<0?0:Math.min(this.doc.getLine(b).length,A)},C.prototype.$clipPositionToDocument=function(b,A){if(A=Math.max(0,A),b<0)b=0,A=0;else{var R=this.doc.getLength();b>=R?(b=R-1,A=this.doc.getLine(R-1).length):A=Math.min(this.doc.getLine(b).length,A)}return{row:b,column:A}},C.prototype.$clipRangeToDocument=function(b){b.start.row<0?(b.start.row=0,b.start.column=0):b.start.column=this.$clipColumnToRow(b.start.row,b.start.column);var A=this.doc.getLength()-1;return b.end.row>A?(b.end.row=A,b.end.column=this.doc.getLine(A).length):b.end.column=this.$clipColumnToRow(b.end.row,b.end.column),b},C.prototype.setUseWrapMode=function(b){if(b!=this.$useWrapMode){if(this.$useWrapMode=b,this.$modified=!0,this.$resetRowCache(0),b){var A=this.getLength();this.$wrapData=Array(A),this.$updateWrapData(0,A-1)}this._signal("changeWrapMode")}},C.prototype.getUseWrapMode=function(){return this.$useWrapMode},C.prototype.setWrapLimitRange=function(b,A){(this.$wrapLimitRange.min!==b||this.$wrapLimitRange.max!==A)&&(this.$wrapLimitRange={min:b,max:A},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},C.prototype.adjustWrapLimit=function(b,A){var R=this.$wrapLimitRange;R.max<0&&(R={min:A,max:A});var k=this.$constrainWrapLimit(b,R.min,R.max);return k!=this.$wrapLimit&&k>1?(this.$wrapLimit=k,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},C.prototype.$constrainWrapLimit=function(b,A,R){return A&&(b=Math.max(A,b)),R&&(b=Math.min(R,b)),b},C.prototype.getWrapLimit=function(){return this.$wrapLimit},C.prototype.setWrapLimit=function(b){this.setWrapLimitRange(b,b)},C.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},C.prototype.$updateInternalDataOnChange=function(b){var A=this.$useWrapMode,R=b.action,k=b.start,O=b.end,N=k.row,W=O.row,z=W-N,V=null;if(this.$updating=!0,z!=0)if(R==="remove"){this[A?"$wrapData":"$rowLengthCache"].splice(N,z);var U=this.$foldData;V=this.getFoldsInRange(b),this.removeFolds(V);var H=this.getFoldLine(O.row),Y=0;if(H){H.addRemoveChars(O.row,O.column,k.column-O.column),H.shiftRow(-z);var K=this.getFoldLine(N);K&&K!==H&&(K.merge(H),H=K),Y=U.indexOf(H)+1}for(Y;Y<U.length;Y++){var H=U[Y];H.start.row>=O.row&&H.shiftRow(-z)}W=N}else{var P=Array(z);P.unshift(N,0);var D=A?this.$wrapData:this.$rowLengthCache;D.splice.apply(D,P);var U=this.$foldData,H=this.getFoldLine(N),Y=0;if(H){var L=H.range.compareInside(k.row,k.column);L==0?(H=H.split(k.row,k.column),H&&(H.shiftRow(z),H.addRemoveChars(W,0,O.column-k.column))):L==-1&&(H.addRemoveChars(N,0,O.column-k.column),H.shiftRow(z)),Y=U.indexOf(H)+1}for(Y;Y<U.length;Y++){var H=U[Y];H.start.row>=N&&H.shiftRow(z)}}else{z=Math.abs(b.start.column-b.end.column),R==="remove"&&(V=this.getFoldsInRange(b),this.removeFolds(V),z=-z);var H=this.getFoldLine(N);H&&H.addRemoveChars(N,k.column,z)}return A&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,A?this.$updateWrapData(N,W):this.$updateRowLengthCache(N,W),V},C.prototype.$updateRowLengthCache=function(b,A){this.$rowLengthCache[b]=null,this.$rowLengthCache[A]=null},C.prototype.$updateWrapData=function(b,A){var R=this.doc.getAllLines(),k=this.getTabSize(),O=this.$wrapData,N=this.$wrapLimit,W,z,V=b;for(A=Math.min(A,R.length-1);V<=A;)z=this.getFoldLine(V,z),z?(W=[],z.walk((function(U,H,Y,K){var P;if(U!=null){P=this.$getDisplayTokens(U,W.length),P[0]=x;for(var D=1;D<P.length;D++)P[D]=v}else P=this.$getDisplayTokens(R[H].substring(K,Y),W.length);W=W.concat(P)}).bind(this),z.end.row,R[z.end.row].length+1),O[z.start.row]=this.$computeWrapSplits(W,N,k),V=z.end.row+1):(W=this.$getDisplayTokens(R[V]),O[V]=this.$computeWrapSplits(W,N,k),V++)},C.prototype.$computeWrapSplits=function(b,A,R){if(b.length==0)return[];var k=[],O=b.length,N=0,W=0,z=this.$wrapAsCode,V=this.$indentedSoftWrap,U=A<=Math.max(2*R,8)||V===!1?0:Math.floor(A/2);function H(){var L=0;if(U===0)return L;if(V)for(var j=0;j<b.length;j++){var F=b[j];if(F==M)L+=1;else if(F==$)L+=R;else{if(F==T)continue;break}}return z&&V!==!1&&(L+=R),Math.min(L,U)}function Y(L){for(var j=L-N,F=N;F<L;F++){var Q=b[F];(Q===12||Q===2)&&(j-=1)}k.length||(K=H(),k.indent=K),W+=j,k.push(W),N=L}for(var K=0;O-N>A-K;){var P=N+A-K;if(b[P-1]>=M&&b[P]>=M){Y(P);continue}if(b[P]==x||b[P]==v){for(P;P!=N-1&&b[P]!=x;P--);if(P>N){Y(P);continue}for(P=N+A,P;P<b.length&&b[P]==v;P++);if(P==b.length)break;Y(P);continue}for(var D=Math.max(P-(A-(A>>2)),N-1);P>D&&b[P]<x;)P--;if(z){for(;P>D&&b[P]<x;)P--;for(;P>D&&b[P]==S;)P--}else for(;P>D&&b[P]<M;)P--;if(P>D){Y(++P);continue}P=N+A,b[P]==y&&P--,Y(P-K)}return k},C.prototype.$getDisplayTokens=function(b,A){var R=[],k;A=A||0;for(var O=0;O<b.length;O++){var N=b.charCodeAt(O);if(N==9){k=this.getScreenTabSize(R.length+A),R.push($);for(var W=1;W<k;W++)R.push(T)}else N==32?R.push(M):N>39&&N<48||N>57&&N<64?R.push(S):N>=4352&&I(N)?R.push(E,y):R.push(E)}return R},C.prototype.$getStringScreenWidth=function(b,A,R){if(A==0)return[0,0];A==null&&(A=1/0),R=R||0;var k,O;for(O=0;O<b.length&&(k=b.charCodeAt(O),k==9?R+=this.getScreenTabSize(R):k>=4352&&I(k)?R+=2:R+=1,!(R>A));O++);return[R,O]},C.prototype.getRowLength=function(b){var A=1;return this.lineWidgets&&(A+=this.lineWidgets[b]&&this.lineWidgets[b].rowCount||0),!this.$useWrapMode||!this.$wrapData[b]?A:this.$wrapData[b].length+A},C.prototype.getRowLineCount=function(b){return!this.$useWrapMode||!this.$wrapData[b]?1:this.$wrapData[b].length+1},C.prototype.getRowWrapIndent=function(b){if(this.$useWrapMode){var A=this.screenToDocumentPosition(b,Number.MAX_VALUE),R=this.$wrapData[A.row];return R.length&&R[0]<A.column?R.indent:0}else return 0},C.prototype.getScreenLastRowColumn=function(b){var A=this.screenToDocumentPosition(b,Number.MAX_VALUE);return this.documentToScreenColumn(A.row,A.column)},C.prototype.getDocumentLastRowColumn=function(b,A){var R=this.documentToScreenRow(b,A);return this.getScreenLastRowColumn(R)},C.prototype.getDocumentLastRowColumnPosition=function(b,A){var R=this.documentToScreenRow(b,A);return this.screenToDocumentPosition(R,Number.MAX_VALUE/10)},C.prototype.getRowSplitData=function(b){if(this.$useWrapMode)return this.$wrapData[b]},C.prototype.getScreenTabSize=function(b){return this.$tabSize-(b%this.$tabSize|0)},C.prototype.screenToDocumentRow=function(b,A){return this.screenToDocumentPosition(b,A).row},C.prototype.screenToDocumentColumn=function(b,A){return this.screenToDocumentPosition(b,A).column},C.prototype.screenToDocumentPosition=function(b,A,R){if(b<0)return{row:0,column:0};var k,O=0,N=0,W,z=0,V=0,U=this.$screenRowCache,H=this.$getRowCacheIndex(U,b),Y=U.length;if(Y&&H>=0)var z=U[H],O=this.$docRowCache[H],K=b>U[Y-1];else var K=!Y;for(var P=this.getLength()-1,D=this.getNextFoldLine(O),L=D?D.start.row:1/0;z<=b&&(V=this.getRowLength(O),!(z+V>b||O>=P));)z+=V,O++,O>L&&(O=D.end.row+1,D=this.getNextFoldLine(O,D),L=D?D.start.row:1/0),K&&(this.$docRowCache.push(O),this.$screenRowCache.push(z));if(D&&D.start.row<=O)k=this.getFoldDisplayLine(D),O=D.start.row;else{if(z+V<=b||O>P)return{row:P,column:this.getLine(P).length};k=this.getLine(O),D=null}var j=0,F=Math.floor(b-z);if(this.$useWrapMode){var Q=this.$wrapData[O];Q&&(W=Q[F],F>0&&Q.length&&(j=Q.indent,N=Q[F-1]||Q[Q.length-1],k=k.substring(N)))}return R!==void 0&&this.$bidiHandler.isBidiRow(z+F,O,F)&&(A=this.$bidiHandler.offsetToCol(R)),N+=this.$getStringScreenWidth(k,A-j)[1],this.$useWrapMode&&N>=W&&(N=W-1),D?D.idxToPosition(N):{row:O,column:N}},C.prototype.documentToScreenPosition=function(b,A){if(typeof A>"u")var R=this.$clipPositionToDocument(b.row,b.column);else R=this.$clipPositionToDocument(b,A);b=R.row,A=R.column;var k=0,O=null,N=null;N=this.getFoldAt(b,A,1),N&&(b=N.start.row,A=N.start.column);var W,z=0,V=this.$docRowCache,U=this.$getRowCacheIndex(V,b),H=V.length;if(H&&U>=0)var z=V[U],k=this.$screenRowCache[U],Y=b>V[H-1];else var Y=!H;for(var K=this.getNextFoldLine(z),P=K?K.start.row:1/0;z<b;){if(z>=P){if(W=K.end.row+1,W>b)break;K=this.getNextFoldLine(W,K),P=K?K.start.row:1/0}else W=z+1;k+=this.getRowLength(z),z=W,Y&&(this.$docRowCache.push(z),this.$screenRowCache.push(k))}var D="";K&&z>=P?(D=this.getFoldDisplayLine(K,b,A),O=K.start.row):(D=this.getLine(b).substring(0,A),O=b);var L=0;if(this.$useWrapMode){var j=this.$wrapData[O];if(j){for(var F=0;D.length>=j[F];)k++,F++;D=D.substring(j[F-1]||0,D.length),L=F>0?j.indent:0}}return this.lineWidgets&&this.lineWidgets[z]&&this.lineWidgets[z].rowsAbove&&(k+=this.lineWidgets[z].rowsAbove),{row:k,column:L+this.$getStringScreenWidth(D)[0]}},C.prototype.documentToScreenColumn=function(b,A){return this.documentToScreenPosition(b,A).column},C.prototype.documentToScreenRow=function(b,A){return this.documentToScreenPosition(b,A).row},C.prototype.getScreenLength=function(){var b=0,A=null;if(this.$useWrapMode)for(var O=this.$wrapData.length,N=0,k=0,A=this.$foldData[k++],W=A?A.start.row:1/0;N<O;){var z=this.$wrapData[N];b+=z?z.length+1:1,N++,N>W&&(N=A.end.row+1,A=this.$foldData[k++],W=A?A.start.row:1/0)}else{b=this.getLength();for(var R=this.$foldData,k=0;k<R.length;k++)A=R[k],b-=A.end.row-A.start.row}return this.lineWidgets&&(b+=this.$getWidgetScreenLength()),b},C.prototype.$setFontMetrics=function(b){this.$enableVarChar&&(this.$getStringScreenWidth=function(A,R,k){if(R===0)return[0,0];R||(R=1/0),k=k||0;var O,N;for(N=0;N<A.length&&(O=A.charAt(N),O==="	"?k+=this.getScreenTabSize(k):k+=b.getCharacterWidth(O),!(k>R));N++);return[k,N]})},C.prototype.getPrecedingCharacter=function(){var b=this.selection.getCursor();if(b.column===0)return b.row===0?"":this.doc.getNewLineCharacter();var A=this.getLine(b.row);return A[b.column-1]},C.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()},C}();_.$uid=0,_.prototype.$modes=a.$modes,_.prototype.getValue=_.prototype.toString,_.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},_.prototype.$overwrite=!1,_.prototype.$mode=null,_.prototype.$modeId=null,_.prototype.$scrollTop=0,_.prototype.$scrollLeft=0,_.prototype.$wrapLimit=80,_.prototype.$useWrapMode=!1,_.prototype.$wrapLimitRange={min:null,max:null},_.prototype.lineWidgets=null,_.prototype.isFullWidth=I,o.implement(_.prototype,u);var E=1,y=2,x=3,v=4,S=9,M=10,$=11,T=12;function I(C){return C<4352?!1:C>=4352&&C<=4447||C>=4515&&C<=4519||C>=4602&&C<=4607||C>=9001&&C<=9002||C>=11904&&C<=11929||C>=11931&&C<=12019||C>=12032&&C<=12245||C>=12272&&C<=12283||C>=12288&&C<=12350||C>=12353&&C<=12438||C>=12441&&C<=12543||C>=12549&&C<=12589||C>=12593&&C<=12686||C>=12688&&C<=12730||C>=12736&&C<=12771||C>=12784&&C<=12830||C>=12832&&C<=12871||C>=12880&&C<=13054||C>=13056&&C<=19903||C>=19968&&C<=42124||C>=42128&&C<=42182||C>=43360&&C<=43388||C>=44032&&C<=55203||C>=55216&&C<=55238||C>=55243&&C<=55291||C>=63744&&C<=64255||C>=65040&&C<=65049||C>=65072&&C<=65106||C>=65108&&C<=65126||C>=65128&&C<=65131||C>=65281&&C<=65376||C>=65504&&C<=65510}n("./edit_session/folding").Folding.call(_.prototype),n("./edit_session/bracket_match").BracketMatch.call(_.prototype),a.defineOptions(_.prototype,"session",{wrap:{set:function(C){if(!C||C=="off"?C=!1:C=="free"?C=!0:C=="printMargin"?C=-1:typeof C=="string"&&(C=parseInt(C,10)||!1),this.$wrap!=C)if(this.$wrap=C,!C)this.setUseWrapMode(!1);else{var b=typeof C=="number"?C:null;this.setWrapLimitRange(b,b),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(C){C=C=="auto"?this.$mode.type!="text":C!="text",C!=this.$wrapAsCode&&(this.$wrapAsCode=C,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(C){this.$useWorker=C,this.$stopWorker(),C&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(C){C=parseInt(C),C>0&&this.$tabSize!==C&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=C,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(C){this.setFoldStyle(C)},handlesSet:!0},overwrite:{set:function(C){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(C){this.doc.setNewLineMode(C)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(C){this.setMode(C)},get:function(){return this.$modeId},handlesSet:!0}}),i.EditSession=_}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(n,i,r){var o=n("./lib/lang"),s=n("./lib/oop"),c=n("./range").Range,a=function(){function l(){this.$options={}}return l.prototype.set=function(p){return s.mixin(this.$options,p),this},l.prototype.getOptions=function(){return o.copyObject(this.$options)},l.prototype.setOptions=function(p){this.$options=p},l.prototype.find=function(p){var h=this.$options,d=this.$matchIterator(p,h);if(!d)return!1;var f=null;return d.forEach(function(g,m,w,_){return f=new c(g,m,w,_),m==_&&h.start&&h.start.start&&h.skipCurrent!=!1&&f.isEqual(h.start)?(f=null,!1):!0}),f},l.prototype.findAll=function(p){var h=this.$options;if(!h.needle)return[];this.$assembleRegExp(h);var d=h.range,f=d?p.getLines(d.start.row,d.end.row):p.doc.getAllLines(),g=[],m=h.re;if(h.$isMultiLine){var w=m.length,_=f.length-w,E;e:for(var y=m.offset||0;y<=_;y++){for(var x=0;x<w;x++)if(f[y+x].search(m[x])==-1)continue e;var v=f[y],S=f[y+w-1],M=v.length-v.match(m[0])[0].length,$=S.match(m[w-1])[0].length;E&&E.end.row===y&&E.end.column>M||(g.push(E=new c(y,M,y+w-1,$)),w>2&&(y=y+w-2))}}else for(var T=0;T<f.length;T++)for(var I=o.getMatchOffsets(f[T],m),x=0;x<I.length;x++){var C=I[x];g.push(new c(T,C.offset,T,C.offset+C.length))}if(d){for(var b=d.start.column,A=d.end.column,T=0,x=g.length-1;T<x&&g[T].start.column<b&&g[T].start.row==0;)T++;for(var R=d.end.row-d.start.row;T<x&&g[x].end.column>A&&g[x].end.row==R;)x--;for(g=g.slice(T,x+1),T=0,x=g.length;T<x;T++)g[T].start.row+=d.start.row,g[T].end.row+=d.start.row}return g},l.prototype.replace=function(p,h){var d=this.$options,f=this.$assembleRegExp(d);if(d.$isMultiLine)return h;if(f){var g=f.exec(p);if(!g||g[0].length!=p.length)return null;if(d.regExp||(h=h.replace(/\$/g,"$$$$")),h=p.replace(f,h),d.preserveCase){h=h.split("");for(var m=Math.min(p.length,p.length);m--;){var w=p[m];w&&w.toLowerCase()!=w?h[m]=h[m].toUpperCase():h[m]=h[m].toLowerCase()}h=h.join("")}return h}},l.prototype.$assembleRegExp=function(p,h){if(p.needle instanceof RegExp)return p.re=p.needle;var d=p.needle;if(!p.needle)return p.re=!1;p.regExp||(d=o.escapeRegExp(d));var f=p.caseSensitive?"gm":"gmi";try{new RegExp(d,"u"),p.$supportsUnicodeFlag=!0,f+="u"}catch{p.$supportsUnicodeFlag=!1}if(p.wholeWord&&(d=u(d,p)),p.$isMultiLine=!h&&/[\n\r]/.test(d),p.$isMultiLine)return p.re=this.$assembleMultilineRegExp(d,f);try{var g=new RegExp(d,f)}catch{g=!1}return p.re=g},l.prototype.$assembleMultilineRegExp=function(p,h){for(var d=p.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),f=[],g=0;g<d.length;g++)try{f.push(new RegExp(d[g],h))}catch{return!1}return f},l.prototype.$matchIterator=function(p,h){var d=this.$assembleRegExp(h);if(!d)return!1;var f=h.backwards==!0,g=h.skipCurrent!=!1,m=d.unicode,w=h.range,_=h.start;_||(_=w?w[f?"end":"start"]:p.selection.getRange()),_.start&&(_=_[g!=f?"end":"start"]);var E=w?w.start.row:0,y=w?w.end.row:p.getLength()-1;if(f)var x=function(M){var $=_.row;if(!S($,_.column,M)){for($--;$>=E;$--)if(S($,Number.MAX_VALUE,M))return;if(h.wrap!=!1){for($=y,E=_.row;$>=E;$--)if(S($,Number.MAX_VALUE,M))return}}};else var x=function($){var T=_.row;if(!S(T,_.column,$)){for(T=T+1;T<=y;T++)if(S(T,0,$))return;if(h.wrap!=!1){for(T=E,y=_.row;T<=y;T++)if(S(T,0,$))return}}};if(h.$isMultiLine)var v=d.length,S=function(M,$,T){var I=f?M-v+1:M;if(!(I<0||I+v>p.getLength())){var C=p.getLine(I),b=C.search(d[0]);if(!(!f&&b<$||b===-1)){for(var A=1;A<v;A++)if(C=p.getLine(I+A),C.search(d[A])==-1)return;var R=C.match(d[v-1])[0].length;if(!(f&&R>$)&&T(I,b,I+v-1,R))return!0}}};else if(f)var S=function($,T,I){var C=p.getLine($),b=[],A,R=0;for(d.lastIndex=0;A=d.exec(C);){var k=A[0].length;if(R=A.index,!k){if(R>=C.length)break;d.lastIndex=R+=o.skipEmptyMatch(C,R,m)}if(A.index+k>T)break;b.push(A.index,k)}for(var O=b.length-1;O>=0;O-=2){var N=b[O-1],k=b[O];if(I($,N,$,N+k))return!0}};else var S=function($,T,I){var C=p.getLine($),b,A;for(d.lastIndex=T;A=d.exec(C);){var R=A[0].length;if(b=A.index,I($,b,$,b+R))return!0;if(!R&&(d.lastIndex=b+=o.skipEmptyMatch(C,b,m),b>=C.length))return!1}};return{forEach:x}},l}();function u(l,p){var h=o.supportsLookbehind();function d(w,_){_===void 0&&(_=!0);var E=h&&p.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return E.test(w)||p.regExp?h&&p.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var f=Array.from(l),g=f[0],m=f[f.length-1];return d(g)+l+d(m,!1)}i.Search=a}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,i,r){var o=this&&this.__extends||function(){var h=function(d,f){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var w in m)Object.prototype.hasOwnProperty.call(m,w)&&(g[w]=m[w])},h(d,f)};return function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");h(d,f);function g(){this.constructor=d}d.prototype=f===null?Object.create(f):(g.prototype=f.prototype,new g)}}(),s=n("../lib/keys"),c=n("../lib/useragent"),a=s.KEY_MODS,u=function(){function h(d,f){this.$init(d,f,!1)}return h.prototype.$init=function(d,f,g){this.platform=f||(c.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(d),this.$singleCommand=g},h.prototype.addCommand=function(d){this.commands[d.name]&&this.removeCommand(d),this.commands[d.name]=d,d.bindKey&&this._buildKeyHash(d)},h.prototype.removeCommand=function(d,f){var g=d&&(typeof d=="string"?d:d.name);d=this.commands[g],f||delete this.commands[g];var m=this.commandKeyBinding;for(var w in m){var _=m[w];if(_==d)delete m[w];else if(Array.isArray(_)){var E=_.indexOf(d);E!=-1&&(_.splice(E,1),_.length==1&&(m[w]=_[0]))}}},h.prototype.bindKey=function(d,f,g){if(typeof d=="object"&&d&&(g==null&&(g=d.position),d=d[this.platform]),!!d){if(typeof f=="function")return this.addCommand({exec:f,bindKey:d,name:f.name||d});d.split("|").forEach(function(m){var w="";if(m.indexOf(" ")!=-1){var _=m.split(/\s+/);m=_.pop(),_.forEach(function(x){var v=this.parseKeys(x),S=a[v.hashId]+v.key;w+=(w?" ":"")+S,this._addCommandToBinding(w,"chainKeys")},this),w+=" "}var E=this.parseKeys(m),y=a[E.hashId]+E.key;this._addCommandToBinding(w+y,f,g)},this)}},h.prototype._addCommandToBinding=function(d,f,g){var m=this.commandKeyBinding,w;if(!f)delete m[d];else if(!m[d]||this.$singleCommand)m[d]=f;else{Array.isArray(m[d])?(w=m[d].indexOf(f))!=-1&&m[d].splice(w,1):m[d]=[m[d]],typeof g!="number"&&(g=l(f));var _=m[d];for(w=0;w<_.length;w++){var E=_[w],y=l(E);if(y>g)break}_.splice(w,0,f)}},h.prototype.addCommands=function(d){d&&Object.keys(d).forEach(function(f){var g=d[f];if(g){if(typeof g=="string")return this.bindKey(g,f);typeof g=="function"&&(g={exec:g}),typeof g=="object"&&(g.name||(g.name=f),this.addCommand(g))}},this)},h.prototype.removeCommands=function(d){Object.keys(d).forEach(function(f){this.removeCommand(d[f])},this)},h.prototype.bindKeys=function(d){Object.keys(d).forEach(function(f){this.bindKey(f,d[f])},this)},h.prototype._buildKeyHash=function(d){this.bindKey(d.bindKey,d)},h.prototype.parseKeys=function(d){var f=d.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),g=f.pop(),m=s[g];if(s.FUNCTION_KEYS[m])g=s.FUNCTION_KEYS[m].toLowerCase();else if(f.length){if(f.length==1&&f[0]=="shift")return{key:g.toUpperCase(),hashId:-1}}else return{key:g,hashId:-1};for(var w=0,_=f.length;_--;){var E=s.KEY_MODS[f[_]];if(E==null)return typeof console<"u"&&console.error("invalid modifier "+f[_]+" in "+d),!1;w|=E}return{key:g,hashId:w}},h.prototype.findKeyCommand=function(d,f){var g=a[d]+f;return this.commandKeyBinding[g]},h.prototype.handleKeyboard=function(d,f,g,m){if(!(m<0)){var w=a[f]+g,_=this.commandKeyBinding[w];return d.$keyChain&&(d.$keyChain+=" "+w,_=this.commandKeyBinding[d.$keyChain]||_),_&&(_=="chainKeys"||_[_.length-1]=="chainKeys")?(d.$keyChain=d.$keyChain||w,{command:"null"}):(d.$keyChain&&((!f||f==4)&&g.length==1?d.$keyChain=d.$keyChain.slice(0,-w.length-1):(f==-1||m>0)&&(d.$keyChain="")),{command:_})}},h.prototype.getStatusText=function(d,f){return f.$keyChain||""},h}();function l(h){return typeof h=="object"&&h.bindKey&&h.bindKey.position||(h.isDefault?-100:0)}var p=function(h){o(d,h);function d(f,g){var m=h.call(this,f,g)||this;return m.$singleCommand=!0,m}return d}(u);p.call=function(h,d,f){u.prototype.$init.call(h,d,f,!0)},u.call=function(h,d,f){u.prototype.$init.call(h,d,f,!1)},i.HashHandler=p,i.MultiHashHandler=u}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(n,i,r){var o=this&&this.__extends||function(){var l=function(p,h){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(d[g]=f[g])},l(p,h)};return function(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");l(p,h);function d(){this.constructor=p}p.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}(),s=n("../lib/oop"),c=n("../keyboard/hash_handler").MultiHashHandler,a=n("../lib/event_emitter").EventEmitter,u=function(l){o(p,l);function p(h,d){var f=l.call(this,d,h)||this;return f.byName=f.commands,f.setDefaultHandler("exec",function(g){return g.args?g.command.exec(g.editor,g.args,g.event,!1):g.command.exec(g.editor,{},g.event,!0)}),f}return p.prototype.exec=function(h,d,f){if(Array.isArray(h)){for(var g=h.length;g--;)if(this.exec(h[g],d,f))return!0;return!1}if(typeof h=="string"&&(h=this.commands[h]),!this.canExecute(h,d))return!1;var m={editor:d,command:h,args:f};return m.returnValue=this._emit("exec",m),this._signal("afterExec",m),m.returnValue!==!1},p.prototype.canExecute=function(h,d){return typeof h=="string"&&(h=this.commands[h]),!(!h||d&&d.$readOnly&&!h.readOnly||this.$checkCommandState!=!1&&h.isAvailable&&!h.isAvailable(d))},p.prototype.toggleRecording=function(h){if(!this.$inReplay)return h&&h._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(d){this.macro.push([d.command,d.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},p.prototype.replay=function(h){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(h);try{this.$inReplay=!0,this.macro.forEach(function(d){typeof d=="string"?this.exec(d,h):this.exec(d[0],h,d[1])},this)}finally{this.$inReplay=!1}}},p.prototype.trimMacro=function(h){return h.map(function(d){return typeof d[0]!="string"&&(d[0]=d[0].name),d[1]||(d=d[0]),d})},p}(c);s.implement(u.prototype,a),i.CommandManager=u}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(n,i,r){var o=n("../lib/lang"),s=n("../config"),c=n("../range").Range;function a(l,p){return{win:l,mac:p}}i.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(l){s.loadModule("ace/ext/settings_menu",function(p){p.init(l),l.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(l){s.loadModule("ace/ext/error_marker",function(p){p.showErrorMarker(l,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(l){s.loadModule("ace/ext/error_marker",function(p){p.showErrorMarker(l,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(l){l.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(l){l.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(l,p){typeof p=="number"&&!isNaN(p)&&l.gotoLine(p),l.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(l){l.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(l){l.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(l){l.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(l){l.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(l){l.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(l){l.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(l){l.session.foldAll(),l.session.unfold(l.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(l){l.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(l){l.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(l){l.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(l){l.selection.isEmpty()?l.selection.selectWord():l.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(l){l.selection.isEmpty()?l.selection.selectWord():l.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(l){s.loadModule("ace/ext/searchbox",function(p){p.Search(l)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(l){l.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(l){l.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(l){l.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(l){l.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(l,p){l.navigateUp(p.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(l){l.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(l){l.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(l){l.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(l,p){l.navigateDown(p.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(l){l.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(l){l.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(l){l.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(l){l.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(l){l.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(l,p){l.navigateLeft(p.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(l){l.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(l){l.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(l){l.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(l){l.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(l){l.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(l,p){l.navigateRight(p.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(l){l.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(l){l.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(l){l.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(l){l.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(l){l.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(l){l.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(l){l.renderer.scrollBy(0,-2*l.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(l){l.renderer.scrollBy(0,2*l.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(l){l.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(l){l.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(l){l.commands.toggleRecording(l)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(l){l.commands.replay(l)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(l){l.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(l){l.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(l){l.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(l){},readOnly:!0},{name:"cut",description:"Cut",exec:function(l){var p=l.$copyWithEmptySelection&&l.selection.isEmpty(),h=p?l.selection.getLineRange():l.selection.getRange();l._emit("cut",h),h.isEmpty()||l.session.remove(h),l.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(l,p){l.$handlePaste(p)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(l){l.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(l){l.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(l){l.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(l){l.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(l){l.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(l){l.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(l){l.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(l){s.loadModule("ace/ext/searchbox",function(p){p.Search(l,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(l){l.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(l){l.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(l){l.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(l){l.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(l){l.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(l){l.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(l){l.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(l){l.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(l){if(l.selection.isEmpty())l.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(l){l.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(l){l.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(l){var p=l.selection.getRange();p.start.column=0,l.session.remove(p)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(l){var p=l.selection.getRange();p.end.column=Number.MAX_VALUE,l.session.remove(p)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(l){l.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(l){l.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(l){l.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(l){l.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(l){l.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(l){l.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(l,p){l.insert(p)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(l,p){l.insert(o.stringRepeat(p.text||"",p.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(l){l.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(l){l.transposeLetters()},multiSelectAction:function(l){l.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(l){l.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(l){l.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(l){l.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(l){var p=l.selection.getRange();p.start.column=p.end.column=0,p.end.row++,l.selection.setRange(p,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(l){l.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(l){for(var p=l.selection.isBackwards(),h=p?l.selection.getSelectionLead():l.selection.getSelectionAnchor(),d=p?l.selection.getSelectionAnchor():l.selection.getSelectionLead(),f=l.session.doc.getLine(h.row).length,g=l.session.doc.getTextRange(l.selection.getRange()),m=g.replace(/\n\s*/," ").length,w=l.session.doc.getLine(h.row),_=h.row+1;_<=d.row+1;_++){var E=o.stringTrimLeft(o.stringTrimRight(l.session.doc.getLine(_)));E.length!==0&&(E=" "+E),w+=E}d.row+1<l.session.doc.getLength()-1&&(w+=l.session.doc.getNewLineCharacter()),l.clearSelection(),l.session.doc.replace(new c(h.row,0,d.row+2,0),w),m>0?(l.selection.moveCursorTo(h.row,h.column),l.selection.selectTo(h.row,h.column+m)):(f=l.session.doc.getLine(h.row).length>f?f+1:f,l.selection.moveCursorTo(h.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(l){var p=l.session.doc.getLength()-1,h=l.session.doc.getLine(p).length,d=l.selection.rangeList.ranges,f=[];d.length<1&&(d=[l.selection.getRange()]);for(var g=0;g<d.length;g++)g==d.length-1&&(d[g].end.row===p&&d[g].end.column===h||f.push(new c(d[g].end.row,d[g].end.column,p,h))),g===0?d[g].start.row===0&&d[g].start.column===0||f.push(new c(0,0,d[g].start.row,d[g].start.column)):f.push(new c(d[g-1].end.row,d[g-1].end.column,d[g].start.row,d[g].start.column));l.exitMultiSelectMode(),l.clearSelection();for(var g=0;g<f.length;g++)l.selection.addRange(f[g],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(l){l.selection.clearSelection(),l.navigateLineEnd(),l.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(l){l.selection.clearSelection();var p=l.getCursorPosition();l.selection.moveTo(p.row-1,Number.MAX_VALUE),l.insert(`
`),p.row===0&&l.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(l){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),l.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(l){l.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(l){l.prompt({$type:"modes"})},readOnly:!0}];for(var u=1;u<9;u++)i.commands.push({name:"foldToLevel"+u,description:"Fold To Level "+u,level:u,exec:function(l){l.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(n,i,r){var o=n("../lib/keys"),s=n("../mouse/default_gutter_handler").GutterTooltip,c=function(){function u(l){this.editor=l,this.gutterLayer=l.renderer.$gutterLayer,this.element=l.renderer.$gutter,this.lines=l.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new s(this.editor)}return u.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},u.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},u.prototype.$onGutterKeyDown=function(l){if(this.annotationTooltip.isOpen){l.preventDefault(),l.keyCode===o.escape&&this.annotationTooltip.hideTooltip();return}if(l.target===this.element){if(l.keyCode!=o.enter)return;l.preventDefault();var p=this.editor.getCursorPosition().row;this.editor.isRowVisible(p)||this.editor.scrollToLine(p,!0,!0),setTimeout((function(){var h=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),d=this.$findNearestFoldWidget(h),f=this.$findNearestAnnotation(h);if(!(d===null&&f===null)){if(d===null&&f!==null){this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(d!==null&&f===null){this.activeRowIndex=d,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(f-h)<Math.abs(d-h)){this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=d,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(l),setTimeout((function(){this.editor._signal("gutterkeydown",new a(l,this))}).bind(this),10)},u.prototype.$handleGutterKeyboardInteraction=function(l){if(l.keyCode===o.tab){l.preventDefault();return}if(l.keyCode===o.escape){l.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(l.keyCode===o.up){switch(l.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(l.keyCode===o.down){switch(l.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(l.keyCode===o.left){l.preventDefault(),this.$switchLane("annotation");return}if(l.keyCode===o.right){l.preventDefault(),this.$switchLane("fold");return}if(l.keyCode===o.enter||l.keyCode===o.space){switch(l.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var p=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),l),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==p&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(p),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var h=this.lines.cells[this.activeRowIndex].element.childNodes[2],d=h.getBoundingClientRect(),f=this.annotationTooltip.getElement().style;f.left=d.right+"px",f.top=d.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},u.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},u.prototype.$isFoldWidgetVisible=function(l){var p=this.editor.isRowFullyVisible(this.$rowIndexToRow(l)),h=this.$getFoldWidget(l).style.display!=="none";return p&&h},u.prototype.$isAnnotationVisible=function(l){var p=this.editor.isRowFullyVisible(this.$rowIndexToRow(l)),h=this.$getAnnotation(l).style.display!=="none";return p&&h},u.prototype.$getFoldWidget=function(l){var p=this.lines.get(l),h=p.element;return h.childNodes[1]},u.prototype.$getAnnotation=function(l){var p=this.lines.get(l),h=p.element;return h.childNodes[2]},u.prototype.$findNearestFoldWidget=function(l){if(this.$isFoldWidgetVisible(l))return l;for(var p=0;l-p>0||l+p<this.lines.getLength()-1;){if(p++,l-p>=0&&this.$isFoldWidgetVisible(l-p))return l-p;if(l+p<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(l+p))return l+p}return null},u.prototype.$findNearestAnnotation=function(l){if(this.$isAnnotationVisible(l))return l;for(var p=0;l-p>0||l+p<this.lines.getLength()-1;){if(p++,l-p>=0&&this.$isAnnotationVisible(l-p))return l-p;if(l+p<=this.lines.getLength()-1&&this.$isAnnotationVisible(l+p))return l+p}return null},u.prototype.$focusFoldWidget=function(l){if(l!=null){var p=this.$getFoldWidget(l);p.classList.add(this.editor.renderer.keyboardFocusClassName),p.focus()}},u.prototype.$focusAnnotation=function(l){if(l!=null){var p=this.$getAnnotation(l);p.classList.add(this.editor.renderer.keyboardFocusClassName),p.focus()}},u.prototype.$blurFoldWidget=function(l){var p=this.$getFoldWidget(l);p.classList.remove(this.editor.renderer.keyboardFocusClassName),p.blur()},u.prototype.$blurAnnotation=function(l){var p=this.$getAnnotation(l);p.classList.remove(this.editor.renderer.keyboardFocusClassName),p.blur()},u.prototype.$moveFoldWidgetUp=function(){for(var l=this.activeRowIndex;l>0;)if(l--,this.$isFoldWidgetVisible(l)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=l,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveFoldWidgetDown=function(){for(var l=this.activeRowIndex;l<this.lines.getLength()-1;)if(l++,this.$isFoldWidgetVisible(l)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=l,this.$focusFoldWidget(this.activeRowIndex);return}},u.prototype.$moveAnnotationUp=function(){for(var l=this.activeRowIndex;l>0;)if(l--,this.$isAnnotationVisible(l)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=l,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$moveAnnotationDown=function(){for(var l=this.activeRowIndex;l<this.lines.getLength()-1;)if(l++,this.$isAnnotationVisible(l)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=l,this.$focusAnnotation(this.activeRowIndex);return}},u.prototype.$switchLane=function(l){switch(l){case"annotation":if(this.activeLane==="annotation")break;var p=this.$findNearestAnnotation(this.activeRowIndex);if(p==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=p,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var h=this.$findNearestFoldWidget(this.activeRowIndex);if(h==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=h,this.$focusFoldWidget(this.activeRowIndex);break}},u.prototype.$rowIndexToRow=function(l){var p=this.lines.get(l);return p?p.row:null},u.prototype.$rowToRowIndex=function(l){for(var p=0;p<this.lines.getLength();p++){var h=this.lines.get(p);if(h.row==l)return p}return null},u}();i.GutterKeyboardHandler=c;var a=function(){function u(l,p){this.gutterKeyboardHandler=p,this.domEvent=l}return u.prototype.getKey=function(){return o.keyCodeToString(this.domEvent.keyCode)},u.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},u.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},u.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},u}();i.GutterKeyboardEvent=a}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(n,i,r){var o=this&&this.__values||function(C){var b=typeof Symbol=="function"&&Symbol.iterator,A=b&&C[b],R=0;if(A)return A.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&R>=C.length&&(C=void 0),{value:C&&C[R++],done:!C}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},s=n("./lib/oop"),c=n("./lib/dom"),a=n("./lib/lang"),u=n("./lib/useragent"),l=n("./keyboard/textinput").TextInput,p=n("./mouse/mouse_handler").MouseHandler,h=n("./mouse/fold_handler").FoldHandler,d=n("./keyboard/keybinding").KeyBinding,f=n("./edit_session").EditSession,g=n("./search").Search,m=n("./range").Range,w=n("./lib/event_emitter").EventEmitter,_=n("./commands/command_manager").CommandManager,E=n("./commands/default_commands").commands,y=n("./config"),x=n("./token_iterator").TokenIterator,v=n("./keyboard/gutter_handler").GutterKeyboardHandler,S=n("./config").nls,M=n("./clipboard"),$=n("./lib/keys"),T=function(){function C(b,A,R){this.session,this.$toDestroy=[];var k=b.getContainerElement();this.container=k,this.renderer=b,this.id="editor"+ ++C.$uid,this.commands=new _(u.isMac?"mac":"win",E),typeof document=="object"&&(this.textInput=new l(b.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new p(this),new h(this)),this.keyBinding=new d(this),this.$search=new g().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(O,N){N._$emitInputEvent.schedule(31)}),this.setSession(A||R&&R.session||new f("")),y.resetOptions(this),R&&this.setOptions(R),y._signal("editor",this)}return C.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)},C.prototype.startOperation=function(b){this.session.startOperation(b)},C.prototype.endOperation=function(b){this.session.endOperation(b)},C.prototype.onStartOperation=function(b){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,b||(this.previousCommand=null)},C.prototype.onEndOperation=function(b){if(this.curOp&&this.session){if(b&&b.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var A=this.curOp.command,R=A&&A.scrollIntoView;if(R){switch(R){case"center-animate":R="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var k=this.selection.getRange(),O=this.renderer.layerConfig;(k.start.row>=O.lastRow||k.end.row<=O.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}R=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}},C.prototype.$historyTracker=function(b){if(this.$mergeUndoDeltas){var A=this.prevOp,R=this.$mergeableCommands,k=A.command&&b.command.name==A.command.name;if(b.command.name=="insertstring"){var O=b.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),k=k&&this.mergeNextCommand&&(!/\s/.test(O)||/\s/.test(A.args)),this.mergeNextCommand=!0}else k=k&&R.indexOf(b.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(k=!1),k?this.session.mergeUndoDeltas=!0:R.indexOf(b.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},C.prototype.setKeyboardHandler=function(b,A){if(b&&typeof b=="string"&&b!="ace"){this.$keybindingId=b;var R=this;y.loadModule(["keybinding",b],function(k){R.$keybindingId==b&&R.keyBinding.setKeyboardHandler(k&&k.handler),A&&A()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(b),A&&A()},C.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},C.prototype.setSession=function(b){if(this.session!=b){this.curOp&&this.endOperation(),this.curOp={};var A=this.session;if(A){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var R=this.session.getSelection();R.off("changeCursor",this.$onCursorChange),R.off("changeSelection",this.$onSelectionChange)}this.session=b,b?(this.$onDocumentChange=this.onDocumentChange.bind(this),b.on("change",this.$onDocumentChange),this.renderer.setSession(b),this.$onChangeMode=this.onChangeMode.bind(this),b.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),b.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),b.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),b.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),b.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),b.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=b.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(b)),this._signal("changeSession",{session:b,oldSession:A}),this.curOp=null,A&&A._signal("changeEditor",{oldEditor:this}),A&&(A.$editor=null),b&&b._signal("changeEditor",{editor:this}),b&&(b.$editor=this),b&&!b.destroyed&&b.bgTokenizer.scheduleStart()}},C.prototype.getSession=function(){return this.session},C.prototype.setValue=function(b,A){return this.session.doc.setValue(b),A?A==1?this.navigateFileEnd():A==-1&&this.navigateFileStart():this.selectAll(),b},C.prototype.getValue=function(){return this.session.getValue()},C.prototype.getSelection=function(){return this.selection},C.prototype.resize=function(b){this.renderer.onResize(b)},C.prototype.setTheme=function(b,A){this.renderer.setTheme(b,A)},C.prototype.getTheme=function(){return this.renderer.getTheme()},C.prototype.setStyle=function(b){this.renderer.setStyle(b)},C.prototype.unsetStyle=function(b){this.renderer.unsetStyle(b)},C.prototype.getFontSize=function(){return this.getOption("fontSize")||c.computedStyle(this.container).fontSize},C.prototype.setFontSize=function(b){this.setOption("fontSize",b)},C.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var b=this;this.$highlightPending=!0,setTimeout(function(){b.$highlightPending=!1;var A=b.session;if(!(!A||A.destroyed)){A.$bracketHighlight&&(A.$bracketHighlight.markerIds.forEach(function(H){A.removeMarker(H)}),A.$bracketHighlight=null);var R=b.getCursorPosition(),k=b.getKeyboardHandler(),O=k&&k.$getDirectionForHighlight&&k.$getDirectionForHighlight(b),N=A.getMatchingBracketRanges(R,O);if(!N){var W=new x(A,R.row,R.column),z=W.getCurrentToken();if(z&&/\b(?:tag-open|tag-name)/.test(z.type)){var V=A.getMatchingTags(R);V&&(N=[V.openTagName.isEmpty()?V.openTag:V.openTagName,V.closeTagName.isEmpty()?V.closeTag:V.closeTagName])}}if(!N&&A.$mode.getMatching&&(N=A.$mode.getMatching(b.session)),!N){b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(N)?N.length==1&&(U="ace_error_bracket"):N=[N],N.length==2&&(m.comparePoints(N[0].end,N[1].start)==0?N=[m.fromPoints(N[0].start,N[1].end)]:m.comparePoints(N[0].start,N[1].end)==0&&(N=[m.fromPoints(N[1].start,N[0].end)])),A.$bracketHighlight={ranges:N,markerIds:N.map(function(H){return A.addMarker(H,U,"text")})},b.getHighlightIndentGuides()&&b.renderer.$textLayer.$highlightIndentGuide()}},50)}},C.prototype.focus=function(){this.textInput.focus()},C.prototype.isFocused=function(){return this.textInput.isFocused()},C.prototype.blur=function(){this.textInput.blur()},C.prototype.onFocus=function(b){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",b))},C.prototype.onBlur=function(b){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",b))},C.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},C.prototype.onDocumentChange=function(b){var A=this.session.$useWrapMode,R=b.start.row==b.end.row?b.end.row:1/0;this.renderer.updateLines(b.start.row,R,A),this._signal("change",b),this.$cursorChange()},C.prototype.onTokenizerUpdate=function(b){var A=b.data;this.renderer.updateLines(A.first,A.last)},C.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},C.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},C.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},C.prototype.$updateHighlightActiveLine=function(){var b=this.getSession(),A;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(A=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(A=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(A=!1)),b.$highlightLineMarker&&!A)b.removeMarker(b.$highlightLineMarker.id),b.$highlightLineMarker=null;else if(!b.$highlightLineMarker&&A){var R=new m(A.row,A.column,A.row,1/0);R.id=b.addMarker(R,"ace_active-line","screenLine"),b.$highlightLineMarker=R}else A&&(b.$highlightLineMarker.start.row=A.row,b.$highlightLineMarker.end.row=A.row,b.$highlightLineMarker.start.column=A.column,b._signal("changeBackMarker"))},C.prototype.onSelectionChange=function(b){var A=this.session;if(A.$selectionMarker&&A.removeMarker(A.$selectionMarker),A.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var R=this.selection.getRange(),k=this.getSelectionStyle();A.$selectionMarker=A.addMarker(R,"ace_selection",k)}var O=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(O),this._signal("changeSelection")},C.prototype.$getSelectionHighLightRegexp=function(){var b=this.session,A=this.getSelectionRange();if(!(A.isEmpty()||A.isMultiLine())){var R=A.start.column,k=A.end.column,O=b.getLine(A.start.row),N=O.substring(R,k);if(!(N.length>5e3||!/[\w\d]/.test(N))){var W=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:N}),z=O.substring(R-1,k+1);if(W.test(z))return W}}},C.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},C.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},C.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},C.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},C.prototype.onChangeMode=function(b){this.renderer.updateText(),this._emit("changeMode",b)},C.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},C.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},C.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},C.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},C.prototype.getCopyText=function(){var b=this.getSelectedText(),A=this.session.doc.getNewLineCharacter(),R=!1;if(!b&&this.$copyWithEmptySelection){R=!0;for(var k=this.selection.getAllRanges(),O=0;O<k.length;O++){var N=k[O];O&&k[O-1].start.row==N.start.row||(b+=this.session.getLine(N.start.row)+A)}}var W={text:b};return this._signal("copy",W),M.lineMode=R?W.text:!1,W.text},C.prototype.onCopy=function(){this.commands.exec("copy",this)},C.prototype.onCut=function(){this.commands.exec("cut",this)},C.prototype.onPaste=function(b,A){var R={text:b,event:A};this.commands.exec("paste",this,R)},C.prototype.$handlePaste=function(b){typeof b=="string"&&(b={text:b}),this._signal("paste",b);var A=b.text,R=A===M.lineMode,k=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)R?k.insert({row:this.selection.lead.row,column:0},A):this.insert(A);else if(R)this.selection.rangeList.ranges.forEach(function(U){k.insert({row:U.start.row,column:0},A)});else{var O=A.split(/\r\n|\r|\n/),N=this.selection.rangeList.ranges,W=O.length==2&&(!O[0]||!O[1]);if(O.length!=N.length||W)return this.commands.exec("insertstring",this,A);for(var z=N.length;z--;){var V=N[z];V.isEmpty()||k.remove(V),k.insert(V.start,O[z])}}},C.prototype.execCommand=function(b,A){return this.commands.exec(b,this,A)},C.prototype.insert=function(b,A){var R=this.session,k=R.getMode(),O=this.getCursorPosition();if(this.getBehavioursEnabled()&&!A){var N=k.transformAction(R.getState(O.row),"insertion",this,R,b);N&&(b!==N.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),b=N.text)}if(b=="	"&&(b=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&b.indexOf(`
`)==-1){var W=m.fromPoints(O,O);W.end.column+=b.length,this.session.remove(W)}}else{var W=this.getSelectionRange();O=this.session.remove(W),this.clearSelection()}if(b==`
`||b==`\r
`){var H=R.getLine(O.row);if(O.column>H.search(/\S|$/)){var z=H.substr(O.column).search(/\S|$/);R.doc.removeInLine(O.row,O.column,O.column+z)}}this.clearSelection();var V=O.column,U=R.getState(O.row),H=R.getLine(O.row),Y=k.checkOutdent(U,H,b);if(R.insert(O,b),N&&N.selection&&(N.selection.length==2?this.selection.setSelectionRange(new m(O.row,V+N.selection[0],O.row,V+N.selection[1])):this.selection.setSelectionRange(new m(O.row+N.selection[0],N.selection[1],O.row+N.selection[2],N.selection[3]))),this.$enableAutoIndent){if(R.getDocument().isNewLine(b)){var K=k.getNextLineIndent(U,H.slice(0,O.column),R.getTabString());R.insert({row:O.row+1,column:0},K)}Y&&k.autoOutdent(U,R,O.row)}},C.prototype.autoIndent=function(){for(var b=this.session,A=b.getMode(),R=this.selection.isEmpty()?[new m(0,0,b.doc.getLength()-1,0)]:this.selection.getAllRanges(),k="",O="",N="",W=b.getTabString(),z=0;z<R.length;z++)for(var V=R[z].start.row,U=R[z].end.row,H=V;H<=U;H++){H>0&&(k=b.getState(H-1),O=b.getLine(H-1),N=A.getNextLineIndent(k,O,W));var Y=b.getLine(H),K=A.$getIndent(Y);if(N!==K){if(K.length>0){var P=new m(H,0,H,K.length);b.remove(P)}N.length>0&&b.insert({row:H,column:0},N)}A.autoOutdent(k,b,H)}},C.prototype.onTextInput=function(b,A){if(!A)return this.keyBinding.onTextInput(b);this.startOperation({command:{name:"insertstring"}});var R=this.applyComposition.bind(this,b,A);this.selection.rangeCount?this.forEachSelection(R):R(),this.endOperation()},C.prototype.applyComposition=function(b,A){if(A.extendLeft||A.extendRight){var R=this.selection.getRange();R.start.column-=A.extendLeft,R.end.column+=A.extendRight,R.start.column<0&&(R.start.row--,R.start.column+=this.session.getLine(R.start.row).length+1),this.selection.setRange(R),!b&&!R.isEmpty()&&this.remove()}if((b||!this.selection.isEmpty())&&this.insert(b,!0),A.restoreStart||A.restoreEnd){var R=this.selection.getRange();R.start.column-=A.restoreStart,R.end.column-=A.restoreEnd,this.selection.setRange(R)}},C.prototype.onCommandKey=function(b,A,R){return this.keyBinding.onCommandKey(b,A,R)},C.prototype.setOverwrite=function(b){this.session.setOverwrite(b)},C.prototype.getOverwrite=function(){return this.session.getOverwrite()},C.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},C.prototype.setScrollSpeed=function(b){this.setOption("scrollSpeed",b)},C.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},C.prototype.setDragDelay=function(b){this.setOption("dragDelay",b)},C.prototype.getDragDelay=function(){return this.getOption("dragDelay")},C.prototype.setSelectionStyle=function(b){this.setOption("selectionStyle",b)},C.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},C.prototype.setHighlightActiveLine=function(b){this.setOption("highlightActiveLine",b)},C.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},C.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},C.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},C.prototype.setHighlightSelectedWord=function(b){this.setOption("highlightSelectedWord",b)},C.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},C.prototype.setAnimatedScroll=function(b){this.renderer.setAnimatedScroll(b)},C.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},C.prototype.setShowInvisibles=function(b){this.renderer.setShowInvisibles(b)},C.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},C.prototype.setDisplayIndentGuides=function(b){this.renderer.setDisplayIndentGuides(b)},C.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},C.prototype.setHighlightIndentGuides=function(b){this.renderer.setHighlightIndentGuides(b)},C.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},C.prototype.setShowPrintMargin=function(b){this.renderer.setShowPrintMargin(b)},C.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},C.prototype.setPrintMarginColumn=function(b){this.renderer.setPrintMarginColumn(b)},C.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},C.prototype.setReadOnly=function(b){this.setOption("readOnly",b)},C.prototype.getReadOnly=function(){return this.getOption("readOnly")},C.prototype.setBehavioursEnabled=function(b){this.setOption("behavioursEnabled",b)},C.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},C.prototype.setWrapBehavioursEnabled=function(b){this.setOption("wrapBehavioursEnabled",b)},C.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},C.prototype.setShowFoldWidgets=function(b){this.setOption("showFoldWidgets",b)},C.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},C.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},C.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},C.prototype.remove=function(b){this.selection.isEmpty()&&(b=="left"?this.selection.selectLeft():this.selection.selectRight());var A=this.getSelectionRange();if(this.getBehavioursEnabled()){var R=this.session,k=R.getState(A.start.row),O=R.getMode().transformAction(k,"deletion",this,R,A);if(A.end.column===0){var N=R.getTextRange(A);if(N[N.length-1]==`
`){var W=R.getLine(A.end.row);/^\s+$/.test(W)&&(A.end.column=W.length)}}O&&(A=O)}this.session.remove(A),this.clearSelection()},C.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},C.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},C.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},C.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var b=this.getSelectionRange();b.start.column==b.end.column&&b.start.row==b.end.row&&(b.end.column=0,b.end.row++),this.session.remove(b),this.clearSelection()},C.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var b=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(b)},C.prototype.setGhostText=function(b,A){this.renderer.setGhostText(b,A)},C.prototype.removeGhostText=function(){this.renderer.removeGhostText()},C.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var b=this.getCursorPosition(),A=b.column;if(A!==0){var R=this.session.getLine(b.row),k,O;A<R.length?(k=R.charAt(A)+R.charAt(A-1),O=new m(b.row,A-1,b.row,A+1)):(k=R.charAt(A-1)+R.charAt(A-2),O=new m(b.row,A-2,b.row,A)),this.session.replace(O,k),this.session.selection.moveToPosition(O.end)}}},C.prototype.toLowerCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var A=this.getSelectionRange(),R=this.session.getTextRange(A);this.session.replace(A,R.toLowerCase()),this.selection.setSelectionRange(b)},C.prototype.toUpperCase=function(){var b=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var A=this.getSelectionRange(),R=this.session.getTextRange(A);this.session.replace(A,R.toUpperCase()),this.selection.setSelectionRange(b)},C.prototype.indent=function(){var b=this.session,A=this.getSelectionRange();if(A.start.row<A.end.row){var R=this.$getSelectedRows();b.indentRows(R.first,R.last,"	");return}else if(A.start.column<A.end.column){var k=b.getTextRange(A);if(!/^\s+$/.test(k)){var R=this.$getSelectedRows();b.indentRows(R.first,R.last,"	");return}}var O=b.getLine(A.start.row),N=A.start,W=b.getTabSize(),z=b.documentToScreenColumn(N.row,N.column);if(this.session.getUseSoftTabs())var V=W-z%W,U=a.stringRepeat(" ",V);else{for(var V=z%W;O[A.start.column-1]==" "&&V;)A.start.column--,V--;this.selection.setSelectionRange(A),U="	"}return this.insert(U)},C.prototype.blockIndent=function(){var b=this.$getSelectedRows();this.session.indentRows(b.first,b.last,"	")},C.prototype.blockOutdent=function(){var b=this.session.getSelection();this.session.outdentRows(b.getRange())},C.prototype.sortLines=function(){for(var b=this.$getSelectedRows(),A=this.session,R=[],k=b.first;k<=b.last;k++)R.push(A.getLine(k));R.sort(function(W,z){return W.toLowerCase()<z.toLowerCase()?-1:W.toLowerCase()>z.toLowerCase()?1:0});for(var O=new m(0,0,0,0),k=b.first;k<=b.last;k++){var N=A.getLine(k);O.start.row=k,O.end.row=k,O.end.column=N.length,A.replace(O,R[k-b.first])}},C.prototype.toggleCommentLines=function(){var b=this.session.getState(this.getCursorPosition().row),A=this.$getSelectedRows();this.session.getMode().toggleCommentLines(b,this.session,A.first,A.last)},C.prototype.toggleBlockComment=function(){var b=this.getCursorPosition(),A=this.session.getState(b.row),R=this.getSelectionRange();this.session.getMode().toggleBlockComment(A,this.session,R,b)},C.prototype.getNumberAt=function(b,A){var R=/[\-]?[0-9]+(?:\.[0-9]+)?/g;R.lastIndex=0;for(var k=this.session.getLine(b);R.lastIndex<A;){var O=R.exec(k);if(O.index<=A&&O.index+O[0].length>=A){var N={value:O[0],start:O.index,end:O.index+O[0].length};return N}}return null},C.prototype.modifyNumber=function(b){var A=this.selection.getCursor().row,R=this.selection.getCursor().column,k=new m(A,R-1,A,R),O=this.session.getTextRange(k);if(!isNaN(parseFloat(O))&&isFinite(O)){var N=this.getNumberAt(A,R);if(N){var W=N.value.indexOf(".")>=0?N.start+N.value.indexOf(".")+1:N.end,z=N.start+N.value.length-W,V=parseFloat(N.value);V*=Math.pow(10,z),W!==N.end&&R<W?b*=Math.pow(10,N.end-R-1):b*=Math.pow(10,N.end-R),V+=b,V/=Math.pow(10,z);var U=V.toFixed(z),H=new m(A,N.start,A,N.end);this.session.replace(H,U),this.moveCursorTo(A,Math.max(N.start+1,R+U.length-N.value.length))}}else this.toggleWord()},C.prototype.toggleWord=function(){var b=this.selection.getCursor().row,A=this.selection.getCursor().column;this.selection.selectWord();var R=this.getSelectedText(),k=this.selection.getWordRange().start.column,O=R.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),N=A-k-1;N<0&&(N=0);var W=0,z=0,V=this;R.match(/[A-Za-z0-9_]+/)&&O.forEach(function(F,Q){z=W+F.length,N>=W&&N<=z&&(R=F,V.selection.clearSelection(),V.moveCursorTo(b,W+k),V.selection.selectTo(b,z+k)),W=z});for(var U=this.$toggleWordPairs,H,Y=0;Y<U.length;Y++)for(var K=U[Y],P=0;P<=1;P++){var D=+!P,L=R.match(new RegExp("^\\s?_?("+a.escapeRegExp(K[P])+")\\s?$","i"));if(L){var j=R.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(L[1])+")($|\\s)","g"));j&&(H=R.replace(new RegExp(a.escapeRegExp(K[P]),"i"),function(F){var Q=K[D];return F.toUpperCase()==F?Q=Q.toUpperCase():F.charAt(0).toUpperCase()==F.charAt(0)&&(Q=Q.substr(0,0)+K[D].charAt(0).toUpperCase()+Q.substr(1)),Q}),this.insert(H),H="")}}},C.prototype.findLinkAt=function(b,A){var R,k,O=this.session.getLine(b),N=O.split(/((?:https?|ftp):\/\/[\S]+)/),W=A;W<0&&(W=0);var z=0,V=0,U;try{for(var H=o(N),Y=H.next();!Y.done;Y=H.next()){var K=Y.value;if(V=z+K.length,W>=z&&W<=V&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}z=V}}catch(P){R={error:P}}finally{try{Y&&!Y.done&&(k=H.return)&&k.call(H)}finally{if(R)throw R.error}}return U},C.prototype.openLink=function(){var b=this.selection.getCursor(),A=this.findLinkAt(b.row,b.column);return A&&window.open(A,"_blank"),A!=null},C.prototype.removeLines=function(){var b=this.$getSelectedRows();this.session.removeFullLines(b.first,b.last),this.clearSelection()},C.prototype.duplicateSelection=function(){var b=this.selection,A=this.session,R=b.getRange(),k=b.isBackwards();if(R.isEmpty()){var O=R.start.row;A.duplicateLines(O,O)}else{var N=k?R.start:R.end,W=A.insert(N,A.getTextRange(R));R.start=N,R.end=W,b.setSelectionRange(R,k)}},C.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},C.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},C.prototype.moveText=function(b,A,R){return this.session.moveText(b,A,R)},C.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},C.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},C.prototype.$moveLines=function(b,A){var R,k,O=this.selection;if(!O.inMultiSelectMode||this.inVirtualSelectionMode){var N=O.toOrientedRange();R=this.$getSelectedRows(N),k=this.session.$moveLines(R.first,R.last,A?0:b),A&&b==-1&&(k=0),N.moveBy(k,0),O.fromOrientedRange(N)}else{var W=O.rangeList.ranges;O.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var z=0,V=0,U=W.length,H=0;H<U;H++){var Y=H;W[H].moveBy(z,0),R=this.$getSelectedRows(W[H]);for(var K=R.first,P=R.last;++H<U;){V&&W[H].moveBy(V,0);var D=this.$getSelectedRows(W[H]);if(A&&D.first!=P)break;if(!A&&D.first>P+1)break;P=D.last}for(H--,z=this.session.$moveLines(K,P,A?0:b),A&&b==-1&&(Y=H+1);Y<=H;)W[Y].moveBy(z,0),Y++;A||(z=0),V+=z}O.fromOrientedRange(O.ranges[0]),O.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},C.prototype.$getSelectedRows=function(b){return b=(b||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(b.start.row),last:this.session.getRowFoldEnd(b.end.row)}},C.prototype.onCompositionStart=function(b){this.renderer.showComposition(b)},C.prototype.onCompositionUpdate=function(b){this.renderer.setCompositionText(b)},C.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},C.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},C.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},C.prototype.isRowVisible=function(b){return b>=this.getFirstVisibleRow()&&b<=this.getLastVisibleRow()},C.prototype.isRowFullyVisible=function(b){return b>=this.renderer.getFirstFullyVisibleRow()&&b<=this.renderer.getLastFullyVisibleRow()},C.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},C.prototype.$moveByPage=function(b,A){var R=this.renderer,k=this.renderer.layerConfig,O=b*Math.floor(k.height/k.lineHeight);A===!0?this.selection.$moveSelection(function(){this.moveCursorBy(O,0)}):A===!1&&(this.selection.moveCursorBy(O,0),this.selection.clearSelection());var N=R.scrollTop;R.scrollBy(0,O*k.lineHeight),A!=null&&R.scrollCursorIntoView(null,.5),R.animateScrolling(N)},C.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},C.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},C.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},C.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},C.prototype.scrollPageDown=function(){this.$moveByPage(1)},C.prototype.scrollPageUp=function(){this.$moveByPage(-1)},C.prototype.scrollToRow=function(b){this.renderer.scrollToRow(b)},C.prototype.scrollToLine=function(b,A,R,k){this.renderer.scrollToLine(b,A,R,k)},C.prototype.centerSelection=function(){var b=this.getSelectionRange(),A={row:Math.floor(b.start.row+(b.end.row-b.start.row)/2),column:Math.floor(b.start.column+(b.end.column-b.start.column)/2)};this.renderer.alignCursor(A,.5)},C.prototype.getCursorPosition=function(){return this.selection.getCursor()},C.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},C.prototype.getSelectionRange=function(){return this.selection.getRange()},C.prototype.selectAll=function(){this.selection.selectAll()},C.prototype.clearSelection=function(){this.selection.clearSelection()},C.prototype.moveCursorTo=function(b,A){this.selection.moveCursorTo(b,A)},C.prototype.moveCursorToPosition=function(b){this.selection.moveCursorToPosition(b)},C.prototype.jumpToMatching=function(b,A){var R=this.getCursorPosition(),k=new x(this.session,R.row,R.column),O=k.getCurrentToken(),N=0;O&&O.type.indexOf("tag-name")!==-1&&(O=k.stepBackward());var W=O||k.stepForward();if(W){var z,V=!1,U={},H=R.column-W.start,Y,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(W.value.match(/[{}()\[\]]/g)){for(;H<W.value.length&&!V;H++)if(K[W.value[H]])switch(Y=K[W.value[H]]+"."+W.type.replace("rparen","lparen"),isNaN(U[Y])&&(U[Y]=0),W.value[H]){case"(":case"[":case"{":U[Y]++;break;case")":case"]":case"}":U[Y]--,U[Y]===-1&&(z="bracket",V=!0);break}}else W.type.indexOf("tag-name")!==-1&&(isNaN(U[W.value])&&(U[W.value]=0),O.value==="<"&&N>1?U[W.value]++:O.value==="</"&&U[W.value]--,U[W.value]===-1&&(z="tag",V=!0));V||(O=W,N++,W=k.stepForward(),H=0)}while(W&&!V);if(z){var P,D;if(z==="bracket")P=this.session.getBracketRange(R),P||(P=new m(k.getCurrentTokenRow(),k.getCurrentTokenColumn()+H-1,k.getCurrentTokenRow(),k.getCurrentTokenColumn()+H-1),D=P.start,(A||D.row===R.row&&Math.abs(D.column-R.column)<2)&&(P=this.session.getBracketRange(D)));else if(z==="tag"){if(!W||W.type.indexOf("tag-name")===-1)return;if(P=new m(k.getCurrentTokenRow(),k.getCurrentTokenColumn()-2,k.getCurrentTokenRow(),k.getCurrentTokenColumn()-2),P.compare(R.row,R.column)===0){var L=this.session.getMatchingTags(R);L&&(L.openTag.contains(R.row,R.column)?(P=L.closeTag,D=P.start):(P=L.openTag,L.closeTag.start.row===R.row&&L.closeTag.start.column===R.column?D=P.end:D=P.start))}D=D||P.start}D=P&&P.cursor||D,D&&(b?P&&A?this.selection.setRange(P):P&&P.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(D.row,D.column):this.selection.moveTo(D.row,D.column))}}},C.prototype.gotoLine=function(b,A,R){this.selection.clearSelection(),this.session.unfold({row:b-1,column:A||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(b-1,A||0),this.isRowFullyVisible(b-1)||this.scrollToLine(b-1,!0,R)},C.prototype.navigateTo=function(b,A){this.selection.moveTo(b,A)},C.prototype.navigateUp=function(b){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var A=this.selection.anchor.getPosition();return this.moveCursorToPosition(A)}this.selection.clearSelection(),this.selection.moveCursorBy(-b||-1,0)},C.prototype.navigateDown=function(b){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var A=this.selection.anchor.getPosition();return this.moveCursorToPosition(A)}this.selection.clearSelection(),this.selection.moveCursorBy(b||1,0)},C.prototype.navigateLeft=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorLeft();else{var A=this.getSelectionRange().start;this.moveCursorToPosition(A)}this.clearSelection()},C.prototype.navigateRight=function(b){if(this.selection.isEmpty())for(b=b||1;b--;)this.selection.moveCursorRight();else{var A=this.getSelectionRange().end;this.moveCursorToPosition(A)}this.clearSelection()},C.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},C.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},C.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},C.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},C.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},C.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},C.prototype.replace=function(b,A){A&&this.$search.set(A);var R=this.$search.find(this.session),k=0;return R&&(this.$tryReplace(R,b)&&(k=1),this.selection.setSelectionRange(R),this.renderer.scrollSelectionIntoView(R.start,R.end)),k},C.prototype.replaceAll=function(b,A){A&&this.$search.set(A);var R=this.$search.findAll(this.session),k=0;if(!R.length)return k;var O=this.getSelectionRange();this.selection.moveTo(0,0);for(var N=R.length-1;N>=0;--N)this.$tryReplace(R[N],b)&&k++;return this.selection.setSelectionRange(O),k},C.prototype.$tryReplace=function(b,A){var R=this.session.getTextRange(b);return A=this.$search.replace(R,A),A!==null?(b.end=this.session.replace(b,A),b):null},C.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},C.prototype.find=function(b,A,R){A||(A={}),typeof b=="string"||b instanceof RegExp?A.needle=b:typeof b=="object"&&s.mixin(A,b);var k=this.selection.getRange();A.needle==null&&(b=this.session.getTextRange(k)||this.$search.$options.needle,b||(k=this.session.getWordRange(k.start.row,k.start.column),b=this.session.getTextRange(k)),this.$search.set({needle:b})),this.$search.set(A),A.start||this.$search.set({start:k});var O=this.$search.find(this.session);if(A.preventScroll)return O;if(O)return this.revealRange(O,R),O;A.backwards?k.start=k.end:k.end=k.start,this.selection.setRange(k)},C.prototype.findNext=function(b,A){this.find({skipCurrent:!0,backwards:!1},b,A)},C.prototype.findPrevious=function(b,A){this.find(b,{skipCurrent:!0,backwards:!0},A)},C.prototype.revealRange=function(b,A){this.session.unfold(b),this.selection.setSelectionRange(b);var R=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(b.start,b.end,.5),A!==!1&&this.renderer.animateScrolling(R)},C.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},C.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},C.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(b){b.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},C.prototype.setAutoScrollEditorIntoView=function(b){if(b){var A,R=this,k=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var O=this.$scrollAnchor;O.style.cssText="position:absolute",this.container.insertBefore(O,this.container.firstChild);var N=this.on("changeSelection",function(){k=!0}),W=this.renderer.on("beforeRender",function(){k&&(A=R.renderer.container.getBoundingClientRect())}),z=this.renderer.on("afterRender",function(){if(k&&A&&(R.isFocused()||R.searchBox&&R.searchBox.isFocused())){var V=R.renderer,U=V.$cursorLayer.$pixelPos,H=V.layerConfig,Y=U.top-H.offset;U.top>=0&&Y+A.top<0?k=!0:U.top<H.height&&U.top+A.top+H.lineHeight>window.innerHeight?k=!1:k=null,k!=null&&(O.style.top=Y+"px",O.style.left=U.left+"px",O.style.height=H.lineHeight+"px",O.scrollIntoView(k)),k=A=null}});this.setAutoScrollEditorIntoView=function(V){V||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",N),this.renderer.off("afterRender",z),this.renderer.off("beforeRender",W))}}},C.prototype.$resetCursorStyle=function(){var b=this.$cursorStyle||"ace",A=this.renderer.$cursorLayer;A&&(A.setSmoothBlinking(/smooth/.test(b)),A.isBlinking=!this.$readOnly&&b!="wide",c.setCssClass(A.element,"ace_slim-cursors",/slim/.test(b)))},C.prototype.prompt=function(b,A,R){var k=this;y.loadModule("ace/ext/prompt",function(O){O.prompt(k,b,A,R)})},C}();T.$uid=0,T.prototype.curOp=null,T.prototype.prevOp={},T.prototype.$mergeableCommands=["backspace","del","insertstring"],T.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],s.implement(T.prototype,w),y.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(C){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:C})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(C){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(C){this.textInput.setReadOnly(C),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(C){this.textInput.setCopyWithEmptySelection(C)},initialValue:!1},cursorStyle:{set:function(C){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(C){this.setAutoScrollEditorIntoView(C)}},keyboardHandler:{set:function(C){this.setKeyboardHandler(C)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(C){this.session.setValue(C)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(C){this.setSession(C)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(C){this.renderer.$gutterLayer.setShowLineNumbers(C),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),C&&this.$relativeLineNumbers?I.attach(this):I.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(C){this.$showLineNumbers&&C?I.attach(this):I.detach(this)}},placeholder:{set:function(C){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var b=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(b&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),c.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!b&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),c.addCssClass(this.container,"ace_hasPlaceholder");var A=c.createElement("div");A.className="ace_placeholder",A.textContent=this.$placeholder||"",this.renderer.placeholderNode=A,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!b&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(C){var b={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(k){k.blur(),k.renderer.scroller.focus()},readOnly:!0},A=function(k){if(k.target==this.renderer.scroller&&k.keyCode===$.enter){k.preventDefault();var O=this.getCursorPosition().row;this.isRowVisible(O)||this.scrollToLine(O,!0,!0),this.focus()}},R;C?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(u.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",S("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",S("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",A.bind(this)),this.commands.addCommand(b),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",S("editor.gutter.aria-roledescription","editor gutter")),this.renderer.$gutter.setAttribute("aria-label",S("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),R||(R=new v(this)),R.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",A.bind(this)),this.commands.removeCommand(b),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),R&&R.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(C){this.$textInputAriaLabel=C},initialValue:""},enableMobileMenu:{set:function(C){this.$enableMobileMenu=C},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var I={getText:function(C,b){return(Math.abs(C.selection.lead.row-b)||b+1+(b<9?"":""))+""},getWidth:function(C,b,A){return Math.max(b.toString().length,(A.lastRow+1).toString().length,2)*A.characterWidth},update:function(C,b){b.renderer.$loop.schedule(b.renderer.CHANGE_GUTTER)},attach:function(C){C.renderer.$gutterLayer.$renderer=this,C.on("changeSelection",this.update),this.update(null,C)},detach:function(C){C.renderer.$gutterLayer.$renderer==this&&(C.renderer.$gutterLayer.$renderer=null),C.off("changeSelection",this.update),this.update(null,C)}};i.Editor=T}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("../lib/dom"),s=function(){function c(a,u){this.element=a,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return c.prototype.moveContainer=function(a){o.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},c.prototype.pageChanged=function(a,u){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},c.prototype.computeLineTop=function(a,u,l){var p=u.firstRowScreen*u.lineHeight,h=Math.floor(p/this.canvasHeight),d=l.documentToScreenRow(a,0)*u.lineHeight;return d-h*this.canvasHeight},c.prototype.computeLineHeight=function(a,u,l){return u.lineHeight*l.getRowLineCount(a)},c.prototype.getLength=function(){return this.cells.length},c.prototype.get=function(a){return this.cells[a]},c.prototype.shift=function(){this.$cacheCell(this.cells.shift())},c.prototype.pop=function(){this.$cacheCell(this.cells.pop())},c.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var u=o.createFragment(this.element),l=0;l<a.length;l++)u.appendChild(a[l].element);this.element.appendChild(u)}else this.cells.push(a),this.element.appendChild(a.element)},c.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var u=o.createFragment(this.element),l=0;l<a.length;l++)u.appendChild(a[l].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},c.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},c.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},c.prototype.createCell=function(a,u,l,p){var h=this.cellCache.pop();if(!h){var d=o.createElement("div");p&&p(d),this.element.appendChild(d),h={element:d,text:"",row:a}}return h.row=a,h},c}();i.Lines=s}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(n,i,r){var o=n("../lib/dom"),s=n("../lib/oop"),c=n("../lib/lang"),a=n("../lib/event_emitter").EventEmitter,u=n("./lines").Lines,l=n("../config").nls,p=function(){function d(f){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",f.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new u(this.element),this.$lines.$offsetCoefficient=1}return d.prototype.setSession=function(f){this.session&&this.session.off("change",this.$updateAnnotations),this.session=f,f&&f.on("change",this.$updateAnnotations)},d.prototype.addGutterDecoration=function(f,g){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(f,g)},d.prototype.removeGutterDecoration=function(f,g){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(f,g)},d.prototype.setAnnotations=function(f){this.$annotations=[];for(var g=0;g<f.length;g++){var m=f[g],w=m.row,_=this.$annotations[w];_||(_=this.$annotations[w]={text:[],type:[],displayText:[]});var E=m.text,y=m.text,x=m.type;E=E?c.escapeHTML(E):m.html||"",y=y||m.html||"",_.text.indexOf(E)===-1&&(_.text.push(E),_.type.push(x),_.displayText.push(y));var v=m.className;v?_.className=v:x==="error"?_.className=" ace_error":x==="security"&&!/\bace_error\b/.test(_.className)?_.className=" ace_security":x==="warning"&&!/\bace_(error|security)\b/.test(_.className)?_.className=" ace_warning":x==="info"&&!_.className?_.className=" ace_info":x==="hint"&&!_.className&&(_.className=" ace_hint")}},d.prototype.$updateAnnotations=function(f){if(this.$annotations.length){var g=f.start.row,m=f.end.row-g;if(m!==0)if(f.action=="remove")this.$annotations.splice(g,m+1,null);else{var w=new Array(m+1);w.unshift(g,1),this.$annotations.splice.apply(this.$annotations,w)}}},d.prototype.update=function(f){this.config=f;var g=this.session,m=f.firstRow,w=Math.min(f.lastRow+f.gutterOffset,g.getLength()-1);this.oldLastRow=w,this.config=f,this.$lines.moveContainer(f),this.$updateCursorRow();for(var _=g.getNextFoldLine(m),E=_?_.start.row:1/0,y=null,x=-1,v=m;;){if(v>E&&(v=_.end.row+1,_=g.getNextFoldLine(v,_),E=_?_.start.row:1/0),v>w){for(;this.$lines.getLength()>x+1;)this.$lines.pop();break}y=this.$lines.get(++x),y?y.row=v:(y=this.$lines.createCell(v,f,this.session,h),this.$lines.push(y)),this.$renderCell(y,f,_,v),v++}this._signal("afterRender"),this.$updateGutterWidth(f)},d.prototype.$updateGutterWidth=function(f){var g=this.session,m=g.gutterRenderer||this.$renderer,w=g.$firstLineNumber,_=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||g.$useWrapMode)&&(_=g.getLength()+w-1);var E=m?m.getWidth(g,_,f):_.toString().length*f.characterWidth,y=this.$padding||this.$computePadding();E+=y.left+y.right,E!==this.gutterWidth&&!isNaN(E)&&(this.gutterWidth=E,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",E))},d.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var f=this.session.selection.getCursor();this.$cursorRow!==f.row&&(this.$cursorRow=f.row)}},d.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var f=this.session.selection.cursor.row;if(this.$cursorRow=f,!(this.$cursorCell&&this.$cursorCell.row==f)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var g=this.$lines.cells;this.$cursorCell=null;for(var m=0;m<g.length;m++){var w=g[m];if(w.row>=this.$cursorRow){if(w.row>this.$cursorRow){var _=this.session.getFoldLine(this.$cursorRow);if(m>0&&_&&_.start.row==g[m-1].row)w=g[m-1];else break}w.element.className="ace_gutter-active-line "+w.element.className,this.$cursorCell=w;break}}}}},d.prototype.scrollLines=function(f){var g=this.config;if(this.config=f,this.$updateCursorRow(),this.$lines.pageChanged(g,f))return this.update(f);this.$lines.moveContainer(f);var m=Math.min(f.lastRow+f.gutterOffset,this.session.getLength()-1),w=this.oldLastRow;if(this.oldLastRow=m,!g||w<f.firstRow)return this.update(f);if(m<g.firstRow)return this.update(f);if(g.firstRow<f.firstRow)for(var _=this.session.getFoldedRowCount(g.firstRow,f.firstRow-1);_>0;_--)this.$lines.shift();if(w>m)for(var _=this.session.getFoldedRowCount(m+1,w);_>0;_--)this.$lines.pop();f.firstRow<g.firstRow&&this.$lines.unshift(this.$renderLines(f,f.firstRow,g.firstRow-1)),m>w&&this.$lines.push(this.$renderLines(f,w+1,m)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(f)},d.prototype.$renderLines=function(f,g,m){for(var w=[],_=g,E=this.session.getNextFoldLine(_),y=E?E.start.row:1/0;_>y&&(_=E.end.row+1,E=this.session.getNextFoldLine(_,E),y=E?E.start.row:1/0),!(_>m);){var x=this.$lines.createCell(_,f,this.session,h);this.$renderCell(x,f,E,_),w.push(x),_++}return w},d.prototype.$renderCell=function(f,g,m,w){var _=f.element,E=this.session,y=_.childNodes[0],x=_.childNodes[1],v=_.childNodes[2],S=v.firstChild,M=E.$firstLineNumber,$=E.$breakpoints,T=E.$decorations,I=E.gutterRenderer||this.$renderer,C=this.$showFoldWidgets&&E.foldWidgets,b=m?m.start.row:Number.MAX_VALUE,A=g.lineHeight+"px",R=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",k=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",O=(I?I.getText(E,w):w+M).toString();if(this.$highlightGutterLine&&(w==this.$cursorRow||m&&w<this.$cursorRow&&w>=b&&this.$cursorRow<=m.end.row)&&(R+="ace_gutter-active-line ",this.$cursorCell!=f&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=f)),$[w]&&(R+=$[w]),T[w]&&(R+=T[w]),this.$annotations[w]&&w!==b&&(R+=this.$annotations[w].className),C){var N=C[w];N==null&&(N=C[w]=E.getFoldWidget(w))}if(N){var W="ace_fold-widget ace_"+N,z=N=="start"&&w==b&&w<m.end.row;if(z){W+=" ace_closed";for(var V="",U=!1,H=w+1;H<=m.end.row;H++)if(this.$annotations[H]){if(this.$annotations[H].className===" ace_error"){U=!0,V=" ace_error_fold";break}this.$annotations[H].className===" ace_security"?(U=!0,V=" ace_security_fold"):this.$annotations[H].className===" ace_warning"&&V!==" ace_security_fold"&&(U=!0,V=" ace_warning_fold")}R+=V}else W+=" ace_open";x.className!=W&&(x.className=W),o.setStyle(x.style,"height",A),o.setStyle(x.style,"display","inline-block"),x.setAttribute("role","button"),x.setAttribute("tabindex","-1");var Y=E.getFoldWidgetRange(w);Y?x.setAttribute("aria-label",l("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[Y.start.row+1,Y.end.row+1])):m?x.setAttribute("aria-label",l("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[m.start.row+1,m.end.row+1])):x.setAttribute("aria-label",l("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[w+1])),z?(x.setAttribute("aria-expanded","false"),x.setAttribute("title",l("gutter.code-folding.closed.title","Unfold code"))):(x.setAttribute("aria-expanded","true"),x.setAttribute("title",l("gutter.code-folding.open.title","Fold code")))}else x&&(o.setStyle(x.style,"display","none"),x.setAttribute("tabindex","0"),x.removeAttribute("role"),x.removeAttribute("aria-label"));if(U&&this.$showFoldedAnnotations){v.className="ace_gutter_annotation",S.className=k,S.className+=V,o.setStyle(S.style,"height",A),o.setStyle(v.style,"display","block"),o.setStyle(v.style,"height",A);var K;switch(V){case" ace_error_fold":K=l("gutter.annotation.aria-label.error","Error, read annotations row $0",[O]);break;case" ace_security_fold":K=l("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[O]);break;case" ace_warning_fold":K=l("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[O]);break}v.setAttribute("aria-label",K),v.setAttribute("tabindex","-1"),v.setAttribute("role","button")}else if(this.$annotations[w]){v.className="ace_gutter_annotation",S.className=k,this.$useSvgGutterIcons?S.className+=this.$annotations[w].className:_.classList.add(this.$annotations[w].className.replace(" ","")),o.setStyle(S.style,"height",A),o.setStyle(v.style,"display","block"),o.setStyle(v.style,"height",A);var K;switch(this.$annotations[w].className){case" ace_error":K=l("gutter.annotation.aria-label.error","Error, read annotations row $0",[O]);break;case" ace_security":K=l("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[O]);break;case" ace_warning":K=l("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[O]);break;case" ace_info":K=l("gutter.annotation.aria-label.info","Info, read annotations row $0",[O]);break;case" ace_hint":K=l("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[O]);break}v.setAttribute("aria-label",K),v.setAttribute("tabindex","-1"),v.setAttribute("role","button")}else o.setStyle(v.style,"display","none"),v.removeAttribute("aria-label"),v.removeAttribute("role"),v.setAttribute("tabindex","0");return O!==y.data&&(y.data=O),_.className!=R&&(_.className=R),o.setStyle(f.element.style,"height",this.$lines.computeLineHeight(w,g,E)+"px"),o.setStyle(f.element.style,"top",this.$lines.computeLineTop(w,g,E)+"px"),f.text=O,v.style.display==="none"&&x.style.display==="none"?f.element.setAttribute("aria-hidden",!0):f.element.setAttribute("aria-hidden",!1),f},d.prototype.setHighlightGutterLine=function(f){this.$highlightGutterLine=f},d.prototype.setShowLineNumbers=function(f){this.$renderer=!f&&{getWidth:function(){return 0},getText:function(){return""}}},d.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},d.prototype.setShowFoldWidgets=function(f){f?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=f,this.$padding=null},d.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},d.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var f=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(f.borderLeftWidth)||0)+(parseInt(f.paddingLeft)||0)+1,this.$padding.right=(parseInt(f.borderRightWidth)||0)+(parseInt(f.paddingRight)||0),this.$padding},d.prototype.getRegion=function(f){var g=this.$padding||this.$computePadding(),m=this.element.getBoundingClientRect();if(f.x<g.left+m.left)return"markers";if(this.$showFoldWidgets&&f.x>m.right-g.right)return"foldWidgets"},d}();p.prototype.$fixedWidth=!1,p.prototype.$highlightGutterLine=!0,p.prototype.$renderer="",p.prototype.$showLineNumbers=!0,p.prototype.$showFoldWidgets=!0,s.implement(p.prototype,a);function h(d){var f=document.createTextNode("");d.appendChild(f);var g=o.createElement("span");d.appendChild(g);var m=o.createElement("span");d.appendChild(m);var w=o.createElement("span");return m.appendChild(w),d}i.Gutter=p}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(n,i,r){var o=n("../range").Range,s=n("../lib/dom"),c=function(){function u(l){this.element=s.createElement("div"),this.element.className="ace_layer ace_marker-layer",l.appendChild(this.element)}return u.prototype.setPadding=function(l){this.$padding=l},u.prototype.setSession=function(l){this.session=l},u.prototype.setMarkers=function(l){this.markers=l},u.prototype.elt=function(l,p){var h=this.i!=-1&&this.element.childNodes[this.i];h?this.i++:(h=document.createElement("div"),this.element.appendChild(h),this.i=-1),h.style.cssText=p,h.className=l},u.prototype.update=function(l){if(l){this.config=l,this.i=0;var p;for(var h in this.markers){var d=this.markers[h];if(!d.range){d.update(p,this,this.session,l);continue}var f=d.range.clipRows(l.firstRow,l.lastRow);if(!f.isEmpty())if(f=f.toScreenRange(this.session),d.renderer){var g=this.$getTop(f.start.row,l),m=this.$padding+f.start.column*l.characterWidth;d.renderer(p,f,m,g,l)}else d.type=="fullLine"?this.drawFullLineMarker(p,f,d.clazz,l):d.type=="screenLine"?this.drawScreenLineMarker(p,f,d.clazz,l):f.isMultiLine()?d.type=="text"?this.drawTextMarker(p,f,d.clazz,l):this.drawMultiLineMarker(p,f,d.clazz,l):this.drawSingleLineMarker(p,f,d.clazz+" ace_start ace_br15",l)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},u.prototype.$getTop=function(l,p){return(l-p.firstRowScreen)*p.lineHeight},u.prototype.drawTextMarker=function(l,p,h,d,f){for(var g=this.session,m=p.start.row,w=p.end.row,_=m,E=0,y=0,x=g.getScreenLastRowColumn(_),v=new o(_,p.start.column,_,y);_<=w;_++)v.start.row=v.end.row=_,v.start.column=_==m?p.start.column:g.getRowWrapIndent(_),v.end.column=x,E=y,y=x,x=_+1<w?g.getScreenLastRowColumn(_+1):_==w?0:p.end.column,this.drawSingleLineMarker(l,v,h+(_==m?" ace_start":"")+" ace_br"+a(_==m||_==m+1&&p.start.column,E<y,y>x,_==w),d,_==w?0:1,f)},u.prototype.drawMultiLineMarker=function(l,p,h,d,f){var g=this.$padding,m=d.lineHeight,w=this.$getTop(p.start.row,d),_=g+p.start.column*d.characterWidth;if(f=f||"",this.session.$bidiHandler.isBidiRow(p.start.row)){var E=p.clone();E.end.row=E.start.row,E.end.column=this.session.getLine(E.start.row).length,this.drawBidiSingleLineMarker(l,E,h+" ace_br1 ace_start",d,null,f)}else this.elt(h+" ace_br1 ace_start","height:"+m+"px;right:"+g+"px;top:"+w+"px;left:"+_+"px;"+(f||""));if(this.session.$bidiHandler.isBidiRow(p.end.row)){var E=p.clone();E.start.row=E.end.row,E.start.column=0,this.drawBidiSingleLineMarker(l,E,h+" ace_br12",d,null,f)}else{w=this.$getTop(p.end.row,d);var y=p.end.column*d.characterWidth;this.elt(h+" ace_br12","height:"+m+"px;width:"+y+"px;top:"+w+"px;left:"+g+"px;"+(f||""))}if(m=(p.end.row-p.start.row-1)*d.lineHeight,!(m<=0)){w=this.$getTop(p.start.row+1,d);var x=(p.start.column?1:0)|(p.end.column?0:8);this.elt(h+(x?" ace_br"+x:""),"height:"+m+"px;right:"+g+"px;top:"+w+"px;left:"+g+"px;"+(f||""))}},u.prototype.drawSingleLineMarker=function(l,p,h,d,f,g){if(this.session.$bidiHandler.isBidiRow(p.start.row))return this.drawBidiSingleLineMarker(l,p,h,d,f,g);var m=d.lineHeight,w=(p.end.column+(f||0)-p.start.column)*d.characterWidth,_=this.$getTop(p.start.row,d),E=this.$padding+p.start.column*d.characterWidth;this.elt(h,"height:"+m+"px;width:"+w+"px;top:"+_+"px;left:"+E+"px;"+(g||""))},u.prototype.drawBidiSingleLineMarker=function(l,p,h,d,f,g){var m=d.lineHeight,w=this.$getTop(p.start.row,d),_=this.$padding,E=this.session.$bidiHandler.getSelections(p.start.column,p.end.column);E.forEach(function(y){this.elt(h,"height:"+m+"px;width:"+(y.width+(f||0))+"px;top:"+w+"px;left:"+(_+y.left)+"px;"+(g||""))},this)},u.prototype.drawFullLineMarker=function(l,p,h,d,f){var g=this.$getTop(p.start.row,d),m=d.lineHeight;p.start.row!=p.end.row&&(m+=this.$getTop(p.end.row,d)-g),this.elt(h,"height:"+m+"px;top:"+g+"px;left:0;right:0;"+(f||""))},u.prototype.drawScreenLineMarker=function(l,p,h,d,f){var g=this.$getTop(p.start.row,d),m=d.lineHeight;this.elt(h,"height:"+m+"px;top:"+g+"px;left:0;right:0;"+(f||""))},u}();c.prototype.$padding=0;function a(u,l,p,h){return(u?1:0)|(l?2:0)|(p?4:0)|(h?8:0)}i.Marker=c}),ace.define("ace/layer/text_util",["require","exports","module"],function(n,i,r){var o=new Set(["text","rparen","lparen"]);i.isTextToken=function(s){return o.has(s)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(n,i,r){var o=n("../lib/oop"),s=n("../lib/dom"),c=n("../lib/lang"),a=n("./lines").Lines,u=n("../lib/event_emitter").EventEmitter,l=n("../config").nls,p=n("./text_util").isTextToken,h=function(){function d(f){this.dom=s,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",f.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return d.prototype.$updateEolChar=function(){var f=this.session.doc,g=f.getNewLineCharacter()==`
`&&f.getNewLineMode()!="windows",m=g?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=m)return this.EOL_CHAR=m,!0},d.prototype.setPadding=function(f){this.$padding=f,this.element.style.margin="0 "+f+"px"},d.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},d.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},d.prototype.$setFontMetrics=function(f){this.$fontMetrics=f,this.$fontMetrics.on("changeCharacterSize",(function(g){this._signal("changeCharacterSize",g)}).bind(this)),this.$pollSizeChanges()},d.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},d.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},d.prototype.setSession=function(f){this.session=f,f&&this.$computeTabString()},d.prototype.setShowInvisibles=function(f){return this.showInvisibles==f?!1:(this.showInvisibles=f,typeof f=="string"?(this.showSpaces=/tab/i.test(f),this.showTabs=/space/i.test(f),this.showEOL=/eol/i.test(f)):this.showSpaces=this.showTabs=this.showEOL=f,this.$computeTabString(),!0)},d.prototype.setDisplayIndentGuides=function(f){return this.displayIndentGuides==f?!1:(this.displayIndentGuides=f,this.$computeTabString(),!0)},d.prototype.setHighlightIndentGuides=function(f){return this.$highlightIndentGuides===f?!1:(this.$highlightIndentGuides=f,f)},d.prototype.$computeTabString=function(){var f=this.session.getTabSize();this.tabSize=f;for(var g=this.$tabStrings=[0],m=1;m<f+1;m++)if(this.showTabs){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_tab",w.textContent=c.stringRepeat(this.TAB_CHAR,m),g.push(w)}else g.push(this.dom.createTextNode(c.stringRepeat(" ",m),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var _="ace_indent-guide",E=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?c.stringRepeat(this.SPACE_CHAR,this.tabSize):c.stringRepeat(" ",this.tabSize),x=this.showTabs?" ace_invisible ace_invisible_tab":"",v=this.showTabs?c.stringRepeat(this.TAB_CHAR,this.tabSize):y,w=this.dom.createElement("span");w.className=_+E,w.textContent=y,this.$tabStrings[" "]=w;var w=this.dom.createElement("span");w.className=_+x,w.textContent=v,this.$tabStrings["	"]=w}},d.prototype.updateLines=function(f,g,m){if(this.config.lastRow!=f.lastRow||this.config.firstRow!=f.firstRow)return this.update(f);this.config=f;for(var w=Math.max(g,f.firstRow),_=Math.min(m,f.lastRow),E=this.element.childNodes,y=0,v=f.firstRow;v<w;v++){var S=this.session.getFoldLine(v);if(S)if(S.containsRow(w)){w=S.start.row;break}else v=S.end.row;y++}for(var x=!1,v=w,S=this.session.getNextFoldLine(v),M=S?S.start.row:1/0;v>M&&(v=S.end.row+1,S=this.session.getNextFoldLine(v,S),M=S?S.start.row:1/0),!(v>_);){var $=E[y++];if($){this.dom.removeChildren($),this.$renderLine($,v,v==M?S:!1),x&&($.style.top=this.$lines.computeLineTop(v,f,this.session)+"px");var T=f.lineHeight*this.session.getRowLength(v)+"px";$.style.height!=T&&(x=!0,$.style.height=T)}v++}if(x)for(;y<this.$lines.cells.length;){var I=this.$lines.cells[y++];I.element.style.top=this.$lines.computeLineTop(I.row,f,this.session)+"px"}},d.prototype.scrollLines=function(f){var g=this.config;if(this.config=f,this.$lines.pageChanged(g,f))return this.update(f);this.$lines.moveContainer(f);var m=f.lastRow,w=g?g.lastRow:-1;if(!g||w<f.firstRow)return this.update(f);if(m<g.firstRow)return this.update(f);if(!g||g.lastRow<f.firstRow)return this.update(f);if(f.lastRow<g.firstRow)return this.update(f);if(g.firstRow<f.firstRow)for(var _=this.session.getFoldedRowCount(g.firstRow,f.firstRow-1);_>0;_--)this.$lines.shift();if(g.lastRow>f.lastRow)for(var _=this.session.getFoldedRowCount(f.lastRow+1,g.lastRow);_>0;_--)this.$lines.pop();f.firstRow<g.firstRow&&this.$lines.unshift(this.$renderLinesFragment(f,f.firstRow,g.firstRow-1)),f.lastRow>g.lastRow&&this.$lines.push(this.$renderLinesFragment(f,g.lastRow+1,f.lastRow)),this.$highlightIndentGuide()},d.prototype.$renderLinesFragment=function(f,g,m){for(var w=[],_=g,E=this.session.getNextFoldLine(_),y=E?E.start.row:1/0;_>y&&(_=E.end.row+1,E=this.session.getNextFoldLine(_,E),y=E?E.start.row:1/0),!(_>m);){var x=this.$lines.createCell(_,f,this.session),v=x.element;this.dom.removeChildren(v),s.setStyle(v.style,"height",this.$lines.computeLineHeight(_,f,this.session)+"px"),s.setStyle(v.style,"top",this.$lines.computeLineTop(_,f,this.session)+"px"),this.$renderLine(v,_,_==y?E:!1),this.$useLineGroups()?v.className="ace_line_group":v.className="ace_line",w.push(x),_++}return w},d.prototype.update=function(f){this.$lines.moveContainer(f),this.config=f;for(var g=f.firstRow,m=f.lastRow,w=this.$lines;w.getLength();)w.pop();w.push(this.$renderLinesFragment(f,g,m))},d.prototype.$renderToken=function(f,g,m,w){for(var _=this,E=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),x,v=0;x=E.exec(w);){var S=x[1],M=x[2],$=x[3],T=x[4],I=x[5];if(!(!_.showSpaces&&M)){var C=v!=x.index?w.slice(v,x.index):"";if(v=x.index+x[0].length,C&&y.appendChild(this.dom.createTextNode(C,this.element)),S){var b=_.session.getScreenTabSize(g+x.index);y.appendChild(_.$tabStrings[b].cloneNode(!0)),g+=b-1}else if(M)if(_.showSpaces){var A=this.dom.createElement("span");A.className="ace_invisible ace_invisible_space",A.textContent=c.stringRepeat(_.SPACE_CHAR,M.length),y.appendChild(A)}else y.appendChild(this.dom.createTextNode(M,this.element));else if($){var A=this.dom.createElement("span");A.className="ace_invisible ace_invisible_space ace_invalid",A.textContent=c.stringRepeat(_.SPACE_CHAR,$.length),y.appendChild(A)}else if(T){g+=1;var A=this.dom.createElement("span");A.style.width=_.config.characterWidth*2+"px",A.className=_.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",A.textContent=_.showSpaces?_.SPACE_CHAR:T,y.appendChild(A)}else if(I){g+=1;var A=this.dom.createElement("span");A.style.width=_.config.characterWidth*2+"px",A.className="ace_cjk",A.textContent=I,y.appendChild(A)}}}if(y.appendChild(this.dom.createTextNode(v?w.slice(v):w,this.element)),p(m.type))f.appendChild(y);else{var R="ace_"+m.type.replace(/\./g," ace_"),A=this.dom.createElement("span");m.type=="fold"&&(A.style.width=m.value.length*this.config.characterWidth+"px",A.setAttribute("title",l("inline-fold.closed.title","Unfold code"))),A.className=R,A.appendChild(y),f.appendChild(A)}return g+w.length},d.prototype.renderIndentGuide=function(f,g,m){var w=g.search(this.$indentGuideRe);if(w<=0||w>=m)return g;if(g[0]==" "){w-=w%this.tabSize;for(var _=w/this.tabSize,E=0;E<_;E++)f.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),g.substr(w)}else if(g[0]=="	"){for(var E=0;E<w;E++)f.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),g.substr(w)}return this.$highlightIndentGuide(),g},d.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var f=this.session.doc.$lines;if(f){var g=this.session.selection.getCursor(),m=/^\s*/.exec(this.session.doc.getLine(g.row))[0].length,w=Math.floor(m/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:w,start:g.row};var _=this.session.$bracketHighlight;if(_){for(var E=this.session.$bracketHighlight.ranges,y=0;y<E.length;y++)if(g.row!==E[y].start.row){this.$highlightIndentGuideMarker.end=E[y].start.row,g.row>E[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&f[g.row]!==""&&g.column===f[g.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=g.row+1;y<f.length;y++){var x=f[y],v=/^\s*/.exec(x)[0].length;if(x!==""&&(this.$highlightIndentGuideMarker.end=y,v<=m))break}}this.$renderHighlightIndentGuide()}}},d.prototype.$clearActiveIndentGuide=function(){for(var f=this.$lines.cells,g=0;g<f.length;g++){var m=f[g],w=m.element.childNodes;if(w.length>0){for(var _=0;_<w.length;_++)if(w[_].classList&&w[_].classList.contains("ace_indent-guide-active")){w[_].classList.remove("ace_indent-guide-active");break}}}},d.prototype.$setIndentGuideActive=function(f,g){var m=this.session.doc.getLine(f.row);if(m!==""){var w=f.element.childNodes;if(w){var _=w[g-1];_&&_.classList&&_.classList.contains("ace_indent-guide")&&_.classList.add("ace_indent-guide-active")}}},d.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var f=this.$lines.cells;this.$clearActiveIndentGuide();var g=this.$highlightIndentGuideMarker.indentLevel;if(g!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var m=0;m<f.length;m++){var w=f[m];if(this.$highlightIndentGuideMarker.end&&w.row>=this.$highlightIndentGuideMarker.start+1){if(w.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(w,g)}}else for(var m=f.length-1;m>=0;m--){var w=f[m];if(this.$highlightIndentGuideMarker.end&&w.row<this.$highlightIndentGuideMarker.start){if(w.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(w,g)}}}},d.prototype.$createLineElement=function(f){var g=this.dom.createElement("div");return g.className="ace_line",g.style.height=this.config.lineHeight+"px",g},d.prototype.$renderWrappedLine=function(f,g,m){var w=0,_=0,E=m[0],y=0,x=this.$createLineElement();f.appendChild(x);for(var v=0;v<g.length;v++){var S=g[v],M=S.value;if(v==0&&this.displayIndentGuides){if(w=M.length,M=this.renderIndentGuide(x,M,E),!M)continue;w-=M.length}if(w+M.length<E)y=this.$renderToken(x,y,S,M),w+=M.length;else{for(;w+M.length>=E;)y=this.$renderToken(x,y,S,M.substring(0,E-w)),M=M.substring(E-w),w=E,x=this.$createLineElement(),f.appendChild(x),x.appendChild(this.dom.createTextNode(c.stringRepeat("",m.indent),this.element)),_++,y=0,E=m[_]||Number.MAX_VALUE;M.length!=0&&(w+=M.length,y=this.$renderToken(x,y,S,M))}}m[m.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(x,y,null,"",!0)},d.prototype.$renderSimpleLine=function(f,g){for(var m=0,w=0;w<g.length;w++){var _=g[w],E=_.value;if(!(w==0&&this.displayIndentGuides&&(E=this.renderIndentGuide(f,E),!E))){if(m+E.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(f,m,_,E);m=this.$renderToken(f,m,_,E)}}},d.prototype.$renderOverflowMessage=function(f,g,m,w,_){m&&this.$renderToken(f,g,m,w.slice(0,this.MAX_LINE_LENGTH-g));var E=this.dom.createElement("span");E.className="ace_inline_button ace_keyword ace_toggle_wrap",E.textContent=_?"<hide>":"<click to see more...>",f.appendChild(E)},d.prototype.$renderLine=function(f,g,m){if(!m&&m!=!1&&(m=this.session.getFoldLine(g)),m)var w=this.$getFoldLineTokens(g,m);else var w=this.session.getTokens(g);var _=f;if(w.length){var E=this.session.getRowSplitData(g);if(E&&E.length){this.$renderWrappedLine(f,w,E);var _=f.lastChild}else{var _=f;this.$useLineGroups()&&(_=this.$createLineElement(),f.appendChild(_)),this.$renderSimpleLine(_,w)}}else this.$useLineGroups()&&(_=this.$createLineElement(),f.appendChild(_));if(this.showEOL&&_){m&&(g=m.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=g==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,_.appendChild(y)}},d.prototype.$getFoldLineTokens=function(f,g){var m=this.session,w=[];function _(y,x,v){for(var S=0,M=0;M+y[S].value.length<x;)if(M+=y[S].value.length,S++,S==y.length)return;if(M!=x){var $=y[S].value.substring(x-M);$.length>v-x&&($=$.substring(0,v-x)),w.push({type:y[S].type,value:$}),M=x+$.length,S+=1}for(;M<v&&S<y.length;){var $=y[S].value;$.length+M>v?w.push({type:y[S].type,value:$.substring(0,v-M)}):w.push(y[S]),M+=$.length,S+=1}}var E=m.getTokens(f);return g.walk(function(y,x,v,S,M){y!=null?w.push({type:"fold",value:y}):(M&&(E=m.getTokens(x)),E.length&&_(E,S,v))},g.end.row,this.session.getLine(g.end.row).length),w},d.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},d}();h.prototype.EOF_CHAR="",h.prototype.EOL_CHAR_LF="",h.prototype.EOL_CHAR_CRLF="",h.prototype.EOL_CHAR=h.prototype.EOL_CHAR_LF,h.prototype.TAB_CHAR="",h.prototype.SPACE_CHAR="",h.prototype.$padding=0,h.prototype.MAX_LINE_LENGTH=1e4,h.prototype.showInvisibles=!1,h.prototype.showSpaces=!1,h.prototype.showTabs=!1,h.prototype.showEOL=!1,h.prototype.displayIndentGuides=!0,h.prototype.$highlightIndentGuides=!0,h.prototype.$tabStrings=[],h.prototype.destroy={},h.prototype.onChangeTabSize=h.prototype.$computeTabString,o.implement(h.prototype,u),i.Text=h}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("../lib/dom"),s=function(){function c(a){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return c.prototype.$updateOpacity=function(a){for(var u=this.cursors,l=u.length;l--;)o.setStyle(u[l].style,"opacity",a?"":"0")},c.prototype.$startCssAnimation=function(){for(var a=this.cursors,u=a.length;u--;)a[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&o.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},c.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,o.removeCssClass(this.element,"ace_animate-blinking")},c.prototype.setPadding=function(a){this.$padding=a},c.prototype.setSession=function(a){this.session=a},c.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},c.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},c.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,o.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},c.prototype.addCursor=function(){var a=o.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},c.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},c.prototype.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},c.prototype.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},c.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,o.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&o.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),o.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=(function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){a(!0),u()},this.blinkInterval),u()}},c.prototype.getPixelPosition=function(a,u){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var l=this.session.documentToScreenPosition(a),p=this.$padding+(this.session.$bidiHandler.isBidiRow(l.row,a.row)?this.session.$bidiHandler.getPosLeft(l.column):l.column*this.config.characterWidth),h=(l.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:p,top:h}},c.prototype.isCursorInView=function(a,u){return a.top>=0&&a.top<u.maxHeight},c.prototype.update=function(a){this.config=a;var u=this.session.$selectionMarkers,l=0,p=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var l=0,h=u.length;l<h;l++){var d=this.getPixelPosition(u[l].cursor,!0);if(!((d.top>a.height+a.offset||d.top<0)&&l>1)){var f=this.cursors[p++]||this.addCursor(),g=f.style;this.drawCursor?this.drawCursor(f,d,a,u[l],this.session):this.isCursorInView(d,a)?(o.setStyle(g,"display","block"),o.translate(f,d.left,d.top),o.setStyle(g,"width",Math.round(a.characterWidth)+"px"),o.setStyle(g,"height",a.lineHeight+"px")):o.setStyle(g,"display","none")}}for(;this.cursors.length>p;)this.removeCursor();var m=this.session.getOverwrite();this.$setOverwrite(m),this.$pixelPos=d,this.restartTimer()},c.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},c.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},c}();s.prototype.$padding=0,s.prototype.drawCursor=null,i.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,i,r){var o=this&&this.__extends||function(){var f=function(g,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(w[E]=_[E])},f(g,m)};return function(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");f(g,m);function w(){this.constructor=g}g.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}(),s=n("./lib/oop"),c=n("./lib/dom"),a=n("./lib/event"),u=n("./lib/event_emitter").EventEmitter,l=32768,p=function(){function f(g,m){this.element=c.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+m,this.inner=c.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),g.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return f.prototype.setVisible=function(g){this.element.style.display=g?"":"none",this.isVisible=g,this.coeff=1},f}();s.implement(p.prototype,u);var h=function(f){o(g,f);function g(m,w){var _=f.call(this,m,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,w.$scrollbarWidth=_.width=c.scrollbarWidth(m.ownerDocument),_.inner.style.width=_.element.style.width=(_.width||15)+5+"px",_.$minWidth=0,_}return g.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var m=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-m)/(this.coeff-m)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},g.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},g.prototype.setHeight=function(m){this.element.style.height=m+"px"},g.prototype.setScrollHeight=function(m){this.scrollHeight=m,m>l?(this.coeff=l/m,m=l):this.coeff!=1&&(this.coeff=1),this.inner.style.height=m+"px"},g.prototype.setScrollTop=function(m){this.scrollTop!=m&&(this.skipEvent=!0,this.scrollTop=m,this.element.scrollTop=m*this.coeff)},g}(p);h.prototype.setInnerHeight=h.prototype.setScrollHeight;var d=function(f){o(g,f);function g(m,w){var _=f.call(this,m,"-h")||this;return _.scrollLeft=0,_.height=w.$scrollbarWidth,_.inner.style.height=_.element.style.height=(_.height||15)+5+"px",_}return g.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},g.prototype.getHeight=function(){return this.isVisible?this.height:0},g.prototype.setWidth=function(m){this.element.style.width=m+"px"},g.prototype.setInnerWidth=function(m){this.inner.style.width=m+"px"},g.prototype.setScrollWidth=function(m){this.inner.style.width=m+"px"},g.prototype.setScrollLeft=function(m){this.scrollLeft!=m&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=m)},g}(p);i.ScrollBar=h,i.ScrollBarV=h,i.ScrollBarH=d,i.VScrollBar=h,i.HScrollBar=d}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,i,r){var o=this&&this.__extends||function(){var d=function(f,g){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var _ in w)Object.prototype.hasOwnProperty.call(w,_)&&(m[_]=w[_])},d(f,g)};return function(f,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");d(f,g);function m(){this.constructor=f}f.prototype=g===null?Object.create(g):(m.prototype=g.prototype,new m)}}(),s=n("./lib/oop"),c=n("./lib/dom"),a=n("./lib/event"),u=n("./lib/event_emitter").EventEmitter;c.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var l=function(){function d(f,g){this.element=c.createElement("div"),this.element.className="ace_sb"+g,this.inner=c.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return d.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},d}();s.implement(l.prototype,u);var p=function(d){o(f,d);function f(g,m){var w=d.call(this,g,"-v")||this;return w.scrollTop=0,w.scrollHeight=0,w.parent=g,w.width=w.VScrollWidth,w.renderer=m,w.inner.style.width=w.element.style.width=(w.width||15)+"px",w.$minWidth=0,w}return f.prototype.onMouseDown=function(g,m){if(g==="mousedown"&&!(a.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var w=this,_=m.clientY,E=function(T){_=T.clientY},y=function(){clearInterval(M)},x=m.clientY,v=this.thumbTop,S=function(){if(_!==void 0){var T=w.scrollTopFromThumbTop(v+_-x);T!==w.scrollTop&&w._emit("scroll",{data:T})}};a.capture(this.inner,E,y);var M=setInterval(S,20);return a.preventDefault(m)}var $=m.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop($)}),a.preventDefault(m)}},f.prototype.getHeight=function(){return this.height},f.prototype.scrollTopFromThumbTop=function(g){var m=g*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return m=m>>0,m<0?m=0:m>this.pageHeight-this.viewHeight&&(m=this.pageHeight-this.viewHeight),m},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(g){this.height=Math.max(0,g),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},f.prototype.setScrollHeight=function(g,m){this.pageHeight===g&&!m||(this.pageHeight=g,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},f.prototype.setScrollTop=function(g){this.scrollTop=g,g<0&&(g=0),this.thumbTop=g*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},f}(l);p.prototype.setInnerHeight=p.prototype.setScrollHeight;var h=function(d){o(f,d);function f(g,m){var w=d.call(this,g,"-h")||this;return w.scrollLeft=0,w.scrollWidth=0,w.height=w.HScrollHeight,w.inner.style.height=w.element.style.height=(w.height||12)+"px",w.renderer=m,w}return f.prototype.onMouseDown=function(g,m){if(g==="mousedown"&&!(a.getButton(m)!==0||m.detail===2)){if(m.target===this.inner){var w=this,_=m.clientX,E=function(T){_=T.clientX},y=function(){clearInterval(M)},x=m.clientX,v=this.thumbLeft,S=function(){if(_!==void 0){var T=w.scrollLeftFromThumbLeft(v+_-x);T!==w.scrollLeft&&w._emit("scroll",{data:T})}};a.capture(this.inner,E,y);var M=setInterval(S,20);return a.preventDefault(m)}var $=m.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft($)}),a.preventDefault(m)}},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.scrollLeftFromThumbLeft=function(g){var m=g*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return m=m>>0,m<0?m=0:m>this.pageWidth-this.viewWidth&&(m=this.pageWidth-this.viewWidth),m},f.prototype.setWidth=function(g){this.width=Math.max(0,g),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},f.prototype.setScrollWidth=function(g,m){this.pageWidth===g&&!m||(this.pageWidth=g,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},f.prototype.setScrollLeft=function(g){this.scrollLeft=g,g<0&&(g=0),this.thumbLeft=g*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},f}(l);h.prototype.setInnerWidth=h.prototype.setScrollWidth,i.ScrollBar=p,i.ScrollBarV=p,i.ScrollBarH=h,i.VScrollBar=p,i.HScrollBar=h}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(n,i,r){var o=n("./lib/event"),s=function(){function c(a,u){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var l=this;this._flush=function(p){l.pending=!1;var h=l.changes;if(h&&(o.blockIdle(100),l.changes=0,l.onRender(h)),l.changes){if(l.$recursionLimit--<0)return;l.schedule()}else l.$recursionLimit=2}}return c.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},c.prototype.clear=function(a){var u=this.changes;return this.changes=0,u},c}();i.RenderLoop=s}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(n,i,r){var o=n("../lib/oop"),s=n("../lib/dom"),c=n("../lib/lang"),a=n("../lib/event"),u=n("../lib/useragent"),l=n("../lib/event_emitter").EventEmitter,p=512,h=typeof ResizeObserver=="function",d=200,f=function(){function g(m){this.el=s.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=s.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=s.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),m.appendChild(this.el),this.$measureNode.textContent=c.stringRepeat("X",p),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()}return g.prototype.$setMeasureNodeStyles=function(m,w){m.width=m.height="auto",m.left=m.top="0px",m.visibility="hidden",m.position="absolute",m.whiteSpace="pre",u.isIE<8?m["font-family"]="inherit":m.font="inherit",m.overflow=w?"hidden":"visible"},g.prototype.checkForSizeChanges=function(m){if(m===void 0&&(m=this.$measureSizes()),m&&(this.$characterSize.width!==m.width||this.$characterSize.height!==m.height)){this.$measureNode.style.fontWeight="bold";var w=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=m,this.charSizes=Object.create(null),this.allowBoldFonts=w&&w.width===m.width&&w.height===m.height,this._emit("changeCharacterSize",{data:m})}},g.prototype.$addObserver=function(){var m=this;this.$observer=new window.ResizeObserver(function(w){m.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},g.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var m=this;return this.$pollSizeChangesTimer=a.onIdle(function w(){m.checkForSizeChanges(),a.onIdle(w,500)},500)},g.prototype.setPolling=function(m){m?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},g.prototype.$measureSizes=function(m){var w={height:(m||this.$measureNode).clientHeight,width:(m||this.$measureNode).clientWidth/p};return w.width===0||w.height===0?null:w},g.prototype.$measureCharWidth=function(m){this.$main.textContent=c.stringRepeat(m,p);var w=this.$main.getBoundingClientRect();return w.width/p},g.prototype.getCharacterWidth=function(m){var w=this.charSizes[m];return w===void 0&&(w=this.charSizes[m]=this.$measureCharWidth(m)/this.$characterSize.width),w},g.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},g.prototype.$getZoom=function(m){return!m||!m.parentElement?1:(Number(window.getComputedStyle(m).zoom)||1)*this.$getZoom(m.parentElement)},g.prototype.$initTransformMeasureNodes=function(){var m=function(w,_){return["div",{style:"position: absolute;top:"+w+"px;left:"+_+"px;"}]};this.els=s.buildDom([m(0,0),m(d,0),m(0,d),m(d,d)],this.el)},g.prototype.transformCoordinates=function(m,w){if(m){var _=this.$getZoom(this.el);m=v(1/_,m)}function E(z,V,U){var H=z[1]*V[0]-z[0]*V[1];return[(-V[1]*U[0]+V[0]*U[1])/H,(+z[1]*U[0]-z[0]*U[1])/H]}function y(z,V){return[z[0]-V[0],z[1]-V[1]]}function x(z,V){return[z[0]+V[0],z[1]+V[1]]}function v(z,V){return[z*V[0],z*V[1]]}this.els||this.$initTransformMeasureNodes();function S(z){var V=z.getBoundingClientRect();return[V.left,V.top]}var M=S(this.els[0]),$=S(this.els[1]),T=S(this.els[2]),I=S(this.els[3]),C=E(y(I,$),y(I,T),y(x($,T),x(I,M))),b=v(1+C[0],y($,M)),A=v(1+C[1],y(T,M));if(w){var R=w,k=C[0]*R[0]/d+C[1]*R[1]/d+1,O=x(v(R[0],b),v(R[1],A));return x(v(1/k/d,O),M)}var N=y(m,M),W=E(y(b,v(C[0],N)),y(A,v(C[1],N)),N);return v(d,W)},g}();f.prototype.$characterSize={width:0,height:0},o.implement(f.prototype,l),i.FontMetrics=f}),ace.define("ace/css/editor-css",["require","exports","module"],function(n,i,r){r.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(n,i,r){var o=n("../lib/dom"),s=n("../lib/oop"),c=n("../lib/event_emitter").EventEmitter,a=function(){function u(l,p){this.canvas=o.createElement("canvas"),this.renderer=p,this.pixelRatio=1,this.maxHeight=p.layerConfig.maxHeight,this.lineHeight=p.layerConfig.lineHeight,this.canvasHeight=l.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=l.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},l.element.appendChild(this.canvas)}return u.prototype.$updateDecorators=function(l){var p=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(l){this.maxHeight=l.maxHeight,this.lineHeight=l.lineHeight,this.canvasHeight=l.height;var h=(l.lastRow+1)*this.lineHeight;h<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var d=this.canvas.getContext("2d");function f(I,C){return I.priority<C.priority?-1:I.priority>C.priority?1:0}var g=this.renderer.session.$annotations;if(d.clearRect(0,0,this.canvas.width,this.canvas.height),g){var m={info:1,warning:2,error:3};g.forEach(function(I){I.priority=m[I.type]||null}),g=g.sort(f);for(var w=this.renderer.session.$foldData,_=0;_<g.length;_++){var E=g[_].row,y=this.compensateFoldRows(E,w),x=Math.round((E-y)*this.lineHeight*this.heightRatio),v=Math.round((E-y)*this.lineHeight*this.heightRatio),S=Math.round(((E-y)*this.lineHeight+this.lineHeight)*this.heightRatio),M=S-v;if(M<this.minDecorationHeight){var $=(v+S)/2|0;$<this.halfMinDecorationHeight?$=this.halfMinDecorationHeight:$+this.halfMinDecorationHeight>this.canvasHeight&&($=this.canvasHeight-this.halfMinDecorationHeight),v=Math.round($-this.halfMinDecorationHeight),S=Math.round($+this.halfMinDecorationHeight)}d.fillStyle=p[g[_].type]||null,d.fillRect(0,x,this.canvasWidth,S-v)}}var T=this.renderer.session.selection.getCursor();if(T){var y=this.compensateFoldRows(T.row,w),x=Math.round((T.row-y)*this.lineHeight*this.heightRatio);d.fillStyle="rgba(0, 0, 0, 0.5)",d.fillRect(0,x,this.canvasWidth,2)}},u.prototype.compensateFoldRows=function(l,p){var h=0;if(p&&p.length>0)for(var d=0;d<p.length;d++)l>p[d].start.row&&l<p[d].end.row?h+=l-p[d].start.row:l>=p[d].end.row&&(h+=p[d].end.row-p[d].start.row);return h},u}();s.implement(a.prototype,c),i.Decorator=a}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(n,i,r){var o=n("./lib/oop"),s=n("./lib/dom"),c=n("./lib/lang"),a=n("./config"),u=n("./layer/gutter").Gutter,l=n("./layer/marker").Marker,p=n("./layer/text").Text,h=n("./layer/cursor").Cursor,d=n("./scrollbar").HScrollBar,f=n("./scrollbar").VScrollBar,g=n("./scrollbar_custom").HScrollBar,m=n("./scrollbar_custom").VScrollBar,w=n("./renderloop").RenderLoop,_=n("./layer/font_metrics").FontMetrics,E=n("./lib/event_emitter").EventEmitter,y=n("./css/editor-css"),x=n("./layer/decorators").Decorator,v=n("./lib/useragent"),S=n("./layer/text_util").isTextToken;s.importCssString(y,"ace_editor.css",!1);var M=function(){function $(T,I){var C=this;this.container=T||s.createElement("div"),s.addCssClass(this.container,"ace_editor"),s.HI_DPI&&s.addCssClass(this.container,"ace_hidpi"),this.setTheme(I),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=s.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=s.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=s.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new l(this.content);var b=this.$textLayer=new p(this.content);this.canvas=b.element,this.$markerFront=new l(this.content),this.$cursorLayer=new h(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.on("scroll",function(A){C.$scrollAnimation||C.session.setScrollTop(A.data-C.scrollMargin.top)}),this.scrollBarH.on("scroll",function(A){C.$scrollAnimation||C.session.setScrollLeft(A.data-C.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(A){C.updateCharacterSize(),C.onResize(!0,C.gutterWidth,C.$size.width,C.$size.height),C._signal("changeCharacterSize",A)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!v.isIOS,this.$loop=new w(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return $.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),s.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},$.prototype.setSession=function(T){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=T,T&&this.scrollMargin.top&&T.getScrollTop()<=0&&T.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(T),this.$markerBack.setSession(T),this.$markerFront.setSession(T),this.$gutterLayer.setSession(T),this.$textLayer.setSession(T),T&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},$.prototype.updateLines=function(T,I,C){if(I===void 0&&(I=1/0),this.$changedLines?(this.$changedLines.firstRow>T&&(this.$changedLines.firstRow=T),this.$changedLines.lastRow<I&&(this.$changedLines.lastRow=I)):this.$changedLines={firstRow:T,lastRow:I},this.$changedLines.lastRow<this.layerConfig.firstRow)if(C)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},$.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},$.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},$.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},$.prototype.updateFull=function(T){T?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},$.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},$.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},$.prototype.onResize=function(T,I,C,b){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=T?1:0;var A=this.container;b||(b=A.clientHeight||A.scrollHeight),!b&&this.$maxLines&&this.lineHeight>1&&(!A.style.height||A.style.height=="0px")&&(A.style.height="1px",b=A.clientHeight||A.scrollHeight),C||(C=A.clientWidth||A.scrollWidth);var R=this.$updateCachedSize(T,I,C,b);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!C&&!b)return this.resizing=0;T&&(this.$gutterLayer.$padding=null),T?this.$renderChanges(R|this.$changes,!0):this.$loop.schedule(R|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},$.prototype.$updateCachedSize=function(T,I,C,b){b-=this.$extraHeight||0;var A=0,R=this.$size,k={width:R.width,height:R.height,scrollerHeight:R.scrollerHeight,scrollerWidth:R.scrollerWidth};if(b&&(T||R.height!=b)&&(R.height=b,A|=this.CHANGE_SIZE,R.scrollerHeight=R.height,this.$horizScroll&&(R.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(R.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",A=A|this.CHANGE_SCROLL),C&&(T||R.width!=C)){A|=this.CHANGE_SIZE,R.width=C,I==null&&(I=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=I,s.setStyle(this.scrollBarH.element.style,"left",I+"px"),s.setStyle(this.scroller.style,"left",I+this.margin.left+"px"),R.scrollerWidth=Math.max(0,C-I-this.scrollBarV.getWidth()-this.margin.h),s.setStyle(this.$gutter.style,"left",this.margin.left+"px");var O=this.scrollBarV.getWidth()+"px";s.setStyle(this.scrollBarH.element.style,"right",O),s.setStyle(this.scroller.style,"right",O),s.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(R.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||T)&&(A|=this.CHANGE_FULL)}return R.$dirty=!C||!b,A&&this._signal("resize",k),A},$.prototype.onGutterResize=function(T){var I=this.$showGutter?T:0;I!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,I,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},$.prototype.adjustWrapLimit=function(){var T=this.$size.scrollerWidth-this.$padding*2,I=Math.floor(T/this.characterWidth);return this.session.adjustWrapLimit(I,this.$showPrintMargin&&this.$printMarginColumn)},$.prototype.setAnimatedScroll=function(T){this.setOption("animatedScroll",T)},$.prototype.getAnimatedScroll=function(){return this.$animatedScroll},$.prototype.setShowInvisibles=function(T){this.setOption("showInvisibles",T),this.session.$bidiHandler.setShowInvisibles(T)},$.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},$.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},$.prototype.setDisplayIndentGuides=function(T){this.setOption("displayIndentGuides",T)},$.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},$.prototype.setHighlightIndentGuides=function(T){this.setOption("highlightIndentGuides",T)},$.prototype.setShowPrintMargin=function(T){this.setOption("showPrintMargin",T)},$.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},$.prototype.setPrintMarginColumn=function(T){this.setOption("printMarginColumn",T)},$.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},$.prototype.getShowGutter=function(){return this.getOption("showGutter")},$.prototype.setShowGutter=function(T){return this.setOption("showGutter",T)},$.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},$.prototype.setFadeFoldWidgets=function(T){this.setOption("fadeFoldWidgets",T)},$.prototype.setHighlightGutterLine=function(T){this.setOption("highlightGutterLine",T)},$.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},$.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var T=s.createElement("div");T.className="ace_layer ace_print-margin-layer",this.$printMarginEl=s.createElement("div"),this.$printMarginEl.className="ace_print-margin",T.appendChild(this.$printMarginEl),this.content.insertBefore(T,this.content.firstChild)}var I=this.$printMarginEl.style;I.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",I.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},$.prototype.getContainerElement=function(){return this.container},$.prototype.getMouseEventTarget=function(){return this.scroller},$.prototype.getTextAreaContainer=function(){return this.container},$.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var T=this.textarea.style,I=this.$composition;if(!this.$keepTextAreaAtCursor&&!I){s.translate(this.textarea,-100,0);return}var C=this.$cursorLayer.$pixelPos;if(C){I&&I.markerRange&&(C=this.$cursorLayer.getPixelPosition(I.markerRange.start,!0));var b=this.layerConfig,A=C.top,R=C.left;A-=b.offset;var k=I&&I.useTextareaForIME||v.isMobile?this.lineHeight:1;if(A<0||A>b.height-k){s.translate(this.textarea,0,0);return}var O=1,N=this.$size.height-k;if(!I)A+=this.lineHeight;else if(I.useTextareaForIME){var W=this.textarea.value;O=this.characterWidth*this.session.$getStringScreenWidth(W)[0]}else A+=this.lineHeight+2;R-=this.scrollLeft,R>this.$size.scrollerWidth-O&&(R=this.$size.scrollerWidth-O),R+=this.gutterWidth+this.margin.left,s.setStyle(T,"height",k+"px"),s.setStyle(T,"width",O+"px"),s.translate(this.textarea,Math.min(R,this.$size.scrollerWidth-O),Math.min(A,N))}}},$.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},$.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},$.prototype.getLastFullyVisibleRow=function(){var T=this.layerConfig,I=T.lastRow,C=this.session.documentToScreenRow(I,0)*T.lineHeight;return C-this.session.getScrollTop()>T.height-T.lineHeight?I-1:I},$.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},$.prototype.setPadding=function(T){this.$padding=T,this.$textLayer.setPadding(T),this.$cursorLayer.setPadding(T),this.$markerFront.setPadding(T),this.$markerBack.setPadding(T),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},$.prototype.setScrollMargin=function(T,I,C,b){var A=this.scrollMargin;A.top=T|0,A.bottom=I|0,A.right=b|0,A.left=C|0,A.v=A.top+A.bottom,A.h=A.left+A.right,A.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-A.top),this.updateFull()},$.prototype.setMargin=function(T,I,C,b){var A=this.margin;A.top=T|0,A.bottom=I|0,A.right=b|0,A.left=C|0,A.v=A.top+A.bottom,A.h=A.left+A.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},$.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},$.prototype.setHScrollBarAlwaysVisible=function(T){this.setOption("hScrollBarAlwaysVisible",T)},$.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},$.prototype.setVScrollBarAlwaysVisible=function(T){this.setOption("vScrollBarAlwaysVisible",T)},$.prototype.$updateScrollBarV=function(){var T=this.layerConfig.maxHeight,I=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(T-=(I-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>T-I&&(T=this.scrollTop+I,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(T+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},$.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},$.prototype.freeze=function(){this.$frozen=!0},$.prototype.unfreeze=function(){this.$frozen=!1},$.prototype.$renderChanges=function(T,I){if(this.$changes&&(T|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!T&&!I){this.$changes|=T;return}if(this.$size.$dirty)return this.$changes|=T,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",T),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var C=this.layerConfig;if(T&this.CHANGE_FULL||T&this.CHANGE_SIZE||T&this.CHANGE_TEXT||T&this.CHANGE_LINES||T&this.CHANGE_SCROLL||T&this.CHANGE_H_SCROLL){if(T|=this.$computeLayerConfig()|this.$loop.clear(),C.firstRow!=this.layerConfig.firstRow&&C.firstRowScreen==this.layerConfig.firstRowScreen){var b=this.scrollTop+(C.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;b>0&&(this.scrollTop=b,T=T|this.CHANGE_SCROLL,T|=this.$computeLayerConfig()|this.$loop.clear())}C=this.layerConfig,this.$updateScrollBarV(),T&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),s.translate(this.content,-this.scrollLeft,-C.offset);var A=C.width+2*this.$padding+"px",R=C.minHeight+"px";s.setStyle(this.content.style,"width",A),s.setStyle(this.content.style,"height",R)}if(T&this.CHANGE_H_SCROLL&&(s.translate(this.content,-this.scrollLeft,-C.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),T&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(C),this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C),this.$markerBack.update(C),this.$markerFront.update(C),this.$cursorLayer.update(C),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}if(T&this.CHANGE_SCROLL){this.$changedLines=null,T&this.CHANGE_TEXT||T&this.CHANGE_LINES?this.$textLayer.update(C):this.$textLayer.scrollLines(C),this.$showGutter&&(T&this.CHANGE_GUTTER||T&this.CHANGE_LINES?this.$gutterLayer.update(C):this.$gutterLayer.scrollLines(C)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C),this.$markerBack.update(C),this.$markerFront.update(C),this.$cursorLayer.update(C),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}T&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(C),this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):T&this.CHANGE_LINES?((this.$updateLines()||T&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):T&this.CHANGE_TEXT||T&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):T&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)),T&this.CHANGE_CURSOR&&(this.$cursorLayer.update(C),this.$moveTextAreaToCursor()),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(C),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(C),this._signal("afterRender",T)},$.prototype.$autosize=function(){var T=this.session.getScreenLength()*this.lineHeight,I=this.$maxLines*this.lineHeight,C=Math.min(I,Math.max((this.$minLines||1)*this.lineHeight,T))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(C+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&C>this.$maxPixelHeight&&(C=this.$maxPixelHeight);var b=C<=2*this.lineHeight,A=!b&&T>I;if(C!=this.desiredHeight||this.$size.height!=this.desiredHeight||A!=this.$vScroll){A!=this.$vScroll&&(this.$vScroll=A,this.scrollBarV.setVisible(A));var R=this.container.clientWidth;this.container.style.height=C+"px",this.$updateCachedSize(!0,this.$gutterWidth,R,C),this.desiredHeight=C,this._signal("autosize")}},$.prototype.$computeLayerConfig=function(){var T=this.session,I=this.$size,C=I.height<=2*this.lineHeight,b=this.session.getScreenLength(),A=b*this.lineHeight,R=this.$getLongestLine(),k=!C&&(this.$hScrollBarAlwaysVisible||I.scrollerWidth-R-2*this.$padding<0),O=this.$horizScroll!==k;O&&(this.$horizScroll=k,this.scrollBarH.setVisible(k));var N=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var W=I.scrollerHeight+this.lineHeight,z=!this.$maxLines&&this.$scrollPastEnd?(I.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;A+=z;var V=this.scrollMargin;this.session.setScrollTop(Math.max(-V.top,Math.min(this.scrollTop,A-I.scrollerHeight+V.bottom))),this.session.setScrollLeft(Math.max(-V.left,Math.min(this.scrollLeft,R+2*this.$padding-I.scrollerWidth+V.right)));var U=!C&&(this.$vScrollBarAlwaysVisible||I.scrollerHeight-A+z<0||this.scrollTop>V.top),H=N!==U;H&&(this.$vScroll=U,this.scrollBarV.setVisible(U));var Y=this.scrollTop%this.lineHeight,K=Math.ceil(W/this.lineHeight)-1,P=Math.max(0,Math.round((this.scrollTop-Y)/this.lineHeight)),D=P+K,L,j,F=this.lineHeight;P=T.screenToDocumentRow(P,0);var Q=T.getFoldLine(P);Q&&(P=Q.start.row),L=T.documentToScreenRow(P,0),j=T.getRowLength(P)*F,D=Math.min(T.screenToDocumentRow(D,0),T.getLength()-1),W=I.scrollerHeight+T.getRowLength(D)*F+j,Y=this.scrollTop-L*F;var q=0;return(this.layerConfig.width!=R||O)&&(q=this.CHANGE_H_SCROLL),(O||H)&&(q|=this.$updateCachedSize(!0,this.gutterWidth,I.width,I.height),this._signal("scrollbarVisibilityChanged"),H&&(R=this.$getLongestLine())),this.layerConfig={width:R,padding:this.$padding,firstRow:P,firstRowScreen:L,lastRow:D,lineHeight:F,characterWidth:this.characterWidth,minHeight:W,maxHeight:A,offset:Y,gutterOffset:F?Math.max(0,Math.ceil((Y+I.height-I.scrollerHeight)/F)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(R-this.$padding),q},$.prototype.$updateLines=function(){if(this.$changedLines){var T=this.$changedLines.firstRow,I=this.$changedLines.lastRow;this.$changedLines=null;var C=this.layerConfig;if(!(T>C.lastRow+1)&&!(I<C.firstRow)){if(I===1/0){this.$showGutter&&this.$gutterLayer.update(C),this.$textLayer.update(C);return}return this.$textLayer.updateLines(C,T,I),!0}}},$.prototype.$getLongestLine=function(){var T=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(T+=1),this.$textLayer&&T>this.$textLayer.MAX_LINE_LENGTH&&(T=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(T*this.characterWidth))},$.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},$.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},$.prototype.addGutterDecoration=function(T,I){this.$gutterLayer.addGutterDecoration(T,I)},$.prototype.removeGutterDecoration=function(T,I){this.$gutterLayer.removeGutterDecoration(T,I)},$.prototype.updateBreakpoints=function(T){this._rows=T,this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.setAnnotations=function(T){this.$gutterLayer.setAnnotations(T),this.$loop.schedule(this.CHANGE_GUTTER)},$.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},$.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},$.prototype.showCursor=function(){this.$cursorLayer.showCursor()},$.prototype.scrollSelectionIntoView=function(T,I,C){this.scrollCursorIntoView(T,C),this.scrollCursorIntoView(I,C)},$.prototype.scrollCursorIntoView=function(T,I,C){if(this.$size.scrollerHeight!==0){var b=this.$cursorLayer.getPixelPosition(T),A=b.left,R=b.top,k=C&&C.top||0,O=C&&C.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var N=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;N+k>R?(I&&N+k>R+this.lineHeight&&(R-=I*this.$size.scrollerHeight),R===0&&(R=-this.scrollMargin.top),this.session.setScrollTop(R)):N+this.$size.scrollerHeight-O<R+this.lineHeight&&(I&&N+this.$size.scrollerHeight-O<R-this.lineHeight&&(R+=I*this.$size.scrollerHeight),this.session.setScrollTop(R+this.lineHeight+O-this.$size.scrollerHeight));var W=this.scrollLeft,z=2*this.layerConfig.characterWidth;A-z<W?(A-=z,A<this.$padding+z&&(A=-this.scrollMargin.left),this.session.setScrollLeft(A)):(A+=z,W+this.$size.scrollerWidth<A+this.characterWidth?this.session.setScrollLeft(Math.round(A+this.characterWidth-this.$size.scrollerWidth)):W<=this.$padding&&A-W<this.characterWidth&&this.session.setScrollLeft(0))}},$.prototype.getScrollTop=function(){return this.session.getScrollTop()},$.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},$.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},$.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},$.prototype.scrollToRow=function(T){this.session.setScrollTop(T*this.lineHeight)},$.prototype.alignCursor=function(T,I){typeof T=="number"&&(T={row:T,column:0});var C=this.$cursorLayer.getPixelPosition(T),b=this.$size.scrollerHeight-this.lineHeight,A=C.top-b*(I||0);return this.session.setScrollTop(A),A},$.prototype.$calcSteps=function(T,I){var C=0,b=this.STEPS,A=[],R=function(k,O,N){return N*(Math.pow(k-1,3)+1)+O};for(C=0;C<b;++C)A.push(R(C/this.STEPS,T,I-T));return A},$.prototype.scrollToLine=function(T,I,C,b){var A=this.$cursorLayer.getPixelPosition({row:T,column:0}),R=A.top;I&&(R-=this.$size.scrollerHeight/2);var k=this.scrollTop;this.session.setScrollTop(R),C!==!1&&this.animateScrolling(k,b)},$.prototype.animateScrolling=function(T,I){var C=this.scrollTop;if(!this.$animatedScroll)return;var b=this;if(T==C)return;if(this.$scrollAnimation){var A=this.$scrollAnimation.steps;if(A.length&&(T=A[0],T==C))return}var R=b.$calcSteps(T,C);this.$scrollAnimation={from:T,to:C,steps:R},clearInterval(this.$timer),b.session.setScrollTop(R.shift()),b.session.$scrollTop=C;function k(){b.$timer=clearInterval(b.$timer),b.$scrollAnimation=null,b.$stopAnimation=!1,I&&I()}this.$timer=setInterval(function(){if(b.$stopAnimation){k();return}if(!b.session)return clearInterval(b.$timer);R.length?(b.session.setScrollTop(R.shift()),b.session.$scrollTop=C):C!=null?(b.session.$scrollTop=-1,b.session.setScrollTop(C),C=null):k()},10)},$.prototype.scrollToY=function(T){this.scrollTop!==T&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=T)},$.prototype.scrollToX=function(T){this.scrollLeft!==T&&(this.scrollLeft=T),this.$loop.schedule(this.CHANGE_H_SCROLL)},$.prototype.scrollTo=function(T,I){this.session.setScrollTop(I),this.session.setScrollLeft(T)},$.prototype.scrollBy=function(T,I){I&&this.session.setScrollTop(this.session.getScrollTop()+I),T&&this.session.setScrollLeft(this.session.getScrollLeft()+T)},$.prototype.isScrollableBy=function(T,I){if(I<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||I>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||T<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||T>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},$.prototype.pixelToScreenCoordinates=function(T,I){var C;if(this.$hasCssTransforms){C={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([T,I]);T=b[1]-this.gutterWidth-this.margin.left,I=b[0]}else C=this.scroller.getBoundingClientRect();var A=T+this.scrollLeft-C.left-this.$padding,R=A/this.characterWidth,k=Math.floor((I+this.scrollTop-C.top)/this.lineHeight),O=this.$blockCursor?Math.floor(R):Math.round(R);return{row:k,column:O,side:R-O>0?1:-1,offsetX:A}},$.prototype.screenToTextCoordinates=function(T,I){var C;if(this.$hasCssTransforms){C={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([T,I]);T=b[1]-this.gutterWidth-this.margin.left,I=b[0]}else C=this.scroller.getBoundingClientRect();var A=T+this.scrollLeft-C.left-this.$padding,R=A/this.characterWidth,k=this.$blockCursor?Math.floor(R):Math.round(R),O=Math.floor((I+this.scrollTop-C.top)/this.lineHeight);return this.session.screenToDocumentPosition(O,Math.max(k,0),A)},$.prototype.textToScreenCoordinates=function(T,I){var C=this.scroller.getBoundingClientRect(),b=this.session.documentToScreenPosition(T,I),A=this.$padding+(this.session.$bidiHandler.isBidiRow(b.row,T)?this.session.$bidiHandler.getPosLeft(b.column):Math.round(b.column*this.characterWidth)),R=b.row*this.lineHeight;return{pageX:C.left+A-this.scrollLeft,pageY:C.top+R-this.scrollTop}},$.prototype.visualizeFocus=function(){s.addCssClass(this.container,"ace_focus")},$.prototype.visualizeBlur=function(){s.removeCssClass(this.container,"ace_focus")},$.prototype.showComposition=function(T){this.$composition=T,T.cssText||(T.cssText=this.textarea.style.cssText),T.useTextareaForIME==null&&(T.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(s.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):T.markerId=this.session.addMarker(T.markerRange,"ace_composition_marker","text")},$.prototype.setCompositionText=function(T){var I=this.session.selection.cursor;this.addToken(T,"composition_placeholder",I.row,I.column),this.$moveTextAreaToCursor()},$.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),s.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var T=this.session.selection.cursor;this.removeExtraToken(T.row,T.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},$.prototype.setGhostText=function(T,I){var C=this.session.selection.cursor,b=I||{row:C.row,column:C.column};this.removeGhostText();var A=this.$calculateWrappedTextChunks(T,b);this.addToken(A[0].text,"ghost_text",b.row,b.column),this.$ghostText={text:T,position:{row:b.row,column:b.column}};var R=s.createElement("div");if(A.length>1){var k=this.hideTokensAfterPosition(b.row,b.column),O;A.slice(1).forEach(function(H){var Y=s.createElement("div"),K=s.createElement("span");K.className="ace_ghost_text",H.wrapped&&(Y.className="ghost_text_line_wrapped"),H.text.length===0&&(H.text=" "),K.appendChild(s.createTextNode(H.text)),Y.appendChild(K),R.appendChild(Y),O=Y}),k.forEach(function(H){var Y=s.createElement("span");S(H.type)||(Y.className="ace_"+H.type.replace(/\./g," ace_")),Y.appendChild(s.createTextNode(H.value)),O.appendChild(Y)}),this.$ghostTextWidget={el:R,row:b.row,column:b.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var N=this.$cursorLayer.getPixelPosition(b,!0),W=this.container,z=W.getBoundingClientRect().height,V=A.length*this.lineHeight,U=V<z-N.top;if(U)return;V<z?this.scrollBy(0,(A.length-1)*this.lineHeight):this.scrollToRow(b.row)}},$.prototype.$calculateWrappedTextChunks=function(T,I){var C=this.$size.scrollerWidth-this.$padding*2,b=Math.floor(C/this.characterWidth)-2;b=b<=0?60:b;for(var A=T.split(/\r?\n/),R=[],k=0;k<A.length;k++){var O=this.session.$getDisplayTokens(A[k],I.column),N=this.session.$computeWrapSplits(O,b,this.session.$tabSize);if(N.length>0){var W=0;N.push(A[k].length);for(var z=0;z<N.length;z++){var V=A[k].slice(W,N[z]);R.push({text:V,wrapped:!0}),W=N[z]}}else R.push({text:A[k],wrapped:!1})}return R},$.prototype.removeGhostText=function(){if(this.$ghostText){var T=this.$ghostText.position;this.removeExtraToken(T.row,T.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},$.prototype.addToken=function(T,I,C,b){var A=this.session;A.bgTokenizer.lines[C]=null;var R={type:I,value:T},k=A.getTokens(C);if(b==null||!k.length)k.push(R);else for(var O=0,N=0;N<k.length;N++){var W=k[N];if(O+=W.value.length,b<=O){var z=W.value.length-(O-b),V=W.value.slice(0,z),U=W.value.slice(z);k.splice(N,1,{type:W.type,value:V},R,{type:W.type,value:U});break}}this.updateLines(C,C)},$.prototype.hideTokensAfterPosition=function(T,I){for(var C=this.session.getTokens(T),b=0,A=!1,R=[],k=0;k<C.length;k++){var O=C[k];if(b+=O.value.length,O.type!=="ghost_text"){if(A){R.push({type:O.type,value:O.value}),O.type="hidden_token";continue}b===I&&(A=!0)}}return this.updateLines(T,T),R},$.prototype.removeExtraToken=function(T,I){this.session.bgTokenizer.lines[T]=null,this.updateLines(T,T)},$.prototype.setTheme=function(T,I){var C=this;if(this.$themeId=T,C._dispatchEvent("themeChange",{theme:T}),!T||typeof T=="string"){var b=T||this.$options.theme.initialValue;a.loadModule(["theme",b],A)}else A(T);function A(R){if(C.$themeId!=T)return I&&I();if(!R||!R.cssClass)throw new Error("couldn't load module "+T+" or it didn't call define");R.$id&&(C.$themeId=R.$id),s.importCssString(R.cssText,R.cssClass,C.container),C.theme&&s.removeCssClass(C.container,C.theme.cssClass);var k="padding"in R?R.padding:"padding"in(C.theme||{})?4:C.$padding;C.$padding&&k!=C.$padding&&C.setPadding(k),C.$theme=R.cssClass,C.theme=R,s.addCssClass(C.container,R.cssClass),s.setCssClass(C.container,"ace_dark",R.isDark),C.$size&&(C.$size.width=0,C.$updateSizeAsync()),C._dispatchEvent("themeLoaded",{theme:R}),I&&I(),v.isSafari&&C.scroller&&(C.scroller.style.background="red",C.scroller.style.background="")}},$.prototype.getTheme=function(){return this.$themeId},$.prototype.setStyle=function(T,I){s.setCssClass(this.container,T,I!==!1)},$.prototype.unsetStyle=function(T){s.removeCssClass(this.container,T)},$.prototype.setCursorStyle=function(T){s.setStyle(this.scroller.style,"cursor",T)},$.prototype.setMouseCursor=function(T){s.setStyle(this.scroller.style,"cursor",T)},$.prototype.attachToShadowRoot=function(){s.importCssString(y,"ace_editor.css",this.container)},$.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},$.prototype.$updateCustomScrollbar=function(T){var I=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,T===!0?(this.scrollBarV=new m(this.container,this),this.scrollBarH=new g(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(C){I.$scrollAnimation||I.session.setScrollTop(C.data-I.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(C){I.$scrollAnimation||I.session.setScrollLeft(C.data-I.scrollMargin.left)}),this.$scrollDecorator=new x(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new f(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.addEventListener("scroll",function(C){I.$scrollAnimation||I.session.setScrollTop(C.data-I.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(C){I.$scrollAnimation||I.session.setScrollLeft(C.data-I.scrollMargin.left)}))},$.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var T=this;this.$resizeTimer=c.delayedCall(function(){T.destroyed||T.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(I){var C=I[0].contentRect.width,b=I[0].contentRect.height;Math.abs(T.$size.width-C)>1||Math.abs(T.$size.height-b)>1?T.$resizeTimer.delay():T.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},$}();M.prototype.CHANGE_CURSOR=1,M.prototype.CHANGE_MARKER=2,M.prototype.CHANGE_GUTTER=4,M.prototype.CHANGE_SCROLL=8,M.prototype.CHANGE_LINES=16,M.prototype.CHANGE_TEXT=32,M.prototype.CHANGE_SIZE=64,M.prototype.CHANGE_MARKER_BACK=128,M.prototype.CHANGE_MARKER_FRONT=256,M.prototype.CHANGE_FULL=512,M.prototype.CHANGE_H_SCROLL=1024,M.prototype.$changes=0,M.prototype.$padding=null,M.prototype.$frozen=!1,M.prototype.STEPS=8,o.implement(M.prototype,E),a.defineOptions(M.prototype,"renderer",{useResizeObserver:{set:function($){!$&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):$&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function($){this.$textLayer.setShowInvisibles($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function($){typeof $=="number"&&(this.$printMarginColumn=$),this.$showPrintMargin=!!$,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function($){this.$gutter.style.display=$?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function($){this.$gutterLayer.$useSvgGutterIcons=$},initialValue:!1},showFoldedAnnotations:{set:function($){this.$gutterLayer.$showFoldedAnnotations=$},initialValue:!1},fadeFoldWidgets:{set:function($){s.setCssClass(this.$gutter,"ace_fade-fold-widgets",$)},initialValue:!1},showFoldWidgets:{set:function($){this.$gutterLayer.setShowFoldWidgets($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function($){this.$textLayer.setDisplayIndentGuides($)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function($){this.$textLayer.setHighlightIndentGuides($)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function($){this.$gutterLayer.setHighlightGutterLine($),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function($){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function($){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function($){typeof $=="number"&&($=$+"px"),this.container.style.fontSize=$,this.updateFontSize()},initialValue:12},fontFamily:{set:function($){this.container.style.fontFamily=$,this.updateFontSize()}},maxLines:{set:function($){this.updateFull()}},minLines:{set:function($){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function($){this.updateFull()},initialValue:0},scrollPastEnd:{set:function($){$=+$||0,this.$scrollPastEnd!=$&&(this.$scrollPastEnd=$,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function($){this.$gutterLayer.$fixedWidth=!!$,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function($){this.$updateCustomScrollbar($)},initialValue:!1},theme:{set:function($){this.setTheme($)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!v.isMobile&&!v.isIE}}),i.VirtualRenderer=M}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(n,i,r){var o=n("../lib/oop"),s=n("../lib/net"),c=n("../lib/event_emitter").EventEmitter,a=n("../config");function u(d){var f="importScripts('"+s.qualifyURL(d)+"');";try{return new Blob([f],{type:"application/javascript"})}catch{var g=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,m=new g;return m.append(f),m.getBlob("application/javascript")}}function l(d){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var f=u(d),g=window.URL||window.webkitURL,m=g.createObjectURL(f);return new Worker(m)}return new Worker(d)}var p=function(d){d.postMessage||(d=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=d,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,c),this.$createWorkerFromOldConfig=function(d,f,g,m,w){if(n.nameToUrl&&!n.toUrl&&(n.toUrl=n.nameToUrl),a.get("packaged")||!n.toUrl)m=m||a.moduleUrl(f,"worker");else{var _=this.$normalizePath;m=m||_(n.toUrl("ace/worker/worker.js",null,"_"));var E={};d.forEach(function(y){E[y]=_(n.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=l(m),w&&this.send("importScripts",w),this.$worker.postMessage({init:!0,tlns:E,module:f,classname:g}),this.$worker},this.onMessage=function(d){var f=d.data;switch(f.type){case"event":this._signal(f.name,{data:f.data});break;case"call":var g=this.callbacks[f.id];g&&(g(f.data),delete this.callbacks[f.id]);break;case"error":this.reportError(f.data);break;case"log":window.console&&console.log&&console.log.apply(console,f.data);break}},this.reportError=function(d){window.console&&console.error&&console.error(d)},this.$normalizePath=function(d){return s.qualifyURL(d)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(d){d.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(d,f){this.$worker.postMessage({command:d,args:f})},this.call=function(d,f,g){if(g){var m=this.callbackId++;this.callbacks[m]=g,f.push(m)}this.send(d,f)},this.emit=function(d,f){try{f.data&&f.data.err&&(f.data.err={message:f.data.err.message,stack:f.data.err.stack,code:f.data.err.code}),this.$worker&&this.$worker.postMessage({event:d,data:{data:f.data}})}catch(g){console.error(g.stack)}},this.attachToDocument=function(d){this.$doc&&this.terminate(),this.$doc=d,this.call("setValue",[d.getValue()]),d.on("change",this.changeListener,!0)},this.changeListener=function(d){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),d.action=="insert"?this.deltaQueue.push(d.start,d.lines):this.deltaQueue.push(d.start,d.end)},this.$sendDeltaQueue=function(){var d=this.deltaQueue;d&&(this.deltaQueue=null,d.length>50&&d.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:d}))}}).call(p.prototype);var h=function(d,f,g){var m=null,w=!1,_=Object.create(c),E=[],y=new p({messageBuffer:E,terminate:function(){},postMessage:function(v){E.push(v),m&&(w?setTimeout(x):x())}});y.setEmitSync=function(v){w=v};var x=function(){var v=E.shift();v.command?m[v.command].apply(m,v.args):v.event&&_._signal(v.event,v.data)};return _.postMessage=function(v){y.onMessage({data:v})},_.callback=function(v,S){this.postMessage({type:"call",id:S,data:v})},_.emit=function(v,S){this.postMessage({type:"event",name:v,data:S})},a.loadModule(["worker",f],function(v){for(m=new v[g](_);E.length;)x()}),y};i.UIWorkerClient=h,i.WorkerClient=p,i.createWorker=l}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(n,i,r){var o=n("./range").Range,s=n("./lib/event_emitter").EventEmitter,c=n("./lib/oop"),a=function(){function u(l,p,h,d,f,g){var m=this;this.length=p,this.session=l,this.doc=l.getDocument(),this.mainClass=f,this.othersClass=g,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){m.onCursorChange()})},this.$pos=h;var w=l.getUndoManager().$undoStack||l.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=w.length,this.setup(),l.selection.on("changeCursor",this.$onCursorChange)}return u.prototype.setup=function(){var l=this,p=this.doc,h=this.session;this.selectionBefore=h.selection.toJSON(),h.selection.inMultiSelectMode&&h.selection.toSingleRange(),this.pos=p.createAnchor(this.$pos.row,this.$pos.column);var d=this.pos;d.$insertRight=!0,d.detach(),d.markerId=h.addMarker(new o(d.row,d.column,d.row,d.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(f){var g=p.createAnchor(f.row,f.column);g.$insertRight=!0,g.detach(),l.others.push(g)}),h.setUndoSelect(!1)},u.prototype.showOtherMarkers=function(){if(!this.othersActive){var l=this.session,p=this;this.othersActive=!0,this.others.forEach(function(h){h.markerId=l.addMarker(new o(h.row,h.column,h.row,h.column+p.length),p.othersClass,null,!1)})}},u.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var l=0;l<this.others.length;l++)this.session.removeMarker(this.others[l].markerId)}},u.prototype.onUpdate=function(l){if(this.$updating)return this.updateAnchors(l);var p=l;if(p.start.row===p.end.row&&p.start.row===this.pos.row){this.$updating=!0;var h=l.action==="insert"?p.end.column-p.start.column:p.start.column-p.end.column,d=p.start.column>=this.pos.column&&p.start.column<=this.pos.column+this.length+1,f=p.start.column-this.pos.column;if(this.updateAnchors(l),d&&(this.length+=h),d&&!this.session.$fromUndo){if(l.action==="insert")for(var g=this.others.length-1;g>=0;g--){var m=this.others[g],w={row:m.row,column:m.column+f};this.doc.insertMergedLines(w,l.lines)}else if(l.action==="remove")for(var g=this.others.length-1;g>=0;g--){var m=this.others[g],w={row:m.row,column:m.column+f};this.doc.remove(new o(w.row,w.column,w.row,w.column-h))}}this.$updating=!1,this.updateMarkers()}},u.prototype.updateAnchors=function(l){this.pos.onChange(l);for(var p=this.others.length;p--;)this.others[p].onChange(l);this.updateMarkers()},u.prototype.updateMarkers=function(){if(!this.$updating){var l=this,p=this.session,h=function(f,g){p.removeMarker(f.markerId),f.markerId=p.addMarker(new o(f.row,f.column,f.row,f.column+l.length),g,null,!1)};h(this.pos,this.mainClass);for(var d=this.others.length;d--;)h(this.others[d],this.othersClass)}},u.prototype.onCursorChange=function(l){if(!(this.$updating||!this.session)){var p=this.session.selection.getCursor();p.row===this.pos.row&&p.column>=this.pos.column&&p.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",l)):(this.hideOtherMarkers(),this._emit("cursorLeave",l))}},u.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},u.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var l=this.session.getUndoManager(),p=(l.$undoStack||l.$undostack).length-this.$undoStackDepth,h=0;h<p;h++)l.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},u}();c.implement(a.prototype,s),i.PlaceHolder=a}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,i,r){var o=n("../lib/event"),s=n("../lib/useragent");function c(u,l){return u.row==l.row&&u.column==l.column}function a(u){var l=u.domEvent,p=l.altKey,h=l.shiftKey,d=l.ctrlKey,f=u.getAccelKey(),g=u.getButton();if(d&&s.isMac&&(g=l.button),u.editor.inMultiSelectMode&&g==2){u.editor.textInput.onContextMenu(u.domEvent);return}if(!d&&!p&&!f){g===0&&u.editor.inMultiSelectMode&&u.editor.exitMultiSelectMode();return}if(g===0){var m=u.editor,w=m.selection,_=m.inMultiSelectMode,E=u.getDocumentPosition(),y=w.getCursor(),x=u.inSelection()||w.isEmpty()&&c(E,y),v=u.x,S=u.y,M=function(V){v=V.clientX,S=V.clientY},$=m.session,T=m.renderer.pixelToScreenCoordinates(v,S),I=T,C;if(m.$mouseHandler.$enableJumpToDef)d&&p||f&&p?C=h?"block":"add":p&&m.$blockSelectEnabled&&(C="block");else if(f&&!p){if(C="add",!_&&h)return}else p&&m.$blockSelectEnabled&&(C="block");if(C&&s.isMac&&l.ctrlKey&&m.$mouseHandler.cancelContextMenu(),C=="add"){if(!_&&x)return;if(!_){var b=w.toOrientedRange();m.addSelectionMarker(b)}var A=w.rangeList.rangeAtPoint(E);m.inVirtualSelectionMode=!0,h&&(A=null,b=w.ranges[0]||b,m.removeSelectionMarker(b)),m.once("mouseup",function(){var V=w.toOrientedRange();A&&V.isEmpty()&&c(A.cursor,V.cursor)?w.substractPoint(V.cursor):(h?w.substractPoint(b.cursor):b&&(m.removeSelectionMarker(b),w.addRange(b)),w.addRange(V)),m.inVirtualSelectionMode=!1})}else if(C=="block"){u.stop(),m.inVirtualSelectionMode=!0;var R,k=[],O=function(){var V=m.renderer.pixelToScreenCoordinates(v,S),U=$.screenToDocumentPosition(V.row,V.column,V.offsetX);c(I,V)&&c(U,w.lead)||(I=V,m.selection.moveToPosition(U),m.renderer.scrollCursorIntoView(),m.removeSelectionMarkers(k),k=w.rectangularRangeBlock(I,T),m.$mouseHandler.$clickSelection&&k.length==1&&k[0].isEmpty()&&(k[0]=m.$mouseHandler.$clickSelection.clone()),k.forEach(m.addSelectionMarker,m),m.updateSelectionMarkers())};_&&!f?w.toSingleRange():!_&&f&&(R=w.toOrientedRange(),m.addSelectionMarker(R)),h?T=$.documentToScreenPosition(w.lead):w.moveToPosition(E),I={row:-1,column:-1};var N=function(V){O(),clearInterval(z),m.removeSelectionMarkers(k),k.length||(k=[w.toOrientedRange()]),R&&(m.removeSelectionMarker(R),w.toSingleRange(R));for(var U=0;U<k.length;U++)w.addRange(k[U]);m.inVirtualSelectionMode=!1,m.$mouseHandler.$clickSelection=null},W=O;o.capture(m.container,M,N);var z=setInterval(function(){W()},20);return u.preventDefault()}}}i.onMouseDown=a}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(n,i,r){i.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(s){s.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(s){s.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(s){s.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(s){s.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(s){s.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(s){s.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(s){s.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(s){s.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(s){s.multiSelect.rangeCount>1?s.multiSelect.joinSelections():s.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(s){s.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(s){s.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(s){s.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],i.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(s){s.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(s){return s&&s.inMultiSelectMode}}];var o=n("../keyboard/hash_handler").HashHandler;i.keyboardHandler=new o(i.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(n,i,r){var o=n("./range_list").RangeList,s=n("./range").Range,c=n("./selection").Selection,a=n("./mouse/multi_select_handler").onMouseDown,u=n("./lib/event"),l=n("./lib/lang"),p=n("./commands/multi_select_commands");i.commands=p.defaultCommands.concat(p.multiSelectCommands);var h=n("./search").Search,d=new h;function f(y,x,v){return d.$options.wrap=!0,d.$options.needle=x,d.$options.backwards=v==-1,d.find(y)}var g=n("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(g.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,x){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var v=this.toOrientedRange();if(this.rangeList.add(v),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),x||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(v),this.$onAddRange(v)}y.cursor||(y.cursor=y.end);var S=this.rangeList.add(y);return this.$onAddRange(y),S.length&&this.$onRemoveRange(S),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),x||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var x=this.rangeList.removeAll();x.length&&this.$onRemoveRange(x),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var x=this.rangeList.substractPoint(y);if(x)return this.$onRemoveRange(x),x[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var x=this.rangeList.ranges.pop();y.push(x),this.rangeCount=0}for(var v=y.length;v--;){var S=this.ranges.indexOf(y[v]);this.ranges.splice(S,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),x=x||this.ranges[0],x&&!x.isEqual(this.getRange())&&this.fromOrientedRange(x)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new o,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],x=[],v=0;v<y.length;v++){var S=y[v],M=S.start.row,$=S.end.row;if(M===$)x.push(S.clone());else{for(x.push(new s(M,S.start.column,M,this.session.getLine(M).length));++M<$;)x.push(this.getLineRange(M,!0));x.push(new s($,0,$,S.end.column))}v==0&&!this.isBackwards()&&(x=x.reverse())}this.toSingleRange();for(var v=x.length;v--;)this.addRange(x[v])},this.joinSelections=function(){var y=this.rangeList.ranges,x=y[y.length-1],v=s.fromPoints(y[0].start,x.end);this.toSingleRange(),this.setSelectionRange(v,x.cursor==x.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,x=y[y.length-1],v=s.fromPoints(y[0].start,x.end);this.toSingleRange(),this.setSelectionRange(v,x.cursor==x.start)}else{var S=this.session.documentToScreenPosition(this.cursor),M=this.session.documentToScreenPosition(this.anchor),$=this.rectangularRangeBlock(S,M);$.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,x,v){var S=[],M=y.column<x.column;if(M)var $=y.column,T=x.column,I=y.offsetX,C=x.offsetX;else var $=x.column,T=y.column,I=x.offsetX,C=y.offsetX;var b=y.row<x.row;if(b)var A=y.row,R=x.row;else var A=x.row,R=y.row;$<0&&($=0),A<0&&(A=0),A==R&&(v=!0);for(var k,O=A;O<=R;O++){var N=s.fromPoints(this.session.screenToDocumentPosition(O,$,I),this.session.screenToDocumentPosition(O,T,C));if(N.isEmpty()){if(k&&w(N.end,k))break;k=N.end}N.cursor=M?N.start:N.end,S.push(N)}if(b&&S.reverse(),!v){for(var W=S.length-1;S[W].isEmpty()&&W>0;)W--;if(W>0)for(var z=0;S[z].isEmpty();)z++;for(var V=W;V>=z;V--)S[V].isEmpty()&&S.splice(V,1)}return S}}).call(c.prototype);var m=n("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var x=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",x),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var x=this.session.$selectionMarkers.indexOf(y);x!=-1&&this.session.$selectionMarkers.splice(x,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var x=this.session.$selectionMarkers,v=y.length;v--;){var S=y[v];if(S.marker){this.session.removeMarker(S.marker);var M=x.indexOf(S);M!=-1&&x.splice(M,1)}}this.session.selectionMarkerCount=x.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(p.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(p.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var x=y.command,v=y.editor;if(v.multiSelect){if(x.multiSelectAction)x.multiSelectAction=="forEach"?S=v.forEachSelection(x,y.args):x.multiSelectAction=="forEachLine"?S=v.forEachSelection(x,y.args,!0):x.multiSelectAction=="single"?(v.exitMultiSelectMode(),S=x.exec(v,y.args||{})):S=x.multiSelectAction(v,y.args||{});else{var S=x.exec(v,y.args||{});v.multiSelect.addRange(v.multiSelect.toOrientedRange()),v.multiSelect.mergeOverlappingRanges()}return S}},this.forEachSelection=function(y,x,v){if(!this.inVirtualSelectionMode){var S=v&&v.keepOrder,M=v==!0||v&&v.$byLines,$=this.session,T=this.selection,I=T.rangeList,C=(S?T:I).ranges,b;if(!C.length)return y.exec?y.exec(this,x||{}):y(this,x||{});var A=T._eventRegistry;T._eventRegistry={};var R=new c($);this.inVirtualSelectionMode=!0;for(var k=C.length;k--;){if(M)for(;k>0&&C[k].start.row==C[k-1].end.row;)k--;R.fromOrientedRange(C[k]),R.index=k,this.selection=$.selection=R;var O=y.exec?y.exec(this,x||{}):y(this,x||{});!b&&O!==void 0&&(b=O),R.toOrientedRange(C[k])}R.detach(),this.selection=$.selection=T,this.inVirtualSelectionMode=!1,T._eventRegistry=A,T.mergeOverlappingRanges(),T.ranges[0]&&T.fromOrientedRange(T.ranges[0]);var N=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),N&&N.from==N.to&&this.renderer.animateScrolling(N.from),b}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var x=this.multiSelect.rangeList.ranges,v=[],S=0;S<x.length;S++)v.push(this.session.getTextRange(x[S]));var M=this.session.getDocument().getNewLineCharacter();y=v.join(M),y.length==(v.length-1)*M.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,x){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var v=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&x==this.multiSelect.anchor)return;var S=x==this.multiSelect.anchor?v.cursor==v.start?v.end:v.start:v.cursor;S.row!=x.row||this.session.$clipPositionToDocument(S.row,S.column).column!=x.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,x,v){if(x=x||{},x.needle=y||x.needle,x.needle==null){var S=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();x.needle=this.session.getTextRange(S)}this.$search.set(x);var M=this.$search.findAll(this.session);if(!M.length)return 0;var $=this.multiSelect;v||$.toSingleRange(M[0]);for(var T=M.length;T--;)$.addRange(M[T],!0);return S&&$.rangeList.rangeAtPoint(S.start)&&$.addRange(S,!0),M.length},this.selectMoreLines=function(y,x){var v=this.selection.toOrientedRange(),S=v.cursor==v.end,M=this.session.documentToScreenPosition(v.cursor);this.selection.$desiredColumn&&(M.column=this.selection.$desiredColumn);var $=this.session.screenToDocumentPosition(M.row+y,M.column);if(v.isEmpty())var I=$;else var T=this.session.documentToScreenPosition(S?v.end:v.start),I=this.session.screenToDocumentPosition(T.row+y,T.column);if(S){var C=s.fromPoints($,I);C.cursor=C.start}else{var C=s.fromPoints(I,$);C.cursor=C.end}if(C.desiredColumn=M.column,!this.selection.inMultiSelectMode)this.selection.addRange(v);else if(x)var b=v.cursor;this.selection.addRange(C),b&&this.selection.substractPoint(b)},this.transposeSelections=function(y){for(var x=this.session,v=x.multiSelect,S=v.ranges,M=S.length;M--;){var $=S[M];if($.isEmpty()){var T=x.getWordRange($.start.row,$.start.column);$.start.row=T.start.row,$.start.column=T.start.column,$.end.row=T.end.row,$.end.column=T.end.column}}v.mergeOverlappingRanges();for(var I=[],M=S.length;M--;){var $=S[M];I.unshift(x.getTextRange($))}y<0?I.unshift(I.pop()):I.push(I.shift());for(var M=S.length;M--;){var $=S[M],C=$.clone();x.replace($,I[M]),$.start.row=C.start.row,$.start.column=C.start.column}v.fromOrientedRange(v.ranges[0])},this.selectMore=function(y,x,v){var S=this.session,M=S.multiSelect,$=M.toOrientedRange();if(!($.isEmpty()&&($=S.getWordRange($.start.row,$.start.column),$.cursor=y==-1?$.start:$.end,this.multiSelect.addRange($),v))){var T=S.getTextRange($),I=f(S,T,y);I&&(I.cursor=y==-1?I.start:I.end,this.session.unfold(I),this.multiSelect.addRange(I),this.renderer.scrollCursorIntoView(null,.5)),x&&this.multiSelect.substractPoint($.cursor)}},this.alignCursors=function(){var y=this.session,x=y.multiSelect,v=x.ranges,S=-1,M=v.filter(function(W){if(W.cursor.row==S)return!0;S=W.cursor.row});if(!v.length||M.length==v.length-1){var $=this.selection.getRange(),T=$.start.row,I=$.end.row,C=T==I;if(C){var b=this.session.getLength(),A;do A=this.session.getLine(I);while(/[=:]/.test(A)&&++I<b);do A=this.session.getLine(T);while(/[=:]/.test(A)&&--T>0);T<0&&(T=0),I>=b&&(I=b-1)}var R=this.session.removeFullLines(T,I);R=this.$reAlignText(R,C),this.session.insert({row:T,column:0},R.join(`
`)+`
`),C||($.start.column=0,$.end.column=R[R.length-1].length),this.selection.setRange($)}else{M.forEach(function(W){x.substractPoint(W.cursor)});var k=0,O=1/0,N=v.map(function(W){var z=W.cursor,V=y.getLine(z.row),U=V.substr(z.column).search(/\S/g);return U==-1&&(U=0),z.column>k&&(k=z.column),U<O&&(O=U),U});v.forEach(function(W,z){var V=W.cursor,U=k-V.column,H=N[z]-O;U>H?y.insert(V,l.stringRepeat(" ",U-H)):y.remove(new s(V.row,V.column,V.row,V.column-U+H)),W.start.column=W.end.column=k,W.start.row=W.end.row=V.row,W.cursor=W.end}),x.fromOrientedRange(v[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,x){var v=!0,S=!0,M,$,T;return y.map(function(R){var k=R.match(/(\s*)(.*?)(\s*)([=:].*)/);return k?M==null?(M=k[1].length,$=k[2].length,T=k[3].length,k):(M+$+T!=k[1].length+k[2].length+k[3].length&&(S=!1),M!=k[1].length&&(v=!1),M>k[1].length&&(M=k[1].length),$<k[2].length&&($=k[2].length),T>k[3].length&&(T=k[3].length),k):[R]}).map(x?C:v?S?b:C:A);function I(R){return l.stringRepeat(" ",R)}function C(R){return R[2]?I(M)+R[2]+I($-R[2].length+T)+R[4].replace(/^([=:])\s+/,"$1 "):R[0]}function b(R){return R[2]?I(M+$-R[2].length)+R[2]+I(T)+R[4].replace(/^([=:])\s+/,"$1 "):R[0]}function A(R){return R[2]?I(M)+R[2]+I(T)+R[4].replace(/^([=:])\s+/,"$1 "):R[0]}}}).call(m.prototype);function w(y,x){return y.row==x.row&&y.column==x.column}i.onSessionChange=function(y){var x=y.session;x&&!x.multiSelect&&(x.$selectionMarkers=[],x.selection.$initRangeList(),x.multiSelect=x.selection),this.multiSelect=x&&x.multiSelect;var v=y.oldSession;v&&(v.multiSelect.off("addRange",this.$onAddRange),v.multiSelect.off("removeRange",this.$onRemoveRange),v.multiSelect.off("multiSelect",this.$onMultiSelect),v.multiSelect.off("singleSelect",this.$onSingleSelect),v.multiSelect.lead.off("change",this.$checkMultiselectChange),v.multiSelect.anchor.off("change",this.$checkMultiselectChange)),x&&(x.multiSelect.on("addRange",this.$onAddRange),x.multiSelect.on("removeRange",this.$onRemoveRange),x.multiSelect.on("multiSelect",this.$onMultiSelect),x.multiSelect.on("singleSelect",this.$onSingleSelect),x.multiSelect.lead.on("change",this.$checkMultiselectChange),x.multiSelect.anchor.on("change",this.$checkMultiselectChange)),x&&this.inMultiSelectMode!=x.selection.inMultiSelectMode&&(x.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=i.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",a),y.commands.addCommands(p.defaultCommands),E(y))}function E(y){if(!y.textInput)return;var x=y.textInput.getElement(),v=!1;u.addListener(x,"keydown",function(M){var $=M.keyCode==18&&!(M.ctrlKey||M.shiftKey||M.metaKey);y.$blockSelectEnabled&&$?v||(y.renderer.setMouseCursor("crosshair"),v=!0):v&&S()},y),u.addListener(x,"keyup",S,y),u.addListener(x,"blur",S,y);function S(M){v&&(y.renderer.setMouseCursor(""),v=!1)}}i.MultiSelect=_,n("./config").defineOptions(m.prototype,"editor",{enableMultiselect:{set:function(y){_(this),y?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(n,i,r){var o=n("../../range").Range,s=i.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(c,a,u){var l=c.getLine(u);return this.foldingStartMarker.test(l)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(l)?"end":""},this.getFoldWidgetRange=function(c,a,u){return null},this.indentationBlock=function(c,a,u){var l=/\S/,p=c.getLine(a),h=p.search(l);if(h!=-1){for(var d=u||p.length,f=c.getLength(),g=a,m=a;++a<f;){var w=c.getLine(a).search(l);if(w!=-1){if(w<=h){var _=c.getTokenAt(a,0);if(!_||_.type!=="string")break}m=a}}if(m>g){var E=c.getLine(m).length;return new o(g,d,m,E)}}},this.openingBracketBlock=function(c,a,u,l,p){var h={row:u,column:l+1},d=c.$findClosingBracket(a,h,p);if(d){var f=c.foldWidgets[d.row];return f==null&&(f=c.getFoldWidget(d.row)),f=="start"&&d.row>h.row&&(d.row--,d.column=c.getLine(d.row).length),o.fromPoints(h,d)}},this.closingBracketBlock=function(c,a,u,l,p){var h={row:u,column:l},d=c.$findOpeningBracket(a,h);if(d)return d.column++,h.column--,o.fromPoints(d,h)}}).call(s.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/lib/dom","ace/range","ace/config"],function(n,i,r){var o=n("../lib/dom"),s=n("../range").Range,c=n("../config").nls;function a(l,p,h){for(var d=0,f=l.length-1;d<=f;){var g=d+f>>1,m=h(p,l[g]);if(m>0)d=g+1;else if(m<0)f=g-1;else return g}return-(d+1)}function u(l,p,h){var d=l.getAnnotations().sort(s.comparePoints);if(d.length){var f=a(d,{row:p,column:-1},s.comparePoints);f<0&&(f=-f-1),f>=d.length?f=h>0?0:d.length-1:f===0&&h<0&&(f=d.length-1);var g=d[f];if(!(!g||!h)){if(g.row===p){do g=d[f+=h];while(g&&g.row===p);if(!g)return d.slice()}var m=[];p=g.row;do m[h<0?"unshift":"push"](g),g=d[f+=h];while(g&&g.row==p);return m.length&&m}}}i.showErrorMarker=function(l,p){var h=l.session,d=l.getCursorPosition(),f=d.row,g=h.widgetManager.getWidgetsAtRow(f).filter(function(M){return M.type=="errorMarker"})[0];g?g.destroy():f-=p;var m=u(h,f,p),w;if(m){var _=m[0];d.column=(_.pos&&typeof _.column!="number"?_.pos.sc:_.column)||0,d.row=_.row,w=l.renderer.$gutterLayer.$annotations[d.row]}else{if(g)return;w={displayText:[c("error-marker.good-state","Looks good!")],className:"ace_ok"}}l.session.unfold(d.row),l.selection.moveToPosition(d);var E={row:d.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div"),type:"errorMarker"},y=E.el.appendChild(o.createElement("div")),x=E.el.appendChild(o.createElement("div"));x.className="error_widget_arrow "+w.className;var v=l.renderer.$cursorLayer.getPixelPosition(d).left;x.style.left=v+l.renderer.gutterWidth-5+"px",E.el.className="error_widget_wrapper",y.className="error_widget "+w.className,w.displayText.forEach(function(M,$){y.appendChild(o.createTextNode(M)),$<w.displayText.length-1&&y.appendChild(o.createElement("br"))}),y.appendChild(o.createElement("div"));var S=function(M,$,T){if($===0&&(T==="esc"||T==="return"))return E.destroy(),{command:"null"}};E.destroy=function(){l.$mouseHandler.isMousePressed||(l.keyBinding.removeKeyboardHandler(S),h.widgetManager.removeLineWidget(E),l.off("changeSelection",E.destroy),l.off("changeSession",E.destroy),l.off("mouseup",E.destroy),l.off("change",E.destroy))},l.keyBinding.addKeyboardHandler(S),l.on("changeSelection",E.destroy),l.on("changeSession",E.destroy),l.on("mouseup",E.destroy),l.on("change",E.destroy),l.session.widgetManager.addLineWidget(E),E.el.onmousedown=l.focus.bind(l),l.renderer.scrollCursorIntoView(null,.5,{bottom:E.el.offsetHeight})},o.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(n,i,r){n("./loader_build")(i);var o=n("./lib/dom"),s=n("./range").Range,c=n("./editor").Editor,a=n("./edit_session").EditSession,u=n("./undomanager").UndoManager,l=n("./virtual_renderer").VirtualRenderer;n("./worker/worker_client"),n("./keyboard/hash_handler"),n("./placeholder"),n("./multi_select"),n("./mode/folding/fold_mode"),n("./theme/textmate"),n("./ext/error_marker"),i.config=n("./config"),i.edit=function(h,d){if(typeof h=="string"){var f=h;if(h=document.getElementById(f),!h)throw new Error("ace.edit can't find div #"+f)}if(h&&h.env&&h.env.editor instanceof c)return h.env.editor;var g="";if(h&&/input|textarea/i.test(h.tagName)){var m=h;g=m.value,h=o.createElement("pre"),m.parentNode.replaceChild(h,m)}else h&&(g=h.textContent,h.innerHTML="");var w=i.createEditSession(g),_=new c(new l(h),w,d),E={document:w,editor:_,onResize:_.resize.bind(_,null)};return m&&(E.textarea=m),_.on("destroy",function(){E.editor.container.env=null}),_.container.env=_.env=E,_},i.createEditSession=function(h,d){var f=new a(h,d);return f.setUndoManager(new u),f},i.Range=s,i.Editor=c,i.EditSession=a,i.UndoManager=u,i.VirtualRenderer=l;var p=i.config.version;i.version=p}),function(){ace.require(["ace/ace"],function(n){n&&(n.config.init(!0),n.define=ace.define);var i=function(){return this}();!i&&typeof window<"u"&&(i=window),!i&&typeof self<"u"&&(i=self),i.ace||(i.ace=n);for(var r in n)n.hasOwnProperty(r)&&(i.ace[r]=n[r]);i.ace.default=i.ace,e.exports=i.ace})}()}(op)),op.exports}var LB=kB();const Mt=Ay(LB),Ey=["blur","input","change","changeSelectionStyle","changeSession","copy","focus","paste"],DB=Dt({name:"VAceEditor",props:{value:{type:String,required:!0},lang:{type:String,default:"text"},theme:{type:String,default:"chrome"},options:Object,placeholder:String,readonly:Boolean,wrap:Boolean,printMargin:{type:[Boolean,Number],default:!0},minLines:Number,maxLines:Number},emits:["update:value","init",...Ey],render(){return Bx("div")},mounted(){const e=this._editor=Fx(Mt.edit(this.$el,{placeholder:this.placeholder,readOnly:this.readonly,value:this.value,mode:"ace/mode/"+this.lang,theme:"ace/theme/"+this.theme,wrap:this.wrap,printMargin:this.printMargin,useWorker:!1,minLines:this.minLines,maxLines:this.maxLines,...this.options}));this._contentBackup=this.value,this._isSettingContent=!1,e.on("change",()=>{if(this._isSettingContent)return;const t=e.getValue();this._contentBackup=t,this.$emit("update:value",t)}),Ey.forEach(t=>{const n="on"+jx(t);typeof this.$.vnode.props[n]=="function"&&e.on(t,this.$emit.bind(this,t))}),this._ro=new Ux(()=>e.resize()),this._ro.observe(this.$el),this.$emit("init",e)},beforeUnmount(){var e,t;(e=this._ro)===null||e===void 0||e.disconnect(),(t=this._editor)===null||t===void 0||t.destroy()},methods:{focus(){this._editor.focus()},blur(){this._editor.blur()},selectAll(){this._editor.selectAll()},getAceInstance(){return this._editor}},watch:{value(e){if(this._contentBackup!==e){try{this._isSettingContent=!0,this._editor.setValue(e,1)}finally{this._isSettingContent=!1}this._contentBackup=e}},theme(e){this._editor.setTheme("ace/theme/"+e)},options(e){this._editor.setOptions(e)},readonly(e){this._editor.setReadOnly(e)},placeholder(e){this._editor.setOption("placeholder",e)},wrap(e){this._editor.setWrapBehavioursEnabled(e)},printMargin(e){this._editor.setOption("printMargin",e)},lang(e){this._editor.setOption("mode","ace/mode/"+e)},minLines(e){this._editor.setOption("minLines",e)},maxLines(e){this._editor.setOption("maxLines",e)}}}),PB="data:text/javascript;base64,YWNlLmRlZmluZSgiYWNlL3RoZW1lL2dpdGh1Yi1jc3MiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXttb2R1bGUuZXhwb3J0cyA9ICIvKiBDU1Mgc3R5bGUgY29udGVudCBmcm9tIGdpdGh1YidzIGRlZmF1bHQgcHlnbWVudHMgaGlnaGxpZ2h0ZXIgdGVtcGxhdGUuXG4gICBDdXJzb3IgYW5kIHNlbGVjdGlvbiBzdHlsZXMgZnJvbSB0ZXh0bWF0ZS5jc3MuICovXG4uYWNlLWdpdGh1YiAuYWNlX2d1dHRlciB7XG4gIGJhY2tncm91bmQ6ICNlOGU4ZTg7XG4gIGNvbG9yOiAjQUFBO1xufVxuXG4uYWNlLWdpdGh1YiAge1xuICBiYWNrZ3JvdW5kOiAjZmZmO1xuICBjb2xvcjogIzAwMDtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9rZXl3b3JkIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2Vfc3RyaW5nIHtcbiAgY29sb3I6ICNEMTQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfdmFyaWFibGUuYWNlX2NsYXNzIHtcbiAgY29sb3I6IHRlYWw7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY29uc3RhbnQuYWNlX251bWVyaWMge1xuICBjb2xvcjogIzA5OTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9jb25zdGFudC5hY2VfYnVpbGRpbiB7XG4gIGNvbG9yOiAjMDA4NkIzO1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX3N1cHBvcnQuYWNlX2Z1bmN0aW9uIHtcbiAgY29sb3I6ICMwMDg2QjM7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY29tbWVudCB7XG4gIGNvbG9yOiAjOTk4O1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfdmFyaWFibGUuYWNlX2xhbmd1YWdlICB7XG4gIGNvbG9yOiAjMDA4NkIzO1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX3BhcmVuIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfYm9vbGVhbiB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX3N0cmluZy5hY2VfcmVnZXhwIHtcbiAgY29sb3I6ICMwMDk5MjY7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfdmFyaWFibGUuYWNlX2luc3RhbmNlIHtcbiAgY29sb3I6IHRlYWw7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY29uc3RhbnQuYWNlX2xhbmd1YWdlIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY3Vyc29yIHtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG4uYWNlLWdpdGh1Yi5hY2VfZm9jdXMgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9hY3RpdmUtbGluZSB7XG4gIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMjA0KTtcbn1cbi5hY2UtZ2l0aHViIC5hY2VfbWFya2VyLWxheWVyIC5hY2VfYWN0aXZlLWxpbmUge1xuICBiYWNrZ3JvdW5kOiByZ2IoMjQ1LCAyNDUsIDI0NSk7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc2VsZWN0aW9uIHtcbiAgYmFja2dyb3VuZDogcmdiKDE4MSwgMjEzLCAyNTUpO1xufVxuXG4uYWNlLWdpdGh1Yi5hY2VfbXVsdGlzZWxlY3QgLmFjZV9zZWxlY3Rpb24uYWNlX3N0YXJ0IHtcbiAgYm94LXNoYWRvdzogMCAwIDNweCAwcHggd2hpdGU7XG59XG4vKiBib2xkIGtleXdvcmRzIGNhdXNlIGN1cnNvciBpc3N1ZXMgZm9yIHNvbWUgZm9udHMgKi9cbi8qIHRoaXMgZGlzYWJsZXMgYm9sZCBzdHlsZSBmb3IgZWRpdG9yIGFuZCBrZWVwcyBmb3Igc3RhdGljIGhpZ2hsaWdodGVyICovXG4uYWNlLWdpdGh1Yi5hY2Vfbm9ib2xkIC5hY2VfbGluZSA+IHNwYW4ge1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWwgIWltcG9ydGFudDtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGVwIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MiwgMjU1LCAwKTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGFjayB7XG4gIGJhY2tncm91bmQ6IHJnYigxNjQsIDIyOSwgMTAxKTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9icmFja2V0IHtcbiAgbWFyZ2luOiAtMXB4IDAgMCAtMXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMTkyLCAxOTIsIDE5Mik7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfZ3V0dGVyLWFjdGl2ZS1saW5lIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yIDogcmdiYSgwLCAwLCAwLCAwLjA3KTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zZWxlY3RlZC13b3JkIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MCwgMjUwLCAyNTUpO1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjAwLCAyMDAsIDI1MCk7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfaW52aXNpYmxlIHtcbiAgY29sb3I6ICNCRkJGQkZcbn1cblxuLmFjZS1naXRodWIgLmFjZV9wcmludC1tYXJnaW4ge1xuICB3aWR0aDogMXB4O1xuICBiYWNrZ3JvdW5kOiAjZThlOGU4O1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX2luZGVudC1ndWlkZSB7XG4gIGJhY2tncm91bmQ6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQ0NBWUFBQUNaZ2JZbkFBQUFFMGxFUVZRSW1XUDQvLy8vZjRiTGx5Ly9Cd0FtVmdkMS93MTEvZ0FBQUFCSlJVNUVya0pnZ2c9PVwiKSByaWdodCByZXBlYXQteTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBQVpTVVJCVkhqYVl2ai8vLzkvaGl2S3l2OEJBQUFBLy84REFDTHFCaGJ2aysvZUFBQUFBRWxGVGtTdVFtQ0NcIikgcmlnaHQgcmVwZWF0LXk7XG59XG4iOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvdGhlbWUvZ2l0aHViIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL3RoZW1lL2dpdGh1Yi1jc3MiLCJhY2UvbGliL2RvbSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpe2V4cG9ydHMuaXNEYXJrID0gZmFsc2U7CmV4cG9ydHMuY3NzQ2xhc3MgPSAiYWNlLWdpdGh1YiI7CmV4cG9ydHMuY3NzVGV4dCA9IHJlcXVpcmUoIi4vZ2l0aHViLWNzcyIpOwp2YXIgZG9tID0gcmVxdWlyZSgiLi4vbGliL2RvbSIpOwpkb20uaW1wb3J0Q3NzU3RyaW5nKGV4cG9ydHMuY3NzVGV4dCwgZXhwb3J0cy5jc3NDbGFzcywgZmFsc2UpOwoKfSk7ICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhY2UucmVxdWlyZShbImFjZS90aGVtZS9naXRodWIiXSwgZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiB0eXBlb2YgZXhwb3J0cyA9PSAib2JqZWN0IiAmJiBtb2R1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAg",OB="data:text/javascript;base64,YWNlLmRlZmluZSgiYWNlL3RoZW1lL2Nocm9tZS1jc3MiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXttb2R1bGUuZXhwb3J0cyA9ICIuYWNlLWNocm9tZSAuYWNlX2d1dHRlciB7XG4gIGJhY2tncm91bmQ6ICNlYmViZWI7XG4gIGNvbG9yOiAjMzMzO1xuICBvdmVyZmxvdyA6IGhpZGRlbjtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9wcmludC1tYXJnaW4ge1xuICB3aWR0aDogMXB4O1xuICBiYWNrZ3JvdW5kOiAjZThlOGU4O1xufVxuXG4uYWNlLWNocm9tZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7XG4gIGNvbG9yOiBibGFjaztcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9jdXJzb3Ige1xuICBjb2xvcjogYmxhY2s7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfaW52aXNpYmxlIHtcbiAgY29sb3I6IHJnYigxOTEsIDE5MSwgMTkxKTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9jb25zdGFudC5hY2VfYnVpbGRpbiB7XG4gIGNvbG9yOiByZ2IoODgsIDcyLCAyNDYpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbnN0YW50LmFjZV9sYW5ndWFnZSB7XG4gIGNvbG9yOiByZ2IoODgsIDkyLCAyNDYpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbnN0YW50LmFjZV9saWJyYXJ5IHtcbiAgY29sb3I6IHJnYig2LCAxNTAsIDE0KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9pbnZhbGlkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE1MywgMCwgMCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9mb2xkIHtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV9mdW5jdGlvbiB7XG4gIGNvbG9yOiByZ2IoNjAsIDc2LCAxMTQpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX3N1cHBvcnQuYWNlX2NvbnN0YW50IHtcbiAgY29sb3I6IHJnYig2LCAxNTAsIDE0KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV90eXBlLFxuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV9jbGFzc1xuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV9vdGhlciB7XG4gIGNvbG9yOiByZ2IoMTA5LCAxMjEsIDIyMik7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfdmFyaWFibGUuYWNlX3BhcmFtZXRlciB7XG4gIGZvbnQtc3R5bGU6aXRhbGljO1xuICBjb2xvcjojRkQ5NzFGO1xufVxuLmFjZS1jaHJvbWUgLmFjZV9rZXl3b3JkLmFjZV9vcGVyYXRvciB7XG4gIGNvbG9yOiByZ2IoMTA0LCAxMTgsIDEzNSk7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfY29tbWVudCB7XG4gIGNvbG9yOiAjMjM2ZTI0O1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbW1lbnQuYWNlX2RvYyB7XG4gIGNvbG9yOiAjMjM2ZTI0O1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbW1lbnQuYWNlX2RvYy5hY2VfdGFnIHtcbiAgY29sb3I6ICMyMzZlMjQ7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfY29uc3RhbnQuYWNlX251bWVyaWMge1xuICBjb2xvcjogcmdiKDAsIDAsIDIwNSk7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfdmFyaWFibGUge1xuICBjb2xvcjogcmdiKDQ5LCAxMzIsIDE0OSk7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfeG1sLXBlIHtcbiAgY29sb3I6IHJnYigxMDQsIDEwNCwgOTEpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2VudGl0eS5hY2VfbmFtZS5hY2VfZnVuY3Rpb24ge1xuICBjb2xvcjogIzAwMDBBMjtcbn1cblxuXG4uYWNlLWNocm9tZSAuYWNlX2hlYWRpbmcge1xuICBjb2xvcjogcmdiKDEyLCA3LCAyNTUpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2xpc3Qge1xuICBjb2xvcjpyZ2IoMTg1LCA2LCAxNDQpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQ6IHJnYigxODEsIDIxMywgMjU1KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGVwIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MiwgMjU1LCAwKTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGFjayB7XG4gIGJhY2tncm91bmQ6IHJnYigxNjQsIDIyOSwgMTAxKTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9icmFja2V0IHtcbiAgbWFyZ2luOiAtMXB4IDAgMCAtMXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMTkyLCAxOTIsIDE5Mik7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfbWFya2VyLWxheWVyIC5hY2VfYWN0aXZlLWxpbmUge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDcpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2d1dHRlci1hY3RpdmUtbGluZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvciA6ICNkY2RjZGM7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc2VsZWN0ZWQtd29yZCB7XG4gIGJhY2tncm91bmQ6IHJnYigyNTAsIDI1MCwgMjU1KTtcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiKDIwMCwgMjAwLCAyNTApO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX3N0b3JhZ2UsXG4uYWNlLWNocm9tZSAuYWNlX2tleXdvcmQsXG4uYWNlLWNocm9tZSAuYWNlX21ldGEuYWNlX3RhZyB7XG4gIGNvbG9yOiByZ2IoMTQ3LCAxNSwgMTI4KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9zdHJpbmcuYWNlX3JlZ2V4IHtcbiAgY29sb3I6IHJnYigyNTUsIDAsIDApXG59XG5cbi5hY2UtY2hyb21lIC5hY2Vfc3RyaW5nIHtcbiAgY29sb3I6ICMxQTFBQTY7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfZW50aXR5LmFjZV9vdGhlci5hY2VfYXR0cmlidXRlLW5hbWUge1xuICBjb2xvcjogIzk5NDQwOTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9pbmRlbnQtZ3VpZGUge1xuICBiYWNrZ3JvdW5kOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUNDQVlBQUFDWmdiWW5BQUFBRTBsRVFWUUltV1A0Ly8vL2Y0YkxseS8vQndBbVZnZDEvdzExL2dBQUFBQkpSVTVFcmtKZ2dnPT1cIikgcmlnaHQgcmVwZWF0LXk7XG59XG4gIFxuLmFjZS1jaHJvbWUgLmFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBQVpTVVJCVkhqYVl2ai8vLzkvaGl2S3l2OEJBQUFBLy84REFDTHFCaGJ2aysvZUFBQUFBRWxGVGtTdVFtQ0NcIikgcmlnaHQgcmVwZWF0LXk7XG59XG4iOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvdGhlbWUvY2hyb21lIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL3RoZW1lL2Nocm9tZS1jc3MiLCJhY2UvbGliL2RvbSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpe2V4cG9ydHMuaXNEYXJrID0gZmFsc2U7CmV4cG9ydHMuY3NzQ2xhc3MgPSAiYWNlLWNocm9tZSI7CmV4cG9ydHMuY3NzVGV4dCA9IHJlcXVpcmUoIi4vY2hyb21lLWNzcyIpOwp2YXIgZG9tID0gcmVxdWlyZSgiLi4vbGliL2RvbSIpOwpkb20uaW1wb3J0Q3NzU3RyaW5nKGV4cG9ydHMuY3NzVGV4dCwgZXhwb3J0cy5jc3NDbGFzcywgZmFsc2UpOwoKfSk7ICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhY2UucmVxdWlyZShbImFjZS90aGVtZS9jaHJvbWUiXSwgZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiB0eXBlb2YgZXhwb3J0cyA9PSAib2JqZWN0IiAmJiBtb2R1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAg",NB="data:text/javascript;base64,YWNlLmRlZmluZSgiYWNlL3RoZW1lL21vbm9rYWktY3NzIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIl0sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSl7bW9kdWxlLmV4cG9ydHMgPSAiLmFjZS1tb25va2FpIC5hY2VfZ3V0dGVyIHtcbiAgYmFja2dyb3VuZDogIzJGMzEyOTtcbiAgY29sb3I6ICM4RjkwOEFcbn1cblxuLmFjZS1tb25va2FpIC5hY2VfcHJpbnQtbWFyZ2luIHtcbiAgd2lkdGg6IDFweDtcbiAgYmFja2dyb3VuZDogIzU1NTY1MVxufVxuXG4uYWNlLW1vbm9rYWkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjcyODIyO1xuICBjb2xvcjogI0Y4RjhGMlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9jdXJzb3Ige1xuICBjb2xvcjogI0Y4RjhGMFxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zZWxlY3Rpb24ge1xuICBiYWNrZ3JvdW5kOiAjNDk0ODNFXG59XG5cbi5hY2UtbW9ub2thaS5hY2VfbXVsdGlzZWxlY3QgLmFjZV9zZWxlY3Rpb24uYWNlX3N0YXJ0IHtcbiAgYm94LXNoYWRvdzogMCAwIDNweCAwcHggIzI3MjgyMjtcbn1cblxuLmFjZS1tb25va2FpIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc3RlcCB7XG4gIGJhY2tncm91bmQ6IHJnYigxMDIsIDgyLCAwKVxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9icmFja2V0IHtcbiAgbWFyZ2luOiAtMXB4IDAgMCAtMXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjNDk0ODNFXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX21hcmtlci1sYXllciAuYWNlX2FjdGl2ZS1saW5lIHtcbiAgYmFja2dyb3VuZDogIzIwMjAyMFxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9ndXR0ZXItYWN0aXZlLWxpbmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjcyNzI3XG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGVkLXdvcmQge1xuICBib3JkZXI6IDFweCBzb2xpZCAjNDk0ODNFXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2ludmlzaWJsZSB7XG4gIGNvbG9yOiAjNTI1MjRkXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2VudGl0eS5hY2VfbmFtZS5hY2VfdGFnLFxuLmFjZS1tb25va2FpIC5hY2Vfa2V5d29yZCxcbi5hY2UtbW9ub2thaSAuYWNlX21ldGEuYWNlX3RhZyxcbi5hY2UtbW9ub2thaSAuYWNlX3N0b3JhZ2Uge1xuICBjb2xvcjogI0Y5MjY3MlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9wdW5jdHVhdGlvbixcbi5hY2UtbW9ub2thaSAuYWNlX3B1bmN0dWF0aW9uLmFjZV90YWcge1xuICBjb2xvcjogI2ZmZlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9jb25zdGFudC5hY2VfY2hhcmFjdGVyLFxuLmFjZS1tb25va2FpIC5hY2VfY29uc3RhbnQuYWNlX2xhbmd1YWdlLFxuLmFjZS1tb25va2FpIC5hY2VfY29uc3RhbnQuYWNlX251bWVyaWMsXG4uYWNlLW1vbm9rYWkgLmFjZV9jb25zdGFudC5hY2Vfb3RoZXIge1xuICBjb2xvcjogI0FFODFGRlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9pbnZhbGlkIHtcbiAgY29sb3I6ICNGOEY4RjA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGOTI2NzJcbn1cblxuLmFjZS1tb25va2FpIC5hY2VfaW52YWxpZC5hY2VfZGVwcmVjYXRlZCB7XG4gIGNvbG9yOiAjRjhGOEYwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUU4MUZGXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3N1cHBvcnQuYWNlX2NvbnN0YW50LFxuLmFjZS1tb25va2FpIC5hY2Vfc3VwcG9ydC5hY2VfZnVuY3Rpb24ge1xuICBjb2xvcjogIzY2RDlFRlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9mb2xkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0E2RTIyRTtcbiAgYm9yZGVyLWNvbG9yOiAjRjhGOEYyXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3N0b3JhZ2UuYWNlX3R5cGUsXG4uYWNlLW1vbm9rYWkgLmFjZV9zdXBwb3J0LmFjZV9jbGFzcyxcbi5hY2UtbW9ub2thaSAuYWNlX3N1cHBvcnQuYWNlX3R5cGUge1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG4gIGNvbG9yOiAjNjZEOUVGXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2VudGl0eS5hY2VfbmFtZS5hY2VfZnVuY3Rpb24sXG4uYWNlLW1vbm9rYWkgLmFjZV9lbnRpdHkuYWNlX290aGVyLFxuLmFjZS1tb25va2FpIC5hY2VfZW50aXR5LmFjZV9vdGhlci5hY2VfYXR0cmlidXRlLW5hbWUsXG4uYWNlLW1vbm9rYWkgLmFjZV92YXJpYWJsZSB7XG4gIGNvbG9yOiAjQTZFMjJFXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3ZhcmlhYmxlLmFjZV9wYXJhbWV0ZXIge1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG4gIGNvbG9yOiAjRkQ5NzFGXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3N0cmluZyB7XG4gIGNvbG9yOiAjRTZEQjc0XG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2NvbW1lbnQge1xuICBjb2xvcjogIzc1NzE1RVxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9pbmRlbnQtZ3VpZGUge1xuICBiYWNrZ3JvdW5kOiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUVrbEVRVlFJbVdQUTBGRDBaWEJ6ZC93UEFBalZBb3hlU2dOZUFBQUFBRWxGVGtTdVFtQ0MpIHJpZ2h0IHJlcGVhdC15XG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2luZGVudC1ndWlkZS1hY3RpdmUge1xuICBiYWNrZ3JvdW5kOiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUVrbEVRVlFJVzJQUTFkWDl6ekJ6NXN6L0FCQ2NCRkZlbnRMbEFBQUFBRWxGVGtTdVFtQ0MpIHJpZ2h0IHJlcGVhdC15O1xufVxuIjsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL3RoZW1lL21vbm9rYWkiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJhY2UvdGhlbWUvbW9ub2thaS1jc3MiLCJhY2UvbGliL2RvbSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpe2V4cG9ydHMuaXNEYXJrID0gdHJ1ZTsKZXhwb3J0cy5jc3NDbGFzcyA9ICJhY2UtbW9ub2thaSI7CmV4cG9ydHMuY3NzVGV4dCA9IHJlcXVpcmUoIi4vbW9ub2thaS1jc3MiKTsKdmFyIGRvbSA9IHJlcXVpcmUoIi4uL2xpYi9kb20iKTsKZG9tLmltcG9ydENzc1N0cmluZyhleHBvcnRzLmNzc1RleHQsIGV4cG9ydHMuY3NzQ2xhc3MsIGZhbHNlKTsKCn0pOyAgICAgICAgICAgICAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgYWNlLnJlcXVpcmUoWyJhY2UvdGhlbWUvbW9ub2thaSJdLCBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kdWxlID09ICJvYmplY3QiICYmIHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiICYmIG1vZHVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICA=",BB="/static/mode-json-Br7xisR1.js",FB="/static/mode-javascript-BsqC6-a8.js",jB="/static/mode-html-D1JD1XzD.js",HB="/static/mode-xml-KMrBekdR.js",WB="/static/mode-python-CtHp76XS.js",GB="/static/worker-base-jEXLGV2h.js",zB="/static/worker-json-DgwNIOck.js",VB="/static/worker-javascript-83fX02m4.js",UB="/static/worker-html-CwAdfQ5Q.js",YB="/static/worker-xml-Cuc9Z1jf.js",ZB="data:text/javascript;base64,CjsgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGFjZS5yZXF1aXJlKFsiYWNlL3NuaXBwZXRzL2pzb24iXSwgZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiB0eXBlb2YgZXhwb3J0cyA9PSAib2JqZWN0IiAmJiBtb2R1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAg",XB="/static/javascript-j3Qdpu5B.js",KB="/static/html-CGEWZv_r.js",QB="data:text/javascript;base64,CjsgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGFjZS5yZXF1aXJlKFsiYWNlL3NuaXBwZXRzL3htbCJdLCBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kdWxlID09ICJvYmplY3QiICYmIHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiICYmIG1vZHVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICA=",JB="/static/python-BNBRedho.js",qB="/static/ext-searchbox-BYpB7gNl.js";var ap={exports:{}},Sy;function e5(){return Sy||(Sy=1,function(e,t){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(n,i,r){var o=n("./lib/dom"),s=n("./lib/oop"),c=n("./lib/event_emitter").EventEmitter,a=n("./lib/lang"),u=n("./range").Range,l=n("./range_list").RangeList,p=n("./keyboard/hash_handler").HashHandler,h=n("./tokenizer").Tokenizer,d=n("./clipboard"),f={CURRENT_WORD:function(v){return v.session.getTextRange(v.session.getWordRange())},SELECTION:function(v,S,M){var $=v.session.getTextRange();return M?$.replace(/\n\r?([ \t]*\S)/g,`
`+M+"$1"):$},CURRENT_LINE:function(v){return v.session.getLine(v.getCursorPosition().row)},PREV_LINE:function(v){return v.session.getLine(v.getCursorPosition().row-1)},LINE_INDEX:function(v){return v.getCursorPosition().row},LINE_NUMBER:function(v){return v.getCursorPosition().row+1},SOFT_TABS:function(v){return v.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(v){return v.session.getTabSize()},CLIPBOARD:function(v){return d.getText&&d.getText()},FILENAME:function(v){return/[^/\\]*$/.exec(this.FILEPATH(v))[0]},FILENAME_BASE:function(v){return/[^/\\]*$/.exec(this.FILEPATH(v))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(v){return this.FILEPATH(v).replace(/[^/\\]*$/,"")},FILEPATH:function(v){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(v){var S=v.session.$mode||{};return S.blockComment&&S.blockComment.start||""},BLOCK_COMMENT_END:function(v){var S=v.session.$mode||{};return S.blockComment&&S.blockComment.end||""},LINE_COMMENT:function(v){var S=v.session.$mode||{};return S.lineCommentStart||""},CURRENT_YEAR:g.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:g.bind(null,{year:"2-digit"}),CURRENT_MONTH:g.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:g.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:g.bind(null,{month:"short"}),CURRENT_DATE:g.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:g.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:g.bind(null,{weekday:"short"}),CURRENT_HOUR:g.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:g.bind(null,{minute:"2-digit"}),CURRENT_SECOND:g.bind(null,{second:"2-digit"})};f.SELECTED_TEXT=f.SELECTION;function g(v){var S=new Date().toLocaleString("en-us",v);return S.length==1?"0"+S:S}var m=function(){function v(){this.snippetMap={},this.snippetNameMap={},this.variables=f}return v.prototype.getTokenizer=function(){return v.$tokenizer||this.createTokenizer()},v.prototype.createTokenizer=function(){function S(T){return T=T.substr(1),/^\d+$/.test(T)?[{tabstopId:parseInt(T,10)}]:[{text:T}]}function M(T){return"(?:[^\\\\"+T+"]|\\\\.)"}var $={regex:"/("+M("/")+"+)/",onMatch:function(T,I,C){var b=C[0];return b.fmtString=!0,b.guard=T.slice(1,-1),b.flag="",""},next:"formatString"};return v.$tokenizer=new h({start:[{regex:/\\./,onMatch:function(T,I,C){var b=T[1];return(b=="}"&&C.length||"`$\\".indexOf(b)!=-1)&&(T=b),[T]}},{regex:/}/,onMatch:function(T,I,C){return[C.length?C.shift():T]}},{regex:/\$(?:\d+|\w+)/,onMatch:S},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(T,I,C){var b=S(T.substr(1));return C.unshift(b[0]),b},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+M("\\|")+"*\\|",onMatch:function(T,I,C){var b=T.slice(1,-1).replace(/\\[,|\\]|,/g,function(A){return A.length==2?A[1]:"\0"}).split("\0").map(function(A){return{value:A}});return C[0].choices=b,[b[0]]},next:"start"},$,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(T,I,C){return C.length&&C[0].expectElse?(C[0].expectElse=!1,C[0].ifEnd={elseEnd:C[0]},[C[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(T,I,C){var b=T[1];return b=="}"&&C.length||"`$\\".indexOf(b)!=-1?T=b:b=="n"?T=`
`:b=="t"?T="	":"ulULE".indexOf(b)!=-1&&(T={changeCase:b,local:b>"a"}),[T]}},{regex:"/\\w*}",onMatch:function(T,I,C){var b=C.shift();return b&&(b.flag=T.slice(1,-1)),this.next=b&&b.tabstopId?"start":"",[b||T]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(T,I,C){return[{text:T.slice(1)}]}},{regex:/\${\w+/,onMatch:function(T,I,C){var b={text:T.slice(2)};return C.unshift(b),[b]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(T,I,C){var b=C.shift();return this.next=b&&b.tabstopId?"start":"",[b||T]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(T,I,C){var b=C[0];return b.formatFunction=T.slice(2,-1),[C.shift()]},next:"formatString"},$,{regex:/:[\?\-+]?/,onMatch:function(T,I,C){T[1]=="+"&&(C[0].ifEnd=C[0]),T[1]=="?"&&(C[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),v.$tokenizer},v.prototype.tokenizeTmSnippet=function(S,M){return this.getTokenizer().getLineTokens(S,M).tokens.map(function($){return $.value||$})},v.prototype.getVariableValue=function(S,M,$){if(/^\d+$/.test(M))return(this.variables.__||{})[M]||"";if(/^[A-Z]\d+$/.test(M))return(this.variables[M[0]+"__"]||{})[M.substr(1)]||"";if(M=M.replace(/^TM_/,""),!this.variables.hasOwnProperty(M))return"";var T=this.variables[M];return typeof T=="function"&&(T=this.variables[M](S,M,$)),T??""},v.prototype.tmStrFormat=function(S,M,$){if(!M.fmt)return S;var T=M.flag||"",I=M.guard;I=new RegExp(I,T.replace(/[^gim]/g,""));var C=typeof M.fmt=="string"?this.tokenizeTmSnippet(M.fmt,"formatString"):M.fmt,b=this,A=S.replace(I,function(){var R=b.variables.__;b.variables.__=[].slice.call(arguments);for(var k=b.resolveVariables(C,$),O="E",N=0;N<k.length;N++){var W=k[N];if(typeof W=="object")if(k[N]="",W.changeCase&&W.local){var z=k[N+1];z&&typeof z=="string"&&(W.changeCase=="u"?k[N]=z[0].toUpperCase():k[N]=z[0].toLowerCase(),k[N+1]=z.substr(1))}else W.changeCase&&(O=W.changeCase);else O=="U"?k[N]=W.toUpperCase():O=="L"&&(k[N]=W.toLowerCase())}return b.variables.__=R,k.join("")});return A},v.prototype.tmFormatFunction=function(S,M,$){return M.formatFunction=="upcase"?S.toUpperCase():M.formatFunction=="downcase"?S.toLowerCase():S},v.prototype.resolveVariables=function(S,M){for(var $=[],T="",I=!0,C=0;C<S.length;C++){var b=S[C];if(typeof b=="string"){$.push(b),b==`
`?(I=!0,T=""):I&&(T=/^\t*/.exec(b)[0],I=/\S/.test(b));continue}if(b){if(I=!1,b.fmtString){var A=S.indexOf(b,C+1);A==-1&&(A=S.length),b.fmt=S.slice(C+1,A),C=A}if(b.text){var R=this.getVariableValue(M,b.text,T)+"";b.fmtString&&(R=this.tmStrFormat(R,b,M)),b.formatFunction&&(R=this.tmFormatFunction(R,b,M)),R&&!b.ifEnd?($.push(R),k(b)):!R&&b.ifEnd&&k(b.ifEnd)}else b.elseEnd?k(b.elseEnd):(b.tabstopId!=null||b.changeCase!=null)&&$.push(b)}}function k(O){var N=S.indexOf(O,C+1);N!=-1&&(C=N)}return $},v.prototype.getDisplayTextForSnippet=function(S,M){var $=w.call(this,S,M);return $.text},v.prototype.insertSnippetForSelection=function(S,M,$){$===void 0&&($={});var T=w.call(this,S,M,$),I=S.getSelectionRange(),C=S.session.replace(I,T.text),b=new _(S),A=S.inVirtualSelectionMode&&S.selection.index;b.addTabstops(T.tabstops,I.start,C,A)},v.prototype.insertSnippet=function(S,M,$){$===void 0&&($={});var T=this;if(S.inVirtualSelectionMode)return T.insertSnippetForSelection(S,M,$);S.forEachSelection(function(){T.insertSnippetForSelection(S,M,$)},null,{keepOrder:!0}),S.tabstopManager&&S.tabstopManager.tabNext()},v.prototype.$getScope=function(S){var M=S.session.$mode.$id||"";if(M=M.split("/").pop(),M==="html"||M==="php"){M==="php"&&!S.session.$mode.inlinePhp&&(M="html");var $=S.getCursorPosition(),T=S.session.getState($.row);typeof T=="object"&&(T=T[0]),T.substring&&(T.substring(0,3)=="js-"?M="javascript":T.substring(0,4)=="css-"?M="css":T.substring(0,4)=="php-"&&(M="php"))}return M},v.prototype.getActiveScopes=function(S){var M=this.$getScope(S),$=[M],T=this.snippetMap;return T[M]&&T[M].includeScopes&&$.push.apply($,T[M].includeScopes),$.push("_"),$},v.prototype.expandWithTab=function(S,M){var $=this,T=S.forEachSelection(function(){return $.expandSnippetForSelection(S,M)},null,{keepOrder:!0});return T&&S.tabstopManager&&S.tabstopManager.tabNext(),T},v.prototype.expandSnippetForSelection=function(S,M){var $=S.getCursorPosition(),T=S.session.getLine($.row),I=T.substring(0,$.column),C=T.substr($.column),b=this.snippetMap,A;return this.getActiveScopes(S).some(function(R){var k=b[R];return k&&(A=this.findMatchingSnippet(k,I,C)),!!A},this),A?(M&&M.dryRun||(S.session.doc.removeInLine($.row,$.column-A.replaceBefore.length,$.column+A.replaceAfter.length),this.variables.M__=A.matchBefore,this.variables.T__=A.matchAfter,this.insertSnippetForSelection(S,A.content),this.variables.M__=this.variables.T__=null),!0):!1},v.prototype.findMatchingSnippet=function(S,M,$){for(var T=S.length;T--;){var I=S[T];if(!(I.startRe&&!I.startRe.test(M))&&!(I.endRe&&!I.endRe.test($))&&!(!I.startRe&&!I.endRe))return I.matchBefore=I.startRe?I.startRe.exec(M):[""],I.matchAfter=I.endRe?I.endRe.exec($):[""],I.replaceBefore=I.triggerRe?I.triggerRe.exec(M)[0]:"",I.replaceAfter=I.endTriggerRe?I.endTriggerRe.exec($)[0]:"",I}},v.prototype.register=function(S,M){var $=this.snippetMap,T=this.snippetNameMap,I=this;S||(S=[]);function C(R){return R&&!/^\^?\(.*\)\$?$|^\\b$/.test(R)&&(R="(?:"+R+")"),R||""}function b(R,k,O){return R=C(R),k=C(k),R=k+R,R&&R[R.length-1]!="$"&&(R=R+"$"),new RegExp(R)}function A(R){R.scope||(R.scope=M||"_"),M=R.scope,$[M]||($[M]=[],T[M]={});var k=T[M];if(R.name){var O=k[R.name];O&&I.unregister(O),k[R.name]=R}$[M].push(R),R.prefix&&(R.tabTrigger=R.prefix),!R.content&&R.body&&(R.content=Array.isArray(R.body)?R.body.join(`
`):R.body),R.tabTrigger&&!R.trigger&&(!R.guard&&/^\w/.test(R.tabTrigger)&&(R.guard="\\b"),R.trigger=a.escapeRegExp(R.tabTrigger)),!(!R.trigger&&!R.guard&&!R.endTrigger&&!R.endGuard)&&(R.startRe=b(R.trigger,R.guard),R.triggerRe=new RegExp(R.trigger),R.endRe=b(R.endTrigger,R.endGuard),R.endTriggerRe=new RegExp(R.endTrigger))}Array.isArray(S)?S.forEach(A):Object.keys(S).forEach(function(R){A(S[R])}),this._signal("registerSnippets",{scope:M})},v.prototype.unregister=function(S,M){var $=this.snippetMap,T=this.snippetNameMap;function I(C){var b=T[C.scope||M];if(b&&b[C.name]){delete b[C.name];var A=$[C.scope||M],R=A&&A.indexOf(C);R>=0&&A.splice(R,1)}}S.content?I(S):Array.isArray(S)&&S.forEach(I)},v.prototype.parseSnippetFile=function(S){S=S.replace(/\r/g,"");for(var M=[],$={},T=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,I;I=T.exec(S);){if(I[1])try{$=JSON.parse(I[1]),M.push($)}catch{}if(I[4])$.content=I[4].replace(/^\t/gm,""),M.push($),$={};else{var C=I[2],b=I[3];if(C=="regex"){var A=/\/((?:[^\/\\]|\\.)*)|$/g;$.guard=A.exec(b)[1],$.trigger=A.exec(b)[1],$.endTrigger=A.exec(b)[1],$.endGuard=A.exec(b)[1]}else C=="snippet"?($.tabTrigger=b.match(/^\S*/)[0],$.name||($.name=b)):C&&($[C]=b)}}return M},v.prototype.getSnippetByName=function(S,M){var $=this.snippetNameMap,T;return this.getActiveScopes(M).some(function(I){var C=$[I];return C&&(T=C[S]),!!T},this),T},v}();s.implement(m.prototype,c);var w=function(v,S,M){M===void 0&&(M={});var $=v.getCursorPosition(),T=v.session.getLine($.row),I=v.session.getTabString(),C=T.match(/^\s*/)[0];$.column<C.length&&(C=C.slice(0,$.column)),S=S.replace(/\r/g,"");var b=this.tokenizeTmSnippet(S);b=this.resolveVariables(b,v),b=b.map(function(P){return P==`
`&&!M.excludeExtraIndent?P+C:typeof P=="string"?P.replace(/\t/g,I):P});var A=[];b.forEach(function(P,D){if(typeof P=="object"){var L=P.tabstopId,j=A[L];if(j||(j=A[L]=[],j.index=L,j.value="",j.parents={}),j.indexOf(P)===-1){P.choices&&!j.choices&&(j.choices=P.choices),j.push(P);var F=b.indexOf(P,D+1);if(F!==-1){var Q=b.slice(D+1,F),q=Q.some(function(ee){return typeof ee=="object"});q&&!j.value?j.value=Q:Q.length&&(!j.value||typeof j.value!="string")&&(j.value=Q.join(""))}}}}),A.forEach(function(P){P.length=0});var R={};function k(P){for(var D=[],L=0;L<P.length;L++){var j=P[L];if(typeof j=="object"){if(R[j.tabstopId])continue;var F=P.lastIndexOf(j,L-1);j=D[F]||{tabstopId:j.tabstopId}}D[L]=j}return D}for(var O=0;O<b.length;O++){var N=b[O];if(typeof N=="object"){var W=N.tabstopId,z=A[W],V=b.indexOf(N,O+1);if(R[W]){R[W]===N&&(delete R[W],Object.keys(R).forEach(function(P){z.parents[P]=!0}));continue}R[W]=N;var U=z.value;typeof U!="string"?U=k(U):N.fmt&&(U=this.tmStrFormat(U,N,v)),b.splice.apply(b,[O+1,Math.max(0,V-O)].concat(U,N)),z.indexOf(N)===-1&&z.push(N)}}var H=0,Y=0,K="";return b.forEach(function(P){if(typeof P=="string"){var D=P.split(`
`);D.length>1?(Y=D[D.length-1].length,H+=D.length-1):Y+=P.length,K+=P}else P&&(P.start?P.end={row:H,column:Y}:P.start={row:H,column:Y})}),{text:K,tabstops:A,tokens:b}},_=function(){function v(S){if(this.index=0,this.ranges=[],this.tabstops=[],S.tabstopManager)return S.tabstopManager;S.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=a.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(S)}return v.prototype.attach=function(S){this.$openTabstops=null,this.selectedTabstop=null,this.editor=S,this.session=S.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},v.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},v.prototype.onChange=function(S){for(var M=S.action[0]=="r",$=this.selectedTabstop||{},T=$.parents||{},I=this.tabstops.slice(),C=0;C<I.length;C++){var b=I[C],A=b==$||T[b.index];if(b.rangeList.$bias=A?0:1,S.action=="remove"&&b!==$){var R=b.parents&&b.parents[$.index],k=b.rangeList.pointIndex(S.start,R);k=k<0?-k-1:k+1;var O=b.rangeList.pointIndex(S.end,R);O=O<0?-O-1:O-1;for(var N=b.rangeList.ranges.slice(k,O),W=0;W<N.length;W++)this.removeRange(N[W])}b.rangeList.$onChange(S)}var z=this.session;!this.$inChange&&M&&z.getLength()==1&&!z.getValue()&&this.detach()},v.prototype.updateLinkedFields=function(){var S=this.selectedTabstop;if(!(!S||!S.hasLinkedRanges||!S.firstNonLinked)){this.$inChange=!0;for(var M=this.session,$=M.getTextRange(S.firstNonLinked),T=0;T<S.length;T++){var I=S[T];if(I.linked){var C=I.original,b=i.snippetManager.tmStrFormat($,C,this.editor);M.replace(I,b)}}this.$inChange=!1}},v.prototype.onAfterExec=function(S){S.command&&!S.command.readOnly&&this.updateLinkedFields()},v.prototype.onChangeSelection=function(){if(this.editor){for(var S=this.editor.selection.lead,M=this.editor.selection.anchor,$=this.editor.selection.isEmpty(),T=0;T<this.ranges.length;T++)if(!this.ranges[T].linked){var I=this.ranges[T].contains(S.row,S.column),C=$||this.ranges[T].contains(M.row,M.column);if(I&&C)return}this.detach()}},v.prototype.onChangeSession=function(){this.detach()},v.prototype.tabNext=function(S){var M=this.tabstops.length,$=this.index+(S||1);$=Math.min(Math.max($,1),M),$==M&&($=0),this.selectTabstop($),this.updateTabstopMarkers(),$===0&&this.detach()},v.prototype.selectTabstop=function(S){this.$openTabstops=null;var M=this.tabstops[this.index];if(M&&this.addTabstopMarkers(M),this.index=S,M=this.tabstops[this.index],!(!M||!M.length)){this.selectedTabstop=M;var $=M.firstNonLinked||M;if(M.choices&&($.cursor=$.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange($);else{var T=this.editor.multiSelect;T.toSingleRange($);for(var I=0;I<M.length;I++)M.hasLinkedRanges&&M[I].linked||T.addRange(M[I].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},v.prototype.addTabstops=function(S,M,$){var T=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!S[0]){var I=u.fromPoints($,$);y(I.start,M),y(I.end,M),S[0]=[I],S[0].index=0}var C=this.index,b=[C+1,0],A=this.ranges,R=this.snippetId=(this.snippetId||0)+1;S.forEach(function(k,O){var N=this.$openTabstops[O]||k;N.snippetId=R;for(var W=0;W<k.length;W++){var z=k[W],V=u.fromPoints(z.start,z.end||z.start);E(V.start,M),E(V.end,M),V.original=z,V.tabstop=N,A.push(V),N!=k?N.unshift(V):N[W]=V,z.fmtString||N.firstNonLinked&&T?(V.linked=!0,N.hasLinkedRanges=!0):N.firstNonLinked||(N.firstNonLinked=V)}N.firstNonLinked||(N.hasLinkedRanges=!1),N===k&&(b.push(N),this.$openTabstops[O]=N),this.addTabstopMarkers(N),N.rangeList=N.rangeList||new l,N.rangeList.$bias=0,N.rangeList.addList(N)},this),b.length>2&&(this.tabstops.length&&b.push(b.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,b))},v.prototype.addTabstopMarkers=function(S){var M=this.session;S.forEach(function($){$.markerId||($.markerId=M.addMarker($,"ace_snippet-marker","text"))})},v.prototype.removeTabstopMarkers=function(S){var M=this.session;S.forEach(function($){M.removeMarker($.markerId),$.markerId=null})},v.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var S=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&S--,this.tabstops.forEach(function(M){M.snippetId===S?this.addTabstopMarkers(M):this.removeTabstopMarkers(M)},this)}},v.prototype.removeRange=function(S){var M=S.tabstop.indexOf(S);M!=-1&&S.tabstop.splice(M,1),M=this.ranges.indexOf(S),M!=-1&&this.ranges.splice(M,1),M=S.tabstop.rangeList.ranges.indexOf(S),M!=-1&&S.tabstop.splice(M,1),this.session.removeMarker(S.markerId),S.tabstop.length||(M=this.tabstops.indexOf(S.tabstop),M!=-1&&this.tabstops.splice(M,1),this.tabstops.length||this.detach())},v}();_.prototype.keyboardHandler=new p,_.prototype.keyboardHandler.bindKeys({Tab:function(v){i.snippetManager&&i.snippetManager.expandWithTab(v)||(v.tabstopManager.tabNext(1),v.renderer.scrollCursorIntoView())},"Shift-Tab":function(v){v.tabstopManager.tabNext(-1),v.renderer.scrollCursorIntoView()},Esc:function(v){v.tabstopManager.detach()}});var E=function(v,S){v.row==0&&(v.column+=S.column),v.row+=S.row},y=function(v,S){v.row==S.row&&(v.column-=S.column),v.row-=S.row};o.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),i.snippetManager=new m;var x=n("./editor").Editor;(function(){this.insertSnippet=function(v,S){return i.snippetManager.insertSnippet(this,v,S)},this.expandSnippet=function(v){return i.snippetManager.expandWithTab(this,v)}}).call(x.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(n,i,r){var o=n("../virtual_renderer").VirtualRenderer,s=n("../editor").Editor,c=n("../range").Range,a=n("../lib/event"),u=n("../lib/lang"),l=n("../lib/dom"),p=n("../config").nls,h=n("./../lib/useragent"),d=function(E){return"suggest-aria-id:".concat(E)},f=h.isSafari?"menu":"listbox",g=h.isSafari?"menuitem":"option",m=h.isSafari?"aria-current":"aria-selected",w=function(E){var y=new o(E);y.$maxLines=4;var x=new s(y);return x.setHighlightActiveLine(!1),x.setShowPrintMargin(!1),x.renderer.setShowGutter(!1),x.renderer.setHighlightGutterLine(!1),x.$mouseHandler.$focusTimeout=0,x.$highlightTagPending=!0,x},_=function(){function E(y){var x=l.createElement("div"),v=w(x);y&&y.appendChild(x),x.style.display="none",v.renderer.content.style.cursor="default",v.renderer.setStyle("ace_autocomplete"),v.renderer.$textLayer.element.setAttribute("role",f),v.renderer.$textLayer.element.setAttribute("aria-roledescription",p("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),v.renderer.$textLayer.element.setAttribute("aria-label",p("autocomplete.popup.aria-label","Autocomplete suggestions")),v.renderer.textarea.setAttribute("aria-hidden","true"),v.setOption("displayIndentGuides",!1),v.setOption("dragDelay",150);var S=function(){};v.focus=S,v.$isFocused=!0,v.renderer.$cursorLayer.restartTimer=S,v.renderer.$cursorLayer.element.style.opacity="0",v.renderer.$maxLines=8,v.renderer.$keepTextAreaAtCursor=!1,v.setHighlightActiveLine(!1),v.session.highlight(""),v.session.$searchHighlight.clazz="ace_highlight-marker",v.on("mousedown",function(A){var R=A.getDocumentPosition();v.selection.moveToPosition(R),T.start.row=T.end.row=R.row,A.stop()});var M,$=new c(-1,0,-1,1/0),T=new c(-1,0,-1,1/0);T.id=v.session.addMarker(T,"ace_active-line","fullLine"),v.setSelectOnHover=function(A){A?$.id&&(v.session.removeMarker($.id),$.id=null):$.id=v.session.addMarker($,"ace_line-hover","fullLine")},v.setSelectOnHover(!1),v.on("mousemove",function(A){if(!M){M=A;return}if(!(M.x==A.x&&M.y==A.y)){M=A,M.scrollTop=v.renderer.scrollTop,v.isMouseOver=!0;var R=M.getDocumentPosition().row;$.start.row!=R&&($.id||v.setRow(R),C(R))}}),v.renderer.on("beforeRender",function(){if(M&&$.start.row!=-1){M.$pos=null;var A=M.getDocumentPosition().row;$.id||v.setRow(A),C(A,!0)}}),v.renderer.on("afterRender",function(){var A=v.getRow(),R=v.renderer.$textLayer,k=R.element.childNodes[A-R.config.firstRow],O=document.activeElement;if(k!==v.selectedNode&&v.selectedNode&&(l.removeCssClass(v.selectedNode,"ace_selected"),O.removeAttribute("aria-activedescendant"),v.selectedNode.removeAttribute(m),v.selectedNode.removeAttribute("id")),v.selectedNode=k,k){l.addCssClass(k,"ace_selected");var N=d(A);k.id=N,R.element.setAttribute("aria-activedescendant",N),O.setAttribute("aria-activedescendant",N),k.setAttribute("role",g),k.setAttribute("aria-roledescription",p("autocomplete.popup.item.aria-roledescription","item")),k.setAttribute("aria-label",v.getData(A).caption||v.getData(A).value),k.setAttribute("aria-setsize",v.data.length),k.setAttribute("aria-posinset",A+1),k.setAttribute("aria-describedby","doc-tooltip"),k.setAttribute(m,"true")}});var I=function(){C(-1)},C=function(A,R){A!==$.start.row&&($.start.row=$.end.row=A,R||v.session._emit("changeBackMarker"),v._emit("changeHoverMarker"))};v.getHoveredRow=function(){return $.start.row},a.addListener(v.container,"mouseout",function(){v.isMouseOver=!1,I()}),v.on("hide",I),v.on("changeSelection",I),v.session.doc.getLength=function(){return v.data.length},v.session.doc.getLine=function(A){var R=v.data[A];return typeof R=="string"?R:R&&R.value||""};var b=v.session.bgTokenizer;return b.$tokenizeRow=function(A){var R=v.data[A],k=[];if(!R)return k;typeof R=="string"&&(R={value:R});var O=R.caption||R.value||R.name;function N(P,D){P&&k.push({type:(R.className||"")+(D||""),value:P})}for(var W=O.toLowerCase(),z=(v.filterText||"").toLowerCase(),V=0,U=0,H=0;H<=z.length;H++)if(H!=U&&(R.matchMask&1<<H||H==z.length)){var Y=z.slice(U,H);U=H;var K=W.indexOf(Y,V);if(K==-1)continue;N(O.slice(V,K),""),V=K+Y.length,N(O.slice(K,V),"completion-highlight")}return N(O.slice(V,O.length),""),k.push({type:"completion-spacer",value:" "}),R.meta&&k.push({type:"completion-meta",value:R.meta}),R.message&&k.push({type:"completion-message",value:R.message}),k},b.$updateOnChange=S,b.start=S,v.session.$computeWidth=function(){return this.screenWidth=0},v.isOpen=!1,v.isTopdown=!1,v.autoSelect=!0,v.filterText="",v.isMouseOver=!1,v.data=[],v.setData=function(A,R){v.filterText=R||"",v.setValue(u.stringRepeat(`
`,A.length),-1),v.data=A||[],v.setRow(0)},v.getData=function(A){return v.data[A]},v.getRow=function(){return T.start.row},v.setRow=function(A){A=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,A)),T.start.row!=A&&(v.selection.clearSelection(),T.start.row=T.end.row=A||0,v.session._emit("changeBackMarker"),v.moveCursorTo(A||0,0),v.isOpen&&v._signal("select"))},v.on("changeSelection",function(){v.isOpen&&v.setRow(v.selection.lead.row),v.renderer.scrollCursorIntoView()}),v.hide=function(){this.container.style.display="none",v.anchorPos=null,v.anchor=null,v.isOpen&&(v.isOpen=!1,this._signal("hide"))},v.tryShow=function(A,R,k,O){if(!O&&v.isOpen&&v.anchorPos&&v.anchor&&v.anchorPos.top===A.top&&v.anchorPos.left===A.left&&v.anchor===k)return!0;var N=this.container,W=window.innerHeight,z=window.innerWidth,V=this.renderer,U=V.$maxLines*R*1.4,H={top:0,bottom:0,left:0},Y=W-A.top-3*this.$borderSize-R,K=A.top-3*this.$borderSize;k||(K<=Y||Y>=U?k="bottom":k="top"),k==="top"?(H.bottom=A.top-this.$borderSize,H.top=H.bottom-U):k==="bottom"&&(H.top=A.top+R+this.$borderSize,H.bottom=H.top+U);var P=H.top>=0&&H.bottom<=W;if(!O&&!P)return!1;P?V.$maxPixelHeight=null:k==="top"?V.$maxPixelHeight=K:V.$maxPixelHeight=Y,k==="top"?(N.style.top="",N.style.bottom=W-H.bottom+"px",v.isTopdown=!1):(N.style.top=H.top+"px",N.style.bottom="",v.isTopdown=!0),N.style.display="";var D=A.left;return D+N.offsetWidth>z&&(D=z-N.offsetWidth),N.style.left=D+"px",N.style.right="",v.isOpen||(v.isOpen=!0,this._signal("show"),M=null),v.anchorPos=A,v.anchor=k,!0},v.show=function(A,R,k){this.tryShow(A,R,k?"bottom":void 0,!0)},v.goTo=function(A){var R=this.getRow(),k=this.session.getLength()-1;switch(A){case"up":R=R<=0?k:R-1;break;case"down":R=R>=k?-1:R+1;break;case"start":R=0;break;case"end":R=k;break}this.setRow(R)},v.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},v.$imageSize=0,v.$borderSize=1,v}return E}();l.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),i.AcePopup=_,i.$singleLineEditor=w,i.getAriaId=d}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(n,i,r){var o=function(){function s(c){this.editor=c,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return s.prototype.setScreenReaderContent=function(c){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",(function(){var u=this.popup.getRow(),l=this.popup.renderer.$textLayer,p=l.element.childNodes[u-l.config.firstRow];if(p){for(var h="doc-tooltip ",d=0;d<this._lines.length;d++)h+="ace-inline-screenreader-line-".concat(d," ");p.setAttribute("aria-describedby",h)}}).bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=c.split(/\r\n|\r|\n/);var a=this.createCodeBlock();this.screenReaderDiv.appendChild(a)},s.prototype.destroy=function(){this.screenReaderDiv.remove()},s.prototype.createCodeBlock=function(){var c=document.createElement("pre");c.setAttribute("id","ace-inline-screenreader");for(var a=0;a<this._lines.length;a++){var u=document.createElement("code");u.setAttribute("id","ace-inline-screenreader-line-".concat(a));var l=document.createTextNode(this._lines[a]);u.appendChild(l),c.appendChild(u)}return c},s}();i.AceInlineScreenReader=o}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(n,i,r){var o=n("../snippets").snippetManager,s=n("./inline_screenreader").AceInlineScreenReader,c=function(){function a(){this.editor=null}return a.prototype.show=function(u,l,p){if(p=p||"",u&&this.editor&&this.editor!==u&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!u||!l)return!1;this.inlineScreenReader||(this.inlineScreenReader=new s(u));var h=l.snippet?o.getDisplayTextForSnippet(u,l.snippet):l.value;return l.hideInlinePreview||!h||!h.startsWith(p)?!1:(this.editor=u,this.inlineScreenReader.setScreenReaderContent(h),h=h.slice(p.length),h===""?u.removeGhostText():u.setGhostText(h),!0)},a.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},a.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},a.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},a}();i.AceInline=c}),ace.define("ace/autocomplete/util",["require","exports","module"],function(n,i,r){i.parForEach=function(s,c,a){var u=0,l=s.length;l===0&&a();for(var p=0;p<l;p++)c(s[p],function(h,d){u++,u===l&&a(h,d)})};var o=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;i.retrievePrecedingIdentifier=function(s,c,a){a=a||o;for(var u=[],l=c-1;l>=0&&a.test(s[l]);l--)u.push(s[l]);return u.reverse().join("")},i.retrieveFollowingIdentifier=function(s,c,a){a=a||o;for(var u=[],l=c;l<s.length&&a.test(s[l]);l++)u.push(s[l]);return u},i.getCompletionPrefix=function(s){var c=s.getCursorPosition(),a=s.session.getLine(c.row),u;return s.completers.forEach((function(l){l.identifierRegexps&&l.identifierRegexps.forEach((function(p){!u&&p&&(u=this.retrievePrecedingIdentifier(a,c.column,p))}).bind(this))}).bind(this)),u||this.retrievePrecedingIdentifier(a,c.column)},i.triggerAutocomplete=function(s,a){var a=a??s.session.getPrecedingCharacter();return s.completers.some(function(u){if(u.triggerCharacters&&Array.isArray(u.triggerCharacters))return u.triggerCharacters.includes(a)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(n,i,r){var o=n("./keyboard/hash_handler").HashHandler,s=n("./autocomplete/popup").AcePopup,c=n("./autocomplete/inline").AceInline,a=n("./autocomplete/popup").getAriaId,u=n("./autocomplete/util"),l=n("./lib/lang"),p=n("./lib/dom"),h=n("./snippets").snippetManager,d=n("./config"),f=n("./lib/event"),g=n("./lib/scroll").preventParentScroll,m=function(y,x){x.completer&&x.completer.destroy()},w=function(){function y(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new o,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=l.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=l.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=l.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=l.delayedCall((function(){this.stickySelection=!0}).bind(this),this.stickySelectionDelay),this.$firstOpenTimer=l.delayedCall((function(){var x=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!x||this.editor.completers.length===0||(this.completions=new E(y.completionsForLoading),this.openPopup(this.editor,x.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}).bind(this),this.stickySelectionDelay)}return Object.defineProperty(y,"completionsForLoading",{get:function(){return[{caption:d.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),y.prototype.$init=function(){return this.popup=new s(this.parentNode||document.body||document.documentElement),this.popup.on("click",(function(x){this.insertMatch(),x.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),f.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},y.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new c,this.inlineRenderer},y.prototype.getPopup=function(){return this.popup||this.$init()},y.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},y.prototype.$seen=function(x){!this.hasSeen.has(x)&&x&&x.completer&&x.completer.onSeen&&typeof x.completer.onSeen=="function"&&(x.completer.onSeen(this.editor,x),this.hasSeen.add(x))},y.prototype.$onPopupChange=function(x){if(this.inlineRenderer&&this.inlineEnabled){var v=x?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(v),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},y.prototype.$updateGhostText=function(x){var v=this.base.row,S=this.base.column,M=this.editor.getCursorPosition().column,$=this.editor.session.getLine(v).slice(S,M);this.inlineRenderer.show(this.editor,x,$)?this.$seen(x):this.inlineRenderer.hide()},y.prototype.$onPopupRender=function(){var x=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var v=this.popup.getFirstVisibleRow();v<=this.popup.getLastVisibleRow();v++){var S=this.popup.getData(v);S&&(!x||S.hideInlinePreview)&&this.$seen(S)}},y.prototype.$onPopupShow=function(x){this.$onPopupChange(x),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},y.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var x=this.editor.container.parentNode,v=[];x;)v.push(x),x.addEventListener("scroll",this.onLayoutChange,{passive:!0}),x=x.parentNode;this.$elements=v}},y.prototype.unObserveLayoutChanges=function(){var x=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(v){v.removeEventListener("scroll",x.onLayoutChange,{passive:!0})}),this.$elements=null},y.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},y.prototype.$updatePopupPosition=function(){var x=this.editor,v=x.renderer,S=v.layerConfig.lineHeight,M=v.$cursorLayer.getPixelPosition(this.base,!0);M.left-=this.popup.getTextLeftOffset();var $=x.container.getBoundingClientRect();M.top+=$.top-v.layerConfig.offset,M.left+=$.left-x.renderer.scrollLeft,M.left+=v.gutterWidth;var T={top:M.top,left:M.left};v.$ghostText&&v.$ghostTextWidget&&this.base.row===v.$ghostText.position.row&&(T.top+=v.$ghostTextWidget.el.offsetHeight);var I=x.container.getBoundingClientRect().bottom-S,C=I<T.top?{top:I,left:T.left}:T;this.popup.tryShow(C,S,"bottom")||this.popup.tryShow(M,S,"top")||this.popup.show(M,S)},y.prototype.openPopup=function(x,v,S){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var M=this.popup.getRow(),$=this.popup.data[M];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:a(this.popup.getRow()),inline:this.inlineEnabled}),x.keyBinding.addKeyboardHandler(this.keyboardHandler);var T;this.stickySelection&&(T=this.popup.data.indexOf($)),(!T||T===-1)&&(T=0),this.popup.setRow(this.autoSelect?T:-1),T===M&&$!==this.completions.filtered[T]&&this.$onPopupChange();var I=this.inlineRenderer&&this.inlineEnabled;if(T===M&&I){var C=this.popup.getData(this.popup.getRow());this.$updateGhostText(C)}S||(this.popup.setTheme(x.getTheme()),this.popup.setFontSize(x.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},y.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},y.prototype.changeListener=function(x){var v=this.editor.selection.lead;(v.row!=this.base.row||v.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},y.prototype.blurListener=function(x){var v=document.activeElement,S=this.editor.textInput.getElement(),M=x.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(x.relatedTarget),$=this.popup&&this.popup.container;v!=S&&v.parentNode!=$&&!M&&v!=this.tooltipNode&&x.relatedTarget!=S&&this.detach()},y.prototype.mousedownListener=function(x){this.detach()},y.prototype.mousewheelListener=function(x){this.popup&&!this.popup.isMouseOver&&this.detach()},y.prototype.mouseOutListener=function(x){this.popup.isOpen&&this.$updatePopupPosition()},y.prototype.goTo=function(x){this.popup.goTo(x)},y.prototype.insertMatch=function(x,v){if(x||(x=this.popup.getData(this.popup.getRow())),!x)return!1;if(x.value==="")return this.detach();var S=this.completions,M=this.getCompletionProvider().insertMatch(this.editor,x,S.filterText,v);return this.completions==S&&this.detach(),M},y.prototype.showPopup=function(x,v){this.editor&&this.detach(),this.activated=!0,this.editor=x,x.completer!=this&&(x.completer&&x.completer.detach(),x.completer=this),x.on("changeSelection",this.changeListener),x.on("blur",this.blurListener),x.on("mousedown",this.mousedownListener),x.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,v)},y.prototype.getCompletionProvider=function(x){return this.completionProvider||(this.completionProvider=new _(x)),this.completionProvider},y.prototype.gatherCompletions=function(x,v){return this.getCompletionProvider().gatherCompletions(x,v)},y.prototype.updateCompletions=function(x,v){if(x&&this.base&&this.completions){var M=this.editor.getCursorPosition(),$=this.editor.session.getTextRange({start:this.base,end:M});if($==this.completions.filterText)return;if(this.completions.setFilter($),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==$&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,$,x);return}if(v&&v.matches){var M=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(M.row,M.column),this.base.$insertRight=!0,this.completions=new E(v.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",x)}var S=this.editor.getSession(),M=this.editor.getCursorPosition(),$=u.getCompletionPrefix(this.editor);this.base=S.doc.createAnchor(M.row,M.column-$.length),this.base.$insertRight=!0;var T={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:$,pos:M}).provideCompletions(this.editor,T,(function(I,C,b){var A=C.filtered,R=u.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),b){if(!A.length){var k=!this.autoShown&&this.emptyMessage;if(typeof k=="function"&&(k=this.emptyMessage(R)),k){var O=[{caption:k,value:""}];this.completions=new E(O),this.openPopup(this.editor,R,x),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(A.length==1&&A[0].value==R&&!A[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&A.length==1)return this.insertMatch(A[0])}this.completions=!b&&this.showLoadingState?new E(y.completionsForLoading.concat(A),C.filterText):C,this.openPopup(this.editor,R,x),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!b)}).bind(this)),this.showLoadingState&&!this.autoShown&&!(this.popup&&this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},y.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},y.prototype.updateDocTooltip=function(){var x=this.popup,v=this.completions.filtered,S=v&&(v[x.getHoveredRow()]||v[x.getRow()]),M=null;if(!S||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var $=this.editor.completers.length,T=0;T<$;T++){var I=this.editor.completers[T];if(I.getDocTooltip&&S.completerId===I.id){M=I.getDocTooltip(S);break}}if(!M&&typeof S!="string"&&(M=S),typeof M=="string"&&(M={docText:M}),!M||!(M.docHTML||M.docText))return this.hideDocTooltip();this.showDocTooltip(M)},y.prototype.showDocTooltip=function(x){this.tooltipNode||(this.tooltipNode=p.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",g));var v=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(v.isDark?"ace_dark ":"")+(v.cssClass||"");var S=this.tooltipNode;x.docHTML?S.innerHTML=x.docHTML:x.docText&&(S.textContent=x.docText),S.parentNode||this.popup.container.appendChild(this.tooltipNode);var M=this.popup,$=M.container.getBoundingClientRect();S.style.top=M.container.style.top,S.style.bottom=M.container.style.bottom,S.style.display="block",window.innerWidth-$.right<320?$.left<320?M.isTopdown?(S.style.top=$.bottom+"px",S.style.left=$.left+"px",S.style.right="",S.style.bottom=""):(S.style.top=M.container.offsetTop-S.offsetHeight+"px",S.style.left=$.left+"px",S.style.right="",S.style.bottom=""):(S.style.right=window.innerWidth-$.left+"px",S.style.left=""):(S.style.left=$.right+1+"px",S.style.right="")},y.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var x=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==x&&this.editor.focus(),this.tooltipNode=null,x.parentNode&&x.parentNode.removeChild(x)}},y.prototype.onTooltipClick=function(x){for(var v=x.target;v&&v!=this.tooltipNode;){if(v.nodeName=="A"&&v.href){v.rel="noreferrer",v.target="_blank";break}v=v.parentNode}},y.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var x=this.popup.container;x&&x.parentNode&&x.parentNode.removeChild(x)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",m),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},y.for=function(x){return x.completer instanceof y||(x.completer&&(x.completer.destroy(),x.completer=null),d.get("sharedPopups")?(y.$sharedInstance||(y.$sharedInstance=new y),x.completer=y.$sharedInstance):(x.completer=new y,x.once("destroy",m))),x.completer},y}();w.prototype.commands={Up:function(y){y.completer.goTo("up")},Down:function(y){y.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(y){y.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(y){y.completer.goTo("end")},Esc:function(y){y.completer.detach()},Return:function(y){return y.completer.insertMatch()},"Shift-Return":function(y){y.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(y){var x=y.completer.insertMatch();if(!x&&!y.tabstopManager)y.completer.goTo("down");else return x},Backspace:function(y){y.execCommand("backspace");var x=u.getCompletionPrefix(y);!x&&y.completer&&y.completer.detach()},PageUp:function(y){y.completer.popup.gotoPageUp()},PageDown:function(y){y.completer.popup.gotoPageDown()}},w.startCommand={name:"startAutocomplete",exec:function(y,x){var v=w.for(y);v.autoInsert=!1,v.autoSelect=!0,v.autoShown=!1,v.showPopup(y,x),v.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var _=function(){function y(x){this.initialPosition=x,this.active=!0}return y.prototype.insertByIndex=function(x,v,S){return!this.completions||!this.completions.filtered?!1:this.insertMatch(x,this.completions.filtered[v],S)},y.prototype.insertMatch=function(x,v,S){if(!v)return!1;if(x.startOperation({command:{name:"insertMatch"}}),v.completer&&v.completer.insertMatch)v.completer.insertMatch(x,v);else{if(!this.completions)return!1;var M=this.completions.filterText.length,$=0;if(v.range&&v.range.start.row===v.range.end.row&&(M-=this.initialPosition.prefix.length,M+=this.initialPosition.pos.column-v.range.start.column,$+=v.range.end.column-this.initialPosition.pos.column),M||$){var T;x.selection.getAllRanges?T=x.selection.getAllRanges():T=[x.getSelectionRange()];for(var I=0,C;C=T[I];I++)C.start.column-=M,C.end.column+=$,x.session.remove(C)}v.snippet?h.insertSnippet(x,v.snippet):this.$insertString(x,v),v.completer&&v.completer.onInsert&&typeof v.completer.onInsert=="function"&&v.completer.onInsert(x,v),v.command&&v.command==="startAutocomplete"&&x.execCommand(v.command)}return x.endOperation(),!0},y.prototype.$insertString=function(x,v){var S=v.value||v;x.execCommand("insertstring",S)},y.prototype.gatherCompletions=function(x,v){var S=x.getSession(),M=x.getCursorPosition(),$=u.getCompletionPrefix(x),T=[];this.completers=x.completers;var I=x.completers.length;return x.completers.forEach(function(C,b){C.getCompletions(x,S,M,$,function(A,R){C.hideInlinePreview&&(R=R.map(function(k){return Object.assign(k,{hideInlinePreview:C.hideInlinePreview})})),!A&&R&&(T=T.concat(R)),v(null,{prefix:u.getCompletionPrefix(x),matches:T,finished:--I===0})})}),!0},y.prototype.provideCompletions=function(x,v,S){var M=(function(C){var b=C.prefix,A=C.matches;this.completions=new E(A),v.exactMatch&&(this.completions.exactMatch=!0),v.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(b),(C.finished||this.completions.filtered.length)&&S(null,this.completions,C.finished)}).bind(this),$=!0,T=null;if(this.gatherCompletions(x,(function(C,b){if(this.active){C&&(S(C,[],!0),this.detach());var A=b.prefix;if(A.indexOf(b.prefix)===0){if($){T=b;return}M(b)}}}).bind(this)),$=!1,T){var I=T;T=null,M(I)}},y.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(x){typeof x.cancel=="function"&&x.cancel()})},y}(),E=function(){function y(x,v){this.all=x,this.filtered=x,this.filterText=v||"",this.exactMatch=!1,this.ignoreCaption=!1}return y.prototype.setFilter=function(x){if(x.length>this.filterText&&x.lastIndexOf(this.filterText,0)===0)var v=this.filtered;else var v=this.all;this.filterText=x,v=this.filterCompletions(v,this.filterText),v=v.sort(function(M,$){return $.exactMatch-M.exactMatch||$.$score-M.$score||(M.caption||M.value).localeCompare($.caption||$.value)});var S=null;v=v.filter(function(M){var $=M.snippet||M.caption||M.value;return $===S?!1:(S=$,!0)}),this.filtered=v},y.prototype.filterCompletions=function(x,v){var S=[],M=v.toUpperCase(),$=v.toLowerCase();e:for(var T=0,I;I=x[T];T++){var C=!this.ignoreCaption&&I.caption||I.value||I.snippet;if(C){var b=-1,A=0,R=0,k,O;if(this.exactMatch){if(v!==C.substr(0,v.length))continue e}else{var N=C.toLowerCase().indexOf($);if(N>-1)R=N;else for(var W=0;W<v.length;W++){var z=C.indexOf($[W],b+1),V=C.indexOf(M[W],b+1);if(k=z>=0&&(V<0||z<V)?z:V,k<0)continue e;O=k-b-1,O>0&&(b===-1&&(R+=10),R+=O,A=A|1<<W),b=k}}I.matchMask=A,I.exactMatch=R?0:1,I.$score=(I.score||0)-R,S.push(I)}}return S},y}();i.Autocomplete=w,i.CompletionProvider=_,i.FilteredList=E}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(n,i,r){var o=n("../range").Range,s=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function c(u,l){var p=u.getTextRange(o.fromPoints({row:0,column:0},l));return p.split(s).length-1}function a(u,l){var p=c(u,l),h=u.getValue().split(s),d=Object.create(null),f=h[p];return h.forEach(function(g,m){if(!(!g||g===f)){var w=Math.abs(p-m),_=h.length-w;d[g]?d[g]=Math.max(_,d[g]):d[g]=_}}),d}i.getCompletions=function(u,l,p,h,d){var f=a(l,p),g=Object.keys(f);d(null,g.map(function(m){return{caption:m,value:m,score:f[m],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(n,i,r){var o=n("../snippets").snippetManager,s=n("../autocomplete").Autocomplete,c=n("../config"),a=n("../lib/lang"),u=n("../autocomplete/util"),l=n("../autocomplete/text_completer"),p={getCompletions:function(M,$,T,I,C){if($.$mode.completer)return $.$mode.completer.getCompletions(M,$,T,I,C);var b=M.session.getState(T.row),A=$.$mode.getCompletions(b,$,T,I);A=A.map(function(R){return R.completerId=p.id,R}),C(null,A)},id:"keywordCompleter"},h=function(M){var $={};return M.replace(/\${(\d+)(:(.*?))?}/g,function(T,I,C,b){return $[I]=b||""}).replace(/\$(\d+?)/g,function(T,I){return $[I]})},d={getCompletions:function(M,$,T,I,C){var b=[],A=$.getTokenAt(T.row,T.column);A&&A.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?b.push("html-tag"):b=o.getActiveScopes(M);var R=o.snippetMap,k=[];b.forEach(function(O){for(var N=R[O]||[],W=N.length;W--;){var z=N[W],V=z.name||z.tabTrigger;V&&k.push({caption:V,snippet:z.content,meta:z.tabTrigger&&!z.name?z.tabTrigger+" ":"snippet",completerId:d.id})}},this),C(null,k)},getDocTooltip:function(M){M.snippet&&!M.docHTML&&(M.docHTML=["<b>",a.escapeHTML(M.caption),"</b>","<hr></hr>",a.escapeHTML(h(M.snippet))].join(""))},id:"snippetCompleter"},f=[d,l,p];i.setCompleters=function(M){f.length=0,M&&f.push.apply(f,M)},i.addCompleter=function(M){f.push(M)},i.textCompleter=l,i.keyWordCompleter=p,i.snippetCompleter=d;var g={name:"expandSnippet",exec:function(M){return o.expandWithTab(M)},bindKey:"Tab"},m=function(M,$){w($.session.$mode)},w=function(M){typeof M=="string"&&(M=c.$modes[M]),M&&(o.files||(o.files={}),_(M.$id,M.snippetFileId),M.modes&&M.modes.forEach(w))},_=function(M,$){!$||!M||o.files[M]||(o.files[M]={},c.loadModule($,function(T){T&&(o.files[M]=T,!T.snippets&&T.snippetText&&(T.snippets=o.parseSnippetFile(T.snippetText)),o.register(T.snippets||[],T.scope),T.includeScopes&&(o.snippetMap[T.scope].includeScopes=T.includeScopes,T.includeScopes.forEach(function(I){w("ace/mode/"+I)})))}))},E=function(M){var $=M.editor,T=$.completer&&$.completer.activated;if(M.command.name==="backspace")T&&!u.getCompletionPrefix($)&&$.completer.detach();else if(M.command.name==="insertstring"&&!T){y=M;var I=M.editor.$liveAutocompletionDelay;I?x.delay(I):v(M)}},y,x=a.delayedCall(function(){v(y)},0),v=function(M){var $=M.editor,T=u.getCompletionPrefix($),I=M.args,C=u.triggerAutocomplete($,I);if(T&&T.length>=$.$liveAutocompletionThreshold||C){var b=s.for($);b.autoShown=!0,b.showPopup($)}},S=n("../editor").Editor;n("../config").defineOptions(S.prototype,"editor",{enableBasicAutocompletion:{set:function(M){M?(this.completers||(this.completers=Array.isArray(M)?M:f),this.commands.addCommand(s.startCommand)):this.commands.removeCommand(s.startCommand)},value:!1},enableLiveAutocompletion:{set:function(M){M?(this.completers||(this.completers=Array.isArray(M)?M:f),this.commands.on("afterExec",E)):this.commands.off("afterExec",E)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(M){M?(this.commands.addCommand(g),this.on("changeMode",m),m(null,this)):(this.commands.removeCommand(g),this.off("changeMode",m))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(n){e.exports=n})}()}(ap)),ap.exports}e5();Mt.config.setModuleUrl("ace/theme/github",PB);Mt.config.setModuleUrl("ace/theme/chrome",OB);Mt.config.setModuleUrl("ace/theme/monokai",NB);Mt.config.setModuleUrl("ace/mode/json",BB);Mt.config.setModuleUrl("ace/mode/javascript",FB);Mt.config.setModuleUrl("ace/mode/html",jB);Mt.config.setModuleUrl("ace/mode/xml",HB);Mt.config.setModuleUrl("ace/mode/yaml",WB);Mt.config.setModuleUrl("ace/mode/base",GB);Mt.config.setModuleUrl("ace/mode/json_worker",zB);Mt.config.setModuleUrl("ace/mode/javascript_worker",VB);Mt.config.setModuleUrl("ace/mode/html_worker",UB);Mt.config.setModuleUrl("ace/mode/xml_worker",YB);Mt.config.setModuleUrl("ace/snippets/json",ZB);Mt.config.setModuleUrl("ace/snippets/javascript",XB);Mt.config.setModuleUrl("ace/snippets/html",KB);Mt.config.setModuleUrl("ace/snippets/xml",QB);Mt.config.setModuleUrl("ace/snippets/javascript",JB);Mt.config.setModuleUrl("ace/ext/searchbox",qB);Mt.require("ace/ext/language_tools");function Lx(e,t,n,i){const r=Object.create(null);switch(r.event=t.event,t.listenerType){case"scriptListener":r.script=n5(e,t,i);break;case"expressionListener":r.expression=t.expression;break;case"delegateExpressionListener":r.delegateExpression=t.delegateExpression;break;default:r.class=t.class}if(t.fields&&(r.fields=t.fields.map(o=>t5(e,o,i))),n&&t.event==="timeout"&&t.eventDefinitionType){const o=e.moddle.create("bpmn:FormalExpression",{body:t.eventTimeDefinitions}),s=e.moddle.create("bpmn:TimerEventDefinition",{id:`TimerEventDefinition_${i5(8)}`,[`time${t.eventDefinitionType.replace(/^\S/,c=>c.toUpperCase())}`]:o});r.eventDefinitions=[s]}return e.moddle.create(`${i}:${n?"TaskListener":"ExecutionListener"}`,r)}function t5(e,t,n){const{name:i,fieldType:r,string:o,expression:s}=t,c=r==="string"?{name:i,string:o}:{name:i,expression:s};return e.moddle.create(`${n}:Field`,c)}function n5(e,t,n){const{scriptType:i,scriptFormat:r,value:o,resource:s}=t,c=i==="inlineScript"?{scriptFormat:r,value:o}:{scriptFormat:r,resource:s};return e.moddle.create(`${n}:Script`,c)}function tc(e,t,n){const i=e.moddle.create("bpmn:ExtensionElements",{values:n});e.modeling.updateProperties(t,{extensionElements:i})}function i5(e=8,t){let n="";const i="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=e;r>0;--r)n+=i[Math.floor(Math.random()*i.length)];return n}function Dx(e){let t={...e};if(e.script&&(t={...e,...e.script,scriptType:e.script.resource?"externalScript":"inlineScript"}),e.event==="timeout"&&e.eventDefinitions&&e.eventDefinitions.length){let n="";for(const i in e.eventDefinitions[0])e.eventDefinitions,i.indexOf("time")!==-1&&(n=i,t.eventDefinitionType=i.replace("time","").toLowerCase());t.eventTimeDefinitions=e.eventDefinitions[0][n].body}return t}function Px(e){let t;return e.class&&(t="classListener"),e.expression&&(t="expressionListener"),e.delegateExpression&&(t="delegateExpressionListener"),e.script&&(t="scriptListener"),{...JSON.parse(JSON.stringify(e)),...e.script??{},listenerType:t}}const Ox={classListener:"Java ",expressionListener:"",delegateExpressionListener:"",scriptListener:""},r5={create:"",assignment:"",complete:"",delete:"",update:"",timeout:""},Nx={string:"",expression:""},o5={class:"w100"},a5={key:0},s5={key:1},l5={class:"w100 mt-1"},c5={class:"listener-filed__title"},u5={key:0},p5={key:1},h5={key:2},d5={class:"w100 ub ub-ac ub-pc mt-2"},Oi=Dt({__name:"ElementListeners",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("bpmnInstances"),i=Pe("bpmnElement"),r=Pe("prefix"),o=e,s=fe([{title:"",dataIndex:"index",fixed:"left",width:50},{title:"",dataIndex:"event",ellipsis:!0},{title:"",dataIndex:"listenerType",ellipsis:!0},{title:"",dataIndex:"operation",width:100}]),c=fe([{title:"",dataIndex:"index",fixed:"left",width:50},{title:"",dataIndex:"name",ellipsis:!0},{title:"",dataIndex:"fieldType",ellipsis:!0},{title:"/",dataIndex:"expression",ellipsis:!0},{title:"",dataIndex:"operation"}]),a=fe([]),u=fe({}),l=fe(!1),p=fe([]),h=fe({}),d=fe(!1),f=fe(-1),g=fe(-1),m=fe(Ox),w=fe(Nx),_=fe(),E=fe(),y=fe([]),x=fe([]);Ht(()=>o.bpmnElementId,b=>{it(()=>{v()})},{deep:!0,immediate:!0});const v=()=>{var b,A,R;y.value=[],x.value=((R=(A=(b=o.businessObject)==null?void 0:b.extensionElements)==null?void 0:A.values)==null?void 0:R.filter(k=>k.$type===`${r}:ExecutionListener`))??[],a.value=x.value.map(k=>Px(k))},S=async()=>{var O,N,W;const b=n(),A=i();if(!await _.value.validate())return;const k=Lx(b,u.value,!1,r);f.value===-1?(x.value.push(k),a.value.push(u.value)):(x.value.splice(f.value,1,k),a.value.splice(f.value,1,u.value)),y.value=((W=(N=(O=o.businessObject)==null?void 0:O.extensionElements)==null?void 0:N.values)==null?void 0:W.filter(z=>z.$type!==`${r}:ExecutionListener`))??[],tc(b,A,y.value.concat(x.value)),l.value=!1,u.value={}},M=(b,A)=>{b?(u.value=Dx(b),f.value=A):(u.value={},f.value=-1),b&&b.fields?p.value=b.fields.map(R=>({...R,fieldType:R.string?"string":"expression"})):(p.value=[],u.value.fields=[]),l.value=!0,it(()=>{var R;_!=null&&_.value&&((R=_==null?void 0:_.value)==null||R.clearValidate())})},$=(b,A)=>{h.value=b?JSON.parse(JSON.stringify(b)):{},g.value=b?A:-1,d.value=!0,it(()=>{var R;E!=null&&E.value&&((R=E==null?void 0:E.value)==null||R.clearValidate())})},T=async()=>{await E.value.validate()&&(g.value===-1?(p.value.push(h.value),u.value.fields.push(h.value)):(p.value.splice(g.value,1,h.value),u.value.fields.splice(g.value,1,h.value)),d.value=!1,it(()=>h.value={}))},I=(b,A)=>{fi.confirm({title:"",content:"",okText:" ",cancelText:" ",onOk(){p.value.splice(A,1),u.value.fields.splice(A,1)},onCancel(){console.info(""),fi.destroyAll()}})},C=(b,A)=>{const R=n(),k=i();fi.confirm({title:"",content:"",okText:" ",cancelText:" ",onOk(){x.value.splice(A,1),a.value.splice(A,1),tc(R,k,y.value.concat(x.value))},onCancel(){console.info(""),fi.destroyAll()}})};return(b,A)=>{const R=re("a-button"),k=re("a-table"),O=re("a-select-option"),N=re("a-select"),W=re("a-form-item"),z=re("a-input"),V=re("a-form"),U=re("a-divider"),H=re("a-drawer"),Y=re("a-modal");return le(),Oe(pt,null,[Le("div",o5,[G(k,{class:"ant-table-striped","row-class-name":(K,P)=>P%2===1?"table-striped":null,bordered:"",size:"small",columns:s.value,"row-key":K=>K.id,"data-source":a.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:K,record:P,index:D})=>[K.dataIndex==="index"?(le(),Oe("a",a5,Xe(parseInt(D)+1),1)):we("",!0),K.dataIndex==="listenerType"?(le(),Oe("span",s5,Xe(m.value[P.listenerType]),1)):we("",!0),K.dataIndex==="operation"?(le(),Oe(pt,{key:2},[G(R,{type:"link",size:"small",onClick:L=>M(P,D)},{default:X(()=>[se(Xe(b.$t("opts.edit")),1)]),_:2},1032,["onClick"]),G(R,{type:"link",size:"small",onClick:L=>C(P,D)},{default:X(()=>[se(Xe(b.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):we("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",l5,[G(R,{block:"",type:"primary",onClick:A[0]||(A[0]=K=>M(null))},{default:X(()=>A[19]||(A[19]=[se("")])),_:1})])]),G(H,{open:l.value,"onUpdate:open":A[12]||(A[12]=K=>l.value=K),title:"",width:"500px",placement:"right",destroyOnClose:""},{default:X(()=>[G(V,{model:u.value,layout:"vertical",ref_key:"listenerFormRef",ref:_},{default:X(()=>[G(W,{label:"",name:"event",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(N,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:b.$t("selectTips"),style:{width:"100%"},value:u.value.event,"onUpdate:value":A[1]||(A[1]=K=>u.value.event=K)},{default:X(()=>[G(O,{value:"start"},{default:X(()=>A[20]||(A[20]=[se("start")])),_:1}),G(O,{value:"end"},{default:X(()=>A[21]||(A[21]=[se("end")])),_:1})]),_:1},8,["filter-option","placeholder","value"])]),_:1}),G(W,{label:"",name:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(N,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:b.$t("selectTips"),style:{width:"100%"},value:u.value.listenerType,"onUpdate:value":A[2]||(A[2]=K=>u.value.listenerType=K)},{default:X(()=>[(le(!0),Oe(pt,null,kr(Object.keys(m.value),K=>(le(),Ae(O,{key:K,value:K},{default:X(()=>[se(Xe(m.value[K]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),u.value.listenerType==="classListener"?(le(),Ae(W,{key:0,label:"Java",name:"class",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(z,{allowClear:"",placeholder:b.$t("inputTips"),value:u.value.class,"onUpdate:value":A[3]||(A[3]=K=>u.value.class=K),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):we("",!0),u.value.listenerType==="expressionListener"?(le(),Ae(W,{key:1,label:"",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(z,{value:u.value.expression,"onUpdate:value":A[4]||(A[4]=K=>u.value.expression=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),u.value.listenerType==="delegateExpressionListener"?(le(),Ae(W,{key:2,label:"",name:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(z,{value:u.value.delegateExpression,"onUpdate:value":A[5]||(A[5]=K=>u.value.delegateExpression=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),u.value.listenerType==="scriptListener"?(le(),Oe(pt,{key:3},[G(W,{label:"",name:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(z,{value:u.value.scriptFormat,"onUpdate:value":A[6]||(A[6]=K=>u.value.scriptFormat=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1}),G(W,{label:"",name:"scriptType",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(N,{value:u.value.scriptType,"onUpdate:value":A[7]||(A[7]=K=>u.value.scriptType=K),"show-search":"","filter-option":At(t),allowClear:"",placeholder:b.$t("selectTips"),style:{width:"100%"}},{default:X(()=>[G(O,{value:"inlineScript"},{default:X(()=>A[22]||(A[22]=[se("")])),_:1}),G(O,{value:"externalScript"},{default:X(()=>A[23]||(A[23]=[se("")])),_:1})]),_:1},8,["value","filter-option","placeholder"])]),_:1}),u.value.scriptType==="inlineScript"?(le(),Ae(W,{key:0,label:"",name:"value",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(z,{value:u.value.value,"onUpdate:value":A[8]||(A[8]=K=>u.value.value=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),u.value.scriptType==="externalScript"?(le(),Ae(W,{key:1,label:"",name:"resource",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(z,{value:u.value.resource,"onUpdate:value":A[9]||(A[9]=K=>u.value.resource=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0)],64)):we("",!0)]),_:1},8,["model"]),G(U),Le("p",c5,[A[25]||(A[25]=Le("span",null,[Le("i",{class:"a-icon-menu"}),se("")],-1)),G(R,{size:"small",type:"primary",onClick:A[10]||(A[10]=K=>$(null))},{default:X(()=>A[24]||(A[24]=[se("")])),_:1})]),G(k,{class:"ant-table-striped","row-class-name":(K,P)=>P%2===1?"table-striped":null,bordered:"",size:"small",columns:c.value,"row-key":K=>K.id,"data-source":p.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:K,record:P,index:D})=>[K.dataIndex==="index"?(le(),Oe("a",u5,Xe(parseInt(D)+1),1)):we("",!0),K.dataIndex==="fieldType"?(le(),Oe("span",p5,Xe(w.value[P.fieldType]),1)):we("",!0),K.dataIndex==="expression"?(le(),Oe("span",h5,Xe(P.string||P.expression),1)):we("",!0),K.dataIndex==="operation"?(le(),Oe(pt,{key:3},[G(R,{type:"link",size:"small",onClick:L=>$(P,D)},{default:X(()=>[se(Xe(b.$t("opts.edit")),1)]),_:2},1032,["onClick"]),G(R,{type:"link",size:"small",onClick:L=>I(P,D)},{default:X(()=>[se(Xe(b.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):we("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",d5,[G(R,{onClick:A[11]||(A[11]=K=>l.value=!1)},{default:X(()=>A[26]||(A[26]=[se(" ")])),_:1}),G(R,{class:"ml-2",type:"primary",onClick:S},{default:X(()=>A[27]||(A[27]=[se(" ")])),_:1})])]),_:1},8,["open"]),G(Y,{open:d.value,"onUpdate:open":A[18]||(A[18]=K=>d.value=K),title:"",width:"500px",cancelText:b.$t("opts.cancel"),okText:b.$t("opts.sure"),destroyOnClose:""},{footer:X(()=>[G(R,{key:"back",onClick:A[13]||(A[13]=K=>d.value=!1)},{default:X(()=>[se(Xe(b.$t("opts.cancel")),1)]),_:1}),G(R,{key:"submit",type:"primary",onClick:T},{default:X(()=>[se(Xe(b.$t("opts.sure")),1)]),_:1})]),default:X(()=>[G(V,{model:h.value,layout:"vertical",ref_key:"listenerFieldFormRef",ref:E},{default:X(()=>[G(W,{label:"",name:"name",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(z,{allowClear:"",placeholder:b.$t("inputTips"),value:h.value.name,"onUpdate:value":A[14]||(A[14]=K=>h.value.name=K),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),G(W,{label:"",name:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(N,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:b.$t("selectTips"),style:{width:"100%"},value:h.value.fieldType,"onUpdate:value":A[15]||(A[15]=K=>h.value.fieldType=K)},{default:X(()=>[(le(!0),Oe(pt,null,kr(Object.keys(w.value),K=>(le(),Ae(O,{key:K,value:K},{default:X(()=>[se(Xe(w.value[K]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),h.value.fieldType==="string"?(le(),Ae(W,{key:0,label:"",name:"string",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(z,{value:h.value.string,"onUpdate:value":A[16]||(A[16]=K=>h.value.string=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),h.value.fieldType==="expression"?(le(),Ae(W,{key:1,label:"",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(z,{value:h.value.expression,"onUpdate:value":A[17]||(A[17]=K=>h.value.expression=K),valueModifiers:{trim:!0},placeholder:b.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0)]),_:1},8,["model"])]),_:1},8,["open","cancelText","okText"])],64)}}}),f5={class:"w100"},g5={key:0},m5={class:"w100 mt-1"},Pn=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("bpmnInstances"),n=Pe("bpmnElement"),i=Pe("prefix"),r=e,o=fe([{title:"",dataIndex:"index",fixed:"left",width:50},{title:"",dataIndex:"name",ellipsis:!0},{title:"",dataIndex:"value",ellipsis:!0},{title:"",dataIndex:"operation",width:120}]),s=fe([]),c=fe({}),a=fe(-1),u=fe(!1),l=fe(),p=fe(),h=fe(),d=fe();Ht(()=>r.businessObject,E=>{it(()=>{f()})},{deep:!0,immediate:!0});const f=()=>{var E,y,x;l.value=[],p.value=((x=(y=(E=r.businessObject)==null?void 0:E.extensionElements)==null?void 0:y.values)==null?void 0:x.filter(v=>(v.$type!==`${i}:Properties`&&l.value.push(v),v.$type===`${i}:Properties`)))??[],h.value=p.value.reduce((v,S)=>v.concat(S.values),[]),s.value=JSON.parse(JSON.stringify(h.value??[]))},g=(E,y)=>{a.value=y,c.value=y===-1?{}:JSON.parse(JSON.stringify(E)),u.value=!0,it(()=>{d.value&&d.value.clearValidate()})},m=E=>{const y=t(),x=n(),v=y.moddle.create("bpmn:ExtensionElements",{values:l.value.concat([E])});y.modeling.updateProperties(x,{extensionElements:v})},w=(E,y)=>{const x=t();fi.confirm({title:()=>"",icon:()=>G(Yx),content:()=>"",onOk(){s.value.splice(y,1),h.value.splice(y,1);const v=x.moddle.create(`${i}:Properties`,{values:h.value});m(v),f()},onCancel(){console.info("")}})},_=()=>{const E=t(),y=n(),{name:x,value:v}=c.value;if(a.value!==-1)E.modeling.updateModdleProperties(y,qn(h.value)[qn(a.value)],{name:x,value:v});else{const S=E.moddle.create(`${i}:Property`,{name:x,value:v}),M=E.moddle.create(`${i}:Properties`,{values:h.value.concat([S])});m(M)}u.value=!1,f()};return(E,y)=>{const x=re("a-button"),v=re("a-table"),S=re("a-input"),M=re("a-form-item"),$=re("a-form"),T=re("a-modal");return le(),Oe(pt,null,[Le("div",f5,[G(v,{class:"ant-table-striped","row-class-name":(I,C)=>C%2===1?"table-striped":null,bordered:"",size:"small",columns:o.value,"row-key":I=>I.id,"data-source":s.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:I,record:C,index:b})=>[I.dataIndex==="index"?(le(),Oe("a",g5,Xe(parseInt(b)+1),1)):we("",!0),I.dataIndex==="operation"?(le(),Oe(pt,{key:1},[G(x,{type:"link",size:"small",onClick:A=>g(C,b)},{default:X(()=>[se(Xe(E.$t("opts.edit")),1)]),_:2},1032,["onClick"]),G(x,{type:"link",size:"small",onClick:A=>w(C,b)},{default:X(()=>[se(Xe(E.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):we("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",m5,[G(x,{block:"",type:"primary",onClick:y[0]||(y[0]=I=>g(null,-1))},{default:X(()=>y[5]||(y[5]=[se("")])),_:1})])]),G(T,{open:u.value,"onUpdate:open":y[4]||(y[4]=I=>u.value=I),title:"",width:"600px",cancelText:E.$t("opts.cancel"),okText:E.$t("opts.sure"),destroyOnClose:""},{footer:X(()=>[G(x,{key:"back",onClick:y[1]||(y[1]=I=>u.value=!1)},{default:X(()=>[se(Xe(E.$t("opts.cancel")),1)]),_:1}),G(x,{key:"submit",type:"primary",onClick:_},{default:X(()=>[se(Xe(E.$t("opts.sure")),1)]),_:1})]),default:X(()=>[G($,{model:c.value,layout:"vertical",ref_key:"attributeFormRef",ref:d},{default:X(()=>[G(M,{label:"",name:"name",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(S,{allowClear:"",placeholder:E.$t("inputTips"),value:c.value.name,"onUpdate:value":y[2]||(y[2]=I=>c.value.name=I),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),G(M,{label:"",name:"value",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(S,{value:c.value.value,"onUpdate:value":y[3]||(y[3]=I=>c.value.value=I),valueModifiers:{trim:!0},placeholder:E.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","cancelText","okText"])],64)}}}),v5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("updateProperties"),n=Pe("bpmnElement"),i=e,r=Qt({id:"",name:""});Ht(()=>i.businessObject,c=>{it(()=>{o(c)})},{deep:!0,immediate:!0});const o=c=>{r.id=c.id,r.name=c.name},s=c=>{const a=n(),u=Object.create(null);u[c]=r[c],c==="id"?t(a,{id:r[c]}):t(a,u)};return(c,a)=>{const u=re("a-input"),l=re("a-form-item"),p=re("a-divider"),h=re("a-form");return le(),Ae(h,{model:r,layout:"vertical"},{default:X(()=>[G(l,{label:"ID"},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.id,"onUpdate:value":a[0]||(a[0]=d=>r.id=d),valueModifiers:{trim:!0},onChange:a[1]||(a[1]=d=>s("id"))},null,8,["placeholder","value"])]),_:1}),G(l,{label:""},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.name,"onUpdate:value":a[2]||(a[2]=d=>r.name=d),valueModifiers:{trim:!0},onChange:a[3]||(a[3]=d=>s("name"))},null,8,["placeholder","value"])]),_:1}),G(p),G(l,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(l,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),y5=Dt({__name:"StartEnd",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("updateProperties"),n=Pe("bpmnElement"),i=e,r=Qt({id:"",name:""});Ht(()=>i.businessObject,c=>{it(()=>{o(c)})},{deep:!0,immediate:!0});const o=c=>{r.id=c.id,r.name=c.name},s=c=>{const a=n(),u=Object.create(null);u[c]=r[c],c==="id"?t(a,{id:r[c]}):t(a,u)};return(c,a)=>{const u=re("a-input"),l=re("a-form-item"),p=re("a-divider"),h=re("a-form");return le(),Ae(h,{model:r,layout:"vertical"},{default:X(()=>[G(l,{label:"ID"},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.id,"onUpdate:value":a[0]||(a[0]=d=>r.id=d),valueModifiers:{trim:!0},onChange:a[1]||(a[1]=d=>s("id"))},null,8,["placeholder","value"])]),_:1}),G(l,{label:""},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.name,"onUpdate:value":a[2]||(a[2]=d=>r.name=d),valueModifiers:{trim:!0},onChange:a[3]||(a[3]=d=>s("name"))},null,8,["placeholder","value"])]),_:1}),G(p),G(l,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(l,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),b5=Dt({__name:"Process",props:{bpmnElementId:{type:String},roles:{type:Array,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("updateProperties"),i=Pe("bpmnElement")(),r=fe(),o=e,s=Qt({id:"",name:""});return Hx(()=>{s.id=o.businessObject.id,s.name=o.businessObject.name}),Ht(()=>s.name,c=>{t(i,{name:c})}),Cy(()=>{r.value.validate().then(async()=>{}).catch(c=>{Ty.error("")})}),(c,a)=>{const u=re("a-input"),l=re("a-form-item"),p=re("a-form");return le(),Ae(p,{ref_key:"formRef",ref:r,model:s,layout:"vertical"},{default:X(()=>[G(l,{label:"",name:"id",rules:[{required:!0}]},{default:X(()=>[G(u,{disabled:"",allowClear:"",placeholder:c.$t("inputTips"),value:s.id,"onUpdate:value":a[0]||(a[0]=h=>s.id=h),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),G(l,{label:"",name:"name",rules:[{required:!0}]},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:s.name,"onUpdate:value":a[1]||(a[1]=h=>s.name=h),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),G(l,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),w5={};function _5(e,t){return le(),Oe("div",null,"")}const x5=My(w5,[["render",_5]]),E5=Dt({__name:"Stage",props:{bpmnElementId:{type:String},roles:{type:Array,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("updateProperties"),n=Pe("bpmnElement"),i=e,r=Qt({id:"",name:""});Ht(()=>i.businessObject,c=>{it(()=>{o(c)})},{deep:!0,immediate:!0});const o=c=>{var a;r.id=c.id,r.name=(a=c==null?void 0:c.categoryValueRef)==null?void 0:a.value},s=c=>{const a=n(),u=Object.create(null);u[c]=r[c],c==="id"?t(a,{id:r[c]}):t(a,u)};return(c,a)=>{const u=re("a-input"),l=re("a-form-item"),p=re("a-form");return le(),Ae(p,{model:r,layout:"vertical"},{default:X(()=>[G(l,{label:"ID"},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.id,"onUpdate:value":a[0]||(a[0]=h=>r.id=h),valueModifiers:{trim:!0},onChange:a[1]||(a[1]=h=>s("id"))},null,8,["placeholder","value"])]),_:1}),G(l,{label:""},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.name,"onUpdate:value":a[2]||(a[2]=h=>r.name=h),valueModifiers:{trim:!0},onChange:a[3]||(a[3]=h=>s("name"))},null,8,["placeholder","value"])]),_:1}),G(l,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),S5=Dt({__name:"index",props:{bpmnElementId:{type:String},roles:{type:Array,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),r=Pe("bpmnInstances")(),o=Pe("bpmnElement"),s=e,c=fe([{label:"",value:"normal"},{label:"",value:"default"},{label:"",value:"condition"}]),a=fe([{label:"",value:"expression"},{label:"",value:"script"}]),u=fe([{label:"",value:"inlineScript"},{label:"",value:"externalScript"}]),l=Qt({id:"",name:"",type:void 0,conditionType:void 0,scriptType:void 0,body:"",resource:"",language:""}),p=()=>{l.id="",l.id="",l.type=void 0,l.conditionType=void 0,l.scriptType=void 0,l.body="",l.resource="",l.language=""},h=fe(!1);Ht(()=>s.businessObject,w=>{it(()=>{d(w)})},{deep:!0,immediate:!0});const d=w=>{var y;p();const _=o(),E=w.sourceRef;if(l.id=w.id,l.name=w.name,h.value=!(s.type==="bpmn:SequenceFlow"&&E&&E.$type.indexOf("StartEvent")>-1),!!h.value)if(E&&(E!=null&&E.default)&&((y=E==null?void 0:E.default)==null?void 0:y.id)===(_==null?void 0:_.id))l.type="default";else if(!_.businessObject.conditionExpression)l.type="normal";else{const x=w.conditionExpression;if(l.body=x.body,l.language=x.language,l.type="condition",l.resource){l.conditionType="script",l.scriptType="externalScript";return}if(x.language){l.conditionType="script",l.scriptType="inlineScript";return}l.conditionType="expression"}},f=()=>{const w=o(),{conditionType:_,scriptType:E,body:y,resource:x,language:v}=l;let S;_==="expression"?S=r.moddle.create("bpmn:FormalExpression",{body:y}):E==="inlineScript"?(S=r.moddle.create("bpmn:FormalExpression",{body:y,language:v}),l.resource=""):(l.body="",S=r.moddle.create("bpmn:FormalExpression",{resource:x,language:v})),n(w,{conditionExpression:S})},g=w=>{var x;const _=o(),E=_.source,y=s.businessObject.sourceRef;if(w==="condition"){const v=r.moddle.create("bpmn:FormalExpression");n(_,{conditionExpression:v});return}if(w==="default"){n(_,{conditionExpression:null}),n(E,{default:_});return}y!=null&&y.default&&((x=y==null?void 0:y.default)==null?void 0:x.id)===(_==null?void 0:_.id)&&n(E,{default:null}),n(_,{conditionExpression:null})},m=w=>{const _=o(),E=Object.create(null);E[w]=l[w],w==="id"?n(_,{id:l[w]}):n(_,E)};return(w,_)=>{const E=re("a-input"),y=re("a-form-item"),x=re("a-select"),v=re("a-textarea"),S=re("a-form");return le(),Ae(S,{model:l,layout:"vertical"},{default:X(()=>[G(y,{label:"ID"},{default:X(()=>[G(E,{allowClear:"",placeholder:w.$t("inputTips"),value:l.id,"onUpdate:value":_[0]||(_[0]=M=>l.id=M),valueModifiers:{trim:!0},onChange:_[1]||(_[1]=M=>m("id"))},null,8,["placeholder","value"])]),_:1}),G(y,{label:""},{default:X(()=>[G(E,{allowClear:"",placeholder:w.$t("inputTips"),value:l.name,"onUpdate:value":_[2]||(_[2]=M=>l.name=M),valueModifiers:{trim:!0},onChange:_[3]||(_[3]=M=>m("name"))},null,8,["placeholder","value"])]),_:1}),h.value?(le(),Oe(pt,{key:0},[G(y,{label:""},{default:X(()=>[G(x,{"show-search":"","filter-option":At(t),options:c.value,allowClear:"",placeholder:w.$t("selectTips"),style:{width:"100%"},value:l.type,"onUpdate:value":_[4]||(_[4]=M=>l.type=M),onChange:g},null,8,["filter-option","options","placeholder","value"])]),_:1}),l.type==="condition"?(le(),Ae(y,{key:0,label:""},{default:X(()=>[G(x,{"show-search":"","filter-option":At(t),options:a.value,allowClear:"",placeholder:w.$t("selectTips"),style:{width:"100%"},value:l.conditionType,"onUpdate:value":_[5]||(_[5]=M=>l.conditionType=M),onChange:g},null,8,["filter-option","options","placeholder","value"])]),_:1})):we("",!0),l.conditionType&&l.conditionType==="expression"?(le(),Ae(y,{key:1,label:""},{default:X(()=>[G(E,{allowClear:"",placeholder:w.$t("inputTips"),value:l.body,"onUpdate:value":_[6]||(_[6]=M=>l.body=M),valueModifiers:{trim:!0},onChange:f},null,8,["placeholder","value"])]),_:1})):we("",!0),l.conditionType&&l.conditionType==="script"?(le(),Oe(pt,{key:2},[G(y,{label:""},{default:X(()=>[G(E,{value:l.language,"onUpdate:value":_[7]||(_[7]=M=>l.language=M),valueModifiers:{trim:!0},clearable:"",onChange:f},null,8,["value"])]),_:1}),G(y,{label:""},{default:X(()=>[G(x,{"show-search":"","filter-option":At(t),options:u.value,allowClear:"",placeholder:w.$t("selectTips"),style:{width:"100%"},value:l.scriptType,"onUpdate:value":_[8]||(_[8]=M=>l.scriptType=M)},null,8,["filter-option","options","placeholder","value"])]),_:1}),l.scriptType==="inlineScript"?(le(),Ae(y,{key:0,label:""},{default:X(()=>[G(v,{value:l.body,"onUpdate:value":_[9]||(_[9]=M=>l.body=M),valueModifiers:{trim:!0},clearable:"",onChange:f},null,8,["value"])]),_:1})):we("",!0),l.scriptType==="externalScript"?(le(),Ae(y,{key:1,label:""},{default:X(()=>[G(E,{value:l.resource,"onUpdate:value":_[10]||(_[10]=M=>l.resource=M),valueModifiers:{trim:!0},clearable:"",onChange:f},null,8,["value"])]),_:1})):we("",!0)],64)):we("",!0)],64)):we("",!0),G(y,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),C5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),i=Pe("bpmnInstances"),r=Pe("bpmnElement"),o=e,s=fe([{label:"",value:"timeDate"},{label:"",value:"timeDuration"},{label:"",value:"timeCycle"}]),c=Qt({id:"",name:"",timeDefinitionType:void 0,FormalExpression:""});Ht(()=>o.businessObject,f=>{it(()=>{u(f)})},{deep:!0,immediate:!0});const a=()=>{c.id="",c.name="",c.timeDefinitionType=void 0,c.FormalExpression=""},u=f=>{var g,m,w,_,E,y,x,v,S;a(),c.id=f.id,c.name=f.name,f.hasOwnProperty("eventDefinitions")&&f.eventDefinitions.length>0&&f.eventDefinitions[0].$type=="bpmn:TimerEventDefinition"&&((m=(g=f.eventDefinitions[0])==null?void 0:g.timeDuration)!=null&&m.body?(c.timeDefinitionType="timeDuration",c.FormalExpression=(w=f.eventDefinitions[0].timeDuration)==null?void 0:w.body):(E=(_=f.eventDefinitions[0])==null?void 0:_.timeDate)!=null&&E.body?(c.timeDefinitionType="timeDate",c.FormalExpression=(y=f.eventDefinitions[0].timeDate)==null?void 0:y.body):(v=(x=f.eventDefinitions[0])==null?void 0:x.timeCycle)!=null&&v.body&&(c.timeDefinitionType="timeCycle",c.FormalExpression=(S=f.eventDefinitions[0].timeCycle)==null?void 0:S.body))},l=f=>{p(c.timeDefinitionType,f.target.value)},p=(f,g)=>{const m=i(),w=r(),_=w.businessObject.eventDefinitions[0],E=m.moddle.create("bpmn:FormalExpression",{body:g}),y=m.moddle.create("bpmn:FormalExpression",{body:g}),x=m.moddle.create("bpmn:FormalExpression",{body:g});f=="timeCycle"?(m.modeling.updateModdleProperties(w,_,{timeDate:null}),m.modeling.updateModdleProperties(w,_,{timeDuration:null}),m.modeling.updateModdleProperties(w,_,{timeCycle:E})):f=="timeDate"?(m.modeling.updateModdleProperties(w,_,{timeCycle:null}),m.modeling.updateModdleProperties(w,_,{timeDuration:null}),m.modeling.updateModdleProperties(w,_,{timeDate:y})):f=="timeDuration"&&(m.modeling.updateModdleProperties(w,_,{timeDate:null}),m.modeling.updateModdleProperties(w,_,{timeCycle:null}),m.modeling.updateModdleProperties(w,_,{timeDuration:x}))},h=f=>{c.FormalExpression="",c.timeDefinitionType=f,p(c.timeDefinitionType,c.FormalExpression)},d=f=>{const g=r(),m=Object.create(null);m[f]=c[f],f==="id"?n(g,{id:c[f]}):n(g,m)};return(f,g)=>{const m=re("a-input"),w=re("a-form-item"),_=re("a-divider"),E=re("a-select"),y=re("a-tooltip"),x=re("a-form");return le(),Ae(x,{model:c,layout:"vertical"},{default:X(()=>{var v;return[G(w,{label:"ID"},{default:X(()=>[G(m,{allowClear:"",placeholder:f.$t("inputTips"),value:c.id,"onUpdate:value":g[0]||(g[0]=S=>c.id=S),valueModifiers:{trim:!0},onChange:g[1]||(g[1]=S=>d("id"))},null,8,["placeholder","value"])]),_:1}),G(w,{label:""},{default:X(()=>[G(m,{allowClear:"",placeholder:f.$t("inputTips"),value:c.name,"onUpdate:value":g[2]||(g[2]=S=>c.name=S),valueModifiers:{trim:!0},onChange:g[3]||(g[3]=S=>d("name"))},null,8,["placeholder","value"])]),_:1}),G(_),(v=e.businessObject)!=null&&v.eventDefinitions&&e.businessObject.eventDefinitions[0].$type.indexOf("TimerEventDefinition")!==-1?(le(),Oe(pt,{key:0},[G(w,{label:""},{default:X(()=>[G(E,{"show-search":"","filter-option":At(t),options:s.value,allowClear:"",placeholder:f.$t("selectTips"),style:{width:"100%"},value:c.timeDefinitionType,"onUpdate:value":g[4]||(g[4]=S=>c.timeDefinitionType=S),onChange:h},null,8,["filter-option","options","placeholder","value"])]),_:1}),c.timeDefinitionType!==""?(le(),Ae(w,{key:0,label:""},{default:X(()=>[G(y,null,{title:X(()=>g[6]||(g[6]=[se(" "),Le("br",null,null,-1),se(" 1.(timeDate):,:2022-12-16T11:12:16 "),Le("br",null,null,-1),se(" 2.(timeDuration):,ISO 8601"),Le("br",null,null,-1),se(" (BPMN 2.0),PT5M(5),${duration},"),Le("br",null,null,-1),se(" "),Le("br",null,null,-1),se(" 3.(timeCycle):,,"),Le("br",null,null,-1),se(" timeCycle"),Le("br",null,null,-1),se("  ISO 8601 (R3/PT5M)(3,"),Le("br",null,null,-1),se(" 5),crontimeCycle,,"),Le("br",null,null,-1),se(" 10(0 0/10 * * * ?)"),Le("br",null,null,-1)])),default:X(()=>[G(m,{value:c.FormalExpression,"onUpdate:value":g[5]||(g[5]=S=>c.FormalExpression=S),valueModifiers:{trim:!0},placeholder:f.$t("inputTips"),clearable:"",onChange:l},null,8,["value","placeholder"])]),_:1})]),_:1})):we("",!0),G(_),G(w,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(w,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})],64)):we("",!0)]}),_:1},8,["model"])}}}),A5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),i=Pe("bpmnInstances"),r=Pe("bpmnElement"),o=e,s=fe([{label:"",value:"timeDate"},{label:"",value:"timeDuration"},{label:"",value:"timeCycle"}]),c=Qt({id:"",name:"",timeDefinitionType:void 0,FormalExpression:""});Ht(()=>o.businessObject,f=>{it(()=>{u(f)})},{deep:!0,immediate:!0});const a=()=>{c.id="",c.name="",c.timeDefinitionType=void 0,c.FormalExpression=""},u=f=>{var g,m,w,_,E,y,x,v,S;a(),c.id=f.id,c.name=f.name,f.hasOwnProperty("eventDefinitions")&&f.eventDefinitions.length>0&&f.eventDefinitions[0].$type=="bpmn:TimerEventDefinition"&&((m=(g=f.eventDefinitions[0])==null?void 0:g.timeDuration)!=null&&m.body?(c.timeDefinitionType="timeDuration",c.FormalExpression=(w=f.eventDefinitions[0].timeDuration)==null?void 0:w.body):(E=(_=f.eventDefinitions[0])==null?void 0:_.timeDate)!=null&&E.body?(c.timeDefinitionType="timeDate",c.FormalExpression=(y=f.eventDefinitions[0].timeDate)==null?void 0:y.body):(v=(x=f.eventDefinitions[0])==null?void 0:x.timeCycle)!=null&&v.body&&(c.timeDefinitionType="timeCycle",c.FormalExpression=(S=f.eventDefinitions[0].timeCycle)==null?void 0:S.body))},l=f=>{p(c.timeDefinitionType,f.target.value)},p=(f,g)=>{const m=i(),w=r(),_=w.businessObject.eventDefinitions[0],E=m.moddle.create("bpmn:FormalExpression",{body:g}),y=m.moddle.create("bpmn:FormalExpression",{body:g}),x=m.moddle.create("bpmn:FormalExpression",{body:g});f=="timeCycle"?(m.modeling.updateModdleProperties(w,_,{timeDate:null}),m.modeling.updateModdleProperties(w,_,{timeDuration:null}),m.modeling.updateModdleProperties(w,_,{timeCycle:E})):f=="timeDate"?(m.modeling.updateModdleProperties(w,_,{timeCycle:null}),m.modeling.updateModdleProperties(w,_,{timeDuration:null}),m.modeling.updateModdleProperties(w,_,{timeDate:y})):f=="timeDuration"&&(m.modeling.updateModdleProperties(w,_,{timeDate:null}),m.modeling.updateModdleProperties(w,_,{timeCycle:null}),m.modeling.updateModdleProperties(w,_,{timeDuration:x}))},h=f=>{c.FormalExpression="",c.timeDefinitionType=f,p(c.timeDefinitionType,c.FormalExpression)},d=f=>{const g=r(),m=Object.create(null);m[f]=c[f],f==="id"?n(g,{id:c[f]}):n(g,m)};return(f,g)=>{const m=re("a-input"),w=re("a-form-item"),_=re("a-divider"),E=re("a-select"),y=re("a-tooltip"),x=re("a-form");return le(),Ae(x,{model:c,layout:"vertical"},{default:X(()=>{var v;return[G(w,{label:"ID"},{default:X(()=>[G(m,{allowClear:"",placeholder:f.$t("inputTips"),value:c.id,"onUpdate:value":g[0]||(g[0]=S=>c.id=S),valueModifiers:{trim:!0},onChange:g[1]||(g[1]=S=>d("id"))},null,8,["placeholder","value"])]),_:1}),G(w,{label:""},{default:X(()=>[G(m,{allowClear:"",placeholder:f.$t("inputTips"),value:c.name,"onUpdate:value":g[2]||(g[2]=S=>c.name=S),valueModifiers:{trim:!0},onChange:g[3]||(g[3]=S=>d("name"))},null,8,["placeholder","value"])]),_:1}),G(_),(v=e.businessObject)!=null&&v.eventDefinitions&&e.businessObject.eventDefinitions[0].$type.indexOf("TimerEventDefinition")!==-1?(le(),Oe(pt,{key:0},[G(w,{label:""},{default:X(()=>[G(E,{"show-search":"","filter-option":At(t),options:s.value,allowClear:"",placeholder:f.$t("selectTips"),style:{width:"100%"},value:c.timeDefinitionType,"onUpdate:value":g[4]||(g[4]=S=>c.timeDefinitionType=S),onChange:h},null,8,["filter-option","options","placeholder","value"])]),_:1}),c.timeDefinitionType!==""?(le(),Ae(w,{key:0,label:""},{default:X(()=>[G(y,null,{title:X(()=>g[6]||(g[6]=[se(" "),Le("br",null,null,-1),se(" 1.(timeDate):,:2022-12-16T11:12:16 "),Le("br",null,null,-1),se(" 2.(timeDuration):,ISO 8601"),Le("br",null,null,-1),se(" (BPMN 2.0),PT5M(5),${duration},"),Le("br",null,null,-1),se(" "),Le("br",null,null,-1),se(" 3.(timeCycle):,,"),Le("br",null,null,-1),se(" timeCycle"),Le("br",null,null,-1),se("  ISO 8601 (R3/PT5M)(3,"),Le("br",null,null,-1),se(" 5),crontimeCycle,,"),Le("br",null,null,-1),se(" 10(0 0/10 * * * ?)"),Le("br",null,null,-1)])),default:X(()=>[G(m,{value:c.FormalExpression,"onUpdate:value":g[5]||(g[5]=S=>c.FormalExpression=S),valueModifiers:{trim:!0},placeholder:f.$t("inputTips"),clearable:"",onChange:l},null,8,["value","placeholder"])]),_:1})]),_:1})):we("",!0),G(_),G(w,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(w,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})],64)):we("",!0)]}),_:1},8,["model"])}}}),T5={class:"w100"},M5={key:0},$5={key:1},R5={class:"w100 mt-1"},I5={class:"listener-filed__title"},k5={key:0},L5={key:1},D5={key:2},P5={class:"w100 ub ub-ac ub-pc mt-2"},O5=Dt({__name:"UserTaskListeners",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("bpmnInstances"),i=Pe("bpmnElement"),r=Pe("prefix"),o=e,s=fe([{title:"",dataIndex:"index",fixed:"left",width:50},{title:"",dataIndex:"event",ellipsis:!0},{title:"",dataIndex:"listenerType",ellipsis:!0},{title:"",dataIndex:"operation",width:100}]),c=fe([{title:"",dataIndex:"index",fixed:"left",width:50},{title:"",dataIndex:"name",ellipsis:!0},{title:"",dataIndex:"fieldType",ellipsis:!0},{title:"/",dataIndex:"expression",ellipsis:!0},{title:"",dataIndex:"operation"}]),a=fe([]),u=fe({}),l=fe(!1),p=fe([]),h=fe({}),d=fe(!1),f=fe(-1),g=fe(-1),m=fe(r5),w=fe(Ox),_=fe(Nx),E=fe(),y=fe(),x=fe([]),v=fe([]);Ht(()=>o.bpmnElementId,A=>{it(()=>{S()})},{deep:!0,immediate:!0});const S=()=>{var A,R,k;x.value=[],v.value=((k=(R=(A=o.businessObject)==null?void 0:A.extensionElements)==null?void 0:R.values)==null?void 0:k.filter(O=>O.$type===`${r}:TaskListener`))??[],a.value=v.value.map(O=>Px(O))},M=async()=>{var N,W,z;const A=n(),R=i();if(!await E.value.validate())return;const O=Lx(A,u.value,!0,r);f.value===-1?(v.value.push(O),a.value.push(u.value)):(v.value.splice(f.value,1,O),a.value.splice(f.value,1,u.value)),x.value=((z=(W=(N=o.businessObject)==null?void 0:N.extensionElements)==null?void 0:W.values)==null?void 0:z.filter(V=>V.$type!==`${r}:TaskListener`))??[],tc(A,R,x.value.concat(v.value)),l.value=!1,u.value={}},$=(A,R)=>{A?(u.value=Dx(A),f.value=R):(u.value={},f.value=-1),A&&A.fields?p.value=A.fields.map(k=>({...k,fieldType:k.string?"string":"expression"})):(p.value=[],u.value.fields=[]),l.value=!0,it(()=>{var k;E!=null&&E.value&&((k=E==null?void 0:E.value)==null||k.clearValidate())})},T=(A,R)=>{h.value=A?JSON.parse(JSON.stringify(A)):{},g.value=A?R:-1,d.value=!0,it(()=>{var k;y!=null&&y.value&&((k=y==null?void 0:y.value)==null||k.clearValidate())})},I=async()=>{await y.value.validate()&&(g.value===-1?(p.value.push(h.value),u.value.fields.push(h.value)):(p.value.splice(g.value,1,h.value),u.value.fields.splice(g.value,1,h.value)),d.value=!1,it(()=>h.value={}))},C=(A,R)=>{fi.confirm({title:"",content:"",okText:" ",cancelText:" ",onOk(){p.value.splice(R,1),u.value.fields.splice(R,1)},onCancel(){console.info(""),fi.destroyAll()}})},b=(A,R)=>{const k=n(),O=i();fi.confirm({title:"",content:"",okText:" ",cancelText:" ",onOk(){v.value.splice(R,1),a.value.splice(R,1),tc(k,O,x.value.concat(v.value))},onCancel(){console.info(""),fi.destroyAll()}})};return(A,R)=>{const k=re("a-button"),O=re("a-table"),N=re("a-select-option"),W=re("a-select"),z=re("a-form-item"),V=re("a-input"),U=re("a-form"),H=re("a-divider"),Y=re("a-drawer"),K=re("a-modal");return le(),Oe(pt,null,[Le("div",T5,[G(O,{class:"ant-table-striped","row-class-name":(P,D)=>D%2===1?"table-striped":null,bordered:"",size:"small",columns:s.value,"row-key":P=>P.id,"data-source":a.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:P,record:D,index:L})=>[P.dataIndex==="index"?(le(),Oe("a",M5,Xe(parseInt(L)+1),1)):we("",!0),P.dataIndex==="listenerType"?(le(),Oe("span",$5,Xe(w.value[D.listenerType]),1)):we("",!0),P.dataIndex==="operation"?(le(),Oe(pt,{key:2},[G(k,{type:"link",size:"small",onClick:j=>$(D,L)},{default:X(()=>[se(Xe(A.$t("opts.edit")),1)]),_:2},1032,["onClick"]),G(k,{type:"link",size:"small",onClick:j=>b(D,L)},{default:X(()=>[se(Xe(A.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):we("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",R5,[G(k,{block:"",type:"primary",onClick:R[0]||(R[0]=P=>$(null))},{default:X(()=>R[21]||(R[21]=[se("")])),_:1})])]),G(Y,{open:l.value,"onUpdate:open":R[14]||(R[14]=P=>l.value=P),title:"",width:"500px",placement:"right",destroyOnClose:""},{default:X(()=>[G(U,{model:u.value,layout:"vertical",ref_key:"listenerFormRef",ref:E},{default:X(()=>[G(z,{label:"",name:"event",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(W,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"},value:u.value.event,"onUpdate:value":R[1]||(R[1]=P=>u.value.event=P)},{default:X(()=>[(le(!0),Oe(pt,null,kr(Object.keys(m.value),P=>(le(),Ae(N,{key:P,value:P},{default:X(()=>[se(Xe(m.value[P]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),G(z,{label:"",name:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(W,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"},value:u.value.listenerType,"onUpdate:value":R[2]||(R[2]=P=>u.value.listenerType=P)},{default:X(()=>[(le(!0),Oe(pt,null,kr(Object.keys(w.value),P=>(le(),Ae(N,{key:P,value:P},{default:X(()=>[se(Xe(w.value[P]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),u.value.listenerType==="classListener"?(le(),Ae(z,{key:0,label:"Java",name:"class",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(V,{allowClear:"",placeholder:A.$t("inputTips"),value:u.value.class,"onUpdate:value":R[3]||(R[3]=P=>u.value.class=P),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):we("",!0),u.value.listenerType==="expressionListener"?(le(),Ae(z,{key:1,label:"",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(V,{value:u.value.expression,"onUpdate:value":R[4]||(R[4]=P=>u.value.expression=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),u.value.listenerType==="delegateExpressionListener"?(le(),Ae(z,{key:2,label:"",name:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(V,{value:u.value.delegateExpression,"onUpdate:value":R[5]||(R[5]=P=>u.value.delegateExpression=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),u.value.listenerType==="scriptListener"?(le(),Oe(pt,{key:3},[G(z,{label:"",name:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(V,{value:u.value.scriptFormat,"onUpdate:value":R[6]||(R[6]=P=>u.value.scriptFormat=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1}),G(z,{label:"",name:"scriptType",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(W,{value:u.value.scriptType,"onUpdate:value":R[7]||(R[7]=P=>u.value.scriptType=P),"show-search":"","filter-option":At(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"}},{default:X(()=>[G(N,{value:"inlineScript"},{default:X(()=>R[22]||(R[22]=[se("")])),_:1}),G(N,{value:"externalScript"},{default:X(()=>R[23]||(R[23]=[se("")])),_:1})]),_:1},8,["value","filter-option","placeholder"])]),_:1}),u.value.scriptType==="inlineScript"?(le(),Ae(z,{key:0,label:"",name:"value",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(V,{value:u.value.value,"onUpdate:value":R[8]||(R[8]=P=>u.value.value=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),u.value.scriptType==="externalScript"?(le(),Ae(z,{key:1,label:"",name:"resource",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(V,{value:u.value.resource,"onUpdate:value":R[9]||(R[9]=P=>u.value.resource=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0)],64)):we("",!0),u.value.event==="timeout"?(le(),Oe(pt,{key:4},[G(z,{label:""},{default:X(()=>[G(W,{value:u.value.eventDefinitionType,"onUpdate:value":R[10]||(R[10]=P=>u.value.eventDefinitionType=P),"show-search":"","filter-option":At(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"}},{default:X(()=>[G(N,{value:"date"},{default:X(()=>R[24]||(R[24]=[se("")])),_:1}),G(N,{value:"duration"},{default:X(()=>R[25]||(R[25]=[se("")])),_:1}),G(N,{value:"cycle"},{default:X(()=>R[26]||(R[26]=[se("")])),_:1}),G(N,{value:"null"},{default:X(()=>R[27]||(R[27]=[se("")])),_:1})]),_:1},8,["value","filter-option","placeholder"])]),_:1}),u.value.eventDefinitionType&&u.value.eventDefinitionType!=="null"?(le(),Ae(z,{key:0,label:"",name:"eventTimeDefinitions",rules:{required:!0,trigger:["blur","change"],message:""}},{default:X(()=>[G(V,{value:u.value.eventTimeDefinitions,"onUpdate:value":R[11]||(R[11]=P=>u.value.eventTimeDefinitions=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0)],64)):we("",!0)]),_:1},8,["model"]),G(H),Le("p",I5,[R[29]||(R[29]=Le("span",null,[Le("i",{class:"a-icon-menu"}),se("")],-1)),G(k,{size:"small",type:"primary",onClick:R[12]||(R[12]=P=>T(null))},{default:X(()=>R[28]||(R[28]=[se("")])),_:1})]),G(O,{class:"ant-table-striped","row-class-name":(P,D)=>D%2===1?"table-striped":null,bordered:"",size:"small",columns:c.value,"row-key":P=>P.id,"data-source":p.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:P,record:D,index:L})=>[P.dataIndex==="index"?(le(),Oe("a",k5,Xe(parseInt(L)+1),1)):we("",!0),P.dataIndex==="fieldType"?(le(),Oe("span",L5,Xe(_.value[D.fieldType]),1)):we("",!0),P.dataIndex==="expression"?(le(),Oe("span",D5,Xe(D.string||D.expression),1)):we("",!0),P.dataIndex==="operation"?(le(),Oe(pt,{key:3},[G(k,{type:"link",size:"small",onClick:j=>T(D,L)},{default:X(()=>[se(Xe(A.$t("opts.edit")),1)]),_:2},1032,["onClick"]),G(k,{type:"link",size:"small",onClick:j=>C(D,L)},{default:X(()=>[se(Xe(A.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):we("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",P5,[G(k,{onClick:R[13]||(R[13]=P=>l.value=!1)},{default:X(()=>R[30]||(R[30]=[se(" ")])),_:1}),G(k,{class:"ml-2",type:"primary",onClick:M},{default:X(()=>R[31]||(R[31]=[se(" ")])),_:1})])]),_:1},8,["open"]),G(K,{open:d.value,"onUpdate:open":R[20]||(R[20]=P=>d.value=P),title:"",width:"500px",cancelText:A.$t("opts.cancel"),okText:A.$t("opts.sure"),destroyOnClose:""},{footer:X(()=>[G(k,{key:"back",onClick:R[15]||(R[15]=P=>d.value=!1)},{default:X(()=>[se(Xe(A.$t("opts.cancel")),1)]),_:1}),G(k,{key:"submit",type:"primary",onClick:I},{default:X(()=>[se(Xe(A.$t("opts.sure")),1)]),_:1})]),default:X(()=>[G(U,{model:h.value,layout:"vertical",ref_key:"listenerFieldFormRef",ref:y},{default:X(()=>[G(z,{label:"",name:"name",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(V,{allowClear:"",placeholder:A.$t("inputTips"),value:h.value.name,"onUpdate:value":R[16]||(R[16]=P=>h.value.name=P),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),G(z,{label:"",name:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(W,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"},value:h.value.fieldType,"onUpdate:value":R[17]||(R[17]=P=>h.value.fieldType=P)},{default:X(()=>[(le(!0),Oe(pt,null,kr(Object.keys(_.value),P=>(le(),Ae(N,{key:P,value:P},{default:X(()=>[se(Xe(_.value[P]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),h.value.fieldType==="string"?(le(),Ae(z,{key:0,label:"",name:"string",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(V,{value:h.value.string,"onUpdate:value":R[18]||(R[18]=P=>h.value.string=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0),h.value.fieldType==="expression"?(le(),Ae(z,{key:1,label:"",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[G(V,{value:h.value.expression,"onUpdate:value":R[19]||(R[19]=P=>h.value.expression=P),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):we("",!0)]),_:1},8,["model"])]),_:1},8,["open","cancelText","okText"])],64)}}});function N5(e){const t={...e,...e.$attrs};return B5(t)}function B5(e){for(const t in e)if(t.indexOf("camunda:")===0){const n=t.replace("camunda:","");e[n]=e[t],delete e[t]}return e=F5(e),e}function F5(e){if("documentation"in e){let t="";e.documentation.forEach(n=>{t+=n.text}),e.documentation=t}return e}const j5={key:0,class:"w100 mt-2"},H5={key:1,class:"w100 mt-2"},W5={key:1,class:"ub ub-ac mt-1"},G5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),r=Pe("bpmnInstances")(),o=Pe("bpmnElement"),s={dataType:"",assignee:"",candidateUsers:"",candidateGroups:"",text:""},c=e,a=Qt({id:"",name:"",dataType:"",selectedUser:{ids:[],text:[]},roleIds:[]}),u=fe(!1),l=fe(!1),p=fe(!1),h=fe("Null"),d=fe(),f=fe("${nrOfCompletedInstances/nrOfInstances>=1}");Ht(()=>c.bpmnElementId,$=>{it(()=>{m()})},{deep:!0,immediate:!0});const g=()=>{u.value=!1,l.value=!1,p.value=!1,h.value="Null",d.value=null,f.value="${nrOfCompletedInstances/nrOfInstances>=1}"},m=()=>{var T;g();const $=N5(c.businessObject);if(a.id=$.id,a.name=$.name,_(),a.dataType=($==null?void 0:$.dataType)??(((T=$.$attrs)==null?void 0:T.dataType)||""),s.dataType=a.dataType,a.dataType,a.dataType==="USERS"){const I=$.candidateUsers||$.assignee,C=$.text||[];I&&I.toString().length>0&&C&&C.length>0&&(a.selectedUser.ids=I==null?void 0:I.toString().split(","),a.selectedUser.text=C==null?void 0:C.split(",")),a.selectedUser.ids.length>1&&(l.value=!0)}else if(a.dataType==="ROLES"){const I=$.candidateGroups||[];I&&I.length>0&&(a.roleIds=I.split(",")),l.value=!0}w($)},w=$=>{if(!$.loopCharacteristics){h.value="Null";return}p.value=$.loopCharacteristics.isSequential,$.loopCharacteristics.completionCondition&&($.loopCharacteristics.completionCondition.body==="${nrOfCompletedInstances >= nrOfInstances}"?h.value="SequentialMultiInstance":$.loopCharacteristics.completionCondition.body==="${nrOfCompletedInstances > 0}"?h.value="ParallelMultiInstance":h.value="CustomMultiInstance")},_=()=>{a.selectedUser.ids=[],a.selectedUser.text=[],a.roleIds=[],Object.keys(s).forEach($=>s[$]="")},E=()=>{u.value=!0},y=$=>{var I;const T=$.target.value;if(T==="ROLES"?l.value=!0:l.value=!1,h.value="Null",S(),Object.keys(s).forEach(C=>s[C]=""),s.dataType=T,T==="USERS")a.selectedUser&&a.selectedUser.ids&&a.selectedUser.ids.length>0&&(a.selectedUser.ids.length===1?s.assignee=a.selectedUser.ids[0]:s.candidateUsers=a.selectedUser.ids.join(),s.text=((I=a.selectedUser.text)==null?void 0:I.join())||"");else if(T==="ROLES"){if(a.roleIds&&a.roleIds.length>0){s.candidateGroups=a.roleIds.join()||"";const C=c.roles.filter(b=>a.roleIds.indexOf(`ROLE${b.roleId}`)>=0);s.text=(C==null?void 0:C.map(b=>b.roleName).join())||""}}else T==="MANAGER"||T==="INITIATOR"&&(s.assignee="${initiator}",s.text="");v()},x=$=>{let T="",I="";if($&&$.length>0){s.dataType="ROLES",T=$.join()||"";const C=c.roles.filter(b=>$.indexOf(`ROLE${b.value}`)>=0);I=(C==null?void 0:C.map(b=>b.label).join())||""}else s.dataType="",h.value="Null";s.candidateGroups=T,s.text=I,v(),S()},v=()=>{const $=o(),T=Object.create(null);for(const I in s)T[I]=s[I];n($,T)},S=()=>{const $=o();if(h.value==="Null"){n($,{loopCharacteristics:null,assignee:null});return}d.value=r.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:p.value}),n($,{loopCharacteristics:d.value,assignee:"${assignee}"});let T=null;h.value==="SequentialMultiInstance"&&(T=r.moddle.create("bpmn:FormalExpression",{body:"${nrOfCompletedInstances >= nrOfInstances}"})),h.value==="ParallelMultiInstance"&&(T=r.moddle.create("bpmn:FormalExpression",{body:"${nrOfCompletedInstances > 0}"})),h.value==="CustomMultiInstance"&&(T=r.moddle.create("bpmn:FormalExpression",{body:f.value})),r.modeling.updateModdleProperties($,d.value,{collection:"${multiInstanceHandler.getUserNames(execution)}",elementVariable:"assignee",completionCondition:T})},M=$=>{const T=o(),I=Object.create(null);I[$]=a[$],$==="id"?n(T,{id:a[$]}):n(T,I)};return($,T)=>{const I=re("a-input"),C=re("a-form-item"),b=re("a-divider"),A=re("a-radio"),R=re("a-radio-group"),k=re("a-row"),O=re("a-tag"),N=re("a-button"),W=re("a-select"),z=re("a-tooltip"),V=re("a-switch"),U=re("a-form");return le(),Ae(U,{model:a,layout:"vertical"},{default:X(()=>[G(C,{label:"ID"},{default:X(()=>[G(I,{allowClear:"",placeholder:$.$t("inputTips"),value:a.id,"onUpdate:value":T[0]||(T[0]=H=>a.id=H),valueModifiers:{trim:!0},onChange:T[1]||(T[1]=H=>M("id"))},null,8,["placeholder","value"])]),_:1}),G(C,{label:""},{default:X(()=>[G(I,{allowClear:"",placeholder:$.$t("inputTips"),value:a.name,"onUpdate:value":T[2]||(T[2]=H=>a.name=H),valueModifiers:{trim:!0},onChange:T[3]||(T[3]=H=>M("name"))},null,8,["placeholder","value"])]),_:1}),G(b),G(C,{label:""},{default:X(()=>[G(k,null,{default:X(()=>[G(R,{value:a.dataType,"onUpdate:value":T[4]||(T[4]=H=>a.dataType=H),onChange:y},{default:X(()=>[G(A,{value:"ROLES"},{default:X(()=>T[10]||(T[10]=[se("")])),_:1}),G(A,{value:"INITIATOR"},{default:X(()=>T[11]||(T[11]=[se("")])),_:1})]),_:1},8,["value"])]),_:1}),G(k,null,{default:X(()=>[a.dataType==="USERS"?(le(),Oe("div",j5,[(le(!0),Oe(pt,null,kr(a.selectedUser.text,H=>(le(),Ae(O,{key:H,effect:"plain"},{default:X(()=>[se(Xe(H),1)]),_:2},1024))),128)),Le("div",null,[G(N,{size:"small",type:"primary",onClick:T[5]||(T[5]=H=>E())},{default:X(()=>T[12]||(T[12]=[se("")])),_:1})])])):we("",!0),a.dataType==="ROLES"?(le(),Oe("div",H5,[G(W,{"show-search":"",mode:"multiple","filter-option":At(t),options:e.roles,allowClear:"",placeholder:$.$t("selectTips"),style:{width:"100%"},value:a.roleIds,"onUpdate:value":T[6]||(T[6]=H=>a.roleIds=H),onChange:x},null,8,["filter-option","options","placeholder","value"])])):we("",!0)]),_:1})]),_:1}),l.value?(le(),Ae(b,{key:0})):we("",!0),l.value?(le(),Ae(C,{key:1,label:""},{default:X(()=>[G(k,null,{default:X(()=>[G(R,{value:h.value,"onUpdate:value":T[7]||(T[7]=H=>h.value=H),name:"radioGroup",onChange:S},{default:X(()=>[G(k,null,{default:X(()=>[G(A,{value:"Null"},{default:X(()=>T[13]||(T[13]=[se("")])),_:1})]),_:1}),G(k,null,{default:X(()=>[G(A,{value:"SequentialMultiInstance"},{default:X(()=>T[14]||(T[14]=[se("")])),_:1})]),_:1}),G(k,null,{default:X(()=>[G(A,{value:"ParallelMultiInstance"},{default:X(()=>T[15]||(T[15]=[se("")])),_:1})]),_:1}),G(k,null,{default:X(()=>[G(A,{value:"CustomMultiInstance"},{default:X(()=>T[16]||(T[16]=[se("")])),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),h.value==="CustomMultiInstance"?(le(),Ae(k,{key:0,class:"mt-1"},{default:X(()=>[G(I,{value:f.value,"onUpdate:value":T[8]||(T[8]=H=>f.value=H),placeholder:$.$t("inputTips"),allowClear:"",onChange:S},null,8,["value","placeholder"])]),_:1})):we("",!0),h.value!=="Null"?(le(),Oe("div",W5,[G(z,null,{title:X(()=>T[17]||(T[17]=[se("")])),default:X(()=>[G(At(Zx),{style:{fontSize:"16px"}})]),_:1}),T[18]||(T[18]=Le("span",{class:"custom-label",style:{"margin-left":"5px"}},"",-1)),G(V,{checked:p.value,"onUpdate:checked":T[9]||(T[9]=H=>p.value=H),onChange:S},null,8,["checked"])])):we("",!0)]),_:1})):we("",!0),G(b),G(C,{label:""},{default:X(()=>[G(O5,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(b),G(C,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(C,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),bu=Dt({__name:"ElementMultiInstance",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),i=Pe("bpmnInstances"),r=Pe("bpmnElement"),o=Pe("prefix"),s=e,c=fe(),a=fe(""),u=fe({completionCondition:"",loopCardinality:"",extensionElements:[],asyncAfter:!1,asyncBefore:!1,exclusive:!1}),l=fe({});Ht(()=>s.bpmnElementId,()=>{it(()=>{h(s.businessObject)})},{deep:!0,immediate:!0});const p=()=>{c.value=null,a.value="",l.value={},u.value.completionCondition="",u.value.loopCardinality="",u.value.extensionElements=[],u.value.asyncAfter=!1,u.value.asyncBefore=!1,u.value.exclusive=!1},h=E=>{var y,x,v,S;if(p(),!E.loopCharacteristics){a.value="Null",l.value={};return}if(E.loopCharacteristics.$type==="bpmn:StandardLoopCharacteristics"){a.value="StandardLoop",l.value={};return}E.loopCharacteristics.isSequential?a.value="SequentialMultiInstance":a.value="ParallelMultiInstance",l.value={...u.value,...E.loopCharacteristics,completionCondition:((x=(y=E.loopCharacteristics)==null?void 0:y.completionCondition)==null?void 0:x.body)??"",loopCardinality:((S=(v=E.loopCharacteristics)==null?void 0:v.loopCardinality)==null?void 0:S.body)??""},c.value=E.loopCharacteristics,E.loopCharacteristics.extensionElements&&E.loopCharacteristics.extensionElements.values&&E.loopCharacteristics.extensionElements.values.length&&(l.value.timeCycle=E.loopCharacteristics.extensionElements.values[0].body)},d=E=>{const y=i(),x=r();if(E==="Null"){n(x,{loopCharacteristics:null});return}if(E==="StandardLoop"){const v=y.moddle.create("bpmn:StandardLoopCharacteristics");n(x,{loopCharacteristics:v}),c.value=null;return}E==="SequentialMultiInstance"?c.value=y.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:!0}):c.value=y.moddle.create("bpmn:MultiInstanceLoopCharacteristics"),n(x,{loopCharacteristics:qn(c.value)})},f=E=>{const y=i(),x=r(),v=E.target.value;let S=null;v&&v.length&&(S=y.moddle.create("bpmn:FormalExpression",{body:v})),y.modeling.updateModdleProperties(x,qn(c.value),{loopCardinality:S})},g=E=>{const y=i(),x=r(),v=E.target.value;let S=null;v&&v.length&&(S=y.moddle.create("bpmn:FormalExpression",{body:v})),y.modeling.updateModdleProperties(x,qn(c.value),{completionCondition:S})},m=E=>{const y=i(),x=r(),v=E.target.value,S=y.moddle.create("bpmn:ExtensionElements",{values:[y.moddle.create(`${o}:FailedJobRetryTimeCycle`,{body:v})]});y.modeling.updateModdleProperties(x,qn(c.value),{extensionElements:S})},w=()=>{const E=i(),y=r();E.modeling.updateModdleProperties(y,qn(c.value),{collection:l.value.collection||null,elementVariable:l.value.elementVariable||null})},_=E=>{const y=i(),x=r(),{asyncBefore:v,asyncAfter:S}=l.value;let M=Object.create(null);!v&&!S?(l.value.exclusive=!1,M={asyncBefore:!1,asyncAfter:!1,exclusive:!1,extensionElements:null}):M[E]=l.value[E],y.modeling.updateModdleProperties(x,qn(c.value),M)};return(E,y)=>{const x=re("a-select-option"),v=re("a-select"),S=re("a-form-item"),M=re("a-input"),$=re("a-checkbox"),T=re("a-form");return le(),Oe("div",null,[G(T,{layout:"vertical"},{default:X(()=>[G(S,{label:""},{default:X(()=>[G(v,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:E.$t("selectTips"),style:{width:"100%"},value:a.value,"onUpdate:value":y[0]||(y[0]=I=>a.value=I),onChange:d},{default:X(()=>[G(x,{value:"ParallelMultiInstance"},{default:X(()=>y[12]||(y[12]=[se("")])),_:1}),G(x,{value:"SequentialMultiInstance"},{default:X(()=>y[13]||(y[13]=[se("")])),_:1}),G(x,{value:"StandardLoop"},{default:X(()=>y[14]||(y[14]=[se("")])),_:1}),G(x,{value:"Null"},{default:X(()=>y[15]||(y[15]=[se("")])),_:1})]),_:1},8,["filter-option","placeholder","value"])]),_:1}),a.value==="ParallelMultiInstance"||a.value==="SequentialMultiInstance"?(le(),Oe(pt,{key:0},[G(S,{label:""},{default:X(()=>[G(M,{value:l.value.loopCardinality,"onUpdate:value":y[1]||(y[1]=I=>l.value.loopCardinality=I),placeholder:E.$t("inputTips"),allowClear:"",onChange:f},null,8,["value","placeholder"])]),_:1}),G(S,{label:""},{default:X(()=>[G(M,{value:l.value.collection,"onUpdate:value":y[2]||(y[2]=I=>l.value.collection=I),placeholder:E.$t("inputTips"),allowClear:"",onChange:w},null,8,["value","placeholder"])]),_:1}),G(S,{label:""},{default:X(()=>[G(M,{value:l.value.elementVariable,"onUpdate:value":y[3]||(y[3]=I=>l.value.elementVariable=I),placeholder:E.$t("inputTips"),allowClear:"",onChange:w},null,8,["value","placeholder"])]),_:1}),G(S,{label:""},{default:X(()=>[G(M,{value:l.value.completionCondition,"onUpdate:value":y[4]||(y[4]=I=>l.value.completionCondition=I),placeholder:E.$t("inputTips"),allowClear:"",onChange:g},null,8,["value","placeholder"])]),_:1}),G(S,{label:""},{default:X(()=>[G($,{checked:l.value.asyncBefore,"onUpdate:checked":y[5]||(y[5]=I=>l.value.asyncBefore=I),onChange:y[6]||(y[6]=I=>_("asyncBefore"))},{default:X(()=>y[16]||(y[16]=[se("")])),_:1},8,["checked"]),G($,{checked:l.value.asyncAfter,"onUpdate:checked":y[7]||(y[7]=I=>l.value.asyncAfter=I),onChange:y[8]||(y[8]=I=>_("asyncAfter"))},{default:X(()=>y[17]||(y[17]=[se("")])),_:1},8,["checked"]),l.value.asyncAfter||l.value.asyncBefore?(le(),Ae($,{key:0,checked:l.value.exclusive,"onUpdate:checked":y[9]||(y[9]=I=>l.value.exclusive=I),onChange:y[10]||(y[10]=I=>_("exclusive"))},{default:X(()=>y[18]||(y[18]=[se("")])),_:1},8,["checked"])):we("",!0)]),_:1}),l.value.asyncAfter||l.value.asyncBefore?(le(),Ae(S,{key:0,label:"",name:"timeCycle"},{default:X(()=>[G(M,{value:l.value.timeCycle,"onUpdate:value":y[11]||(y[11]=I=>l.value.timeCycle=I),placeholder:E.$t("inputTips"),allowClear:"",onChange:m},null,8,["value","placeholder"])]),_:1})):we("",!0)],64)):we("",!0)]),_:1})])}}}),z5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("updateProperties"),n=Pe("bpmnElement"),i=e,r=Qt({id:"",name:""});Ht(()=>i.businessObject,c=>{it(()=>{o(c)})},{deep:!0,immediate:!0});const o=c=>{r.id=c.id,r.name=c.name},s=c=>{const a=n(),u=Object.create(null);u[c]=r[c],c==="id"?t(a,{id:r[c]}):t(a,u)};return(c,a)=>{const u=re("a-input"),l=re("a-form-item"),p=re("a-divider"),h=re("a-form");return le(),Ae(h,{model:r,layout:"vertical"},{default:X(()=>[G(l,{label:"ID"},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.id,"onUpdate:value":a[0]||(a[0]=d=>r.id=d),valueModifiers:{trim:!0},onChange:a[1]||(a[1]=d=>s("id"))},null,8,["placeholder","value"])]),_:1}),G(l,{label:""},{default:X(()=>[G(u,{allowClear:"",placeholder:c.$t("inputTips"),value:r.name,"onUpdate:value":a[2]||(a[2]=d=>r.name=d),valueModifiers:{trim:!0},onChange:a[3]||(a[3]=d=>s("name"))},null,8,["placeholder","value"])]),_:1}),G(p),G(l,{label:""},{default:X(()=>[G(bu,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(p),G(l,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(l,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),V5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),i=Pe("bpmnElement"),r=e,o=fe([{label:"Java",value:"class"},{label:"",value:"expression"},{label:"",value:"delegateExpression"}]),s=Qt({id:"",name:"",executeType:void 0,class:"",expression:"",resultVariable:"",delegateExpression:""}),c=()=>{s.id="",s.name="",s.executeType=void 0,s.class="",s.expression="",s.resultVariable="",s.delegateExpression=""};Ht(()=>r.businessObject,p=>{it(()=>{a(p)})},{deep:!0,immediate:!0});const a=p=>{c(),s.id=p.id,s.name=p.name;for(const h in s)if(!["id","name"].includes(h)){const d=p[h];d&&(s.executeType=h),s[h]=d}},u=()=>{const p=i(),h=Object.create(null),d=s.executeType;for(const f in s)["id","name"].includes(f)||f!=="executeType"&&f!==d&&(h[f]=null);h[d]=s[d]||"",n(p,h)},l=p=>{const h=i(),d=Object.create(null);d[p]=s[p],p==="id"?n(h,{id:s[p]}):n(h,d)};return(p,h)=>{const d=re("a-input"),f=re("a-form-item"),g=re("a-divider"),m=re("a-select"),w=re("a-form");return le(),Ae(w,{model:s,layout:"vertical"},{default:X(()=>[G(f,{label:"ID"},{default:X(()=>[G(d,{allowClear:"",placeholder:p.$t("inputTips"),value:s.id,"onUpdate:value":h[0]||(h[0]=_=>s.id=_),valueModifiers:{trim:!0},onChange:h[1]||(h[1]=_=>l("id"))},null,8,["placeholder","value"])]),_:1}),G(f,{label:""},{default:X(()=>[G(d,{allowClear:"",placeholder:p.$t("inputTips"),value:s.name,"onUpdate:value":h[2]||(h[2]=_=>s.name=_),valueModifiers:{trim:!0},onChange:h[3]||(h[3]=_=>l("name"))},null,8,["placeholder","value"])]),_:1}),G(g),G(f,{label:""},{default:X(()=>[G(m,{"show-search":"","filter-option":At(t),options:o.value,allowClear:"",placeholder:p.$t("selectTips"),style:{width:"100%"},value:s.executeType,"onUpdate:value":h[4]||(h[4]=_=>s.executeType=_)},null,8,["filter-option","options","placeholder","value"])]),_:1}),s.executeType==="class"?(le(),Ae(f,{key:0,label:"Java"},{default:X(()=>[G(d,{value:s.class,"onUpdate:value":h[5]||(h[5]=_=>s.class=_),valueModifiers:{trim:!0},clearable:"",onChange:u},null,8,["value"])]),_:1})):we("",!0),s.executeType==="expression"?(le(),Ae(f,{key:1,label:""},{default:X(()=>[G(d,{value:s.expression,"onUpdate:value":h[6]||(h[6]=_=>s.expression=_),valueModifiers:{trim:!0},clearable:"",onChange:u},null,8,["value"])]),_:1})):we("",!0),s.executeType==="delegateExpression"?(le(),Ae(f,{key:2,label:""},{default:X(()=>[G(d,{value:s.delegateExpression,"onUpdate:value":h[7]||(h[7]=_=>s.delegateExpression=_),valueModifiers:{trim:!0},clearable:"",onChange:u},null,8,["value"])]),_:1})):we("",!0),G(g),G(f,{label:""},{default:X(()=>[G(bu,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(g),G(f,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(f,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),U5=Dt({__name:"AsyncContinue",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=Pe("updateProperties"),n=Pe("bpmnElement"),i=e,r=Qt({asyncAfter:!1,asyncBefore:!1,exclusive:!1});Ht(()=>i.businessObject,a=>{it(()=>{s(a)})},{deep:!0,immediate:!0}),Ht(()=>i.businessObject,a=>{it(()=>{s(a)})},{deep:!0,immediate:!0});const o=()=>{r.asyncBefore=!1,r.asyncAfter=!1,r.exclusive=!1},s=a=>{o(),r.asyncBefore=a==null?void 0:a.asyncBefore,r.asyncAfter=a==null?void 0:a.asyncAfter,r.exclusive=a==null?void 0:a.exclusive},c=()=>{const a=n();!r.asyncBefore&&!r.asyncAfter&&(r.exclusive=!1),t(a,{...qn(r)})};return(a,u)=>{const l=re("a-checkbox");return le(),Oe("div",null,[G(l,{checked:r.asyncBefore,"onUpdate:checked":u[0]||(u[0]=p=>r.asyncBefore=p),onChange:c},{default:X(()=>u[3]||(u[3]=[se("")])),_:1},8,["checked"]),G(l,{checked:r.asyncAfter,"onUpdate:checked":u[1]||(u[1]=p=>r.asyncAfter=p),onChange:c},{default:X(()=>u[4]||(u[4]=[se("")])),_:1},8,["checked"]),r.asyncAfter||r.asyncBefore?(le(),Ae(l,{key:0,checked:r.exclusive,"onUpdate:checked":u[2]||(u[2]=p=>r.exclusive=p),onChange:c},{default:X(()=>u[5]||(u[5]=[se("")])),_:1},8,["checked"])):we("",!0)])}}}),Y5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),i=Pe("bpmnElement"),r=e,o=fe([{label:"",value:"inline"},{label:"",value:"external"}]),s=Qt({id:"",name:"",scriptFormat:"",scriptType:void 0,script:"",resource:"",resultVariable:""}),c=()=>{s.id="",s.name="",s.scriptType=void 0,s.script="",s.resource="",s.resultVariable=""};Ht(()=>r.businessObject,p=>{it(()=>{a(p)})},{deep:!0,immediate:!0});const a=p=>{c(),s.id=p.id,s.name=p.name;for(const h in s)if(!["id","name","scriptType"].includes(h)){const d=p[h];s[h]=d}s.scriptType=s.script?"inline":"external"},u=()=>{const p=i(),h=Object.create(null);h.scriptFormat=s.scriptFormat||null,h.resultVariable=s.resultVariable||null,s.scriptType==="inline"?(h.script=s.script||null,h.resource=null):(h.resource=s.resource||null,h.script=null),n(p,h)},l=p=>{const h=i(),d=Object.create(null);d[p]=s[p],p==="id"?n(h,{id:s[p]}):n(h,d)};return(p,h)=>{const d=re("a-input"),f=re("a-form-item"),g=re("a-divider"),m=re("a-select"),w=re("a-textarea"),_=re("a-form");return le(),Ae(_,{model:s,layout:"vertical"},{default:X(()=>[G(f,{label:"ID"},{default:X(()=>[G(d,{allowClear:"",placeholder:p.$t("inputTips"),value:s.id,"onUpdate:value":h[0]||(h[0]=E=>s.id=E),valueModifiers:{trim:!0},onChange:h[1]||(h[1]=E=>l("id"))},null,8,["placeholder","value"])]),_:1}),G(f,{label:""},{default:X(()=>[G(d,{allowClear:"",placeholder:p.$t("inputTips"),value:s.name,"onUpdate:value":h[2]||(h[2]=E=>s.name=E),valueModifiers:{trim:!0},onChange:h[3]||(h[3]=E=>l("name"))},null,8,["placeholder","value"])]),_:1}),G(g),G(f,null,{default:X(()=>[G(U5,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(f,{label:""},{default:X(()=>[G(d,{value:s.scriptFormat,"onUpdate:value":h[4]||(h[4]=E=>s.scriptFormat=E),valueModifiers:{trim:!0},clearable:"",placeholder:p.$t("inputTips"),onInput:h[5]||(h[5]=E=>u()),onChange:h[6]||(h[6]=E=>u())},null,8,["value","placeholder"])]),_:1}),G(f,{label:""},{default:X(()=>[G(m,{"show-search":"","filter-option":At(t),options:o.value,allowClear:"",placeholder:p.$t("selectTips"),style:{width:"100%"},value:s.scriptType,"onUpdate:value":h[7]||(h[7]=E=>s.scriptType=E)},null,8,["filter-option","options","placeholder","value"])]),_:1}),s.scriptType==="inline"?(le(),Ae(f,{key:0,label:""},{default:X(()=>[G(w,{value:s.script,"onUpdate:value":h[8]||(h[8]=E=>s.script=E),valueModifiers:{trim:!0},rows:4,clearable:"",placeholder:p.$t("inputTips"),onInput:h[9]||(h[9]=E=>u()),onChange:h[10]||(h[10]=E=>u())},null,8,["value","placeholder"])]),_:1})):we("",!0),s.scriptType==="external"?(le(),Ae(f,{key:1,label:""},{default:X(()=>[G(d,{value:s.resource,"onUpdate:value":h[11]||(h[11]=E=>s.resource=E),valueModifiers:{trim:!0},clearable:"",placeholder:p.$t("inputTips"),onInput:h[12]||(h[12]=E=>u()),onChange:h[13]||(h[13]=E=>u())},null,8,["value","placeholder"])]),_:1})):we("",!0),G(f,{label:""},{default:X(()=>[G(d,{value:s.resultVariable,"onUpdate:value":h[14]||(h[14]=E=>s.resultVariable=E),valueModifiers:{trim:!0},clearable:"",placeholder:p.$t("inputTips"),onInput:h[15]||(h[15]=E=>u()),onChange:h[16]||(h[16]=E=>u())},null,8,["value","placeholder"])]),_:1}),G(g),G(f,{label:""},{default:X(()=>[G(bu,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(g),G(f,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(f,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),Z5=Dt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=Pe("updateProperties"),r=Pe("bpmnInstances")(),o=Pe("bpmnElement"),s=e,c=fe(!1),a=fe({id:"",name:""}),u=fe({}),l=fe([]),p=Qt({id:"",name:"",bindMessageId:void 0}),h=fe({}),d=()=>{p.id="",p.name="",p.bindMessageId=void 0,a.value.id="",a.value.name="",u.value={},l.value=[],h.value={}};Ht(()=>s.bpmnElementId,E=>{it(()=>{f(s.businessObject)})},{deep:!0,immediate:!0});const f=E=>{var y;d(),p.id=E.id,p.name=E.name,p.bindMessageId=((y=E==null?void 0:E.messageRef)==null?void 0:y.id)||void 0,u.value=Object.create(null),l.value=r.modeler.getDefinitions().rootElements,l.value.filter(x=>x.$type==="bpmn:Message").forEach(x=>{u.value[x.id]=x,h.value[x.id]=x.name}),h.value[-1]=""},g=()=>{if(h.value,a.value,h.value[a.value.id]){Ty.error("id");return}const E=r.moddle.create("bpmn:Message",a.value);l.value.push(E),h.value[a.value.id]=a.value.name,u.value[a.value.id]=E,c.value=!1},m=E=>{const y=o();if(E==="-1")n(y,{messageRef:null});else{const x=qn(u.value);n(y,{messageRef:x[E]})}},w=()=>{c.value=!0,a.value={}},_=E=>{const y=o(),x=Object.create(null);x[E]=p[E],E==="id"?n(y,{id:p[E]}):n(y,x)};return(E,y)=>{const x=re("a-input"),v=re("a-form-item"),S=re("a-divider"),M=re("a-select-option"),$=re("a-select"),T=re("a-button"),I=re("a-form"),C=re("a-modal");return le(),Oe("div",null,[G(I,{model:p,layout:"vertical"},{default:X(()=>[G(v,{label:"ID"},{default:X(()=>[G(x,{allowClear:"",placeholder:E.$t("inputTips"),value:p.id,"onUpdate:value":y[0]||(y[0]=b=>p.id=b),valueModifiers:{trim:!0},onChange:y[1]||(y[1]=b=>_("id"))},null,8,["placeholder","value"])]),_:1}),G(v,{label:""},{default:X(()=>[G(x,{allowClear:"",placeholder:E.$t("inputTips"),value:p.name,"onUpdate:value":y[2]||(y[2]=b=>p.name=b),valueModifiers:{trim:!0},onChange:y[3]||(y[3]=b=>_("name"))},null,8,["placeholder","value"])]),_:1}),G(S),G(v,{label:""},{default:X(()=>[G($,{"show-search":"","filter-option":At(t),allowClear:"",placeholder:E.$t("selectTips"),style:{width:"75%"},value:p.bindMessageId,"onUpdate:value":y[4]||(y[4]=b=>p.bindMessageId=b),onChange:m},{default:X(()=>[(le(!0),Oe(pt,null,kr(Object.keys(h.value),b=>(le(),Ae(M,{value:b,key:b},{default:X(()=>[se(Xe(h.value[b]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"]),G(T,{type:"primary",style:{"margin-left":"8px"},onClick:w},{default:X(()=>y[8]||(y[8]=[se("")])),_:1})]),_:1}),G(S),G(v,{label:""},{default:X(()=>[G(bu,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(S),G(v,{label:""},{default:X(()=>[G(Oi,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),G(v,{label:""},{default:X(()=>[G(Pn,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"]),G(C,{open:c.value,"onUpdate:open":y[7]||(y[7]=b=>c.value=b),title:"",width:"400px",onOk:g},{default:X(()=>[G(I,{model:a.value},{default:X(()=>[G(v,{label:"ID"},{default:X(()=>[G(x,{value:a.value.id,"onUpdate:value":y[5]||(y[5]=b=>a.value.id=b),valueModifiers:{trim:!0},clearable:""},null,8,["value"])]),_:1}),G(v,{label:""},{default:X(()=>[G(x,{value:a.value.name,"onUpdate:value":y[6]||(y[6]=b=>a.value.name=b),valueModifiers:{trim:!0},clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])])}}}),X5={ref:"propertyPanel",class:"property-panel"},K5=Dt({__name:"PropertyPanel",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=e,n=Wx(()=>(t.type,["bpmn:StartEvent","bpmn:EndEvent"].includes(t.type)?y5:t.type==="bpmn:Process"?b5:t.type==="bpmn:Group"?E5:t.type==="bpmn:SequenceFlow"?S5:t.type==="bpmn:IntermediateCatchEvent"?C5:t.type==="bpmn:BoundaryEvent"?A5:t.type==="bpmn:UserTask"?G5:t.type==="bpmn:ServiceTask"?V5:t.type==="bpmn:ScriptTask"?Y5:t.type==="bpmn:ReceiveTask"?Z5:t.type==="bpmn:Task"?z5:["bpmn:ExclusiveGateway","bpmn:ParallelGateway","bpmn:Participant","bpmn:DataStoreReference","bpmn:DataObjectReference","bpmn:SubProcess","bpmn:IntermediateThrowEvent","bpmn:Lane"].includes(t.type)?v5:x5));return(i,r)=>(le(),Oe("div",X5,[r[0]||(r[0]=Le("div",{class:"node-name"},[Le("i"),Le("span",null,"")],-1)),(le(),Ae(Gx(n.value),{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"]))],512))}}),Q5={class:"w100 h100"},J5={class:"ub ub-pj px-1"},q5={class:"bpmn-page"},eF=Dt({__name:"index",props:{simulation:{type:Boolean,default:!0},xml:{type:String,default:""},users:{type:Array,default:()=>[]},roles:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},categorys:{type:Array,default:()=>[]},isView:{type:Boolean,default:!1},bpmnID:{type:String,default:"modeler-container"},isReadOnly:{type:Boolean,default:!1},options:{type:Object,default:()=>{}},keyboard:{type:Boolean,default:!0},processId:{type:String,default:""},processName:{type:String,default:""},prefix:{type:String,default:"camunda"}},emits:["result"],setup(e,{emit:t}){const n=Qt({color:"#555",height:30,lineHeight:"30px",backgroundColor:"#ffffff"}),i=Qt({color:"#555",backgroundColor:"#fbfbfb"}),r=t,o=e,s=fe(),c=fe(1),a=fe(!1),u=fe(!1),l=fe(!1),p=fe(!1),h=fe(!1),d=fe(""),f=fe(""),g=fe(""),m=fe({}),w=Qt({useWorker:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showPrintMargin:!1,highlightActiveLine:!1,highlightSelectedWord:!0,tabSize:4,fontSize:14,wrap:!1,readOnly:!0,minLines:1,maxLines:50});let _=null,E=null;zx(()=>{const j=[],F={};o.prefix==="camunda"&&(j.push(EB),F.camunda=iB),o.prefix==="flowable"&&(j.push(IB),F.flowable=bB),o.prefix==="activiti"&&(j.push(TB),F.activiti=pB),o.isReadOnly?_=new jn({container:`#${o.bpmnID}`,additionalModules:[{translate:["value",Hf("zh")],paletteProvider:["value",""],labelEditingProvider:["value",""],contextPadProvider:["value",""],bendpoints:["value",{}],zoomScroll:["value",""],moveCanvas:["value",""],move:["value",""]},Kv,...j],gridLine:{smallGridSpacing:20,gridSpacing:80,gridLineStroke:1,gridLineOpacity:.2,gridLineColor:"#ddd"},moddleExtensions:F,...o.options}):_=new jn({container:`#${o.bpmnID}`,keyboard:o.keyboard?{bindTo:document}:null,additionalModules:[{translate:["value",Hf("zh")]},ZN,XN,WS,WO,Kv,...j],gridLine:{smallGridSpacing:15,gridSpacing:60,gridLineStroke:1,gridLineOpacity:.25,gridLineColor:"#ddd"},moddleExtensions:F,...o.options}),o.xml?T(o.xml):$(),_.on("commandStack.changed",async()=>{p.value=_.get("commandStack").canRedo(),l.value=_.get("commandStack").canUndo()}),_.on("root.added",pe=>{pe.element.type&&(E=pe.element,f.value=v(pe.element),g.value=pe.element.businessObject.id,m.value=pe.element.businessObject,f.value)});const Q=navigator.userAgent.indexOf("Firefox")>-1,q=function(){return window.addEventListener?function(pe,He,Qe,Ue){pe.addEventListener(He,Qe,Ue)}:window.attachEvent?function(pe,He,Qe){pe.attachEvent("on"+He,Qe)}:function(){}}(),ee=function(pe){pe.stopPropagation?pe.stopPropagation():pe.cancelBubble=!0,pe.preventDefault?pe.preventDefault():pe.returnValue=!1},ae=Q?"DOMMouseScroll":"mousewheel";q(s.value,ae,function(pe){const He=pe||window.event;pe.preventDefault(),ee(He)},!1)});const y=["element.click","shape.added","element.changed"],x=()=>{y.forEach(j=>{_.on(j,F=>{if(j==="root.added"&&!F.element.type||!F.element||F.element.type=="label"&&j=="shape.added")return;const Q=u.value,q=F.element&&F.element.id!==(E==null?void 0:E.id);F.element.type,!(j==="element.changed"&&(Q||q))&&it(()=>{j==="shape.added"&&["bpmn:StartEvent","bpmn:EndEvent","bpmn:UserTask"].includes(F.element.type)&&!F.element.businessObject.name&&(F.element.type=="bpmn:StartEvent"&&I(F.element,{name:""}),F.element.type=="bpmn:EndEvent"?I(F.element,{name:""}):F.element.type=="bpmn:UserTask"&&I(F.element,{name:""})),E=F.element,f.value=v(F.element),g.value=F.element.businessObject.id,m.value=F.element.businessObject,f.value})})})},v=j=>{var Q;let F="";return F=(Q=j==null?void 0:j.businessObject)==null?void 0:Q.$type,F},S=()=>{M((j,F)=>{r("result",{xml:F})})},M=async j=>{const{err:F,xml:Q}=await _.saveXML({format:!0});j(F,Q)},$=()=>{const j=o.processId||`Process_${new Date().getTime()}`,F=o.processName||`_${new Date().getTime()}`;T(oO(j,F,o.prefix))},T=j=>new Promise((F,Q)=>{try{_.importXML(j).then(q=>{x(),q.length&&H(),F()}).catch(q=>{Q(),console.warn("importFail errors ",q)})}catch(q){Q(),console.error(q.message,q.warnings)}}),I=(j,F)=>{u.value=!0,_.get("modeling").updateProperties(j,F),u.value=!1},C=()=>E,b=()=>({modeler:_,modeling:_.get("modeling"),moddle:_.get("moddle"),eventBus:_.get("eventBus"),bpmnFactory:_.get("bpmnFactory"),elementFactory:_.get("elementFactory"),elementRegistry:_.get("elementRegistry"),replace:_.get("replace"),selection:_.get("selection")});Is("updateProperties",I),Is("bpmnElement",C),Is("bpmnInstances",b),Is("prefix",o.prefix),Cy(()=>{_=null});const A=()=>new Promise((j,F)=>{_.saveXML({format:!0}).then(Q=>{j(Q)}).catch(Q=>{F(Q)})}),R=async()=>{a.value=!0;try{const{xml:j}=await A();d.value=j}catch{}},k=()=>{const j=document.createElement("input");j.type="file",j.click(),j.onchange=()=>{const F=j.files[0],Q=new FileReader;Q.onload=()=>{const q=Q.result;_.importXML(q)},Q.readAsText(F)}},O=()=>{_.get("commandStack").redo()},N=()=>{_.get("commandStack").undo()},W=()=>{p.value=!1,l.value=!1;const j=o.processId||`Process_${new Date().getTime()}`,F=o.processName||`_${new Date().getTime()}`;T(aO(j,F,o.prefix)).then(()=>{H()})},z=()=>{h.value=!h.value,o.simulation&&_.get("toggleMode").toggleMode()},V=()=>{c.value=Math.floor(c.value*100+.1*100)/100,_.get("canvas").zoom(c.value)},U=()=>{c.value=Math.floor(c.value*100-.1*100)/100,_.get("canvas").zoom(c.value)},H=()=>{c.value=1,_.get("canvas").zoom("fit-viewport","auto")},Y=()=>{const j=_.get("canvas").getRootElement();A().then(F=>{L(F.xml,j.id||"process","bpmn")}).catch(F=>{console.warn(F)})},K=()=>new Promise((j,F)=>{_.saveSVG().then(Q=>{j(Q)}).catch(Q=>{F(Q)})}),P=()=>{_.get("minimap").toggle()},D=()=>{const j=_.get("canvas").getRootElement();K().then(F=>{L(F.svg,j.id||"process","svg")}).catch(F=>{console.warn(F)})},L=(j,F,Q)=>{const q=new Blob([j]),ee=document.createElement("a"),ae=window.URL.createObjectURL(q),pe=`${F}.${Q}`;ee.href=ae,ee.target="_blank",ee.download=pe,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),window.URL.revokeObjectURL(ae)};return(j,F)=>{const Q=re("a-button"),q=re("a-space"),ee=re("a-layout-header"),ae=re("a-divider"),pe=re("a-layout-content"),He=re("a-layout-sider"),Qe=re("a-layout"),Ue=re("a-modal");return le(),Oe(pt,null,[Le("div",Q5,[G(Qe,{style:{height:"100%"}},{default:X(()=>[G(ee,{style:If(n)},{default:X(()=>[Le("div",J5,[Le("div",null,[G(q,null,{default:X(()=>[G(Q,{size:"small",onClick:k},{default:X(()=>F[3]||(F[3]=[se("XML")])),_:1}),G(Q,{size:"small",onClick:R},{default:X(()=>F[4]||(F[4]=[se("")])),_:1}),G(Q,{size:"small",onClick:V},{default:X(()=>F[5]||(F[5]=[se("")])),_:1}),G(Q,{size:"small",onClick:U},{default:X(()=>F[6]||(F[6]=[se("")])),_:1}),G(Q,{size:"small",onClick:H},{default:X(()=>F[7]||(F[7]=[se("")])),_:1}),G(Q,{size:"small",disabled:!l.value,onClick:N},{default:X(()=>F[8]||(F[8]=[se("")])),_:1},8,["disabled"]),G(Q,{size:"small",disabled:!l.value,onClick:O},{default:X(()=>F[9]||(F[9]=[se("")])),_:1},8,["disabled"]),G(Q,{size:"small",onClick:W},{default:X(()=>F[10]||(F[10]=[se("")])),_:1}),G(Q,{size:"small",onClick:Y},{default:X(()=>F[11]||(F[11]=[se("xml")])),_:1}),G(Q,{size:"small",onClick:D},{default:X(()=>F[12]||(F[12]=[se("svg")])),_:1}),e.simulation?(le(),Ae(Q,{key:0,size:"small",onClick:z},{default:X(()=>[se(Xe(h.value?"":""),1)]),_:1})):we("",!0),G(Q,{size:"small",onClick:P},{default:X(()=>F[13]||(F[13]=[se("/")])),_:1})]),_:1})]),Le("div",null,[G(q,null,{default:X(()=>[G(Q,{type:"primary",size:"small",onClick:S},{default:X(()=>F[14]||(F[14]=[se("")])),_:1})]),_:1})])])]),_:1},8,["style"]),G(ae,{style:{margin:"0"}}),G(Qe,{class:"cav-container"},{default:X(()=>[G(pe,{style:If(i),onMousewheel:F[0]||(F[0]=Vx(()=>{},["prevent"]))},{default:X(()=>[Le("div",q5,[Le("div",{id:"modeler-container",ref_key:"modelerContainer",ref:s,class:"modeler-container"},null,512)])]),_:1},8,["style"]),G(He,{class:"silder-box",style:{"min-width":"300px"}},{default:X(()=>[G(K5,{bpmnElementId:g.value,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:m.value,type:f.value},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1})]),_:1})]),G(Ue,{open:a.value,"onUpdate:open":F[2]||(F[2]=ze=>a.value=ze),width:"90%",footer:null},{default:X(()=>[G(At(DB),{value:d.value,"onUpdate:value":F[1]||(F[1]=ze=>d.value=ze),lang:"xml",theme:"chrome",options:w,class:"vue-ace-editor"},null,8,["value","options"])]),_:1},8,["open"])],64)}}}),rF=My(eF,[["__scopeId","data-v-f26841f3"]]);export{rF as B,DB as V};
