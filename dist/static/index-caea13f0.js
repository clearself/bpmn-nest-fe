import{d as kt,l as r_,af as o_,ag as s_,e as De,f as ue,w as Wt,n as it,W as oe,X as le,a0 as Oe,a1 as Le,k as H,Z as X,a6 as Xe,a9 as be,F as lt,G as ae,u as Ct,a8 as $r,Y as Ce,J as ti,r as Zt,h as a_,j as av,c as l_,ah as c_,o as u_,p as ua,a2 as Vd,B as p_}from"./vue-ced722ac.js";import{b as wp,c as h_,p as d_,M as di,o as f_,m as lv,q as m_}from"./antDesign-4a9bc9e2.js";import{n as oi,_ as cv}from"./index-5ec9320a.js";function g_(e,t){return t={exports:{}},e(t,t.exports),t.exports}var v_=g_(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var l=r-Math.floor(r),u="",o=0;o<Math.floor(r);o++){var s=Math.floor(Math.random()*i).toString(i);u=s+u}if(l){var p=Math.pow(i,l),s=Math.floor(Math.random()*p).toString(i);u=s+u}var a=parseInt(u,i);return a!==1/0&&a>=Math.pow(2,n)?t(n,i):u};t.rack=function(n,i,r){var o=function(u){var s=0;do{if(s++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var p=t(n,i)}while(Object.hasOwnProperty.call(l,p));return l[p]=u,p},l=o.hats={};return o.get=function(u){return o.hats[u]},o.set=function(u,s){return o.hats[u]=s,o},o.bits=n||128,o.base=i||16,o}});function jn(e){if(!(this instanceof jn))return new jn(e);e=e||[128,36,1],this._seed=e.length?v_.rack(e[0],e[1],e[2]):e}jn.prototype.next=function(e){return this._seed(e||!0)};jn.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n};jn.prototype.claim=function(e,t){this._seed.set(e,t||!0)};jn.prototype.assigned=function(e){return this._seed.get(e)||!1};jn.prototype.unclaim=function(e){delete this._seed.hats[e]};jn.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};const _p=1,uv=2,pv=4,hv=8,y_=16,b_=32,w_=64,__=128,E_=256,x_=512,S_=_p|uv|pv,C_=_p|hv,Ge=Object.freeze({ACTIVATED:_p,RUNNING:uv,ENDING:pv,ENDED:hv,DESTROYED:y_,FAILED:b_,TERMINATED:w_,CANCELED:__,COMPLETED:E_,COMPENSABLE:x_,ACTIVE:S_,NOT_DEAD:C_}),_o={};function br(e,t){throw new Error(`illegal transition: ${e.name} -> ${t}`)}function wr(e,t){return e===_o?t:e}class gn{constructor(t,n,{start:i,cancel:r,complete:o,destroy:l,fail:u,terminate:s,compensable:p}={}){this.name=t,this.traits=n,this._start=wr(i,this),this._compensable=wr(p,this),this._cancel=wr(r,this),this._complete=wr(o,this),this._destroy=wr(l,this),this._fail=wr(u,this),this._terminate=wr(s,this)}hasTrait(t){return(this.traits&t)!==0}complete(){return this._complete||br(this,"complete")}destroy(){return this._destroy||br(this,"destroy")}cancel(){return this._cancel||br(this,"cancel")}fail(){return this._fail||br(this,"fail")}terminate(){return this._terminate||br(this,"terminate")}compensable(){return this._compensable||br(this,"compensable")}start(){return this._start||br(this,"start")}}const Ol=new gn("failed",Ge.DESTROYED|Ge.FAILED),Nl=new gn("terminated",Ge.DESTROYED|Ge.TERMINATED),Ep=new gn("completed",Ge.DESTROYED|Ge.COMPLETED),Qi=new gn("terminating",Ge.ENDING|Ge.TERMINATED,{destroy:Nl}),Eo=new gn("canceling",Ge.ENDING|Ge.FAILED|Ge.CANCELED,{destroy:Ol,complete:_o,terminate:Qi}),xp=new gn("completing",Ge.ENDING|Ge.COMPLETED,{destroy:Ep,cancel:Eo,terminate:Qi}),Sp=new gn("failing",Ge.ENDING|Ge.FAILED,{cancel:Eo,complete:xp,destroy:Ol,terminate:Qi}),A_=new gn("compensable:failing",Ge.ENDING|Ge.FAILED,{complete:_o,terminate:Qi,destroy:Ol}),dv=new gn("compensable:completed",Ge.ENDED|Ge.COMPLETED,{cancel:Eo,fail:A_,destroy:Ep,compensable:_o}),T_=new gn("compensable:completing",Ge.ENDING|Ge.COMPLETED,{destroy:dv,terminate:Qi,compensable:_o}),$_=new gn("compensable:running",Ge.RUNNING|Ge.COMPENSABLE,{cancel:Eo,complete:T_,compensable:_o,destroy:dv,fail:Sp,terminate:Qi}),fv=new gn("running",Ge.RUNNING,{cancel:Eo,complete:xp,compensable:$_,destroy:Nl,fail:Sp,terminate:Qi}),R_=new gn("activated",Ge.ACTIVATED,{start:fv,destroy:Nl}),M_=Object.freeze({ACTIVATED:R_,RUNNING:fv,CANCELING:Eo,COMPLETING:xp,COMPLETED:Ep,FAILING:Sp,FAILED:Ol,TERMINATING:Qi,TERMINATED:Nl});class k_{constructor(t,n,i=null,r=null){this.id=t,this.element=n,this.parent=i,this.initiator=r,this.subscriptions=new Set,this.children=[],this.state=M_.ACTIVATED}get running(){return this.hasTrait(Ge.RUNNING)}get destroyed(){return this.hasTrait(Ge.DESTROYED)}get completed(){return this.hasTrait(Ge.COMPLETED)}get canceled(){return this.hasTrait(Ge.CANCELED)}get failed(){return this.hasTrait(Ge.FAILED)}hasTrait(t){return this.state.hasTrait(t)}start(){return this.state=this.state.start(),this}compensable(){return this.state=this.state.compensable(),this}fail(t){return this.failed||(this.state=this.state.fail(),this.failInitiator=t),this}cancel(t){return this.canceled||(this.state=this.state.cancel(),this.cancelInitiator=t),this}terminate(t){return this.state=this.state.terminate(),this.terminateInitiator=t,this}complete(){return this.state=this.state.complete(),this}destroy(t){return this.state=this.state.destroy(),this.destroyInitiator=t,this}getTokens(){return this.children.filter(t=>!t.destroyed).length}getTokensByElement(t){return this.children.filter(n=>!n.destroyed&&n.element===t).length}}function ts(e,t){const n=[];for(const i of e)t(i)&&n.push(i);return n}function zd(e,t){for(const n of e)if(t(n))return n;return null}function Ru(e,t){return["type","name","ref","iref"].every(n=>!(n in e)||e[n]===t[n])}function ll(e){return Array.prototype.concat.apply([],e)}const ws=Object.prototype.toString,I_=Object.prototype.hasOwnProperty;function Ir(e){return e===void 0}function Rt(e){return e!==void 0}function cl(e){return e==null}function Ie(e){return ws.call(e)==="[object Array]"}function Mt(e){return ws.call(e)==="[object Object]"}function Se(e){return ws.call(e)==="[object Number]"}function yt(e){const t=ws.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function un(e){return ws.call(e)==="[object String]"}function L_(e){if(!Ie(e))throw new Error("must supply array")}function en(e,t){return I_.call(e,t)}function je(e,t){const n=Bl(t);let i;return J(e,function(r,o){if(n(r,o))return i=r,!1}),i}function mv(e,t){const n=Bl(t);let i=Ie(e)?-1:void 0;return J(e,function(r,o){if(n(r,o))return i=o,!1}),i}function Re(e,t){const n=Bl(t);let i=[];return J(e,function(r,o){n(r,o)&&i.push(r)}),i}function J(e,t){let n,i;if(Ir(e))return;const r=Ie(e)?B_:N_;for(let o in e)if(en(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function P_(e,t){if(Ir(e))return[];L_(e);const n=Bl(t);return e.filter(function(i,r){return!n(i,r)})}function pn(e,t,n){return J(e,function(i,r){n=t(n,i,r)}),n}function xo(e,t){return!!pn(e,function(n,i,r){return n&&t(i,r)},!0)}function Ut(e,t){return!!je(e,t)}function Pt(e,t){let n=[];return J(e,function(i,r){n.push(t(i,r))}),n}function ul(e){return e&&Object.keys(e)||[]}function D_(e){return ul(e).length}function Cp(e){return Pt(e,t=>t)}function So(e,t,n={}){return t=Ap(t),J(e,function(i){let r=t(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function gv(e,...t){e=Ap(e);let n={};return J(t,r=>So(r,e,n)),Pt(n,function(r,o){return r[0]})}const O_=gv;function Gn(e,t){t=Ap(t);let n=[];return J(e,function(i,r){let o=t(i,r),l={d:o,v:i};for(var u=0;u<n.length;u++){let{d:s}=n[u];if(o<s){n.splice(u,0,l);return}}n.push(l)}),Pt(n,i=>i.v)}function Fn(e){return function(t){return xo(e,function(n,i){return t[i]===n})}}function Ap(e){return yt(e)?e:t=>t[e]}function Bl(e){return yt(e)?e:t=>t===e}function N_(e){return e}function B_(e){return Number(e)}function vv(e,t){let n,i,r,o;function l(c){let h=Date.now(),f=c?0:o+t-h;if(f>0)return u(f);e.apply(r,i),s()}function u(c){n=setTimeout(l,c)}function s(){n&&clearTimeout(n),n=o=i=r=void 0}function p(){n&&l(!0),s()}function a(...c){o=Date.now(),i=c,r=this,n||u(t)}return a.flush=p,a.cancel=s,a}function tn(e,t){return e.bind(t)}function q(e,...t){return Object.assign(e,...t)}function F_(e,t,n){let i=e;return J(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let l=t[o+1],u=i[r];Rt(l)&&cl(u)&&(u=i[r]=isNaN(+l)?{}:[]),Ir(l)?Ir(n)?delete i[r]:i[r]=n:i=u}),e}function Vn(e,t){let n={},i=Object(e);return J(t,function(r){r in i&&(n[r]=e[r])}),n}function si(e,t){let n={},i=Object(e);return J(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}function N(e,t){var n=re(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function Me(e,t){return Ut(t,function(n){return N(e,n)})}function re(e){return e&&e.businessObject||e}function He(e){return e&&e.di}function Fl(e){return e.filter(t=>N(t,"bpmn:SequenceFlow"))}function Mu(e){return N(e,"bpmn:MessageFlow")}function qi(e){return N(e,"bpmn:SequenceFlow")}function yv(e){return Tp(e)&&Rp(e,"bpmn:LinkEventDefinition")}function pl(e){return Tp(e)&&Rp(e,"bpmn:CompensateEventDefinition")}function bv(e){return N(e,"bpmn:Activity")&&e.businessObject.isForCompensation}function Tp(e){return(N(e,"bpmn:CatchEvent")||N(e,"bpmn:ReceiveTask"))&&!Wl(e)}function Va(e){return N(e,"bpmn:BoundaryEvent")&&!Wl(e)}function wv(e){return Rr(e)&&!Rp(e)}function $p(e){return!(Wl(e)||!_s(e,["bpmn:Activity","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:Gateway","bpmn:EndEvent"])||yv(e)||e.incoming.find(qi)||bv(e)||Yi(e))}function Rr(e){return N(e,"bpmn:StartEvent")&&!Wl(e)}function Wl(e){return!!e.labelTarget}function Yi(e){return re(e).triggeredByEvent}function _v(e){return N(e,"bpmn:StartEvent")&&re(e).isInterrupting||N(e,"bpmn:BoundaryEvent")&&re(e).cancelActivity}function _s(e,t){return t.some(n=>N(e,n))}function Rp(e,t){return Ut(re(e).eventDefinitions,n=>t?N(n,t):!0)}function Ev(e,t,n){const i=e.get("scopeIds",!1)||new jn([32,36]),r={},o={},l=new W_,u=new Set,s=[],p=new Set,a=new Set;F("tick",function(){for(const Y of u)B("elementChanged",{element:Y});u.clear()});function c(Y,O){if(s.push([O,Y]),s.length!==1)return;let L;for(;L=s[0];){const[P,z]=L;z.destroyed||P(),s.shift()}B("tick")}function h(Y){return o[Y.type]||l}function f(Y){const{element:O,parentScope:L,initiator:P=null,scope:z=W({element:O,parent:L,initiator:P})}=Y;return c(z,function(){z.running||z.start(),M("signal",{...Y,scope:z}),h(O).signal({...Y,scope:z}),z.parent&&D(z.parent)}),z}function d(Y){const{element:O,scope:L,initiator:P=L}=Y,z=W({element:O,parent:L,initiator:P});return c(z,function(){z.running||z.start(),M("enter",Y),h(O).enter({...Y,initiator:P,scope:z}),z.parent&&D(z.parent)}),z}function m(Y){const{element:O,scope:L,initiator:P=L}=Y;c(L,function(){M("exit",Y),h(O).exit({...Y,initiator:P}),L.running&&L.complete(),C(L,P),L.parent&&D(L.parent)})}function g(Y){const{event:O,initiator:L,scope:P}=Y,z=_(O),K=P.subscriptions,te=ts(K,ke=>Ru(z,ke.event)),ne=te.filter(ke=>!ke.event.interrupting),fe=te.filter(ke=>ke.event.interrupting);if(!fe.length)return ne.map(ke=>ke.triggerFn(L)).flat();const _e=fe.find(ke=>!ke.event.boundary)||fe[0],$e=ts(K,ke=>ke.event.persistent||H_(ke.event,_e.event));return K.forEach(ke=>{$e.includes(ke)||ke.remove()}),[_e.triggerFn(L)].flat().filter(ke=>ke)}function y(Y,O,L){O=_(O);const P=O.element,z={scope:Y,event:O,element:P,triggerFn:L,remove(){w(z)}};return a.add(z),Y.subscriptions.add(z),P&&I(P),z}function w(Y){const{scope:O,event:L}=Y;a.delete(Y),O.subscriptions.delete(Y),L.element&&I(L.element)}function S(Y){return N(Y,"bpmn:StartEvent")||N(Y,"bpmn:IntermediateCatchEvent")||N(Y,"bpmn:ReceiveTask")||G_(Y)?re(Y).name||Y.id:null}function b(Y){return{element:Y,interrupting:!1,boundary:!1,iref:Y.id,type:"none"}}function _(Y){if(!Y.businessObject)return Y;const O=_v(Y),L=Va(Y),P=S(Y),z={element:Y,interrupting:O,boundary:L,...P?{iref:P}:{}},K=xv(Y)[0];if(!K)return{...z,type:j_(Y)?"message":"none"};if(N(K,"bpmn:LinkEventDefinition"))return{...z,type:"link",name:K.name};if(N(K,"bpmn:SignalEventDefinition"))return{...z,type:"signal",ref:K.signalRef};if(N(K,"bpmn:TimerEventDefinition"))return{...z,type:"timer"};if(N(K,"bpmn:ConditionalEventDefinition"))return{...z,type:"condition"};if(N(K,"bpmn:EscalationEventDefinition"))return{...z,type:"escalation",ref:K.escalationRef};if(N(K,"bpmn:CancelEventDefinition"))return{...z,type:"cancel"};if(N(K,"bpmn:ErrorEventDefinition"))return{...z,type:"error",ref:K.errorRef};if(N(K,"bpmn:MessageEventDefinition"))return{...z,type:"message",ref:K.messageRef};if(N(K,"bpmn:CompensateEventDefinition")){let te=K.activityRef&&n.get(K.activityRef.id);return te||(Rr(Y)&&Yi(Y.parent)?te=Y.parent.parent:Va(Y)?te=Y.host:te=Y.parent),{...z,type:"compensate",ref:te,persistent:!0}}throw new Error("unknown event definition",K)}function v(Y,O=!0){const{element:L,parent:P,initiator:z}=Y;O&&M("createScope",{element:L,scope:P});const K=new k_(i.next(),L,P,z);return P&&P.children.push(K),p.add(K),O&&B("createScope",{scope:K}),I(L),P&&I(P.element),K}function E(Y){if(typeof Y=="function")return Y;const{event:O,element:L,scope:P}=Y,z=Y.elements||L&&[L],K=O&&_(O);return te=>(!K||Ru(K,te.event))&&(!z||z.includes(te.element))&&(!P||P===te.scope)}function x(Y){const O=Y==="function"?Y:E(Y);return L=>Array.from(L.subscriptions).some(O)}function T(Y){if(typeof Y=="function")return Y;const{element:O,waitsOnElement:L,parent:P,trait:z=Ge.RUNNING,subscribedTo:K}=Y,te=K?x(K):()=>!0;return ne=>(!O||ne.element===O)&&(!P||ne.parent===P)&&(!L||ne.getTokensByElement(L)>0)&&ne.hasTrait(z)&&te(ne)}function k(Y){return ts(a,E(Y))}function $(Y){return zd(a,E(Y))}function R(Y){return ts(p,T(Y))}function A(Y){return zd(p,T(Y))}function C(Y,O=null){if(!Y.destroyed){Y.destroy(O);for(const L of Y.subscriptions){const P=L.event.traits||Ge.ACTIVE;Y.hasTrait(P)||w(L)}if(Y.destroyed){for(const L of Y.children)L.destroyed||C(L,O);M("destroyScope",{element:Y.element,scope:Y}),p.delete(Y),B("destroyScope",{scope:Y})}I(Y.element),Y.parent&&I(Y.parent.element)}}function M(Y,O){B("trace",{...O,action:Y})}function I(Y){u.add(Y),s.length||B("tick")}function D(Y){B("scopeChanged",{scope:Y})}function B(Y,O={}){return t.fire(`tokenSimulation.simulator.${Y}`,O)}function F(Y,O){t.on("tokenSimulation.simulator."+Y,O)}function j(Y,O){t.off("tokenSimulation.simulator."+Y,O)}function Z(Y,O){const L=V(Y);r[Y.id||Y]={...L,...O},I(Y)}function Q(){const Y=[];return n.forEach(O=>{if(!_s(O,["bpmn:Process","bpmn:Participant"]))return;const L=v({element:O},!1);Y.push(L);const P=O.children.filter(Rr),z=O.children.filter($p);for(const K of P){const te={..._(K),interrupting:!1};y(L,te,ne=>f({element:O,startEvent:K,initiator:ne}))}if(!P.length)for(const K of z){const te=b(K);y(L,te,ne=>f({element:O,initiator:ne}))}}),Y}function W(Y){const{element:O}=Y,L=v(Y),{children:P=[],attachers:z=[]}=O;for(const K of P)if(Yi(K)){const te=K.children.filter(ne=>Rr(ne)&&!pl(ne));for(const ne of te)y(L,ne,fe=>f({element:K,parentScope:L,startEvent:ne,initiator:fe}))}for(const K of z)Va(K)&&!pl(K)&&y(L,K,te=>f({element:K,parentScope:L.parent,hostScope:L,initiator:te}));return L}function V(Y){return r[Y.id||Y]||{}}function G(Y,O){if(!O.length)return;const L={type:"all-completed",persistent:!1},P=new Set(O),z=K=>{P.delete(K.scope),P.size===0&&(j("destroyScope",z),g({scope:Y,event:L}))};return F("destroyScope",z),L}function U(Y,O=!0){Z(Y,{wait:O})}function ee(){for(const Y of p)C(Y);for(const Y of Q())p.add(Y);B("tick"),B("reset")}this.createScope=v,this.destroyScope=C,this.findScope=A,this.findScopes=R,this.findSubscription=$,this.findSubscriptions=k,this.waitAtElement=U,this.waitForScopes=G,this.setConfig=Z,this.getConfig=V,this.signal=f,this.enter=d,this.exit=m,this.subscribe=y,this.trigger=g,this.reset=ee,this.on=F,this.off=j,this.registerBehavior=function(Y,O){o[Y]=O}}Ev.$inject=["injector","eventBus","elementRegistry"];function W_(){this.signal=function(e){e.element},this.exit=function(e){e.element},this.enter=function(e){e.element}}function H_(e,t){return e.type===t.type&&e.boundary&&!t.boundary}function j_(e){return N(e,"bpmn:ReceiveTask")||e.incoming.some(t=>N(t,"bpmn:MessageFlow"))}function G_(e){if(!Va(e))return!1;const t=xv(e);return!t[0]||_s(t[0],["bpmn:ConditionalEventDefinition","bpmn:TimerEventDefinition"])}function xv(e){return e.businessObject.get("eventDefinitions")||[]}function Hl(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:StartEvent",this)}Hl.prototype.signal=function(e){this._simulator.exit(e)};Hl.prototype.exit=function(e){this._activityBehavior.exit(e)};Hl.$inject=["simulator","activityBehavior"];function Es(e,t,n){this._intermediateThrowEventBehavior=n,this._scopeBehavior=t,e.registerBehavior("bpmn:EndEvent",this)}Es.$inject=["simulator","scopeBehavior","intermediateThrowEventBehavior"];Es.prototype.enter=function(e){this._intermediateThrowEventBehavior.enter(e)};Es.prototype.signal=function(e){this._intermediateThrowEventBehavior.signal(e)};Es.prototype.exit=function(e){const{scope:t}=e;this._scopeBehavior.tryExit(t.parent,t)};function jl(e,t,n){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,e.registerBehavior("bpmn:BoundaryEvent",this)}jl.prototype.signal=function(e){const{element:t,scope:n,hostScope:i=this._simulator.findScope({parent:n.parent,element:t.host})}=e;if(!i)throw new Error("host scope not found");if(re(t).cancelActivity){this._scopeBehavior.interrupt(i,n);const o=this._scopeBehavior.tryExit(i,n);if(o){const l=this._simulator.subscribe(i,o,u=>(l.remove(),this._simulator.exit(e)));return}}this._simulator.exit(e)};jl.prototype.exit=function(e){this._activityBehavior.exit(e)};jl.$inject=["simulator","activityBehavior","scopeBehavior"];function xs(e,t){this._activityBehavior=t,this._simulator=e,e.registerBehavior("bpmn:IntermediateCatchEvent",this),e.registerBehavior("bpmn:ReceiveTask",this)}xs.$inject=["simulator","activityBehavior"];xs.prototype.signal=function(e){return this._simulator.exit(e)};xs.prototype.enter=function(e){const{element:t}=e;return this._activityBehavior.signalOnEvent(e,t)};xs.prototype.exit=function(e){this._activityBehavior.exit(e)};function Ss(e,t,n){this._simulator=e,this._activityBehavior=t,this._eventBehaviors=n,e.registerBehavior("bpmn:IntermediateThrowEvent",this),e.registerBehavior("bpmn:SendTask",this)}Ss.prototype.enter=function(e){const{element:t}=e,n=this._eventBehaviors.get(t);if(n){const i=n(e);if(i)return this._activityBehavior.signalOnEvent(e,i)}this._activityBehavior.enter(e)};Ss.prototype.signal=function(e){this._activityBehavior.signal(e)};Ss.prototype.exit=function(e){this._activityBehavior.exit(e)};Ss.$inject=["simulator","activityBehavior","eventBehaviors"];function Gl(e,t){this._scopeBehavior=t,this._simulator=e,e.registerBehavior("bpmn:ExclusiveGateway",this)}Gl.prototype.enter=function(e){this._simulator.exit(e)};Gl.prototype.exit=function(e){const{element:t,scope:n}=e,i=Fl(t.outgoing);if(i.length===1)return this._simulator.enter({element:i[0],scope:n.parent});const{activeOutgoing:r}=this._simulator.getConfig(t),o=i.find(l=>l===r);return o?this._simulator.enter({element:o,scope:n.parent}):this._scopeBehavior.tryExit(n.parent,n)};Gl.$inject=["simulator","scopeBehavior"];function Vl(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:ParallelGateway",this)}Vl.prototype.enter=function(e){const{scope:t,element:n}=e,i=Fl(n.incoming),{parent:r}=t,o=this._simulator.findScopes({parent:r,element:n});if(o.length===i.length){for(const l of o)l!==t&&this._simulator.destroyScope(l.complete(),t);this._simulator.exit(e)}};Vl.prototype.exit=function(e){this._activityBehavior.exit(e)};Vl.$inject=["simulator","activityBehavior"];function Mp(e){this._simulator=e,e.registerBehavior("bpmn:EventBasedGateway",this)}Mp.$inject=["simulator"];Mp.prototype.enter=function(e){const{element:t,scope:n}=e,i=n.parent,o=V_(t).map(l=>this._simulator.subscribe(i,l,u=>(o.forEach(s=>s.remove()),this._simulator.destroyScope(n,u),this._simulator.signal({element:l,parentScope:i,initiator:u}))))};function V_(e){return e.outgoing.map(t=>t.target).filter(t=>_s(t,["bpmn:IntermediateCatchEvent","bpmn:ReceiveTask"]))}function yi(e,t){this._simulator=e,this._activityBehavior=t,e.registerBehavior("bpmn:InclusiveGateway",this)}yi.prototype.enter=function(e){this._tryJoin(e)};yi.prototype.exit=function(e){const{element:t,scope:n}=e;if(Fl(t.outgoing).length>1){const{activeOutgoing:r=[]}=this._simulator.getConfig(t);if(!r.length)throw new Error("no outgoing configured");for(const o of r)this._simulator.enter({element:o,scope:n.parent})}else this._activityBehavior.exit(e)};yi.prototype._tryJoin=function(e){const t=this._getRemainingScopes(e),n=t.map(u=>u.element);if(!this._canReachAnyElement(n,e.element))return this._join(e);const i=this._getElementScopes(e),{scope:r}=e;if(i[0]!==r)return;const o=this._simulator.waitForScopes(r,t),l=this._simulator.subscribe(r,o,()=>{l.remove(),this._tryJoin(e)})};yi.prototype._getRemainingScopes=function(e){const{scope:t,element:n}=e,{parent:i}=t;return this._simulator.findScopes(r=>r.parent===i&&r.element!==n)};yi.prototype._join=function(e){const t=this._getElementScopes(e);for(const n of t)n!==e.scope&&this._simulator.destroyScope(n.complete(),e.scope);this._simulator.exit(e)};yi.prototype._getElementScopes=function(e){const{element:t,scope:n}=e;return this._simulator.findScopes({parent:n.parent,element:t})};yi.prototype._canReachAnyElement=function(e,t,n=new Set){if(!e.length||n.has(t))return!1;if(n.add(t),e.some(r=>r===t))return!0;if(qi(t))return this._canReachAnyElement(e,t.source,n);const i=Fl(t.incoming);for(const r of i)if(this._canReachAnyElement(e,r,n))return!0;return!1};yi.$inject=["simulator","activityBehavior"];function bi(e,t,n){this._simulator=e,this._scopeBehavior=t,this._transactionBehavior=n;const i=["bpmn:BusinessRuleTask","bpmn:CallActivity","bpmn:ManualTask","bpmn:ScriptTask","bpmn:ServiceTask","bpmn:Task","bpmn:UserTask"];for(const r of i)e.registerBehavior(r,this)}bi.$inject=["simulator","scopeBehavior","transactionBehavior"];bi.prototype.signal=function(e){const t=this._triggerMessages(e);if(t)return this.signalOnEvent(e,t);this._simulator.exit(e)};bi.prototype.enter=function(e){const{element:t}=e,n=this.waitAtElement(t);if(n)return this.signalOnEvent(e,n);const i=this._triggerMessages(e);if(i)return this.signalOnEvent(e,i);this._simulator.exit(e)};bi.prototype.exit=function(e){const{element:t,scope:n}=e,i=n.parent,r=!n.failed;r&&!Yi(t)&&this._transactionBehavior.registerCompensation(n);const o=r?t.outgoing.filter(qi):[];o.forEach(l=>this._simulator.enter({element:l,scope:i})),o.length===0&&this._scopeBehavior.tryExit(i,n)};bi.prototype.signalOnEvent=function(e,t){const{scope:n,element:i}=e,r=this._simulator.subscribe(n,t,o=>(r.remove(),this._simulator.signal({scope:n,element:i,initiator:o})))};bi.prototype.waitAtElement=function(e){return this._simulator.getConfig(e).wait&&{element:e,type:"continue",interrupting:!1,boundary:!1}};bi.prototype._getMessageContexts=function(e,t=null){const n=t?r=>r.referencePoint.x>t.x:()=>!0,i=(r,o)=>r.referencePoint.x-o.referencePoint.x;return[...e.incoming.filter(Mu).map(r=>({incoming:r,referencePoint:U_(r.waypoints)})),...e.outgoing.filter(Mu).map(r=>({outgoing:r,referencePoint:z_(r.waypoints)}))].sort(i).filter(n)};bi.prototype._triggerMessages=function(e){const{element:t,initiator:n,scope:i}=e;let r=i.messageContexts;r||(r=i.messageContexts=this._getMessageContexts(t));const o=n&&n.element;if(Mu(o)&&i.expectedIncoming!==o){console.debug("Simulator :: ActivityBehavior :: ignoring out-of-bounds message");return}for(;r.length;){const{incoming:l,outgoing:u}=r.shift();if(l){if(!n)continue;return i.expectedIncoming=l,{element:t,type:"message",name:l.id,interrupting:!1,boundary:!1}}this._simulator.signal({element:u})}};function z_(e){return e&&e[0]}function U_(e){return e&&e[e.length-1]}function Br(e,t,n,i,r){this._simulator=e,this._activityBehavior=t,this._scopeBehavior=n,this._transactionBehavior=i,this._elementRegistry=r,e.registerBehavior("bpmn:SubProcess",this),e.registerBehavior("bpmn:Transaction",this),e.registerBehavior("bpmn:AdHocSubProcess",this)}Br.$inject=["simulator","activityBehavior","scopeBehavior","transactionBehavior","elementRegistry"];Br.prototype.signal=function(e){this._start(e)};Br.prototype.enter=function(e){const{element:t}=e,n=this._activityBehavior.waitAtElement(t);if(n)return this._activityBehavior.signalOnEvent(e,n);this._start(e)};Br.prototype.exit=function(e){const{scope:t}=e,n=t.parent;n.failInitiator===t&&n.complete(),this._activityBehavior.exit(e)};Br.prototype._start=function(e){const{element:t,startEvent:n,scope:i}=e,r=i.parent;if(Yi(t)){if(!n)throw new Error("missing <startEvent>: required for event sub-process")}else if(n)throw new Error("unexpected <startEvent>: not allowed for sub-process");if(r.destroyed)throw new Error(`target scope <${r.id}> destroyed`);Y_(t)&&this._transactionBehavior.setup(e),n&&_v(n)&&this._scopeBehavior.interrupt(r,i);const o=this._findStarts(t,n);for(const l of o)Rr(l)?this._simulator.signal({element:l,parentScope:i,initiator:i}):this._simulator.enter({element:l,scope:i,initiator:i})};Br.prototype._findStarts=function(e,t){e=this._elementRegistry.get(e.id+"_plane")||e;const n=t?i=>t===i:i=>wv(i);return e.children.filter(i=>n(i)||$p(i))};function Y_(e){return N(e,"bpmn:Transaction")}const ku={type:"cancel",interrupting:!0,boundary:!1,persistent:!0};function er(e,t){this._simulator=e,this._scopeBehavior=t}er.$inject=["simulator","scopeBehavior"];er.prototype.setup=function(e){const{scope:t}=e,n=this._simulator.subscribe(t,ku,o=>(n.remove(),this.cancel({scope:t,initiator:o}))),i={type:"compensate",ref:t.element,persistent:!0,traits:Ge.NOT_DEAD},r=this._simulator.subscribe(t,i,o=>t.canceled?(r.remove(),this.compensate({scope:t,element:t.element,initiator:o})):this._simulator.trigger({event:ku,scope:t}))};er.prototype.cancel=function(e){const{scope:t,initiator:n}=e;if(!t.destroyed)return t.cancel(n),this._simulator.trigger({event:{type:"compensate",ref:t.element},initiator:n,scope:t}),this._simulator.trigger({scope:t,initiator:n,event:ku})};er.prototype.registerCompensation=function(e){const{element:t}=e,n=t.children.filter(Yi).map(o=>o.children.find(l=>Rr(l)&&pl(l))).filter(o=>o),i=t.attachers.filter(pl);if(!n.length&&!i.length)return;const r=this.findTransactionScope(e.parent);N(r.element,"bpmn:Transaction")||this.makeCompensable(r);for(const o of n){const l={element:o,type:"compensate",persistent:!0,interrupting:!0,ref:t,traits:Ge.NOT_DEAD},u=o.parent,s=this._simulator.subscribe(e,l,p=>(s.remove(),this._simulator.signal({initiator:p,element:u,startEvent:o,parentScope:e})))}for(const o of i){const l={element:o,type:"compensate",persistent:!0,ref:t,traits:Ge.NOT_DEAD},u=o.outgoing.map(p=>p.target).find(bv);if(!u)continue;const s=this._simulator.subscribe(r,l,p=>(s.remove(),this._simulator.enter({initiator:p,element:u,scope:r})))}};er.prototype.makeCompensable=function(e){if(e.hasTrait(Ge.COMPENSABLE)||!e.parent)return;const t={type:"compensate",ref:e.element,interrupting:!0,persistent:!0,traits:Ge.NOT_DEAD};e.compensable();const n=this._simulator.subscribe(e,t,o=>(n.remove(),e.fail(o),this.compensate({scope:e,element:e.element,initiator:o}),this._scopeBehavior.tryExit(e,o),e)),i=e.parent;if(!i)return;const r=this._simulator.subscribe(i,t,o=>(r.remove(),this._simulator.trigger({scope:e,event:t,initiator:o})));this.makeCompensable(i)};er.prototype.findTransactionScope=function(e){let t=e;for(;t;){const n=t.element;if(N(n,"bpmn:SubProcess")&&!Yi(n)||_s(n,["bpmn:Transaction","bpmn:Process","bpmn:Participant"]))return t;t=t.parent}throw X_(e)};er.prototype.compensate=function(e){const{scope:t,element:n}=e,i=ts(t.subscriptions,l=>Ru({type:"compensate"},l.event)),r=i.filter(l=>l.event.ref===n),o=i.filter(l=>l.event.ref!==n);for(const l of r)this._scopeBehavior.preExit(t,u=>this._simulator.trigger(l));for(const l of o.reverse())this._scopeBehavior.preExit(t,u=>this._simulator.trigger(l))};function X_(e){throw new Error(`no transaction context for <${e.id}>`)}function Fr(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:SequenceFlow",this)}Fr.prototype.enter=function(e){this._simulator.exit(e)};Fr.prototype.exit=function(e){const{element:t,scope:n}=e;this._simulator.enter({element:t.target,scope:n.parent})};Fr.$inject=["simulator","scopeBehavior"];function Wr(e){this._simulator=e,e.registerBehavior("bpmn:MessageFlow",this)}Wr.$inject=["simulator"];Wr.prototype.signal=function(e){this._simulator.exit(e)};Wr.prototype.exit=function(e){const{element:t,scope:n}=e,i=t.target,r=Tp(i)?i:{type:"message",element:t,name:t.id},o=this._simulator.findSubscription({event:r,elements:[i,i.parent]});o&&this._simulator.trigger({event:r,initiator:n,scope:o.scope})};function Be(e,t){return e.type==="label"?!1:(Array.isArray(t)||(t=[t]),t.some(function(n){return N(e,n)}))}function Z_(e,t){return je(re(e).eventDefinitions,n=>Be(n,t))}function K_(e,t){return Ut(re(e).eventDefinitions,n=>Be(n,t))}function kp(e,t,n){this._simulator=e,this._elementRegistry=t,this._scopeBehavior=n}kp.$inject=["simulator","elementRegistry","scopeBehavior"];kp.prototype.get=function(e){const n=Object.entries({"bpmn:LinkEventDefinition":i=>{const{element:r,scope:o}=i,l=Ud(r),u=o.parent,p=u.element.children.filter(a=>yv(a)&&Ud(a).name===l.name);for(const a of p)this._simulator.signal({element:a,parentScope:u,initiator:o})},"bpmn:SignalEventDefinition":i=>{const{element:r,scope:o}=i,l=this._simulator.findSubscriptions({event:r}),u=new Set;for(const s of l){const p=s.scope;u.has(p)||(u.add(p),this._simulator.trigger({event:r,scope:p,initiator:o}))}},"bpmn:EscalationEventDefinition":i=>{const{element:r,scope:o}=i,l=this._simulator.findScopes({subscribedTo:{event:r},trait:Ge.ACTIVE});let u=o;for(;u=u.parent;)if(l.includes(u)){this._simulator.trigger({event:r,scope:u,initiator:o});break}},"bpmn:ErrorEventDefinition":i=>{const{element:r,scope:o}=i;this._simulator.trigger({event:r,initiator:o,scope:Jc(o)})},"bpmn:TerminateEventDefinition":i=>{const{scope:r}=i;this._scopeBehavior.terminate(r.parent,r)},"bpmn:CancelEventDefinition":i=>{const{scope:r,element:o}=i;this._simulator.trigger({event:o,initiator:r,scope:Jc(r)})},"bpmn:CompensateEventDefinition":i=>{const{scope:r,element:o}=i;return this._simulator.waitForScopes(r,this._simulator.trigger({event:o,scope:Jc(r)}))}}).find(i=>K_(e,i[0]));return n&&n[1]};function Ud(e){return Z_(e,"bpmn:LinkEventDefinition")}function Jc(e){for(;Yi(e.parent.element);)e=e.parent;return e.parent}const Sv={type:"pre-exit",persistent:!0,interrupting:!0,boundary:!1},Qc={type:"exit",interrupting:!0,boundary:!1,persistent:!0};function wi(e){this._simulator=e}wi.$inject=["simulator"];wi.prototype.isFinished=function(e,t=null){return t=Cv(t),e.children.every(n=>n.destroyed||n.completed||t(n))};wi.prototype.destroyChildren=function(e,t,n=null){n=Cv(n),e.children.filter(i=>!i.destroyed&&!n(i)).map(i=>{this._simulator.destroyScope(i,t)})};wi.prototype.terminate=function(e,t){this.destroyChildren(e,t),e.terminate(t),this.tryExit(e,t)};wi.prototype.interrupt=function(e,t){this.destroyChildren(e,t,t),e.fail(t)};wi.prototype.tryExit=function(e,t){if(!e)throw new Error("missing <scope>");if(t||(t=e),!this.isFinished(e,t))return Qc;const n=this._simulator.findSubscriptions({event:Sv,scope:e});for(const i of n){const{event:r,scope:o}=i;if(this._simulator.trigger({event:r,scope:o,initiator:t}).length)return Qc}this._simulator.trigger({event:Qc,scope:e,initiator:t}),this.exit({scope:e,initiator:t})};wi.prototype.exit=function(e){const{scope:t,initiator:n}=e;if(!n)throw new Error("missing <initiator>");this._simulator.exit({element:t.element,scope:t,initiator:n})};wi.prototype.preExit=function(e,t){const n=this._simulator.subscribe(e,Sv,i=>(n.remove(),t(i)));return n};function Cv(e){return typeof e=="function"?e:t=>t===e}function Cs(e,t){this._simulator=e,this._scopeBehavior=t,e.registerBehavior("bpmn:Process",this),e.registerBehavior("bpmn:Participant",this)}Cs.prototype.signal=function(e){const{element:t,startEvent:n,startNodes:i=this._findStarts(t,n),scope:r}=e;if(!i.length)throw new Error("missing <startNodes> or <startEvent>");for(const o of i)Rr(o)?this._simulator.signal({element:o,parentScope:r}):this._simulator.enter({element:o,scope:r})};Cs.prototype.exit=function(e){const{scope:t,initiator:n}=e;this._scopeBehavior.destroyChildren(t,n)};Cs.prototype._findStarts=function(e,t){const n=t?i=>t===i:i=>wv(i);return e.children.filter(i=>n(i)||$p(i))};Cs.$inject=["simulator","scopeBehavior"];const J_={__init__:["startEventBehavior","endEventBehavior","boundaryEventBehavior","intermediateCatchEventBehavior","intermediateThrowEventBehavior","exclusiveGatewayBehavior","parallelGatewayBehavior","eventBasedGatewayBehavior","inclusiveGatewayBehavior","subProcessBehavior","sequenceFlowBehavior","messageFlowBehavior","processBehavior"],startEventBehavior:["type",Hl],endEventBehavior:["type",Es],boundaryEventBehavior:["type",jl],intermediateCatchEventBehavior:["type",xs],intermediateThrowEventBehavior:["type",Ss],exclusiveGatewayBehavior:["type",Gl],parallelGatewayBehavior:["type",Vl],eventBasedGatewayBehavior:["type",Mp],inclusiveGatewayBehavior:["type",yi],activityBehavior:["type",bi],subProcessBehavior:["type",Br],sequenceFlowBehavior:["type",Fr],messageFlowBehavior:["type",Wr],eventBehaviors:["type",kp],scopeBehavior:["type",wi],processBehavior:["type",Cs],transactionBehavior:["type",er]},Q_=5e3,Av={__depends__:[J_],__init__:[["eventBus","simulator",function(e,t){e.on(["tokenSimulation.toggleMode","tokenSimulation.resetSimulation"],Q_,n=>{t.reset()})}]],simulator:["type",Ev]};function de(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function zl(e,t){e.invoke(Wr,this),this._animation=t}de(zl,Wr);zl.$inject=["injector","animation"];zl.prototype.signal=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Wr.prototype.signal.call(this,e)})};function Ul(e,t){e.invoke(Fr,this),this._animation=t}de(Ul,Fr);Ul.$inject=["injector","animation"];Ul.prototype.enter=function(e){const{element:t,scope:n}=e;this._animation.animate(t,n,()=>{Fr.prototype.enter.call(this,e)})};const q_={sequenceFlowBehavior:["type",Ul],messageFlowBehavior:["type",zl]},Dt="tokenSimulation.toggleMode",Tv="tokenSimulation.playSimulation",$v="tokenSimulation.pauseSimulation",_i="tokenSimulation.resetSimulation",eE="tokenSimulation.animationCreated",Rv="tokenSimulation.animationSpeedChanged",Mv="tokenSimulation.simulator.elementChanged",As="tokenSimulation.simulator.destroyScope",tE="tokenSimulation.simulator.scopeChanged",Hr="tokenSimulation.simulator.createScope",Co="tokenSimulation.scopeFilterChanged",kv="tokenSimulation.simulator.trace",Yd=e=>!0;function Ts(e,t){this._eventBus=e,this._simulator=t,this._filter=Yd,e.on([Dt,_i],()=>{this._filter=Yd}),e.on(As,n=>{const{scope:i}=n;this._scope===i&&i.parent&&this.toggle(i.parent)}),e.on(Hr,n=>{const{scope:i}=n;!i.parent&&this._scope&&!Iv(this._scope,i)&&this.toggle(null)})}Ts.prototype.toggle=function(e){const t=this._scope!==e;this._scope=t?e:null,this._filter=this._scope?n=>Iv(this._scope,n):n=>!0,this._eventBus.fire(Co,{filter:this._filter,scope:this._scope})};Ts.prototype.isShown=function(e){return typeof e=="string"&&(e=this._simulator.findScope(t=>t.id===e)),e&&this._filter(e)};Ts.prototype.findScope=function(e){return this._simulator.findScopes(e).filter(t=>this.isShown(t))[0]};Ts.$inject=["eventBus","simulator"];function Iv(e,t){do if(e===t)return!0;while(t=t.parent);return!1}const Ao={scopeFilter:["type",Ts]},Ip=Object.prototype.toString,nE=Object.prototype.hasOwnProperty;function iE(e){return e===void 0}function rE(e){return Ip.call(e)==="[object Array]"}function oE(e){return Ip.call(e)==="[object Object]"}function sE(e){return Ip.call(e)==="[object Number]"}function aE(e,t){return nE.call(e,t)}function lE(e,t){let n,i;if(iE(e))return;const r=rE(e)?hE:pE;for(let o in e)if(aE(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function cE(e,t,n){return lE(e,function(i,r){n=t(n,i,r)}),n}function uE(e,t){return!!cE(e,function(n,i,r){return n&&t(i,r)},!0)}function pE(e){return e}function hE(e){return Number(e)}function Nn(e,...t){return Object.assign(e,...t)}const Et={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};Et.td=Et.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];Et.option=Et.optgroup=[1,'<select multiple="multiple">',"</select>"];Et.thead=Et.tbody=Et.colgroup=Et.caption=Et.tfoot=[1,"<table>","</table>"];Et.polyline=Et.ellipse=Et.polygon=Et.circle=Et.text=Et.line=Et.path=Et.rect=Et.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function dE(e,t=globalThis.document){var p;if(typeof e!="string")throw new TypeError("String expected");const n=/^<!--(.*?)-->$/s.exec(e);if(n)return t.createComment(n[1]);const i=(p=/<([\w:]+)/.exec(e))==null?void 0:p[1];if(!i)return t.createTextNode(e);if(e=e.trim(),i==="body"){const a=t.createElement("html");a.innerHTML=e;const{lastChild:c}=a;return c.remove(),c}let[r,o,l]=Object.hasOwn(Et,i)?Et[i]:Et._default,u=t.createElement("div");for(u.innerHTML=o+e+l;r--;)u=u.lastChild;if(u.firstChild===u.lastChild){const{firstChild:a}=u;return a.remove(),a}const s=t.createDocumentFragment();return s.append(...u.childNodes),s}var fE=dE;const Kt=wp(fE);function mE(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const gE=Object.prototype.toString;function Ze(e){return new Xi(e)}function Xi(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Xi.prototype.add=function(e){return this.list.add(e),this};Xi.prototype.remove=function(e){return gE.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Xi.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Xi.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Xi.prototype.array=function(){return Array.from(this.list)};Xi.prototype.has=Xi.prototype.contains=function(e){return this.list.contains(e)};function vE(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function yE(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var hl={},dl,Iu,Lp;function Lv(){dl=window.addEventListener?"addEventListener":"attachEvent",Iu=window.removeEventListener?"removeEventListener":"detachEvent",Lp=dl!=="addEventListener"?"on":""}var bE=hl.bind=function(e,t,n,i){return dl||Lv(),e[dl](Lp+t,n,i||!1),n},wE=hl.unbind=function(e,t,n,i){return Iu||Lv(),e[Iu](Lp+t,n,i||!1),n},fn=mE({__proto__:null,bind:bE,default:hl,unbind:wE},[hl]),Pv=["focus","blur"];function _E(e,t,n,i,r){return Pv.indexOf(n)!==-1&&(r=!0),fn.bind(e,n,function(o){var l=o.target||o.srcElement;o.delegateTarget=yE(l,t,!0),o.delegateTarget&&i.call(e,o)},r)}function EE(e,t,n,i){return Pv.indexOf(t)!==-1&&(i=!0),fn.unbind(e,t,n,i)}var Dv={bind:_E,unbind:EE};function ji(e,t){return t=t||document,t.querySelector(e)}function po(e,t){return t=t||document,t.querySelectorAll(e)}function xE(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function Ov(e,t){return t.appendChild(xE(e,t))}var Lu=2,Nv={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Lu,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Lu,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function SE(e,t){return Nv[t]?e.style[t]:e.getAttributeNS(null,t)}function Bv(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=Nv[i];r?(r===Lu&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function CE(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)Bv(e,r,t[r])}function Yl(e,t,n){if(typeof t=="string")if(n!==void 0)Bv(e,t,n);else return SE(e,t);else CE(e,t);return e}function AE(e){var t=e.parentNode;return t&&t.removeChild(e),e}var Pp={svg:"http://www.w3.org/2000/svg"},Xd='<svg xmlns="'+Pp.svg+'"';function TE(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(Pp.svg)===-1&&(e=Xd+e.substring(4)):(e=Xd+">"+e+"</svg>",t=!0);var n=$E(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function $E(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function Dp(e,t){var n;return e.charAt(0)==="<"?(n=TE(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(Pp.svg,e),t&&Yl(n,t),n}const Fv=getComputedStyle(document.documentElement),RE=Fv.getPropertyValue("--token-simulation-green-base-44"),ME=Fv.getPropertyValue("--token-simulation-white");function kE(){}function IE(e,t){return t.length===2?OE:e===1?PE:e===t.length-1?DE:LE}const LE=function(e){return e},PE=function(e){return-Math.cos(e*Math.PI/2)+1},DE=function(e){return Math.sin(e*Math.PI/2)},OE=function(e){return-Math.cos(e*Math.PI)/2+.5},ns=20;function vn(e,t,n,i){this._eventBus=n,this._scopeFilter=i,this._canvas=t,this._randomize=e&&e.randomize!==!1,this._animations=new Set,this._speed=1,n.on(_i,()=>{this.clearAnimations()}),n.on($v,()=>{this.pause()}),n.on(Tv,()=>{this.play()}),n.on(Co,r=>{this.each(o=>{this._scopeFilter.isShown(o.scope)?o.show():o.hide()})}),n.on(As,r=>{const{scope:o}=r;this.clearAnimations(o)})}vn.prototype.animate=function(e,t,n){this.createAnimation(e,t,n)};vn.prototype.pause=function(){this.each(e=>e.pause())};vn.prototype.play=function(){this.each(e=>e.play())};vn.prototype.each=function(e){this._animations.forEach(e)};vn.prototype.createAnimation=function(e,t,n=kE){const i=this._getGroup(t);if(!i)return;const r=this._createTokenGfx(i,t),o=new zn(r,e.waypoints,this._randomize,()=>{this._animations.delete(o),n()});return o.setSpeed(this.getAnimationSpeed()),this._scopeFilter.isShown(t)||o.hide(),o.scope=t,o.element=e,this._animations.add(o),this._eventBus.fire(eE,{animation:o}),o.play(),o};vn.prototype.setAnimationSpeed=function(e){this._speed=e,this.each(t=>t.setSpeed(e)),this._eventBus.fire(Rv,{speed:e})};vn.prototype.getAnimationSpeed=function(){return this._speed};vn.prototype.clearAnimations=function(e){this.each(t=>{(!e||t.scope===e)&&t.remove()})};vn.prototype._createTokenGfx=function(e,t){const n=Dp(this._getTokenSVG(t).trim());return Ov(n,e)};vn.prototype._getTokenSVG=function(e){const t=e.colors||{primary:RE,auxiliary:ME};return`
    <g class="bts-token">
      <circle
        class="bts-circle"
        r="${ns/2}"
        cx="${ns/2}"
        cy="${ns/2}"
        fill="${t.primary}"
      />
      <text
        class="bts-text"
        transform="translate(10, 14)"
        text-anchor="middle"
        fill="${t.auxiliary}"
      >1</text>
    </g>
  `};vn.prototype._getGroup=function(e){var t=this._canvas,n,i;"findRoot"in t?(i=t.findRoot(e.element),n=t._findPlaneForRoot(i).layer):n=ji(".viewport",t._svg);var r=ji(".bts-animation-tokens",n);return r||(r=Dp('<g class="bts-animation-tokens" />'),Ov(r,n)),r};vn.$inject=["config.animation","canvas","eventBus","scopeFilter"];function zn(e,t,n,i){this.gfx=e,this.waypoints=t,this.done=i,this.randomize=n,this._paused=!0,this._t=0,this._parts=[],this.create()}zn.prototype.pause=function(){this._paused=!0};zn.prototype.play=function(){this._paused&&(this._paused=!1,this.tick(0)),this.schedule()};zn.prototype.schedule=function(){if(this._paused||this._scheduled)return;const e=Date.now();this._scheduled=!0,requestAnimationFrame(()=>{this._scheduled=!1,!this._paused&&(this.tick((Date.now()-e)*this._speed),this.schedule())})};zn.prototype.tick=function(e){const t=this._t=this._t+e,n=this._parts.find(u=>u.startTime<=t&&u.endTime>t);if(!n)return this.remove();const i=t-n.startTime,r=n.length*n.easing(i/n.duration),o=n.startLength+r,l=this._path.getPointAtLength(o);this.move(l.x,l.y)};zn.prototype.move=function(e,t){Yl(this.gfx,"transform",`translate(${e}, ${t})`)};zn.prototype.create=function(){const e=this.waypoints,t=e.reduce((o,l,u)=>{const s=e[u-1];if(s){const p=o[o.length-1],a=p&&p.endLength||0,c=FE(s,l);o.push({startLength:a,endLength:a+c,length:c,easing:IE(u,e)})}return o},[]),n=t.reduce(function(o,l){return o+l.length},0),i=e.reduce((o,l,u)=>{const s=l.x-ns/2,p=l.y-ns/2;return o.push([u>0?"L":"M",s,p]),o},[]).flat().join(" "),r=NE(n,this._randomize);this._parts=t.reduce((o,l,u)=>{const s=r/n*l.length,p=u>0?o[u-1].endTime:0,a=p+s;return[...o,{...l,startTime:p,endTime:a,duration:s}]},[]),this._path=Dp(`<path d="${i}" />`),this._t=0};zn.prototype.show=function(){Yl(this.gfx,"display","")};zn.prototype.hide=function(){Yl(this.gfx,"display","none")};zn.prototype.remove=function(){this.pause(),AE(this.gfx),this.done()};zn.prototype.setSpeed=function(e){this._speed=e};function NE(e,t=!1){return Math.log(e)*(t?BE(250,300):250)}function BE(e,t){return e+Math.floor(Math.random()*(t-e))}function FE(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}const WE={__depends__:[Av,q_,Ao],animation:["type",vn]};var Pu={exports:{}};(function(e,t){(function(n,i){{var r=i();e&&e.exports&&(t=e.exports=r),t.randomColor=r}})(h_,function(){var n=null,i={};y();var r=[],o=function(E){if(E=E||{},E.seed!==void 0&&E.seed!==null&&E.seed===parseInt(E.seed,10))n=E.seed;else if(typeof E.seed=="string")n=_(E.seed);else{if(E.seed!==void 0&&E.seed!==null)throw new TypeError("The seed value must be an integer or string");n=null}var x,T,k;if(E.count!==null&&E.count!==void 0){for(var $=E.count,R=[],A=0;A<E.count;A++)r.push(!1);for(E.count=null;$>R.length;){var C=o(E);n!==null&&(E.seed=n),R.push(C)}return E.count=$,R}return x=l(E),T=u(x,E),k=s(x,T,E),p([x,T,k],E)};function l(E){if(r.length>0){var x=v(E.hue),T=d(x),k=(x[1]-x[0])/r.length,$=parseInt((T-x[0])/k);r[$]===!0?$=($+2)%r.length:r[$]=!0;var R=(x[0]+$*k)%359,A=(x[0]+($+1)*k)%359;return x=[R,A],T=d(x),T<0&&(T=360+T),T}else{var x=c(E.hue);return T=d(x),T<0&&(T=360+T),T}}function u(E,x){if(x.hue==="monochrome")return 0;if(x.luminosity==="random")return d([0,100]);var T=h(E),k=T[0],$=T[1];switch(x.luminosity){case"bright":k=55;break;case"dark":k=$-10;break;case"light":$=55;break}return d([k,$])}function s(E,x,T){var k=a(E,x),$=100;switch(T.luminosity){case"dark":$=k+20;break;case"light":k=($+k)/2;break;case"random":k=0,$=100;break}return d([k,$])}function p(E,x){switch(x.format){case"hsvArray":return E;case"hslArray":return b(E);case"hsl":var T=b(E);return"hsl("+T[0]+", "+T[1]+"%, "+T[2]+"%)";case"hsla":var k=b(E),A=x.alpha||Math.random();return"hsla("+k[0]+", "+k[1]+"%, "+k[2]+"%, "+A+")";case"rgbArray":return w(E);case"rgb":var $=w(E);return"rgb("+$.join(", ")+")";case"rgba":var R=w(E),A=x.alpha||Math.random();return"rgba("+R.join(", ")+", "+A+")";default:return m(E)}}function a(E,x){for(var T=f(E).lowerBounds,k=0;k<T.length-1;k++){var $=T[k][0],R=T[k][1],A=T[k+1][0],C=T[k+1][1];if(x>=$&&x<=A){var M=(C-R)/(A-$),I=R-M*$;return M*x+I}}return 0}function c(E){if(typeof parseInt(E)=="number"){var x=parseInt(E);if(x<360&&x>0)return[x,x]}if(typeof E=="string"){if(i[E]){var T=i[E];if(T.hueRange)return T.hueRange}else if(E.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var k=S(E)[0];return[k,k]}}return[0,360]}function h(E){return f(E).saturationRange}function f(E){E>=334&&E<=360&&(E-=360);for(var x in i){var T=i[x];if(T.hueRange&&E>=T.hueRange[0]&&E<=T.hueRange[1])return i[x]}return"Color not found"}function d(E){if(n===null){var x=.618033988749895,T=Math.random();return T+=x,T%=1,Math.floor(E[0]+T*(E[1]+1-E[0]))}else{var k=E[1]||1,$=E[0]||0;n=(n*9301+49297)%233280;var R=n/233280;return Math.floor($+R*(k-$))}}function m(E){var x=w(E);function T($){var R=$.toString(16);return R.length==1?"0"+R:R}var k="#"+T(x[0])+T(x[1])+T(x[2]);return k}function g(E,x,T){var k=T[0][0],$=T[T.length-1][0],R=T[T.length-1][1],A=T[0][1];i[E]={hueRange:x,lowerBounds:T,saturationRange:[k,$],brightnessRange:[R,A]}}function y(){g("monochrome",null,[[0,0],[100,0]]),g("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),g("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),g("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),g("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),g("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),g("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),g("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function w(E){var x=E[0];x===0&&(x=1),x===360&&(x=359),x=x/360;var T=E[1]/100,k=E[2]/100,$=Math.floor(x*6),R=x*6-$,A=k*(1-T),C=k*(1-R*T),M=k*(1-(1-R)*T),I=256,D=256,B=256;switch($){case 0:I=k,D=M,B=A;break;case 1:I=C,D=k,B=A;break;case 2:I=A,D=k,B=M;break;case 3:I=A,D=C,B=k;break;case 4:I=M,D=A,B=k;break;case 5:I=k,D=A,B=C;break}var F=[Math.floor(I*255),Math.floor(D*255),Math.floor(B*255)];return F}function S(E){E=E.replace(/^#/,""),E=E.length===3?E.replace(/(.)/g,"$1$1"):E;var x=parseInt(E.substr(0,2),16)/255,T=parseInt(E.substr(2,2),16)/255,k=parseInt(E.substr(4,2),16)/255,$=Math.max(x,T,k),R=$-Math.min(x,T,k),A=$?R/$:0;switch($){case x:return[60*((T-k)/R%6)||0,A,$];case T:return[60*((k-x)/R+2)||0,A,$];case k:return[60*((x-T)/R+4)||0,A,$]}}function b(E){var x=E[0],T=E[1]/100,k=E[2]/100,$=(2-T)*k;return[x,Math.round(T*k/($<1?$:2-$)*1e4)/100,$/2*100]}function _(E){for(var x=0,T=0;T!==E.length&&!(x>=Number.MAX_SAFE_INTEGER);T++)x+=E.charCodeAt(T);return x}function v(E){if(isNaN(E)){if(typeof E=="string"){if(i[E]){var T=i[E];if(T.hueRange)return T.hueRange}else if(E.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var k=S(E)[0];return f(k).hueRange}}}else{var x=parseInt(E);if(x<360&&x>0)return f(E).hueRange}return[0,360]}return o})})(Pu,Pu.exports);var HE=Pu.exports;const jE=wp(HE),GE=1500;function Wv(e){const t=jE({count:60}).filter(o=>n(o.substring(1))<200);function n(o){var l=parseInt(o.substr(0,2),16),u=parseInt(o.substr(2,2),16),s=parseInt(o.substr(4,2),16),p=(l*299+u*587+s*114)/1e3;return p}let i=0;function r(o){const{element:l}=o;if(l&&l.type==="bpmn:MessageFlow")return{primary:"#999",auxiliary:"#FFF"};if(o.parent)return o.parent.colors;const u=t[i++%t.length];return{primary:u,auxiliary:n(u)>=128?"#111":"#fff"}}e.on(Hr,GE,o=>{const{scope:l}=o;l.colors=r(l)})}Wv.$inject=["eventBus"];const VE={__init__:["coloredScopes"],coloredScopes:["type",Wv]};var zE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M12.83 352h262.34A12.82 12.82 0 0 0 288 339.17v-38.34A12.82 12.82 0 0 0 275.17 288H12.83A12.82 12.82 0 0 0 0 300.83v38.34A12.82 12.82 0 0 0 12.83 352zm0-256h262.34A12.82 12.82 0 0 0 288 83.17V44.83A12.82 12.82 0 0 0 275.17 32H12.83A12.82 12.82 0 0 0 0 44.83v38.34A12.82 12.82 0 0 0 12.83 96zM432 160H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0 256H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"/></svg>',UE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"/></svg>',YE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></svg>',XE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 36.4 24.3 67.1 57.5 76.8-.6 16.1-4.2 28.5-11 36.9-15.4 19.2-49.3 22.4-85.2 25.7-28.2 2.6-57.4 5.4-81.3 16.9v-144c32.5-10.2 56-40.5 56-76.3 0-44.2-35.8-80-80-80S0 35.8 0 80c0 35.8 23.5 66.1 56 76.3v199.3C23.5 365.9 0 396.2 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-34-21.2-63.1-51.2-74.6 3.1-5.2 7.8-9.8 14.9-13.4 16.2-8.2 40.4-10.4 66.1-12.8 42.2-3.9 90-8.4 118.2-43.4 14-17.4 21.1-39.8 21.6-67.9 31.6-10.8 54.4-40.7 54.4-75.9zM80 64c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16zm0 384c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zm224-320c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16 7.2-16 16-16z"/></svg>',ZE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></svg>',KE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"/></svg>',JE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"/></svg>',QE=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 580.5 448">
  <path fill="currentColor" d="M112 0C85 0 64 22 64 48v196l192-89V48c0-26-22-48-48-48zm256 0c-27 0-48 22-48 48v77l190-89c-5-21-24-36-46-36Zm144 105-192 89v70l192-89zM256 224 64 314v70l192-90zm256 21-192 89v66c0 27 21 48 48 48h96c26 0 48-21 48-48zM256 364 89 442c7 4 14 6 23 6h96c26 0 48-21 48-48z"/>
  <rect fill="currentColor" width="63.3" height="618.2" x="311.5" y="-469.4" transform="rotate(65)" rx="10"/>
</svg>
`,qE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!-- Adapted from Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"/></svg>',e1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"/></svg>',t1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"/></svg>',n1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"/></svg>',i1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg>',r1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"/></svg>',o1='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!-- Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path fill="currentColor" d="M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"/></svg>';function nn(e){return function(n=""){return`<span class="bts-icon ${n}">${e}</span>`}}const Zd=nn(zE),s1=nn(UE),Du=nn(YE),a1=nn(QE),Hv=nn(XE),jv=nn(ZE),Gv=nn(KE),Ou=nn(JE),Vv=nn(qE),l1=nn(e1),c1=nn(t1),u1=nn(n1),p1=nn(i1),zv=nn(r1),h1=nn(o1);function Op(e){this._exclusiveGatewaySettings=e}Op.prototype.createContextPads=function(e){if(e.outgoing.filter(function(r){return Be(r,"bpmn:SequenceFlow")}).length<2)return;const n=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${Hv()}
    </div>
  `;return[{action:()=>{this._exclusiveGatewaySettings.setSequenceFlow(e)},element:e,html:n}]};Op.$inject=["exclusiveGatewaySettings"];function Np(e){this._inclusiveGatewaySettings=e}Np.prototype.createContextPads=function(e){const t=e.outgoing.filter(qi);if(t.length<2)return;const n=t.filter(r=>{const o=re(r);return re(e).default!==o}),i=`
    <div class="bts-context-pad" title="Set Sequence Flow">
      ${Hv()}
    </div>
  `;return n.map(r=>({action:()=>{this._inclusiveGatewaySettings.toggleSequenceFlow(e,r)},element:r,html:i}))};Np.$inject=["inclusiveGatewaySettings"];function jr(e){this._simulator=e}jr.prototype.createContextPads=function(e){return Be(e,"bpmn:ReceiveTask")||Be(e,"bpmn:SubProcess")&&re(e).triggeredByEvent?[]:[this.createPauseContextPad(e)]};jr.prototype.createPauseContextPad=function(e){const t=()=>this._findSubscriptions({element:e}),n=this._isPaused(e),i=`
    <div class="bts-context-pad ${n?"":"show-hover"}" title="${n?"Remove":"Add"} pause point">
      ${(n?a1:Ou)("show-hover")}
      ${Ou("hide-hover")}
    </div>
  `;return{action:()=>{this._togglePaused(e)},element:e,hideContexts:t,html:i}};jr.prototype._isPaused=function(e){const{wait:t}=this._simulator.getConfig(e);return t};jr.prototype._togglePaused=function(e){const t=!this._isPaused(e);this._simulator.waitAtElement(e,t)};jr.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};jr.$inject=["simulator"];function Mr(e){this._simulator=e}Mr.$inject=["simulator"];Mr.prototype.createContextPads=function(e){return[this.createTriggerContextPad(e)]};Mr.prototype.createTriggerContextPad=function(e){const t=()=>this._findSubscriptions({element:e}).slice().sort((l,u)=>l.event.type==="none"?1:-1),n=`
    <div class="bts-context-pad" title="Trigger Event">
      ${Vv()}
    </div>
  `;return{action:r=>{const{event:o,scope:l}=r[0];return this._simulator.trigger({event:o,scope:l})},element:e,html:n,contexts:t}};Mr.prototype._findSubscriptions=function(e){return this._simulator.findSubscriptions(e)};const qc=500,d1=-15,f1=-15;function $n(e,t,n,i,r,o){this._elementRegistry=t,this._overlays=n,this._injector=i,this._canvas=r,this._scopeFilter=o,this._overlayCache=new Map,this._handlerIdx=0,this._handlers=[],this.registerHandler("bpmn:ExclusiveGateway",Op),this.registerHandler("bpmn:InclusiveGateway",Np),this.registerHandler("bpmn:Activity",jr),this.registerHandler("bpmn:Event",Mr),this.registerHandler("bpmn:Gateway",Mr),this.registerHandler("bpmn:Activity",Mr),e.on(Dt,qc,l=>{l.active?this.openContextPads():this.closeContextPads()}),e.on(_i,qc,()=>{this.closeContextPads(),this.openContextPads()}),e.on(Co,l=>{const u=po(".djs-overlay-ts-context-menu [data-scope-ids]",n._overlayRoot);for(const p of u){const c=p.dataset.scopeIds.split(",").some(h=>o.isShown(h));Ze(p).toggle("hidden",!c)}const s=po(".djs-overlay-ts-context-menu [data-hide-scope-ids]",n._overlayRoot);for(const p of s){const c=p.dataset.hideScopeIds.split(",").some(h=>o.isShown(h));Ze(p).toggle("hidden",c)}}),e.on(Mv,qc,l=>{const{element:u}=l;this.updateElementContextPads(u)})}$n.prototype.registerHandler=function(e,t){const n=this._injector.instantiate(t);n.hash=String(this._handlerIdx++),this._handlers.push({handler:n,type:e})};$n.prototype.getHandlers=function(e){return this._handlers.filter(({type:t})=>Be(e,t)).map(({handler:t})=>t)};$n.prototype.openContextPads=function(e){e||(e=this._canvas.getRootElement()),this._elementRegistry.forEach(t=>{m1(e,t)&&this.updateElementContextPads(t)})};$n.prototype._getOverlays=function(e){return this._overlayCache.get(e)||[]};$n.prototype._addOverlay=function(e,t){const{handlerHash:n}=t;if(!n)throw new Error("<handlerHash> required");const i=this._overlays.add(e,"bts-context-menu",{...t,position:{top:d1,left:f1},show:{minZoom:.5}}),r=this._overlays.get(i),o=this._overlayCache;o.has(n)||o.set(n,[]),o.get(n).push(r)};$n.prototype._removeOverlay=function(e){const{id:t,handlerHash:n}=e;this._overlays.remove(t);const i=this._overlayCache.get(n)||[],r=i.indexOf(e);r!==-1&&i.splice(r,1)};$n.prototype.updateElementContextPads=function(e){for(const t of this.getHandlers(e))this._updateElementContextPads(e,t)};$n.prototype._updateElementContextPads=function(e,t){const n=(t.createContextPads(e)||[]).filter(l=>l),i=`${e.id}------${t.hash}`,r=this._getOverlays(i),o=[];for(const l of n){const{element:u,contexts:s,hideContexts:p,action:a,html:c}=l,h=`${l.element.id}-------${c}`;let f=r.find(m=>m.hash===h);const d=f&&f.html||Kt(c);if(s){const m=s();d.dataset.scopeIds=m.map(y=>y.scope.id).join(",");const g=m.filter(y=>this._scopeFilter.isShown(y.scope));Ze(d).toggle("hidden",g.length===0)}if(p){const m=p();d.dataset.hideScopeIds=m.map(y=>y.scope.id).join(",");const g=m.filter(y=>this._scopeFilter.isShown(y.scope));Ze(d).toggle("hidden",g.length>0)}if(f){o.push(f);continue}a&&fn.bind(d,"click",m=>{m.preventDefault();const g=s?s().filter(y=>this._scopeFilter.isShown(y.scope)):null;a(g)}),this._addOverlay(u,{hash:h,handlerHash:i,html:d})}for(const l of r)o.includes(l)||this._removeOverlay(l)};$n.prototype.closeContextPads=function(){for(const e of this._overlayCache.values())for(const t of e)this._closeOverlay(t);this._overlayCache.clear()};$n.prototype._closeOverlay=function(e){this._overlays.remove(e.id)};$n.$inject=["eventBus","elementRegistry","overlays","injector","canvas","scopeFilter"];function m1(e,t){do{if(e===t)return!0;t=t.parent}while(t);return!1}const g1={__depends__:[Ao],__init__:["contextPads"],contextPads:["type",$n]};function Uv(e,t,n){e.on(As,i=>{const{scope:r}=i,{destroyInitiator:o,element:l}=r;!r.completed||!o||!["bpmn:Process","bpmn:Participant"].includes(l.type)||n.addElementNotification(o.element,{type:"success",icon:Du(),text:"Finished",scope:r})})}Uv.$inject=["eventBus","simulator","elementNotifications"];const v1=-15,y1=15;function $s(e,t){this._overlays=e,t.on([_i,Hr,Dt],()=>{this.clear()})}$s.prototype.addElementNotification=function(e,t){const n={top:v1,right:y1},{type:i,icon:r,text:o,scope:l={}}=t,u=l.colors,s=u?`style="color: ${u.auxiliary}; background: ${u.primary}"`:"",p=Kt(`
    <div class="bts-element-notification ${i||""}" ${s}>
      ${r||""}
      <span class="bts-text">${o}</span>
    </div>
  `);this._overlays.add(e,"bts-element-notification",{position:n,html:p,show:{minZoom:.5}})};$s.prototype.clear=function(){this._overlays.remove({type:"bts-element-notification"})};$s.prototype.removeElementNotification=function(e){this._overlays.remove({element:e})};$s.$inject=["overlays","eventBus"];const Yv={elementNotifications:["type",$s]},b1=2e3,w1=Gv();function Rs(e,t,n){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._init(),e.on([Dt,_i],i=>{this.clear()})}Rs.prototype._init=function(){this.container=Kt('<div class="bts-notifications"></div>'),this._canvas.getContainer().appendChild(this.container)};Rs.prototype.showNotification=function(e){const{text:t,type:n="info",icon:i=w1,scope:r,ttl:o=b1}=e;if(r&&!this._scopeFilter.isShown(r))return;const l=i.startsWith("<")?i:`<i class="${i}"></i>`,u=r&&r.colors,s=u?`style="color: ${u.auxiliary}; background: ${u.primary}"`:"",p=Kt(`
    <div class="bts-notification ${n}">
      <span class="bts-icon">${l}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${r?`<span class="bts-scope" ${s}>${r.id}</span>`:""}
    </div>
  `);for(this.container.appendChild(p);this.container.children.length>5;)this.container.children[0].remove();setTimeout(function(){p.remove()},o)};Rs.prototype.clear=function(){for(;this.container.children.length;)this.container.children[0].remove()};Rs.$inject=["eventBus","canvas","scopeFilter"];const Ms={__depends__:[Ao],notifications:["type",Rs]},_1={__depends__:[Yv,Ms],__init__:["simulationState"],simulationState:["type",Uv]},E1="--token-simulation-silver-base-97",x1="--token-simulation-green-base-44",Xv="show-scopes",S1=3e3;function Rn(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._scopeFilter=n,this._elementColors=i,this._simulationStyles=r,this._highlight=null,this._init(),e.on(Dt,o=>{o.active?Ze(this._container).remove("hidden"):(Ze(this._container).add("hidden"),vE(this._container),this.unhighlightScope())}),e.on(Co,o=>{const l=this.getScopeElements();for(const u of l){const s=u.dataset.scopeId;Ze(u).toggle("inactive",!this._scopeFilter.isShown(s))}}),e.on(Hr,o=>{this.addScope(o.scope)}),e.on(As,o=>{this.removeScope(o.scope)}),e.on(tE,o=>{this.updateScope(o.scope)}),e.on(_i,()=>{this.removeAllInstances()})}Rn.prototype._init=function(){this._container=Kt('<div class="bts-scopes hidden"></div>'),this._canvas.getContainer().appendChild(this._container)};Rn.prototype.addScope=function(e){const t=["bpmn:Process","bpmn:SubProcess","bpmn:Participant"],{element:n}=e;if(!t.includes(n.type))return;const i=e.colors,r=i?`style="color: ${i.auxiliary}; background: ${i.primary}"`:"",o=Kt(`
    <div data-scope-id="${e.id}" class="bts-scope"
         title="View Process Instance ${e.id}" ${r}>
      ${e.getTokens()}
    </div>
  `);fn.bind(o,"click",()=>{this._scopeFilter.toggle(e)}),fn.bind(o,"mouseenter",()=>{this.highlightScope(n)}),fn.bind(o,"mouseleave",()=>{this.unhighlightScope()}),this._scopeFilter.isShown(e)||Ze(o).add("inactive"),this._container.appendChild(o)};Rn.prototype.getScopeElements=function(){return po("[data-scope-id]",this._container)};Rn.prototype.getScopeElement=function(e){return ji(`[data-scope-id="${e.id}"]`,this._container)};Rn.prototype.updateScope=function(e){const t=this.getScopeElement(e);t&&(t.textContent=e.getTokens())};Rn.prototype.removeScope=function(e){const t=this.getScopeElement(e);t&&t.remove()};Rn.prototype.removeAllInstances=function(){this._container.innerHTML=""};Rn.prototype.highlightScope=function(e){this.unhighlightScope(),this._highlight=e,this._elementColors.add(e,Xv,this._getHighlightColors(),S1),e.parent||Ze(this._canvas.getContainer()).add("highlight")};Rn.prototype.unhighlightScope=function(){if(!this._highlight)return;const e=this._highlight;this._elementColors.remove(e,Xv),e.parent||Ze(this._canvas.getContainer()).remove("highlight"),this._highlight=null};Rn.prototype._getHighlightColors=function(){return{fill:this._simulationStyles.get(E1),stroke:this._simulationStyles.get(x1)}};Rn.$inject=["eventBus","canvas","scopeFilter","elementColors","simulationStyles"];function Xl(){this._cache={}}Xl.$inject=[];Xl.prototype.get=function(e){const t=this._cache[e];return t||(this._computedStyle||(this._computedStyle=this._getComputedStyle()),this._cache[e]=this._computedStyle.getPropertyValue(e).trim())};Xl.prototype._getComputedStyle=function(){const e=typeof getComputedStyle=="function"?getComputedStyle:C1,t=typeof document<"u"?document.documentElement:{};return e(t)};function C1(){return{getPropertyValue(){return""}}}const Zl={simulationStyles:["type",Xl]},A1={__depends__:[Ao,Zl],__init__:["showScopes"],showScopes:["type",Rn]};function Lr(e){return CSS.escape(e)}var T1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function fl(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return T1[t]})}const $1=Gv();function eu(e){const t=e&&e.businessObject.name;return t&&fl(t)}function tu(e,t){const n=Nu(e);return n==="none"?"bpmn-icon-intermediate-event-none":`bpmn-icon-intermediate-event-${t}-${n}`}function Nu(e){const t=re(e);if(t.get("eventDefinitions").length===0)return"none";const n=t.eventDefinitions[0];return Be(n,"bpmn:MessageEventDefinition")?"message":Be(n,"bpmn:TimerEventDefinition")?"timer":Be(n,"bpmn:SignalEventDefinition")?"signal":Be(n,"bpmn:ErrorEventDefinition")?"error":Be(n,"bpmn:EscalationEventDefinition")?"escalation":Be(n,"bpmn:CompensateEventDefinition")?"compensation":Be(n,"bpmn:ConditionalEventDefinition")?"condition":Be(n,"bpmn:LinkEventDefinition")?"link":Be(n,"bpmn:CancelEventDefinition")?"cancel":Be(n,"bpmn:TerminateEventDefinition")?"terminate":"none"}function Gr(e,t,n,i,r,o){this._notifications=t,this._tokenSimulationPalette=n,this._canvas=i,this._scopeFilter=r,this._init(),e.on(Co,l=>{const u=po(".bts-entry[data-scope-id]",this._container);for(const s of u){const p=s.dataset.scopeId;Ze(s).toggle("inactive",!this._scopeFilter.isShown(p))}}),e.on(As,l=>{const{scope:u}=l,{element:s}=u,p=u.completed;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(s.type))return;const h=`${Be(s,"bpmn:SubProcess")?eu(s)||"SubProcess":"Process"} ${p?"finished":"canceled"}`;this.log({text:h,icon:p?Du():u1(),scope:u})}),e.on(Hr,l=>{const{scope:u}=l,{element:s}=u;if(!["bpmn:Process","bpmn:Participant","bpmn:SubProcess"].includes(s.type))return;const c=`${Be(s,"bpmn:SubProcess")?eu(s)||"SubProcess":"Process"} started`;this.log({text:c,icon:Du(),scope:u})}),e.on(kv,l=>{const{action:u,scope:s,element:p}=l;if(u!=="exit")return;const a=s.parent,c=eu(p);if(Be(p,"bpmn:ServiceTask"))return this.log({text:c||"Service Task",icon:"bpmn-icon-service",scope:a});if(Be(p,"bpmn:UserTask"))return this.log({text:c||"User Task",icon:"bpmn-icon-user",scope:a});if(Be(p,"bpmn:CallActivity"))return this.log({text:c||"Call Activity",icon:"bpmn-icon-call-activity",scope:a});if(Be(p,"bpmn:ScriptTask"))return this.log({text:c||"Script Task",icon:"bpmn-icon-script",scope:a});if(Be(p,"bpmn:BusinessRuleTask"))return this.log({text:c||"Business Rule Task",icon:"bpmn-icon-business-rule",scope:a});if(Be(p,"bpmn:ManualTask"))return this.log({text:c||"Manual Task",icon:"bpmn-icon-manual-task",scope:a});if(Be(p,"bpmn:ReceiveTask"))return this.log({text:c||"Receive Task",icon:"bpmn-icon-receive",scope:a});if(Be(p,"bpmn:SendTask"))return this.log({text:c||"Send Task",icon:"bpmn-icon-send",scope:a});if(Be(p,"bpmn:Task"))return this.log({text:c||"Task",icon:"bpmn-icon-task",scope:a});if(Be(p,"bpmn:ExclusiveGateway"))return this.log({text:c||"Exclusive Gateway",icon:"bpmn-icon-gateway-xor",scope:a});if(Be(p,"bpmn:ParallelGateway"))return this.log({text:c||"Parallel Gateway",icon:"bpmn-icon-gateway-parallel",scope:a});if(Be(p,"bpmn:InclusiveGateway"))return this.log({text:c||"Inclusive Gateway",icon:"bpmn-icon-gateway-or",scope:a});if(Be(p,"bpmn:StartEvent"))return this.log({text:c||"Start Event",icon:`bpmn-icon-start-event-${Nu(p)}`,scope:a});if(Be(p,"bpmn:IntermediateCatchEvent"))return this.log({text:c||"Intermediate Event",icon:tu(p,"catch"),scope:a});if(Be(p,"bpmn:IntermediateThrowEvent"))return this.log({text:c||"Intermediate Event",icon:tu(p,"throw"),scope:a});if(Be(p,"bpmn:BoundaryEvent"))return this.log({text:c||"Boundary Event",icon:tu(p,"catch"),scope:a});if(Be(p,"bpmn:EndEvent"))return this.log({text:c||"End Event",icon:`bpmn-icon-end-event-${Nu(p)}`,scope:a})}),e.on([Dt,_i],l=>{this.clear(),this.toggle(!1)})}Gr.prototype._init=function(){this._container=Kt(`
    <div class="bts-log hidden djs-scrollable">
      <div class="bts-header">
        ${Zd("bts-log-icon")}
        Simulation Log
        <button class="bts-close" aria-label="Close">
          ${p1()}
        </button>
      </div>
      <div class="bts-content">
        <p class="bts-entry placeholder">No Entries</p>
      </div>
    </div>
  `),this._placeholder=ji(".bts-placeholder",this._container),this._content=ji(".bts-content",this._container),fn.bind(this._content,"mousedown",e=>{e.stopPropagation()}),this._close=ji(".bts-close",this._container),fn.bind(this._close,"click",()=>{this.toggle(!1)}),this._icon=ji(".bts-log-icon",this._container),fn.bind(this._icon,"click",()=>{this.toggle()}),this._canvas.getContainer().appendChild(this._container),this.paletteEntry=Kt(`
    <div class="bts-entry" title="Toggle Simulation Log">
      ${Zd()}
    </div>
  `),fn.bind(this.paletteEntry,"click",()=>{this.toggle()}),this._tokenSimulationPalette.addEntry(this.paletteEntry,3)};Gr.prototype.isShown=function(){const e=this._container;return!Ze(e).has("hidden")};Gr.prototype.toggle=function(e=!this.isShown()){const t=this._container;e?Ze(t).remove("hidden"):Ze(t).add("hidden")};Gr.prototype.log=function(e){const{text:t,type:n="info",icon:i=$1,scope:r}=e,o=this._content;Ze(this._placeholder).add("hidden"),this.isShown()||this._notifications.showNotification(e);const l=i.startsWith("<")?i:`<i class="${i}"></i>`,u=r&&r.colors,s=u?`style="background: ${u.primary}; color: ${u.auxiliary}"`:"",p=Kt(`
    <p class="bts-entry ${n} ${r&&this._scopeFilter.isShown(r)?"":"inactive"}" ${r?`data-scope-id="${r.id}"`:""}>
      <span class="bts-icon">${l}</span>
      <span class="bts-text" title="${t}">${t}</span>
      ${r?`<span class="bts-scope" data-scope-id="${r.id}" ${s}>${r.id}</span>`:""}
    </p>
  `);Dv.bind(p,".bts-scope[data-scope-id]","click",c=>{this._scopeFilter.toggle(r)});const a=Math.abs(o.clientHeight+o.scrollTop-o.scrollHeight)<2;o.appendChild(p),a&&(o.scrollTop=o.scrollHeight)};Gr.prototype.clear=function(){for(;this._content.firstChild;)this._content.removeChild(this._content.firstChild);this._placeholder=Kt('<p class="bts-entry placeholder">No Entries</p>'),this._content.appendChild(this._placeholder)};Gr.$inject=["eventBus","notifications","tokenSimulationPalette","canvas","scopeFilter","simulator"];const R1={__depends__:[Ms,Ao],__init__:["log"],log:["type",Gr]},M1=["bpmn:ComplexGateway"];function k1(e){return e.labelTarget}function To(e,t,n,i,r){this._eventBus=e,this._elementRegistry=t,this._elementNotifications=r,this._notifications=i,this._canvasParent=n.getContainer().parentNode,e.on(Dt,o=>{o.active?this.enable():this.clear()})}To.prototype.getUnsupportedElements=function(){return this._unsupportedElements};To.prototype.enable=function(){const e=[];this._elementRegistry.forEach(t=>{k1(t)||Be(t,M1)&&(this.showWarning(t),e.push(t))}),e.length&&this._notifications.showNotification({text:"Found unsupported elements",icon:jv(),type:"warning",ttl:5e3}),this._unsupportedElements=e};To.prototype.clear=function(){Ze(this._canvasParent).remove("warning")};To.prototype.showWarning=function(e){this._elementNotifications.addElementNotification(e,{type:"warning",icon:jv(),text:"Not supported"})};To.$inject=["eventBus","elementRegistry","canvas","notifications","elementNotifications"];const I1={__depends__:[Yv,Ms],__init__:["elementSupport"],elementSupport:["type",To]},Zv=Vv(),L1=Ou(),Kd=1500;function tr(e,t,n,i){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this.canvasParent=i.getContainer().parentNode,this.isActive=!1,this.isPaused=!0,this._init(),e.on(Hr,Kd,r=>{this.activate(),this.unpause()}),e.on([_i,Dt],()=>{this.deactivate(),this.pause()}),e.on(kv,Kd,r=>{this.unpause()})}tr.prototype._init=function(){this.paletteEntry=Kt(`
    <div class="bts-entry disabled" title="Play/Pause Simulation">
      ${Zv}
    </div>
  `),fn.bind(this.paletteEntry,"click",this.toggle.bind(this)),this._tokenSimulationPalette.addEntry(this.paletteEntry,1)};tr.prototype.toggle=function(){this.isPaused?this.unpause():this.pause()};tr.prototype.pause=function(){this.isActive&&(Ze(this.paletteEntry).remove("active"),Ze(this.canvasParent).add("paused"),this.paletteEntry.innerHTML=Zv,this._eventBus.fire($v),this._notifications.showNotification({text:"Pause Simulation"}),this.isPaused=!0)};tr.prototype.unpause=function(){!this.isActive||!this.isPaused||(Ze(this.paletteEntry).add("active"),Ze(this.canvasParent).remove("paused"),this.paletteEntry.innerHTML=L1,this._eventBus.fire(Tv),this._notifications.showNotification({text:"Play Simulation"}),this.isPaused=!1)};tr.prototype.activate=function(){this.isActive=!0,Ze(this.paletteEntry).remove("disabled")};tr.prototype.deactivate=function(){this.isActive=!1,Ze(this.paletteEntry).remove("active"),Ze(this.paletteEntry).add("disabled")};tr.$inject=["eventBus","tokenSimulationPalette","notifications","canvas"];const P1={__depends__:[Ms],__init__:["pauseSimulation"],pauseSimulation:["type",tr]};function Kl(e,t,n){this._eventBus=e,this._tokenSimulationPalette=t,this._notifications=n,this._init(),e.on(Hr,()=>{Ze(this._paletteEntry).remove("disabled")}),e.on(Dt,i=>{(this._active=i.active)||this.resetSimulation()})}Kl.prototype._init=function(){this._paletteEntry=Kt(`
    <div class="bts-entry disabled" title="Reset Simulation">
      ${l1()}
    </div>
  `),fn.bind(this._paletteEntry,"click",()=>{this.resetSimulation(),this._notifications.showNotification({text:"Reset Simulation",type:"info"})}),this._tokenSimulationPalette.addEntry(this._paletteEntry,2)};Kl.prototype.resetSimulation=function(){Ze(this._paletteEntry).add("disabled"),this._eventBus.fire(_i)};Kl.$inject=["eventBus","tokenSimulationPalette","notifications"];const D1={__depends__:[Ms],__init__:["resetSimulation"],resetSimulation:["type",Kl]},O1=10,N1=-15,B1=500,F1="--token-simulation-green-base-44",W1="--token-simulation-white";function nr(e,t,n,i,r){this._overlays=t,this._scopeFilter=i,this._simulator=n,this._simulationStyles=r,this.overlayIds={},e.on(Mv,B1,o=>{const{element:l}=o;this.removeTokenCounts(l),this.addTokenCounts(l)}),e.on(Co,o=>{const l=po(".bts-token-count[data-scope-id]",t._overlayRoot);for(const u of l){const s=u.dataset.scopeId;Ze(u).toggle("inactive",!this._scopeFilter.isShown(s))}})}nr.prototype.addTokenCounts=function(e){if(Be(e,"bpmn:MessageFlow")||Be(e,"bpmn:SequenceFlow"))return;const t=this._simulator.findScopes(n=>!n.destroyed&&n.children.some(i=>!i.destroyed&&i.element===e&&!i.children.length));this.addTokenCount(e,t)};nr.prototype.addTokenCount=function(e,t){if(!t.length)return;const n=t.map(l=>this._getTokenHTML(e,l)).join(""),i=Kt(`
    <div class="bts-token-count-parent">
      ${n}
    </div>
  `),r={bottom:O1,left:N1},o=this._overlays.add(e,"bts-token-count",{position:r,html:i,show:{minZoom:.5}});this.overlayIds[e.id]=o};nr.prototype.removeTokenCounts=function(e){this.removeTokenCount(e)};nr.prototype.removeTokenCount=function(e){const t=this.overlayIds[e.id];t&&(this._overlays.remove(t),delete this.overlayIds[e.id])};nr.prototype._getTokenHTML=function(e,t){const n=t.colors||this._getDefaultColors();return`
    <div data-scope-id="${t.id}" class="bts-token-count waiting ${this._scopeFilter.isShown(t)?"":"inactive"}"
         style="color: ${n.auxiliary}; background: ${n.primary}">
      ${t.getTokensByElement(e)}
    </div>
  `};nr.prototype._getDefaultColors=function(){return{primary:this._simulationStyles.get(F1),auxiliary:this._simuationStyles.get(W1)}};nr.$inject=["eventBus","overlays","simulator","scopeFilter","simulationStyles"];const H1={__depends__:[Ao,Zl],__init__:["tokenCount"],tokenCount:["type",nr]},j1=[["Slow",.5],["Normal",1],["Fast",2]];function ks(e,t,n){this._canvas=e,this._animation=t,this._eventBus=n,this._init(t.getAnimationSpeed()),n.on(Dt,i=>{i.active?Ze(this._container).remove("hidden"):Ze(this._container).add("hidden")}),n.on(Rv,i=>{this.setActive(i.speed)})}ks.prototype.getToggleSpeed=function(e){return parseFloat(e.dataset.speed)};ks.prototype._init=function(e){this._container=Kt(`
    <div class="bts-set-animation-speed hidden">
      ${c1()}
      <div class="bts-animation-speed-buttons">
        ${j1.map(([t,n],i)=>`
            <button title="Set animation speed = ${t}" data-speed="${n}" class="bts-animation-speed-button ${n===e?"active":""}">
              ${Array.from({length:i+1}).map(()=>s1()).join("")}
            </button>
          `).join("")}
      </div>
    </div>
  `),Dv.bind(this._container,"[data-speed]","click",t=>{const n=t.delegateTarget,i=this.getToggleSpeed(n);this._animation.setAnimationSpeed(i)}),this._canvas.getContainer().appendChild(this._container)};ks.prototype.setActive=function(e){po("[data-speed]",this._container).forEach(t=>{const n=this.getToggleSpeed(t)===e;Ze(t)[n?"add":"remove"]("active")})};ks.$inject=["canvas","animation","eventBus"];const G1={__init__:["setAnimationSpeed"],setAnimationSpeed:["type",ks]},V1="--token-simulation-grey-darken-30",z1="--token-simulation-grey-lighten-56";function U1(e,t){var n=e.outgoing.filter(Bp),i=n.indexOf(t||e.sequenceFlow);return n[i+1]?n[i+1]:n[0]}function Bp(e){return Be(e,"bpmn:SequenceFlow")}const Y1="exclusive-gateway-settings",X1=2e3;function $o(e,t,n,i,r){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=r,e.on(Dt,o=>{o.active?this.setSequenceFlowsDefault():this.resetSequenceFlows()})}$o.prototype.setSequenceFlowsDefault=function(){const e=this._elementRegistry.filter(t=>Be(t,"bpmn:ExclusiveGateway"));for(const t of e)this.setSequenceFlow(t)};$o.prototype.resetSequenceFlows=function(){this._elementRegistry.filter(t=>Be(t,"bpmn:ExclusiveGateway")).forEach(t=>{t.outgoing.filter(Bp).length&&this.resetSequenceFlow(t)})};$o.prototype.resetSequenceFlow=function(e){this._simulator.setConfig(e,{activeOutgoing:void 0})};$o.prototype.setSequenceFlow=function(e){const t=e.outgoing.filter(Bp);if(t.length<2)return;const{activeOutgoing:n}=this._simulator.getConfig(e);let i;n?i=U1(e,n):i=t[0],this._simulator.setConfig(e,{activeOutgoing:i}),e.outgoing.forEach(r=>{const o=r===i?V1:z1,l=this._simulationStyles.get(o);this._elementColors.add(r,Y1,{stroke:l},X1)})};$o.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];const Jd=5e4;function Un(e,t,n){this._elementRegistry=e,this._eventBus=t,this._graphicsFactory=n,this._originalColors={},this._customColors={},t.on(Dt,Jd,i=>{i.active?this._saveOriginalColors():(this._applyOriginalColors(),this._originalColors={},this._customColors={})}),t.on("saveXML.start",Jd,()=>{this._applyOriginalColors(),t.once("saveXML.done",()=>this._applyCustomColors())})}Un.$inject=["elementRegistry","eventBus","graphicsFactory"];Un.prototype.add=function(e,t,n,i=1e3){let r=this._customColors[e.id];r||(r=this._customColors[e.id]={}),r[t]={...n,priority:i},this._applyHighestPriorityColor(e)};Un.prototype.remove=function(e,t){const n=this._customColors[e.id];n&&(delete n[t],Object.keys(n)||delete this._customColors[e.id]),this._applyHighestPriorityColor(e)};Un.prototype._get=function(e){const t=He(e);if(t){if(Kv(e))return{stroke:t.label&&t.label.get("color")};if(Me(t,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return{fill:t.get("background-color"),stroke:t.get("border-color")}}};Un.prototype._set=function(e,t={}){const{fill:n,stroke:i}=t,r=He(e);r&&(Kv(e)?r.label&&r.label.set("color",i):Me(r,["bpmndi:BPMNEdge","bpmndi:BPMNShape"])&&(r.set("background-color",n),r.set("border-color",i)),this._forceRedraw(e))};Un.prototype._saveOriginalColors=function(){this._originalColors={},this._elementRegistry.forEach(e=>{this._originalColors[e.id]=this._get(e)})};Un.prototype._applyOriginalColors=function(){this._elementRegistry.forEach(e=>{const t=this._originalColors[e.id];t&&this._set(e,t)})};Un.prototype._applyCustomColors=function(){this._elementRegistry.forEach(e=>{const t=this._customColors[e.id];t&&this._set(e,Jv(t))})};Un.prototype._applyHighestPriorityColor=function(e){const t=this._customColors[e.id];if(!t){this._set(e,this._originalColors[e.id]);return}this._set(e,Jv(t))};Un.prototype._forceRedraw=function(e){const t=this._elementRegistry.getGraphics(e),n=e.waypoints?"connection":"shape";this._graphicsFactory.update(n,e,t)};function Kv(e){return"labelTarget"in e}function Jv(e={}){const t=Object.values(e).reduce((n,i)=>{const{priority:r=1e3}=i;return!n||r>n.priority?i:n},void 0);if(t){const{priority:n,...i}=t;return i}}const Fp={elementColors:["type",Un]},Z1={__depends__:[Fp,Zl],exclusiveGatewaySettings:["type",$o]},K1="neutral-element-colors";function Wp(e,t,n){this._elementRegistry=t,this._elementColors=n,e.on(Dt,i=>{const{active:r}=i;r&&this._setNeutralColors()})}Wp.prototype._setNeutralColors=function(){this._elementRegistry.forEach(e=>{this._elementColors.add(e,K1,{stroke:"#212121",fill:"#fff"})})};Wp.$inject=["eventBus","elementRegistry","elementColors"];const J1={__depends__:[Fp],__init__:["neutralElementColors"],neutralElementColors:["type",Wp]},Q1="--token-simulation-grey-darken-30",q1="--token-simulation-grey-lighten-56",ex="inclusive-gateway-settings";function Ei(e,t,n,i,r){this._elementRegistry=t,this._elementColors=n,this._simulator=i,this._simulationStyles=r,e.on(Dt,o=>{o.active?this.setDefaults():this.reset()})}Ei.prototype.setDefaults=function(){this._elementRegistry.filter(t=>N(t,"bpmn:InclusiveGateway")).forEach(t=>{t.outgoing.filter(qi).length>1&&this._setGatewayDefaults(t)})};Ei.prototype.reset=function(){this._elementRegistry.filter(t=>N(t,"bpmn:InclusiveGateway")).forEach(t=>{t.outgoing.filter(qi).length>1&&this._resetGateway(t)})};Ei.prototype.toggleSequenceFlow=function(e,t){const n=this._getActiveOutgoing(e),i=Hp(e),r=tx(e);let o;n.includes(t)?o=Bu(n,t):o=Bu(n,i).concat(t),o.length||(i?o=[i]:o=[r.find(l=>l!==t)]),this._setActiveOutgoing(e,o)};Ei.prototype._getActiveOutgoing=function(e){const{activeOutgoing:t}=this._simulator.getConfig(e);return t};Ei.prototype._setActiveOutgoing=function(e,t){this._simulator.setConfig(e,{activeOutgoing:t}),e.outgoing.filter(qi).forEach(i=>{const r=!t||t.includes(i)?Q1:q1,o=this._simulationStyles.get(r);this._elementColors.add(i,ex,{stroke:o})})};Ei.prototype._setGatewayDefaults=function(e){const t=e.outgoing.filter(qi),n=Hp(e),i=Bu(t,n);this._setActiveOutgoing(e,i)};Ei.prototype._resetGateway=function(e){this._setActiveOutgoing(e,void 0)};Ei.$inject=["eventBus","elementRegistry","elementColors","simulator","simulationStyles"];function Hp(e){const t=re(e).default;if(t)return e.outgoing.find(n=>re(n)===t)}function tx(e){const t=Hp(e);return e.outgoing.filter(n=>re(n)!==t)}function Bu(e,t){return e.filter(n=>n!==t)}const nx={__depends__:[Fp,Zl],inclusiveGatewaySettings:["type",Ei]};function Jl(e,t){var n=this;this._canvas=t,this.entries=[],this._init(),e.on(Dt,function(i){var r=i.active;r?Ze(n.container).remove("hidden"):Ze(n.container).add("hidden")})}Jl.prototype._init=function(){this.container=Kt('<div class="bts-palette hidden"></div>'),this._canvas.getContainer().appendChild(this.container)};Jl.prototype.addEntry=function(e,t){var n=0;this.entries.forEach(function(i){t>=i.index&&n++}),this.container.insertBefore(e,this.container.childNodes[n]),this.entries.push({entry:e,index:t})};Jl.$inject=["eventBus","canvas"];const ix={__init__:["tokenSimulationPalette"],tokenSimulationPalette:["type",Jl]},rx={__depends__:[Av,WE,VE,g1,_1,A1,R1,I1,P1,D1,H1,G1,Z1,J1,nx,ix]},ox=10001;function Qv(e,t,n,i,r,o,l){let u=!1;e.on(Dt,ox,c=>{u=c.active,u&&(i.cancel(),n.cancel()),l._update()});function s(c,h,f){const d=c[h];c[h]=function(){return f.call(this,d,arguments)}}function p(c,h){s(c,h,function(f,d){if(!u)return f.apply(this,d)})}function a(c,h){s(c,h,function(f,d){if(u)throw new Error("model is read-only");return f.apply(this,d)})}p(n,"init"),p(i,"activate"),p(n,"init"),p(i,"activate"),a(o,"moveShape"),a(o,"updateAttachment"),a(o,"moveElements"),a(o,"moveConnection"),a(o,"layoutConnection"),a(o,"createConnection"),a(o,"createShape"),a(o,"createLabel"),a(o,"appendShape"),a(o,"removeElements"),a(o,"distributeElements"),a(o,"removeShape"),a(o,"removeConnection"),a(o,"replaceShape"),a(o,"pasteElements"),a(o,"alignElements"),a(o,"resizeShape"),a(o,"createSpace"),a(o,"updateWaypoints"),a(o,"reconnectStart"),a(o,"reconnectEnd"),s(r,"trigger",function(c,h){const f=h[0];if(!(u&&sx(["undo","redo","copy","paste","removeSelection","spaceTool","lassoTool","globalConnectTool","distributeElements","alignElements","directEditing"],f)))return c.apply(this,h)})}Qv.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette"];function sx(e,t){return e.indexOf(t)>-1}const ax={__init__:["disableModeling"],disableModeling:["type",Qv]};function Ql(e,t,n,i){this._eventBus=e,this._canvas=t,this._selection=n,this._contextPad=i,this._active=!1,e.on("import.parse.start",()=>{this._active&&(this.toggleMode(!1),e.once("import.done",()=>{this.toggleMode(!0)}))}),e.on("diagram.init",()=>{this._canvasParent=this._canvas.getContainer().parentNode,this._palette=ji(".djs-palette",this._canvas.getContainer()),this._init()})}Ql.prototype._init=function(){this._container=Kt(`
    <div class="bts-toggle-mode">
      Token Simulation <span class="bts-toggle">${zv()}</span>
    </div>
  `),fn.bind(this._container,"click",()=>this.toggleMode()),this._canvas.getContainer().appendChild(this._container)};Ql.prototype.toggleMode=function(e=!this._active){if(e!==this._active){if(e)this._container.innerHTML=`Token Simulation <span class="bts-toggle">${h1()}</span>`,Ze(this._canvasParent).add("simulation"),Ze(this._palette).add("hidden");else{this._container.innerHTML=`Token Simulation <span class="bts-toggle">${zv()}</span>`,Ze(this._canvasParent).remove("simulation"),Ze(this._palette).remove("hidden");const t=this._selection.get();t.length===1&&this._contextPad.open(t[0])}this._eventBus.fire(Dt,{active:e}),this._active=e}};Ql.$inject=["eventBus","canvas","selection","contextPad"];const lx={__init__:["toggleMode"],toggleMode:["type",Ql]};function qv(e,t,n,i,r,o){var l=!1;r.register({toggleTokenSimulation:function(){t.toggleMode()}}),r.register({togglePauseTokenSimulation:function(){l&&n.toggle()}}),r.register({resetTokenSimulation:function(){l&&i.resetSimulation()}});const u=o.get("log",!1);u&&r.register({toggleTokenSimulationLog:function(){u.toggle()}}),e.on(Dt,s=>{l=s.active})}qv.$inject=["eventBus","toggleMode","pauseSimulation","resetSimulation","editorActions","injector"];const cx={__init__:["tokenSimulationEditorActions"],tokenSimulationEditorActions:["type",qv]},ux=1e4;function ey(e,t){var n=t.get("editorActions",!1),i=t.get("keyboard",!1);if(!i||!n)return;var r=!1;function o(l){if(pa(["t","T"],l))return n.trigger("toggleTokenSimulation"),!0;if(r){if(pa(["l","L"],l))return n.trigger("toggleTokenSimulationLog"),!0;if(pa([" ","Spacebar"],l))return n.trigger("togglePauseTokenSimulation"),!0;if(pa(["r","R"],l))return n.trigger("resetTokenSimulation"),!0}}e.on("keyboard.init",function(){i.addListener(ux,function(l){var u=l.keyEvent;o(u)})}),e.on(Dt,function(l){var u=l.active;u?r=!0:r=!1})}ey.$inject=["eventBus","injector"];function pa(e,t){return e.indexOf(t.key)>-1}const px={__init__:["tokenSimulationKeyboardBindings"],tokenSimulationKeyboardBindings:["type",ey]},hx={__depends__:[rx,ax,lx,cx,px]},dx={"Append EndEvent":"追加结束事件","Append Gateway":"追加网关","Append Task":"追加任务","Append Intermediate/Boundary Event":"追加中间抛出事件/边界事件","Activate the global connect tool":"激活全局连接工具","Append {type}":"添加 {type}","Add Lane above":"在上面添加道","Divide into two Lanes":"分割成两个道","Divide into three Lanes":"分割成三个道","Add Lane below":"在下面添加道","Append compensation activity":"追加补偿活动","Append Exclusive Gateway":"追加互斥网关","Append Parallel Gateway":"追加并行网关","Change type":"修改类型","Connect using Association":"使用关联连接","Connect using Sequence/MessageFlow or Association":"使用顺序/消息流或者关联连接","Connect using DataInputAssociation":"使用数据输入关联连接",Remove:"移除","Activate the hand tool":"激活抓手工具","Activate the lasso tool":"激活套索工具","Activate the create/remove space tool":"激活创建/删除空间工具","Create expanded SubProcess":"创建扩展子过程","Create IntermediateThrowEvent/BoundaryEvent":"创建中间抛出事件/边界事件","Create Pool/Participant":"创建池/参与者","Parallel Multi Instance":"并行多重事件","Sequential Multi Instance":"时序多重事件",DataObjectReference:"数据对象参考",DataStoreReference:"数据存储参考",Loop:"循环","Ad-hoc":"即席","Create {type}":"创建 {type}",Task:"任务","Send Task":"发送任务","Receive Task":"接收任务","User Task":"用户任务","Manual Task":"手工任务","Business Rule Task":"业务规则任务","Service Task":"服务任务","Script Task":"脚本任务","Call Activity":"调用活动","Sub Process (collapsed)":"子流程（折叠的）","Sub Process (expanded)":"子流程（展开的）","Start Event":"开始事件",StartEvent:"开始事件","Intermediate Throw Event":"中间事件","End Event":"结束事件",EndEvent:"结束事件","Create StartEvent":"创建开始事件","Create EndEvent":"创建结束事件","Create Task":"创建任务","Create User Task":"创建用户任务","Create Script Task":"创建脚本任务","Create Service Task":"创建服务任务","Create Receive Task":"创建接收任务","Create Gateway":"创建网关","Create DataObjectReference":"创建数据对象","Create DataStoreReference":"创建数据存储","Create Group":"创建分组","Create Intermediate/Boundary Event":"创建中间/边界事件","Message start event":"消息开始事件","Start event":"开始事件","Intermediate throw event":"中间事件","End event":"结束事件","Timer start event":"定时开始事件","Message intermediate catch event":"消息中间捕获事件","Message intermediate throw event":"消息中间抛出事件","Escalation intermediate throw event":"升级中间抛出事件","Conditional intermediate catch event":"条件中间捕获事件","Compensation intermediate throw event":"补偿中间抛出事件","Link intermediate catch event":"链接中间捕获事件","Link intermediate throw event":"链接中间抛出事件","Signal intermediate catch event":"信号中间捕获事件","Signal intermediate throw event":"信号中间抛出事件","Timer intermediate catch event":"定时器中间捕获事件","Conditional start event":"条件开始事件","Signal start event":"信号开始事件","Error start event":"错误开始事件","Escalation start event":"升级开始事件","Compensation start event":"补偿开始事件","Message Start Event (non-interrupting)":"消息开始事件（非中断）","Timer Start Event (non-interrupting)":"定时开始事件（非中断）","Conditional Start Event (non-interrupting)":"条件开始事件（非中断）","Signal Start Event (non-interrupting)":"信号开始事件（非中断）","Escalation Start Event (non-interrupting)":"升级开始事件（非中断）","Message Intermediate Catch Event":"消息中间捕获事件","Message Intermediate Throw Event":"消息中间抛出事件","Timer Intermediate Catch Event":"定时中间捕获事件","Escalation Intermediate Throw Event":"升级中间抛出事件","Conditional Intermediate Catch Event":"条件中间捕获事件","Link Intermediate Catch Event":"链接中间捕获事件","Link Intermediate Throw Event":"链接中间抛出事件","Compensation Intermediate Throw Event":"补偿中间抛出事件","Signal Intermediate Catch Event":"信号中间捕获事件","Signal Intermediate Throw Event":"信号中间抛出事件","Message end event":"消息结束事件","Escalation end event":"定时结束事件","Error end event":"错误结束事件","Cancel end event":"取消结束事件","Compensation end event":"补偿结束事件","Signal end event":"信号结束事件","Terminate end event":"终止结束事件","Message Boundary Event":"消息边界事件","Message Boundary Event (non-interrupting)":"消息边界事件（非中断）","Timer Boundary Event":"定时边界事件","Timer Boundary Event (non-interrupting)":"定时边界事件（非中断）","Escalation Boundary Event":"升级边界事件","Escalation Boundary Event (non-interrupting)":"升级边界事件（非中断）","Conditional Boundary Event":"条件边界事件","Conditional Boundary Event (non-interrupting)":"条件边界事件（非中断）","Error Boundary Event":"错误边界事件","Cancel Boundary Event":"取消边界事件","Signal Boundary Event":"信号边界事件","Signal Boundary Event (non-interrupting)":"信号边界事件（非中断）","Compensation Boundary Event":"补偿边界事件","Exclusive Gateway":"互斥网关","Parallel Gateway":"并行网关","Inclusive Gateway":"相容网关","Complex Gateway":"复杂网关","Event based Gateway":"事件网关",Transaction:"转运","Sub Process":"子流程","Event Sub Process":"事件子流程","Collapsed Pool":"折叠池","Expanded Pool":"展开池","no parent for {element} in {parent}":"在{parent}里，{element}没有父类","no shape type specified":"没有指定的形状类型","flow elements must be children of pools/participants":"流元素必须是池/参与者的子类","out of bounds release":"out of bounds release","more than {count} child lanes":"子道大于{count} ","element required":"元素不能为空","diagram not part of bpmn:Definitions":"流程图不符合bpmn规范","no diagram to display":"没有可展示的流程图","no process or collaboration to display":"没有可展示的流程/协作","element {element} referenced by {referenced}#{property} not yet drawn":"由{referenced}#{property}引用的{element}元素仍未绘制","already rendered {element}":"{element} 已被渲染","failed to import {element}":"导入{element}失败",Id:"编号",Name:"名称",General:"常规",Details:"详情","Message Name":"消息名称",Message:"消息",Initiator:"创建者","Asynchronous Continuations":"持续异步","Asynchronous Before":"异步前","Asynchronous After":"异步后","Job Configuration":"工作配置",Exclusive:"排除","Job Priority":"工作优先级","Retry Time Cycle":"重试时间周期",Documentation:"文档","Element Documentation":"元素文档","History Configuration":"历史配置","History Time To Live":"历史的生存时间",Forms:"表单","Form Key":"表单key","Form Fields":"表单字段","Business Key":"业务key","Form Field":"表单字段",ID:"编号",Type:"类型",Label:"名称","Default Value":"默认值","Default Flow":"默认流转路径","Conditional Flow":"条件流转路径","Sequence Flow":"普通流转路径",Validation:"校验","Add Constraint":"添加约束",Config:"配置",Properties:"属性","Add Property":"添加属性",Value:"值",Listeners:"监听器","Execution Listener":"执行监听","Event Type":"事件类型","Listener Type":"监听器类型","Java Class":"Java类",Expression:"表达式","Must provide a value":"必须提供一个值","Delegate Expression":"代理表达式",Script:"脚本","Script Format":"脚本格式","Script Type":"脚本类型","Inline Script":"内联脚本","External Script":"外部脚本",Resource:"资源","Field Injection":"字段注入",Extensions:"扩展","Input/Output":"输入/输出","Input Parameters":"输入参数","Output Parameters":"输出参数",Parameters:"参数","Output Parameter":"输出参数","Timer Definition Type":"定时器定义类型","Timer Definition":"定时器定义",Date:"日期",Duration:"持续",Cycle:"循环",Signal:"信号","Signal Name":"信号名称",Escalation:"升级",Error:"错误","Link Name":"链接名称",Condition:"条件名称","Variable Name":"变量名称","Variable Event":"变量事件","Specify more than one variable change event as a comma separated list.":"多个变量事件以逗号隔开","Wait for Completion":"等待完成","Activity Ref":"活动参考","Version Tag":"版本标签",Executable:"可执行文件","External Task Configuration":"扩展任务配置","Task Priority":"任务优先级",External:"外部",Connector:"连接器","Must configure Connector":"必须配置连接器","Connector Id":"连接器编号",Implementation:"实现方式","Field Injections":"字段注入",Fields:"字段","Result Variable":"结果变量",Topic:"主题","Configure Connector":"配置连接器","Input Parameter":"输入参数",Assignee:"代理人","Candidate Users":"候选用户","Candidate Groups":"候选组","Due Date":"到期时间","Follow Up Date":"跟踪日期",Priority:"优先级","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00",Variables:"变量","Candidate Starter Configuration":"候选人起动器配置","Candidate Starter Groups":"候选人起动器组","This maps to the process definition key.":"这映射到流程定义键。","Candidate Starter Users":"候选人起动器的用户","Specify more than one user as a comma separated list.":"指定多个用户作为逗号分隔的列表。","Tasklist Configuration":"Tasklist配置",Startable:"启动","Specify more than one group as a comma separated list.":"指定多个组作为逗号分隔的列表。"},fx={zh:dx};function Qd(e){const t=fx[e];return function(i,r){return r=r||{},i=t[i]||i,i.replace(/{([^}]+)}/g,function(o,l){return r[l]||"{"+l+"}"})}}function mx(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const gx=Object.prototype.toString,vx=Object.prototype.hasOwnProperty;function yx(e){return e===void 0}function bx(e){return gx.call(e)==="[object Array]"}function wx(e,t){return vx.call(e,t)}function qd(e,t){let n,i;if(yx(e))return;const r=bx(e)?Ex:_x;for(let o in e)if(wx(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function _x(e){return e}function Ex(e){return Number(e)}function Nt(e,...t){const n=e.style;return qd(t,function(i){i&&qd(i,function(r,o){n[o]=r})}),e}function Bt(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const xx=Object.prototype.toString;function nt(e){return new Zi(e)}function Zi(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Zi.prototype.add=function(e){return this.list.add(e),this};Zi.prototype.remove=function(e){return xx.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Zi.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Zi.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Zi.prototype.array=function(){return Array.from(this.list)};Zi.prototype.has=Zi.prototype.contains=function(e){return this.list.contains(e)};function ql(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function ir(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var ml={},gl,Fu,jp;function ty(){gl=window.addEventListener?"addEventListener":"attachEvent",Fu=window.removeEventListener?"removeEventListener":"detachEvent",jp=gl!=="addEventListener"?"on":""}var Sx=ml.bind=function(e,t,n,i){return gl||ty(),e[gl](jp+t,n,i||!1),n},Cx=ml.unbind=function(e,t,n,i){return Fu||ty(),e[Fu](jp+t,n,i||!1),n},we=mx({__proto__:null,bind:Sx,unbind:Cx,default:ml},[ml]),ny=["focus","blur"];function Ax(e,t,n,i,r){return ny.indexOf(n)!==-1&&(r=!0),we.bind(e,n,function(o){var l=o.target||o.srcElement;o.delegateTarget=ir(l,t,!0),o.delegateTarget&&i.call(e,o)},r)}function Tx(e,t,n,i){return ny.indexOf(t)!==-1&&(i=!0),we.unbind(e,t,n,i)}var cn={bind:Ax,unbind:Tx},$x=Rx,iy=!1,ha;typeof document<"u"&&(ha=document.createElement("div"),ha.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',iy=!ha.getElementsByTagName("link").length,ha=void 0);var xt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:iy?[1,"X<div>","</div>"]:[0,"",""]};xt.td=xt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];xt.option=xt.optgroup=[1,'<select multiple="multiple">',"</select>"];xt.thead=xt.tbody=xt.colgroup=xt.caption=xt.tfoot=[1,"<table>","</table>"];xt.polyline=xt.ellipse=xt.polygon=xt.circle=xt.text=xt.line=xt.path=xt.rect=xt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function Rx(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var s=t.createElement("html");return s.innerHTML=e,s.removeChild(s.lastChild)}var r=Object.prototype.hasOwnProperty.call(xt,i)?xt[i]:xt._default,o=r[0],l=r[1],u=r[2],s=t.createElement("div");for(s.innerHTML=l+e+u;o--;)s=s.lastChild;if(s.firstChild==s.lastChild)return s.removeChild(s.firstChild);for(var p=t.createDocumentFragment();s.firstChild;)p.appendChild(s.removeChild(s.firstChild));return p}var tt=$x;function Gp(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function Ke(e,t){return t=t||document,t.querySelector(e)}function vl(e,t){return t=t||document,t.querySelectorAll(e)}function ri(e){e.parentNode&&e.parentNode.removeChild(e)}function Mx(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch{}return e}function ry(e,t){return t.appendChild(Mx(e,t))}function me(e,t){return ry(t,e),e}var Wu=2,oy={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":Wu,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":Wu,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function kx(e,t){return oy[t]?e.style[t]:e.getAttributeNS(null,t)}function sy(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=oy[i];r?(r===Wu&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function Ix(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)sy(e,r,t[r])}function ce(e,t,n){if(typeof t=="string")if(n!==void 0)sy(e,t,n);else return kx(e,t);else Ix(e,t);return e}const Lx=Object.prototype.toString;function Fe(e){return new Ki(e)}function Ki(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Ki.prototype.add=function(e){return this.list.add(e),this};Ki.prototype.remove=function(e){return Lx.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)};Ki.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};Ki.prototype.toggle=function(e,t){return typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this};Ki.prototype.array=function(){return Array.from(this.list)};Ki.prototype.has=Ki.prototype.contains=function(e){return this.list.contains(e)};function Vr(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Vp(e){return e.cloneNode(!0)}var zp={svg:"http://www.w3.org/2000/svg"},ef='<svg xmlns="'+zp.svg+'"';function ay(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(zp.svg)===-1&&(e=ef+e.substring(4)):(e=ef+">"+e+"</svg>",t=!0);var n=Px(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function Px(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function he(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=ay(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(zp.svg,e),t&&ce(n,t),n}var nu=null;function Hu(){return nu===null&&(nu=he("svg")),nu}function tf(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function Dx(e,t,n,i,r,o){var l=Hu().createSVGMatrix();switch(arguments.length){case 0:return l;case 1:return tf(l,e);case 6:return tf(l,{a:e,b:t,c:n,d:i,e:r,f:o})}}function is(e){return e?Hu().createSVGTransformFromMatrix(e):Hu().createSVGTransform()}var nf=/([&<>]{1})/g,Ox=/([\n\r"]{1})/g,Nx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function iu(e,t){function n(i,r){return Nx[r]||r}return e.replace(t,n)}function ly(e,t){var n,i,r,o,l;switch(e.nodeType){case 3:t.push(iu(e.textContent,nf));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',iu(o.value,Ox),'"');if(e.hasChildNodes()){for(t.push(">"),l=e.childNodes,n=0,i=l.length;n<i;++n)ly(l.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",iu(e.nodeValue,nf),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function Bx(e,t){var n=ay(t);if(Vr(e),!!t){Wx(n)||(n=n.documentElement);for(var i=Hx(n.childNodes),r=0;r<i.length;r++)ry(i[r],e)}}function Fx(e){for(var t=e.firstChild,n=[];t;)ly(t,n),t=t.nextSibling;return n.join("")}function Wx(e){return e.nodeName==="#document-fragment"}function rf(e,t){if(t!==void 0){try{Bx(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return Fx(e)}function Hx(e){return Array.prototype.slice.call(e)}function ut(e){var t=e.parentNode;return t&&t.removeChild(e),e}function jx(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function Gx(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem(jx(e,i))}function hs(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),Gx(n,t)),n.consolidate()}const Vx=/^class[ {]/;function zx(e){return Vx.test(e.toString())}function Up(e){return Array.isArray(e)}function ru(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function za(...e){e.length===1&&Up(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const Ux=/constructor\s*[^(]*\(\s*([^)]*)\)/m,Yx=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Xx=/\/\*([^*]*)\*\//m;function Zx(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(zx(e)?Ux:Yx);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Xx);return(r&&r[1]||i).trim()})||[]}function cy(e,t){const n=t||{get:function(S,b){if(i.push(S),b===!1)return null;throw u(`No provider for "${S}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),l=o.injector=this,u=function(S){const b=i.join(" -> ");return i.length=0,new Error(b?`${S} (Resolving: ${b})`:S)};function s(S,b){if(!r[S]&&S.includes(".")){const _=S.split(".");let v=s(_.shift());for(;_.length;)v=v[_.shift()];return v}if(ru(o,S))return o[S];if(ru(r,S)){if(i.indexOf(S)!==-1)throw i.push(S),u("Cannot resolve circular dependency!");return i.push(S),o[S]=r[S][0](r[S][1]),i.pop(),o[S]}return n.get(S,b)}function p(S,b){if(typeof b>"u"&&(b={}),typeof S!="function")if(Up(S))S=za(S.slice());else throw u(`Cannot invoke "${S}". Expected a function!`);const v=(S.$inject||Zx(S)).map(E=>ru(b,E)?b[E]:s(E));return{fn:S,dependencies:v}}function a(S){const{fn:b,dependencies:_}=p(S),v=Function.prototype.bind.call(b,null,..._);return new v}function c(S,b,_){const{fn:v,dependencies:E}=p(S,_);return v.apply(b,E)}function h(S){return za(b=>S.get(b))}function f(S,b){if(b&&b.length){const _=Object.create(null),v=Object.create(null),E=[],x=[],T=[];let k,$,R,A;for(let C in r)k=r[C],b.indexOf(C)!==-1&&(k[2]==="private"?($=E.indexOf(k[3]),$===-1?(R=k[3].createChild([],b),A=h(R),E.push(k[3]),x.push(R),T.push(A),_[C]=[A,C,"private",R]):_[C]=[T[$],C,"private",x[$]]):_[C]=[k[2],k[1]],v[C]=!0),(k[2]==="factory"||k[2]==="type")&&k[1].$scope&&b.forEach(M=>{k[1].$scope.indexOf(M)!==-1&&(_[C]=[k[2],k[1]],v[M]=!0)});b.forEach(C=>{if(!v[C])throw new Error('No provider for "'+C+'". Cannot use provider from the parent!')}),S.unshift(_)}return new cy(S,l)}const d={factory:c,type:a,value:function(S){return S}};function m(S,b){const _=S.__init__||[];return function(){_.forEach(v=>{typeof v=="string"?b.get(v):b.invoke(v)})}}function g(S){const b=S.__exports__;if(b){const _=S.__modules__,v=Object.keys(S).reduce(($,R)=>(R!=="__exports__"&&R!=="__modules__"&&R!=="__init__"&&R!=="__depends__"&&($[R]=S[R]),$),Object.create(null)),E=(_||[]).concat(v),x=f(E),T=za(function($){return x.get($)});b.forEach(function($){r[$]=[T,$,"private",x]});const k=(S.__init__||[]).slice();return k.unshift(function(){x.init()}),S=Object.assign({},S,{__init__:k}),m(S,x)}return Object.keys(S).forEach(function(_){if(_==="__init__"||_==="__depends__")return;const v=S[_];if(v[2]==="private"){r[_]=v;return}const E=v[0],x=v[1];r[_]=[d[E],Kx(E,x),E]}),m(S,l)}function y(S,b){return S.indexOf(b)!==-1||(S=(b.__depends__||[]).reduce(y,S),S.indexOf(b)!==-1)?S:S.concat(b)}function w(S){const b=S.reduce(y,[]).map(g);let _=!1;return function(){_||(_=!0,b.forEach(v=>v()))}}this.get=s,this.invoke=c,this.instantiate=a,this.createChild=f,this.init=w(e)}function Kx(e,t){return e!=="value"&&Up(t)&&(t=za(t.slice())),t}var Jx=1e3;function xi(e,t){var n=this;t=t||Jx,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,l=r.element,u=r.gfx,s=r.attrs;if(n.canRender(l))return o==="render.shape"?n.drawShape(u,l,s):n.drawConnection(u,l,s)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}xi.prototype.canRender=function(e){};xi.prototype.drawShape=function(e,t){};xi.prototype.drawConnection=function(e,t){};xi.prototype.getShapePath=function(e){};xi.prototype.getConnectionPath=function(e){};function zr(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function Qx(e){return["M",e.x,e.y]}function ou(e){return["L",e.x,e.y]}function qx(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function eS(e,t){const n=e.length,i=[Qx(e[0])];for(let r=1;r<n;r++){const o=e[r-1],l=e[r],u=e[r+1];if(!u||!t){i.push(ou(l));continue}const s=Math.min(t,ju(l.x-o.x,l.y-o.y),ju(u.x-l.x,u.y-l.y));if(!s){i.push(ou(l));continue}const p=da(l,o,s),a=da(l,o,s*.5),c=da(l,u,s),h=da(l,u,s*.5);i.push(ou(p)),i.push(qx(a,h,c))}return i}function da(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=ju(i,r),l=n/o;return{x:e.x+i*l,y:e.y+r*l}}function ju(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function ec(e,t,n){Se(t)&&(n=t,t=null),t||(t={});const i=he("path",t);return Se(n)&&(i.dataset.cornerRadius=String(n)),uy(i,e)}function uy(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return ce(e,{d:zr(eS(t,n))}),e}function tc(e){return Re(e,function(t){return!je(e,function(n){return n!==t&&py(t,n)})})}function py(e,t){if(t){if(e===t)return t;if(e.parent)return py(e.parent,t)}}function of(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Ur(e,t,n){n=n||0,Ie(e)||(e=[e]),J(e,function(i,r){var o=t(i,r,n);Ie(o)&&o.length&&Ur(o,t,n+1)})}function tS(e,t,n){var i=[],r=[];return Ur(e,function(o,l,u){of(i,o,t);var s=o.children;if((n===-1||u<n)&&s&&of(r,s,t))return s}),i}function Is(e,t){return tS(e,!t,-1)}function nS(e,t,n){Ir(t)&&(t=!0),Mt(t)&&(n=t,t=!0),n=n||{};var i=Vo(n.allShapes),r=Vo(n.allConnections),o=Vo(n.enclosedElements),l=Vo(n.enclosedConnections),u=Vo(n.topLevel,t&&So(e,function(a){return a.id}));function s(a){u[a.source.id]&&u[a.target.id]&&(u[a.id]=[a]),i[a.source.id]&&i[a.target.id]&&(l[a.id]=o[a.id]=a),r[a.id]=a}function p(a){if(o[a.id]=a,a.waypoints)l[a.id]=r[a.id]=a;else return i[a.id]=a,J(a.incoming,s),J(a.outgoing,s),a.children}return Ur(e,p),{allShapes:i,allConnections:r,topLevel:u,enclosedConnections:l,enclosedElements:o}}function vt(e,t){t=!!t,Ie(e)||(e=[e]);var n,i,r,o;return J(e,function(l){var u=l;l.waypoints&&!t&&(u=vt(l.waypoints,!0));var s=u.x,p=u.y,a=u.height||0,c=u.width||0;(s<n||n===void 0)&&(n=s),(p<i||i===void 0)&&(i=p),(s+c>r||r===void 0)&&(r=s+c),(p+a>o||o===void 0)&&(o=p+a)}),{x:n,y:i,height:o-i,width:r-n}}function iS(e,t){var n={};return J(e,function(i){var r=i;r.waypoints&&(r=vt(r)),!Se(t.y)&&r.x>t.x&&(n[i.id]=i),!Se(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(Se(t.width)&&Se(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!Se(t.width)||!Se(t.height))&&(n[i.id]=i)}),n}function hy(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function dy(e){return!!(e&&e.isFrame)}function Vo(e,t){return q({},e||{},t||{})}var rS=1;function rr(e,t){xi.call(this,e,rS),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}de(rr,xi);rr.prototype.canRender=function(){return!0};rr.prototype.drawShape=function(t,n,i){var r=he("rect");return ce(r,{x:0,y:0,width:n.width||0,height:n.height||0}),dy(n)?ce(r,q({},this.FRAME_STYLE,i||{})):ce(r,q({},this.SHAPE_STYLE,i||{})),me(t,r),r};rr.prototype.drawConnection=function(t,n,i){var r=ec(n.waypoints,q({},this.CONNECTION_STYLE,i||{}));return me(t,r),r};rr.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,l=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return zr(l)};rr.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return zr(o)};rr.$inject=["eventBus","styles"];function oS(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return q(o,{class:n})},this.style=function(n,i){!Ie(n)&&!i&&(i=n,n=[]);var r=pn(n,function(o,l){return q(o,e[l]||{})},{});return i?q(r,i):r},this.computeStyle=function(n,i,r){return Ie(i)||(r=i,i=[]),t.style(i||[],q({},r,n||{}))}}const sS={__init__:["defaultRenderer"],defaultRenderer:["type",rr],styles:["type",oS]};function bt(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function At(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function Yp(e,t){return!e||!t?-1:e.indexOf(t)}function Ls(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Xp(e,t,n,i){if(typeof i>"u"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Ls(e,t);return Math.abs(r/o)<=i}var aS=2;function fi(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,o]of Object.entries(i))if(lS(r,n))return o;return!1}function lS(e,t){const n=t[0];return xo(t,function(i){return Math.abs(n[e]-i[e])<=aS})}function sf(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function Gu(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var cS=/,?([a-z]),?/gi,af=parseFloat,ft=Math,Di=ft.PI,Qn=ft.min,qn=ft.max,lf=ft.pow,Gi=ft.abs,uS=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,pS=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,yl=Array.isArray||function(e){return e instanceof Array};function Zp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rs(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)Zp(e,n)&&(t[n]=rs(e[n]));return t}function hS(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function dS(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join("␀"),r=t.cache=t.cache||{},o=t.count=t.count||[];return Zp(r,i)?(hS(o,i),r[i]):(o.length>=1e3&&delete r[o.shift()],o.push(i),r[i]=e(...arguments),r[i])}return t}function fS(e){if(!e)return null;var t=ho(e);if(t.arr)return rs(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return yl(e)&&yl(e[0])&&(i=rs(e)),i.length||String(e).replace(uS,function(r,o,l){var u=[],s=o.toLowerCase();for(l.replace(pS,function(p,a){a&&u.push(+a)}),s=="m"&&u.length>2&&(i.push([o,...u.splice(0,2)]),s="l",o=o=="m"?"l":"L");u.length>=n[s]&&(i.push([o,...u.splice(0,n[s])]),!!n[s]););}),i.toString=ho.toString,t.arr=rs(i),i}function ho(e){var t=ho.ps=ho.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)Zp(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function Vu(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function fy(){return this.join(",").replace(cS,"$1")}function bl(e){var t=rs(e);return t.toString=fy,t}function cf(e,t,n,i,r,o,l,u,s){var p=1-s,a=lf(p,3),c=lf(p,2),h=s*s,f=h*s,d=a*e+c*3*s*n+p*3*s*s*r+f*l,m=a*t+c*3*s*i+p*3*s*s*o+f*u;return{x:wl(d),y:wl(m)}}function uf(e){var t=bS(...e);return Vu(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function Oi(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function mS(e,t){return e=Vu(e),t=Vu(t),Oi(t,e.x,e.y)||Oi(t,e.x2,e.y)||Oi(t,e.x,e.y2)||Oi(t,e.x2,e.y2)||Oi(e,t.x,t.y)||Oi(e,t.x2,t.y)||Oi(e,t.x,t.y2)||Oi(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function pf(e,t,n,i,r){var o=-3*t+9*n-9*i+3*r,l=e*o+6*t-12*n+6*i;return e*l-3*t+3*n}function hf(e,t,n,i,r,o,l,u,s){s==null&&(s=1),s=s>1?1:s<0?0:s;for(var p=s/2,a=12,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,d=0;d<a;d++){var m=p*c[d]+p,g=pf(m,e,n,r,l),y=pf(m,t,i,o,u),w=g*g+y*y;f+=h[d]*ft.sqrt(w)}return p*f}function gS(e,t,n,i,r,o,l,u){if(!(qn(e,n)<Qn(r,l)||Qn(e,n)>qn(r,l)||qn(t,i)<Qn(o,u)||Qn(t,i)>qn(o,u))){var s=(e*i-t*n)*(r-l)-(e-n)*(r*u-o*l),p=(e*i-t*n)*(o-u)-(t-i)*(r*u-o*l),a=(e-n)*(o-u)-(t-i)*(r-l);if(a){var c=wl(s/a),h=wl(p/a),f=+c.toFixed(2),d=+h.toFixed(2);if(!(f<+Qn(e,n).toFixed(2)||f>+qn(e,n).toFixed(2)||f<+Qn(r,l).toFixed(2)||f>+qn(r,l).toFixed(2)||d<+Qn(t,i).toFixed(2)||d>+qn(t,i).toFixed(2)||d<+Qn(o,u).toFixed(2)||d>+qn(o,u).toFixed(2)))return{x:c,y:h}}}}function wl(e){return Math.round(e*1e11)/1e11}function vS(e,t,n){var i=uf(e),r=uf(t);if(!mS(i,r))return n?0:[];for(var o=hf(...e),l=hf(...t),u=df(e)?1:~~(o/5)||1,s=df(t)?1:~~(l/5)||1,p=[],a=[],c={},h=n?0:[],f=0;f<u+1;f++){var d=cf(...e,f/u);p.push({x:d.x,y:d.y,t:f/u})}for(f=0;f<s+1;f++)d=cf(...t,f/s),a.push({x:d.x,y:d.y,t:f/s});for(f=0;f<u;f++)for(var m=0;m<s;m++){var g=p[f],y=p[f+1],w=a[m],S=a[m+1],b=Gi(y.x-g.x)<.01?"y":"x",_=Gi(S.x-w.x)<.01?"y":"x",v=gS(g.x,g.y,y.x,y.y,w.x,w.y,S.x,S.y),E;if(v){if(E=v.x.toFixed(9)+"#"+v.y.toFixed(9),c[E])continue;c[E]=!0;var x=g.t+Gi((v[b]-g[b])/(y[b]-g[b]))*(y.t-g.t),T=w.t+Gi((v[_]-w[_])/(S[_]-w[_]))*(S.t-w.t);x>=0&&x<=1&&T>=0&&T<=1&&(n?h++:h.push({x:v.x,y:v.y,t1:x,t2:T}))}}return h}function my(e,t,n){e=mf(e),t=mf(t);for(var i,r,o,l,u,s,p,a,c,h,f=n?0:[],d=0,m=e.length;d<m;d++){var g=e[d];if(g[0]=="M")i=u=g[1],r=s=g[2];else{g[0]=="C"?(c=[i,r,...g.slice(1)],i=c[6],r=c[7]):(c=[i,r,i,r,u,s,u,s],i=u,r=s);for(var y=0,w=t.length;y<w;y++){var S=t[y];if(S[0]=="M")o=p=S[1],l=a=S[2];else{S[0]=="C"?(h=[o,l,...S.slice(1)],o=h[6],l=h[7]):(h=[o,l,o,l,p,a,p,a],o=p,l=a);var b=vS(c,h,n);if(n)f+=b;else{for(var _=0,v=b.length;_<v;_++)b[_].segment1=d,b[_].segment2=y,b[_].bez1=c,b[_].bez2=h;f=f.concat(b)}}}}}return f}function yS(e){var t=ho(e);if(t.abs)return bl(t.abs);if((!yl(e)||!yl(e&&e[0]))&&(e=fS(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,l=0,u=0,s;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],o=i,l=r,u++,n[0]=["M",i,r]);for(var p,a,c=u,h=e.length;c<h;c++){if(n.push(p=[]),a=e[c],s=a[0],s!=s.toUpperCase())switch(p[0]=s.toUpperCase(),p[0]){case"A":p[1]=a[1],p[2]=a[2],p[3]=a[3],p[4]=a[4],p[5]=a[5],p[6]=+a[6]+i,p[7]=+a[7]+r;break;case"V":p[1]=+a[1]+r;break;case"H":p[1]=+a[1]+i;break;case"M":o=+a[1]+i,l=+a[2]+r;default:for(var f=1,d=a.length;f<d;f++)p[f]=+a[f]+(f%2?i:r)}else for(var m=0,g=a.length;m<g;m++)p[m]=a[m];switch(s=s.toUpperCase(),p[0]){case"Z":i=+o,r=+l;break;case"H":i=p[1];break;case"V":r=p[1];break;case"M":o=p[p.length-2],l=p[p.length-1];default:i=p[p.length-2],r=p[p.length-1]}}return n.toString=fy,t.abs=bl(n),n}function df(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function fa(e,t,n,i){return[e,t,n,i,n,i]}function ff(e,t,n,i,r,o){var l=.3333333333333333,u=2/3;return[l*e+u*n,l*t+u*i,l*r+u*n,l*o+u*i,r,o]}function gy(e,t,n,i,r,o,l,u,s,p){var a=Di*120/180,c=Di/180*(+r||0),h=[],f,d=dS(function(ee,Y,O){var L=ee*ft.cos(O)-Y*ft.sin(O),P=ee*ft.sin(O)+Y*ft.cos(O);return{x:L,y:P}});if(p)E=p[0],x=p[1],_=p[2],v=p[3];else{f=d(e,t,-c),e=f.x,t=f.y,f=d(u,s,-c),u=f.x,s=f.y;var m=(e-u)/2,g=(t-s)/2,y=m*m/(n*n)+g*g/(i*i);y>1&&(y=ft.sqrt(y),n=y*n,i=y*i);var w=n*n,S=i*i,b=(o==l?-1:1)*ft.sqrt(Gi((w*S-w*g*g-S*m*m)/(w*g*g+S*m*m))),_=b*n*g/i+(e+u)/2,v=b*-i*m/n+(t+s)/2,E=ft.asin(((t-v)/i).toFixed(9)),x=ft.asin(((s-v)/i).toFixed(9));E=e<_?Di-E:E,x=u<_?Di-x:x,E<0&&(E=Di*2+E),x<0&&(x=Di*2+x),l&&E>x&&(E=E-Di*2),!l&&x>E&&(x=x-Di*2)}var T=x-E;if(Gi(T)>a){var k=x,$=u,R=s;x=E+a*(l&&x>E?1:-1),u=_+n*ft.cos(x),s=v+i*ft.sin(x),h=gy(u,s,n,i,r,0,l,$,R,[x,k,_,v])}T=x-E;var A=ft.cos(E),C=ft.sin(E),M=ft.cos(x),I=ft.sin(x),D=ft.tan(T/4),B=4/3*n*D,F=4/3*i*D,j=[e,t],Z=[e+B*C,t-F*A],Q=[u+B*I,s-F*M],W=[u,s];if(Z[0]=2*j[0]-Z[0],Z[1]=2*j[1]-Z[1],p)return[Z,Q,W].concat(h);h=[Z,Q,W].concat(h).join().split(",");for(var V=[],G=0,U=h.length;G<U;G++)V[G]=G%2?d(h[G-1],h[G],c).y:d(h[G],h[G+1],c).x;return V}function bS(e,t,n,i,r,o,l,u){for(var s=[],p=[[],[]],a,c,h,f,d,m,g,y,w=0;w<2;++w){if(w==0?(c=6*e-12*n+6*r,a=-3*e+9*n-9*r+3*l,h=3*n-3*e):(c=6*t-12*i+6*o,a=-3*t+9*i-9*o+3*u,h=3*i-3*t),Gi(a)<1e-12){if(Gi(c)<1e-12)continue;f=-h/c,0<f&&f<1&&s.push(f);continue}g=c*c-4*h*a,y=ft.sqrt(g),!(g<0)&&(d=(-c+y)/(2*a),0<d&&d<1&&s.push(d),m=(-c-y)/(2*a),0<m&&m<1&&s.push(m))}for(var S=s.length,b=S,_;S--;)f=s[S],_=1-f,p[0][S]=_*_*_*e+3*_*_*f*n+3*_*f*f*r+f*f*f*l,p[1][S]=_*_*_*t+3*_*_*f*i+3*_*f*f*o+f*f*f*u;return p[0][b]=e,p[1][b]=t,p[0][b+1]=l,p[1][b+1]=u,p[0].length=p[1].length=b+2,{x0:Qn(...p[0]),y0:Qn(...p[1]),x1:qn(...p[0]),y1:qn(...p[1])}}function mf(e){var t=ho(e);if(t.curve)return bl(t.curve);for(var n=yS(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(f,d,m){var g,y;if(!f)return["C",d.x,d.y,d.x,d.y,d.x,d.y];switch(!(f[0]in{T:1,Q:1})&&(d.qx=d.qy=null),f[0]){case"M":d.X=f[1],d.Y=f[2];break;case"A":f=["C",...gy(d.x,d.y,...f.slice(1))];break;case"S":m=="C"||m=="S"?(g=d.x*2-d.bx,y=d.y*2-d.by):(g=d.x,y=d.y),f=["C",g,y,...f.slice(1)];break;case"T":m=="Q"||m=="T"?(d.qx=d.x*2-d.qx,d.qy=d.y*2-d.qy):(d.qx=d.x,d.qy=d.y),f=["C",...ff(d.x,d.y,d.qx,d.qy,f[1],f[2])];break;case"Q":d.qx=f[1],d.qy=f[2],f=["C",...ff(d.x,d.y,f[1],f[2],f[3],f[4])];break;case"L":f=["C",...fa(d.x,d.y,f[1],f[2])];break;case"H":f=["C",...fa(d.x,d.y,f[1],d.y)];break;case"V":f=["C",...fa(d.x,d.y,d.x,f[1])];break;case"Z":f=["C",...fa(d.x,d.y,d.X,d.Y)];break}return f},o=function(f,d){if(f[d].length>7){f[d].shift();for(var m=f[d];m.length;)l[d]="A",f.splice(d++,0,["C",...m.splice(0,6)]);f.splice(d,1),a=n.length}},l=[],u="",s="",p=0,a=n.length;p<a;p++){n[p]&&(u=n[p][0]),u!="C"&&(l[p]=u,p&&(s=l[p-1])),n[p]=r(n[p],i,s),l[p]!="A"&&u=="C"&&(l[p]="C"),o(n,p);var c=n[p],h=c.length;i.x=c[h-2],i.y=c[h-1],i.bx=af(c[h-4])||i.x,i.by=af(c[h-3])||i.y}return t.curve=bl(n),n}function Qe(e){return Mt(e)&&en(e,"waypoints")}function Ve(e){return Mt(e)&&en(e,"labelTarget")}function vy(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function mi(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function ye(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function nc(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function wS(e){return mi({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function _S(e){for(var t=e.waypoints,n=t.reduce(function(p,a,c){var h=t[c-1];if(h){var f=p[p.length-1],d=f&&f.endLength||0,m=SS(h,a);p.push({start:h,end:a,startLength:d,endLength:d+m,length:m})}return p},[]),i=n.reduce(function(p,a){return p+a.length},0),r=i/2,o=0,l=n[o];l.endLength<r;)l=n[++o];var u=(r-l.startLength)/l.length,s={x:l.start.x+(l.end.x-l.start.x)*u,y:l.start.y+(l.end.y-l.start.y)*u};return s}function xe(e){return Qe(e)?_S(e):wS(e)}function zt(e,t,n){n=n||0,Mt(n)||(n={x:n,y:n});var i=ye(e),r=ye(t),o=i.bottom+n.y<=r.top,l=i.left-n.x>=r.right,u=i.top-n.y>=r.bottom,s=i.right+n.x<=r.left,p=o?"top":u?"bottom":null,a=s?"left":l?"right":null;return a&&p?p+"-"+a:a||p||"intersect"}function zu(e,t,n){var i=ES(e,t);return i.length===1||i.length===2&&Ls(i[0],i[1])<1?mi(i[0]):i.length>1?(i=Gn(i,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),mi(i[n?0:i.length-1])):null}function ES(e,t){return my(e,t)}function xS(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],Ls(n,r)===0||Xp(i,r,n)?e.splice(t,1):t++;return e}function SS(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ua(e,t){return Math.round(e*t)/t}function gf(e){return Se(e)?e+"px":e}function CS(e){for(;e.parent;)e=e.parent;return e}function AS(e){e=q({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Nt(n,{position:"relative",overflow:"hidden",width:gf(e.width),height:gf(e.height)}),t.appendChild(n),n}function yy(e,t,n){const i=he("g");Fe(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const TS="base",by=0,$S=1,RS={shape:["x","y","width","height"],connection:["waypoints"]};function Te(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}Te.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];Te.prototype._init=function(e){const t=this._eventBus,n=this._container=AS(e),i=this._svg=he("svg");ce(i,{width:"100%",height:"100%"}),me(n,i);const r=this._viewport=yy(i,"viewport");e.deferUpdate&&(this._viewboxChanged=vv(tn(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)};Te.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport};Te.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=hy(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox};Te.prototype.getDefaultLayer=function(){return this.getLayer(TS,by)};Te.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t<"u"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group};Te.prototype._getChildIndex=function(e){return pn(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)};Te.prototype._createLayer=function(e,t){typeof t>"u"&&(t=$S);const n=this._getChildIndex(t);return{group:yy(this._viewport,"layer-"+e,n),index:t,visible:!0}};Te.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i};Te.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(ut(n),t.visible=!1),n};Te.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],ut(t.group))};Te.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null};Te.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(CS(e))||{}).rootElement:void 0};Te.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})};Te.prototype._findPlaneForRoot=function(e){return je(this._planes,function(t){return t.rootElement===e})};Te.prototype.getContainer=function(){return this._container};Te.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),i=this._elementRegistry._elements[e.id],i&&(J([i.gfx,i.secondaryGfx],function(r){r&&(n?Fe(r).add(t):Fe(r).remove(t))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))};Te.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)};Te.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)};Te.prototype.hasMarker=function(e,t){e.id||(e=this._elementRegistry.get(e));const n=this.getGraphics(e);return Fe(n).has(t)};Te.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)};Te.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))};Te.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,by);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e};Te.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e};Te.prototype.setRootElement=function(e){if(e===this._rootElement)return;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e};Te.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)};Te.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})};Te.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})};Te.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=RS[e];if(!xo(n,function(r){return typeof t[r]<"u"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)};Te.prototype._setParent=function(e,t,n){At(t.children,e,n),e.parent=t};Te.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const l=o.create(e,t,i);return this._elementRegistry.add(t,l),o.update(e,t,l),r.fire(e+".added",{element:t,gfx:l}),t};Te.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)};Te.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)};Te.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),bt(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e};Te.prototype.removeShape=function(e){return this._removeElement(e,"shape")};Te.prototype.removeConnection=function(e){return this._removeElement(e,"connection")};Te.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)};Te.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()};Te.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};Te.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return this._cachedViewbox;const t=this._viewport,n=this.getSize();let i,r,o,l,u,s,p;if(e)this._changeViewbox(function(){u=Math.min(n.width/e.width,n.height/e.height);const a=this._svg.createSVGMatrix().scale(u).translate(-e.x,-e.y);hs(t,a)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},l=hs(t),r=l?l.matrix:Dx(),u=Ua(r.a,1e3),s=Ua(-r.e||0,1e3),p=Ua(-r.f||0,1e3),e=this._cachedViewbox={x:s?s/u:0,y:p?p/u:0,width:n.width/u,height:n.height/u,scale:u,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e};Te.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=q({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),wy(t,n)}),{x:n.e,y:n.f}};Te.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=vt(e),o=ye(r),l=this.viewbox(),u=this.zoom();let s,p;l.y+=t.top/u,l.x+=t.left/u,l.width-=(t.right+t.left)/u,l.height-=(t.bottom+t.top)/u;const a=ye(l);if(!(r.width<l.width&&r.height<l.height))s=r.x-l.x,p=r.y-l.y;else{const h=Math.max(0,o.right-a.right),f=Math.min(0,o.left-a.left),d=Math.max(0,o.bottom-a.bottom),m=Math.min(0,o.top-a.top);s=h||f,p=d||m}this.scroll({dx:-s*u,dy:-p*u})};Te.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),Ua(i.a,1e3)};function wy(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Te.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale};Te.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let l,u,s,p,a;s=i.getCTM();const c=s.a;return t?(l=q(o,t),u=l.matrixTransform(s.inverse()),p=r.translate(u.x,u.y).scale(1/c*e).translate(-u.x,-u.y),a=s.multiply(p)):a=r.scale(e),wy(this._viewport,a),a};Te.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};Te.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,l=n.height*t.scale;return{x:i,y:r,width:o,height:l}};Te.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var fo="data-element-id";function yn(e){this._elements={},this._eventBus=e}yn.$inject=["eventBus"];yn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ce(t,fo,i),n&&ce(n,fo,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}};yn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ce(i.gfx,fo,""),i.secondaryGfx&&ce(i.secondaryGfx,fo,""),delete t[n])};yn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)};yn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&ce(t,fo,i),t};yn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&ce(e,fo);var n=this._elements[t];return n&&n.element};yn.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t};yn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],l=o.element,u=o.gfx;if(e(l,u))return l}};yn.prototype.getAll=function(){return this.filter(function(e){return e})};yn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})};yn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)};yn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function MS(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var l=this.indexOf(o);return l!==-1&&(this.splice(l,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,l){var u=this.indexOf(o);if(typeof l>"u"){if(u!==-1)return;l=this.length}u!==-1&&this.splice(u,1),this.splice(l,0,o),u===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function kS(e){return e.__refs_collection===!0}function IS(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function _y(e,t,n){var i=MS(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function LS(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var l=r;r=null,l&&e.unset(l,i,n),r=o,e.set(r,i,n)}}})}function Cn(e,t){if(!(this instanceof Cn))return new Cn(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Cn.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?_y(this,t,e):LS(this,t,e)};Cn.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return kS(n)||_y(this,t,e),n};Cn.prototype.ensureBound=function(e,t){IS(e,t)||this.bind(e,t)};Cn.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)};Cn.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var Kp=new Cn({name:"children",enumerable:!0,collection:!0},{name:"parent"}),Ey=new Cn({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),vf=new Cn({name:"attachers",collection:!0},{name:"host"}),xy=new Cn({name:"outgoing",collection:!0},{name:"source"}),Sy=new Cn({name:"incoming",collection:!0},{name:"target"});function Ro(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),Kp.bind(this,"parent"),Ey.bind(this,"labels"),xy.bind(this,"outgoing"),Sy.bind(this,"incoming")}function Ps(){Ro.call(this),Kp.bind(this,"children"),vf.bind(this,"host"),vf.bind(this,"attachers")}de(Ps,Ro);function Cy(){Ro.call(this),Kp.bind(this,"children")}de(Cy,Ps);function Ay(){Ps.call(this),Ey.bind(this,"labelTarget")}de(Ay,Ps);function Ty(){Ro.call(this),xy.bind(this,"source"),Sy.bind(this,"target")}de(Ty,Ro);var PS={connection:Ty,shape:Ps,label:Ay,root:Cy};function DS(e,t){var n=PS[e];if(!n)throw new Error("unknown type: <"+e+">");return q(new n,t)}function OS(e){return e instanceof Ro}function Si(){this._uid=12}Si.prototype.createRoot=function(e){return this.create("root",e)};Si.prototype.createLabel=function(e){return this.create("label",e)};Si.prototype.createShape=function(e){return this.create("shape",e)};Si.prototype.createConnection=function(e){return this.create("connection",e)};Si.prototype.create=function(e,t){return t=q({},t||{}),t.id||(t.id=e+"_"+this._uid++),DS(e,t)};var _l="__fn",$y=1e3,NS=Array.prototype.slice;function hn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}hn.prototype.on=function(e,t,n,i){if(e=Ie(e)?e:[e],yt(t)&&(i=n,n=t,t=$y),!Se(t))throw new Error("priority must be a number");var r=n;i&&(r=tn(n,i),r[_l]=n[_l]||n);var o=this;e.forEach(function(l){o._addListener(l,{priority:t,callback:r,next:null})})};hn.prototype.once=function(e,t,n,i){var r=this;if(yt(t)&&(i=n,n=t,t=$y),!Se(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var l=n.apply(i,arguments);return r.off(e,o),l}o[_l]=n,this.on(e,t,o)};hn.prototype.off=function(e,t){e=Ie(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})};hn.prototype.createEvent=function(e){var t=new Ds;return t.init(e),t};hn.prototype.fire=function(e,t){var n,i,r,o;if(o=NS.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof Ds?n=t:n=this.createEvent(t),o[0]=n;var l=n.type;e!==l&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==l&&(n.type=l)}return r===void 0&&n.defaultPrevented&&(r=!1),r}};hn.prototype.handleError=function(e){return this.fire("error",{error:e})===!1};hn.prototype._destroy=function(){this._listeners={}};hn.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i};hn.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=BS(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i};hn.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t};hn.prototype._getListeners=function(e){return this._listeners[e]};hn.prototype._setListeners=function(e,t){this._listeners[e]=t};hn.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[_l]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function Ds(){}Ds.prototype.stopPropagation=function(){this.cancelBubble=!0};Ds.prototype.preventDefault=function(){this.defaultPrevented=!0};Ds.prototype.init=function(e){q(this,e||{})};function BS(e,t){return e.apply(null,t)}function zi(e){return e.childNodes[0]}function FS(e){return e.parentNode.childNodes[1]}function Ya(e,t,n,i,r){var o=is();o.setTranslate(t,n);var l=is();l.setRotate(i||0,0,0);var u=is();u.setScale(r||1,r||1),hs(e,[o,l,u])}function Ft(e,t,n){var i=is();i.setTranslate(t,n),hs(e,i)}function Ry(e,t){var n=is();n.setRotate(t,0,0),hs(e,n)}function bn(e,t){this._eventBus=e,this._elementRegistry=t}bn.$inject=["eventBus","elementRegistry"];bn.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=FS(t),n||(n=he("g"),Fe(n).add("djs-children"),me(t.parentNode,n))):n=t,n};bn.prototype._clear=function(e){var t=zi(e);return ql(t),t};bn.prototype._createContainer=function(e,t,n,i){var r=he("g");Fe(r).add("djs-group"),typeof n<"u"?My(r,t,t.childNodes[n]):me(t,r);var o=he("g");Fe(o).add("djs-element"),Fe(o).add("djs-"+e),i&&Fe(o).add("djs-frame"),me(r,o);var l=he("g");return Fe(l).add("djs-visual"),me(o,l),o};bn.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,dy(t))};bn.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=pn(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),J(i,function(r){var o=r.children;if(o){var l=t._getChildrenContainer(r);J(o.slice().reverse(),function(u){var s=n.getGraphics(u);My(s.parentNode,l)})}})};bn.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})};bn.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)};bn.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})};bn.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)};bn.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),Ft(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?ce(n,"display","none"):ce(n,"display","block")}};bn.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);ut(t.parentNode)};function My(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}const WS={__depends__:[sS],__init__:["canvas"],canvas:["type",Te],elementRegistry:["type",yn],elementFactory:["type",Si],eventBus:["type",hn],graphicsFactory:["type",bn]};function HS(e){var t=new cy(e);return t.init(),t}function jS(e){e=e||{};var t={config:["value",e]},n=[t,WS].concat(e.modules||[]);return HS(n)}function Mo(e,t){this._injector=t=t||jS(e),this.get=t.get,this.invoke=t.invoke,this.get("eventBus").fire("diagram.init")}Mo.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};Mo.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function Jp(){}Jp.prototype.get=function(e){return this.$model.properties.get(this,e)};Jp.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function ky(e,t){this.model=e,this.properties=t}ky.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(Jp.prototype);J(e.properties,function(l){!l.isMany&&l.default!==void 0&&(i[l.name]=l.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(l){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),J(l,tn(function(u,s){this.set(s,u)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var GS={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Iy={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function Qp(e,t){var n=Iy[e];return n?n(t):t}function Uu(e){return!!GS[e]}function Ly(e){return!!Iy[e]}function Xt(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function wn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}wn.prototype.build=function(){return Vn(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])};wn.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)};wn.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,l=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var u=r.indexOf(e);if(u===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(u,1),this.addProperty(t,n?void 0:u,l),o[i.name]=o[i.localName]=t};wn.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=Xt(r[0],i),l=Xt(r[1],o.prefix).name,u=this.propertiesByName[l];if(u)this.replaceProperty(u,e,n);else throw new Error("refined property <"+l+"> not found");delete e.redefines};wn.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e};wn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]};wn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e};wn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e};wn.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)};wn.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")};wn.prototype.hasProperty=function(e){return this.propertiesByName[e]};wn.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(J(e.properties,tn(function(o){o=q({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var l=o.replaces,u=o.redefines;l||u?this.redefineProperty(o,l||u,l):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function or(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,J(e,tn(this.registerPackage,this))}or.prototype.getPackage=function(e){return this.packageMap[e]};or.prototype.getPackages=function(){return this.packages};or.prototype.registerPackage=function(e){e=q({},e);var t=this.packageMap;yf(t,e,"prefix"),yf(t,e,"uri"),J(e.types,tn(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)};or.prototype.registerType=function(e,t){e=q({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:q(e.meta||{})});var n=Xt(e.name,t.prefix),i=n.name,r={};J(e.properties,tn(function(o){var l=Xt(o.name,n.prefix),u=l.name;Uu(o.type)||(o.type=Xt(o.type,l.prefix).name),q(o,{ns:l,name:u}),r[u]=o},this)),q(e,{ns:n,name:i,propertiesByName:r}),J(e.extends,tn(function(o){var l=Xt(o,n.prefix),u=this.typeMap[l.name];u.traits=u.traits||[],u.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e};or.prototype.mapTypes=function(e,t,n){var i=Uu(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(s,p){var a=Xt(s,Uu(s)?"":e.prefix);r.mapTypes(a,t,p)}function l(s){return o(s,!0)}function u(s){return o(s,!1)}if(!i)throw new Error("unknown type <"+e.name+">");J(i.superClass,n?l:u),t(i,!n),J(i.traits,l)};or.prototype.getEffectiveDescriptor=function(e){var t=Xt(e),n=new wn(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i};or.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function yf(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Yr(e){this.model=e}Yr.prototype.set=function(e,t,n){if(!un(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;VS(n)?i?delete e[r]:delete e.$attrs[Yu(t)]:i?r in e?e[r]=n:Py(e,i,n):e.$attrs[Yu(t)]=n};Yr.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[Yu(t)];var i=n.name;return!e[i]&&n.isMany&&Py(e,n,[]),e[i]};Yr.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=q({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)};Yr.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})};Yr.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};Yr.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r<"u"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console<"u"&&console.warn(o)}return null};function VS(e){return typeof e>"u"}function Py(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function Yu(e){return e.replace(/^:/,"")}function Mn(e,t={}){this.properties=new Yr(this),this.factory=new ky(this,this.properties),this.registry=new or(e,this.properties),this.typeCache={},this.config=t}Mn.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)};Mn.prototype.getType=function(e){var t=this.typeCache,n=un(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i};Mn.prototype.createAny=function(e,t,n){var i=Xt(e),r={$type:e,$instanceOf:function(l){return l===this.$type},get:function(l){return this[l]},set:function(l,u){F_(this,[l],u)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),J(n,function(l,u){Mt(l)&&l.value!==void 0?r[l.name]=l.value:r[u]=l}),r};Mn.prototype.getPackage=function(e){return this.registry.getPackage(e)};Mn.prototype.getPackages=function(){return this.registry.getPackages()};Mn.prototype.getElementDescriptor=function(e){return e.$descriptor};Mn.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName};Mn.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]};Mn.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var bf=String.fromCharCode,zS=Object.prototype.hasOwnProperty,US=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,os={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(os).forEach(function(e){os[e.toUpperCase()]=os[e]});function YS(e,t,n,i){return i?zS.call(os,i)?os[i]:"&"+i+";":bf(t||parseInt(n,16))}function _r(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(US,YS):e}var XS="http://www.w3.org/2001/XMLSchema-instance",ZS="xsi",wf="xsi:type",_f="non-whitespace outside of root node";function to(e){return new Error(e)}function Ef(e){return"missing namespace for prefix <"+e+">"}function ma(e){return{get:e,enumerable:!0}}function KS(e){var t={},n;for(n in e)t[n]=e[n];return t}function Xu(e){return e+"$uri"}function JS(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Xu(i)]=n;return t}function xf(){return{line:0,column:0}}function QS(e){throw e}function Dy(e){if(!this)return new Dy(e);var t=e&&e.proxy,n,i,r,o,l=QS,u,s,p,a,c=xf,h=!1,f=!1,d=null,m=!1,g;function y(b){b instanceof Error||(b=to(b)),d=b,l(b,c)}function w(b){u&&(b instanceof Error||(b=to(b)),u(b,c))}this.on=function(b,_){if(typeof _!="function")throw to("required args <name, cb>");switch(b){case"openTag":i=_;break;case"text":n=_;break;case"closeTag":r=_;break;case"error":l=_;break;case"warn":u=_;break;case"cdata":o=_;break;case"attention":a=_;break;case"question":p=_;break;case"comment":s=_;break;default:throw to("unsupported event: "+b)}return this},this.ns=function(b){if(typeof b>"u"&&(b={}),typeof b!="object")throw to("required args <nsMap={}>");var _={},v;for(v in b)_[v]=b[v];return _[XS]=ZS,f=!0,g=_,this},this.parse=function(b){if(typeof b!="string")throw to("required args <xml=string>");return d=null,S(b),c=xf,m=!1,d},this.stop=function(){m=!0};function S(b){var _=f?[]:null,v=f?JS(g):null,E,x=[],T=0,k=!1,$=!1,R=0,A=0,C,M,I,D,B,F,j,Z,Q,W="",V=0,G;function U(){if(G!==null)return G;var Y,O,L,P=f&&v.xmlns,z=f&&h?[]:null,K=V,te=W,ne=te.length,fe,_e,$e,ke,ze,Zn={},Pi={},It,ve,Ue;e:for(;K<ne;K++)if(It=!1,ve=te.charCodeAt(K),!(ve===32||ve<14&&ve>8)){for((ve<65||ve>122||ve>90&&ve<97)&&ve!==95&&ve!==58&&(w("illegal first char attribute name"),It=!0),Ue=K+1;Ue<ne;Ue++)if(ve=te.charCodeAt(Ue),!(ve>96&&ve<123||ve>64&&ve<91||ve>47&&ve<59||ve===46||ve===45||ve===95)){if(ve===32||ve<14&&ve>8){w("missing attribute value"),K=Ue;continue e}if(ve===61)break;w("illegal attribute name char"),It=!0}if(ze=te.substring(K,Ue),ze==="xmlns:xmlns"&&(w("illegal declaration of xmlns"),It=!0),ve=te.charCodeAt(Ue+1),ve===34)Ue=te.indexOf('"',K=Ue+2),Ue===-1&&(Ue=te.indexOf("'",K),Ue!==-1&&(w("attribute value quote missmatch"),It=!0));else if(ve===39)Ue=te.indexOf("'",K=Ue+2),Ue===-1&&(Ue=te.indexOf('"',K),Ue!==-1&&(w("attribute value quote missmatch"),It=!0));else for(w("missing attribute value quotes"),It=!0,Ue=Ue+1;Ue<ne&&(ve=te.charCodeAt(Ue+1),!(ve===32||ve<14&&ve>8));Ue++);for(Ue===-1&&(w("missing closing quotes"),Ue=ne,It=!0),It||($e=te.substring(K,Ue)),K=Ue;Ue+1<ne&&(ve=te.charCodeAt(Ue+1),!(ve===32||ve<14&&ve>8));Ue++)K===Ue&&(w("illegal character after attribute end"),It=!0);if(K=Ue+1,It)continue e;if(ze in Pi){w("attribute <"+ze+"> already defined");continue}if(Pi[ze]=!0,!f){Zn[ze]=$e;continue}if(h){if(_e=ze==="xmlns"?"xmlns":ze.charCodeAt(0)===120&&ze.substr(0,6)==="xmlns:"?ze.substr(6):null,_e!==null){if(Y=_r($e),O=Xu(_e),ke=g[Y],!ke){if(_e==="xmlns"||O in v&&v[O]!==Y)do ke="ns"+T++;while(typeof v[ke]<"u");else ke=_e;g[Y]=ke}v[_e]!==ke&&(fe||(v=KS(v),fe=!0),v[_e]=ke,_e==="xmlns"&&(v[Xu(ke)]=Y,P=ke),v[O]=Y),Zn[ze]=$e;continue}z.push(ze,$e);continue}if(ve=ze.indexOf(":"),ve===-1){Zn[ze]=$e;continue}if(!(L=v[ze.substring(0,ve)])){w(Ef(ze.substring(0,ve)));continue}ze=P===L?ze.substr(ve+1):L+ze.substr(ve),ze===wf&&(ve=$e.indexOf(":"),ve!==-1?(L=$e.substring(0,ve),L=v[L]||L,$e=L+$e.substring(ve)):$e=P+":"+$e),Zn[ze]=$e}if(h)for(K=0,ne=z.length;K<ne;K++){if(ze=z[K++],$e=z[K],ve=ze.indexOf(":"),ve!==-1){if(!(L=v[ze.substring(0,ve)])){w(Ef(ze.substring(0,ve)));continue}ze=P===L?ze.substr(ve+1):L+ze.substr(ve),ze===wf&&(ve=$e.indexOf(":"),ve!==-1?(L=$e.substring(0,ve),L=v[L]||L,$e=L+$e.substring(ve)):$e=P+":"+$e)}Zn[ze]=$e}return G=Zn}function ee(){for(var Y=/(\r\n|\r|\n)/g,O=0,L=0,P=0,z=A,K,te;R>=P&&(K=Y.exec(b),!(!K||(z=K[0].length+K.index,z>R)));)O+=1,P=z;return R==-1?(L=z,te=b.substring(A)):A===0?te=b.substring(A,R):(L=R-P,te=A==-1?b.substring(R):b.substring(R,A+1)),{data:te,line:O,column:L}}for(c=ee,t&&(Q=Object.create({},{name:ma(function(){return j}),originalName:ma(function(){return Z}),attrs:ma(U),ns:ma(function(){return v})}));A!==-1;){if(b.charCodeAt(A)===60?R=A:R=b.indexOf("<",A),R===-1){if(x.length)return y("unexpected end of file");if(A===0)return y("missing start tag");A<b.length&&b.substring(A).trim()&&w(_f);return}if(A!==R){if(x.length){if(n&&(n(b.substring(A,R),_r,c),m))return}else if(b.substring(A,R).trim()&&(w(_f),m))return}if(D=b.charCodeAt(R+1),D===33){if(I=b.charCodeAt(R+2),I===91&&b.substr(R+3,6)==="CDATA["){if(A=b.indexOf("]]>",R),A===-1)return y("unclosed cdata");if(o&&(o(b.substring(R+9,A),c),m))return;A+=3;continue}if(I===45&&b.charCodeAt(R+3)===45){if(A=b.indexOf("-->",R),A===-1)return y("unclosed comment");if(s&&(s(b.substring(R+4,A),_r,c),m))return;A+=3;continue}}if(D===63){if(A=b.indexOf("?>",R),A===-1)return y("unclosed question");if(p&&(p(b.substring(R,A+2),c),m))return;A+=2;continue}for(C=R+1;;C++){if(B=b.charCodeAt(C),isNaN(B))return A=-1,y("unclosed tag");if(B===34)I=b.indexOf('"',C+1),C=I!==-1?I:C;else if(B===39)I=b.indexOf("'",C+1),C=I!==-1?I:C;else if(B===62){A=C;break}}if(D===33){if(a&&(a(b.substring(R,A+1),_r,c),m))return;A+=1;continue}if(G={},D===47){if(k=!1,$=!0,!x.length)return y("missing open tag");if(C=j=x.pop(),I=R+2+C.length,b.substring(R+2,I)!==C)return y("closing tag mismatch");for(;I<A;I++)if(D=b.charCodeAt(I),!(D===32||D>8&&D<14))return y("close tag")}else{if(b.charCodeAt(A-1)===47?(C=j=b.substring(R+1,A-1),k=!0,$=!0):(C=j=b.substring(R+1,A),k=!0,$=!1),!(D>96&&D<123||D>64&&D<91||D===95||D===58))return y("illegal first char nodeName");for(I=1,M=C.length;I<M;I++)if(D=C.charCodeAt(I),!(D>96&&D<123||D>64&&D<91||D>47&&D<59||D===45||D===95||D==46)){if(D===32||D<14&&D>8){j=C.substring(0,I),G=null;break}return y("invalid nodeName")}$||x.push(j)}if(f){if(E=v,k&&($||_.push(E),G===null&&(h=C.indexOf("xmlns",I)!==-1)&&(V=I,W=C,U(),h=!1)),Z=j,D=j.indexOf(":"),D!==-1){if(F=v[j.substring(0,D)],!F)return y("missing namespace on <"+Z+">");j=j.substr(D+1)}else F=v.xmlns;F&&(j=F+":"+j)}if(k&&(V=I,W=C,i&&(t?i(Q,_r,$,c):i(j,U,_r,$,c),m)))return;if($){if(r&&(r(t?Q:j,_r,k,c),m))return;f&&(k?v=E:v=_.pop())}A+=1}}}function Oy(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var qS={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},ic="xsi:type";function Ny(e){return e.xml&&e.xml.serialize}function By(e){return Ny(e)===ic}function eC(e){return Ny(e)==="property"}function tC(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Fy(e,t){return Oy(t)?e.prefix+":"+tC(e.localName):e.name}function nC(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function iC(e,t){var n=Xt(e),i=t.getPackage(n.prefix);return nC(n,i)}function Ji(e){return new Error(e)}function gi(e){return e.$descriptor}function rC(e){q(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw Ji("expected element");var n=this.elementsById,i=gi(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw Ji("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Os(){}Os.prototype.handleEnd=function(){};Os.prototype.handleText=function(){};Os.prototype.handleNode=function(){};function qp(){}qp.prototype=Object.create(Os.prototype);qp.prototype.handleNode=function(){return this};function ko(){}ko.prototype=Object.create(Os.prototype);ko.prototype.handleText=function(e){this.body=(this.body||"")+e};function Ns(e,t){this.property=e,this.context=t}Ns.prototype=Object.create(ko.prototype);Ns.prototype.handleNode=function(e){if(this.element)throw Ji("expected no sub nodes");return this.element=this.createReference(e),this};Ns.prototype.handleEnd=function(){this.element.id=this.body};Ns.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function eh(e,t){this.element=t,this.propertyDesc=e}eh.prototype=Object.create(ko.prototype);eh.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=Qp(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function rc(){}rc.prototype=Object.create(ko.prototype);rc.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function Jt(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}Jt.prototype=Object.create(rc.prototype);Jt.prototype.addReference=function(e){this.context.addReference(e)};Jt.prototype.handleText=function(e){var t=this.element,n=gi(t),i=n.bodyProperty;if(!i)throw Ji("unexpected body text <"+e+">");ko.prototype.handleText.call(this,e)};Jt.prototype.handleEnd=function(){var e=this.body,t=this.element,n=gi(t),i=n.bodyProperty;i&&e!==void 0&&(e=Qp(i.type,e),t.set(i.name,e))};Jt.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=gi(n),r=this.context,o=new n({}),l=this.model,u;return J(t,function(s,p){var a=i.propertiesByName[p],c;a&&a.isReference?a.isMany?(c=s.split(" "),J(c,function(h){r.addReference({element:o,property:a.ns.name,id:h})})):r.addReference({element:o,property:a.ns.name,id:s}):(a?s=Qp(a.type,s):p!=="xmlns"&&(u=Xt(p,i.ns.prefix),l.getPackage(u.prefix)&&r.addWarning({message:"unknown attribute <"+p+">",element:o,property:p,value:s})),o.set(p,s))}),o};Jt.prototype.getPropertyForNode=function(e){var t=e.name,n=Xt(t),i=this.type,r=this.model,o=gi(i),l=n.name,u=o.propertiesByName[l],s,p;if(u&&!u.isAttr)return By(u)&&(s=e.attributes[ic],s)?(s=iC(s,r),p=r.getType(s),q({},u,{effectiveType:gi(p).name})):u;var a=r.getPackage(n.prefix);if(a){if(s=Fy(n,a),p=r.getType(s),u=je(o.properties,function(c){return!c.isVirtual&&!c.isReference&&!c.isAttribute&&p.hasType(c.type)}),u)return q({},u,{effectiveType:gi(p).name})}else if(u=je(o.properties,function(c){return!c.isReference&&!c.isAttribute&&c.type==="Element"}),u)return u;throw Ji("unrecognized element <"+n.name+">")};Jt.prototype.toString=function(){return"ElementDescriptor["+gi(this.type).name+"]"};Jt.prototype.valueHandler=function(e,t){return new eh(e,t)};Jt.prototype.referenceHandler=function(e){return new Ns(e,this.context)};Jt.prototype.handler=function(e){return e==="Element"?new mo(this.model,e,this.context):new Jt(this.model,e,this.context)};Jt.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,Ly(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(q(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function th(e,t,n){Jt.call(this,e,t,n)}th.prototype=Object.create(Jt.prototype);th.prototype.createElement=function(e){var t=e.name,n=Xt(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),l=o&&Fy(n,o)||t;if(!r.hasType(l))throw Ji("unexpected element <"+e.originalName+">");return Jt.prototype.createElement.call(this,e)};function mo(e,t,n){this.model=e,this.context=n}mo.prototype=Object.create(rc.prototype);mo.prototype.createElement=function(e){var t=e.name,n=Xt(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)};mo.prototype.handleChild=function(e){var t=new mo(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t};mo.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function nh(e){e instanceof Mn&&(e={model:e}),q(this,{lax:!1},e)}nh.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof Jt?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,l=new rC(q({},t,{rootHandler:i})),u=new Dy({proxy:!0}),s=oC();i.context=l,s.push(i);function p(_,v,E){var x=v(),T=x.line,k=x.column,$=x.data;$.charAt(0)==="<"&&$.indexOf(" ")!==-1&&($=$.slice(0,$.indexOf(" "))+">");var R="unparsable content "+($?$+" ":"")+`detected
	line: `+T+`
	column: `+k+`
	nested error: `+_.message;if(E)return l.addWarning({message:R,error:_}),!0;throw Ji(R)}function a(_,v){return p(_,v,!0)}function c(){var _=l.elementsById,v=l.references,E,x;for(E=0;x=v[E];E++){var T=x.element,k=_[x.id],$=gi(T).propertiesByName[x.property];if(k||l.addWarning({message:"unresolved reference <"+x.id+">",element:x.element,property:x.property,value:x.id}),$.isMany){var R=T.get($.name),A=R.indexOf(x);A===-1&&(A=R.length),k?R[A]=k:R.splice(A,1)}else T.set($.name,k)}}function h(){s.pop().handleEnd()}var f=/^<\?xml /i,d=/ encoding="([^"]+)"/i,m=/^utf-8$/i;function g(_){if(f.test(_)){var v=d.exec(_),E=v&&v[1];!E||m.test(E)||l.addWarning({message:"unsupported document encoding <"+E+">, falling back to UTF-8"})}}function y(_,v){var E=s.peek();try{s.push(E.handleNode(_))}catch(x){p(x,v,o)&&s.push(new qp)}}function w(_,v){try{s.peek().handleText(_)}catch(E){a(E,v)}}function S(_,v){_.trim()&&w(_,v)}var b=r.getPackages().reduce(function(_,v){return _[v.uri]=v.prefix,_},{"http://www.w3.org/XML/1998/namespace":"xml"});return u.ns(b).on("openTag",function(_,v,E,x){var T=_.attrs||{},k=Object.keys(T).reduce(function(R,A){var C=v(T[A]);return R[A]=C,R},{}),$={name:_.name,originalName:_.originalName,attributes:k,ns:_.ns};y($,x)}).on("question",g).on("closeTag",h).on("cdata",w).on("text",function(_,v,E){S(v(_),E)}).on("error",p).on("warn",a),new Promise(function(_,v){var E;try{u.parse(e),c()}catch(R){E=R}var x=i.element;!E&&!x&&(E=Ji("failed to parse document as <"+i.type.$descriptor.name+">"));var T=l.warnings,k=l.references,$=l.elementsById;return E?(E.warnings=T,v(E)):_({rootElement:x,elementsById:$,references:k,warnings:T})})};nh.prototype.handler=function(e){return new th(this.model,e)};function oC(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var sC=`<?xml version="1.0" encoding="UTF-8"?>
`,aC=/<|>|'|"|&|\n\r|\n/g,Wy=/<|>|&/g;function lC(e){var t={},n={},i={},r=[],o=[];this.byUri=function(l){return n[l]||e&&e.byUri(l)},this.add=function(l,u){n[l.uri]=l,u?r.push(l):o.push(l),this.mapPrefix(l.prefix,l.uri)},this.uriByPrefix=function(l){return t[l||"xmlns"]},this.mapPrefix=function(l,u){t[l||"xmlns"]=u},this.getNSKey=function(l){return l.prefix!==void 0?l.uri+"|"+l.prefix:l.uri},this.logUsed=function(l){var u=l.uri,s=this.getNSKey(l);i[s]=this.byUri(u),e&&e.logUsed(l)},this.getUsed=function(l){function u(a){var c=s.getNSKey(a);return i[c]}var s=this,p=[].concat(r,o);return p.filter(u)}}function cC(e){return e.charAt(0).toLowerCase()+e.slice(1)}function uC(e,t){return Oy(t)?cC(e):e}function Hy(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function jy(e){return un(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function pC(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function hC(e,t){return t.isGeneric?q({localName:t.ns.localName},e):q({localName:uC(t.ns.localName,t.$pkg)},e)}function dC(e,t){return q({localName:t.ns.localName},e)}function fC(e){var t=e.$descriptor;return Re(t.properties,function(n){var i=n.name;if(n.isVirtual||!en(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var mC={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},gC={"<":"lt",">":"gt","&":"amp"};function Gy(e,t,n){return e=un(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function vC(e){return Gy(e,aC,mC)}function yC(e){return Gy(e,Wy,gC)}function bC(e){return Re(e,function(t){return t.isAttr})}function wC(e){return Re(e,function(t){return!t.isAttr})}function ih(e){this.tagName=e}ih.prototype.build=function(e){return this.element=e,this};ih.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Pr(){}Pr.prototype.serializeValue=Pr.prototype.serializeTo=function(e){e.append(this.escape?yC(this.value):this.value)};Pr.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Wy)!==-1&&(this.escape=!0),this};function rh(e){this.tagName=e}Hy(rh,Pr);rh.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function rt(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}rt.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(r=fC(e),this.parseAttributes(bC(r)),this.parseContainments(wC(r))),this.parseGenericAttributes(e,i),this};rt.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return hC(t,e)};rt.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return dC(t,e)};rt.prototype.isLocalNs=function(e){return e.uri===this.ns.uri};rt.prototype.nsAttributeName=function(e){var t;if(un(e)?t=Xt(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:q({localName:t.localName},n)};rt.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return J(e,function(r,o){var l;o==="$body"?n.push(new Pr().build({type:"String"},r)):o==="$children"?J(r,function(u){n.push(new rt(t).build(u))}):o.indexOf("$")!==0&&(l=t.parseNsAttribute(e,o,r),l&&i.push({name:o,value:r}))}),i};rt.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=Xt(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var l=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(l)}};rt.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return J(i,function(o,l){var u=n.parseNsAttribute(e,l,o);u&&r.push(u)}),r};rt.prototype.parseGenericAttributes=function(e,t){var n=this;J(t,function(i){if(i.name!==ic)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})};rt.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;J(e,function(r){var o=i.get(r.name),l=r.isReference,u=r.isMany;if(u||(o=[o]),r.isBody)n.push(new Pr().build(r,o[0]));else if(Ly(r.type))J(o,function(a){n.push(new rh(t.addTagName(t.nsPropertyTagName(r))).build(r,a))});else if(l)J(o,function(a){n.push(new ih(t.addTagName(t.nsPropertyTagName(r))).build(a))});else{var s=By(r),p=eC(r);J(o,function(a){var c;s?c=new oc(t,r):p?c=new rt(t,r):c=new rt(t),n.push(c.build(a))})}})};rt.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new lC(i):t=i),t};rt.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,l=i.byUri(r);return(!l||n)&&i.add(e,t),i.mapPrefix(o,r),e};rt.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),o=e.prefix,l=e.uri,u,s,p;if(!o&&!l)return{localName:e.localName};if(p=qS[o]||i&&(i.getPackage(o)||{}).uri,l=l||p||r.uriByPrefix(o),!l)throw new Error("no namespace uri given for prefix <"+o+">");if(e=r.byUri(l),!e){for(u=o,s=1;r.uriByPrefix(u);)u=o+"_"+s++;e=this.logNamespace({prefix:u,uri:l},p===l)}return o&&r.mapPrefix(o,l),e};rt.prototype.parseAttributes=function(e){var t=this,n=this.element;J(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];J(r,function(l){o.push(l.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})};rt.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),jy(e)};rt.prototype.addAttribute=function(e,t){var n=this.attrs;un(t)&&(t=vC(t));var i=mv(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)};rt.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=pC(n).concat(t)),J(t,function(i){e.append(" ").append(jy(i.name)).append('="').append(i.value).append('"')})};rt.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Pr;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),J(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function oc(e,t){rt.call(this,e,t)}Hy(oc,rt);oc.prototype.parseNsAttributes=function(e){var t=rt.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(ic),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t};oc.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function _C(){this.value="",this.write=function(e){this.value+=e}}function EC(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function xC(e){e=q({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new _C,o=new EC(r,e.format);if(e.preamble&&o.append(sC),new rt().build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function sc(e,t){Mn.call(this,e,t)}sc.prototype=Object.create(Mn.prototype);sc.prototype.fromXML=function(e,t,n){un(t)||(n=t,t="bpmn:Definitions");var i=new nh(q({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)};sc.prototype.toXML=function(e,t){var n=new xC(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(l){return r(l)}})};var SC="BPMN20",CC="http://www.omg.org/spec/BPMN/20100524/MODEL",AC="bpmn",TC=[],$C=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],RC=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],MC={tagAlias:"lowerCase",typePrefix:"t"},kC={name:SC,uri:CC,prefix:AC,associations:TC,types:$C,enumerations:RC,xml:MC},IC="BPMNDI",LC="http://www.omg.org/spec/BPMN/20100524/DI",PC="bpmndi",DC=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],OC=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],NC=[],BC={name:IC,uri:LC,prefix:PC,types:DC,enumerations:OC,associations:NC},FC="DC",WC="http://www.omg.org/spec/DD/20100524/DC",HC="dc",jC=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],GC=[],VC={name:FC,uri:WC,prefix:HC,types:jC,associations:GC},zC="DI",UC="http://www.omg.org/spec/DD/20100524/DI",YC="di",XC=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],ZC=[],KC={tagAlias:"lowerCase"},JC={name:zC,uri:UC,prefix:YC,types:XC,associations:ZC,xml:KC},QC="bpmn.io colors for BPMN",qC="http://bpmn.io/schema/bpmn/biocolor/1.0",eA="bioc",tA=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],nA=[],iA=[],rA={name:QC,uri:qC,prefix:eA,types:tA,enumerations:nA,associations:iA},oA="BPMN in Color",sA="http://www.omg.org/spec/BPMN/non-normative/color/1.0",aA="color",lA=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],cA=[],uA=[],pA={name:oA,uri:sA,prefix:aA,types:lA,enumerations:cA,associations:uA},hA={bpmn:kC,bpmndi:BC,dc:VC,di:JC,bioc:rA,color:pA};function dA(e,t){var n=q({},hA,e);return new sc(n,t)}function Gt(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var fA="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Vy(e){en(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(fA)}})}function qt(e,t){return e.$instanceOf(t)}function mA(e){return je(e.rootElements,function(t){return qt(t,"bpmn:Process")||qt(t,"bpmn:Collaboration")})}function gA(e,t){var n={},i=[],r={};function o(W,V){return function(G){W(G,V)}}function l(W){n[W.id]=W}function u(W){return n[W.id]}function s(W,V){var G=W.gfx;if(G)throw new Error(t("already rendered {element}",{element:Gt(W)}));return e.element(W,r[W.id],V)}function p(W,V){return e.root(W,r[W.id],V)}function a(W,V){try{var G=r[W.id]&&s(W,V);return l(W),G}catch(U){c(U.message,{element:W,error:U}),console.error(t("failed to import {element}",{element:Gt(W)})),console.error(U)}}function c(W,V){e.error(W,V)}var h=this.registerDi=function(V){var G=V.bpmnElement;G?r[G.id]?c(t("multiple DI elements defined for {element}",{element:Gt(G)}),{element:G}):(r[G.id]=V,Vy(G)):c(t("no bpmnElement referenced in {element}",{element:Gt(V)}),{element:V})};function f(W){d(W.plane)}function d(W){h(W),J(W.planeElement,m)}function m(W){h(W)}this.handleDefinitions=function(V,G){var U=V.diagrams;if(G&&U.indexOf(G)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!G&&U&&U.length&&(G=U[0]),!G)throw new Error(t("no diagram to display"));r={},f(G);var ee=G.plane;if(!ee)throw new Error(t("no plane for {element}",{element:Gt(G)}));var Y=ee.bpmnElement;if(!Y)if(Y=mA(V),Y)c(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:Gt(ee),rootElement:Gt(Y)})),ee.bpmnElement=Y,h(ee);else throw new Error(t("no process or collaboration to display"));var O=p(Y,ee);if(qt(Y,"bpmn:Process")||qt(Y,"bpmn:SubProcess"))y(Y,O);else if(qt(Y,"bpmn:Collaboration"))Z(Y,O),w(V.rootElements,O);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:Gt(ee),rootElement:Gt(Y)}));g(i)};var g=this.handleDeferred=function(){for(var V;i.length;)V=i.shift(),V()};function y(W,V){B(W,V),k(W.ioSpecification,V),T(W.artifacts,V),l(W)}function w(W,V){var G=Re(W,function(U){return!u(U)&&qt(U,"bpmn:Process")&&U.laneSets});G.forEach(o(y,V))}function S(W,V){a(W,V)}function b(W,V){J(W,o(S,V))}function _(W,V){a(W,V)}function v(W,V){a(W,V)}function E(W,V){a(W,V)}function x(W,V){a(W,V)}function T(W,V){J(W,function(G){qt(G,"bpmn:Association")?i.push(function(){x(G,V)}):x(G,V)})}function k(W,V){W&&(J(W.dataInputs,o(v,V)),J(W.dataOutputs,o(E,V)))}var $=this.handleSubProcess=function(V,G){B(V,G),T(V.artifacts,G)};function R(W,V){var G=a(W,V);qt(W,"bpmn:SubProcess")&&$(W,G||V),qt(W,"bpmn:Activity")&&k(W.ioSpecification,V),i.push(function(){J(W.dataInputAssociations,o(_,V)),J(W.dataOutputAssociations,o(_,V))})}function A(W,V){a(W,V)}function C(W,V){a(W,V)}function M(W,V){i.push(function(){var G=a(W,V);W.childLaneSet&&I(W.childLaneSet,G||V),Q(W)})}function I(W,V){J(W.lanes,o(M,V))}function D(W,V){J(W,o(I,V))}function B(W,V){F(W.flowElements,V),W.laneSets&&D(W.laneSets,V)}function F(W,V){J(W,function(G){qt(G,"bpmn:SequenceFlow")?i.push(function(){A(G,V)}):qt(G,"bpmn:BoundaryEvent")?i.unshift(function(){R(G,V)}):qt(G,"bpmn:FlowNode")?R(G,V):qt(G,"bpmn:DataObject")||(qt(G,"bpmn:DataStoreReference")||qt(G,"bpmn:DataObjectReference")?C(G,V):c(t("unrecognized flowElement {element} in context {context}",{element:Gt(G),context:V?Gt(V.businessObject):"null"}),{element:G,context:V}))})}function j(W,V){var G=a(W,V),U=W.processRef;U&&y(U,G||V)}function Z(W,V){J(W.participants,o(j,V)),T(W.artifacts,V),i.push(function(){b(W.messageFlows,V)})}function Q(W){J(W.flowNodeRef,function(V){var G=V.get("lanes");G&&G.push(W)})}}function vA(e,t,n){var i,r,o,l,u,s=[];function p(a,c){var h={root:function(g,y){return i.add(g,y)},element:function(g,y,w){return i.add(g,y,w)},error:function(g,y){s.push({message:g,context:y})}},f=new gA(h,o);c=c||a.diagrams&&a.diagrams[0];var d=yA(a,c);if(!d)throw new Error(o("no diagram to display"));J(d,function(g){f.handleDefinitions(a,g)});var m=c.plane.bpmnElement.id;l.setRootElement(l.findRoot(m+"_plane")||l.findRoot(m))}return new Promise(function(a,c){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("translate"),l=e.get("canvas"),r.fire("import.render.start",{definitions:t}),p(t,n),r.fire("import.render.complete",{error:u,warnings:s}),a({warnings:s})}catch(h){return h.warnings=s,c(h)}})}function yA(e,t){if(t){var n=t.plane.bpmnElement,i=n;!N(n,"bpmn:Process")&&!N(n,"bpmn:Collaboration")&&(i=bA(n));var r;N(i,"bpmn:Collaboration")?r=i:r=je(e.rootElements,function(p){if(N(p,"bpmn:Collaboration"))return je(p.participants,function(a){return a.processRef===i})});var o=[i];r&&(o=Pt(r.participants,function(p){return p.processRef}),o.push(r));var l=zy(o),u=[t],s=[n];return J(e.diagrams,function(p){var a=p.plane.bpmnElement;l.indexOf(a)!==-1&&s.indexOf(a)===-1&&(u.push(p),s.push(a))}),u}}function zy(e){var t=[];return J(e,function(n){n&&(t.push(n),t=t.concat(zy(n.flowElements)))}),t}function bA(e){for(var t=e;t;){if(N(t,"bpmn:Process"))return t;t=t.$parent}}var wA='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Uy=wA,Yy={verticalAlign:"middle"},Xy={color:"#404040"},_A={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},EA={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},xA={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},SA='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Uy+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',ni;function CA(){ni=tt(SA),Nt(ni,_A),Nt(Ke("svg",ni),Yy),Nt(Ke(".backdrop",ni),EA),Nt(Ke(".notice",ni),xA),Nt(Ke(".link",ni),Xy,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function AA(){ni||(CA(),cn.bind(ni,".backdrop","click",function(e){document.body.removeChild(ni)})),document.body.appendChild(ni)}function ot(e){e=q({},$A,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),MA(this._container),this._init(this._container,this._moddle,e)}de(ot,Mo);ot.prototype.importXML=async function(t,n){const i=this;function r(l){return i.get("eventBus").createEvent(l)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let l;try{l=await this._moddle.fromXML(t,"bpmn:Definitions")}catch(h){throw this._emit("import.parse.complete",{error:h}),h}let u=l.rootElement;const s=l.references,p=l.warnings,a=l.elementsById;o=o.concat(p),u=this._emit("import.parse.complete",r({error:null,definitions:u,elementsById:a,references:s,warnings:o}))||u;const c=await this.importDefinitions(u,n);return o=o.concat(c.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(l){let u=l;throw o=o.concat(u.warnings||[]),Xa(u,o),u=TA(u),this._emit("import.done",{error:u,warnings:u.warnings}),u}};ot.prototype.importDefinitions=async function(t,n){return this._setDefinitions(t),{warnings:(await this.open(n)).warnings}};ot.prototype.open=async function(t){const n=this._definitions;let i=t;if(!n){const o=new Error("no XML imported");throw Xa(o,[]),o}if(typeof t=="string"&&(i=RA(n,t),!i)){const o=new Error("BPMNDiagram <"+t+"> not found");throw Xa(o,[]),o}try{this.clear()}catch(o){throw Xa(o,[]),o}const{warnings:r}=await vA(this,n,i);return{warnings:r}};ot.prototype.saveXML=async function(t){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(await this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(l){i=l}const o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o};ot.prototype.saveSVG=async function(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),o=Ke("defs",i._svg),l=rf(r),u=o?"<defs>"+rf(o)+"</defs>":"",s=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+s.width+'" height="'+s.height+'" viewBox="'+s.x+" "+s.y+" "+s.width+" "+s.height+'" version="1.1">'+u+l+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}};ot.prototype._setDefinitions=function(e){this._definitions=e};ot.prototype.getModules=function(){return this._modules};ot.prototype.clear=function(){this.getDefinitions()&&Mo.prototype.clear.call(this)};ot.prototype.destroy=function(){Mo.prototype.destroy.call(this),ri(this._container)};ot.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)};ot.prototype.off=function(e,t){this.get("eventBus").off(e,t)};ot.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=Ke(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()};ot.prototype.getDefinitions=function(){return this._definitions};ot.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))};ot.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],l=[].concat(o,i,r),u=q(si(n,["additionalModules"]),{canvas:q({},n.canvas,{container:e}),modules:l});Mo.call(this,u),n&&n.container&&this.attachTo(n.container)};ot.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)};ot.prototype._createContainer=function(e){const t=tt('<div class="bjs-container"></div>');return Nt(t,{width:Sf(e.width),height:Sf(e.height),position:e.position}),t};ot.prototype._createModdle=function(e){const t=q({},this._moddleExtensions,e.moddleExtensions);return new dA(t)};ot.prototype._modules=[];function Xa(e,t){return e.warnings=t,e}function TA(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const $A={width:"100%",height:"100%",position:"relative"};function Sf(e){return e+(Se(e)?"px":"")}function RA(e,t){return t&&je(e.diagrams,function(n){return n.id===t})||null}function MA(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Uy+"</a>",i=tt(n);Nt(Ke("svg",i),Yy),Nt(i,Xy,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),we.bind(i,"click",function(r){AA(),r.preventDefault()})}function Bs(e){ot.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}de(Bs,ot);Bs.prototype._createModdle=function(e){var t=ot.prototype._createModdle.call(this,e);return t.ids=new jn([32,36,1]),t};Bs.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function Ne(e,t){return N(e,"bpmn:CallActivity")?!1:N(e,"bpmn:SubProcess")?(t=t||He(e),t&&N(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):N(e,"bpmn:Participant")?!!re(e).processRef:!0}function An(e){if(!(!N(e,"bpmn:Participant")&&!N(e,"bpmn:Lane"))){var t=He(e).isHorizontal;return t===void 0?!0:t}}function kA(e){return e&&re(e).isInterrupting!==!1}function Vt(e){return e&&!!re(e).triggeredByEvent}function Fs(e,t){var n=re(e).eventDefinitions;return Ut(n,function(i){return N(i,t)})}function IA(e){return Fs(e,"bpmn:ErrorEventDefinition")}function LA(e){return Fs(e,"bpmn:EscalationEventDefinition")}function PA(e){return Fs(e,"bpmn:CompensateEventDefinition")}var ds={width:90,height:20},Cf=15;function Dr(e){return N(e,"bpmn:Event")||N(e,"bpmn:Gateway")||N(e,"bpmn:DataStoreReference")||N(e,"bpmn:DataObjectReference")||N(e,"bpmn:DataInput")||N(e,"bpmn:DataOutput")||N(e,"bpmn:SequenceFlow")||N(e,"bpmn:MessageFlow")||N(e,"bpmn:Group")}function ac(e){return Ve(e.label)}function DA(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=OA(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),l=r.x,u=r.y;return Math.abs(o)<Math.PI/2?u-=Cf:l+=Cf,{x:l,y:u}}function OA(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function oh(e){return e.waypoints?DA(e.waypoints):N(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+ds.height/2}:{x:e.x+e.width/2,y:e.y+e.height+ds.height/2}}function NA(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(ds.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=oh(t),i=ds),q({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Zy(e){if(N(e,"bpmn:FlowElement")||N(e,"bpmn:Participant")||N(e,"bpmn:Lane")||N(e,"bpmn:SequenceFlow")||N(e,"bpmn:MessageFlow")||N(e,"bpmn:DataInput")||N(e,"bpmn:DataOutput"))return"name";if(N(e,"bpmn:TextAnnotation"))return"text";if(N(e,"bpmn:Group"))return"categoryValueRef"}function BA(e){var t=e.categoryValueRef;return t&&t.value||""}function Tn(e){var t=e.businessObject,n=Zy(t);if(n)return n==="categoryValueRef"?BA(t):t[n]||""}function FA(e,t){var n=e.businessObject,i=Zy(n);return i&&(i==="categoryValueRef"?n.categoryValueRef.value=t:n[i]=t),e}var Zu="hsl(225, 10%, 15%)",WA="white";function Kn(e,t){return Ut(e.eventDefinitions,function(n){return n.$type===t})}function HA(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function jA(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function Pe(e,t,n){var i=He(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||WA}function pe(e,t,n){var i=He(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||Zu}function zo(e,t,n,i){var r=He(e),o=r.get("label");return i||o&&o.get("color:color")||t||pe(e,n)}function GA(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return zr(r)}function VA(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,l=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return zr(l)}function zA(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,l=n/2,u=[["M",i+o,r],["l",o,l],["l",-o,l],["l",-o,-l],["z"]];return zr(u)}function UA(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return zr(o)}function Uo(e,t={}){return{width:En(e,t),height:ln(e,t)}}function En(e,t={}){return en(t,"width")?t.width:e.width}function ln(e,t={}){return en(t,"height")?t.height:e.height}var YA=new jn,XA=10,ga=3,ZA=1.5,Za=10,no=.95,KA=1,JA=.25;function Xr(e,t,n,i,r,o,l){xi.call(this,t,l);var u=e&&e.defaultFillColor,s=e&&e.defaultStrokeColor,p=e&&e.defaultLabelColor,a=YA.next(),c={};function h(O){return n.computeStyle(O,{strokeLinecap:"round",strokeLinejoin:"round",stroke:Zu,strokeWidth:2,fill:"white"})}function f(O){return n.computeStyle(O,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:Zu,strokeWidth:2})}function d(O,L){var{ref:P={x:0,y:0},scale:z=1,element:K}=L,te=he("marker",{id:O,viewBox:"0 0 20 20",refX:P.x,refY:P.y,markerWidth:20*z,markerHeight:20*z,orient:"auto"});me(te,K);var ne=Ke("defs",r._svg);ne||(ne=he("defs"),me(r._svg,ne)),me(ne,te),c[O]=te}function m(O){return O.replace(/[^0-9a-zA-Z]+/g,"_")}function g(O,L,P){var z=O+"-"+m(L)+"-"+m(P)+"-"+a;return c[z]||y(z,O,L,P),"url(#"+z+")"}function y(O,L,P,z){if(L==="sequenceflow-end"){var K=he("path",{d:"M 1 5 L 11 10 L 1 15 Z",...h({fill:z,stroke:z,strokeWidth:1})});d(O,{element:K,ref:{x:11,y:10},scale:.5})}if(L==="messageflow-start"){var te=he("circle",{cx:6,cy:6,r:3.5,...h({fill:P,stroke:z,strokeWidth:1,strokeDasharray:[1e4,1]})});d(O,{element:te,ref:{x:6,y:6}})}if(L==="messageflow-end"){var ne=he("path",{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z",...h({fill:P,stroke:z,strokeWidth:1,strokeDasharray:[1e4,1]})});d(O,{element:ne,ref:{x:8.5,y:5}})}if(L==="association-start"){var fe=he("path",{d:"M 11 5 L 1 10 L 11 15",...f({fill:"none",stroke:z,strokeWidth:1.5,strokeDasharray:[1e4,1]})});d(O,{element:fe,ref:{x:1,y:10},scale:.5})}if(L==="association-end"){var _e=he("path",{d:"M 1 5 L 11 10 L 1 15",...f({fill:"none",stroke:z,strokeWidth:1.5,strokeDasharray:[1e4,1]})});d(O,{element:_e,ref:{x:11,y:10},scale:.5})}if(L==="conditional-flow-marker"){var $e=he("path",{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z",...h({fill:P,stroke:z})});d(O,{element:$e,ref:{x:-1,y:10},scale:.5})}if(L==="conditional-default-flow-marker"){var ke=he("path",{d:"M 6 4 L 10 16",...h({stroke:z})});d(O,{element:ke,ref:{x:0,y:10},scale:.5})}}function w(O,L,P,z,K={}){Mt(z)&&(K=z,z=0),z=z||0,K=h(K);var te=L/2,ne=P/2,fe=he("circle",{cx:te,cy:ne,r:Math.round((L+P)/4-z),...K});return me(O,fe),fe}function S(O,L,P,z,K,te){Mt(K)&&(te=K,K=0),K=K||0,te=h(te);var ne=he("rect",{x:K,y:K,width:L-K*2,height:P-K*2,rx:z,ry:z,...te});return me(O,ne),ne}function b(O,L,P,z){var K=L/2,te=P/2,ne=[{x:K,y:0},{x:L,y:te},{x:K,y:P},{x:0,y:te}],fe=ne.map(function($e){return $e.x+","+$e.y}).join(" ");z=h(z);var _e=he("polygon",{...z,points:fe});return me(O,_e),_e}function _(O,L,P,z){P=f(P);var K=ec(L,P,z);return me(O,K),K}function v(O,L,P){return _(O,L,P,5)}function E(O,L,P){P=f(P);var z=he("path",{...P,d:L});return me(O,z),z}function x(O,L,P,z){return E(L,P,q({"data-marker":O},z))}function T(O){return Y[O]}function k(O){return function(L,P,z){return T(O)(L,P,z)}}var $={"bpmn:MessageEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:L.width,containerHeight:L.height,position:{mx:.235,my:.315}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill),ne=z?Pe(L,u,P.fill):pe(L,s,P.stroke),fe=E(O,K,{fill:te,stroke:ne,strokeWidth:1});return fe},"bpmn:TimerEventDefinition":function(O,L,P={}){var z=w(O,L.width,L.height,.2*L.height,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:2}),K=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:L.width,containerHeight:L.height,position:{mx:.5,my:.5}});E(O,K,{stroke:pe(L,s,P.stroke),strokeWidth:2});for(var te=0;te<12;te++){var ne=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:L.width,containerHeight:L.height,position:{mx:.5,my:.5}}),fe=L.width/2,_e=L.height/2;E(O,ne,{strokeWidth:1,stroke:pe(L,s,P.stroke),transform:"rotate("+te*30+","+_e+","+fe+")"})}return z},"bpmn:EscalationEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.5,my:.2}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill);return E(O,K,{fill:te,stroke:pe(L,s,P.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(O,L,P={}){var z=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.5,my:.222}});return E(O,z,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.57,my:.263}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill);return E(O,K,{fill:te,stroke:pe(L,s,P.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:L.width,containerHeight:L.height,position:{mx:.2,my:.722}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill);return E(O,K,{fill:te,stroke:pe(L,s,P.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.638,my:-.055}}),te=z?pe(L,s,P.stroke):"none",ne=E(O,K,{fill:te,stroke:pe(L,s,P.stroke),strokeWidth:1});return Ry(ne,45),ne},"bpmn:CompensateEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.22,my:.5}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill);return E(O,K,{fill:te,stroke:pe(L,s,P.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:L.width,containerHeight:L.height,position:{mx:.5,my:.2}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill);return E(O,K,{strokeWidth:1,fill:te,stroke:pe(L,s,P.stroke)})},"bpmn:MultipleEventDefinition":function(O,L,P={},z){var K=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:L.width,containerHeight:L.height,position:{mx:.222,my:.36}}),te=z?pe(L,s,P.stroke):Pe(L,u,P.fill);return E(O,K,{fill:te,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(O,L,P={}){var z=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:L.width,containerHeight:L.height,position:{mx:.458,my:.194}});return E(O,z,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(O,L,P={}){var z=w(O,L.width,L.height,8,{fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke),strokeWidth:4});return z}};function R(O,L,P={}){var z=re(O),K=HA(z);return z.get("eventDefinitions")&&z.get("eventDefinitions").length>1?z.get("parallelMultiple")?$["bpmn:ParallelMultipleEventDefinition"](L,O,P,K):$["bpmn:MultipleEventDefinition"](L,O,P,K):Kn(z,"bpmn:MessageEventDefinition")?$["bpmn:MessageEventDefinition"](L,O,P,K):Kn(z,"bpmn:TimerEventDefinition")?$["bpmn:TimerEventDefinition"](L,O,P,K):Kn(z,"bpmn:ConditionalEventDefinition")?$["bpmn:ConditionalEventDefinition"](L,O,P,K):Kn(z,"bpmn:SignalEventDefinition")?$["bpmn:SignalEventDefinition"](L,O,P,K):Kn(z,"bpmn:EscalationEventDefinition")?$["bpmn:EscalationEventDefinition"](L,O,P,K):Kn(z,"bpmn:LinkEventDefinition")?$["bpmn:LinkEventDefinition"](L,O,P,K):Kn(z,"bpmn:ErrorEventDefinition")?$["bpmn:ErrorEventDefinition"](L,O,P,K):Kn(z,"bpmn:CancelEventDefinition")?$["bpmn:CancelEventDefinition"](L,O,P,K):Kn(z,"bpmn:CompensateEventDefinition")?$["bpmn:CompensateEventDefinition"](L,O,P,K):Kn(z,"bpmn:TerminateEventDefinition")?$["bpmn:TerminateEventDefinition"](L,O,P,K):null}var A={ParticipantMultiplicityMarker:function(O,L,P={}){var z=En(L,P),K=ln(L,P),te=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:z,containerHeight:K,position:{mx:(z/2-6)/z,my:(K-15)/K}});x("participant-multiplicity",O,te,{strokeWidth:2,fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)})},SubProcessMarker:function(O,L,P={}){var z=S(O,14,14,0,{strokeWidth:1,fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)});Ft(z,L.width/2-7.5,L.height-20);var K=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:L.width,containerHeight:L.height,position:{mx:(L.width/2-7.5)/L.width,my:(L.height-20)/L.height}});x("sub-process",O,K,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)})},ParallelMarker:function(O,L,P){var z=En(L,P),K=ln(L,P),te=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:z,containerHeight:K,position:{mx:(z/2+P.parallel)/z,my:(K-20)/K}});x("parallel",O,te,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)})},SequentialMarker:function(O,L,P){var z=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:(L.width/2+P.seq)/L.width,my:(L.height-19)/L.height}});x("sequential",O,z,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)})},CompensationMarker:function(O,L,P){var z=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:(L.width/2+P.compensation)/L.width,my:(L.height-13)/L.height}});x("compensation",O,z,{strokeWidth:1,fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)})},LoopMarker:function(O,L,P){var z=En(L,P),K=ln(L,P),te=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:z,containerHeight:K,position:{mx:(z/2+P.loop)/z,my:(K-7)/K}});x("loop",O,te,{strokeWidth:1.5,fill:"none",stroke:pe(L,s,P.stroke),strokeMiterlimit:.5})},AdhocMarker:function(O,L,P){var z=En(L,P),K=ln(L,P),te=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:z,containerHeight:K,position:{mx:(z/2+P.adhoc)/z,my:(K-15)/K}});x("adhoc",O,te,{strokeWidth:1,fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke)})}};function C(O,L,P,z){A[O](L,P,z)}function M(O,L,P,z={}){z={fill:z.fill,stroke:z.stroke,width:En(L,z),height:ln(L,z)};var K=re(L),te=P&&P.includes("SubProcessMarker");te?z={...z,seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:z={...z,seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10},J(P,function(_e){C(_e,O,L,z)}),K.get("isForCompensation")&&C("CompensationMarker",O,L,z),N(K,"bpmn:AdHocSubProcess")&&C("AdhocMarker",O,L,z);var ne=K.get("loopCharacteristics"),fe=ne&&ne.get("isSequential");ne&&(fe===void 0&&C("LoopMarker",O,L,z),fe===!1&&C("ParallelMarker",O,L,z),fe===!0&&C("SequentialMarker",O,L,z))}function I(O,L,P={}){P=q({size:{width:100}},P);var z=o.createText(L||"",P);return Fe(z).add("djs-label"),me(O,z),z}function D(O,L,P,z={}){var K=re(L),te=Uo({x:L.x,y:L.y,width:L.width,height:L.height},z);return I(O,K.name,{align:P,box:te,padding:7,style:{fill:zo(L,p,s,z.stroke)}})}function B(O,L,P={}){var z={width:90,height:30,x:L.width/2+L.x,y:L.height/2+L.y};return I(O,Tn(L),{box:z,fitBox:!0,style:q({},o.getExternalStyle(),{fill:zo(L,p,s,P.stroke)})})}function F(O,L,P,z={}){var K=An(P),te=I(O,L,{box:{height:30,width:K?ln(P,z):En(P,z)},align:"center-middle",style:{fill:zo(P,p,s,z.stroke)}});if(K){var ne=-1*ln(P,z);Ya(te,0,-ne,270)}}function j(O,L,P={}){var{width:z,height:K}=Uo(L,P);return S(O,z,K,Za,{...P,fill:Pe(L,u,P.fill),fillOpacity:no,stroke:pe(L,s,P.stroke)})}function Z(O,L,P={}){var z=re(L),K=Pe(L,u,P.fill),te=pe(L,s,P.stroke);return(z.get("associationDirection")==="One"||z.get("associationDirection")==="Both")&&(P.markerEnd=g("association-end",K,te)),z.get("associationDirection")==="Both"&&(P.markerStart=g("association-start",K,te)),P=We(P,["markerStart","markerEnd"]),v(O,L.waypoints,{...P,stroke:te,strokeDasharray:"0, 5"})}function Q(O,L,P={}){var z=Pe(L,u,P.fill),K=pe(L,s,P.stroke),te=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.474,my:.296}}),ne=E(O,te,{fill:z,fillOpacity:no,stroke:K}),fe=re(L);if(jA(fe)){var _e=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:.33,my:(L.height-18)/L.height}});E(O,_e,{strokeWidth:2,fill:z,stroke:K})}return ne}function W(O,L,P={}){return w(O,L.width,L.height,{fillOpacity:no,...P,fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)})}function V(O,L,P={}){return b(O,L.width,L.height,{fill:Pe(L,u,P.fill),fillOpacity:no,stroke:pe(L,s,P.stroke)})}function G(O,L,P={}){var z=S(O,En(L,P),ln(L,P),0,{fill:Pe(L,u,P.fill),fillOpacity:P.fillOpacity||no,stroke:pe(L,s,P.stroke),strokeWidth:1.5}),K=re(L);if(N(K,"bpmn:Lane")){var te=K.get("name");F(O,te,L,P)}return z}function U(O,L,P={}){var z=j(O,L,P);Vt(L)&&ce(z,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var K=Ne(L);return D(O,L,K?"center-top":"center-middle",P),K?M(O,L,void 0,P):M(O,L,["SubProcessMarker"],P),z}function ee(O,L,P={}){var z=j(O,L,P);return D(O,L,"center-middle",P),M(O,L,void 0,P),z}var Y=this.handlers={"bpmn:AdHocSubProcess":function(O,L,P={}){return Ne(L)?P=We(P,["fill","stroke","width","height"]):P=We(P,["fill","stroke"]),U(O,L,P)},"bpmn:Association":function(O,L,P={}){return P=We(P,["fill","stroke"]),Z(O,L,P)},"bpmn:BoundaryEvent":function(O,L,P={}){var{renderIcon:z=!0}=P;P=We(P,["fill","stroke"]);var K=re(L),te=K.get("cancelActivity");P={strokeWidth:1.5,fill:Pe(L,u,P.fill),fillOpacity:KA,stroke:pe(L,s,P.stroke)},te||(P.strokeDasharray="6");var ne=W(O,L,P);return w(O,L.width,L.height,ga,{...P,fill:"none"}),z&&R(L,O,P),ne},"bpmn:BusinessRuleTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=ee(O,L,P),K=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),te=E(O,K);ce(te,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1});var ne=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),fe=E(O,ne);return ce(fe,{fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke),strokeWidth:1}),z},"bpmn:CallActivity":function(O,L,P={}){return P=We(P,["fill","stroke"]),U(O,L,{strokeWidth:5,...P})},"bpmn:ComplexGateway":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=V(O,L,P),K=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:L.width,containerHeight:L.height,position:{mx:.46,my:.26}});return E(O,K,{fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke),strokeWidth:1}),z},"bpmn:DataInput":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=i.getRawPath("DATA_ARROW"),K=Q(O,L,P);return E(O,z,{fill:"none",stroke:pe(L,s,P.stroke),strokeWidth:1}),K},"bpmn:DataInputAssociation":function(O,L,P={}){return P=We(P,["fill","stroke"]),Z(O,L,{...P,markerEnd:g("association-end",Pe(L,u,P.fill),pe(L,s,P.stroke))})},"bpmn:DataObject":function(O,L,P={}){return P=We(P,["fill","stroke"]),Q(O,L,P)},"bpmn:DataObjectReference":k("bpmn:DataObject"),"bpmn:DataOutput":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=i.getRawPath("DATA_ARROW"),K=Q(O,L,P);return E(O,z,{strokeWidth:1,fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke)}),K},"bpmn:DataOutputAssociation":function(O,L,P={}){return P=We(P,["fill","stroke"]),Z(O,L,{...P,markerEnd:g("association-end",Pe(L,u,P.fill),pe(L,s,P.stroke))})},"bpmn:DataStoreReference":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:L.width,containerHeight:L.height,position:{mx:0,my:.133}});return E(O,z,{fill:Pe(L,u,P.fill),fillOpacity:no,stroke:pe(L,s,P.stroke),strokeWidth:2})},"bpmn:EndEvent":function(O,L,P={}){var{renderIcon:z=!0}=P;P=We(P,["fill","stroke"]);var K=W(O,L,{...P,strokeWidth:4});return z&&R(L,O,P),K},"bpmn:EventBasedGateway":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=re(L),K=V(O,L,P);w(O,L.width,L.height,L.height*.2,{fill:Pe(L,"none",P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1});var te=z.get("eventGatewayType"),ne=!!z.get("instantiate");function fe(){var $e=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:L.width,containerHeight:L.height,position:{mx:.36,my:.44}});E(O,$e,{fill:"none",stroke:pe(L,s,P.stroke),strokeWidth:2})}if(te==="Parallel"){var _e=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:L.width,containerHeight:L.height,position:{mx:.474,my:.296}});E(O,_e,{fill:"none",stroke:pe(L,s,P.stroke),strokeWidth:1})}else te==="Exclusive"&&(ne||w(O,L.width,L.height,L.height*.26,{fill:"none",stroke:pe(L,s,P.stroke),strokeWidth:1}),fe());return K},"bpmn:ExclusiveGateway":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=V(O,L,P),K=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:L.width,containerHeight:L.height,position:{mx:.32,my:.3}}),te=He(L);return te.get("isMarkerVisible")&&E(O,K,{fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke),strokeWidth:1}),z},"bpmn:Gateway":function(O,L,P={}){return P=We(P,["fill","stroke"]),V(O,L,P)},"bpmn:Group":function(O,L,P={}){return P=We(P,["fill","stroke","width","height"]),S(O,L.width,L.height,Za,{stroke:pe(L,s,P.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:En(L,P),height:ln(L,P)})},"bpmn:InclusiveGateway":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=V(O,L,P);return w(O,L.width,L.height,L.height*.24,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:2.5}),z},"bpmn:IntermediateEvent":function(O,L,P={}){var{renderIcon:z=!0}=P;P=We(P,["fill","stroke"]);var K=W(O,L,{...P,strokeWidth:1.5});return w(O,L.width,L.height,ga,{fill:"none",stroke:pe(L,s,P.stroke),strokeWidth:1.5}),z&&R(L,O,P),K},"bpmn:IntermediateCatchEvent":k("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":k("bpmn:IntermediateEvent"),"bpmn:Lane":function(O,L,P={}){return P=We(P,["fill","stroke","width","height"]),G(O,L,{...P,fillOpacity:JA})},"bpmn:ManualTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=ee(O,L,P),K=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return E(O,K,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:.5}),z},"bpmn:MessageFlow":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=re(L),K=He(L),te=Pe(L,u,P.fill),ne=pe(L,s,P.stroke),fe=v(O,L.waypoints,{markerEnd:g("messageflow-end",te,ne),markerStart:g("messageflow-start",te,ne),stroke:ne,strokeDasharray:"10, 11",strokeWidth:1.5});if(z.get("messageRef")){var _e=fe.getPointAtLength(fe.getTotalLength()/2),$e=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:_e.x,y:_e.y}}),ke={strokeWidth:1};K.get("messageVisibleKind")==="initiating"?(ke.fill=te,ke.stroke=ne):(ke.fill=ne,ke.stroke=te);var ze=E(O,$e,ke),Zn=z.get("messageRef"),Pi=Zn.get("name"),It=I(O,Pi,{align:"center-top",fitBox:!0,style:{fill:ne}}),ve=ze.getBBox(),Ue=It.getBBox(),ie=_e.x-Ue.width/2,ge=_e.y+ve.height/2+XA;Ya(It,ie,ge,0)}return fe},"bpmn:ParallelGateway":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=V(O,L,P),K=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:L.width,containerHeight:L.height,position:{mx:.46,my:.2}});return E(O,K,{fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke),strokeWidth:1}),z},"bpmn:Participant":function(O,L,P={}){P=We(P,["fill","stroke","width","height"]);var z=G(O,L,P),K=Ne(L),te=An(L),ne=re(L),fe=ne.get("name");if(K){var _e=te?[{x:30,y:0},{x:30,y:ln(L,P)}]:[{x:0,y:30},{x:En(L,P),y:30}];_(O,_e,{stroke:pe(L,s,P.stroke),strokeWidth:ZA}),F(O,fe,L,P)}else{var $e=Uo(L,P);te||($e.height=En(L,P),$e.width=ln(L,P));var ke=I(O,fe,{box:$e,align:"center-middle",style:{fill:zo(L,p,s,P.stroke)}});if(!te){var ze=-1*ln(L,P);Ya(ke,0,-ze,270)}}return ne.get("participantMultiplicity")&&C("ParticipantMultiplicityMarker",O,L,P),z},"bpmn:ReceiveTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=re(L),K=ee(O,L,P),te;return z.get("instantiate")?(w(O,28,28,20*.22,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1}),te=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):te=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),E(O,te,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1}),K},"bpmn:ScriptTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=ee(O,L,P),K=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return E(O,K,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1}),z},"bpmn:SendTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=ee(O,L,P),K=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return E(O,K,{fill:pe(L,s,P.stroke),stroke:Pe(L,u,P.fill),strokeWidth:1}),z},"bpmn:SequenceFlow":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=Pe(L,u,P.fill),K=pe(L,s,P.stroke),te=v(O,L.waypoints,{markerEnd:g("sequenceflow-end",z,K),stroke:K}),ne=re(L),{source:fe}=L;if(fe){var _e=re(fe);ne.get("conditionExpression")&&N(_e,"bpmn:Activity")&&ce(te,{markerStart:g("conditional-flow-marker",z,K)}),_e.get("default")&&(N(_e,"bpmn:Gateway")||N(_e,"bpmn:Activity"))&&_e.get("default")===ne&&ce(te,{markerStart:g("conditional-default-flow-marker",z,K)})}return te},"bpmn:ServiceTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=ee(O,L,P);w(O,10,10,{fill:Pe(L,u,P.fill),stroke:"none",transform:"translate(6, 6)"});var K=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});E(O,K,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1}),w(O,10,10,{fill:Pe(L,u,P.fill),stroke:"none",transform:"translate(11, 10)"});var te=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return E(O,te,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:1}),z},"bpmn:StartEvent":function(O,L,P={}){var{renderIcon:z=!0}=P;P=We(P,["fill","stroke"]);var K=re(L);K.get("isInterrupting")||(P={...P,strokeDasharray:"6"});var te=W(O,L,P);return z&&R(L,O,P),te},"bpmn:SubProcess":function(O,L,P={}){return Ne(L)?P=We(P,["fill","stroke","width","height"]):P=We(P,["fill","stroke"]),U(O,L,P)},"bpmn:Task":function(O,L,P={}){return P=We(P,["fill","stroke"]),ee(O,L,P)},"bpmn:TextAnnotation":function(O,L,P={}){P=We(P,["fill","stroke","width","height"]);var{width:z,height:K}=Uo(L,P),te=S(O,z,K,0,0,{fill:"none",stroke:"none"}),ne=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:z,containerHeight:K,position:{mx:0,my:0}});E(O,ne,{stroke:pe(L,s,P.stroke)});var fe=re(L),_e=fe.get("text")||"";return I(O,_e,{align:"left-top",box:Uo(L,P),padding:7,style:{fill:zo(L,p,s,P.stroke)}}),te},"bpmn:Transaction":function(O,L,P={}){Ne(L)?P=We(P,["fill","stroke","width","height"]):P=We(P,["fill","stroke"]);var z=U(O,L,{strokeWidth:1.5,...P}),K=n.style(["no-fill","no-events"],{stroke:pe(L,s,P.stroke),strokeWidth:1.5}),te=Ne(L);return te||(P={}),S(O,En(L,P),ln(L,P),Za-ga,ga,K),z},"bpmn:UserTask":function(O,L,P={}){P=We(P,["fill","stroke"]);var z=ee(O,L,P),K=15,te=12,ne=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:K,y:te}});E(O,ne,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:.5});var fe=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:K,y:te}});E(O,fe,{fill:Pe(L,u,P.fill),stroke:pe(L,s,P.stroke),strokeWidth:.5});var _e=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:K,y:te}});return E(O,_e,{fill:pe(L,s,P.stroke),stroke:pe(L,s,P.stroke),strokeWidth:.5}),z},label:function(O,L,P={}){return B(O,L,P)}};this._drawPath=E,this._renderer=T}de(Xr,xi);Xr.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"];Xr.prototype.canRender=function(e){return N(e,"bpmn:BaseElement")};Xr.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Xr.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)};Xr.prototype.getShapePath=function(e){return N(e,"bpmn:Event")?GA(e):N(e,"bpmn:Activity")?VA(e,Za):N(e,"bpmn:Gateway")?zA(e):UA(e)};function We(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var QA=0,qA={width:150,height:50};function eT(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function tT(e){return Mt(e)?q({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function nT(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch{return{width:0,height:0}}}function iT(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=nT(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return rT(e,r,i,o);r=sT(r,o.width,t)}}function rT(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Af="­";function oT(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===Af)&&r.pop();break}var l=r[r.length-1];return l&&l===Af&&(r[r.length-1]="-"),r.join("")}function sT(e,t,n){var i=Math.max(e.length*(n/t),1),r=oT(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function aT(){var e=document.getElementById("helper-svg");return e||(e=he("svg"),ce(e,{id:"helper-svg"}),Nt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function lc(e){this._config=q({},{size:qA,padding:QA,style:{},align:"center-top"},e||{})}lc.prototype.createText=function(e,t){return this.layoutText(e,t).element};lc.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions};lc.prototype.layoutText=function(e,t){var n=q({},this._config.size,t.box),i=q({},this._config.style,t.style),r=eT(t.align||this._config.align),o=tT(t.padding!==void 0?t.padding:this._config.padding),l=t.fitBox||!1,u=lT(i),s=e.split(/\u00AD?\r?\n/),p=[],a=n.width-o.left-o.right,c=he("text");ce(c,{x:0,y:0}),ce(c,i);var h=aT();for(me(h,c);s.length;)p.push(iT(s,a,c));r.vertical==="middle"&&(o.top=o.bottom=0);var f=pn(p,function(w,S,b){return w+(u||S.height)},0)+o.top+o.bottom,d=pn(p,function(w,S,b){return S.width>w?S.width:w},0),m=o.top;r.vertical==="middle"&&(m+=(n.height-f)/2),m-=(u||p[0].height)/4;var g=he("text");ce(g,i),J(p,function(w){var S;switch(m+=u||w.height,r.horizontal){case"left":S=o.left;break;case"right":S=(l?d:a)-o.right-w.width;break;default:S=Math.max(((l?d:a)-w.width)/2+o.left,0)}var b=he("tspan");ce(b,{x:S,y:m}),b.textContent=w.text,me(g,b)}),ut(c);var y={width:d,height:f};return{dimensions:y,element:g}};function lT(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var cT=12,uT=1.2,pT=30;function Ky(e){var t=q({fontFamily:"Arial, sans-serif",fontSize:cT,fontWeight:"normal",lineHeight:uT},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=q({},t,{fontSize:n},e&&e.externalStyle||{}),r=new lc({style:t});this.getExternalLabelBounds=function(o,l){var u=r.getDimensions(l,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-u.width/2),y:Math.round(o.y),width:Math.ceil(u.width),height:Math.ceil(u.height)}},this.getTextAnnotationBounds=function(o,l){var u=r.getDimensions(l,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(pT,Math.round(u.height))}},this.createText=function(o,l){return r.createText(o,l||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Ky.$inject=["config.textRenderer"];function hT(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var l={};if(n.position){for(var u=n.containerHeight/i.height*n.yScaleFactor,s=n.containerWidth/i.width*n.xScaleFactor,p=0;p<i.heightElements.length;p++)l["y"+p]=i.heightElements[p]*u;for(var a=0;a<i.widthElements.length;a++)l["x"+a]=i.widthElements[a]*s}var c=gT(i.d,{mx:r,my:o,e:l});return c}}var dT=/\{([^{}]+)\}/g,fT=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function mT(e,t,n){var i=n;return t.replace(fT,function(r,o,l,u,s){o=o||u,i&&(o in i&&(i=i[o]),typeof i=="function"&&s&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function gT(e,t){return String(e).replace(dT,function(n,i){return mT(n,i,t)})}const vT={__init__:["bpmnRenderer"],bpmnRenderer:["type",Xr],textRenderer:["type",Ky],pathMap:["type",hT]};function yT(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}const Ws={translate:["value",yT]};function Ka(e,t,n){return q({id:e.id,type:e.$type,businessObject:e,di:t},n)}function bT(e,t,n){var i=e.waypoint;return!i||i.length<2?[xe(t),xe(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function Jy(e,t,n,i){return new Error(e("element {element} referenced by {referenced}#{property} not yet drawn",{element:Gt(n),referenced:Gt(t),property:i}))}function Ci(e,t,n,i,r,o){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._translate=r,this._textRenderer=o}Ci.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate","textRenderer"];Ci.prototype.add=function(e,t,n){var i,r=this._translate,o,l;if(N(t,"bpmndi:BPMNPlane")){var u=N(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(Ka(e,t,u)),this._canvas.addRootElement(i)}else if(N(t,"bpmndi:BPMNShape")){var s=!Ne(e,t),p=_T(e);o=n&&(n.hidden||n.collapsed);var a=t.bounds;i=this._elementFactory.createShape(Ka(e,t,{collapsed:s,hidden:o,x:Math.round(a.x),y:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height),isFrame:p})),N(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),N(e,"bpmn:Lane")&&(l=0),N(e,"bpmn:DataStoreReference")&&(wT(n,xe(a))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,l)}else if(N(t,"bpmndi:BPMNEdge")){var c=this._getSource(e),h=this._getTarget(e);o=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(Ka(e,t,{hidden:o,source:c,target:h,waypoints:bT(t,c,h)})),N(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,l)}else throw new Error(r("unknown di {di} for element {semantic}",{di:Gt(t),semantic:Gt(e)}));return Dr(e)&&Tn(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};Ci.prototype._attachBoundary=function(e,t){var n=this._translate,i=e.attachedToRef;if(!i)throw new Error(n("missing {semantic}#attachedToRef",{semantic:Gt(e)}));var r=this._elementRegistry.get(i.id),o=r&&r.attachers;if(!r)throw Jy(n,e,i,"attachedToRef");t.host=r,o||(r.attachers=o=[]),o.indexOf(t)===-1&&o.push(t)};Ci.prototype.addLabel=function(e,t,n){var i,r,o;return i=NA(t,n),r=Tn(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(Ka(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!Tn(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)};Ci.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type,o=this._translate;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?Jy(o,e,i,t+"Ref"):new Error(o("{semantic}#{side} Ref not specified",{semantic:Gt(e),side:t}))};Ci.prototype._getSource=function(e){return this._getConnectedElement(e,"source")};Ci.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")};Ci.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function wT(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function _T(e){return N(e,"bpmn:Group")}const ET={__depends__:[Ws],bpmnImporter:["type",Ci]},xT={__depends__:[vT,ET]};function Tf(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function Io(e){return e.originalEvent||e.srcEvent}function su(e){Tf(e),Tf(Io(e))}function Or(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Qy(){return/mac/i.test(navigator.platform)}function qy(e,t){return(Io(e)||e).button===t}function sr(e){return qy(e,0)}function ST(e){return qy(e,1)}function go(e){var t=Io(e)||e;return sr(e)?Qy()?t.metaKey:t.ctrlKey:!1}function El(e){var t=Io(e)||e;return sr(e)&&t.shiftKey}function CT(e){return!0}function va(e){return sr(e)||ST(e)}var $f=500;function eb(e,t,n){var i=this;function r(x,T,k){if(!u(x,T)){var $,R,A;k?R=t.getGraphics(k):($=T.delegateTarget||T.target,$&&(R=$,k=t.get(R))),!(!R||!k)&&(A=e.fire(x,{element:k,gfx:R,originalEvent:T}),A===!1&&(T.stopPropagation(),T.preventDefault()))}}var o={};function l(x){return o[x]}function u(x,T){var k=p[x]||sr;return!k(T)}var s={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},p={"element.contextmenu":CT,"element.mousedown":va,"element.mouseup":va,"element.click":va,"element.dblclick":va};function a(x,T,k){var $=s[x];if(!$)throw new Error("unmapped DOM event name <"+x+">");return r($,T,k)}var c="svg, .djs-element";function h(x,T,k,$){var R=o[k]=function(A){r(k,A)};$&&(p[k]=$),R.$delegate=cn.bind(x,c,T,R)}function f(x,T,k){var $=l(k);$&&cn.unbind(x,T,$.$delegate)}function d(x){J(s,function(T,k){h(x,k,T)})}function m(x){J(s,function(T,k){f(x,k,T)})}e.on("canvas.destroy",function(x){m(x.svg)}),e.on("canvas.init",function(x){d(x.svg)}),e.on(["shape.added","connection.added"],function(x){var T=x.element,k=x.gfx;e.fire("interactionEvents.createHit",{element:T,gfx:k})}),e.on(["shape.changed","connection.changed"],$f,function(x){var T=x.element,k=x.gfx;e.fire("interactionEvents.updateHit",{element:T,gfx:k})}),e.on("interactionEvents.createHit",$f,function(x){var T=x.element,k=x.gfx;i.createDefaultHit(T,k)}),e.on("interactionEvents.updateHit",function(x){var T=x.element,k=x.gfx;i.updateDefaultHit(T,k)});var g=_("djs-hit djs-hit-stroke"),y=_("djs-hit djs-hit-click-stroke"),w=_("djs-hit djs-hit-all"),S=_("djs-hit djs-hit-no-move"),b={all:w,"click-stroke":y,stroke:g,"no-move":S};function _(x,T){return T=q({stroke:"white",strokeWidth:15},T||{}),n.cls(x,["no-fill","no-border"],T)}function v(x,T){var k=b[T];if(!k)throw new Error("invalid hit type <"+T+">");return ce(x,k),x}function E(x,T){me(x,T)}this.removeHits=function(x){var T=vl(".djs-hit",x);J(T,ut)},this.createDefaultHit=function(x,T){var k=x.waypoints,$=x.isFrame,R;return k?this.createWaypointsHit(T,k):(R=$?"stroke":"all",this.createBoxHit(T,R,{width:x.width,height:x.height}))},this.createWaypointsHit=function(x,T){var k=ec(T);return v(k,"stroke"),E(x,k),k},this.createBoxHit=function(x,T,k){k=q({x:0,y:0},k);var $=he("rect");return v($,T),ce($,k),E(x,$),$},this.updateDefaultHit=function(x,T){var k=Ke(".djs-hit",T);if(k)return x.waypoints?uy(k,x.waypoints):ce(k,{width:x.width,height:x.height}),k},this.fire=r,this.triggerMouseEvent=a,this.mouseHandler=l,this.registerEvent=h,this.unregisterEvent=f}eb.$inject=["eventBus","elementRegistry","styles"];const cc={__init__:["interactionEvents"],interactionEvents:["type",eb]};var AT=500,TT=1e3;function Zr(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var l=he("rect");return ce(l,q({x:0,y:0,rx:4,width:100,height:100},n)),l}e.on(["shape.added","shape.changed"],AT,function(o){var l=o.element,u=o.gfx,s=Ke(".djs-outline",u);s||(s=i.getOutline(l)||r(),me(u,s)),i.updateShapeOutline(s,l)}),e.on(["connection.added","connection.changed"],function(o){var l=o.element,u=o.gfx,s=Ke(".djs-outline",u);s||(s=r(),me(u,s)),i.updateConnectionOutline(s,l)})}Zr.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&J(i,function(r){n=n||r.updateOutline(t,e)}),n||ce(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};Zr.prototype.updateConnectionOutline=function(e,t){var n=vt(t);ce(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})};Zr.prototype.registerProvider=function(e,t){t||(t=e,e=TT),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})};Zr.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};Zr.prototype.getOutline=function(e){var t,n=this._getProviders();return J(n,function(i){yt(i.getOutline)&&(t=t||i.getOutline(e))}),t};Zr.$inject=["eventBus","styles","elementRegistry"];const sh={__init__:["outline"],outline:["type",Zr]};function Lo(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}Lo.$inject=["eventBus","canvas"];Lo.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}};Lo.prototype.get=function(){return this._selectedElements};Lo.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1};Lo.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();Ie(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(l){var u=r.findRoot(l);return o===u}),t?J(e,function(l){n.indexOf(l)===-1&&n.push(l)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var Rf="hover",Mf="selected",ya=6;function ah(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(l,u){e.addMarker(l,u)}function o(l,u){e.removeMarker(l,u)}t.on("element.hover",function(l){r(l.element,Rf)}),t.on("element.out",function(l){o(l.element,Rf)}),t.on("selection.changed",function(l){function u(c){o(c,Mf)}function s(c){r(c,Mf)}var p=l.oldSelection,a=l.newSelection;J(p,function(c){a.indexOf(c)===-1&&u(c)}),J(a,function(c){p.indexOf(c)===-1&&s(c)}),i._updateSelectionOutline(a)}),t.on("element.changed",function(l){n.isSelected(l.element)&&i._updateSelectionOutline(n.get())})}ah.$inject=["canvas","eventBus","selection"];ah.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Vr(t);var n=e.length>1,i=this._canvas.getContainer();if(Fe(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=$T(vt(e)),o=he("rect");ce(o,q({rx:3},r)),Fe(o).add("djs-selection-outline"),me(t,o)}};function $T(e){return{x:e.x-ya,y:e.y-ya,width:e.width+ya*2,height:e.height+ya*2}}function tb(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,l=o.canExecute,u=o.elements,s=o.hints||{},p=s.autoSelect;if(l){if(p===!1)return;Ie(p)?t.select(p):t.select(u.filter(RT))}}),e.on("connect.end",500,function(r){var o=r.context,l=o.connection;l&&t.select(l)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],l=i.get(r.context.shape.id),u=je(o,function(s){return l.id===s.id});u||t.select(l)}),e.on("element.click",function(r){if(sr(r)){var o=r.element;o===n.getRootElement()&&(o=null);var l=t.isSelected(o),u=t.get().length>1,s=El(r);if(l&&u)return s?t.deselect(o):t.select(o);l?t.deselect(o):t.select(o,s)}})}tb.$inject=["eventBus","selection","canvas","elementRegistry"];function RT(e){return!e.hidden}const ai={__init__:["selectionVisuals","selectionBehavior"],__depends__:[cc,sh],selection:["type",Lo],selectionVisuals:["type",ah],selectionBehavior:["type",tb]};function uc(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}uc.prototype.next=function(){return this._prefix+ ++this._counter};var MT=new uc("ov"),kT=500;function Ot(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=MT,this._overlayDefaults=q({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=IT(n.getContainer()),this._init()}Ot.$inject=["config.overlays","eventBus","canvas","elementRegistry"];Ot.prototype.get=function(e){if(un(e)&&(e={id:e}),un(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?Re(t.overlays,Fn({type:e.type})):t.overlays.slice():[]}else return e.type?Re(this._overlays,Fn({type:e.type})):e.id?this._overlays[e.id]:null};Ot.prototype.add=function(e,t,n){if(Mt(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=q({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i};Ot.prototype.remove=function(e){var t=this.get(e)||[];Ie(t)||(t=[t]);var n=this;J(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(ri(i.html),ri(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})};Ot.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"};Ot.prototype.show=function(){pc(this._overlayRoot)};Ot.prototype.hide=function(){pc(this._overlayRoot,!1)};Ot.prototype.clear=function(){this._overlays={},this._overlayContainers=[],ql(this._overlayRoot)};Ot.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=vt(t);i=o.x,r=o.y}nb(n,i,r),Bt(e.html,"data-container-id",t.id)};Ot.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var l;i.waypoints?l=vt(i).width:l=i.width,r=t.right*-1+l}if(t.bottom!==void 0){var u;i.waypoints?u=vt(i).height:u=i.height,o=t.bottom*-1+u}nb(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Ot.prototype._createOverlayContainer=function(e){var t=tt('<div class="djs-overlays" />');Nt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n};Ot.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";ib(this._overlayRoot,n)};Ot.prototype._getOverlayContainer=function(e,t){var n=je(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n};Ot.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),un(i)&&(i=tt(i)),o=this._getOverlayContainer(n),r=tt('<div class="djs-overlay" data-overlay-id="'+t+'">'),Nt(r,{position:"absolute"}),r.appendChild(i),e.type&&nt(r).add("djs-overlay-"+e.type);var l=this._canvas.findRoot(n),u=this._canvas.getRootElement();pc(r,l===u),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())};Ot.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,l=e.htmlContainer,u=this._canvas.getRootElement(),s=!0;(i!==u||n&&(Rt(r)&&r>t.scale||Rt(o)&&o<t.scale))&&(s=!1),pc(l,s),this._updateOverlayScale(e,t)};Ot.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,l,u="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Rt(i)&&t.scale<i&&(l=(1/t.scale||1)*i),Rt(r)&&t.scale>r&&(l=(1/t.scale||1)*r)),Rt(l)&&(u="scale("+l+","+l+")"),ib(o,u)};Ot.prototype._updateOverlaysVisibilty=function(e){var t=this;J(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})};Ot.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});J(o,function(s){t.remove(s.id)});var l=t._getOverlayContainer(r);if(l){ri(l.html);var u=t._overlayContainers.indexOf(l);u!==-1&&t._overlayContainers.splice(u,1)}}),e.on("element.changed",kT,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(J(o.overlays,function(l){t._updateOverlay(l)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&nt(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function IT(e){var t=tt('<div class="djs-overlay-container" />');return Nt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function nb(e,t,n){Nt(e,{left:t+"px",top:n+"px"})}function pc(e,t){e.style.display=t===!1?"none":""}function ib(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}const hc={__init__:["overlays"],overlays:["type",Ot]};function rb(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(hy(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(l){e.fire("element.changed",{element:l})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}rb.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];const lh={__init__:["changeSupport"],changeSupport:["type",rb]};var LT=1e3;function se(e){this._eventBus=e}se.$inject=["eventBus"];function PT(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}se.prototype.on=function(e,t,n,i,r,o){if((yt(t)||Se(t))&&(o=r,r=i,i=n,n=t,t=null),yt(n)&&(o=r,r=i,i=n,n=LT),Mt(r)&&(o=r,r=!1),!yt(i))throw new Error("handlerFn must be a function");Ie(e)||(e=[e]);var l=this._eventBus;J(e,function(u){var s=["commandStack",u,t].filter(function(p){return p}).join(".");l.on(s,n,r?PT(i,o):i,o)})};se.prototype.canExecute=Ai("canExecute");se.prototype.preExecute=Ai("preExecute");se.prototype.preExecuted=Ai("preExecuted");se.prototype.execute=Ai("execute");se.prototype.executed=Ai("executed");se.prototype.postExecute=Ai("postExecute");se.prototype.postExecuted=Ai("postExecuted");se.prototype.revert=Ai("revert");se.prototype.reverted=Ai("reverted");function Ai(e){return function(n,i,r,o,l){(yt(n)||Se(n))&&(l=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,l)}}function ch(e,t){t.invoke(se,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}de(ch,se);ch.$inject=["canvas","injector"];const DT={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",ch]};var ob="_plane";function kf(e){var t=e.id;return OT(t)}function hi(e){var t=e.id;return N(e,"bpmn:SubProcess")?sb(t):t}function Er(e){return sb(e)}function Ja(e){var t=He(e);return N(t,"bpmndi:BPMNPlane")}function sb(e){return e+ob}function OT(e){return e.replace(new RegExp(ob+"$"),"")}var NT="bjs-breadcrumbs-shown";function ab(e,t,n){var i=tt('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=nt(r);r.appendChild(i);var l=[];e.on("element.changed",function(s){var p=s.element,a=re(p),c=je(l,function(h){return h===a});c&&u()});function u(s){s&&(l=BT(s));var p=l.map(function(c){var h=fl(c.name||c.id),f=tt('<li><span class="bjs-crumb"><a title="'+h+'">'+h+"</a></span></li>"),d=n.findRoot(hi(c))||n.findRoot(c.id);if(!d&&N(c,"bpmn:Process")){var m=t.find(function(g){var y=re(g);return y&&y.get("processRef")&&y.get("processRef")===c});d=n.findRoot(m.id)}return f.addEventListener("click",function(){n.setRootElement(d)}),f});i.innerHTML="";var a=p.length>1;o.toggle(NT,a),p.forEach(function(c){i.appendChild(c)})}e.on("root.set",function(s){u(s.element)})}ab.$inject=["eventBus","elementRegistry","canvas"];function BT(e){for(var t=re(e),n=[],i=t;i;i=i.$parent)(N(i,"bpmn:SubProcess")||N(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function lb(e,t){var n=null,i=new FT;e.on("root.set",function(r){var o=r.element,l=t.viewbox(),u=i.get(o);if(i.set(n,{x:l.x,y:l.y,zoom:l.scale}),n=o,!(N(o,"bpmn:Collaboration")&&!u)){u=u||{x:0,y:0,zoom:1};var s=(l.x-u.x)*l.scale,p=(l.y-u.y)*l.scale;(s!==0||p!==0)&&t.scroll({dx:s,dy:p}),u.zoom!==l.scale&&t.zoom(u.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}lb.$inject=["eventBus","canvas"];function FT(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var If={x:180,y:160};function Kr(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Kr.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=[];e.diagrams.forEach(function(i){var r=t._createNewDiagrams(i.plane);Array.prototype.push.apply(n,r)}),n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}};Kr.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var l=o.bpmnElement;if(l){var u=l.$parent;N(l,"bpmn:SubProcess")&&!o.isExpanded&&n.push(l),HT(l,e)&&i.push({diElement:o,parent:u})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var l=t._createDiagram(o);t._processToDiagramMap[o.id]=l,r.push(l)}}),i.forEach(function(o){for(var l=o.diElement,u=o.parent;u&&n.indexOf(u)===-1;)u=u.$parent;if(u){var s=t._processToDiagramMap[u.id];t._moveToDiPlane(l,s.plane)}}),r};Kr.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=WT(e),i={x:n.x-If.x,y:n.y-If.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})};Kr.prototype._moveToDiPlane=function(e,t){var n=cb(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)};Kr.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n};Kr.$inject=["eventBus","moddle"];function cb(e){return N(e,"bpmndi:BPMNDiagram")?e:cb(e.$parent)}function WT(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=ye(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),nc(t)}function HT(e,t){var n=e.$parent;return!(!N(n,"bpmn:SubProcess")||n===t.bpmnElement||Me(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var ba=250,jT='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',GT="bjs-drilldown-empty";function ar(e,t,n,i){se.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i;var r=this;this.executed("shape.toggleCollapse",ba,function(o){var l=o.shape;r._canDrillDown(l)?r._addOverlay(l):r._removeOverlay(l)},!0),this.reverted("shape.toggleCollapse",ba,function(o){var l=o.shape;r._canDrillDown(l)?r._addOverlay(l):r._removeOverlay(l)},!0),this.executed(["shape.create","shape.move","shape.delete"],ba,function(o){var l=o.oldParent,u=o.newParent||o.parent,s=o.shape;r._canDrillDown(s)&&r._addOverlay(s),r._updateDrilldownOverlay(l),r._updateDrilldownOverlay(u),r._updateDrilldownOverlay(s)},!0),this.reverted(["shape.create","shape.move","shape.delete"],ba,function(o){var l=o.oldParent,u=o.newParent||o.parent,s=o.shape;r._canDrillDown(s)&&r._addOverlay(s),r._updateDrilldownOverlay(l),r._updateDrilldownOverlay(u),r._updateDrilldownOverlay(s)},!0),t.on("import.render.complete",function(){n.filter(function(o){return r._canDrillDown(o)}).map(function(o){r._addOverlay(o)})})}de(ar,se);ar.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}};ar.prototype._canDrillDown=function(e){var t=this._canvas;return N(e,"bpmn:SubProcess")&&t.findRoot(hi(e))};ar.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=re(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;nt(i.html).toggle(GT,!r)}};ar.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=n.get({element:e,type:"drilldown"});i.length&&this._removeOverlay(e);var r=tt('<button class="bjs-drilldown">'+jT+"</button>");r.addEventListener("click",function(){t.setRootElement(t.findRoot(hi(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:r}),this._updateOverlayVisibility(e)};ar.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})};ar.$inject=["canvas","eventBus","elementRegistry","overlays"];const VT={__depends__:[hc,lh,DT],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",ab],drilldownCentering:["type",lb],drilldownOverlayBehavior:["type",ar],subprocessCompatibility:["type",Kr]};function lr(e){ot.call(this,e)}de(lr,ot);lr.prototype._modules=[xT,Ws,ai,hc,VT];lr.prototype._moddleExtensions={};var zT=["c","C"],UT=["v","V"],YT=["y","Y"],ub=["z","Z"];function XT(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function mn(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Lt(e,t){return e=Ie(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function uh(e){return e.shiftKey}function ZT(e){return mn(e)&&Lt(zT,e)}function KT(e){return mn(e)&&Lt(UT,e)}function JT(e){return mn(e)&&!uh(e)&&Lt(ub,e)}function QT(e){return mn(e)&&(Lt(YT,e)||Lt(ub,e)&&uh(e))}var dc="keyboard.keydown",qT="keyboard.keyup",Lf="input-handle-modified-keys",e$=1e3;function Ht(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}Ht.$inject=["config.keyboard","eventBus"];Ht.prototype._keydownHandler=function(e){this._keyHandler(e,dc)};Ht.prototype._keyupHandler=function(e){this._keyHandler(e,qT)};Ht.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||dc,i),n&&e.preventDefault()}};Ht.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:t$(e.target)&&this._isModifiedKeyIgnored(e)};Ht.prototype._isModifiedKeyIgnored=function(e){if(!mn(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1};Ht.prototype._getAllowedModifiers=function(e){var t=ir(e,"["+Lf+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(Lf).split(",")};Ht.prototype.bind=function(e){this.unbind(),this._node=e,we.bind(e,"keydown",this._keydownHandler),we.bind(e,"keyup",this._keyupHandler),this._fire("bind")};Ht.prototype.getBinding=function(){return this._node};Ht.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),we.unbind(e,"keydown",this._keydownHandler),we.unbind(e,"keyup",this._keyupHandler)),this._node=null};Ht.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})};Ht.prototype.addListener=function(e,t,n){yt(e)&&(n=t,t=e,e=e$),this._eventBus.on(n||dc,e,t)};Ht.prototype.removeListener=function(e,t){this._eventBus.off(t||dc,e)};Ht.prototype.hasModifier=XT;Ht.prototype.isCmd=mn;Ht.prototype.isShift=uh;Ht.prototype.isKey=Lt;function t$(e){return e&&(Gp(e,"input, textarea")||e.contentEditable==="true")}var n$=500;function Po(e,t){var n=this;e.on("editorActions.init",n$,function(i){var r=i.editorActions;n.registerBindings(t,r)})}Po.$inject=["eventBus","keyboard"];Po.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(JT(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(QT(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(ZT(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(KT(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Lt(["+","Add","="],r)&&mn(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Lt(["-","Subtract"],r)&&mn(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(Lt("0",r)&&mn(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(Lt(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};const ph={__init__:["keyboard","keyboardBindings"],keyboard:["type",Ht],keyboardBindings:["type",Po]};var i$={moveSpeed:50,moveSpeedAccelerated:200};function pb(e,t,n){var i=this;this._config=q({},i$,e||{}),t.addListener(r);function r(o){var l=o.keyEvent,u=i._config;if(t.isCmd(l)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],l)){var s=t.isShift(l)?u.moveSpeedAccelerated:u.moveSpeed,p;switch(l.key){case"ArrowLeft":case"Left":p="left";break;case"ArrowUp":case"Up":p="up";break;case"ArrowRight":case"Right":p="right";break;case"ArrowDown":case"Down":p="down";break}return i.moveCanvas({speed:s,direction:p}),!0}}this.moveCanvas=function(o){var l=0,u=0,s=o.speed,p=s/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":l=p;break;case"up":u=p;break;case"right":l=-p;break;case"down":u=-p;break}n.scroll({dx:l,dy:u})}}pb.$inject=["config.keyboardMove","keyboard","canvas"];const hb={__depends__:[ph],__init__:["keyboardMove"],keyboardMove:["type",pb]};var r$=/^djs-cursor-.*$/;function fc(e){var t=nt(document.body);t.removeMatching(r$),e&&t.add("djs-cursor-"+e)}function db(){fc(null)}var o$=5e3;function fb(e,t){t=t||"element.click";function n(){return!1}return e.once(t,o$,n),function(){e.off(t,n)}}function ss(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function Wn(e,t){return{x:e.x-t.x,y:e.y-t.y}}var s$=15;function mb(e,t){var n;e.on("element.mousedown",500,function(l){return o(l.originalEvent)});function i(l){var u=n.start,s=n.button,p=Or(l),a=Wn(p,u);if(!n.dragging&&a$(a)>s$&&(n.dragging=!0,s===0&&fb(e),fc("grab")),n.dragging){var c=n.last||n.start;a=Wn(p,c),t.scroll({dx:a.x,dy:a.y}),n.last=p}l.preventDefault()}function r(l){we.unbind(document,"mousemove",i),we.unbind(document,"mouseup",r),n=null,db()}function o(l){if(!ir(l.target,".djs-draggable")){var u=l.button;if(!(u>=2||l.ctrlKey||l.shiftKey||l.altKey))return n={button:u,start:Or(l)},we.bind(document,"mousemove",i),we.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}mb.$inject=["eventBus","canvas"];function a$(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}const gb={__init__:["moveCanvas"],moveCanvas:["type",mb]};function Ku(e){return Math.log(e)/Math.log(10)}function vb(e,t){var n=Ku(e.min),i=Ku(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function l$(e,t){return Math.max(e.min,Math.min(e.max,t))}var c$=Math.sign||function(e){return e>=0?1:-1},hh={min:.2,max:4},yb=10,u$=.1,p$=.75;function li(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=tn(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||p$;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}li.$inject=["config.zoomScroll","eventBus","canvas"];li.prototype.scroll=function(t){this._canvas.scroll(t)};li.prototype.reset=function(){this._canvas.zoom("fit-viewport")};li.prototype.zoom=function(t,n){var i=vb(hh,yb*2);this._totalDelta+=t,Math.abs(this._totalDelta)>u$&&(this._zoom(t,n,i),this._totalDelta=0)};li.prototype._handleWheel=function(t){if(!ir(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey||Qy()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,l;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var u=n.getBoundingClientRect(),s={x:t.clientX-u.left,y:t.clientY-u.top};l=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*c$(t.deltaY)*o,this.zoom(l,s)}else r?l={dx:o*t.deltaY,dy:0}:l={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(l)}};li.prototype.stepZoom=function(t,n){var i=vb(hh,yb);this._zoom(t,n,i)};li.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=Ku(i.zoom()),l=Math.round(o/n)*n;l+=n*r;var u=Math.pow(10,l);i.zoom(l$(hh,u),t)};li.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t>"u"&&(t=!r),r!==t&&we[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t};li.prototype._init=function(e){this.toggle(e)};const bb={__init__:["zoomScroll"],zoomScroll:["type",li]};function fs(e){lr.call(this,e)}de(fs,lr);fs.prototype._navigationModules=[hb,gb,bb];fs.prototype._modules=[].concat(lr.prototype._modules,fs.prototype._navigationModules);function au(e){return e&&e[e.length-1]}function Pf(e){return e.y}function Df(e){return e.x}var h$={left:Df,center:Df,right:function(e){return e.x+e.width},top:Pf,middle:Pf,bottom:function(e){return e.y+e.height}};function Do(e,t){this._modeling=e,this._rules=t}Do.$inject=["modeling","rules"];Do.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}};Do.prototype._isType=function(e,t){return t.indexOf(e)!==-1};Do.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,o={},l={},u=!1,s,p,a;function c(h,f){return Math.round((h[i]+f[i]+f[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][i];else if(this._isType(e,["right","bottom"]))a=au(t),o[e]=a[i]+a[r];else if(this._isType(e,["center","middle"])){if(J(t,function(h){var f=h[i]+Math.round(h[r]/2);l[f]?l[f].elements.push(h):l[f]={elements:[h],center:f}}),s=Gn(l,function(h){return h.elements.length>1&&(u=!0),h.elements.length}),u)return o[e]=au(s).center,o;p=t[0],t=Gn(t,function(h){return h[i]+h[r]}),a=au(t),o[e]=c(p,a)}return o};Do.prototype.trigger=function(e,t){var n=this._modeling,i,r=Re(e,function(s){return!(s.waypoints||s.host||s.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),Ie(i)&&(r=i),!(r.length<2||!i)){var o=h$[t],l=Gn(r,o),u=this._alignmentPosition(t,l);n.alignElements(l,u)}};const d$={__init__:["alignElements"],alignElements:["type",Do]};var wa=".entry",f$=1e3,Of=12,m$=300;function rn(e,t,n,i){this._canvas=e,this._eventBus=n,this._overlays=i;var r=Rt(t&&t.scale)?t.scale:{min:1,max:1.5};this._overlaysConfig={scale:r},this._current=null,this._init()}rn.$inject=["canvas","config.contextPad","eventBus","overlays"];rn.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,o=Ut(Ie(r)?r:[r],function(l){return wb(n,l)});o&&e.open(r,!0)}})};rn.prototype.registerProvider=function(e,t){t||(t=e,e=f$),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})};rn.prototype.getEntries=function(e){var t=this._getProviders(),n=Ie(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return J(t,function(r){if(yt(r[n])){var o=r[n](e);yt(o)?i=o(i):J(o,function(l,u){i[u]=l})}}),i};rn.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=Bt(o,"data-action"),r=t.originalEvent||t,e==="mouseover"?this._timeout=setTimeout(()=>{this._mouseout=this.triggerEntry(i,"hover",r,n)},m$):e==="mouseout"&&(clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null)),this.triggerEntry(i,e,r,n)):t.preventDefault()};rn.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,o=this._current.entries,l=o[e];if(l){var u=l.action;if(this._eventBus.fire("contextPad.trigger",{entry:l,event:n})!==!1){if(yt(u)){if(t==="click")return u(n,r,i)}else if(u[t])return u[t](n,r,i);n.preventDefault()}}}};rn.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))};rn.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers};rn.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this.getPad(e),i=n.html,r;J(t,function(o,l){var u=o.group||"default",s=tt(o.html||'<div class="entry" draggable="true"></div>'),p;Bt(s,"data-action",l),p=Ke("[data-group="+Lr(u)+"]",i),p||(p=tt('<div class="group"></div>'),Bt(p,"data-group",u),i.appendChild(p)),p.appendChild(s),o.className&&g$(s,o.className),o.title&&Bt(s,"title",o.title),o.imageUrl&&(r=tt("<img>"),Bt(r,"src",o.imageUrl),r.style.width="100%",r.style.height="100%",s.appendChild(r))}),nt(i).add("open"),this._current={target:e,entries:t,pad:n},this._eventBus.fire("contextPad.open",{current:this._current})};rn.prototype.getPad=function(e){if(this.isOpen())return this._current.pad;var t=this,n=this._overlays,i=tt('<div class="djs-context-pad"></div>'),r=this._getPosition(e),o=q({html:i},this._overlaysConfig,r);cn.bind(i,wa,"click",function(s){t.trigger("click",s)}),cn.bind(i,wa,"dragstart",function(s){t.trigger("dragstart",s)}),cn.bind(i,wa,"mouseover",function(s){t.trigger("mouseover",s)}),cn.bind(i,wa,"mouseout",function(s){t.trigger("mouseout",s)}),we.bind(i,"mousedown",function(s){s.stopPropagation()});var l=this._canvas.getRootElement();this._overlayId=n.add(l,"context-pad",o);var u=n.get(this._overlayId);return this._eventBus.fire("contextPad.create",{target:e,pad:u}),u};rn.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};rn.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return Ie(e)!==Ie(n)?!1:Ie(e)?e.length===n.length&&xo(e,function(i){return wb(n,i)}):n===e};rn.prototype.isShown=function(){return this.isOpen()&&this._overlays.isShown()};rn.prototype._getPosition=function(e){e=Qe(e)?v$(e):e;var t=Ie(e)?e:[e],n=vt(t);return{position:{left:n.x+n.width+Of,top:n.y-Of/2}}};function g$(e,t){var n=nt(e);t=Ie(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function wb(e,t){return e.indexOf(t)!==-1}function v$(e){return e.waypoints[e.waypoints.length-1]}const _b={__depends__:[cc,hc],contextPad:["type",rn]};var mc,pt,Eb,Ar,Nf,xb,Ju,dh,Qu,qu,ms={},Sb=[],y$=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,fh=Array.isArray;function Vi(e,t){for(var n in t)e[n]=t[n];return e}function Cb(e){var t=e.parentNode;t&&t.removeChild(e)}function Ab(e,t,n){var i,r,o,l={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:l[o]=t[o];if(arguments.length>2&&(l.children=arguments.length>3?mc.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)l[o]===void 0&&(l[o]=e.defaultProps[o]);return Qa(e,l,i,r,null)}function Qa(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++Eb,__i:-1,__u:0};return r==null&&pt.vnode!=null&&pt.vnode(o),o}function gc(e){return e.children}function qa(e,t){this.props=e,this.context=t}function Nr(e,t){if(t==null)return e.__?Nr(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Nr(e):null}function Tb(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Tb(e)}}function Bf(e){(!e.__d&&(e.__d=!0)&&Ar.push(e)&&!xl.__r++||Nf!==pt.debounceRendering)&&((Nf=pt.debounceRendering)||xb)(xl)}function xl(){var e,t,n,i,r,o,l,u;for(Ar.sort(Ju);e=Ar.shift();)e.__d&&(t=Ar.length,i=void 0,o=(r=(n=e).__v).__e,l=[],u=[],n.__P&&((i=Vi({},r)).__v=r.__v+1,pt.vnode&&pt.vnode(i),mh(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[o]:null,l,o??Nr(r),!!(32&r.__u),u),i.__v=r.__v,i.__.__k[i.__i]=i,Mb(l,i,u),i.__e!=o&&Tb(i)),Ar.length>t&&Ar.sort(Ju));xl.__r=0}function $b(e,t,n,i,r,o,l,u,s,p,a){var c,h,f,d,m,g=i&&i.__k||Sb,y=t.length;for(n.__d=s,b$(n,t,g),s=n.__d,c=0;c<y;c++)(f=n.__k[c])!=null&&typeof f!="boolean"&&typeof f!="function"&&(h=f.__i===-1?ms:g[f.__i]||ms,f.__i=c,mh(e,f,h,r,o,l,u,s,p,a),d=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&gh(h.ref,null,f),a.push(f.ref,f.__c||d,f)),m==null&&d!=null&&(m=d),65536&f.__u||h.__k===f.__k?(s&&typeof f.type=="string"&&!e.contains(s)&&(s=Nr(h)),s=Rb(f,s,e)):typeof f.type=="function"&&f.__d!==void 0?s=f.__d:d&&(s=d.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=s,n.__e=m}function b$(e,t,n){var i,r,o,l,u,s=t.length,p=n.length,a=p,c=0;for(e.__k=[],i=0;i<s;i++)l=i+c,(r=e.__k[i]=(r=t[i])==null||typeof r=="boolean"||typeof r=="function"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?Qa(null,r,null,null,null):fh(r)?Qa(gc,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?Qa(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)!=null?(r.__=e,r.__b=e.__b+1,u=w$(r,n,l,a),r.__i=u,o=null,u!==-1&&(a--,(o=n[u])&&(o.__u|=131072)),o==null||o.__v===null?(u==-1&&c--,typeof r.type!="function"&&(r.__u|=65536)):u!==l&&(u==l-1?c=u-l:u==l+1?c++:u>l?a>s-l?c+=u-l:c--:u<l&&c++,u!==i+c&&(r.__u|=65536))):(o=n[l])&&o.key==null&&o.__e&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=Nr(o)),ep(o,o,!1),n[l]=null,a--);if(a)for(i=0;i<p;i++)(o=n[i])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=Nr(o)),ep(o,o))}function Rb(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Rb(i[r],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function w$(e,t,n,i){var r=e.key,o=e.type,l=n-1,u=n+1,s=t[n];if(s===null||s&&r==s.key&&o===s.type&&!(131072&s.__u))return n;if(i>(s!=null&&!(131072&s.__u)?1:0))for(;l>=0||u<t.length;){if(l>=0){if((s=t[l])&&!(131072&s.__u)&&r==s.key&&o===s.type)return l;l--}if(u<t.length){if((s=t[u])&&!(131072&s.__u)&&r==s.key&&o===s.type)return u;u++}}return-1}function Ff(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||y$.test(t)?n:n+"px"}function _a(e,t,n,i,r){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||Ff(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||Ff(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=dh,e.addEventListener(t,o?qu:Qu,o)):e.removeEventListener(t,o?qu:Qu,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Wf(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=dh++;else if(t.t<n.u)return;return n(pt.event?pt.event(t):t)}}}function mh(e,t,n,i,r,o,l,u,s,p){var a,c,h,f,d,m,g,y,w,S,b,_,v,E,x,T,k=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(s=!!(32&n.__u),o=[u=t.__e=n.__e]),(a=pt.__b)&&a(t);e:if(typeof k=="function")try{if(y=t.props,w="prototype"in k&&k.prototype.render,S=(a=k.contextType)&&i[a.__c],b=a?S?S.props.value:a.__:i,n.__c?g=(c=t.__c=n.__c).__=c.__E:(w?t.__c=c=new k(y,b):(t.__c=c=new qa(y,b),c.constructor=k,c.render=E$),S&&S.sub(c),c.props=y,c.state||(c.state={}),c.context=b,c.__n=i,h=c.__d=!0,c.__h=[],c._sb=[]),w&&c.__s==null&&(c.__s=c.state),w&&k.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Vi({},c.__s)),Vi(c.__s,k.getDerivedStateFromProps(y,c.__s))),f=c.props,d=c.state,c.__v=t,h)w&&k.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),w&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(w&&k.getDerivedStateFromProps==null&&y!==f&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(y,b),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(y,c.__s,b)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(c.props=y,c.state=c.__s,c.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function($){$&&($.__=t)}),_=0;_<c._sb.length;_++)c.__h.push(c._sb[_]);c._sb=[],c.__h.length&&l.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(y,c.__s,b),w&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(f,d,m)})}if(c.context=b,c.props=y,c.__P=e,c.__e=!1,v=pt.__r,E=0,w){for(c.state=c.__s,c.__d=!1,v&&v(t),a=c.render(c.props,c.state,c.context),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[]}else do c.__d=!1,v&&v(t),a=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++E<25);c.state=c.__s,c.getChildContext!=null&&(i=Vi(Vi({},i),c.getChildContext())),w&&!h&&c.getSnapshotBeforeUpdate!=null&&(m=c.getSnapshotBeforeUpdate(f,d)),$b(e,fh(T=a!=null&&a.type===gc&&a.key==null?a.props.children:a)?T:[T],t,n,i,r,o,l,u,s,p),c.base=t.__e,t.__u&=-161,c.__h.length&&l.push(c),g&&(c.__E=c.__=null)}catch($){t.__v=null,s||o!=null?(t.__e=u,t.__u|=s?160:32,o[o.indexOf(u)]=null):(t.__e=n.__e,t.__k=n.__k),pt.__e($,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=_$(n.__e,t,n,i,r,o,l,s,p);(a=pt.diffed)&&a(t)}function Mb(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)gh(n[i],n[++i],n[++i]);pt.__c&&pt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){pt.__e(o,r.__v)}})}function _$(e,t,n,i,r,o,l,u,s){var p,a,c,h,f,d,m,g=n.props,y=t.props,w=t.type;if(w==="svg"?r="http://www.w3.org/2000/svg":w==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(p=0;p<o.length;p++)if((f=o[p])&&"setAttribute"in f==!!w&&(w?f.localName===w:f.nodeType===3)){e=f,o[p]=null;break}}if(e==null){if(w===null)return document.createTextNode(y);e=document.createElementNS(r,w,y.is&&y),o=null,u=!1}if(w===null)g===y||u&&e.data===y||(e.data=y);else{if(o=o&&mc.call(e.childNodes),g=n.props||ms,!u&&o!=null)for(g={},p=0;p<e.attributes.length;p++)g[(f=e.attributes[p]).name]=f.value;for(p in g)if(f=g[p],p!="children"){if(p=="dangerouslySetInnerHTML")c=f;else if(p!=="key"&&!(p in y)){if(p=="value"&&"defaultValue"in y||p=="checked"&&"defaultChecked"in y)continue;_a(e,p,null,f,r)}}for(p in y)f=y[p],p=="children"?h=f:p=="dangerouslySetInnerHTML"?a=f:p=="value"?d=f:p=="checked"?m=f:p==="key"||u&&typeof f!="function"||g[p]===f||_a(e,p,f,g[p],r);if(a)u||c&&(a.__html===c.__html||a.__html===e.innerHTML)||(e.innerHTML=a.__html),t.__k=[];else if(c&&(e.innerHTML=""),$b(e,fh(h)?h:[h],t,n,i,w==="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,l,o?o[0]:n.__k&&Nr(n,0),u,s),o!=null)for(p=o.length;p--;)o[p]!=null&&Cb(o[p]);u||(p="value",d!==void 0&&(d!==e[p]||w==="progress"&&!d||w==="option"&&d!==g[p])&&_a(e,p,d,g[p],r),p="checked",m!==void 0&&m!==e[p]&&_a(e,p,m,g[p],r))}return e}function gh(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(i){pt.__e(i,n)}}function ep(e,t,n){var i,r;if(pt.unmount&&pt.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||gh(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){pt.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&ep(i[r],t,n||typeof e.type!="function");n||e.__e==null||Cb(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function E$(e,t,n){return this.constructor(e,n)}function kb(e,t,n){var i,r,o,l;pt.__&&pt.__(e,t),r=(i=typeof n=="function")?null:n&&n.__k||t.__k,o=[],l=[],mh(t,e=(!i&&n||t).__k=Ab(gc,null,[e]),r||ms,ms,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?mc.call(t.childNodes):null,o,!i&&n?n:r?r.__e:t.firstChild,i,l),Mb(o,e,l)}mc=Sb.slice,pt={__e:function(e,t,n,i){for(var r,o,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),l=r.__d),l)return r.__E=r}catch(u){e=u}throw e}},Eb=0,qa.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Vi({},this.state),typeof e=="function"&&(e=e(Vi({},n),this.props)),e&&Vi(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Bf(this))},qa.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Bf(this))},qa.prototype.render=gc,Ar=[],xb=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ju=function(e,t){return e.__v.__b-t.__v.__b},xl.__r=0,dh=0,Qu=Wf(!1),qu=Wf(!0);var Ib=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var l=t[o++],u=t[o]?(t[0]|=l?1:2,n[t[o++]]):t[++o];l===3?i[0]=u:l===4?i[1]=Object.assign(i[1]||{},u):l===5?(i[1]=i[1]||{})[t[++o]]=u:l===6?i[1][t[++o]]+=u+"":l?(r=e.apply(u,Ib(e,u,n,["",null])),i.push(r),u[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(u)}return i},Hf=new Map;function x$(e){var t=Hf.get(this);return t||(t=new Map,Hf.set(this,t)),(t=Ib(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,o=1,l="",u="",s=[0],p=function(h){o===1&&(h||(l=l.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?s.push(0,h,l):o===3&&(h||l)?(s.push(3,h,l),o=2):o===2&&l==="..."&&h?s.push(4,h,0):o===2&&l&&!h?s.push(5,0,!0,l):o>=5&&((l||!h&&o===5)&&(s.push(o,0,l,r),o=6),h&&(s.push(o,h,0,r),o=6)),l=""},a=0;a<n.length;a++){a&&(o===1&&p(),p(a));for(var c=0;c<n[a].length;c++)i=n[a][c],o===1?i==="<"?(p(),s=[s],o=3):l+=i:o===4?l==="--"&&i===">"?(o=1,l=""):l=i+l[0]:u?i===u?u="":l+=i:i==='"'||i==="'"?u=i:i===">"?(p(),o=1):o&&(i==="="?(o=5,r=l,l=""):i==="/"&&(o<5||n[a][c+1]===">")?(p(),o===3&&(s=s[0]),o=s,(s=s[0]).push(2,0,o),o=0):i===" "||i==="	"||i===`
`||i==="\r"?(p(),o=2):l+=i),o===3&&l==="!--"&&(o=4,s=s[0])}return p(),s}(e)),t),arguments,[])).length>1?t:t[0]}var St=x$.bind(Ab),vo,mt,lu,jf,gs=0,Lb=[],_t=pt,Gf=_t.__b,Vf=_t.__r,zf=_t.diffed,Uf=_t.__c,Yf=_t.unmount,Xf=_t.__;function vc(e,t){_t.__h&&_t.__h(mt,e,gs||t),gs=0;var n=mt.__H||(mt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function cu(e){return gs=1,S$(Pb,e)}function S$(e,t,n){var i=vc(vo++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):Pb(void 0,t),function(u){var s=i.__N?i.__N[0]:i.__[0],p=i.t(s,u);s!==p&&(i.__N=[p,i.__[1]],i.__c.setState({}))}],i.__c=mt,!mt.u)){var r=function(u,s,p){if(!i.__c.__H)return!0;var a=i.__c.__H.__.filter(function(h){return!!h.__c});if(a.every(function(h){return!h.__N}))return!o||o.call(this,u,s,p);var c=!1;return a.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(c=!0)}}),!(!c&&i.__c.props===u)&&(!o||o.call(this,u,s,p))};mt.u=!0;var o=mt.shouldComponentUpdate,l=mt.componentWillUpdate;mt.componentWillUpdate=function(u,s,p){if(this.__e){var a=o;o=void 0,r(u,s,p),o=a}l&&l.call(this,u,s,p)},mt.shouldComponentUpdate=r}return i.__N||i.__}function uu(e,t){var n=vc(vo++,3);!_t.__s&&yh(n.__H,t)&&(n.__=e,n.i=t,mt.__H.__h.push(n))}function Sl(e,t){var n=vc(vo++,4);!_t.__s&&yh(n.__H,t)&&(n.__=e,n.i=t,mt.__h.push(n))}function vh(e){return gs=5,vs(function(){return{current:e}},[])}function vs(e,t){var n=vc(vo++,7);return yh(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function uo(e,t){return gs=8,vs(function(){return e},t)}function C$(){for(var e;e=Lb.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(el),e.__H.__h.forEach(tp),e.__H.__h=[]}catch(t){e.__H.__h=[],_t.__e(t,e.__v)}}_t.__b=function(e){mt=null,Gf&&Gf(e)},_t.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Xf&&Xf(e,t)},_t.__r=function(e){Vf&&Vf(e),vo=0;var t=(mt=e.__c).__H;t&&(lu===mt?(t.__h=[],mt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(el),t.__h.forEach(tp),t.__h=[],vo=0)),lu=mt},_t.diffed=function(e){zf&&zf(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Lb.push(t)!==1&&jf===_t.requestAnimationFrame||((jf=_t.requestAnimationFrame)||A$)(C$)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),lu=mt=null},_t.__c=function(e,t){t.some(function(n){try{n.__h.forEach(el),n.__h=n.__h.filter(function(i){return!i.__||tp(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],_t.__e(i,n.__v)}}),Uf&&Uf(e,t)},_t.unmount=function(e){Yf&&Yf(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{el(i)}catch(r){t=r}}),n.__H=void 0,t&&_t.__e(t,n.__v))};var Zf=typeof requestAnimationFrame=="function";function A$(e){var t,n=function(){clearTimeout(i),Zf&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);Zf&&(t=requestAnimationFrame(n))}function el(e){var t=mt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),mt=t}function tp(e){var t=mt;e.__c=e.__(),mt=t}function yh(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Pb(e,t){return typeof t=="function"?t(e):t}function Db(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Db(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Cl(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Db(e))&&(i&&(i+=" "),i+=t);return i}function T$(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:o}=e;return St`
    <li
      class=${Cl("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      onClick=${o}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${l=>o(l,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Cl("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&St`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&St`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?St`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&St`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&St`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${l=>l.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function $$(e){const{selectedEntry:t,setSelectedEntry:n,entries:i,...r}=e,o=vh(),l=vs(()=>R$(i),[i]);return Sl(()=>{const u=o.current;if(!u)return;const s=u.querySelector(".selected");s&&M$(s)},[t]),St`
    <div class="djs-popup-results" ref=${o}>
      ${l.map(u=>St`
        ${u.name&&St`
          <div key=${u.id} class="entry-header" title=${u.name}>
            ${u.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${u.id}>
          ${u.entries.map(s=>St`
            <${T$}
              key=${s.id}
              entry=${s}
              selected=${s===t}
              onMouseEnter=${()=>n(s)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function R$(e){const t=[],n=o=>t.find(l=>o.id===l.id),i=o=>!!n(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const l=o.group?r(o.group):{id:"default"};i(l)?n(l).entries.push(o):t.push({...l,entries:[o]})}),t}function M$(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function k$(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:o,title:l,width:u,scale:s,search:p,emptyPlaceholder:a,entries:c,onOpened:h,onClosed:f}=e,d=vs(()=>Rt(p)?c.length>5:!1,[p,c]),m=vh(),[g,y]=cu(""),w=uo((R,A)=>{if(!d)return R;const C=M=>{if(!A)return(M.rank||0)>=0;if(M.searchable===!1)return!1;const I=[M.description||"",M.label||"",M.search||""].map(D=>D.toLowerCase());return A.toLowerCase().split(/\s/g).every(D=>I.some(B=>B.includes(D)))};return R.filter(C)},[d]),[S,b]=cu(w(c,g)),[_,v]=cu(S[0]),E=uo(R=>{(!_||!R.includes(_))&&v(R[0]),b(R)},[_,b,v]);uu(()=>{E(w(c,g))},[g,c]),uu(()=>{const R=A=>{if(A.key==="Escape")return A.preventDefault(),t()};return document.documentElement.addEventListener("keydown",R),()=>{document.documentElement.removeEventListener("keydown",R)}},[]),Sl(()=>{m.current&&m.current.focus()},[]);const x=uo(R=>{let C=S.indexOf(_)+R;C<0&&(C=S.length-1),C>=S.length&&(C=0),v(S[C])},[S,_,v]),T=uo(R=>{if(R.key==="Enter"&&_)return n(R,_);if(R.key==="ArrowUp"||R.key==="Tab"&&R.shiftKey)return x(-1),R.preventDefault();if(R.key==="ArrowDown"||R.key==="Tab")return x(1),R.preventDefault()},[n,t,_,x]),k=uo(R=>{Gp(R.target,"input")&&y(()=>R.target.value)},[y]);uu(()=>(h(),()=>{f()}),[]);const $=vs(()=>l||r.length>0,[l,r]);return St`
    <${Kf}
      onClose=${t}
      onKeyup=${k}
      onKeydown=${T}
      className=${i}
      position=${o}
      width=${u}
      scale=${s}
    >
      ${$&&St`
        <div class="djs-popup-header">
          <h3 class="djs-popup-title" title=${l}>${l}</h3>
          ${r.map(R=>St`
            <span
              class=${L$(R,R===_)}
              onClick=${A=>n(A,R)}
              title=${R.title||R.label}
              data-id=${R.id}
              onMouseEnter=${()=>v(R)}
              onMouseLeave=${()=>v(null)}
            >
            ${R.imageUrl&&St`<img class="djs-popup-entry-icon" src=${R.imageUrl} alt="" />`||R.imageHtml&&St`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:R.imageHtml}} />`}

              ${R.label?St`
                <span class="djs-popup-label">${R.label}</span>
              `:null}
            </span>
          `)}
        </div>
      `}
      ${c.length>0&&St`
        <div class="djs-popup-body">

          ${d&&St`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input
                ref=${m}
                type="text"
              />
          </div>
          `}

          <${$$}
            entries=${S}
            selectedEntry=${_}
            setSelectedEntry=${v}
            onAction=${n}
          />
        </div>
        ${a&&S.length===0&&St`
          <div class="djs-popup-no-results">${yt(a)?a(g):a}</div>
        `}
      `}
    </${Kf}>
  `}function Kf(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:o,position:l}=e,u=vh(),s=uo(p=>{ir(p.target,".djs-popup",!0)||t()},[t]);return Sl(()=>{if(typeof l!="function")return;const p=u.current,a=l(p);p.style.left=`${a.x}px`,p.style.top=`${a.y}px`},[u.current,l]),Sl(()=>{u.current&&u.current.focus()},[]),St`
    <div
      class="djs-popup-backdrop"
      onClick=${s}
    >
      <div
        class=${Cl("djs-popup",r)}
        style=${I$(e)}
        onKeydown=${n}
        onKeyup=${i}
        ref=${u}
        tabIndex="-1"
      >
        ${o}
      </div>
    </div>
  `}function I$(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`}}function L$(e,t){return Cl("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}var P$="data-id",Ob=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],D$=1e3;function ct(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var i=Rt(e&&e.scale)?e.scale:{min:1,max:1.5};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",r=>{const o=this.isOpen()&&this._current.target;r.element===o&&this._render()})}ct.$inject=["config.popupMenu","eventBus","canvas"];ct.prototype._render=function(){const{position:e,className:t,entries:n,headerEntries:i,emptyPlaceholder:r,options:o}=this._current,l=Object.entries(n).map(([h,f])=>({id:h,...f})),u=Object.entries(i).map(([h,f])=>({id:h,...f})),s=e&&(h=>this._ensureVisible(h,e)),p=this._updateScale(this._current.container);kb(St`
      <${k$}
        onClose=${h=>this.close(h)}
        onSelect=${(h,f,d)=>this.trigger(h,f,d)}
        position=${s}
        className=${t}
        entries=${l}
        headerEntries=${u}
        emptyPlaceholder=${r}
        scale=${p}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${{...o}}
      />
    `,this._current.container)};ct.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:o,emptyPlaceholder:l}=this._getContext(e,t);this._current={position:n,className:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:l,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()};ct.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(i).length||Object.keys(r).length)}};ct.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)};ct.prototype.reset=function(){const e=this._current.container;kb(null,e),ri(e)};ct.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)};ct.prototype._onOpened=function(){this._emit("opened")};ct.prototype._onClosed=function(){this._emit("closed")};ct.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=tt(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i};ct.prototype._bindAutoClose=function(){this._eventBus.once(Ob,this.close,this)};ct.prototype._unbindAutoClose=function(){this._eventBus.off(Ob,this.close,this)};ct.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,r=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),Rt(n)&&e<n&&(r=n),Rt(i)&&e>i&&(r=i)),r};ct.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},o=t.x,l=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(o=t.x-i.width,l=t.y-i.height):r.x?(o=t.x-i.width,l=t.y):r.y&&t.y<i.height?(o=t.x,l=10):r.y&&(o=t.x,l=t.y-i.height),t.y<n.top&&(l=t.y+i.height),{x:o,y:l}};ct.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty};ct.prototype.registerProvider=function(e,t,n){n||(n=t,t=D$),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})};ct.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers};ct.prototype._getEntries=function(e,t){var n={};return J(t,function(i){if(!i.getPopupMenuEntries){J(i.getEntries(e),function(o){var l=o.id;if(!l)throw new Error("entry ID is missing");n[l]=si(o,["id"])});return}var r=i.getPopupMenuEntries(e);yt(r)?n=r(n):J(r,function(o,l){n[l]=o})}),n};ct.prototype._getHeaderEntries=function(e,t){var n={};return J(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;J(i.getHeaderEntries(e),function(o){var l=o.id;if(!l)throw new Error("entry ID is missing");n[l]=si(o,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);yt(r)?n=r(n):J(r,function(o,l){n[l]=o})}),n};ct.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>yt(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()};ct.prototype.isOpen=function(){return!!this._current};ct.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=ir(e.delegateTarget||e.target,".entry",!0),o=Bt(r,P$);t={id:o,...this._getEntry(o)}}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(yt(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}};ct.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};const bh={__init__:["popupMenu"],popupMenu:["type",ct]};var O$={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`};const Nb=O$;var N$=900;function Oo(e,t,n,i){e.registerProvider(N$,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}Oo.$inject=["contextPad","popupMenu","translate","canvas"];Oo.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Oo.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")};Oo.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${Nb.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);q(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}};Oo.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var B$=["left","center","right","top","middle","bottom"];function Hs(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}Hs.$inject=["popupMenu","alignElements","translate","rules"];Hs.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};Hs.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})};Hs.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return J(B$,function(o){r["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:Nb[o],action:function(){t.trigger(e,o),i.close()}}}),r};function kn(e){se.call(this,e),this.init()}kn.$inject=["eventBus"];de(kn,se);kn.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,l,u){return n(o)},!0)})};kn.prototype.init=function(){};function yc(e){kn.call(this,e)}yc.$inject=["eventBus"];de(yc,kn);yc.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=Re(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=tc(n),n.length<2?!1:n})};const F$={__depends__:[d$,_b,bh],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",Oo],alignElementsMenuProvider:["type",Hs],bpmnAlignElements:["type",yc]};var W$=10,Bb=50,H$=250;function wh(e,t,n,i){for(var r;r=j$(e,n,t);)n=i(t,n,r);return n}function _h(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var l=e[o];if(l){var u=o==="x"?"width":"height",s=l.margin,p=l.minDistance;s<0?r[o]=Math.min(i[o]+s-t[u]/2,n[o]-p+s):r[o]=Math.max(i[o]+i[u]+s+t[u]/2,n[o]+p+s)}}),r}}function j$(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=V$(e);return je(r,function(o){if(o===n)return!1;var l=zt(o,i,W$);return l==="intersect"})}function G$(e,t){t||(t={});function n(d){return d.source===e?1:-1}var i=t.defaultDistance||Bb,r=t.direction||"e",o=t.filter,l=t.getWeight||n,u=t.maxDistance||H$,s=t.reference||"start";o||(o=Y$);function p(d,m){return r==="n"?s==="start"?ye(d).top-ye(m).bottom:s==="center"?ye(d).top-xe(m).y:ye(d).top-ye(m).top:r==="w"?s==="start"?ye(d).left-ye(m).right:s==="center"?ye(d).left-xe(m).x:ye(d).left-ye(m).left:r==="s"?s==="start"?ye(m).top-ye(d).bottom:s==="center"?xe(m).y-ye(d).bottom:ye(m).bottom-ye(d).bottom:s==="start"?ye(m).left-ye(d).right:s==="center"?xe(m).x-ye(d).right:ye(m).right-ye(d).right}var a=e.incoming.filter(o).map(function(d){var m=l(d),g=m<0?p(d.source,e):p(e,d.source);return{id:d.source.id,distance:g,weight:m}}),c=e.outgoing.filter(o).map(function(d){var m=l(d),g=m>0?p(e,d.target):p(d.target,e);return{id:d.target.id,distance:g,weight:m}}),h=a.concat(c).reduce(function(d,m){return d[m.id+"__weight_"+m.weight]=m,d},{}),f=pn(h,function(d,m){var g=m.distance,y=m.weight;return g<0||g>u||(d[String(g)]||(d[String(g)]=0),d[String(g)]+=1*y,(!d.distance||d[d.distance]<d[String(g)])&&(d.distance=g)),d},{});return f.distance||i}function V$(e){var t=pu(e);return e.host&&(t=t.concat(pu(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(pu(i))},[]))),t}function pu(e){return U$(e).concat(z$(e))}function z$(e){return e.incoming.map(function(t){return t.source})}function U$(e){return e.outgoing.map(function(t){return t.target})}function Y$(){return!0}var X$=100;function Fb(e,t,n){e.on("autoPlace",X$,function(i){var r=i.shape,o=i.source;return Z$(o,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){e.fire("autoPlace.start",{source:i,shape:r});var l=e.fire("autoPlace",{source:i,shape:r}),u=t.appendShape(i,r,l,i.parent,o);return e.fire("autoPlace.end",{source:i,shape:u}),u}}Fb.$inject=["eventBus","modeling","canvas"];function Z$(e,t,n){n||(n={});var i=n.defaultDistance||Bb,r=xe(e),o=ye(e);return{x:o.right+i+t.width/2,y:r.y}}function Wb(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}Wb.$inject=["eventBus","selection"];const K$={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Fb],autoPlaceSelectionBehavior:["type",Wb]};function Al(e,t){for(un(t)&&(t=[t]);e=e.parent;)if(Me(e,t))return e;return null}function Hb(e,t){if(N(t,"bpmn:TextAnnotation"))return q$(e,t);if(Me(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return eR(e,t);if(N(t,"bpmn:FlowNode"))return J$(e,t)}function J$(e,t){var n=ye(e),i=xe(e),r=G$(e,{filter:function(a){return N(a,"bpmn:SequenceFlow")}}),o=30,l=80,u="left";N(e,"bpmn:BoundaryEvent")&&(u=zt(e,e.host,-25),u.indexOf("top")!==-1&&(o*=-1));var s={x:n.right+r+t.width/2,y:i.y+Q$(u,l)},p={y:{margin:o,minDistance:l}};return wh(e,t,s,_h(p))}function Q$(e,t){return e.includes("top")?-1*t:e.includes("bottom")?t:0}function q$(e,t){var n=ye(e),i={x:n.right+t.width/2,y:n.top-50-t.height/2};Qe(e)&&(i=xe(e),i.x+=100,i.y-=50);var r={y:{margin:-30,minDistance:20}};return wh(e,t,i,_h(r))}function eR(e,t){var n=ye(e),i={x:n.right-10+t.width/2,y:n.bottom+40+t.width/2},r={x:{margin:30,minDistance:30}};return wh(e,t,i,_h(r))}function jb(e){e.on("autoPlace",function(t){var n=t.shape,i=t.source;return Hb(i,n)})}jb.$inject=["eventBus"];const Eh={__depends__:[K$],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",jb]};function Ti(e,t,n,i){se.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var l=o.context,u=l.hints||{},s=l.shape,p=l.parent||l.newParent;u.autoResize!==!1&&r._expand([s],p)}),this.postExecuted(["elements.move"],function(o){var l=o.context,u=ll(Cp(l.closure.topLevel)),s=l.hints,p=s?s.autoResize:!0;if(p!==!1){var a=So(u,function(c){return c.parent.id});J(a,function(c,h){Ie(p)&&(c=c.filter(function(f){return je(p,Fn({id:f.id}))})),r._expand(c,h)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var l=o.context,u=l.hints,s=l.shape;u&&u.autoResize===!1||s.collapsed||r._expand(s.children||[],s)}),this.postExecuted(["shape.resize"],function(o){var l=o.context,u=l.hints,s=l.shape,p=s.parent;u&&u.autoResize===!1||p&&r._expand([s],p)})}Ti.$inject=["eventBus","elementRegistry","modeling","rules"];de(Ti,se);Ti.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=ye(vt(e)),o=ye(t),l={};return r.top-o.top<i.top&&(l.top=r.top-n.top),r.left-o.left<i.left&&(l.left=r.left-n.left),o.right-r.right<i.right&&(l.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(l.bottom=r.bottom+n.bottom),nc(q({},o,l))};Ti.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(tR(i,t)){var r=nR(Vn(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}};Ti.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}};Ti.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}};Ti.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function tR(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function nR(e,t){var n="";return e=ye(e),t=ye(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function bc(e){e.invoke(Ti,this)}bc.$inject=["injector"];de(bc,Ti);bc.prototype.resize=function(e,t,n){N(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function js(e){kn.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}js.$inject=["eventBus"];de(js,kn);js.prototype.canResize=function(e,t){return!1};function wc(e,t){js.call(this,e),this._modeling=t}de(wc,js);wc.$inject=["eventBus","modeling"];wc.prototype.canResize=function(e,t){if(N(t.di,"bpmndi:BPMNPlane")||!N(t,"bpmn:Participant")&&!N(t,"bpmn:Lane")&&!N(t,"bpmn:SubProcess"))return!1;var n=!0;return J(e,function(i){if(N(i,"bpmn:Lane")||Ve(i)){n=!1;return}}),n};const iR={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",bc],bpmnAutoResizeProvider:["type",wc]};var Jf=1500;function Gb(e,t,n){var i=this,r=n.get("dragging",!1);function o(l){if(!l.hover){var u=l.originalEvent,s=i._findTargetGfx(u),p=s&&e.get(s);s&&p&&(l.stopPropagation(),r.hover({element:p,gfx:s}),r.move(u))}}r&&t.on("drag.start",function(l){t.once("drag.move",Jf,function(u){o(u)})}),function(){var l,u;t.on("element.hover",function(s){l=s.gfx,u=s.element}),t.on("element.hover",Jf,function(s){u&&t.fire("element.out",{element:u,gfx:l})}),t.on("element.out",function(){l=null,u=null})}(),this._findTargetGfx=function(l){var u,s;if(l instanceof MouseEvent)return u=Or(l),s=document.elementFromPoint(u.x,u.y),rR(s)}}Gb.$inject=["elementRegistry","eventBus","injector"];function rR(e){return ir(e,"svg, .djs-element",!0)}const oR={__init__:["hoverFix"],hoverFix:["type",Gb]};var io=Math.round,Qf="djs-drag-active";function xr(e){e.preventDefault()}function sR(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function aR(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function Vb(e,t,n,i){var r={threshold:5,trapClick:!0},o;function l(S){var b=t.viewbox(),_=t._container.getBoundingClientRect();return{x:b.x+(S.x-_.left)/b.scale,y:b.y+(S.y-_.top)/b.scale}}function u(S,b){b=b||o;var _=e.createEvent(q({},b.payload,b.data,{isTouch:b.isTouch}));return e.fire("drag."+S,_)===!1?!1:e.fire(b.prefix+"."+S,_)}function s(S){var b=S.filter(function(_){return i.get(_.id)});b.length&&n.select(b)}function p(S,b){var _=o.payload,v=o.displacement,E=o.globalStart,x=Or(S),T=Wn(x,E),k=o.localStart,$=l(x),R=Wn($,k);if(!o.active&&(b||aR(T)>o.threshold)){if(q(_,{x:io(k.x+v.x),y:io(k.y+v.y),dx:0,dy:0},{originalEvent:S}),u("start")===!1)return g();o.active=!0,o.keepSelection||(_.previousSelection=n.get(),n.select(null)),o.cursor&&fc(o.cursor),t.addMarker(t.getRootElement(),Qf)}su(S),o.active&&(q(_,{x:io($.x+v.x),y:io($.y+v.y),dx:io(R.x),dy:io(R.y)},{originalEvent:S}),u("move"))}function a(S){var b,_=!0;o.active&&(S&&(o.payload.originalEvent=S,su(S)),_=u("end")),_===!1&&u("rejected"),b=y(_!==!0),u("ended",b)}function c(S){Lt("Escape",S)&&(xr(S),g())}function h(S){var b;o.active&&(b=fb(e),setTimeout(b,400),xr(S)),a(S)}function f(S){p(S)}function d(S){var b=o.payload;b.hoverGfx=S.gfx,b.hover=S.element,u("hover")}function m(S){u("out");var b=o.payload;b.hoverGfx=null,b.hover=null}function g(S){var b;if(o){var _=o.active;_&&u("cancel"),b=y(S),_&&u("canceled",b)}}function y(S){var b,_;u("cleanup"),db(),o.trapClick?_=h:_=a,we.unbind(document,"mousemove",p),we.unbind(document,"dragstart",xr),we.unbind(document,"selectstart",xr),we.unbind(document,"mousedown",_,!0),we.unbind(document,"mouseup",_,!0),we.unbind(document,"keyup",c),we.unbind(document,"touchstart",f,!0),we.unbind(document,"touchcancel",g,!0),we.unbind(document,"touchmove",p,!0),we.unbind(document,"touchend",a,!0),e.off("element.hover",d),e.off("element.out",m),t.removeMarker(t.getRootElement(),Qf);var v=o.payload.previousSelection;return S!==!1&&v&&!n.get().length&&s(v),b=o,o=null,b}function w(S,b,_,v){o&&g(!1),typeof b=="string"&&(v=_,_=b,b=null),v=q({},r,v||{});var E=v.data||{},x,T,k,$,R;v.trapClick?$=h:$=a,S?(x=Io(S)||S,T=Or(S),su(S),x.type==="dragstart"&&xr(x)):(x=null,T={x:0,y:0}),k=l(T),b||(b=k),R=sR(x),o=q({prefix:_,data:E,payload:{},globalStart:T,displacement:Wn(b,k),localStart:k,isTouch:R},v),v.manual||(R?(we.bind(document,"touchstart",f,!0),we.bind(document,"touchcancel",g,!0),we.bind(document,"touchmove",p,!0),we.bind(document,"touchend",a,!0)):(we.bind(document,"mousemove",p),we.bind(document,"dragstart",xr),we.bind(document,"selectstart",xr),we.bind(document,"mousedown",$,!0),we.bind(document,"mouseup",$,!0)),we.bind(document,"keyup",c),e.on("element.hover",d),e.on("element.out",m)),u("init"),v.autoActivate&&p(S,!0)}e.on("diagram.destroy",g),this.init=w,this.move=p,this.hover=d,this.out=m,this.end=a,this.cancel=g,this.context=function(){return o},this.setOptions=function(S){q(r,S)}}Vb.$inject=["eventBus","canvas","selection","elementRegistry"];const $i={__depends__:[oR,ai],dragging:["type",Vb]};function No(e,t,n){this._canvas=n,this._opts=q({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}No.$inject=["config.autoScroll","eventBus","canvas"];No.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var l=0,u=0,s=0;s<4;s++)lR(o[s],n.scrollThresholdOut[s],n.scrollThresholdIn[s])&&(s===0?l=n.scrollStep:s==1?u=n.scrollStep:s==2?l=-n.scrollStep:s==3&&(u=-n.scrollStep));(l!==0||u!==0)&&(t.scroll({dx:l,dy:u}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function lR(e,t,n){return t<e&&e<n}No.prototype.stopScroll=function(){clearTimeout(this._scrolling)};No.prototype.setOptions=function(e){this._opts=q({},this._opts,e)};No.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Or(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};const cR={__depends__:[$i],__init__:["autoScroll"],autoScroll:["type",No]};function xh(e){this._commandStack=e.get("commandStack",!1)}xh.$inject=["injector"];xh.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};const ci={__init__:["rules"],rules:["type",xh]};var Ea=Math.round,uR=Math.max;function pR(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function hR(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var zb=10;function dR(e,t){var n,i;for(n=0;i=e[n];n++)if(Ls(i,t)<=zb)return{point:e[n],bendpoint:!0,index:n};return null}function fR(e,t){var n=my(pR(t,zb),hR(e)),i=n[0],r=n[n.length-1],o;return i?i!==r?i.segment2!==r.segment2?(o=uR(i.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:Ea(i.x+r.x)/2,y:Ea(i.y+r.y)/2},index:i.segment2}:{point:{x:Ea(i.x),y:Ea(i.y)},index:i.segment2}:null}function np(e,t){return dR(e,t)||fR(e,t)}function Ub(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function qf(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function mR(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function gR(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/o}function Sh(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=gR([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function Yb(e,t){var n=Sh(e,t),i={x:n.x-e.x,y:n.y-e.y};return Ub(i)}function Tl(e,t){return Ub({x:e.x-t.x,y:e.y-t.y})}var Xb="djs-bendpoint",Zb="djs-segment-dragger";function vR(e,t){var n=Or(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var o=e.viewbox();return{x:o.x+(n.x-r.x)/o.scale,y:o.y+(n.y-r.y)/o.scale}}function ip(e,t,n){var i=vR(e,n),r=np(t,i);return r}function rp(e,t){var n=he("g");Fe(n).add(Xb),me(e,n);var i=he("circle");ce(i,{cx:0,cy:0,r:4}),Fe(i).add("djs-visual"),me(n,i);var r=he("circle");return ce(r,{cx:0,cy:0,r:10}),Fe(r).add("djs-hit"),me(n,r),t&&Fe(n).add(t),n}function yR(e,t,n,i){var r=he("g");me(e,r);var o=18,l=6,u=11,s=wR(t,n,i),p=l+u,a=he("rect");ce(a,{x:-o/2,y:-l/2,width:o,height:l}),Fe(a).add("djs-visual"),me(r,a);var c=he("rect");return ce(c,{x:-s/2,y:-p/2,width:s,height:p}),Fe(c).add("djs-hit"),me(r,c),Ry(r,i==="v"?90:0),r}function Kb(e,t,n){var i=he("g"),r=Gu(t,n),o=fi(t,n);return me(e,i),yR(i,t,n,o),Fe(i).add(Zb),Fe(i).add(o==="h"?"horizontal":"vertical"),Ft(i,r.x,r.y),i}function op(e){return Math.abs(Math.round(e*2/3))}function bR(e,t){var n=_R(e,t);return Sh(e,n)}function wR(e,t,n){var i=t.x-e.x,r=t.y-e.y;return op(n==="h"?i:r)}function _R(e,t){for(var n=t.waypoints,i=1/0,r,o=0;o<n.length-1;o++){var l=n[o],u=n[o+1],s=Yb(e,[l,u]);s<i&&(i=s,r=o)}return[n[r],n[r+1]]}function Jb(e,t,n,i,r){function o(S,b,_){var v=S.index,E=S.point,x,T,k,$,R,A;return v<=0||S.bendpoint?!1:(x=b[v-1],T=b[v],k=Gu(x,T),$=fi(x,T),R=Math.abs(E.x-k.x),A=Math.abs(E.y-k.y),$&&R<=_&&A<=_)}function l(S,b){var _=S.waypoints,v,E,x,T;return b.index<=0||b.bendpoint||(v={start:_[b.index-1],end:_[b.index]},E=fi(v.start,v.end),!E)?null:(E==="h"?x=v.end.x-v.start.x:x=v.end.y-v.start.y,T=op(x)/2,T)}function u(S,b){var _=b.waypoints,v=ip(t,_,S),E;if(v)return E=l(b,v),o(v,_,E)?r.start(S,b,v.index):i.start(S,b,v.index,!v.bendpoint),!0}function s(S,b,_){we.bind(S,b,function(v){n.triggerMouseEvent(b,v,_),v.stopPropagation()})}function p(S,b){var _=t.getLayer("overlays"),v=Ke('.djs-bendpoints[data-element-id="'+Lr(S.id)+'"]',_);return!v&&b&&(v=he("g"),ce(v,{"data-element-id":S.id}),Fe(v).add("djs-bendpoints"),me(_,v),s(v,"mousedown",S),s(v,"click",S),s(v,"dblclick",S)),v}function a(S,b){return Ke('.djs-segment-dragger[data-segment-idx="'+S+'"]',b)}function c(S,b){b.waypoints.forEach(function(_,v){var E=rp(S);me(S,E),Ft(E,_.x,_.y)}),rp(S,"floating")}function h(S,b){for(var _=b.waypoints,v,E,x,T=1;T<_.length;T++)v=_[T-1],E=_[T],fi(v,E)&&(x=Kb(S,v,E),ce(x,{"data-segment-idx":T}),s(x,"mousemove",b))}function f(S){J(vl("."+Xb,S),function(b){ut(b)})}function d(S){J(vl("."+Zb,S),function(b){ut(b)})}function m(S){var b=p(S);return b||(b=p(S,!0),c(b,S),h(b,S)),b}function g(S){var b=p(S);b&&(d(b),f(b),h(b,S),c(b,S))}function y(S,b){var _=Ke(".floating",S),v=b.point;_&&Ft(_,v.x,v.y)}function w(S,b,_){var v=a(b.index,S),E=_[b.index-1],x=_[b.index],T=b.point,k=Gu(E,x),$=fi(E,x),R,A;v&&(R=ER(v),A={x:T.x-k.x,y:T.y-k.y},$==="v"&&(A={x:A.y,y:A.x}),Ft(R,A.x,A.y))}e.on("connection.changed",function(S){g(S.element)}),e.on("connection.remove",function(S){var b=p(S.element);b&&ut(b)}),e.on("element.marker.update",function(S){var b=S.element,_;b.waypoints&&(_=m(b),S.add?Fe(_).add(S.marker):Fe(_).remove(S.marker))}),e.on("element.mousemove",function(S){var b=S.element,_=b.waypoints,v,E;if(_){if(v=p(b,!0),E=ip(t,_,S.originalEvent),!E)return;y(v,E),E.bendpoint||w(v,E,_)}}),e.on("element.mousedown",function(S){if(sr(S)){var b=S.originalEvent,_=S.element;if(_.waypoints)return u(b,_)}}),e.on("selection.changed",function(S){var b=S.newSelection,_=b[0];_&&_.waypoints&&m(_)}),e.on("element.hover",function(S){var b=S.element;b.waypoints&&(m(b),n.registerEvent(S.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(S){n.unregisterEvent(S.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(S){var b=S.element,_=S.newId;if(b.waypoints){var v=p(b);v&&ce(v,{"data-element-id":_})}}),this.addHandles=m,this.updateHandles=g,this.getBendpointsContainer=p,this.getSegmentDragger=a}Jb.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function ER(e){return Ke(".djs-visual",e)}var em=Math.round,Sr="reconnectStart",Cr="reconnectEnd",Yo="updateWaypoints";function Ch(e,t,n,i,r,o){this._injector=e,this.start=function(l,u,s,p){var a=n.getGraphics(u),c=u.source,h=u.target,f=u.waypoints,d;!p&&s===0?d=Sr:!p&&s===f.length-1?d=Cr:d=Yo;var m=d===Yo?"connection.updateWaypoints":"connection.reconnect",g=r.allowed(m,{connection:u,source:c,target:h});g===!1&&(g=r.allowed(m,{connection:u,source:h,target:c})),g!==!1&&i.init(l,"bendpoint.move",{data:{connection:u,connectionGfx:a,context:{allowed:g,bendpointIndex:s,connection:u,source:c,target:h,insert:p,type:d}}})},t.on("bendpoint.move.hover",function(l){var u=l.context,s=u.connection,p=s.source,a=s.target,c=l.hover,h=u.type;u.hover=c;var f;if(c){var d=h===Yo?"connection.updateWaypoints":"connection.reconnect";if(f=u.allowed=r.allowed(d,{connection:s,source:h===Sr?c:p,target:h===Cr?c:a}),f){u.source=h===Sr?c:p,u.target=h===Cr?c:a;return}f===!1&&(f=u.allowed=r.allowed(d,{connection:s,source:h===Cr?c:a,target:h===Sr?c:p})),f&&(u.source=h===Cr?c:a,u.target=h===Sr?c:p)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(l){var u=l.context,s=u.type;u.hover=null,u.source=null,u.target=null,s!==Yo&&(u.allowed=!1)}),t.on("bendpoint.move.end",function(l){var u=l.context,s=u.allowed,p=u.bendpointIndex,a=u.connection,c=u.insert,h=a.waypoints.slice(),f=u.source,d=u.target,m=u.type,g=u.hints||{},y={x:em(l.x),y:em(l.y)};if(!s)return!1;m===Yo?(c?h.splice(p,0,y):h[p]=y,g.bendpointMove={insert:c,bendpointIndex:p},h=this.cropWaypoints(a,h),o.updateWaypoints(a,xS(h),g)):(m===Sr?(g.docking="source",$l(u)&&(g.docking="target",g.newWaypoints=h.reverse())):m===Cr&&(g.docking="target",$l(u)&&(g.docking="source",g.newWaypoints=h.reverse())),o.reconnect(a,f,d,y,g))},this)}Ch.$inject=["injector","eventBus","canvas","dragging","rules","modeling"];Ch.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function $l(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===Sr)return t&&i&&t===i&&n!==i;if(r===Cr)return t&&n&&t===n&&n!==i}var xR="reconnectStart",SR="reconnectEnd",tm="updateWaypoints",Xo="connect-ok",xa="connect-not-ok",nm="connect-hover",im="djs-updating",rm="djs-dragging",om=1100;function Qb(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var l=o.context,u=l.bendpointIndex,s=l.connection,p=l.insert,a=s.waypoints,c=a.slice();l.waypoints=a,p&&c.splice(u,0,{x:o.x,y:o.y}),s.waypoints=c;var h=l.draggerGfx=rp(i.getLayer("overlays"));Fe(h).add("djs-dragging"),i.addMarker(s,rm),i.addMarker(s,im)}),n.on("bendpoint.move.hover",function(o){var l=o.context,u=l.allowed,s=l.hover,p=l.type;if(s){if(i.addMarker(s,nm),p===tm)return;u?(i.removeMarker(s,xa),i.addMarker(s,Xo)):u===!1&&(i.removeMarker(s,Xo),i.addMarker(s,xa))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],om,function(o){var l=o.context,u=l.hover,s=l.target;u&&(i.removeMarker(u,nm),i.removeMarker(u,s?Xo:xa))}),n.on("bendpoint.move.move",function(o){var l=o.context,u=l.allowed,s=l.bendpointIndex,p=l.draggerGfx,a=l.hover,c=l.type,h=l.connection,f=h.source,d=h.target,m=h.waypoints.slice(),g={x:o.x,y:o.y},y=l.hints||{},w={};r&&(y.connectionStart&&(w.connectionStart=y.connectionStart),y.connectionEnd&&(w.connectionEnd=y.connectionEnd),c===xR?$l(l)?(w.connectionEnd=w.connectionEnd||g,w.source=d,w.target=a||f,m=m.reverse()):(w.connectionStart=w.connectionStart||g,w.source=a||f,w.target=d):c===SR?$l(l)?(w.connectionStart=w.connectionStart||g,w.source=a||d,w.target=f,m=m.reverse()):(w.connectionEnd=w.connectionEnd||g,w.source=f,w.target=a||d):(w.noCropping=!0,w.noLayout=!0,m[s]=g),c===tm&&(m=e.cropWaypoints(h,m)),w.waypoints=m,r.drawPreview(l,u,w)),Ft(p,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],om,function(o){var l=o.context,u=l.connection,s=l.draggerGfx,p=l.hover,a=l.target,c=l.waypoints;u.waypoints=c,ut(s),i.removeMarker(u,im),i.removeMarker(u,rm),p&&(i.removeMarker(p,Xo),i.removeMarker(p,a?Xo:xa)),r&&r.cleanUp(l)})}Qb.$inject=["bendpointMove","injector","eventBus","canvas"];var sm="connect-hover",am="djs-updating";function lm(e,t,n){return Ah(e,t,e[t]+n)}function Ah(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function CR(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]),l=20,u=Math.min(Math.max(o+l,e[i]),r-l);return Ah(t,i,u)}function qb(e){return e==="x"?"y":"x"}function cm(e,t,n){var i,r;return e.original?e.original:(i=xe(t),r=qb(n),Ah(e,r,i[r]))}function ew(e,t,n,i,r,o){var l=e.get("connectionDocking",!1);this.start=function(c,h,f){var d,m=n.getGraphics(h),g=f-1,y=f,w=h.waypoints,S=w[g],b=w[y],_=ip(n,w,c),v,E,x;v=fi(S,b),v&&(E=v==="v"?"x":"y",g===0&&(S=cm(S,h.source,E)),y===w.length-1&&(b=cm(b,h.target,E)),_?x=_.point:x={x:(S.x+b.x)/2,y:(S.y+b.y)/2},d={connection:h,segmentStartIndex:g,segmentEndIndex:y,segmentStart:S,segmentEnd:b,axis:E,dragPosition:x},i.init(c,x,"connectionSegment.move",{cursor:E==="x"?"resize-ew":"resize-ns",data:{connection:h,connectionGfx:m,context:d}}))};function u(c,h){if(!l)return h;var f=c.waypoints,d;return c.waypoints=h,d=l.getCroppedWaypoints(c),c.waypoints=f,d}function s(c){r.update("connection",c.connection,c.connectionGfx)}function p(c,h,f){var d=c.newWaypoints,m=c.segmentStartIndex+h,g=d[m],y=c.segmentEndIndex+h,w=d[y],S=qb(c.axis),b=CR(f,g,w,S);Ft(c.draggerGfx,b.x,b.y)}function a(c,h){var f=0,d=c.filter(function(m,g){return Xp(c[g-1],c[g+1],m)?(f=g<=h?f-1:f,!1):!0});return{waypoints:d,segmentOffset:f}}t.on("connectionSegment.move.start",function(c){var h=c.context,f=c.connection,d=n.getLayer("overlays");h.originalWaypoints=f.waypoints.slice(),h.draggerGfx=Kb(d,h.segmentStart,h.segmentEnd),Fe(h.draggerGfx).add("djs-dragging"),n.addMarker(f,am)}),t.on("connectionSegment.move.move",function(c){var h=c.context,f=h.connection,d=h.segmentStartIndex,m=h.segmentEndIndex,g=h.segmentStart,y=h.segmentEnd,w=h.axis,S=h.originalWaypoints.slice(),b=lm(g,w,c["d"+w]),_=lm(y,w,c["d"+w]),v=S.length,E=0;S[d]=b,S[m]=_;var x,T;d<2&&(x=zt(f.source,b),d===1?x==="intersect"&&(S.shift(),S[0]=b,E--):x!=="intersect"&&(S.unshift(g),E++)),m>v-3&&(T=zt(f.target,_),m===v-2?T==="intersect"&&(S.pop(),S[S.length-1]=_):T!=="intersect"&&S.push(y)),h.newWaypoints=f.waypoints=u(f,S),p(h,E,c),h.newSegmentStartIndex=d+E,s(c)}),t.on("connectionSegment.move.hover",function(c){c.context.hover=c.hover,n.addMarker(c.hover,sm)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(c){var h=c.context.hover;h&&n.removeMarker(h,sm)}),t.on("connectionSegment.move.cleanup",function(c){var h=c.context,f=h.connection;h.draggerGfx&&ut(h.draggerGfx),n.removeMarker(f,am)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(c){var h=c.context,f=h.connection;f.waypoints=h.originalWaypoints,s(c)}),t.on("connectionSegment.move.end",function(c){var h=c.context,f=h.connection,d=h.newWaypoints,m=h.newSegmentStartIndex;d=d.map(function(_){return{original:_.original,x:Math.round(_.x),y:Math.round(_.y)}});var g=a(d,m),y=g.waypoints,w=u(f,y),S=g.segmentOffset,b={segmentMove:{segmentStartIndex:h.segmentStartIndex,newSegmentStartIndex:m+S}};o.updateWaypoints(f,w,b)})}ew.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var AR=Math.abs,um=Math.round;function TR(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],AR(r-e)<=n)return r}function tw(e){return{x:e.x,y:e.y}}function nw(e){return{x:e.x+e.width,y:e.y+e.height}}function Sn(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:um(e.x+e.width/2),y:um(e.y+e.height/2)}}function yo(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function gt(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function iw(e){return e.children||[]}var $R=Math.abs,pm=Math.round,hu=10;function rw(e){function t(o,l){if(Ie(o)){for(var u=o.length;u--;)if($R(o[u]-l)<=hu)return o[u]}else{o=+o;var s=l%o;if(s<hu)return l-s;if(s>o-hu)return l-s+o}return l}function n(o,l){if(o.waypoints)return bR(l,o);if(o.width)return{x:pm(o.width/2+o.x),y:pm(o.height/2+o.y)}}function i(o){var l=o.context,u=l.snapPoints,s=l.connection,p=s.waypoints,a=l.segmentStart,c=l.segmentStartIndex,h=l.segmentEnd,f=l.segmentEndIndex,d=l.axis;if(u)return u;var m=[p[c-1],a,h,p[f+1]];return c<2&&m.unshift(n(s.source,o)),f>p.length-3&&m.unshift(n(s.target,o)),l.snapPoints=u={horizontal:[],vertical:[]},J(m,function(g){g&&(g=g.original||g,d==="y"&&u.horizontal.push(g.y),d==="x"&&u.vertical.push(g.x))}),u}e.on("connectionSegment.move.move",1500,function(o){var l=i(o),u=o.x,s=o.y,p,a;if(l){p=t(l.vertical,u),a=t(l.horizontal,s);var c=u-p,h=s-a;q(o,{dx:o.dx-c,dy:o.dy-h,x:p,y:a}),(c||l.vertical.indexOf(u)!==-1)&&gt(o,"x",p),(h||l.horizontal.indexOf(s)!==-1)&&gt(o,"y",a)}});function r(o){var l=o.snapPoints,u=o.connection.waypoints,s=o.bendpointIndex;if(l)return l;var p=[u[s-1],u[s+1]];return o.snapPoints=l={horizontal:[],vertical:[]},J(p,function(a){a&&(a=a.original||a,l.horizontal.push(a.y),l.vertical.push(a.x))}),l}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var l=o.context,u=l.hover,s=u&&n(u,o);!Qe(u)||!s||!s.x||!s.y||(gt(o,"x",s.x),gt(o,"y",s.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var l=o.context,u=r(l),s=l.hover,p=s&&n(s,o),a=o.x,c=o.y,h,f;if(u){h=t(p?u.vertical.concat([p.x]):u.vertical,a),f=t(p?u.horizontal.concat([p.y]):u.horizontal,c);var d=a-h,m=c-f;q(o,{dx:o.dx-d,dy:o.dy-m,x:o.x-d,y:o.y-m}),(d||u.vertical.indexOf(a)!==-1)&&gt(o,"x",h),(m||u.horizontal.indexOf(c)!==-1)&&gt(o,"y",f)}})}rw.$inject=["eventBus"];const RR={__depends__:[$i,ci],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",Jb],bendpointMove:["type",Ch],bendpointMovePreview:["type",Qb],connectionSegmentMove:["type",ew],bendpointSnapping:["type",rw]};function ow(e,t,n,i){function r(l,u){return i.allowed("connection.create",{source:l,target:u})}function o(l,u){return r(u,l)}e.on("connect.hover",function(l){var u=l.context,s=u.start,p=l.hover,a;if(u.hover=p,a=u.canExecute=r(s,p),!cl(a)){if(a!==!1){u.source=s,u.target=p;return}a=u.canExecute=o(s,p),!cl(a)&&a!==!1&&(u.source=p,u.target=s)}}),e.on(["connect.out","connect.cleanup"],function(l){var u=l.context;u.hover=null,u.source=null,u.target=null,u.canExecute=!1}),e.on("connect.end",function(l){var u=l.context,s=u.canExecute,p=u.connectionStart,a={x:l.x,y:l.y},c=u.source,h=u.target;if(!s)return!1;var f=null,d={connectionStart:sp(u)?a:p,connectionEnd:sp(u)?p:a};Mt(s)&&(f=s),u.connection=n.connect(c,h,f,d)}),this.start=function(l,u,s,p){Mt(s)||(p=s,s=xe(u)),t.init(l,"connect",{autoActivate:p,data:{shape:u,context:{start:u,connectionStart:s}}})}}ow.$inject=["eventBus","dragging","modeling","rules"];function sp(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var MR=1100,kR=900,hm="connect-ok",dm="connect-not-ok";function sw(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,l=o.canExecute,u=o.hover,s=o.source,p=o.start,a=o.startPosition,c=o.target,h=o.connectionStart||a,f=o.connectionEnd||{x:r.x,y:r.y},d=h,m=f;sp(o)&&(d=f,m=h),i.drawPreview(o,l,{source:s||p,target:c||u,connectionStart:d,connectionEnd:m})}),t.on("connect.hover",kR,function(r){var o=r.context,l=r.hover,u=o.canExecute;u!==null&&n.addMarker(l,u?hm:dm)}),t.on(["connect.out","connect.cleanup"],MR,function(r){var o=r.hover;o&&(n.removeMarker(o,hm),n.removeMarker(o,dm))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}sw.$inject=["injector","eventBus","canvas"];const Th={__depends__:[ai,ci,$i],__init__:["connectPreview"],connect:["type",ow],connectPreview:["type",sw]};var IR="djs-dragger";function Ri(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Ri.$inject=["injector","canvas","graphicsFactory","elementFactory"];Ri.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,o=n.source,l=n.target,u=n.waypoints,s=n.connectionStart,p=n.connectionEnd,a=n.noLayout,c=n.noCropping,h=n.noNoop,f,d=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Vr(i),r||(r=e.getConnection=LR(function(m,g,y){return d.getConnection(m,g,y)})),t&&(f=r(t,o,l)),!f){!h&&this.drawNoopPreview(i,n);return}f.waypoints=u||[],this._layouter&&!a&&(f.waypoints=this._layouter.layoutConnection(f,{source:o,target:l,connectionStart:s,connectionEnd:p,waypoints:n.waypoints||f.waypoints})),(!f.waypoints||!f.waypoints.length)&&(f.waypoints=[o?xe(o):s,l?xe(l):p]),this._connectionDocking&&(o||l)&&!c&&(f.waypoints=this._connectionDocking.getCroppedWaypoints(f,o,l)),this._graphicsFactory.drawConnection(i,f,{stroke:"var(--element-dragger-color)"})};Ri.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||xe(n),o=t.connectionEnd||xe(i),l=this.cropWaypoints(r,o,n,i),u=this.createNoopConnection(l[0],l[1]);me(e,u)};Ri.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),l=i&&r.getShapePath(i),u=r.getConnectionPath({waypoints:[e,t]});return e=n&&zu(o,u,!0)||e,t=i&&zu(l,u,!1)||t,[e,t]};Ri.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&ut(e.connectionPreviewGfx)};Ri.prototype.getConnection=function(e){var t=PR(e);return this._elementFactory.createConnection(t)};Ri.prototype.createConnectionPreviewGfx=function(){var e=he("g");return ce(e,{pointerEvents:"none"}),Fe(e).add(IR),me(this._canvas.getActiveLayer(),e),e};Ri.prototype.createNoopConnection=function(e,t){return ec([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function LR(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function PR(e){return Mt(e)?e:{}}const DR={__init__:["connectionPreview"],connectionPreview:["type",Ri]};var OR=["marker-start","marker-mid","marker-end"],NR=["circle","ellipse","line","path","polygon","polyline","path","rect"];function cr(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i,this._clonedMarkers={};var r=this;t.on("drag.cleanup",function(){r.cleanUp()})}cr.$inject=["elementRegistry","eventBus","canvas","styles"];cr.prototype.cleanUp=function(){var e=this;J(e._clonedMarkers,function(t){ut(t)}),e._clonedMarkers={}};cr.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)};cr.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=Vp(n),o=n.getBoundingClientRect();return this._cloneMarkers(zi(r),i),ce(r,this._styles.cls(i,[],{x:o.top,y:o.left})),me(t,r),ce(r,"data-preview-support-element-id",e.id),r};cr.prototype.addFrame=function(e,t){var n=he("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return me(t,n),ce(n,"data-preview-support-element-id",e.id),n};cr.prototype._cloneMarkers=function(e,t="djs-dragger"){var n=this;if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)n._cloneMarkers(e.childNodes[i],t);HR(e)&&OR.forEach(function(r){if(ce(e,r)){var o=BR(e,r,n._canvas.getContainer());n._cloneMarker(e,o,r,t)}})};cr.prototype._cloneMarker=function(e,t,n,i="djs-dragger"){var r=t.id+"-"+i,o=this._clonedMarkers[r];if(!o){o=Vp(t);var l=r+"-clone";o.id=l,Fe(o).add(i),this._clonedMarkers[r]=o;var u=Ke("defs",this._canvas._svg);u||(u=he("defs"),me(this._canvas._svg,u)),me(u,o)}var s=WR(this._clonedMarkers[r].id);ce(e,n,s)};function BR(e,t,n){var i=FR(ce(e,t));return Ke("marker#"+i,n||document)}function FR(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function WR(e){return"url(#"+e+")"}function HR(e){return NR.indexOf(e.nodeName)!==-1}const Bo={__init__:["previewSupport"],previewSupport:["type",cr]},Sa="complex-preview";class aw{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:r=[],resized:o=[]}=t,l=this._canvas.getLayer(Sa);n.filter(u=>!jR(u)).forEach(u=>{let s;Qe(u)?(s=this._graphicsFactory._createContainer("connection",he("g")),this._graphicsFactory.drawConnection(zi(s),u)):(s=this._graphicsFactory._createContainer("shape",he("g")),this._graphicsFactory.drawShape(zi(s),u),Ft(s,u.x,u.y)),this._previewSupport.addDragger(u,l,s)}),i.forEach(({element:u,delta:s})=>{this._previewSupport.addDragger(u,l,void 0,"djs-dragging"),this._canvas.addMarker(u,"djs-element-hidden"),this._markers.push([u,"djs-element-hidden"]);const p=this._previewSupport.addDragger(u,l);Qe(u)?Ft(p,s.x,s.y):Ft(p,u.x+s.x,u.y+s.y)}),r.forEach(u=>{this._previewSupport.addDragger(u,l,void 0,"djs-dragging"),this._canvas.addMarker(u,"djs-element-hidden"),this._markers.push([u,"djs-element-hidden"])}),o.forEach(({shape:u,bounds:s})=>{this._canvas.addMarker(u,"djs-hidden"),this._markers.push([u,"djs-hidden"]),this._previewSupport.addDragger(u,l,void 0,"djs-dragging");const p=this._graphicsFactory._createContainer("shape",he("g"));this._graphicsFactory.drawShape(zi(p),u,{width:s.width,height:s.height}),Ft(p,s.x,s.y),this._previewSupport.addDragger(u,l,p)})}cleanUp(){Vr(this._canvas.getLayer(Sa)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[],this._previewSupport.cleanUp()}show(){this._canvas.showLayer(Sa)}hide(){this._canvas.hideLayer(Sa)}}aw.$inject=["canvas","graphicsFactory","previewSupport"];function jR(e){return e.hidden}const GR={__depends__:[Bo],__init__:["complexPreview"],complexPreview:["type",aw]};var $h=["top","bottom","left","right"],Ca=10;function Rh(e,t){se.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,l=o.connection,u=l.source,s=l.target,p=o.hints||{};p.createElementsBehavior!==!1&&(n(u),n(s))}),this.postExecuted(["label.create"],function(r){var o=r.context,l=o.shape,u=o.hints||{};u.createElementsBehavior!==!1&&n(l.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,l=o.elements,u=o.hints||{};u.createElementsBehavior!==!1&&l.forEach(function(s){n(s)})});function n(r){if(ac(r)){var o=UR(r);o&&i(r,o)}}function i(r,o){var l=xe(r),u=r.label,s=xe(u);if(u.parent){var p=ye(r),a;switch(o){case"top":a={x:l.x,y:p.top-Ca-u.height/2};break;case"left":a={x:p.left-Ca-u.width/2,y:l.y};break;case"bottom":a={x:l.x,y:p.bottom+Ca+u.height/2};break;case"right":a={x:p.right+Ca+u.width/2,y:l.y};break}var c=Wn(a,s);t.moveShape(u,c)}}}de(Rh,se);Rh.$inject=["eventBus","modeling"];function VR(e){var t=e.host,n=xe(e),i=zt(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var o=$h.filter(function(l){return r.indexOf(l)===-1});return o}function zR(e){var t=xe(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return lw(t,i)});return n}function UR(e){var t=xe(e.label),n=xe(e),i=lw(n,t);if(YR(i)){var r=zR(e);if(e.host){var o=VR(e);r=r.concat(o)}var l=$h.filter(function(u){return r.indexOf(u)===-1});if(l.indexOf(i)===-1)return l[0]}}function lw(e,t){return zt(t,e,5)}function YR(e){return $h.indexOf(e)!==-1}function Mh(e){se.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(N(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}de(Mh,se);Mh.$inject=["eventBus"];function kh(e,t){e.invoke(se,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,o=Re(r.incoming.concat(r.outgoing),function(l){return N(l,"bpmn:Association")});J(o,function(l){t.moveConnection(l,{x:0,y:0},i)})},!0)}de(kh,se);kh.$inject=["injector","modeling"];var fm=500;function _c(e,t){t.invoke(se,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",fm,function(i){var r=i.elements;r=r.filter(function(o){var l=o.host;return mm(o,l)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var l=r[o];i.elements[o]=n._replaceShape(r[o],l)})},!0),this.preExecute("elements.move",fm,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var l=r[0];mm(l,o)&&(i.shapes=[n._replaceShape(l,o)])}},!0)}_c.$inject=["bpmnReplace","injector"];de(_c,se);_c.prototype._replaceShape=function(e,t){var n=XR(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function XR(e){var t=re(e),n=t.eventDefinitions;return n&&n[0]}function mm(e,t){return!Ve(e)&&Me(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function Ih(e,t){se.call(this,e);function n(i){return Re(i.attachers,function(r){return N(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,o=i.context.target,l=n(o);N(r,"bpmn:EventBasedGateway")&&N(o,"bpmn:ReceiveTask")&&l.length>0&&t.removeElements(l)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,o=i.context.newSource;N(r,"bpmn:Gateway")&&N(o,"bpmn:EventBasedGateway")&&J(o.outgoing,function(l){var u=l.target,s=n(u);N(u,"bpmn:ReceiveTask")&&s.length>0&&t.removeElements(s)})})}Ih.$inject=["eventBus","modeling"];de(Ih,se);function Lh(e,t,n){se.call(this,e),this.preExecute("shape.replace",u,!0),this.postExecuted("shape.replace",s,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",l,!0);function i(g){const y=g.source,w=g.target;ro(y)&&Zo(w)&&a(w)}function r(g){const y=g.connection,w=g.source,S=g.target;ro(w)&&Aa(S)&&(p(S),h(w,[y]))}function o(g){const y=g.newTarget,w=g.oldSource,S=g.oldTarget;if(S!==y){const b=w;Zo(S)&&a(S),ro(b)&&Aa(y)&&p(y)}}function l(g){const{element:y}=g;Zo(y)?(c(y),f(y)):Aa(y)&&d(y)}function u(g){const{newData:y,oldShape:w}=g;if(ro(g.oldShape)&&y.eventDefinitionType!=="bpmn:CompensateEventDefinition"||y.type!=="bpmn:BoundaryEvent"){const S=w.outgoing.find(({target:b})=>Zo(b));S&&S.target&&(g._connectionTarget=S.target)}else if(!ro(g.oldShape)&&y.eventDefinitionType==="bpmn:CompensateEventDefinition"&&y.type==="bpmn:BoundaryEvent"){const S=w.outgoing.find(({target:b})=>Aa(b));S&&S.target&&(g._connectionTarget=S.target),m(w)}}function s(g){const{_connectionTarget:y,newShape:w}=g;y&&t.connect(w,y)}function p(g){t.updateProperties(g,{isForCompensation:!0})}function a(g){t.updateProperties(g,{isForCompensation:void 0})}function c(g){for(const y of g.incoming)n.canConnect(y.source,g)||t.removeConnection(y);for(const y of g.outgoing)n.canConnect(g,y.target)||t.removeConnection(y)}function h(g,y){g.outgoing.filter(b=>N(b,"bpmn:Association")).filter(b=>Zo(b.target)&&!y.includes(b)).forEach(b=>t.removeConnection(b))}function f(g){const y=g.attachers.slice();y.length&&t.removeElements(y)}function d(g){const y=g.incoming.filter(w=>ro(w.source));t.removeElements(y)}function m(g){const y=g.outgoing.filter(w=>N(w,"bpmn:SequenceFlow"));t.removeElements(y)}}de(Lh,se);Lh.$inject=["eventBus","modeling","bpmnRules"];function Zo(e){const t=re(e);return t&&t.get("isForCompensation")}function ro(e){return e&&N(e,"bpmn:BoundaryEvent")&&Fs(e,"bpmn:CompensateEventDefinition")}function Aa(e){return e&&N(e,"bpmn:Activity")&&!Vt(e)}function Ph(e){e.invoke(se,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;N(i,"bpmn:Lane")&&!N(r,"bpmn:Lane")&&(n.parent=Al(i,"bpmn:Participant"))})}Ph.$inject=["injector"];de(Ph,se);function Dh(e,t){se.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,r=i.shape;if(N(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Dh.$inject=["eventBus","bpmnFactory"];de(Dh,se);var ap=20,lp=20,cw=30,Ta=2e3;function Oh(e,t,n){se.call(this,t),t.on(["create.start","shape.move.start"],Ta,function(r){var o=r.context,l=o.shape,u=e.getRootElement();if(!(!N(l,"bpmn:Participant")||!N(u,"bpmn:Process")||!u.children.length)){var s=u.children.filter(function(c){return!N(c,"bpmn:Group")&&!Ve(c)&&!Qe(c)});if(s.length){var p=vt(s),a=ZR(l,p);q(l,a),o.createConstraints=KR(l,p)}}}),t.on("create.start",Ta,function(r){var o=r.context,l=o.shape,u=e.getRootElement(),s=e.getGraphics(u);function p(a){a.element=u,a.gfx=s}N(l,"bpmn:Participant")&&N(u,"bpmn:Process")&&(t.on("element.hover",Ta,p),t.once("create.cleanup",function(){t.off("element.hover",p)}))});function i(){var r=e.getRootElement();return N(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",Ta,function(r){var o=r.elements,l=r.parent,u=JR(o),s;u&&N(l,"bpmn:Process")&&(r.parent=i(),s=r.hints=r.hints||{},s.participant=u,s.process=l,s.processRef=re(u).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,l=r.shape;N(l,"bpmn:Participant")&&N(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=re(l).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},l=r.process||o.process,u=r.shape,s=o.participant;l&&(!s||u===s)&&re(u).set("processRef",re(l))},!0),this.revert("shape.create",function(r){var o=r.hints||{},l=r.process||o.process,u=r.processRef||o.processRef,s=r.shape,p=o.participant;l&&(!p||s===p)&&re(s).set("processRef",u)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},l=r.process||r.hints.process,u=r.shape,s=o.participant;if(l){var p=l.children.slice();s?u===s&&n.moveElements(p,{x:0,y:0},s):n.moveElements(p,{x:0,y:0},u)}},!0)}Oh.$inject=["canvas","eventBus","modeling"];de(Oh,se);function ZR(e,t){t={width:t.width+ap*2+cw,height:t.height+lp*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function KR(e,t){return t=ye(t),{bottom:t.top+e.height/2-lp,left:t.right-e.width/2+ap,top:t.bottom-e.height/2+lp,right:t.left+e.width/2-ap-cw}}function JR(e){return je(e,function(t){return N(t,"bpmn:Participant")})}var gm="__targetRef_placeholder";function Nh(e,t){se.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],vm(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],vm(o));function n(l,u,s){var p=l.get("dataInputAssociations");return je(p,function(a){return a!==s&&a.targetRef===u})}function i(l,u){var s=l.get("properties"),p=je(s,function(a){return a.name===gm});return!p&&u&&(p=t.create("bpmn:Property",{name:gm}),At(s,p)),p}function r(l,u){var s=i(l);s&&(n(l,s,u)||bt(l.get("properties"),s))}function o(l){var u=l.context,s=u.connection,p=s.businessObject,a=s.target,c=a&&a.businessObject,h=u.newTarget,f=h&&h.businessObject,d=u.oldTarget||u.target,m=d&&d.businessObject,g=s.businessObject,y;m&&m!==c&&r(m,p),f&&f!==c&&r(f,p),c?(y=i(c,!0),g.targetRef=y):g.targetRef=null}}Nh.$inject=["eventBus","bpmnFactory"];de(Nh,se);function vm(e){return function(t){var n=t.context,i=n.connection;if(N(i,"bpmn:DataInputAssociation"))return e(t)}}function Ec(e){this._bpmnUpdater=e}Ec.$inject=["bpmnUpdater"];Ec.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};Ec.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};function Bh(e,t,n,i){se.call(this,i),t.registerHandler("dataStore.updateContainment",Ec);function r(){return n.filter(function(u){return N(u,"bpmn:Participant")&&re(u).processRef})[0]}function o(u){return u.children.filter(function(s){return N(s,"bpmn:DataStoreReference")&&!s.labelTarget})}function l(u,s){var p=u.businessObject||u;if(s=s||r(),s){var a=s.businessObject||s;t.execute("dataStore.updateContainment",{dataStoreBo:p,dataStoreDi:He(u),newSemanticParent:a.processRef||a,newDiParent:He(s)})}}this.preExecute("shape.create",function(u){var s=u.context,p=s.shape;N(p,"bpmn:DataStoreReference")&&p.type!=="label"&&(s.hints||(s.hints={}),s.hints.autoResize=!1)}),this.preExecute("elements.move",function(u){var s=u.context,p=s.shapes,a=p.filter(function(c){return N(c,"bpmn:DataStoreReference")});a.length&&(s.hints||(s.hints={}),s.hints.autoResize=p.filter(function(c){return!N(c,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(u){var s=u.context,p=s.shape,a=p.parent;N(p,"bpmn:DataStoreReference")&&p.type!=="label"&&N(a,"bpmn:Collaboration")&&l(p)}),this.postExecute("shape.move",function(u){var s=u.context,p=s.shape,a=s.oldParent,c=p.parent;if(!N(a,"bpmn:Collaboration")&&N(p,"bpmn:DataStoreReference")&&p.type!=="label"&&N(c,"bpmn:Collaboration")){var h=N(a,"bpmn:Participant")?a:qR(a,"bpmn:Participant");l(p,h)}}),this.postExecute("shape.delete",function(u){var s=u.context,p=s.shape,a=e.getRootElement();Me(p,["bpmn:Participant","bpmn:SubProcess"])&&N(a,"bpmn:Collaboration")&&o(a).filter(function(c){return QR(c,p)}).forEach(function(c){l(c)})}),this.postExecute("canvas.updateRoot",function(u){var s=u.context,p=s.oldRoot,a=s.newRoot,c=o(p);c.forEach(function(h){N(a,"bpmn:Process")&&l(h,a)})})}Bh.$inject=["canvas","commandStack","elementRegistry","eventBus"];de(Bh,se);function QR(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function qR(e,t){for(;e.parent;){if(N(e.parent,t))return e.parent;e=e.parent}}var Rl=Math.max,Ml=Math.min,eM=20;function uw(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function tM(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+i:t.indexOf("w")!==-1&&(o.x=e.x+i,o.width=e.width-i),o}function nM(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function $a(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return Se(r)&&(i=(/top|left/.test(e)?Ml:Rl)(i,r)),Se(o)&&(i=(/top|left/.test(e)?Rl:Ml)(i,o)),i}function iM(e,t){if(!t)return e;var n=ye(e);return nc({top:$a("top",n,t),right:$a("right",n,t),bottom:$a("bottom",n,t),left:$a("left",n,t)})}function rM(e,t,n,i){var r=ye(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},l=i?ye(i):o,u={top:Ml(o.top,l.top),left:Ml(o.left,l.left),bottom:Rl(o.bottom,l.bottom),right:Rl(o.right,l.right)};return nc(u)}function Ko(e,t){return typeof e<"u"?e:eM}function oM(e,t){var n,i,r,o;return typeof t=="object"?(n=Ko(t.left),i=Ko(t.right),r=Ko(t.top),o=Ko(t.bottom)):n=i=r=o=Ko(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function sM(e){return!(e.waypoints||e.type==="label")}function pw(e,t){var n;if(e.length===void 0?n=Re(e.children,sM):n=e,n.length)return oM(vt(n),t)}var Ni=Math.abs;function aM(e,t){return uw(ye(t),ye(e))}var lM=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],ei=30;function xc(e,t){return t=t||[],e.children.filter(function(n){N(n,"bpmn:Lane")&&(xc(n,t),t.push(n))}),t}function Mi(e){return e.children.filter(function(t){return N(t,"bpmn:Lane")})}function xn(e){return Al(e,lM)||e}function cM(e,t){var n=xn(e),i=N(n,"bpmn:Process")?[]:[n],r=xc(n,i),o=ye(e),l=ye(t),u=aM(e,t),s=[],p=An(e);return r.forEach(function(a){if(a!==e){var c=p?0:u.top,h=p?u.right:0,f=p?0:u.bottom,d=p?u.left:0,m=ye(a);u.top&&(Ni(m.bottom-o.top)<10&&(f=l.top-m.bottom),Ni(m.top-o.top)<5&&(c=l.top-m.top)),u.left&&(Ni(m.right-o.left)<10&&(h=l.left-m.right),Ni(m.left-o.left)<5&&(d=l.left-m.left)),u.bottom&&(Ni(m.top-o.bottom)<10&&(c=l.bottom-m.top),Ni(m.bottom-o.bottom)<5&&(f=l.bottom-m.bottom)),u.right&&(Ni(m.left-o.right)<10&&(d=l.right-m.left),Ni(m.right-o.right)<5&&(h=l.right-m.right)),(c||h||f||d)&&s.push({shape:a,newBounds:nM(a,{top:c,right:h,bottom:f,left:d})})}}),s}var uM=500;function Fh(e,t){se.call(this,e);function n(i,r){var o=An(i),l=Mi(r),u=[],s=[],p=[],a=[];if(Ur(l,function(g){return o?g.y>i.y?s.push(g):u.push(g):g.x>i.x?a.push(g):p.push(g),g.children}),!!l.length){var c;o?s.length&&u.length?c=i.height/2:c=i.height:a.length&&p.length?c=i.width/2:c=i.width;var h,f,d,m;u.length&&(h=t.calculateAdjustments(u,"y",c,i.y-10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:c},"s")),s.length&&(f=t.calculateAdjustments(s,"y",-c,i.y+i.height+10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:-c},"n")),p.length&&(d=t.calculateAdjustments(p,"x",c,i.x-10),t.makeSpace(d.movingShapes,d.resizingShapes,{x:c,y:0},"e")),a.length&&(m=t.calculateAdjustments(a,"x",-c,i.x+i.width+10),t.makeSpace(m.movingShapes,m.resizingShapes,{x:-c,y:0},"w"))}}this.postExecuted("shape.delete",uM,function(i){var r=i.context,o=r.hints,l=r.shape,u=r.oldParent;N(l,"bpmn:Lane")&&(o&&o.nested||n(l,u))})}Fh.$inject=["eventBus","spaceTool"];de(Fh,se);var ym=500;function Sc(e,t){t.invoke(se,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",ym,function(i){var r=i.elements;r.filter(function(o){var l=o.host;return bm(o,l)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n._replaceShape(r[o])})},!0),this.preExecute("elements.move",ym,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(l,u){var s=l.host;bm(l,hM(r,s)?s:o)&&(r[u]=n._replaceShape(l))})},!0)}Sc.$inject=["bpmnReplace","injector"];de(Sc,se);Sc.prototype._replaceShape=function(e){var t=pM(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function pM(e){var t=re(e),n=t.eventDefinitions;return n&&n[0]}function bm(e,t){return!Ve(e)&&N(e,"bpmn:BoundaryEvent")&&!t}function hM(e,t){return e.indexOf(t)!==-1}function Wh(e,t,n){se.call(this,e);function i(r,o,l){var u=o.waypoints,s,p,a,c,h,f,d,m=r.outgoing.slice(),g=r.incoming.slice(),y;Se(l.width)?y=xe(l):y=l;var w=np(u,y);if(w){if(s=u.slice(0,w.index),p=u.slice(w.index+(w.bendpoint?1:0)),!s.length||!p.length)return;a=w.bendpoint?u[w.index]:y,(s.length===1||!wm(r,s[s.length-1]))&&s.push(_m(a)),(p.length===1||!wm(r,p[0]))&&p.unshift(_m(a))}c=o.source,h=o.target,t.canConnect(c,r,o)&&(n.reconnectEnd(o,r,s||y),f=o),t.canConnect(r,h,o)&&(f?d=n.connect(r,h,{type:o.type,waypoints:p}):(n.reconnectStart(o,r,p||y),d=o));var S=[].concat(f&&Re(g,function(b){return b.source===f.source})||[],d&&Re(m,function(b){return b.target===d.target})||[]);S.length&&n.removeElements(S)}this.preExecute("elements.move",function(r){var o=r.newParent,l=r.shapes,u=r.delta,s=l[0];if(!(!s||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var p=xe(s),a={x:p.x+u.x,y:p.y+u.y},c=je(o.children,function(h){var f=t.canInsert(l,h);return f&&np(h.waypoints,a)});c&&(r.targetFlow=c,r.position=a)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,l=r.targetFlow,u=r.position;l&&i(o[0],l,u)},!0),this.preExecute("shape.create",function(r){var o=r.parent,l=r.shape;t.canInsert(l,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,l=r.targetFlow,u=r.position;l&&i(o,l,u)},!0)}de(Wh,se);Wh.$inject=["eventBus","bpmnRules","modeling"];function wm(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function _m(e){return q({},e)}function Hh(e,t){se.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,o=i.source,l=i.target,u=i.hints;if(!(u&&u.createElementsBehavior===!1)&&oo(r)){var s=[];N(o,"bpmn:EventBasedGateway")?s=l.incoming.filter(p=>p!==r&&oo(p)):s=l.incoming.filter(p=>p!==r&&oo(p)&&N(p.source,"bpmn:EventBasedGateway")),s.forEach(function(p){t.removeConnection(p)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(N(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(oo).reduce(function(l,u){return l.includes(u.target)?l:l.concat(u.target)},[]);o.forEach(function(l){l.incoming.filter(oo).forEach(function(u){const s=l.incoming.filter(oo).filter(function(p){return p.source===r});(u.source!==r||s.length>1)&&t.removeConnection(u)})})}})}Hh.$inject=["eventBus","modeling"];de(Hh,se);function oo(e){return N(e,"bpmn:SequenceFlow")}var Ra=1500,Em=2e3;function hw(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],Ra,function(i){var r=i.context,o=r.shape||i.shape,l=i.hover;N(l,"bpmn:Lane")&&!Me(o,["bpmn:Lane","bpmn:Participant"])&&(i.hover=xn(l),i.hoverGfx=e.getGraphics(i.hover));var u=n.getRootElement();l!==u&&(o.labelTarget||Me(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=u,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],Ra,function(i){var r=i.hover;N(r,"bpmn:Lane")&&(i.hover=xn(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],Ra,function(i){var r=i.context,o=i.hover,l=r.type;N(o,"bpmn:Lane")&&/reconnect/.test(l)&&(i.hover=xn(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],Ra,function(i){var r=i.context,o=r.start;N(o,"bpmn:Lane")&&(r.start=xn(o)||o)}),t.on("shape.move.start",Em,function(i){var r=i.shape;N(r,"bpmn:Lane")&&(i.shape=xn(r)||r)}),t.on("spaceTool.move",Em,function(i){var r=i.hover;r&&N(r,"bpmn:Lane")&&(i.hover=xn(r))})}hw.$inject=["elementRegistry","eventBus","canvas"];function dM(e){return e.create("bpmn:Category")}function fM(e){return e.create("bpmn:CategoryValue")}function mM(e,t,n){return At(t.get("categoryValue"),e),e.$parent=t,At(n.get("rootElements"),t),t.$parent=n,e}function gM(e){var t=e.$parent;return t&&(bt(t.get("categoryValue"),e),e.$parent=null),e}function vM(e){var t=e.$parent;return t&&(bt(t.get("rootElements"),e),e.$parent=null),e}var xm=770;function jh(e,t,n,i,r,o){r.invoke(se,this);function l(){return n.filter(function(d){return N(d,"bpmn:Group")})}function u(d,m){return d.some(function(g){var y=re(g),w=y.categoryValueRef&&y.categoryValueRef.$parent;return w===m})}function s(d,m){return d.some(function(g){var y=re(g);return y.categoryValueRef===m})}function p(d,m,g){var y=l().filter(function(w){return w.businessObject!==g});m&&!u(y,m)&&vM(m),d&&!s(y,d)&&gM(d)}function a(d,m){return mM(d,m,t.getDefinitions())}function c(d,m){var g=re(d),y=g.categoryValueRef;y||(y=g.categoryValueRef=m.categoryValue=m.categoryValue||fM(e));var w=y.$parent;w||(w=y.$parent=m.category=m.category||dM(e)),a(y,w,t.getDefinitions())}function h(d,m){var g=m.category,y=m.categoryValue,w=re(d);y?(w.categoryValueRef=null,p(y,g,w)):p(null,w.categoryValueRef.$parent,w)}this.execute("label.create",function(d){var m=d.context,g=m.labelTarget;N(g,"bpmn:Group")&&c(g,m)}),this.revert("label.create",function(d){var m=d.context,g=m.labelTarget;N(g,"bpmn:Group")&&h(g,m)}),this.execute("shape.delete",function(d){var m=d.context,g=m.shape,y=re(g);if(!(!N(g,"bpmn:Group")||g.labelTarget)){var w=m.categoryValue=y.categoryValueRef,S;w&&(S=m.category=w.$parent,p(w,S,y),y.categoryValueRef=null)}}),this.reverted("shape.delete",function(d){var m=d.context,g=m.shape;if(!(!N(g,"bpmn:Group")||g.labelTarget)){var y=m.category,w=m.categoryValue,S=re(g);w&&(S.categoryValueRef=w,a(w,y))}}),this.execute("shape.create",function(d){var m=d.context,g=m.shape;!N(g,"bpmn:Group")||g.labelTarget||re(g).categoryValueRef&&c(g,m)}),this.reverted("shape.create",function(d){var m=d.context,g=m.shape;!N(g,"bpmn:Group")||g.labelTarget||re(g).categoryValueRef&&h(g,m)});function f(d,m){var g=e.create(d.$type);return o.copyElement(d,g,null,m)}i.on("copyPaste.copyElement",xm,function(d){var m=d.descriptor,g=d.element;if(!(!N(g,"bpmn:Group")||g.labelTarget)){var y=re(g);if(y.categoryValueRef){var w=y.categoryValueRef;m.categoryValue=f(w,!0),w.$parent&&(m.category=f(w.$parent,!0))}}}),i.on("copyPaste.pasteElement",xm,function(d){var m=d.descriptor,g=m.businessObject,y=m.categoryValue,w=m.category;y&&(y=g.categoryValueRef=f(y)),w&&(y.$parent=f(w)),delete m.category,delete m.categoryValue})}jh.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"];de(jh,se);function cp(e,t,n,i){var r,o,l,u,s;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(o=e.y-n.y,l=e.x-n.x,s=(i.x-n.x)*o-(i.y-n.y)*l,u=s/r,{x:Math.round(e.x+u*(t.x-e.x)),y:Math.round(e.y+u*(t.y-e.y))})}function dw(e){function t(i,r,o){var l={x:o.x,y:o.y-50},u={x:o.x-50,y:o.y},s=cp(i,r,o,l),p=cp(i,r,o,u),a;s&&p?Sm(s,o)>Sm(p,o)?a=p:a=s:a=s||p,i.original=a}function n(i){var r=i.waypoints;t(r[0],r[1],xe(i.source)),t(r[r.length-1],r[r.length-2],xe(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}dw.$inject=["eventBus"];function Sm(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Gh(e){se.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=re(i),o=He(i);if(Me(r,t)){var l=o.get("isHorizontal");l===void 0&&(l=!0),o.set("isHorizontal",l)}})}Gh.$inject=["eventBus"];de(Gh,se);var fw=Math.sqrt,mw=Math.min,yM=Math.max,Cm=Math.abs;function Am(e){return Math.pow(e,2)}function Jo(e,t){return fw(Am(e.x-t.x)+Am(e.y-t.y))}function bM(e,t){var n=0,i,r,o,l,u,s,p,a,c,h,f;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],$m(i,r)?p=[i]:(o=Jo(e,i),l=Jo(e,r),s=mw(o,l),p=wM(i,r,e,s)),p.length<1)throw new Error("expected between [1, 2] circle -> line intersections");p.length===1&&(a={type:"bendpoint",position:p[0],segmentIndex:n,bendpointIndex:$m(i,p[0])?n:n+1}),p.length===2&&(u=EM(p[0],p[1]),a={type:"segment",position:u,segmentIndex:n,relativeLocation:Jo(i,u)/Jo(i,r)}),c=Jo(a.position,e),(!f||h>c)&&(f=a,h=c)}return f}function wM(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,l=n.x-e.x,u=n.y-e.y,s=r*r+o*o,p=r*l+o*u,a=l*l+u*u-i*i,c=p/s,h=a/s,f=c*c-h;if(f<0&&f>-1e-6&&(f=0),f<0)return[];var d=fw(f),m=-c+d,g=-c-d,y={x:e.x-r*m,y:e.y-o*m};if(f===0)return[y];var w={x:e.x-r*g,y:e.y-o*g};return[y,w].filter(function(S){return _M(S,e,t)})}function _M(e,t,n){return Tm(e.x,t.x,n.x)&&Tm(e.y,t.y,n.y)}function Tm(e,t,n){return e>=mw(t,n)-kl&&e<=yM(t,n)+kl}function EM(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var kl=.1;function $m(e,t){return Cm(e.x-t.x)<=kl&&Cm(e.y-t.y)<=kl}function xM(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var l=i.segmentMove.segmentStartIndex,u=i.segmentMove.newSegmentStartIndex;return r===l?u:r>=u?r+o<u?u:r+o:r}if(i.bendpointMove){var s=i.bendpointMove.insert,p=i.bendpointMove.bendpointIndex,a;if(o===0)return r;if(r>=p&&(a=s?r+1:r-1),r<p&&(a=r,s&&n.type!=="bendpoint"&&p-1===r)){var c=vw(t,p);c<n.relativeLocation&&a++}return a}return o===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function gw(e,t,n,i){var r=0,o=0,l={point:e,delta:{x:0,y:0}},u=bM(e,n),s=u.segmentIndex,p=xM(n,t,u,i);if(p<0||p>t.length-2||p===null)return l;var a=Rm(n,s),c=Rm(t,p),h=u.position,f=CM(a,h),d=SM(a,c);if(u.type==="bendpoint"){var m=t.length-n.length,g=u.bendpointIndex,y=n[g];if(t.indexOf(y)!==-1)return l;if(m===0){var w=t[g];return r=w.x-u.position.x,o=w.y-u.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}m<0&&g!==0&&g<n.length-1&&(f=vw(n,g))}var S={x:(c[1].x-c[0].x)*f+c[0].x,y:(c[1].y-c[0].y)*f+c[0].y},b=mR({x:e.x-h.x,y:e.y-h.y},d);return r=S.x+b.x-e.x,o=S.y+b.y-e.y,{point:mi(S),delta:mi({x:r,y:o})}}function vw(e,t){var n=Tl(e[t-1],e[t]),i=Tl(e[t],e[t+1]),r=n/(n+i);return r}function SM(e,t){var n=qf(e),i=qf(t);return i-n}function Rm(e,t){return[e[t],e[t+1]]}function CM(e,t){var n=Tl(e[0],e[1]),i=Tl(e[0],t);return n===0?0:i/n}function AM(e,t,n,i){var r=xe(e);return gw(r,t,n,i).delta}function Gs(e,t,n){var i=ss(t),r=ss(n),o=Wn(e,i),l={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return mi({x:r.x+l.x,y:r.y+l.y})}function Mm(e,t,n){var i=ss(e),r=ss(t),o=ss(n),l=Wn(e,i),u=Wn(i,r),s=TM(i,t,n);if(s)return s;var p={x:u.x*(n.width/t.width),y:u.y*(n.height/t.height)},a={x:o.x+p.x,y:o.y+p.y};return mi({x:a.x+l.x-e.x,y:a.y+l.y-e.y})}function TM(e,t,n){var i=ye(t),r=ye(n);if($M(i,r))return null;var o=zt(t,e),l,u,s;if(o==="top")l={x:0,y:r.bottom-i.bottom};else if(o==="bottom")l={x:0,y:r.top-i.top};else if(o==="right")l={x:r.left-i.left,y:0};else if(o==="left")l={x:r.right-i.right,y:0};else return null;return u={x:e.x+l.x,y:e.y+l.y},s=zt(n,u),s!==o?null:l}function $M(e,t){return RM(e,t)||MM(e,t)}function RM(e,t){return e.right!==t.right&&e.left!==t.left}function MM(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var km="name",Im="text";function Vh(e,t,n,i){se.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",l=>{re(l.context.element)===l.context.moddleElement&&r(l)});function r(l){var u=l.context,s=u.element,p=u.properties;if(km in p&&t.updateLabel(s,p[km]),Im in p&&N(s,"bpmn:TextAnnotation")){var a=i.getTextAnnotationBounds({x:s.x,y:s.y,width:s.width,height:s.height},p[Im]||"");t.updateLabel(s,p.text,a)}}this.postExecute(["shape.create","connection.create"],function(l){var u=l.context,s=u.hints||{};if(s.createElementsBehavior!==!1){var p=u.shape||u.connection;Ve(p)||!Dr(p)||Tn(p)&&t.updateLabel(p,Tn(p))}}),this.postExecute("shape.delete",function(l){var u=l.context,s=u.labelTarget,p=u.hints||{};s&&p.unsetLabel!==!1&&t.updateLabel(s,null,null,{removeShape:!1})});function o(l){var u=l.context,s=u.connection,p=s.label,a=q({},u.hints),c=u.newWaypoints||s.waypoints,h=u.oldWaypoints;return typeof a.startChanged>"u"&&(a.startChanged=!!a.connectionStart),typeof a.endChanged>"u"&&(a.endChanged=!!a.connectionEnd),AM(p,c,h,a)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(l){var u=l.context,s=u.hints||{};if(s.labelBehavior!==!1){var p=u.connection,a=p.label,c;!a||!a.parent||(c=o(l),t.moveShape(a,c))}}),this.postExecute(["shape.replace"],function(l){var u=l.context,s=u.newShape,p=u.oldShape,a=re(s);a&&Dr(a)&&p.label&&s.label&&(s.label.x=p.label.x,s.label.y=p.label.y)}),this.postExecute("shape.resize",function(l){var u=l.context,s=u.shape,p=u.newBounds,a=u.oldBounds;if(ac(s)){var c=s.label,h=xe(c),f=LM(a),d=IM(h,f),m=kM(d,a,p);t.moveShape(c,m)}})}de(Vh,se);Vh.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function kM(e,t,n){var i=Gs(e,t,n);return mi(Wn(i,e))}function IM(e,t){if(t.length){var n=PM(e,t);return Sh(e,n)}}function LM(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function PM(e,t){var n=t.map(function(r){return{line:r,distance:Yb(e,r)}}),i=Gn(n,"distance");return i[0].line}function DM(e,t,n,i){return gw(e,t,n,i).point}function zh(e,t){se.call(this,e);function n(i,r){var o=i.context,l=o.connection,u=q({},o.hints),s=o.newWaypoints||l.waypoints,p=o.oldWaypoints;return typeof u.startChanged>"u"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged>"u"&&(u.endChanged=!!u.connectionEnd),DM(r,s,p,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,l=o.outgoing,u=o.incoming;u.forEach(function(s){var p=s.waypoints[s.waypoints.length-1],a=n(i,p),c=[].concat(s.waypoints.slice(0,-1),[a]);t.updateWaypoints(s,c)}),l.forEach(function(s){var p=s.waypoints[0],a=n(i,p),c=[].concat([a],s.waypoints.slice(1));t.updateWaypoints(s,c)})}),this.postExecute(["connection.move"],function(i){var r=i.context,o=r.connection,l=o.outgoing,u=o.incoming,s=r.delta;u.forEach(function(p){var a=p.waypoints[p.waypoints.length-1],c={x:a.x+s.x,y:a.y+s.y},h=[].concat(p.waypoints.slice(0,-1),[c]);t.updateWaypoints(p,h)}),l.forEach(function(p){var a=p.waypoints[0],c={x:a.x+s.x,y:a.y+s.y},h=[].concat([c],p.waypoints.slice(1));t.updateWaypoints(p,h)})})}de(zh,se);zh.$inject=["eventBus","modeling"];function Cc(e,t,n){var i=Tc(e),r=bw(i,t),o=i[0];return r.length?r[r.length-1]:Gs(o.original||o,n,t)}function Ac(e,t,n){var i=Tc(e),r=bw(i,t),o=i[i.length-1];return r.length?r[0]:Gs(o.original||o,n,t)}function Uh(e,t,n){var i=Tc(e),r=yw(t,n),o=i[0];return Gs(o.original||o,r,t)}function Yh(e,t,n){var i=Tc(e),r=yw(t,n),o=i[i.length-1];return Gs(o.original||o,r,t)}function yw(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function Tc(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function bw(e,t){var n=Pt(e,NM);return Re(n,function(i){return OM(i,t)})}function OM(e,t){return zt(t,e,1)==="intersect"}function NM(e){return e.original||e}function Xh(e,t){se.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(BM(i,r)){var o=FM(i);o.incoming.forEach(function(l){var u=Ac(l,r,i);t.reconnectEnd(l,r,u)}),o.outgoing.forEach(function(l){var u=Cc(l,r,i);t.reconnectStart(l,r,u)})}},!0)}Xh.$inject=["eventBus","modeling"];de(Xh,se);function BM(e,t){return N(e,"bpmn:Participant")&&Ne(e)&&N(t,"bpmn:Participant")&&!Ne(t)}function FM(e){var t=Is([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){N(o,"bpmn:MessageFlow")&&n.push(o)}),r.outgoing.forEach(function(o){N(o,"bpmn:MessageFlow")&&i.push(o)}))},[]),{incoming:n,outgoing:i}}const WM=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function ww(e){const t=re(e);if(!N(t,"bpmn:BoundaryEvent")&&!(N(t,"bpmn:StartEvent")&&Vt(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:WM.some(i=>N(n[0],i))}function _w(e){return N(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Zh(e,t){e.invoke(se,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,r=n.context.newShape,o=n.context.hints;if(!ww(r))return;const l=_w(r);if(o.targetElement&&o.targetElement[l]!==void 0)return;const s=re(i).get(l),p=re(r).get(l);s!==p&&t.updateProperties(r,{[l]:s})})}Zh.$inject=["injector","modeling"];de(Zh,se);function Kh(e,t){se.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=He(i),o=r&&r.get("label"),l=o&&o.get("bounds");l&&t.updateModdleProperties(i,o,{bounds:void 0})},!0)}de(Kh,se);Kh.$inject=["eventBus","modeling"];function Jh(e,t,n){se.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],l=r.outgoing[0];if(!(!N(o,"bpmn:SequenceFlow")||!N(l,"bpmn:SequenceFlow"))&&t.canConnect(o.source,l.target,o)){var u=HM(o.waypoints,l.waypoints);n.reconnectEnd(o,l.target,u)}}})}de(Jh,se);Jh.$inject=["eventBus","bpmnRules","modeling"];function so(e){return e.original||e}function HM(e,t){var n=cp(so(e[e.length-2]),so(e[e.length-1]),so(t[1]),so(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[so(e[0]),so(t[t.length-1])]}function Qh(e,t){se.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;N(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&t.makeProcess()},!0)}Qh.$inject=["eventBus","modeling"];de(Qh,se);function qh(e,t,n,i){se.call(this,e);var r=i.get("dragging",!1);function o(s){var p=s.source,a=s.target,c=s.parent;if(c){var h,f;N(s,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(p,a)||(f=!0),n.canConnectMessageFlow(p,a)&&(h="bpmn:MessageFlow")),N(s,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(p,a)||(f=!0),n.canConnectSequenceFlow(p,a)&&(h="bpmn:SequenceFlow")),f&&t.removeConnection(s),h&&t.connect(p,a,{type:h,waypoints:s.waypoints.slice()})}}function l(s){var p=s.context,a=p.connection,c=p.newSource||a.source,h=p.newTarget||a.target,f,d;f=n.canConnect(c,h),!(!f||f.type===a.type)&&(d=t.connect(c,h,{type:f.type,associationDirection:f.associationDirection,waypoints:a.waypoints.slice()}),a.parent&&t.removeConnection(a),p.connection=d,r&&u(a,d))}function u(s,p){var a=r.context(),c=a&&a.payload.previousSelection,h;!c||!c.length||(h=c.indexOf(s),h!==-1&&c.splice(h,1,p))}this.postExecuted("elements.move",function(s){var p=s.closure,a=p.allConnections;J(a,o)},!0),this.preExecute("connection.reconnect",l),this.postExecuted("element.updateProperties",function(s){var p=s.context,a=p.properties,c=p.element,h=c.businessObject,f;a.default&&(f=je(c.outgoing,Fn({id:c.businessObject.default.id})),f&&t.updateProperties(f,{conditionExpression:void 0})),a.conditionExpression&&h.sourceRef.default===h&&t.updateProperties(c.source,{default:void 0})})}de(qh,se);qh.$inject=["eventBus","modeling","bpmnRules","injector"];function $c(e,t,n,i,r,o){i.invoke(se,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(l){var u=l.context,s=u.parent,p=u.elements,a=pn(p,function(c,h){var f=t.canReplace([h],h.host||h.parent||s);return f?c.concat(f.replacements):c},[]);a.length&&this._replaceElements(p,a)},this),this.postExecuted(["elements.move"],500,function(l){var u=l.context,s=u.newParent,p=u.newHost,a=[];J(u.closure.topLevel,function(h){Vt(h)?a=a.concat(h.children):a=a.concat(h)}),a.length===1&&p&&(s=p);var c=t.canReplace(a,s);c&&this._replaceElements(a,c.replacements,p)},this),this.postExecute(["shape.replace"],1500,function(l){var u=l.context,s=u.oldShape,p=u.newShape,a=s.attachers,c;a&&a.length&&(c=t.canReplace(a,p),this._replaceElements(a,c.replacements))},this),this.postExecuted(["shape.replace"],1500,function(l){var u=l.context,s=u.oldShape,p=u.newShape;r.unclaimId(s.businessObject.id,s.businessObject),r.updateProperties(p,{id:s.id})})}de($c,se);$c.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;J(t,function(o){var l={type:o.newElementType},u=n.get(o.oldElementId),s=e.indexOf(u);e[s]=i.replaceElement(u,l,{select:!1})}),t&&r.select(e)};$c.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var jM=1500,GM={width:140,height:120},ed={width:300,height:60},td={width:60,height:300},tl={width:300,height:150},nl={width:150,height:300},Ew={width:140,height:120},xw={width:50,height:30};function Sw(e){e.on("resize.start",jM,function(t){var n=t.context,i=n.shape,r=n.direction,o=n.balanced;(N(i,"bpmn:Lane")||N(i,"bpmn:Participant"))&&(n.resizeConstraints=XM(i,r,o)),N(i,"bpmn:SubProcess")&&Ne(i)&&(n.minDimensions=Ew),N(i,"bpmn:TextAnnotation")&&(n.minDimensions=xw)})}Sw.$inject=["eventBus"];var Bi=Math.abs,VM=Math.min,zM=Math.max;function Cw(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function ao(e,t,n){return Cw(e,t,n,VM)}function lo(e,t,n){return Cw(e,t,n,zM)}var UM={top:20,left:50,right:20,bottom:20},YM={top:50,left:20,right:20,bottom:20};function XM(e,t,n){var i=xn(e),r=!0,o=!0,l=xc(i,[i]),u=ye(e),s={},p={},a=An(e),c=a?ed:td;/n/.test(t)?p.top=u.bottom-c.height:/e/.test(t)?p.right=u.left+c.width:/s/.test(t)?p.bottom=u.top+c.height:/w/.test(t)&&(p.left=u.right-c.width),l.forEach(function(d){var m=ye(d);/n/.test(t)&&(a&&m.top<u.top-10&&(r=!1),n&&Bi(u.top-m.bottom)<10&&lo(s,"top",m.top+c.height),Bi(u.top-m.top)<5&&ao(p,"top",m.bottom-c.height)),/e/.test(t)&&(!a&&m.right>u.right+10&&(o=!1),n&&Bi(u.right-m.left)<10&&ao(s,"right",m.right-c.width),Bi(u.right-m.right)<5&&lo(p,"right",m.left+c.width)),/s/.test(t)&&(a&&m.bottom>u.bottom+10&&(o=!1),n&&Bi(u.bottom-m.top)<10&&ao(s,"bottom",m.bottom-c.height),Bi(u.bottom-m.bottom)<5&&lo(p,"bottom",m.top+c.height)),/w/.test(t)&&(!a&&m.left<u.left-10&&(r=!1),n&&Bi(u.left-m.right)<10&&lo(s,"left",m.left+c.width),Bi(u.left-m.left)<5&&ao(p,"left",m.right-c.width))});var h=i.children.filter(function(d){return!d.hidden&&!d.waypoints&&(N(d,"bpmn:FlowElement")||N(d,"bpmn:Artifact"))}),f=a?UM:YM;return h.forEach(function(d){var m=ye(d);r&&/n/.test(t)&&ao(p,"top",m.top-f.top),o&&/e/.test(t)&&lo(p,"right",m.right+f.right),o&&/s/.test(t)&&lo(p,"bottom",m.bottom+f.bottom),r&&/w/.test(t)&&ao(p,"left",m.left-f.left)}),{min:p,max:s}}var Lm=1001;function Aw(e,t){e.on("resize.start",Lm+500,function(n){var i=n.context,r=i.shape;(N(r,"bpmn:Lane")||N(r,"bpmn:Participant"))&&(i.balanced=!go(n))}),e.on("resize.end",Lm,function(n){var i=n.context,r=i.shape,o=i.canExecute,l=i.newBounds;if(N(r,"bpmn:Lane")||N(r,"bpmn:Participant"))return o&&(l=vy(l),t.resizeLane(r,l,i.balanced)),!1})}Aw.$inject=["eventBus","modeling"];var ZM=500;function nd(e,t,n,i,r){n.invoke(se,this);function o(a){return Me(a,["bpmn:ReceiveTask","bpmn:SendTask"])||KM(a,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function l(a){var c=e.getDefinitions(),h=c.get("rootElements");return!!je(h,Fn({id:a.id}))}function u(a){if(N(a,"bpmn:ErrorEventDefinition"))return"errorRef";if(N(a,"bpmn:EscalationEventDefinition"))return"escalationRef";if(N(a,"bpmn:MessageEventDefinition"))return"messageRef";if(N(a,"bpmn:SignalEventDefinition"))return"signalRef"}function s(a){if(Me(a,["bpmn:ReceiveTask","bpmn:SendTask"]))return a.get("messageRef");var c=a.get("eventDefinitions"),h=c[0];return h.get(u(h))}function p(a,c){if(Me(a,["bpmn:ReceiveTask","bpmn:SendTask"]))return a.set("messageRef",c);var h=a.get("eventDefinitions"),f=h[0];return f.set(u(f),c)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(a){var c=a.shape||a.element;if(o(c)){var h=re(c),f=s(h),d;f&&!l(f)&&(d=e.getDefinitions().get("rootElements"),At(d,f),a.addedRootElement=f)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(a){var c=a.addedRootElement;if(c){var h=e.getDefinitions().get("rootElements");bt(h,c)}},!0),t.on("copyPaste.copyElement",function(a){var c=a.descriptor,h=a.element;if(!(h.labelTarget||!o(h))){var f=re(h),d=s(f);d&&(c.referencedRootElement=d)}}),t.on("copyPaste.pasteElement",ZM,function(a){var c=a.descriptor,h=c.businessObject,f=c.referencedRootElement;f&&(l(f)||(f=i.copyElement(f,r.create(f.$type))),p(h,f),delete c.referencedRootElement)})}nd.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"];de(nd,se);function KM(e,t){return Ie(t)||(t=[t]),Ut(t,function(n){return Fs(e,n)})}var Tw=Math.max;function $w(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,o={};return J(n,function(l){var u=l.id;N(l,"bpmn:Participant")&&(o[u]=QM(l,i,r)),N(l,"bpmn:Lane")&&(o[u]=An(l)?ed:td),N(l,"bpmn:SubProcess")&&Ne(l)&&(o[u]=Ew),N(l,"bpmn:TextAnnotation")&&(o[u]=xw),N(l,"bpmn:Group")&&(o[u]=GM)}),o})}$w.$inject=["eventBus"];function JM(e){return e==="x"}function QM(e,t,n){var i=An(e);if(!t2(e))return i?tl:nl;var r=JM(t),o={};return r?i?o=tl:o={width:e2(e,n,r),height:nl.height}:i?o={width:tl.width,height:qM(e,n,r)}:o=nl,o}function qM(e,t,n){var i;return i=n2(e,t,n),Tw(tl.height,i)}function e2(e,t,n){var i;return i=i2(e,t,n),Tw(nl.width,i)}function t2(e){return!!Mi(e).length}function n2(e,t,n){var i=Mi(e),r;return r=id(i,t,n),e.height-r.height+ed.height}function i2(e,t,n){var i=Mi(e),r;return r=id(i,t,n),e.width-r.width+td.width}function id(e,t,n){var i,r,o;for(i=0;i<e.length;i++)if(r=e[i],!n&&t>=r.y&&t<=r.y+r.height||n&&t>=r.x&&t<=r.x+r.width)return o=Mi(r),o.length?id(o,t,n):r}var Pm=400,r2=600,Dm={x:180,y:160};function ur(e,t,n,i,r,o,l){se.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=l;var u=this;function s(c){return N(c,"bpmn:SubProcess")&&!Ne(c)}function p(c){var h=c.shape,f=c.newRootElement,d=re(h);f=u._addDiagram(f||d),c.newRootElement=e.addRootElement(f)}function a(c){var h=c.shape,f=re(h);u._removeDiagram(f);var d=c.newRootElement=l.get(hi(f));e.removeRootElement(d)}this.executed("shape.create",function(c){var h=c.shape;s(h)&&p(c)},!0),this.postExecuted("shape.create",function(c){var h=c.shape,f=c.newRootElement;!f||!h.children||(u._showRecursively(h.children),u._moveChildrenToShape(h,f))},!0),this.reverted("shape.create",function(c){var h=c.shape;s(h)&&a(c)},!0),this.preExecuted("shape.delete",function(c){var h=c.shape;if(s(h)){var f=l.get(hi(h));f&&n.removeElements(f.children.slice())}},!0),this.executed("shape.delete",function(c){var h=c.shape;s(h)&&a(c)},!0),this.reverted("shape.delete",function(c){var h=c.shape;s(h)&&p(c)},!0),this.preExecuted("shape.replace",function(c){var h=c.oldShape,f=c.newShape;!s(h)||!s(f)||(c.oldRoot=e.removeRootElement(hi(h)))},!0),this.postExecuted("shape.replace",function(c){var h=c.newShape,f=c.oldRoot,d=e.findRoot(hi(h));if(!(!f||!d)){var m=f.children;n.moveElements(m,{x:0,y:0},d)}},!0),this.executed("element.updateProperties",function(c){var h=c.element;if(N(h,"bpmn:SubProcess")){var f=c.properties,d=c.oldProperties,m=d.id,g=f.id;if(m!==g){if(Ja(h)){l.updateId(h,Er(g)),l.updateId(m,g);return}var y=l.get(Er(m));y&&l.updateId(Er(m),Er(g))}}},!0),this.reverted("element.updateProperties",function(c){var h=c.element;if(N(h,"bpmn:SubProcess")){var f=c.properties,d=c.oldProperties,m=d.id,g=f.id;if(m!==g){if(Ja(h)){l.updateId(h,Er(m)),l.updateId(g,m);return}var y=l.get(Er(g));y&&l.updateId(y,Er(m))}}},!0),t.on("element.changed",function(c){var h=c.element;if(Ja(h)){var f=h,d=l.get(kf(f));!d||d===f||t.fire("element.changed",{element:d})}}),this.executed("shape.toggleCollapse",Pm,function(c){var h=c.shape;N(h,"bpmn:SubProcess")&&(Ne(h)?a(c):(p(c),u._showRecursively(h.children)))},!0),this.reverted("shape.toggleCollapse",Pm,function(c){var h=c.shape;N(h,"bpmn:SubProcess")&&(Ne(h)?a(c):(p(c),u._showRecursively(h.children)))},!0),this.postExecuted("shape.toggleCollapse",r2,function(c){var h=c.shape;if(N(h,"bpmn:SubProcess")){var f=c.newRootElement;f&&(Ne(h)?u._moveChildrenToShape(f,h):u._moveChildrenToShape(h,f))}},!0),t.on("copyPaste.createTree",function(c){var h=c.element,f=c.children;if(s(h)){var d=hi(h),m=l.get(d);m&&f.push.apply(f,m.children)}}),t.on("copyPaste.copyElement",function(c){var h=c.descriptor,f=c.element,d=c.elements,m=f.parent,g=N(He(m),"bpmndi:BPMNPlane");if(g){var y=kf(m),w=je(d,function(S){return S.id===y});w&&(h.parent=w.id)}}),t.on("copyPaste.pasteElement",function(c){var h=c.descriptor;h.parent&&(s(h.parent)||h.parent.hidden)&&(h.hidden=!0)})}de(ur,se);ur.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(p,a){return a.label&&a.label.parent!==e?p.concat(a.label):p},[]));var o=i.filter(function(p){return!p.hidden});if(!o.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var l=vt(o);if(!t.x)r={x:Dm.x-l.x,y:Dm.y-l.y};else{var u=xe(t),s=xe(l);r={x:u.x-s.x,y:u.y-s.y}}n.moveElements(i,r,t,{autoResize:!1})}};ur.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i};ur.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e};ur.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var o=n.createRoot({id:hi(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return o};ur.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=je(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i};ur.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function rd(e,t){e.invoke(se,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!N(r,"bpmn:SubProcess")||!(N(i,"bpmn:Task")||N(i,"bpmn:CallActivity"))||!Ne(r))){var o=o2(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}rd.$inject=["injector","modeling"];de(rd,se);function o2(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function od(e){se.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;N(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&N(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}de(od,se);od.$inject=["eventBus"];function sd(e,t){se.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(Ne(i))return;var r=Is(i);r.forEach(function(l){var u=l.incoming.slice(),s=l.outgoing.slice();J(u,function(p){o(p,!0)}),J(s,function(p){o(p,!1)})});function o(l,u){r.indexOf(l.source)!==-1&&r.indexOf(l.target)!==-1||(u?t.reconnectEnd(l,i,xe(i)):t.reconnectStart(l,i,xe(i)))}},!0)}de(sd,se);sd.$inject=["eventBus","modeling"];var du=500;function ad(e,t,n){se.call(this,e);function i(l){l.length&&l.forEach(function(u){u.type==="label"&&!u.businessObject.name&&(u.hidden=!0)})}function r(l,u){var s=l.children,p=u,a,c;return a=s2(s).concat([l]),c=pw(a),c?(p.width=Math.max(c.width,p.width),p.height=Math.max(c.height,p.height),p.x=c.x+(c.width-p.width)/2,p.y=c.y+(c.height-p.height)/2):(p.x=l.x+(l.width-p.width)/2,p.y=l.y+(l.height-p.height)/2),p}function o(l,u){return{x:l.x+(l.width-u.width)/2,y:l.y+(l.height-u.height)/2,width:u.width,height:u.height}}this.executed(["shape.toggleCollapse"],du,function(l){var u=l.context,s=u.shape;N(s,"bpmn:SubProcess")&&(s.collapsed?He(s).isExpanded=!1:(i(s.children),He(s).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],du,function(l){var u=l.context,s=u.shape;s.collapsed?He(s).isExpanded=!1:He(s).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],du,function(l){var u=l.context.shape,s=t.getDefaultSize(u),p;u.collapsed?p=o(u,s):p=r(u,s),n.resizeShape(u,p,null,{autoResize:u.collapsed?!1:"nwse"})})}de(ad,se);ad.$inject=["eventBus","elementFactory","modeling"];function s2(e){return e.filter(function(t){return!t.hidden})}function ld(e,t,n,i){t.invoke(se,this),this.preExecute("shape.delete",function(r){var o=r.context,l=o.shape,u=l.businessObject;Ve(l)||(N(l,"bpmn:Participant")&&Ne(l)&&n.ids.unclaim(u.processRef.id),i.unclaimId(u.id,u))}),this.preExecute("connection.delete",function(r){var o=r.context,l=o.connection,u=l.businessObject;i.unclaimId(u.id,u)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;N(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}de(ld,se);ld.$inject=["canvas","injector","moddle","modeling"];function cd(e,t){se.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,o=r.source;a2(r,o)&&t.updateProperties(o,{default:null})})}de(cd,se);cd.$inject=["eventBus","modeling"];function a2(e,t){if(!N(e,"bpmn:SequenceFlow"))return!1;var n=re(t),i=re(e);return n.get("default")===i}var l2=500,c2=5e3;function ud(e,t,n){se.call(this,e);var i;function r(){return i=i||new u2,i.enter(),i}function o(){if(!i)throw new Error(n("out of bounds release"));return i}function l(){if(!i)throw new Error(n("out of bounds release"));var s=i.leave();return s&&(t.updateLaneRefs(i.flowNodes,i.lanes),i=null),s}var u=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(u,c2,function(s){r()}),this.postExecuted(u,l2,function(s){l()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var p=s.context,a=p.shape,c=o();a.labelTarget||(N(a,"bpmn:Lane")&&c.addLane(a),N(a,"bpmn:FlowNode")&&c.addFlowNode(a))})}ud.$inject=["eventBus","modeling","translate"];de(ud,se);function u2(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}const p2={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior"],adaptiveLabelPositioningBehavior:["type",Rh],appendBehavior:["type",Mh],associationBehavior:["type",kh],attachEventBehavior:["type",_c],boundaryEventBehavior:["type",Ih],compensateBoundaryEventBehaviour:["type",Lh],createBehavior:["type",Ph],createDataObjectBehavior:["type",Dh],createParticipantBehavior:["type",Oh],dataInputAssociationBehavior:["type",Nh],dataStoreBehavior:["type",Bh],deleteLaneBehavior:["type",Fh],detachEventBehavior:["type",Sc],dropOnFlowBehavior:["type",Wh],eventBasedGatewayBehavior:["type",Hh],fixHoverBehavior:["type",hw],groupBehavior:["type",jh],importDockingFix:["type",dw],isHorizontalFix:["type",Gh],labelBehavior:["type",Vh],layoutConnectionBehavior:["type",zh],messageFlowBehavior:["type",Xh],nonInterruptingBehavior:["type",Zh],removeElementBehavior:["type",Jh],removeEmbeddedLabelBoundsBehavior:["type",Kh],removeParticipantBehavior:["type",Qh],replaceConnectionBehavior:["type",qh],replaceElementBehaviour:["type",$c],resizeBehavior:["type",Sw],resizeLaneBehavior:["type",Aw],rootElementReferenceBehavior:["type",nd],spaceToolBehavior:["type",$w],subProcessPlaneBehavior:["type",ur],subProcessStartEventBehavior:["type",rd],textAnnotationBehavior:["type",od],toggleCollapseConnectionBehaviour:["type",sd],toggleElementCollapseBehaviour:["type",ad],unclaimIdBehavior:["type",ld],unsetDefaultFlowBehavior:["type",cd],updateFlowNodeRefsBehavior:["type",ud]};function Rw(e,t){var n=zt(e,t,-15);return n!=="intersect"?n:null}function jt(e){kn.call(this,e)}de(jt,kn);jt.$inject=["eventBus"];jt.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return h2(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,o=i.targetAttach;if(o)return!1;r&&(n.parent=r);try{return il(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return il(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return Bw(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return Qe(i)&&!Il(t,i)?!1:xo(t,function(r){return Qe(r)?il(r.source,r.target,r):r.host?as(r,r.host,null,n):dp(r,i,null)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return as(n,t,null,i)||Ow(n,t,i)||Nw(n,t)||Il(n,t)}),this.addRule("shape.create",function(e){return dp(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return as(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return Gw(n,t)})};jt.prototype.canConnectMessageFlow=Hw;jt.prototype.canConnectSequenceFlow=jw;jt.prototype.canConnectDataAssociation=hd;jt.prototype.canConnectAssociation=Fw;jt.prototype.canConnectCompensationAssociation=Ww;jt.prototype.canMove=Nw;jt.prototype.canAttach=as;jt.prototype.canReplace=Ow;jt.prototype.canDrop=bo;jt.prototype.canInsert=Il;jt.prototype.canCreate=dp;jt.prototype.canConnect=il;jt.prototype.canResize=Bw;jt.prototype.canCopy=Gw;function h2(e){return up(e)?null:Me(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function up(e){return!e||Ve(e)}function d2(e,t){return e===t}function Om(e){do{if(N(e,"bpmn:Process"))return re(e);if(N(e,"bpmn:Participant"))return re(e).processRef||re(e)}while(e=e.parent)}function pp(e){return N(e,"bpmn:TextAnnotation")}function pd(e){return N(e,"bpmn:Group")&&!e.labelTarget}function Mw(e){return N(e,"bpmn:BoundaryEvent")&&ii(e,"bpmn:CompensateEventDefinition")}function Rc(e){return re(e).isForCompensation}function f2(e,t){var n=Om(e),i=Om(t);return n===i}function m2(e){return N(e,"bpmn:InteractionNode")&&!N(e,"bpmn:BoundaryEvent")&&(!N(e,"bpmn:Event")||N(e,"bpmn:ThrowEvent")&&Iw(e,"bpmn:MessageEventDefinition"))}function g2(e){return N(e,"bpmn:InteractionNode")&&!Rc(e)&&(!N(e,"bpmn:Event")||N(e,"bpmn:CatchEvent")&&Iw(e,"bpmn:MessageEventDefinition"))&&!(N(e,"bpmn:BoundaryEvent")&&!ii(e,"bpmn:MessageEventDefinition"))}function Nm(e){for(var t=e;t=t.parent;){if(N(t,"bpmn:FlowElementsContainer"))return re(t);if(N(t,"bpmn:Participant"))return re(t).processRef}return null}function kw(e,t){var n=Nm(e),i=Nm(t);return n===i}function ii(e,t){var n=re(e);return!!je(n.eventDefinitions||[],function(i){return N(i,t)})}function Iw(e,t){var n=re(e);return(n.eventDefinitions||[]).every(function(i){return N(i,t)})}function v2(e){return N(e,"bpmn:FlowNode")&&!N(e,"bpmn:EndEvent")&&!Vt(e)&&!(N(e,"bpmn:IntermediateThrowEvent")&&ii(e,"bpmn:LinkEventDefinition"))&&!Mw(e)&&!Rc(e)}function y2(e){return N(e,"bpmn:FlowNode")&&!N(e,"bpmn:StartEvent")&&!N(e,"bpmn:BoundaryEvent")&&!Vt(e)&&!(N(e,"bpmn:IntermediateCatchEvent")&&ii(e,"bpmn:LinkEventDefinition"))&&!Rc(e)}function b2(e){return N(e,"bpmn:ReceiveTask")||N(e,"bpmn:IntermediateCatchEvent")&&(ii(e,"bpmn:MessageEventDefinition")||ii(e,"bpmn:TimerEventDefinition")||ii(e,"bpmn:ConditionalEventDefinition")||ii(e,"bpmn:SignalEventDefinition"))}function w2(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function hp(e,t){var n=w2(t);return n.indexOf(e)!==-1}function il(e,t,n){if(up(e)||up(t))return null;if(!N(n,"bpmn:DataAssociation")){if(Hw(e,t))return{type:"bpmn:MessageFlow"};if(jw(e,t))return{type:"bpmn:SequenceFlow"}}var i=hd(e,t);return i||(Ww(e,t)?{type:"bpmn:Association",associationDirection:"One"}:Fw(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function bo(e,t){return Ve(e)||pd(e)?!0:N(t,"bpmn:Participant")&&!Ne(t)?!1:N(e,"bpmn:Participant")?N(t,"bpmn:Process")||N(t,"bpmn:Collaboration"):Me(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:N(e,"bpmn:Lane")?N(t,"bpmn:Participant")||N(t,"bpmn:Lane"):N(e,"bpmn:BoundaryEvent")&&!_2(e)?!1:N(e,"bpmn:FlowElement")&&!N(e,"bpmn:DataStoreReference")?N(t,"bpmn:FlowElementsContainer")?Ne(t):Me(t,["bpmn:Participant","bpmn:Lane"]):N(e,"bpmn:DataStoreReference")&&N(t,"bpmn:Collaboration")?Ut(re(t).get("participants"),function(n){return!!n.get("processRef")}):Me(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?Me(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):N(e,"bpmn:MessageFlow")?N(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function _2(e){return re(e).cancelActivity&&(Lw(e)||Pw(e))}function E2(e){return!Ve(e)&&N(e,"bpmn:BoundaryEvent")}function x2(e){return N(e,"bpmn:Lane")}function S2(e){return E2(e)||N(e,"bpmn:IntermediateThrowEvent")&&Lw(e)?!0:N(e,"bpmn:IntermediateCatchEvent")&&Pw(e)}function Lw(e){var t=re(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function Pw(e){return Dw(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Dw(e,t){return t.some(function(n){return ii(e,n)})}function C2(e){return N(e,"bpmn:ReceiveTask")&&je(e.incoming,function(t){return N(t.source,"bpmn:EventBasedGateway")})}function as(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Ve(r)||!S2(r)||Vt(t)||!N(t,"bpmn:Activity")||Rc(t)||i&&!Rw(i,t)||C2(t)?!1:"attach"}function Ow(e,t,n){if(!t)return!1;var i={replacements:[]};return J(e,function(r){Vt(t)||N(r,"bpmn:StartEvent")&&r.type!=="label"&&bo(r,t)&&(kA(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(IA(r)||LA(r)||PA(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),Dw(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&N(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),N(t,"bpmn:Transaction")||ii(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(N(r,"bpmn:EndEvent")&&bo(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),N(r,"bpmn:BoundaryEvent")&&as(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function Nw(e,t){return Ut(e,x2)?!1:t?e.every(function(n){return bo(n,t)}):!0}function dp(e,t,n,i){return t?Ve(e)||pd(e)?!0:d2(n,t)||n&&hp(n,t)?!1:bo(e,t)||Il(e,t):!1}function Bw(e,t){return N(e,"bpmn:SubProcess")?Ne(e)&&(!t||t.width>=100&&t.height>=80):!!(N(e,"bpmn:Lane")||N(e,"bpmn:Participant")||pp(e)||pd(e))}function A2(e,t){var n=pp(e),i=pp(t);return(n||i)&&n!==i}function Fw(e,t){return hp(t,e)||hp(e,t)?!1:A2(e,t)?!0:!!hd(e,t)}function Ww(e,t){return kw(e,t)&&Mw(e)&&N(t,"bpmn:Activity")&&!$2(t,e)&&!Vt(t)}function Hw(e,t){return Bm(e)&&!Bm(t)?!1:m2(e)&&g2(t)&&!f2(e,t)}function jw(e,t){return v2(e)&&y2(t)&&kw(e,t)&&!(N(e,"bpmn:EventBasedGateway")&&!b2(t))}function hd(e,t){return Me(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Me(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:Me(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&Me(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function Il(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:Me(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Ve(t)&&N(e,"bpmn:FlowNode")&&!N(e,"bpmn:BoundaryEvent")&&bo(e,t.parent)}function T2(e,t){return e&&t&&e.indexOf(t)!==-1}function Gw(e,t){return Ve(t)?!0:!(N(t,"bpmn:Lane")&&!T2(e,t.parent))}function Bm(e){return Al(e,"bpmn:Process")||Al(e,"bpmn:Collaboration")}function $2(e,t){return e.attachers.includes(t)}const R2={__depends__:[ci],__init__:["bpmnRules"],bpmnRules:["type",jt]};var M2=2e3;function Vw(e,t){e.on("saveXML.start",M2,n);function n(){var i=t.getRootElements();J(i,function(r){var o=He(r),l,u;l=Is([r],!1),l=Re(l,function(s){return s!==r&&!s.labelTarget}),u=Pt(l,He),o.set("planeElement",u)})}}Vw.$inject=["eventBus","canvas"];const k2={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",Vw]};function Mc(e){se.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,l=t.getOrdering(r,o);l&&(l.parent!==void 0&&(i.parent=l.parent),i.parentIndex=l.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,l=t.getOrdering(r,o);l&&(l.parent!==void 0&&(i.newParent=l.parent),i.newParentIndex=l.index)})}Mc.prototype.getOrdering=function(e,t){return null};de(Mc,se);function dd(e,t,n){Mc.call(this,e);var i=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function r(u){if(u.labelTarget)return{level:10};var s=je(i,function(p){return Me(u,[p.type])});return s&&s.order||{level:1}}function o(u){var s=u.order;if(s||(u.order=s=r(u)),!s)throw new Error("no order for <"+u.id+">");return s}function l(u,s,p){for(var a=s;a&&!Me(a,p);)a=a.parent;if(!a)throw new Error("no parent for <"+u.id+"> in <"+(s&&s.id)+">");return a}this.getOrdering=function(u,s){if(u.labelTarget||N(u,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var p=o(u);p.containers&&(s=l(u,s,p.containers));var a=s.children.indexOf(u),c=mv(s.children,function(h){return!u.labelTarget&&h.labelTarget?!1:p.level<o(h).level});return c!==-1&&a!==-1&&a<c&&(c-=1),{index:c,parent:s}}}dd.$inject=["eventBus","canvas","translate"];de(dd,Mc);const I2={__depends__:[Ws],__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",dd]};function Vs(){}Vs.prototype.get=function(){return this._data};Vs.prototype.set=function(e){this._data=e};Vs.prototype.clear=function(){var e=this._data;return delete this._data,e};Vs.prototype.isEmpty=function(){return!this._data};const L2={clipboard:["type",Vs]};var P2="drop-ok",Fm="drop-not-ok",Wm="attach-ok",Hm="new-parent",jm="create",D2=2e3;function zw(e,t,n,i,r){function o(s,p,a,c,h){if(!p)return!1;s=Re(s,function(w){var S=w.labelTarget;return!w.parent&&!(Ve(w)&&s.indexOf(S)!==-1)});var f=je(s,function(w){return!Qe(w)}),d=!1,m=!1,g=!1;Vm(s)&&(d=r.allowed("shape.attach",{position:a,shape:f,target:p})),d||(Vm(s)?g=r.allowed("shape.create",{position:a,shape:f,source:c,target:p}):g=r.allowed("elements.create",{elements:s,position:a,target:p}));var y=h.connectionTarget;return g||d?(f&&c&&(m=r.allowed("connection.create",{source:y===c?f:c,target:y===c?c:f,hints:{targetParent:p,targetAttach:d}})),{attach:d,connect:m}):g===null||d===null?null:!1}function l(s,p){[Wm,P2,Fm,Hm].forEach(function(a){a===p?e.addMarker(s,a):e.removeMarker(s,a)})}n.on(["create.move","create.hover"],function(s){var p=s.context,a=p.elements,c=s.hover,h=p.source,f=p.hints||{};if(!c){p.canExecute=!1,p.target=null;return}Gm(s);var d={x:s.x,y:s.y},m=p.canExecute=c&&o(a,c,d,h,f);c&&m!==null&&(p.target=c,m&&m.attach?l(c,Wm):l(c,m?Hm:Fm))}),n.on(["create.end","create.out","create.cleanup"],function(s){var p=s.hover;p&&l(p,null)}),n.on("create.end",function(s){var p=s.context,a=p.source,c=p.shape,h=p.elements,f=p.target,d=p.canExecute,m=d&&d.attach,g=d&&d.connect,y=p.hints||{};if(d===!1||!f)return!1;Gm(s);var w={x:s.x,y:s.y};g?c=i.appendShape(a,c,w,f,{attach:m,connection:g===!0?{}:g,connectionTarget:y.connectionTarget}):(h=i.createElements(h,w,f,q({},y,{attach:m})),c=je(h,function(S){return!Qe(S)})),q(p,{elements:h,shape:c}),q(s,{elements:h,shape:c})});function u(){var s=t.context();s&&s.prefix===jm&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",u),n.once(["create.cancel","create.end"],D2,function(){n.off("elements.changed",u)})}),this.start=function(s,p,a){Ie(p)||(p=[p]);var c=je(p,function(d){return!Qe(d)});if(c){a=q({elements:p,hints:{},shape:c},a||{}),J(p,function(d){Se(d.x)||(d.x=0),Se(d.y)||(d.y=0)});var h=Re(p,function(d){return!d.hidden}),f=vt(h);J(p,function(d){Qe(d)&&(d.waypoints=Pt(d.waypoints,function(m){return{x:m.x-f.x-f.width/2,y:m.y-f.y-f.height/2}})),q(d,{x:d.x-f.x-f.width/2,y:d.y-f.y-f.height/2})}),t.init(s,jm,{cursor:"grabbing",autoActivate:!0,data:{shape:c,elements:p,context:a}})}}}zw.$inject=["canvas","dragging","eventBus","modeling","rules"];function Gm(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function Vm(e){return e&&e.length===1&&!Qe(e[0])}var O2=750;function Uw(e,t,n,i,r){function o(l){var u=he("g");ce(u,r.cls("djs-drag-group",["no-events"]));var s=he("g");return l.forEach(function(p){var a;p.hidden||(p.waypoints?(a=n._createContainer("connection",s),n.drawConnection(zi(a),p)):(a=n._createContainer("shape",s),n.drawShape(zi(a),p),Ft(a,p.x,p.y)),i.addDragger(p,u,a))}),u}t.on("create.move",O2,function(l){var u=l.hover,s=l.context,p=s.elements,a=s.dragGroup;a||(a=s.dragGroup=o(p));var c;u?(a.parentNode||(c=e.getActiveLayer(),me(c,a)),Ft(a,l.x,l.y)):ut(a)}),t.on("create.cleanup",function(l){var u=l.context,s=u.dragGroup;s&&ut(s)})}Uw.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];const zs={__depends__:[$i,Bo,ci,ai],__init__:["create","createPreview"],create:["type",zw],createPreview:["type",Uw]};function fd(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}fd.$inject=["eventBus"];fd.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||N2(0,0)};function N2(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,l=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,l,!1,!1,!1,!1,0,null),n}const Us={__init__:["mouse"],mouse:["type",fd]};function Yn(e,t,n,i,r,o,l,u){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=l,this._rules=u,r.on("copyPaste.copyElement",function(s){var p=s.descriptor,a=s.element,c=s.elements;p.priority=1,p.id=a.id;var h=je(c,function(f){return f===a.parent});h&&(p.parent=a.parent.id),B2(a)&&(p.priority=2,p.host=a.host.id),Qe(a)&&(p.priority=3,p.source=a.source.id,p.target=a.target.id,p.waypoints=F2(a)),Ve(a)&&(p.priority=4,p.labelTarget=a.labelTarget.id),J(["x","y","width","height"],function(f){Se(a[f])&&(p[f]=a[f])}),p.hidden=a.hidden,p.collapsed=a.collapsed}),r.on("copyPaste.pasteElements",function(s){var p=s.hints;q(p,{createElementsBehavior:!1})})}Yn.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"];Yn.prototype.copy=function(e){var t,n;return Ie(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(Ie(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n};Yn.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}};Yn.prototype._paste=function(e,t,n,i){J(e,function(o){Se(o.x)||(o.x=0),Se(o.y)||(o.y=0)});var r=vt(e);return J(e,function(o){Qe(o)&&(o.waypoints=Pt(o.waypoints,function(l){return{x:l.x-r.x-r.width/2,y:l.y-r.y-r.height/2}})),q(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,q({},i))};Yn.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return J(e,function(o,l){o=Gn(o,"priority"),J(o,function(u){var s=q({},si(u,["priority"]));i[u.parent]?s.parent=i[u.parent]:delete s.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:s});var p;if(Qe(s)){s.source=i[u.source],s.target=i[u.target],p=i[u.id]=t.createConnection(s),r.push(p);return}if(Ve(s)){s.labelTarget=i[s.labelTarget],p=i[u.id]=t.createLabel(s),r.push(p);return}s.host&&(s.host=i[s.host]),p=i[u.id]=t.createShape(s),r.push(p)})}),r};Yn.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(si(e,["id"]));return t};Yn.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(si(e,["id"]));return t};Yn.prototype.createShape=function(e){var t=this._elementFactory.createShape(si(e,["id"]));return t};Yn.prototype.hasRelations=function(e,t){var n,i,r;return!(Qe(e)&&(i=je(t,Fn({id:e.source.id})),r=je(t,Fn({id:e.target.id})),!i||!r)||Ve(e)&&(n=je(t,Fn({id:e.labelTarget.id})),!n))};Yn.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],o=tc(e);function l(p,a){return t.allowed("element.copy",{element:p,elements:a})}function u(p,a){var c=je(r,function(h){return p===h.element});if(!c){r.push({element:p,depth:a});return}c.depth<a&&(r=s(c,r),r.push({element:c.element,depth:a}))}function s(p,a){var c=a.indexOf(p);return c!==-1&&a.splice(c,1),a}return Ur(o,function(p,a,c){if(Ve(p))return;J(p.labels,function(d){u(d,c)});function h(d){d&&d.length&&J(d,function(m){J(m.labels,function(g){u(g,c)}),u(m,c)})}J([p.attachers,p.incoming,p.outgoing],h),u(p,c);var f=[];return p.children&&(f=p.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:p,children:f}),f}),e=Pt(r,function(p){return p.element}),r=Pt(r,function(p){return p.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:p.descriptor,element:p.element,elements:e}),p}),r=Gn(r,function(p){return p.descriptor.priority}),e=Pt(r,function(p){return p.element}),J(r,function(p){var a=p.depth;if(!n.hasRelations(p.element,e)){Um(p.element,e);return}if(!l(p.element,e)){Um(p.element,e);return}i[a]||(i[a]=[]),i[a].push(p.descriptor)}),i};function B2(e){return!!e.host}function F2(e){return Pt(e.waypoints,function(t){return t=zm(t),t.original&&(t.original=zm(t.original)),t})}function zm(e){return q({},e)}function Um(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}const W2={__depends__:[L2,zs,Us,ci],__init__:["copyPaste"],copyPaste:["type",Yn]};function fu(e,t,n){Ie(n)||(n=[n]),J(n,function(i){Ir(e[i])||(t[i]=e[i])})}var mu=750;function Yw(e,t,n){function i(s,p){var a=e.create(s.$type);return n.copyElement(s,a,null,p)}t.on("copyPaste.copyElement",mu,function(s){var p=s.descriptor,a=s.element,c=re(a);if(Ve(a))return p;var h=p.businessObject=i(c,!0),f=p.di=i(He(a),!0);f.bpmnElement=h,fu(h,p,"name"),fu(f,p,"isExpanded"),c.default&&(p.default=c.default.id)});var r="-bpmn-js-refs";function o(s){return s[r]=s[r]||{}}function l(s,p){s[r]=p}function u(s,p,a){var c=re(s);return s.default&&(a[s.default]={element:c,property:"default"}),s.host&&(re(s).attachedToRef=re(p[s.host])),si(a,pn(a,function(h,f,d){var m=f.element,g=f.property;return d===s.id&&(m.set(g,c),h.push(s.id)),h},[]))}t.on("copyPaste.pasteElement",function(s){var p=s.cache,a=s.descriptor,c=a.businessObject,h=a.di;if(Ve(a)){a.businessObject=re(p[a.labelTarget]),a.di=He(p[a.labelTarget]);return}c=a.businessObject=i(c),h=a.di=i(h),h.bpmnElement=c,fu(a,c,["isExpanded","name"]),a.type=c.$type}),t.on("copyPaste.copyElement",mu,function(s){var p=s.descriptor,a=s.element;if(N(a,"bpmn:Participant")){var c=re(a);c.processRef&&(p.processRef=i(c.processRef,!0))}}),t.on("copyPaste.pasteElement",function(s){var p=s.descriptor,a=p.processRef;a&&(p.processRef=i(a))}),t.on("copyPaste.pasteElement",mu,function(s){var p=s.cache,a=s.descriptor;l(p,u(a,p,o(p)))})}Yw.$inject=["bpmnFactory","eventBus","moddleCopy"];var H2=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function Ys(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return Gn(r,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=Mt(r)&&r.$descriptor,l=i.propertyName;if(l&&H2.indexOf(l)!==-1||l&&o&&!je(o.properties,Fn({name:l})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(j2(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}Ys.$inject=["eventBus","bpmnFactory","moddle"];Ys.prototype.copyElement=function(e,t,n,i=!1){var r=this;n&&!Ie(n)&&(n=[n]),n=n||fp(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return o===!1||(Ie(o)&&(n=o),J(n,function(l){var u;en(e,l)&&(u=e.get(l));var s=r.copyProperty(u,t,l,i);if(Rt(s)){var p=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:s,propertyName:l});p!==!1&&t.set(l,s)}})),t};Ys.prototype.copyProperty=function(e,t,n,i=!1){var r=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(o!==!1){if(o)return Mt(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var l=this._moddle.getPropertyDescriptor(t,n);if(!l.isReference)return l.isId?e&&this._copyId(e,t,i):Ie(e)?pn(e,function(u,s){return o=r.copyProperty(s,t,n,i),o?u.concat(o):u},[]):Mt(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=r._bpmnFactory.create(e.$type),o.$parent=t,o=r.copyElement(e,o,null,i),o):e}};Ys.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function fp(e,t){return pn(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function j2(e,t){return e&&yt(e.$instanceOf)&&e.$instanceOf(t)}const Xw={__depends__:[W2],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",Yw],moddleCopy:["type",Ys]};var Ym=Math.round;function md(e,t){this._modeling=e,this._eventBus=t}md.$inject=["modeling","eventBus"];md.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,l=t.height||e.height,u=t.x||e.x,s=t.y||e.y,p=Ym(u+o/2),a=Ym(s+l/2),c=i.replaceShape(e,q({},t,{x:p,y:a,width:o,height:l}),n);return r.fire("replace.end",{element:e,newElement:c,hints:n}),c};function Zw(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}Zw.$inject=["selection","eventBus"];const G2={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",Zw],replace:["type",md]};function V2(e,t,n){Ie(n)||(n=[n]),J(n,function(i){Ir(e[i])||(t[i]=e[i])})}var z2=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function U2(e,t){var n=e&&en(e,"collapsed")?e.collapsed:!Ne(e),i;return t&&(en(t,"collapsed")||en(t,"isExpanded"))?i=en(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function Kw(e,t,n,i,r,o){function l(u,s,p){p=p||{};var a=s.type,c=u.businessObject;if(Ma(c)&&a==="bpmn:SubProcess"&&U2(u,s))return i.toggleCollapse(u),u;var h=e.create(a),f={type:a,businessObject:h};f.di={},a==="bpmn:ExclusiveGateway"&&(f.di.isMarkerVisible=!0),V2(u.di,f.di,["fill","stroke","background-color","border-color","color"]);var d=fp(c.$descriptor),m=fp(h.$descriptor,!0),g=Y2(d,m);q(h,Vn(s,z2));var y=Re(g,function(S){return S==="eventDefinitions"?Xm(u,s.eventDefinitionType):S==="loopCharacteristics"?!Vt(h):en(h,S)||S==="processRef"&&s.isExpanded===!1||S==="triggeredByEvent"?!1:S==="isForCompensation"?!Vt(h):!0});if(h=n.copyElement(c,h,y),s.eventDefinitionType&&(Xm(h,s.eventDefinitionType)||(f.eventDefinitionType=s.eventDefinitionType,f.eventDefinitionAttrs=s.eventDefinitionAttrs)),N(c,"bpmn:Activity")){if(Ma(c))f.isExpanded=Ne(u);else if(s&&en(s,"isExpanded")){f.isExpanded=s.isExpanded;var w=t.getDefaultSize(h,{isExpanded:f.isExpanded});f.width=w.width,f.height=w.height,f.x=u.x-(f.width-u.width)/2,f.y=u.y-(f.height-u.height)/2}Ne(u)&&!N(c,"bpmn:Task")&&f.isExpanded&&(f.width=u.width,f.height=u.height)}return Ma(c)&&!Ma(h)&&(p.moveChildren=!1),N(c,"bpmn:Participant")&&(s.isExpanded===!0?h.processRef=e.create("bpmn:Process"):p.moveChildren=!1,f.width=u.width,f.height=t.getDefaultSize(f).height),o.allowed("shape.resize",{shape:h})||(f.height=t.getDefaultSize(f).height,f.width=t.getDefaultSize(f).width),h.name=c.name,Me(c,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&Me(h,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(h.default=c.default),s.host&&!N(c,"bpmn:BoundaryEvent")&&N(h,"bpmn:BoundaryEvent")&&(f.host=s.host),(f.type==="bpmn:DataStoreReference"||f.type==="bpmn:DataObjectReference")&&(f.x=u.x+(u.width-f.width)/2),r.replaceElement(u,f,{...p,targetElement:s})}this.replaceElement=l}Kw.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function Ma(e){return N(e,"bpmn:SubProcess")}function Xm(e,t){var n=re(e);return t&&n.get("eventDefinitions").some(function(i){return N(i,t)})}function Y2(e,t){return e.filter(function(n){return t.includes(n)})}const Jw={__depends__:[Xw,G2,ai],bpmnReplace:["type",Kw]};var X2=250;function Jr(e,t){this._eventBus=e,this._dragging=t,this._tools=[],this._active=null}Jr.$inject=["eventBus","dragging"];Jr.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)};Jr.prototype.isActive=function(e){return e&&this._active===e};Jr.prototype.length=function(e){return this._tools.length};Jr.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))};Jr.prototype.bindEvents=function(e,t){var n=this._eventBus,i=this._dragging,r=[];n.on(t.tool+".init",function(o){var l=o.context;if(!l.reactivate&&this.isActive(e)){this.setActive(null),i.cancel();return}this.setActive(e)},this),J(t,function(o){r.push(o+".ended"),r.push(o+".canceled")}),n.on(r,X2,function(o){this._active&&(Z2(o)||this.setActive(null))},this)};function Z2(e){var t=e.originalEvent&&e.originalEvent.target;return t&&ir(t,'.group[data-group="tools"]')}const kc={__depends__:[$i],__init__:["toolManager"],toolManager:["type",Jr]};function K2(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function J2(e,t){var n=[];return J(e.concat(t),function(i){var r=i.incoming,o=i.outgoing;J(r.concat(o),function(l){var u=l.source,s=l.target;(Qo(e,u)||Qo(e,s)||Qo(t,u)||Qo(t,s))&&(Qo(n,l)||n.push(l))})}),n}function Qo(e,t){return e.indexOf(t)!==-1}function Q2(e,t,n){var i=e.x,r=e.y,o=e.width,l=e.height,u=n.x,s=n.y;switch(t){case"n":return{x:i,y:r+s,width:o,height:l-s};case"s":return{x:i,y:r,width:o,height:l+s};case"w":return{x:i+u,y:r,width:o-u,height:l};case"e":return{x:i,y:r,width:o+u,height:l};default:throw new Error("unknown direction: "+t)}}var gu=Math.abs,q2=Math.round,pi={x:"width",y:"height"},Qw="crosshair",Fi={n:"top",w:"left",s:"bottom",e:"right"},ek=1500,ka={n:"s",w:"e",s:"n",e:"w"},Ia=20;function In(e,t,n,i,r,o,l){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=l;var u=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(s){n.once("spaceTool.selection.ended",function(){u.activateMakeSpace(s.originalEvent)})}),n.on("spaceTool.move",ek,function(s){var p=s.context,a=p.initialized;a||(a=p.initialized=u.init(s,p)),a&&Km(s)}),n.on("spaceTool.end",function(s){var p=s.context,a=p.axis,c=p.direction,h=p.movingShapes,f=p.resizingShapes,d=p.start;if(p.initialized){Km(s);var m={x:0,y:0};m[a]=q2(s["d"+a]),u.makeSpace(h,f,m,c,d),n.once("spaceTool.ended",function(g){u.activateSelection(g.originalEvent,!0,!0)})}})}In.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"];In.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:Qw,data:{context:{reactivate:n}},trapClick:!1})};In.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:Qw,data:{context:{}}})};In.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)};In.prototype.init=function(e,t){var n=gu(e.dx)>gu(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(gu(i)<5)return!1;i<0&&(i*=-1),go(e)&&(i*=-1);var o=K2(n,i),l=this._canvas.getRootElement();!El(e)&&e.hover&&(l=e.hover);var u=[...Is(l,!0),...l.attachers||[]],s=this.calculateAdjustments(u,n,i,r),p=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:s.resizingShapes,start:r}),a=tk(s,n,o,r,p);return q(t,s,{axis:n,direction:o,spaceToolConstraints:a,start:r}),fc("resize-"+(n==="x"?"ew":"ns")),!0};In.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],l=[],u=[],s=[];function p(h){o.includes(h)||o.push(h);var f=h.label;f&&!o.includes(f)&&o.push(f)}function a(h){l.includes(h)||l.push(h)}J(e,function(h){if(!(!h.parent||Ve(h))){if(Qe(h)){s.push(h);return}var f=h[t],d=f+h[pi[t]];if(nk(h)&&(n>0&&xe(h)[t]>i||n<0&&xe(h)[t]<i)){u.push(h);return}if(n>0&&f>i||n<0&&d<i){p(h);return}if(f<i&&d>i&&r.allowed("shape.resize",{shape:h})){a(h);return}}}),J(o,function(h){var f=h.attachers;f&&J(f,function(d){p(d)})});var c=o.concat(l);return J(u,function(h){var f=h.host;Tr(c,f)&&p(h)}),c=o.concat(l),J(s,function(h){var f=h.source,d=h.target,m=h.label;Tr(c,f)&&Tr(c,d)&&m&&p(m)}),{movingShapes:o,resizingShapes:l}};In.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};In.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function Zm(e){return{top:e.top-Ia,right:e.right+Ia,bottom:e.bottom+Ia,left:e.left-Ia}}function Km(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;Se(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),Se(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),Se(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),Se(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function tk(e,t,n,i,r){var o=e.movingShapes,l=e.resizingShapes;if(l.length){var u={},s,p;return J(l,function(a){var c=a.attachers,h=a.children,f=ye(a),d=Re(h,function(k){return!Qe(k)&&!Ve(k)&&!Tr(o,k)&&!Tr(l,k)}),m=Re(h,function(k){return!Qe(k)&&!Ve(k)&&Tr(o,k)}),g,y,w,S=[],b=[],_,v,E,x;d.length&&(y=Zm(ye(vt(d))),g=i-f[Fi[n]]+y[Fi[n]],n==="n"?u.bottom=p=Se(p)?Math.min(p,g):g:n==="w"?u.right=p=Se(p)?Math.min(p,g):g:n==="s"?u.top=s=Se(s)?Math.max(s,g):g:n==="e"&&(u.left=s=Se(s)?Math.max(s,g):g)),m.length&&(w=Zm(ye(vt(m))),g=i-w[Fi[ka[n]]]+f[Fi[ka[n]]],n==="n"?u.bottom=p=Se(p)?Math.min(p,g):g:n==="w"?u.right=p=Se(p)?Math.min(p,g):g:n==="s"?u.top=s=Se(s)?Math.max(s,g):g:n==="e"&&(u.left=s=Se(s)?Math.max(s,g):g)),c&&c.length&&(c.forEach(function(k){Tr(o,k)?S.push(k):b.push(k)}),S.length&&(_=ye(vt(S.map(xe))),v=f[Fi[ka[n]]]-(_[Fi[ka[n]]]-i)),b.length&&(E=ye(vt(b.map(xe))),x=E[Fi[n]]-(f[Fi[n]]-i)),n==="n"?(g=Math.min(v||1/0,x||1/0),u.bottom=p=Se(p)?Math.min(p,g):g):n==="w"?(g=Math.min(v||1/0,x||1/0),u.right=p=Se(p)?Math.min(p,g):g):n==="s"?(g=Math.max(v||-1/0,x||-1/0),u.top=s=Se(s)?Math.max(s,g):g):n==="e"&&(g=Math.max(v||-1/0,x||-1/0),u.left=s=Se(s)?Math.max(s,g):g));var T=r&&r[a.id];T&&(n==="n"?(g=i+a[pi[t]]-T[pi[t]],u.bottom=p=Se(p)?Math.min(p,g):g):n==="w"?(g=i+a[pi[t]]-T[pi[t]],u.right=p=Se(p)?Math.min(p,g):g):n==="s"?(g=i-a[pi[t]]+T[pi[t]],u.top=s=Se(s)?Math.max(s,g):g):n==="e"&&(g=i-a[pi[t]]+T[pi[t]],u.left=s=Se(s)?Math.max(s,g):g))}),u}}function Tr(e,t){return e.indexOf(t)!==-1}function nk(e){return!!e.host}var vu="djs-dragging",Jm="djs-resizing",ik=250,La=Math.max;function qw(e,t,n,i,r){function o(l,u){J(l,function(s){r.addDragger(s,u),n.addMarker(s,vu)})}e.on("spaceTool.selection.start",function(l){var u=n.getLayer("space"),s=l.context,p={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},a=he("g");ce(a,i.cls("djs-crosshair-group",["no-events"])),me(u,a);var c=he("path");ce(c,"d",p.x),Fe(c).add("djs-crosshair"),me(a,c);var h=he("path");ce(h,"d",p.y),Fe(h).add("djs-crosshair"),me(a,h),s.crosshairGroup=a}),e.on("spaceTool.selection.move",function(l){var u=l.context.crosshairGroup;Ft(u,l.x,l.y)}),e.on("spaceTool.selection.cleanup",function(l){var u=l.context,s=u.crosshairGroup;s&&ut(s)}),e.on("spaceTool.move",ik,function(l){var u=l.context,s=u.line,p=u.axis,a=u.movingShapes,c=u.resizingShapes;if(u.initialized){if(!u.dragGroup){var h=n.getLayer("space");s=he("path"),ce(s,"d","M0,0 L0,0"),Fe(s).add("djs-crosshair"),me(h,s),u.line=s;var f=he("g");ce(f,i.cls("djs-drag-group",["no-events"])),me(n.getActiveLayer(),f),o(a,f);var d=u.movingConnections=t.filter(function(b){var _=!1;J(a,function(T){J(T.outgoing,function(k){b===k&&(_=!0)})});var v=!1;J(a,function(T){J(T.incoming,function(k){b===k&&(v=!0)})});var E=!1;J(c,function(T){J(T.outgoing,function(k){b===k&&(E=!0)})});var x=!1;return J(c,function(T){J(T.incoming,function(k){b===k&&(x=!0)})}),Qe(b)&&(_||E)&&(v||x)});o(d,f),u.dragGroup=f}if(!u.frameGroup){var m=he("g");ce(m,i.cls("djs-frame-group",["no-events"])),me(n.getActiveLayer(),m);var g=[];J(c,function(b){var _=r.addFrame(b,m),v=_.getBBox();g.push({element:_,initialBounds:v}),n.addMarker(b,Jm)}),u.frameGroup=m,u.frames=g}var y={x:"M"+l.x+", -10000 L"+l.x+", 10000",y:"M -10000, "+l.y+" L 10000, "+l.y};ce(s,{d:y[p]});var w={x:"y",y:"x"},S={x:l.dx,y:l.dy};S[w[u.axis]]=0,Ft(u.dragGroup,S.x,S.y),J(u.frames,function(b){var _=b.element,v=b.initialBounds,E,x;u.direction==="e"?ce(_,{width:La(v.width+S.x,5)}):(E=La(v.width-S.x,5),ce(_,{width:E,x:v.x+v.width-E})),u.direction==="s"?ce(_,{height:La(v.height+S.y,5)}):(x=La(v.height-S.y,5),ce(_,{height:x,y:v.y+v.height-x}))})}}),e.on("spaceTool.cleanup",function(l){var u=l.context,s=u.movingShapes,p=u.movingConnections,a=u.resizingShapes,c=u.line,h=u.dragGroup,f=u.frameGroup;J(s,function(d){n.removeMarker(d,vu)}),J(p,function(d){n.removeMarker(d,vu)}),h&&(ut(c),ut(h)),J(a,function(d){n.removeMarker(d,Jm)}),f&&ut(f)})}qw.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];const e0={__init__:["spaceToolPreview"],__depends__:[$i,ci,kc,Bo,Us],spaceTool:["type",In],spaceToolPreview:["type",qw]};function Ic(e){e.invoke(In,this)}Ic.$inject=["injector"];de(Ic,In);Ic.prototype.calculateAdjustments=function(e,t,n,i){var r=In.prototype.calculateAdjustments.call(this,e,t,n,i);return r.resizingShapes=r.resizingShapes.filter(function(o){return!(N(o,"bpmn:TextAnnotation")||rk(o)&&(t==="y"&&An(o)||t==="x"&&!An(o)))}),r};function rk(e){return N(e,"bpmn:Participant")&&!re(e).processRef}const t0={__depends__:[e0],spaceTool:["type",Ic]};function st(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}st.$inject=["eventBus","injector"];st.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()};st.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};st.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})};st.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};st.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}};st.prototype.register=function(e,t){this._setHandler(e,t)};st.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)};st.prototype.canUndo=function(){return!!this._getUndoAction()};st.prototype.canRedo=function(){return!!this._getRedoAction()};st.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};st.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};st.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})};st.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const o of i)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r};st.prototype._createId=function(){return this._uid++};st.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}};st.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()};st.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)};st.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:gv("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)};st.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=Ie(e)?e:[e],t.dirty=t.dirty.concat(e))};st.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)};st.prototype._revertedAction=function(e){this._stackIdx--};st.prototype._getHandler=function(e){return this._handlerMap[e]};st.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};const ok={commandStack:["type",st]};function Ui(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var sk=250,Qm=1400;function gd(e,t,n){se.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",Qm,function(r){var o=r.context,l=o.shapes,u=o.validatedShapes;o.shapes=qm(l),o.validatedShapes=qm(u)}),i&&t.on("shape.move.start",sk,function(r){var o=r.context,l=o.shapes,u=[];J(l,function(s){J(s.labels,function(p){!p.hidden&&o.shapes.indexOf(p)===-1&&u.push(p),s.labelTarget&&u.push(s)})}),J(u,function(s){i.makeDraggable(o,s,!0)})}),this.preExecuted("elements.move",Qm,function(r){var o=r.context,l=o.closure,u=l.enclosedElements,s=[];J(u,function(p){J(p.labels,function(a){u[a.id]||s.push(a)})}),l.addAll(s)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,l=o.connection||o.shape;Ui(l.labels,function(u){n.removeShape(u,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,l=o.shape,u=l.labelTarget;u&&(o.labelTargetIndex=Yp(u.labels,l),o.labelTarget=u,l.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,l=o.shape,u=o.labelTarget,s=o.labelTargetIndex;u&&(At(u.labels,l,s),l.labelTarget=u)})}de(gd,se);gd.$inject=["injector","eventBus","modeling"];function qm(e){return Re(e,function(t){return e.indexOf(t.labelTarget)===-1})}const ak={__init__:["labelSupport"],labelSupport:["type",gd]};var lk=251,eg=1401,tg="attach-ok";function vd(e,t,n,i,r){se.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",eg,function(l){var u=l.context,s=u.shapes,p=u.validatedShapes;u.shapes=ck(s),u.validatedShapes=uk(p)}),o&&t.on("shape.move.start",lk,function(l){var u=l.context,s=u.shapes,p=mp(s);J(p,function(a){o.makeDraggable(u,a,!0),J(a.labels,function(c){o.makeDraggable(u,c,!0)})})}),o&&t.on("shape.move.start",function(l){var u=l.context,s=u.shapes;if(s.length===1){var p=s[0],a=p.host;a&&(n.addMarker(a,tg),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(a,tg)}))}}),this.preExecuted("elements.move",eg,function(l){var u=l.context,s=u.closure,p=u.shapes,a=mp(p);J(a,function(c){s.add(c,s.topLevel[c.host.id])})}),this.postExecuted("elements.move",function(l){var u=l.context,s=u.shapes,p=u.newHost,a;p&&s.length!==1||(p?a=s:a=Re(s,function(c){var h=c.host;return pk(c)&&!hk(s,h)}),J(a,function(c){r.updateAttachment(c,p)}))}),this.postExecuted("elements.move",function(l){var u=l.context.shapes;J(u,function(s){J(s.attachers,function(p){J(p.outgoing.slice(),function(a){var c=i.allowed("connection.reconnect",{connection:a,source:a.source,target:a.target});c||r.removeConnection(a)}),J(p.incoming.slice(),function(a){var c=i.allowed("connection.reconnect",{connection:a,source:a.source,target:a.target});c||r.removeConnection(a)})})})}),this.postExecute("shape.create",function(l){var u=l.context,s=u.shape,p=u.host;p&&r.updateAttachment(s,p)}),this.postExecute("shape.replace",function(l){var u=l.context,s=u.oldShape,p=u.newShape;Ui(s.attachers,function(a){var c=i.allowed("elements.move",{target:p,shapes:[a]});c==="attach"?r.updateAttachment(a,p):r.removeShape(a)}),p.attachers.length&&J(p.attachers,function(a){var c=Mm(a,s,p);r.moveShape(a,c,a.parent)})}),this.postExecute("shape.resize",function(l){var u=l.context,s=u.shape,p=u.oldBounds,a=u.newBounds,c=s.attachers,h=u.hints||{};h.attachSupport!==!1&&J(c,function(f){var d=Mm(f,p,a);r.moveShape(f,d,f.parent),J(f.labels,function(m){r.moveShape(m,d,m.parent)})})}),this.preExecute("shape.delete",function(l){var u=l.context.shape;Ui(u.attachers,function(s){r.removeShape(s)}),u.host&&r.updateAttachment(u,null)})}de(vd,se);vd.$inject=["injector","eventBus","canvas","rules","modeling"];function mp(e){return ll(Pt(e,function(t){return t.attachers||[]}))}function ck(e){var t=mp(e);return O_("id",e,t)}function uk(e){var t=So(e,"id");return Re(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function pk(e){return!!e.host}function hk(e,t){return e.indexOf(t)!==-1}const dk={__depends__:[ci],__init__:["attachSupport"],attachSupport:["type",vd]};function Ln(e){this._model=e}Ln.$inject=["moddle"];Ln.prototype._needsId=function(e){return Me(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])};Ln.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;N(e,"bpmn:Activity")?t="Activity":N(e,"bpmn:Event")?t="Event":N(e,"bpmn:Gateway")?t="Gateway":Me(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))};Ln.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n};Ln.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};Ln.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",q({bpmnElement:e,bounds:this.createDiBounds()},t))};Ln.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)};Ln.prototype.createDiWaypoints=function(e){var t=this;return Pt(e,function(n){return t.createDiWaypoint(n)})};Ln.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Vn(e,["x","y"]))};Ln.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",q({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))};Ln.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",q({bpmnElement:e},t))};function dn(e,t,n,i){se.call(this,e),this._bpmnFactory=t,this._translate=i;var r=this;function o(d){var m=d.context,g=m.hints||{},y;!m.cropped&&g.createElementsBehavior!==!1&&(y=m.connection,y.waypoints=n.getCroppedWaypoints(y),m.cropped=!0)}this.executed(["connection.layout","connection.create"],o),this.reverted(["connection.layout"],function(d){delete d.context.cropped});function l(d){var m=d.context;r.updateParent(m.shape||m.connection,m.oldParent)}function u(d){var m=d.context,g=m.shape||m.connection,y=m.parent||m.newParent;r.updateParent(g,y)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],an(l)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],an(u));function s(d){var m=d.context,g=m.oldRoot,y=g.children;J(y,function(w){N(w,"bpmn:BaseElement")&&r.updateParent(w)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function p(d){var m=d.context.shape;N(m,"bpmn:BaseElement")&&r.updateBounds(m)}this.executed(["shape.move","shape.create","shape.resize"],an(function(d){d.context.shape.type!=="label"&&p(d)})),this.reverted(["shape.move","shape.create","shape.resize"],an(function(d){d.context.shape.type!=="label"&&p(d)})),e.on("shape.changed",function(d){d.element.type==="label"&&p({context:{shape:d.element}})});function a(d){r.updateConnection(d.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],an(a)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],an(a));function c(d){r.updateConnectionWaypoints(d.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],an(c)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],an(c)),this.executed("connection.reconnect",an(function(d){var m=d.context,g=m.connection,y=m.oldSource,w=m.newSource,S=re(g),b=re(y),_=re(w);S.conditionExpression&&!Me(_,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(m.oldConditionExpression=S.conditionExpression,delete S.conditionExpression),y!==w&&b.default===S&&(m.oldDefault=b.default,delete b.default)})),this.reverted("connection.reconnect",an(function(d){var m=d.context,g=m.connection,y=m.oldSource,w=m.newSource,S=re(g),b=re(y),_=re(w);m.oldConditionExpression&&(S.conditionExpression=m.oldConditionExpression),m.oldDefault&&(b.default=m.oldDefault,delete _.default)}));function h(d){r.updateAttachment(d.context)}this.executed(["element.updateAttachment"],an(h)),this.reverted(["element.updateAttachment"],an(h)),this.executed("element.updateLabel",an(f)),this.reverted("element.updateLabel",an(f));function f(d){const{element:m}=d.context,g=Tn(m),y=He(m),w=y&&y.get("label");Dr(m)||Ja(m)||(g&&!w?y.set("label",t.create("bpmndi:BPMNLabel")):!g&&w&&y.set("label",void 0))}}de(dn,se);dn.$inject=["eventBus","bpmnFactory","connectionDocking","translate"];dn.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject};dn.prototype.updateParent=function(e,t){if(!Ve(e)&&!(N(e,"bpmn:DataStoreReference")&&e.parent&&N(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=He(e),o=n&&n.businessObject,l=He(n);N(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),N(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),N(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(i,o),N(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(r,l)}};dn.prototype.updateBounds=function(e){var t=He(e),n=mk(e);if(n){var i=Wn(n,t.get("bounds"));q(n,{x:e.x+i.x,y:e.y+i.y})}var r=Ve(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),q(o,{x:e.x,y:e.y,width:e.width,height:e.height})};dn.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;N(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),bt(i,e)),N(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),At(r,e))}};dn.prototype.updateDiConnection=function(e,t,n){var i=He(e),r=He(t),o=He(n);i.sourceElement&&i.sourceElement.bpmnElement!==re(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==re(n)&&(i.targetElement=n&&o)};dn.prototype.updateDiParent=function(e,t){if(t&&!N(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(bt(n,e),e.$parent=null)}};function fk(e){for(;e&&!N(e,"bpmn:Definitions");)e=e.$parent;return e}dn.prototype.getLaneSet=function(e){var t,n;return N(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(N(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)};dn.prototype.updateSemanticParent=function(e,t,n){var i,r=this._translate;if(e.$parent!==t&&!((N(e,"bpmn:DataInput")||N(e,"bpmn:DataOutput"))&&(N(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(N(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(N(e,"bpmn:FlowElement")){if(t){if(N(t,"bpmn:Participant"))t=t.processRef;else if(N(t,"bpmn:Lane"))do t=t.$parent.$parent;while(N(t,"bpmn:Lane"))}i="flowElements"}else if(N(e,"bpmn:Artifact")){for(;t&&!N(t,"bpmn:Process")&&!N(t,"bpmn:SubProcess")&&!N(t,"bpmn:Collaboration");)if(N(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(N(e,"bpmn:MessageFlow"))i="messageFlows";else if(N(e,"bpmn:Participant")){i="participants";var o=e.processRef,l;o&&(l=fk(e.$parent||t),e.$parent&&(bt(l.get("rootElements"),o),o.$parent=null),t&&(At(l.get("rootElements"),o),o.$parent=l))}else N(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":N(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(r("no parent for {element} in {parent}",{element:e.id,parent:t.id}));var u;if(e.$parent&&(u=e.$parent.get(i),bt(u,e)),t?(u=t.get(i),u.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(i);bt(u,e),t&&(s||(s=[],t.set(i,s)),s.push(e))}}};dn.prototype.updateConnectionWaypoints=function(e){var t=He(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))};dn.prototype.updateConnection=function(e){var t=e.connection,n=re(t),i=t.source,r=re(i),o=t.target,l=re(t.target),u;if(N(n,"bpmn:DataAssociation"))N(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,u=e.parent||e.newParent||l,this.updateSemanticParent(n,l,u)):N(n,"bpmn:DataOutputAssociation")&&(u=e.parent||e.newParent||r,this.updateSemanticParent(n,r,u),n.targetRef=l);else{var s=N(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(s&&(bt(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==l&&(s&&(bt(n.targetRef&&n.targetRef.get("incoming"),n),l&&l.get("incoming")&&l.get("incoming").push(n)),n.targetRef=l)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,o)};dn.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function an(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;N(i,"bpmn:BaseElement")&&e(t)}}function mk(e){if(N(e,"bpmn:Activity")){var t=He(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function pr(e,t,n){Si.call(this),this._bpmnFactory=e,this._moddle=t,this._translate=n}de(pr,Si);pr.$inject=["bpmnFactory","moddle","translate"];pr.prototype._baseCreate=Si.prototype.create;pr.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,q({type:"label",di:n},ds,t))}return this.createElement(e,t)};pr.prototype.createElement=function(e,t){var n,i=this._translate;t=q({},t||{});var r=t.businessObject,o=t.di;if(!r){if(!t.type)throw new Error(i("no shape type specified"));r=this._bpmnFactory.create(t.type),Vy(r)}if(!vk(o)){var l=q({},o||{},{id:r.id+"_di"});e==="root"?o=this._bpmnFactory.createDiPlane(r,l):e==="connection"?o=this._bpmnFactory.createDiEdge(r,l):o=this._bpmnFactory.createDiShape(r,l)}N(r,"bpmn:Group")&&(t=q({isFrame:!0},t)),t=gk(r,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=rl(o,t,"isExpanded")),Me(r,["bpmn:Lane","bpmn:Participant"])&&(t=rl(o,t,"isHorizontal")),N(r,"bpmn:SubProcess")&&(t.collapsed=!Ne(r,o)),N(r,"bpmn:ExclusiveGateway")&&(en(t,"isMarkerVisible")?t.isMarkerVisible===void 0?o.isMarkerVisible=!1:t=rl(o,t,"isMarkerVisible"):o.isMarkerVisible=!0),Rt(t.triggeredByEvent)&&(r.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Rt(t.cancelActivity)&&(r.cancelActivity=t.cancelActivity,delete t.cancelActivity);var u,s;return t.eventDefinitionType&&(u=r.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),u.push(s),s.$parent=r,r.eventDefinitions=u,delete t.eventDefinitionType),n=this.getDefaultSize(r,o),t=q({id:r.id},n,t,{businessObject:r,di:o}),this._baseCreate(e,t)};pr.prototype.getDefaultSize=function(e,t){var n=re(e);return t=t||He(e),N(n,"bpmn:SubProcess")?Ne(n,t)?{width:350,height:200}:{width:100,height:80}:N(n,"bpmn:Task")?{width:100,height:80}:N(n,"bpmn:Gateway")?{width:50,height:50}:N(n,"bpmn:Event")?{width:36,height:36}:N(n,"bpmn:Participant")?Ne(n,t)?{width:600,height:250}:{width:400,height:60}:N(n,"bpmn:Lane")?{width:400,height:100}:N(n,"bpmn:DataObjectReference")?{width:36,height:50}:N(n,"bpmn:DataStoreReference")?{width:50,height:50}:N(n,"bpmn:TextAnnotation")?{width:100,height:30}:N(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}};pr.prototype.createParticipantShape=function(e){return Mt(e)||(e={isExpanded:e}),e=q({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function gk(e,t,n){return J(n,function(i){t=rl(e,t,i)}),t}function rl(e,t,n){return t[n]===void 0?t:(e[n]=t[n],si(t,[n]))}function vk(e){return Me(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function Lc(e,t){this._modeling=e,this._canvas=t}Lc.$inject=["modeling","canvas"];Lc.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;J(n,function(r){var o={x:0,y:0};Rt(i.left)?o.x=i.left-r.x:Rt(i.right)?o.x=i.right-r.width-r.x:Rt(i.center)?o.x=i.center-Math.round(r.width/2)-r.x:Rt(i.top)?o.y=i.top-r.y:Rt(i.bottom)?o.y=i.bottom-r.height-r.y:Rt(i.middle)&&(o.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})};Lc.prototype.postExecute=function(e){};function Pc(e){this._modeling=e}Pc.$inject=["modeling"];Pc.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i};Pc.prototype.postExecute=function(e){var t=e.hints||{};yk(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function yk(e,t){return Ut(e.outgoing,function(n){return n.target===t})}function Dc(e,t){this._canvas=e,this._layouter=t}Dc.$inject=["canvas","layouter"];Dc.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,l=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,l)),this._canvas.addConnection(t,r,o),t};Dc.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var Pa=Math.round;function yd(e){this._modeling=e}yd.$inject=["modeling"];yd.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,l=this._modeling;J(t,function(c){Se(c.x)||(c.x=0),Se(c.y)||(c.y=0)});var u=Re(t,function(c){return!c.hidden}),s=vt(u);J(t,function(c){Qe(c)&&(c.waypoints=Pt(c.waypoints,function(h){return{x:Pa(h.x-s.x-s.width/2+r.x),y:Pa(h.y-s.y-s.height/2+r.y)}})),q(c,{x:Pa(c.x-s.x-s.width/2+r.x),y:Pa(c.y-s.y-s.height/2+r.y)})});var p=tc(t),a={};J(t,function(c){if(Qe(c)){a[c.id]=Se(i)?l.createConnection(a[c.source.id],a[c.target.id],i,c,c.parent||n,o):l.createConnection(a[c.source.id],a[c.target.id],c,c.parent||n,o);return}var h=q({},o);p.indexOf(c)===-1&&(h.autoResize=!1),Ve(c)&&(h=si(h,["attach"])),a[c.id]=Se(i)?l.createShape(c,Vn(c,["x","y","width","height"]),c.parent||n,i,h):l.createShape(c,Vn(c,["x","y","width","height"]),c.parent||n,h)}),e.elements=Cp(a)};var ng=Math.round;function hr(e){this._canvas=e}hr.$inject=["canvas"];hr.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?q(t,n):q(t,{x:n.x-ng(t.width/2),y:n.y-ng(t.height/2)}),this._canvas.addShape(t,i,r),t};hr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Xs(e){hr.call(this,e)}de(Xs,hr);Xs.$inject=["canvas"];var bk=hr.prototype.execute;Xs.prototype.execute=function(e){var t=e.shape;return _k(t),t.labelTarget=e.labelTarget,bk.call(this,e)};var wk=hr.prototype.revert;Xs.prototype.revert=function(e){return e.shape.labelTarget=null,wk.call(this,e)};function _k(e){["width","height"].forEach(function(t){typeof e[t]>"u"&&(e[t]=0)})}function Zs(e,t){this._canvas=e,this._modeling=t}Zs.$inject=["canvas","modeling"];Zs.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;Ui(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Ui(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})};Zs.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=Yp(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t};Zs.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,At(n.children,t,i),this._canvas.addConnection(t,n),t};function bd(e,t){this._modeling=e,this._elementRegistry=t}bd.$inject=["modeling","elementRegistry"];bd.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;J(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function Ks(e,t){this._canvas=e,this._modeling=t}Ks.$inject=["canvas","modeling"];Ks.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;Ui(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),Ui(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),Ui(n.children,function(i){Qe(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})};Ks.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=Yp(i.children,n),t.removeShape(n),n};Ks.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return At(i.children,n,r),t.addShape(n,i),n};function Oc(e){this._modeling=e}Oc.$inject=["modeling"];var ig={x:"y",y:"x"};Oc.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(g,y){g.range.min=Math.min(y[i],g.range.min),g.range.max=Math.max(y[i]+y[r],g.range.max)}function l(g){return g[i]+g[r]/2}function u(g){return g.length-1}function s(g){return g.max-g.min}function p(g,y){var w={y:0};w[i]=g-l(y),w[i]&&(w[ig[i]]=0,t.moveElements([y],w,y.parent))}var a=n[0],c=u(n),h=n[c],f,d,m=0;J(n,function(g,y){var w,S,b;if(g.elements.length<2){y&&y!==n.length-1&&(o(g,g.elements[0]),m+=s(g.range));return}w=Gn(g.elements,i),S=w[0],y===c&&(S=w[u(w)]),b=l(S),g.range=null,J(w,function(_){if(p(b,_),g.range===null){g.range={min:_[i],max:_[i]+_[r]};return}o(g,_)}),y&&y!==n.length-1&&(m+=s(g.range))}),d=Math.abs(h.range.min-a.range.max),f=Math.round((d-m)/(n.length-1)),!(f<n.length-1)&&J(n,function(g,y){var w={},S;g===a||g===h||(S=n[y-1],g.range.max=0,J(g.elements,function(b,_){w[ig[i]]=0,w[i]=S.range.max-b[i]+f,g.range.min!==b[i]&&(w[i]+=b[i]-g.range.min),w[i]&&t.moveElements([b],w,b.parent),g.range.max=Math.max(b[i]+b[r],_?g.range.max:0)}))})};Oc.prototype.postExecute=function(e){};function Nc(e,t){this._layouter=e,this._canvas=t}Nc.$inject=["layouter","canvas"];Nc.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return q(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t};Nc.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function wd(){}wd.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=bt(o.children,t),At(i.children,t,r),t.parent=i,J(t.waypoints,function(l){l.x+=n.x,l.y+=n.y,l.original&&(l.original.x+=n.x,l.original.y+=n.y)}),t};wd.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return bt(n.children,t),At(i.children,t,r),t.parent=i,J(t.waypoints,function(l){l.x-=o.x,l.y-=o.y,l.original&&(l.original.x-=o.x,l.original.y-=o.y)}),t};function _d(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}_d.prototype.add=function(e,t){return this.addAll([e],t)};_d.prototype.addAll=function(e,t){var n=nS(e,!!t,this);return q(this,n),this};function Js(e){this._modeling=e}Js.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]};Js.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,l=e.allShapes,u=e.allConnections,s=e.enclosedConnections,p=e.topLevel,a=!1;r&&r.parent===n&&(a=!0),J(l,function(c){o.moveShape(c,t,p[c.id]&&!a&&n,{recurse:!1,layout:!1})}),J(u,function(c){var h=!!l[c.source.id],f=!!l[c.target.id];s[c.id]&&h&&f?o.moveConnection(c,t,p[c.id]&&!a&&n):o.layoutConnection(c,{connectionStart:h&&Uh(c,c.source,t),connectionEnd:f&&Yh(c,c.target,t)})})};Js.prototype.getClosure=function(e){return new _d().addAll(e,!0)};function Bc(e){this._helper=new Js(e)}Bc.$inject=["modeling"];Bc.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)};Bc.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Qr(e){this._modeling=e,this._helper=new Js(e)}Qr.$inject=["modeling"];Qr.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=Vn(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=bt(o.children,t),At(i.children,t,r),q(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t};Qr.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(J(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:Yh(o,t,n)})}),J(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:Uh(o,t,n)})})),i.recurse!==!1&&this.moveChildren(e)};Qr.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return At(n.children,t,i),q(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t};Qr.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)};Qr.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Qs(e){this._modeling=e}Qs.$inject=["modeling"];Qs.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return Ie(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i};Qs.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},l={};o.connectionStart&&(l.connectionStart=o.connectionStart),o.connectionEnd&&(l.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!i||o.docking==="source")&&(l.connectionStart=l.connectionStart||rg(Ie(r)?r[0]:r)),i&&(!n||o.docking==="target")&&(l.connectionEnd=l.connectionEnd||rg(Ie(r)?r[r.length-1]:r)),o.newWaypoints&&(l.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,l))};Qs.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function rg(e){return e.original||e}function ki(e,t){this._modeling=e,this._rules=t}ki.$inject=["modeling","rules"];ki.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,o=e.newData,l=e.hints||{},u;function s(d,m,g){return i.allowed("connection.reconnect",{connection:g,source:d,target:m})}var p={x:o.x,y:o.y},a={x:r.x,y:r.y,width:r.width,height:r.height};u=e.newShape=e.newShape||t.createShape(o,p,r.parent,l),r.host&&n.updateAttachment(u,r.host);var c;l.moveChildren!==!1&&(c=r.children.slice(),n.moveElements(c,{x:0,y:0},u,l));var h=r.incoming.slice(),f=r.outgoing.slice();J(h,function(d){var m=d.source,g=s(m,u,d);g&&t.reconnectEnd(d,u,Ac(d,u,a),l)}),J(f,function(d){var m=d.target,g=s(u,m,d);g&&t.reconnectStart(d,u,Cc(d,u,a),l)})};ki.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)};ki.prototype.execute=function(e){};ki.prototype.revert=function(e){};ki.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)};ki.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)};ki.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function qs(e){this._modeling=e}qs.$inject=["modeling"];qs.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};qs.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(J(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:Ac(o,n,i)})}),J(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:Cc(o,n,i)})}))};qs.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return q(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function dr(e){this._modeling=e}dr.$inject=["modeling"];dr.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,l={};this.moveShapes(i,t),J(r,function(u){l[u.id]=xk(u)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(J2(i,r),t,n,o,i,r,l)};dr.prototype.execute=function(){};dr.prototype.revert=function(){};dr.prototype.moveShapes=function(e,t){var n=this;J(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})};dr.prototype.resizeShapes=function(e,t,n){var i=this;J(e,function(r){var o=Q2(r,n,t);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})};dr.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,l){var u=this,s=r.concat(o);J(e,function(p){var a=p.source,c=p.target,h=Ek(p),f=n0(n),d={};Wi(s,a)&&Wi(s,c)?(h=Pt(h,function(m){return sg(m,i,n)&&(m[f]=m[f]+t[f]),m.original&&sg(m.original,i,n)&&(m.original[f]=m.original[f]+t[f]),m}),u._modeling.updateWaypoints(p,h,{labelBehavior:!1})):(Wi(s,a)||Wi(s,c))&&(Wi(r,a)?d.connectionStart=Uh(p,a,t):Wi(r,c)?d.connectionEnd=Yh(p,c,t):Wi(o,a)?d.connectionStart=Cc(p,a,l[a.id]):Wi(o,c)&&(d.connectionEnd=Ac(p,c,l[c.id])),u._modeling.layoutConnection(p,d))})};function og(e){return q({},e)}function Ek(e){return Pt(e.waypoints,function(t){return t=og(t),t.original&&(t.original=og(t.original)),t})}function n0(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function sg(e,t,n){var i=n0(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function Wi(e,t){return e.indexOf(t)!==-1}function xk(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Fc(e){this._modeling=e}Fc.$inject=["modeling"];Fc.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=i0(n),t.collapsed=!t.collapsed;var i=r0(n,t.collapsed);return[t].concat(i)};Fc.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=o0(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function i0(e){var t={};return J(e,function(n){t[n.id]=n.hidden,n.children&&(t=q({},t,i0(n.children)))}),t}function r0(e,t){var n=[];return J(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(r0(i.children,i.collapsed||t)))}),n}function o0(e,t){var n=[];return J(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(o0(i.children,t)))}),n}function Wc(e){this._modeling=e}Wc.$inject=["modeling"];Wc.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=s0(i,t),a0(n,t),t.host=n,t};Wc.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,s0(n,t),a0(i,t,r),t};function s0(e,t){return bt(e&&e.attachers,t)}function a0(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),At(i,t,n)}}function Ed(){}Ed.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t};Ed.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function Je(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}Je.$inject=["eventBus","elementFactory","commandStack"];Je.prototype.getHandlers=function(){return{"shape.append":Pc,"shape.create":hr,"shape.delete":Ks,"shape.move":Qr,"shape.resize":qs,"shape.replace":ki,"shape.toggleCollapse":Fc,spaceTool:dr,"label.create":Xs,"connection.create":Dc,"connection.delete":Zs,"connection.move":wd,"connection.layout":Nc,"connection.updateWaypoints":Ed,"connection.reconnect":Qs,"elements.create":yd,"elements.move":Bc,"elements.delete":bd,"elements.distribute":Oc,"elements.align":Lc,"element.updateAttachment":Wc}};Je.prototype.registerHandlers=function(e){J(this.getHandlers(),function(t,n){e.registerHandler(n,t)})};Je.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)};Je.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)};Je.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,o=n,l;r===!0?(l=n,o=n.parent):r===!1&&(l=null);var u={shapes:e,delta:t,newParent:o,newHost:l,hints:i};this._commandStack.execute("elements.move",u)};Je.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)};Je.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)};Je.prototype.createConnection=function(e,t,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var l={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",l),l.connection};Je.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var o=r.attach,l,u;e=this._create("shape",e),o?(l=n.parent,u=n):l=n;var s={position:t,shape:e,parent:l,parentIndex:i,host:u,hints:r};return this._commandStack.execute("shape.create",s),s.shape};Je.prototype.createElements=function(e,t,n,i,r){Ie(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var o={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",o),o.elements};Je.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape};Je.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape};Je.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)};Je.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)};Je.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)};Je.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)};Je.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape};Je.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)};Je.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)};Je.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)};Je.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)};Je.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)};Je.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,q(i,{docking:"source"}))};Je.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,q(i,{docking:"target"}))};Je.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)};Je.prototype._create=function(e,t){return OS(t)?t:this._elementFactory.create(e,t)};Je.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function ea(e){this._elementRegistry=e}ea.$inject=["elementRegistry"];ea.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||Sk(n,ul(i));return l0(n,i),e.oldProperties=o,e.changed=r,r};ea.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return l0(n,t),i};ea.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return N(e,"bpmn:DataObject")?Ck(e,t):[]};function Sk(e,t){return pn(t,function(n,i){return n[i]=e.get(i),n},{})}function l0(e,t){J(t,function(n,i){e.set(i,n)})}function Ck(e,t){return t.filter(function(n){return N(n,"bpmn:DataObjectReference")&&re(n).dataObjectRef===e})}var qo="default",vi="id",c0="di",Ak={width:0,height:0};function ta(e,t,n,i,r){this._elementRegistry=e,this._moddle=t,this._translate=n,this._modeling=i,this._textRenderer=r}ta.$inject=["elementRegistry","moddle","translate","modeling","textRenderer"];ta.prototype.execute=function(e){var t=e.element,n=[t],i=this._translate;if(!t)throw new Error(i("element required"));var r=this._elementRegistry,o=this._moddle.ids,l=t.businessObject,u=kk(e.properties),s=e.oldProperties||Tk(t,u);return u0(u,l)&&(o.unclaim(l[vi]),r.updateId(t,u[vi]),o.claim(u[vi],l)),qo in u&&(u[qo]&&n.push(r.get(u[qo].id)),l[qo]&&n.push(r.get(l[qo].id))),p0(t,u),e.oldProperties=s,e.changed=n,n};ta.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&re(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,Ak)}};ta.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,l=this._moddle.ids;return p0(t,i),u0(n,r)&&(l.unclaim(n[vi]),o.updateId(t,i[vi]),l.claim(i[vi],r)),e.changed};function u0(e,t){return vi in e&&e[vi]!==t[vi]}function Tk(e,t){var n=ul(t),i=e.businessObject,r=He(e);return pn(n,function(o,l){return l!==c0?o[l]=i.get(l):o[l]=$k(r,ul(t.di)),o},{})}function $k(e,t){return pn(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function p0(e,t){var n=e.businessObject,i=He(e);J(t,function(r,o){o!==c0?n.set(o,r):i&&Rk(i,r)})}function Rk(e,t){J(t,function(n,i){e.set(i,n)})}var Mk=["default"];function kk(e){var t=q({},e);return Mk.forEach(function(n){n in e&&(t[n]=re(t[n]))}),t}function Hc(e,t){this._canvas=e,this._modeling=t}Hc.$inject=["canvas","modeling"];Hc.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,l=o.$parent,u=He(r);return t.setRootElement(n),t.removeRootElement(r),At(l.rootElements,i),i.$parent=l,bt(l.rootElements,o),o.$parent=null,r.di=null,u.bpmnElement=i,n.di=u,e.oldRoot=r,[]};Hc.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,o=r.businessObject,l=i.$parent,u=He(n);return t.setRootElement(r),t.removeRootElement(n),bt(l.rootElements,i),i.$parent=null,At(l.rootElements,o),o.$parent=l,n.di=null,u.bpmnElement=o,r.di=u,[]};function xd(e,t){this._modeling=e,this._spaceTool=t}xd.$inject=["modeling","spaceTool"];xd.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=xn(i),l=o===i,u=l?i:i.parent,s=Mi(u),p=An(i);if(p?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!s.length){var a=p?{x:i.x+ei,y:i.y,width:i.width-ei,height:i.height}:{x:i.x,y:i.y+ei,width:i.width,height:i.height-ei};n.createShape({type:"bpmn:Lane",isHorizontal:p},a,u)}var c=[];Ur(o,function(b){return c.push(b),b.label&&c.push(b.label),b===i?[]:Re(b.children,function(_){return _!==i})});var h,f,d,m,g;r==="top"?(h=-120,f=i.y,d=f+10,m="n",g="y"):r==="left"?(h=-120,f=i.x,d=f+10,m="w",g="x"):r==="bottom"?(h=120,f=i.y+i.height,d=f-10,m="s",g="y"):r==="right"&&(h=120,f=i.x+i.width,d=f-10,m="e",g="x");var y=t.calculateAdjustments(c,g,h,d),w=p?{x:0,y:h}:{x:h,y:0};t.makeSpace(y.movingShapes,y.resizingShapes,w,m,d);var S=p?{x:i.x+(l?ei:0),y:f-(r==="top"?120:0),width:i.width-(l?ei:0),height:120}:{x:f-(r==="left"?120:0),y:i.y+(l?ei:0),width:120,height:i.height-(l?ei:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:p},S,u)};function Sd(e,t){this._modeling=e,this._translate=t}Sd.$inject=["modeling","translate"];Sd.prototype.preExecute=function(e){var t=this._modeling,n=this._translate,i=e.shape,r=e.count,o=Mi(i),l=o.length;if(l>r)throw new Error(n("more than {count} child lanes",{count:r}));var u=Math.round(i.height/r),s,p,a,c,h;for(h=0;h<r;h++)s=i.y+h*u,h===r-1?p=i.height-u*h:p=u,a={x:i.x+ei,y:s,width:i.width-ei,height:p},h<l?t.resizeShape(o[h],a):(c={type:"bpmn:Lane"},t.createShape(c,a,i))};function na(e,t){this._modeling=e,this._spaceTool=t}na.$inject=["modeling","spaceTool"];na.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)};na.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=cM(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})};na.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=ye(e),r=ye(t),o=uw(r,i),l=xn(e),u=[],s=[];Ur(l,function(d){return u.push(d),(N(d,"bpmn:Lane")||N(d,"bpmn:Participant"))&&s.push(d),d.children});var p,a,c,h,f;(o.bottom||o.top)&&(p=o.bottom||o.top,a=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),c=o.bottom?"s":"n",h=o.top>0||o.bottom<0?-p:p,f=n.calculateAdjustments(u,"y",h,a),n.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:p},c)),(o.left||o.right)&&(p=o.right||o.left,a=e.x+(o.right?e.width:0)+(o.right?-10:100),c=o.right?"e":"w",h=o.left>0||o.right<0?-p:p,f=n.calculateAdjustments(s,"x",h,a),n.makeSpace(f.movingShapes,f.resizingShapes,{x:p,y:0},c))};var ys="flowNodeRef",Cd="lanes";function ia(e){this._elementRegistry=e}ia.$inject=["elementRegistry"];ia.prototype._computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function l(a,c){var h=ye(c),f={x:a.x+a.width/2,y:a.y+a.height/2};return f.x>h.left&&f.x<h.right&&f.y>h.top&&f.y<h.bottom}function u(a){n.indexOf(a)===-1&&(o.push(a),n.push(a))}function s(a){var c=xn(a);return r[c.id]||(r[c.id]=xc(c)),r[c.id]}function p(a){if(!a.parent)return[];var c=s(a);return c.filter(function(h){return l(a,h)}).map(function(h){return h.businessObject})}return t.forEach(function(a){var c=xn(a);if(!(!c||n.indexOf(c)!==-1)){var h=c.children.filter(function(f){return N(f,"bpmn:FlowNode")});h.forEach(u),n.push(c)}}),e.forEach(u),o.forEach(function(a){var c=a.businessObject,h=c.get(Cd),f=h.slice(),d=p(a);i.push({flowNode:c,remove:f,add:d})}),t.forEach(function(a){var c=a.businessObject;a.parent||c.get(ys).forEach(function(h){i.push({flowNode:h,remove:[c],add:[]})})}),i};ia.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(Cd);n.remove.forEach(function(o){bt(r,o),bt(o.get(ys),i)}),n.add.forEach(function(o){At(r,o),At(o.get(ys),i)})}),[]};ia.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,r=i.get(Cd);n.add.forEach(function(o){bt(r,o),bt(o.get(ys),i)}),n.remove.forEach(function(o){At(r,o),At(o.get(ys),i)})}),[]};function jc(e){this._moddle=e}jc.$inject=["moddle"];jc.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.claim(n,i):t.unclaim(n),[]};jc.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.unclaim(n):t.claim(n,i),[]};var Ik={fill:void 0,stroke:void 0};function Ad(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(un(t)){var n=Lk(t);if(n)return n}throw new Error("invalid color value: "+t)}}}Ad.$inject=["commandStack"];Ad.prototype.postExecute=function(e){var t=e.elements,n=e.colors||Ik,i=this,r={};"fill"in n&&q(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&q(r,{"border-color":this._normalizeColor(n.stroke)}),J(t,function(o){var l=Qe(o)?Vn(r,["border-color"]):r,u=He(o);if(Pk(l),Ve(o))i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:u.label,properties:{color:r["border-color"]}});else{if(!Me(u,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:o,properties:{di:l}})}})};function Lk(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function Pk(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var Dk={width:0,height:0};function h0(e,t,n){function i(s,p){var a=s.label||s,c=s.labelTarget||s;return FA(a,p),[a,c]}function r(s){var p=s.element,a=p.businessObject,c=s.newLabel;if(!Ve(p)&&Dr(p)&&!ac(p)&&!ag(c)){var h=7,f=oh(p);f={x:f.x,y:f.y+h},e.createLabel(p,f,{id:a.id+"_label",businessObject:a,di:p.di})}}function o(s){return s.oldLabel=Tn(s.element),i(s.element,s.newLabel)}function l(s){return i(s.element,s.oldLabel)}function u(s){var p=s.element,a=p.label||p,c=s.newLabel,h=s.newBounds,f=s.hints||{};if(!(!Ve(a)&&!N(a,"bpmn:TextAnnotation"))){if(Ve(a)&&ag(c)){f.removeShape!==!1&&e.removeShape(a,{unsetLabel:!1});return}var d=Tn(p);typeof h>"u"&&(h=t.getExternalLabelBounds(a,d)),h&&e.resizeShape(a,h,Dk)}}this.preExecute=r,this.execute=o,this.revert=l,this.postExecute=u}h0.$inject=["modeling","textRenderer","bpmnFactory"];function ag(e){return!e||!e.trim()}function Yt(e,t,n,i){Je.call(this,e,t,n),this._bpmnRules=i}de(Yt,Je);Yt.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];Yt.prototype.getHandlers=function(){var e=Je.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=ea,e["element.updateProperties"]=ta,e["canvas.updateRoot"]=Hc,e["lane.add"]=xd,e["lane.resize"]=na,e["lane.split"]=Sd,e["lane.updateRefs"]=ia,e["id.updateClaim"]=jc,e["element.setColor"]=Ad,e["element.updateLabel"]=h0,e};Yt.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})};Yt.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)};Yt.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})};Yt.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})};Yt.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})};Yt.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane};Yt.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})};Yt.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e};Yt.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};this._commandStack.execute("canvas.updateRoot",t)};Yt.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})};Yt.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})};Yt.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})};Yt.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function d0(){}d0.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||xe(t.source||e.source),t.connectionEnd||xe(t.target||e.target)]};var Da=20,Ok=5,Ll=Math.round,lg=20,Nk={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function Bk(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function Fk(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function f0(e,t,n){var i=zt(t,e,Ok),r=n.split(":")[0],o=Ll((t.x-e.x)/2+e.x),l=Ll((t.y-e.y)/2+e.y),u,s,p=Fk(r,i),a=/h|r|l/.test(r),c=!1,h=!1;return p?(u=a?{x:o,y:e.y}:{x:e.x,y:l},s=a?"h:h":"v:v"):(c=Bk(i,r),s=a?"h:v":"v:h",c?a?(h=l===e.y,u={x:e.x+Da*(/l/.test(r)?-1:1),y:h?l+Da:l}):(h=o===e.x,u={x:h?o+Da:o,y:e.y+Da*(/t/.test(r)?-1:1)}):u={x:o,y:l}),{waypoints:Td(e,u,s).concat(u),directions:s,turnNextDirections:h}}function Wk(e,t,n){return f0(e,t,n)}function Hk(e,t,n){var i=f0(t,e,cg(n));return{waypoints:i.waypoints.slice().reverse(),directions:cg(i.directions),turnNextDirections:i.turnNextDirections}}function jk(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,o=Td(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function cg(e){return e.split(":").reverse().join(":")}function Gk(e,t,n){var i=Ll((t.x-e.x)/2+e.x),r=Ll((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Td(e,t,n){if(n=n||"h:h",!Qk(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(m0(n)){var i=Wk(e,t,n),r=Hk(e,t,n),o=jk(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return Gk(e,t,n)}function Vk(e,t,n){var i=Td(e,t,n);return i.unshift(e),i.push(t),g0(i)}function zk(e,t,n,i,r){var o=r&&r.preferredLayouts||[],l=P_(o,"straight")[0]||"h:h",u=Nk[l]||0,s=zt(e,t,u),p=Jk(s,l);n=n||xe(e),i=i||xe(t);var a=p.split(":"),c=pg(n,e,a[0],qk(s)),h=pg(i,t,a[1],s);return Vk(c,h,p)}function Uk(e,t,n,i,r,o){Ie(n)&&(r=n,o=i,n=xe(e),i=xe(t)),o=q({preferredLayouts:[]},o),r=r||[];var l=o.preferredLayouts,u=l.indexOf("straight")!==-1,s;return s=u&&Xk(e,t,n,i,o),s||(s=o.connectionEnd&&Kk(t,e,i,r),s)||(s=o.connectionStart&&Zk(e,t,n,r),s)?s:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:zk(e,t,n,i,o)}function Yk(e,t,n){return e>=t&&e<=n}function ug(e,t,n){var i={x:"width",y:"height"};return Yk(t[e],n[e],n[e]+n[i[e]])}function Xk(e,t,n,i,r){var o={},l,u;return u=zt(e,t),/^(top|bottom|left|right)$/.test(u)?(/top|bottom/.test(u)&&(l="x"),/left|right/.test(u)&&(l="y"),r.preserveDocking==="target"?ug(l,i,e)?(o[l]=i[l],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:i.x,y:i.y}]):null:ug(l,n,t)?(o[l]=n[l],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}}]):null):null}function Zk(e,t,n,i){return $d(e,t,n,i)}function Kk(e,t,n,i){var r=i.slice().reverse();return r=$d(e,t,n,r),r?r.reverse():null}function $d(e,t,n,i){function r(a){return a.length<3?!0:a.length>4?!1:!!je(a,function(c,h){var f=a[h-1];return f&&Ls(c,f)<3})}function o(a,c,h){var f=fi(c,a);switch(f){case"v":return{x:h.x,y:a.y};case"h":return{x:a.x,y:h.y}}return{x:a.x,y:a.y}}function l(a,c,h){var f;for(f=a.length-2;f!==0;f--)if(sf(a[f],c,lg)||sf(a[f],h,lg))return a.slice(f);return a}if(r(i))return null;var u=i[0],s=i.slice(),p;return s[0]=n,s[1]=o(s[1],u,n),p=l(s,e,t),p!==s&&(s=$d(e,t,n,p)),s&&fi(s)?null:s}function Jk(e,t){if(m0(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function Qk(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function m0(e){return e&&/t|r|b|l/.test(e)}function qk(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function pg(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function g0(e){return e.reduce(function(t,n,i){var r=t[t.length-1],o=e[i+1];return Xp(r,o,n,0)||t.push(n),t},[])}var eI=-10,tI=40,Rd={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},ol={top:"t",right:"r",bottom:"b",left:"l"};function Md(){}de(Md,d0);Md.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,l=t.connectionEnd,u,s;return o||(o=hg(r&&r[0],n)),l||(l=hg(r&&r[r.length-1],i)),(N(e,"bpmn:Association")||N(e,"bpmn:DataAssociation"))&&r&&!dg(n,i)?[].concat([o],r.slice(1,-1),[l]):(N(e,"bpmn:MessageFlow")?u=iI(n,i):(N(e,"bpmn:SequenceFlow")||dg(n,i))&&(n===i?u={preferredLayouts:pI(n,e)}:N(n,"bpmn:BoundaryEvent")?u={preferredLayouts:hI(n,i,l)}:bs(n)||bs(i)?u=oI(n):N(n,"bpmn:Gateway")?u={preferredLayouts:["v:h"]}:N(i,"bpmn:Gateway")?u={preferredLayouts:["h:v"]}:u={preferredLayouts:["h:h"]}),u&&(u=q(u,t),s=g0(Uk(n,i,o,l,r,u))),s||[o,l])};function nI(e){var t=e.host;return zt(xe(e),t,eI)}function iI(e,t){return{preferredLayouts:["straight","v:v"],preserveDocking:rI(e,t)}}function rI(e,t){return N(t,"bpmn:Participant")?"source":N(e,"bpmn:Participant")?"target":bs(t)?"source":bs(e)||N(t,"bpmn:Event")?"target":N(e,"bpmn:Event")?"source":null}function oI(e){return{preferredLayouts:["straight","h:h"],preserveDocking:sI(e)}}function sI(e){return bs(e)?"target":"source"}function hg(e,t){return e?e.original||e:xe(t)}function dg(e,t){return N(t,"bpmn:Activity")&&N(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function bs(e){return N(e,"bpmn:SubProcess")&&Ne(e)}function ls(e,t){return e===t}function aI(e,t){return t.indexOf(e)!==-1}function cs(e){var t=/right|left/.exec(e);return t&&t[0]}function kr(e){var t=/top|bottom/.exec(e);return t&&t[0]}function lI(e,t){return Rd[e]===t}function cI(e,t){var n=cs(e),i=Rd[n];return t.indexOf(i)!==-1}function uI(e,t){var n=kr(e),i=Rd[n];return t.indexOf(i)!==-1}function gp(e){return e==="right"||e==="left"}function pI(e,t){var n=t.waypoints,i=n&&n.length&&zt(n[0],e);return i==="top"?["t:r"]:i==="right"?["r:b"]:i==="left"?["l:t"]:["b:l"]}function hI(e,t,n){var i=xe(e),r=xe(t),o=nI(e),l,u,s=ls(e.host,t),p=aI(o,["top","right","bottom","left"]),a=zt(r,i,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return s?dI(o,p,e,t,n):(l=fI(o,a,p),u=mI(o,a,p),[l+":"+u])}function dI(e,t,n,i,r){var o=t?e:kr(e),l=ol[o],u;return t?gp(e)?u=fg("y",n,i,r)?"h":"b":u=fg("x",n,i,r)?"v":"l":u="v",[l+":"+u]}function fg(e,t,n,i){var r=tI;return!(yu(e,i,n,r)||yu(e,i,{x:n.x+n.width,y:n.y+n.height},r)||yu(e,i,xe(t),r))}function yu(e,t,n,i){return Math.abs(t[e]-n[e])<i}function fI(e,t,n){return n?ol[e]:ls(kr(e),kr(t))||lI(cs(e),cs(t))?ol[kr(e)]:ol[cs(e)]}function mI(e,t,n){return n?gp(e)?cI(e,t)||ls(e,t)?"h":"v":uI(e,t)||ls(e,t)?"v":"h":gp(t)||ls(kr(e),kr(t))&&cs(t)?"h":"v"}function mg(e){return q({original:e.point.original||e.point},e.actual)}function fr(e,t){this._elementRegistry=e,this._graphicsFactory=t}fr.$inject=["elementRegistry","graphicsFactory"];fr.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(mg(i)),o.push(mg(r)),o};fr.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,o,l;return r=n?0:i.length-1,o=i[r],l=this._getIntersection(t,e,n),{point:o,actual:l||o,idx:r}};fr.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return zu(i,r,n)};fr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)};fr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)};fr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};const v0={__init__:["modeling","bpmnUpdater"],__depends__:[p2,R2,k2,I2,Jw,ok,ak,dk,ai,lh,t0],bpmnFactory:["type",Ln],bpmnUpdater:["type",dn],elementFactory:["type",pr],modeling:["type",Yt],layouter:["type",Md],connectionDocking:["type",fr]},gg=Math.round;function Gc(e,t,n,i,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=r,this._rules=o}Gc.prototype.create=function(e,t,n){const i=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,l=this._eventBus,u=this._layouter,s=this._rules,p=o.createShape(q({type:t},n)),a=l.fire("autoPlace",{source:e,shape:p});if(!a)return;q(p,{x:a.x-gg(p.width/2),y:a.y-gg(p.height/2)});const c=s.allowed("connection.create",{source:e,target:p,hints:{targetParent:e.parent}});let h=null;c&&(h=o.createConnection(c),h.waypoints=u.layoutConnection(h,{source:e,target:p}),h.waypoints=r.getCroppedWaypoints(h,e,p)),i.create({created:[p,h].filter(f=>!cl(f))})};Gc.prototype.cleanUp=function(){this._complexPreview.cleanUp()};Gc.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];const gI={__depends__:[Eh,GR,v0],__init__:["appendPreview"],appendPreview:["type",Gc]};var vg=Math.min,yg=Math.max;function bu(e){e.preventDefault()}function us(e){e.stopPropagation()}function vI(e){return e.nodeType===Node.TEXT_NODE}function yI(e){return[].slice.call(e)}function Xn(e){this.container=e.container,this.parent=tt('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=Ke("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=tn(this.autoResize,this),this.handlePaste=tn(this.handlePaste,this)}Xn.prototype.create=function(e,t,n,i){var r=this,o=this.parent,l=this.content,u=this.container;i=this.options=i||{},t=this.style=t||{};var s=Vn(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);q(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},s);var p=Vn(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return q(l.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},p),i.centerVertically&&q(l.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},p),l.innerText=n,we.bind(l,"keydown",this.keyHandler),we.bind(l,"mousedown",us),we.bind(l,"paste",r.handlePaste),i.autoResize&&we.bind(l,"input",this.autoResize),i.resizable&&this.resizable(t),u.appendChild(o),this.setSelection(l.lastChild,l.lastChild&&l.lastChild.length),o};Xn.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}};Xn.prototype.insertText=function(e){e=bI(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)};Xn.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,o=t.endOffset,l=t.commonAncestorContainer,u=yI(l.childNodes),s,p;if(vI(l)){var a=n.textContent;n.textContent=a.substring(0,r)+e+a.substring(o),s=n,p=r+e.length}else if(n===this.content&&i===this.content){var c=document.createTextNode(e);this.content.insertBefore(c,u[r]),s=c,p=c.textContent.length}else{var h=u.indexOf(n),f=u.indexOf(i);u.forEach(function(d,m){m===h?d.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(o):m>h&&m<=f&&ri(d)}),s=n,p=r+e.length}s&&p!==void 0&&setTimeout(function(){self.setSelection(s,p)})};Xn.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}};Xn.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,l=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=tt('<div class="djs-direct-editing-resize-handle"></div>');var u,s,p,a,c=function(d){bu(d),us(d),u=d.clientX,s=d.clientY;var m=t.getBoundingClientRect();p=m.width,a=m.height,we.bind(document,"mousemove",h),we.bind(document,"mouseup",f)},h=function(d){bu(d),us(d);var m=vg(yg(p+d.clientX-u,i),o),g=vg(yg(a+d.clientY-s,r),l);t.style.width=m+"px",t.style.height=g+"px",e.resizeHandler({width:p,height:a,dx:d.clientX-u,dy:d.clientY-s})},f=function(d){bu(d),us(d),we.unbind(document,"mousemove",h,!1),we.unbind(document,"mouseup",f,!1)};we.bind(n,"mousedown",c)}q(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)};Xn.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),we.unbind(t,"keydown",this.keyHandler),we.unbind(t,"mousedown",us),we.unbind(t,"input",this.autoResize),we.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),ri(n)),ri(e)};Xn.prototype.getValue=function(){return this.content.innerText.trim()};Xn.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t};Xn.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function bI(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Pn(e,t){this._eventBus=e,this._providers=[],this._textbox=new Xn({container:t.getContainer(),keyHandler:tn(this._handleKey,this),resizeHandler:tn(this._handleResize,this)})}Pn.$inject=["eventBus","canvas"];Pn.prototype.registerProvider=function(e){this._providers.push(e)};Pn.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))};Pn.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};Pn.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})};Pn.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0};Pn.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}};Pn.prototype.getValue=function(){return this._textbox.getValue()};Pn.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()};Pn.prototype._handleResize=function(e){this._fire("resize",e)};Pn.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=je(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};const y0={__depends__:[cc],__init__:["directEditing"],directEditing:["type",Pn]};function bg(e){return function(t){var n=t.target,i=re(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,l=(r&&r.$type)===n.eventDefinitionType,u=!!n.triggeredByEvent==!!i.triggeredByEvent,s=n.isExpanded===void 0||n.isExpanded===Ne(e);return!o||!l||!u||!s}}var wI=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],_I=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],EI=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],xI=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],SI=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],CI=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],b0=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],AI=b0,wg=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],TI=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],$I=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],RI=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],MI=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],kI=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],II=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}];const _g={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function _n(e,t,n,i,r,o,l,u){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=l,this._moddleCopy=u,this._register()}_n.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"];_n.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};_n.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[];if(Ie(e)||!n.allowed("shape.replace",{element:e}))return{};var r=bg(e);return N(t,"bpmn:DataObjectReference")?this._createEntries(e,TI):N(t,"bpmn:DataStoreReference")&&!N(e.parent,"bpmn:Collaboration")?this._createEntries(e,$I):N(t,"bpmn:StartEvent")&&!N(t.$parent,"bpmn:SubProcess")?(i=Re(wI,r),this._createEntries(e,i)):N(t,"bpmn:Participant")?(i=Re(II,function(o){return Ne(e)!==o.target.isExpanded}),this._createEntries(e,i)):N(t,"bpmn:StartEvent")&&Vt(t.$parent)?(i=Re(MI,function(o){var l=o.target,u=l.isInterrupting!==!1,s=t.isInterrupting===u;return r(o)||!r(o)&&!s}),this._createEntries(e,i)):N(t,"bpmn:StartEvent")&&!Vt(t.$parent)&&N(t.$parent,"bpmn:SubProcess")?(i=Re(_I,r),this._createEntries(e,i)):N(t,"bpmn:EndEvent")?(i=Re(xI,function(o){var l=o.target;return l.eventDefinitionType=="bpmn:CancelEventDefinition"&&!N(t.$parent,"bpmn:Transaction")?!1:r(o)}),this._createEntries(e,i)):N(t,"bpmn:BoundaryEvent")?(i=Re(RI,function(o){var l=o.target;if(l.eventDefinitionType=="bpmn:CancelEventDefinition"&&!N(t.attachedToRef,"bpmn:Transaction"))return!1;var u=l.cancelActivity!==!1,s=t.cancelActivity==u;return r(o)||!r(o)&&!s}),this._createEntries(e,i)):N(t,"bpmn:IntermediateCatchEvent")||N(t,"bpmn:IntermediateThrowEvent")?(i=Re(EI,r),this._createEntries(e,i)):N(t,"bpmn:Gateway")?(i=Re(SI,r),this._createEntries(e,i)):N(t,"bpmn:Transaction")?(i=Re(b0,r),this._createEntries(e,i)):Vt(t)&&Ne(e)?(i=Re(AI,r),this._createEntries(e,i)):N(t,"bpmn:SubProcess")&&Ne(e)?(i=Re(CI,r),this._createEntries(e,i)):N(t,"bpmn:AdHocSubProcess")&&!Ne(e)?(i=Re(wg,function(o){var l=o.target,u=l.type==="bpmn:SubProcess",s=l.isExpanded===!0;return bg(l)&&(!u||s)}),this._createEntries(e,i)):N(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,kI):N(t,"bpmn:FlowNode")?(i=Re(wg,r),N(t,"bpmn:SubProcess")&&!Ne(e)&&(i=Re(i,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,i)):{}};_n.prototype.getPopupMenuHeaderEntries=function(e){var t={};return N(e,"bpmn:Activity")&&!Vt(e)&&(t={...t,...this._getLoopCharacteristicsHeaderEntries(e)}),N(e,"bpmn:DataObjectReference")&&(t={...t,...this._getCollectionHeaderEntries(e)}),N(e,"bpmn:Participant")&&(t={...t,...this._getParticipantMultiplicityHeaderEntries(e)}),N(e,"bpmn:SubProcess")&&!N(e,"bpmn:Transaction")&&!Vt(e)&&(t={...t,...this._getAdHocHeaderEntries(e)}),ww(e)&&(t={...t,...this._getNonInterruptingHeaderEntries(e)}),t};_n.prototype._createEntries=function(e,t){var n={},i=this;return J(t,function(r){n[r.actionName]=i._createEntry(r,e)}),n};_n.prototype._createSequenceFlowEntries=function(e,t){var n=re(e),i={},r=this._modeling,o=this._moddle,l=this;return J(t,function(u){switch(u.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(N(n.sourceRef,"bpmn:ExclusiveGateway")||N(n.sourceRef,"bpmn:InclusiveGateway")||N(n.sourceRef,"bpmn:ComplexGateway")||N(n.sourceRef,"bpmn:Activity"))&&(i={...i,[u.actionName]:l._createEntry(u,e,function(){r.updateProperties(e.source,{default:n})})});break;case"replace-with-conditional-flow":!n.conditionExpression&&N(n.sourceRef,"bpmn:Activity")&&(i={...i,[u.actionName]:l._createEntry(u,e,function(){var s=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:s})})});break;default:N(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i={...i,[u.actionName]:l._createEntry(u,e,function(){r.updateProperties(e,{conditionExpression:void 0})})}),(N(n.sourceRef,"bpmn:ExclusiveGateway")||N(n.sourceRef,"bpmn:InclusiveGateway")||N(n.sourceRef,"bpmn:ComplexGateway")||N(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i={...i,[u.actionName]:l._createEntry(u,e,function(){r.updateProperties(e.source,{default:void 0})})})}}),i};_n.prototype._createEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},l=e.label;return l&&typeof l=="function"&&(l=l(t)),n=n||o,{label:i(l),className:e.className,action:n}};_n.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(p,a){if(a.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const c=e.businessObject.get("loopCharacteristics"),h=t._moddle.create(a.options.loopCharacteristics);c&&t._moddleCopy.copyElement(c,h),h.set("isSequential",a.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:h})}var r=re(e),o=r.loopCharacteristics,l,u,s;return o&&(l=o.isSequential,u=o.isSequential===void 0,s=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:s,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:l,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:u,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}};_n.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function r(l,u){t._modeling.updateModdleProperties(e,i,{isCollection:!u.active})}var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:r}}};_n.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(l,u){var s=u.active,p;s||(p=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:p})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:r}}};_n.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=re(e),i=N(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,l){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}};_n.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=re(e),i=this,r=_w(e),o=N(e,"bpmn:BoundaryEvent")?_g["intermediate-event-non-interrupting"]:_g["start-event-non-interrupting"],l=!n[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:l,action:function(){i._modeling.updateProperties(e,{[r]:!!l})}}}};const LI={__depends__:[bh,Jw,Eh],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",_n]};function ra(e,t,n,i,r,o,l,u,s,p,a,c,h){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=l,this._create=u,this._popupMenu=s,this._canvas=p,this._rules=a,this._translate=c,this._eventBus=n,this._appendPreview=h,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(f){var d=f.context,m=d.shape;if(!(!go(f)||!i.isOpen(m))){var g=i.getEntries(m);g.replace&&g.replace.action.click(f,m)}})}ra.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"];ra.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&q(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n};ra.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return Ie(t)?xo(t,function(n){return PI(t,n)}):t};ra.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,l=this._popupMenu,u=this._rules,s=this._autoPlace,p=this._translate,a=this._appendPreview,c={};if(e.type==="label")return c;var h=e.businessObject;function f(b,_){r.start(b,_)}function d(b,_){n.removeElements([_])}function m(b){var _=5,v=t.getPad(b).html,E=v.getBoundingClientRect(),x={x:E.left,y:E.bottom+_};return x}function g(b,_,v,E){function x($,R){var A=i.createShape(q({type:b},E));o.start($,A,{source:R}),a.cleanUp()}var T=s?function($,R){var A=i.createShape(q({type:b},E));s.append(R,A),a.cleanUp()}:x,k=s?function($,R){return a.create(R,b,E),()=>{a.cleanUp()}}:null;return{group:"model",className:_,title:v,action:{dragstart:x,click:T,hover:k}}}function y(b){return function(_,v){n.splitLane(v,b),t.open(v,!0)}}if(Me(h,["bpmn:Lane","bpmn:Participant"])&&Ne(e)){var w=Mi(e);q(c,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:p("Add lane above"),action:{click:function(b,_){n.addLane(_,"top")}}}}),w.length<2&&(e.height>=120&&q(c,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:p("Divide into two lanes"),action:{click:y(2)}}}),e.height>=180&&q(c,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:p("Divide into three lanes"),action:{click:y(3)}}})),q(c,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:p("Add lane below"),action:{click:function(b,_){n.addLane(_,"bottom")}}}})}N(h,"bpmn:FlowNode")&&(N(h,"bpmn:EventBasedGateway")?q(c,{"append.receive-task":g("bpmn:ReceiveTask","bpmn-icon-receive-task",p("Append receive task")),"append.message-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",p("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",p("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",p("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":g("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",p("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):Eg(h,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?q(c,{"append.compensation-activity":g("bpmn:Task","bpmn-icon-task",p("Append compensation activity"),{isForCompensation:!0})}):!N(h,"bpmn:EndEvent")&&!h.isForCompensation&&!Eg(h,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!Vt(h)&&q(c,{"append.end-event":g("bpmn:EndEvent","bpmn-icon-end-event-none",p("Append end event")),"append.gateway":g("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",p("Append gateway")),"append.append-task":g("bpmn:Task","bpmn-icon-task",p("Append task")),"append.intermediate-event":g("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",p("Append intermediate/boundary event"))})),l.isEmpty(e,"bpmn-replace")||q(c,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:p("Change element"),action:{click:function(b,_){var v=q(m(_),{cursor:{x:b.x,y:b.y}});l.open(_,"bpmn-replace",v,{title:p("Change element"),width:300,search:!0})}}}}),N(h,"bpmn:SequenceFlow")&&q(c,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))}),Me(h,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(c,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect to other element"),action:{click:f,dragstart:f}}}),N(h,"bpmn:TextAnnotation")&&q(c,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using association"),action:{click:f,dragstart:f}}}),Me(h,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&q(c,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using data input association"),action:{click:f,dragstart:f}}}),N(h,"bpmn:Group")&&q(c,{"append.text-annotation":g("bpmn:TextAnnotation","bpmn-icon-text-annotation",p("Add text annotation"))});var S=u.allowed("elements.delete",{elements:[e]});return Ie(S)&&(S=S[0]===e),S&&q(c,{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Delete"),action:{click:d}}}),c};function Eg(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return J(o,function(l){l.$type===n&&(r=!0)}),i&&r}function PI(e,t){return e.indexOf(t)!==-1}const DI={__depends__:[gI,y0,_b,ai,Th,zs,LI],__init__:["contextPadProvider"],contextPadProvider:["type",ra]};var OI={horizontal:["x","width"],vertical:["y","height"]},xg=5;function Ii(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return Ie(i)?i:i?n:[]})}Ii.$inject=["modeling","rules"];Ii.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)};Ii.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i};Ii.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(J(t,function(o){r=o(r,n,i)}),r):e};Ii.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var o=Gn(e,i);return J(o,function(l,u){var s=n._findRange(l,i,r),p,a=t[t.length-1];a&&n._hasIntersection(a.range,s)?t[t.length-1].elements.push(l):(p={range:s,elements:[l]},t.push(p))}),t};Ii.prototype._setOrientation=function(e){var t=OI[e];this._axis=t[0],this._dimension=t[1]};Ii.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)};Ii.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+xg,max:t+n-xg}};const NI={__init__:["distributeElements"],distributeElements:["type",Ii]};function Vc(e){kn.call(this,e)}Vc.$inject=["eventBus"];de(Vc,kn);Vc.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=Re(t,function(n){var i=Me(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=tc(t),t.length<3?!1:t})};var BI={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`};const Sg=BI;var FI=900;function oa(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",FI,this)}oa.$inject=["popupMenu","distributeElements","translate","rules"];oa.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&q(t,this._getEntries(e)),t};oa.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})};oa.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:Sg.horizontal,action:function(o,l){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:Sg.vertical,action:function(o,l){t.trigger(e,"vertical"),i.close()}}};return r};const WI={__depends__:[bh,NI],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Vc],distributeElementsMenuProvider:["type",oa]};var w0="is not a registered action",HI="is already registered";function Dn(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}Dn.$inject=["eventBus","injector"];Dn.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),l=e.get("canvas",!1),u=e.get("rules",!1),s=e.get("keyboardMove",!1),p=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&i&&this.register("copy",function(){var a=i.get();if(a.length)return o.copy(a)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(a){r.stepZoom(a.value)}),l&&this.register("zoom",function(a){l.zoom(a.value)}),n&&i&&u&&this.register("removeSelection",function(){var a=i.get();if(a.length){var c=u.allowed("elements.delete",{elements:a}),h;c!==!1&&(Ie(c)?h=c:h=a,h.length&&n.removeElements(h.slice()))}}),s&&this.register("moveCanvas",function(a){s.moveCanvas(a)}),p&&this.register("moveSelection",function(a){p.moveSelection(a.direction,a.accelerated)})};Dn.prototype.trigger=function(e,t){if(!this._actions[e])throw kd(e,w0);return this._actions[e](t)};Dn.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);J(e,function(i,r){n._registerAction(r,i)})};Dn.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw kd(e,HI);this._actions[e]=t};Dn.prototype.unregister=function(e){if(!this.isRegistered(e))throw kd(e,w0);this._actions[e]=void 0};Dn.prototype.getActions=function(){return Object.keys(this._actions)};Dn.prototype.isRegistered=function(e){return!!this._actions[e]};function kd(e,t){return new Error(e+" "+t)}const jI={__init__:["editorActions"],editorActions:["type",Dn]};function zc(e){e.invoke(Dn,this)}de(zc,Dn);zc.$inject=["injector"];zc.prototype._registerDefaultActions=function(e){Dn.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),l=e.get("handTool",!1),u=e.get("globalConnect",!1),s=e.get("distributeElements",!1),p=e.get("alignElements",!1),a=e.get("directEditing",!1),c=e.get("searchPad",!1),h=e.get("modeling",!1),f=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var d=t.getRootElement(),m=n.filter(function(g){return g!==d});return i.select(m),m}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),l&&this._registerAction("handTool",function(){l.toggle()}),u&&this._registerAction("globalConnectTool",function(){u.toggle()}),i&&s&&this._registerAction("distributeElements",function(d){var m=i.get(),g=d.type;m.length&&s.trigger(m,g)}),i&&p&&this._registerAction("alignElements",function(d){var m=i.get(),g=[],y=d.type;m.length&&(g=Re(m,function(w){return!N(w,"bpmn:Lane")}),p.trigger(g,y))}),i&&h&&this._registerAction("setColor",function(d){var m=i.get();m.length&&h.setColor(m,d)}),i&&a&&this._registerAction("directEditing",function(){var d=i.get();d.length&&a.activate(d[0])}),c&&this._registerAction("find",function(){c.toggle()}),t&&h&&this._registerAction("moveToOrigin",function(){var d=t.getRootElement(),m,g;N(d,"bpmn:Collaboration")?g=n.filter(function(y){return N(y.parent,"bpmn:Collaboration")}):g=n.filter(function(y){return y!==d&&!N(y.parent,"bpmn:SubProcess")}),m=vt(g),h.moveElements(g,{x:-m.x,y:-m.y},d)}),i&&f&&this._registerAction("replaceElement",function(d){f.triggerEntry("replace","click",d)})};const GI={__depends__:[jI],editorActions:["type",zc]};function _0(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;Me(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}_0.$inject=["eventBus"];var sl=10;function ps(e,t,n){return n||(n="round"),Math[n](e/t)*t}var VI=1200,zI=800;function mr(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",zI,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],VI,function(o){var l=o.originalEvent;if(!(!r.active||l&&mn(l))){var u=o.context,s=u.gridSnappingContext;s||(s=u.gridSnappingContext={}),["x","y"].forEach(function(p){var a={},c=YI(o,p,e);c&&(a.offset=c);var h=UI(o,p);h&&q(a,h),yo(o,p)||r.snapEvent(o,p,a)})}})}mr.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);gt(e,t,i)};mr.prototype.getGridSpacing=function(){return sl};mr.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=ps(e,sl);var i,r;return t&&t.min&&(i=t.min,Se(i)&&(i=ps(i+n,sl,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,Se(r)&&(r=ps(r+n,sl,"floor"),e=Math.min(e,r))),e-=n,e};mr.prototype.isActive=function(){return this.active};mr.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})};mr.prototype.toggleActive=function(){this.setActive(!this.active)};mr.$inject=["elementRegistry","eventBus","config.gridSnapping"];function UI(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,l=o.snapConstraints;if(l&&l[t])return l[t];l||(l=o.snapConstraints={}),l[t]||(l[t]={});var u=n.direction;i&&(al(t)?(l.x.min=i.left,l.x.max=i.right):(l.y.min=i.top,l.y.max=i.bottom));var s=r.min,p=r.max;return s&&(al(t)?Ag(u)?l.x.max=s.left:l.x.min=s.right:Cg(u)?l.y.max=s.top:l.y.min=s.bottom),p&&(al(t)?Ag(u)?l.x.min=p.left:l.x.max=p.right:Cg(u)?l.y.min=p.top:l.y.max=p.bottom),l[t]}function YI(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,l=o.snapLocation,u=o.snapOffset;return u&&Se(u[t])||(u||(u=o.snapOffset={}),Se(u[t])||(u[t]=0),!r)||(n.get(r.id)||(al(t)?u[t]+=r[t]+r.width/2:u[t]+=r[t]+r.height/2),!l)||(t==="x"?/left/.test(l)?u[t]-=r.width/2:/right/.test(l)&&(u[t]+=r.width/2):/top/.test(l)?u[t]-=r.height/2:/bottom/.test(l)&&(u[t]+=r.height/2)),u[t]}function al(e){return e==="x"}function Cg(e){return e.indexOf("n")!==-1}function Ag(e){return e.indexOf("w")!==-1}function qr(e,t){se.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=r.hints||{},l=o.autoResize;if(l){var u=r.shape,s=r.newBounds;un(l)?r.newBounds=n.snapComplex(s,l):r.newBounds=n.snapSimple(u,s)}})}qr.$inject=["eventBus","gridSnapping","modeling"];de(qr,se);qr.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t};qr.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e};qr.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),q(e,o),e};qr.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),q(e,o),e};var XI=2e3;function E0(e,t){e.on(["spaceTool.move","spaceTool.end"],XI,function(n){var i=n.context;if(i.initialized){var r=i.axis,o;r==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}E0.$inject=["eventBus","gridSnapping"];const ZI={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",qr],gridSnappingSpaceToolBehavior:["type",E0]},KI={__depends__:[ZI],__init__:["gridSnapping"],gridSnapping:["type",mr]};var JI=2e3;function x0(e,t){e.on("autoPlace",JI,function(n){var i=n.source,r=xe(i),o=n.shape,l=Hb(i,o);return["x","y"].forEach(function(u){var s={};l[u]!==r[u]&&(l[u]>r[u]?s.min=l[u]:s.max=l[u],N(o,"bpmn:TextAnnotation")&&(QI(u)?s.offset=-o.width/2:s.offset=-o.height/2),l[u]=t.snapValue(l[u],s))}),l})}x0.$inject=["eventBus","gridSnapping"];function QI(e){return e==="x"}var qI=1750;function S0(e,t,n){t.on(["create.start","shape.move.start"],qI,function(i){var r=i.context,o=r.shape,l=e.getRootElement();if(!(!N(o,"bpmn:Participant")||!N(l,"bpmn:Process")||!l.children.length)){var u=r.createConstraints;u&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}S0.$inject=["canvas","eventBus","gridSnapping"];var eL=3e3;function Uc(e,t,n){se.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],eL,function(r){var o=r.context,l=o.connection,u=o.hints||{},s=l.waypoints;u.connectionStart||u.connectionEnd||u.createElementsBehavior===!1||tL(s)&&n.updateWaypoints(l,i.snapMiddleSegments(s))})}Uc.$inject=["eventBus","gridSnapping","modeling"];de(Uc,se);Uc.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=rL(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function tL(e){return e.length>3}function nL(e){return e==="h"}function iL(e){return e==="v"}function rL(e,t,n){var i=fi(t,n),r={};return nL(i)&&(r.y=e.snapValue(t.y)),iL(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=q({},t,r),n=q({},n,r)),[t,n]}const oL={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",x0],gridSnappingParticipantBehavior:["type",S0],gridSnappingLayoutConnectionBehavior:["type",Uc]},sL={__depends__:[KI,oL],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",_0]};var aL=30,lL=30;function sa(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;if(N(r,"bpmn:Lane"))return n._createParticipantHit(r,o);if(N(r,"bpmn:Participant"))return Ne(r)?n._createParticipantHit(r,o):n._createDefaultHit(r,o);if(N(r,"bpmn:SubProcess"))return Ne(r)?n._createSubProcessHit(r,o):n._createDefaultHit(r,o)})}sa.$inject=["eventBus","interactionEvents"];sa.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0};sa.prototype._createParticipantHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:aL,height:e.height}),!0};sa.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:lL}),!0};const cL={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",sa]};function Yc(e){e.invoke(Po,this)}de(Yc,Po);Yc.$inject=["injector"];Yc.prototype.registerBindings=function(e,t){Po.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};const uL={__depends__:[ph],__init__:["keyboardBindings"],keyboardBindings:["type",Yc]};var pL={moveSpeed:1,moveSpeedAccelerated:10},hL=1500,Tg="left",$g="up",Rg="right",Mg="down",dL={ArrowLeft:Tg,Left:Tg,ArrowUp:$g,Up:$g,ArrowRight:Rg,Right:Rg,ArrowDown:Mg,Down:Mg},fL={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function C0(e,t,n,i,r){var o=this;this._config=q({},pL,e||{}),t.addListener(hL,function(l){var u=l.keyEvent,s=dL[u.key];if(s&&!t.isCmd(u)){var p=t.isShift(u);return o.moveSelection(s,p),!0}}),this.moveSelection=function(l,u){var s=r.get();if(s.length){var p=this._config[u?"moveSpeedAccelerated":"moveSpeed"],a=fL[l](p),c=i.allowed("elements.move",{shapes:s});c&&n.moveElements(s,a)}}}C0.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];const mL={__depends__:[ph,ai],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",C0]};var kg=10;function aa(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(s,p){var a=s.shape,c=s.direction,h=s.resizeConstraints,f;s.delta=p,f=tM(a,c,p),s.newBounds=iM(f,h),s.canExecute=r.canResize(s)}function l(s){var p=s.resizeConstraints,a=s.minBounds;p===void 0&&(a===void 0&&(a=r.computeMinResizeBox(s)),s.resizeConstraints={min:ye(a)})}function u(s){var p=s.shape,a=s.canExecute,c=s.newBounds;if(a){if(c=vy(c),!gL(p,c))return;n.resizeShape(p,c)}}e.on("resize.start",function(s){l(s.context)}),e.on("resize.move",function(s){var p={x:s.dx,y:s.dy};o(s.context,p)}),e.on("resize.end",function(s){u(s.context)})}aa.prototype.canResize=function(e){var t=this._rules,n=Vn(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)};aa.prototype.activate=function(e,t,n){var i=this._dragging,r,o;if(typeof n=="string"&&(n={direction:n}),r=q({shape:t},n),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,A0(t,o),"resize",{autoActivate:!0,cursor:vL(o),data:{shape:t,context:r}})};aa.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:kg,height:kg},r=pw(t,e.childrenBoxPadding),rM(n,t,i,r)};aa.$inject=["eventBus","rules","modeling","dragging"];function gL(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function A0(e,t){var n=xe(e),i=ye(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function vL(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var Ig="djs-resizing",Lg="resize-not-ok",yL=500;function T0(e,t,n){function i(o){var l=o.shape,u=o.newBounds,s=o.frame;s||(s=o.frame=n.addFrame(l,t.getActiveLayer()),t.addMarker(l,Ig)),u.width>5&&ce(s,{x:u.x,width:u.width}),u.height>5&&ce(s,{y:u.y,height:u.height}),o.canExecute?Fe(s).remove(Lg):Fe(s).add(Lg)}function r(o){var l=o.shape,u=o.frame;u&&ut(o.frame),t.removeMarker(l,Ig)}e.on("resize.move",yL,function(o){i(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}T0.$inject=["eventBus","canvas","previewSupport"];var Oa=-6,Na=8,Ba=20,es="djs-resizer",bL=["n","w","s","e","nw","ne","se","sw"];function gr(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(o){var l=o.newSelection;r.removeResizers(),l.length===1&&J(l,tn(r.addResizer,r))}),e.on("shape.changed",function(o){var l=o.element;n.isSelected(l)&&(r.removeResizers(),r.addResizer(l))})}gr.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(o){sr(o)&&i.activate(o,e,n)}we.bind(t,"mousedown",r),we.bind(t,"touchstart",r)};gr.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=wL(i),l=he("g");Fe(l).add(es),Fe(l).add(es+"-"+e.id),Fe(l).add(es+"-"+i),me(r,l);var u=he("rect");ce(u,{x:-Na/2+o.x,y:-Na/2+o.y,width:Na,height:Na}),Fe(u).add(es+"-visual"),me(l,u);var s=he("rect");return ce(s,{x:-Ba/2+o.x,y:-Ba/2+o.y,width:Ba,height:Ba}),Fe(s).add(es+"-hit"),me(l,s),Ya(l,t,n),l};gr.prototype.createResizer=function(e,t){var n=A0(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)};gr.prototype.addResizer=function(e){var t=this;Qe(e)||!this._resize.canResize({shape:e})||J(bL,function(n){t.createResizer(e,n)})};gr.prototype.removeResizers=function(){var e=this._getResizersParent();Vr(e)};gr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};gr.$inject=["eventBus","canvas","selection","resize"];function wL(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-Oa:e.indexOf("w")!==-1&&(t.x=Oa),e.indexOf("s")!==-1?t.y=-Oa:e.indexOf("n")!==-1&&(t.y=Oa),t}const $0={__depends__:[ci,$i,Bo],__init__:["resize","resizePreview","resizeHandles"],resize:["type",aa],resizePreview:["type",T0],resizeHandles:["type",gr]};var _L=2e3;function la(e,t,n,i,r,o,l){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=l,i.registerProvider(this),e.on("element.dblclick",function(s){u(s.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],_L,function(s){i.isActive(s.element)&&i.cancel()}),e.on(["commandStack.changed"],function(s){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(s){o.removeResizers()}),e.on("create.end",500,function(s){var p=s.context,a=p.shape,c=s.context.canExecute,h=s.isTouch;h||c&&(p.hints&&p.hints.createElementsBehavior===!1||u(a))}),e.on("autoPlace.end",500,function(s){u(s.shape)});function u(s,p){(p||Me(s,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||Id(s))&&i.activate(s)}}la.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"];la.prototype.activate=function(e){var t=Tn(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);q(n,i);var r={};return(Me(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||Id(e))&&q(r,{centerVertically:!0}),Dr(e)&&q(r,{autoResize:!0}),N(e,"bpmn:TextAnnotation")&&q(r,{resizable:!0,autoResize:!0}),q(n,{options:r}),n}};la.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},l=t.zoom(),u=this._textRenderer.getDefaultStyle(),s=this._textRenderer.getExternalStyle(),p=s.fontSize*l,a=s.lineHeight,c=u.fontSize*l,h=u.lineHeight,f={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(N(e,"bpmn:Lane")||SL(e)){var d=An(e),m=d?{width:i.height,height:30*l,x:i.x-i.height/2+15*l,y:r.y-30*l/2}:{width:i.width,height:30*l};q(o,m),q(f,{fontSize:c+"px",lineHeight:h,paddingTop:7*l+"px",paddingBottom:7*l+"px",paddingLeft:5*l+"px",paddingRight:5*l+"px",transform:d?"rotate(-90deg)":null})}if(xL(e)){var g=An(e),y=g?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:r.x-i.height/2,y:r.y-i.width/2};q(o,y),q(f,{fontSize:c+"px",lineHeight:h,paddingTop:7*l+"px",paddingBottom:7*l+"px",paddingLeft:5*l+"px",paddingRight:5*l+"px",transform:g?null:"rotate(-90deg)"})}(Me(e,["bpmn:Task","bpmn:CallActivity"])||Id(e))&&(q(o,{width:i.width,height:i.height}),q(f,{fontSize:c+"px",lineHeight:h,paddingTop:7*l+"px",paddingBottom:7*l+"px",paddingLeft:5*l+"px",paddingRight:5*l+"px"})),EL(e)&&(q(o,{width:i.width,x:i.x}),q(f,{fontSize:c+"px",lineHeight:h,paddingTop:7*l+"px",paddingBottom:7*l+"px",paddingLeft:5*l+"px",paddingRight:5*l+"px"}));var w=90*l,S=7*l,b=4*l;if(n.labelTarget&&(q(o,{width:w,height:i.height+S+b,x:r.x-w/2,y:i.y-S}),q(f,{fontSize:p+"px",lineHeight:a,paddingTop:S+"px",paddingBottom:b+"px"})),Dr(n)&&!ac(n)&&!Ve(n)){var _=oh(e),v=t.getAbsoluteBBox({x:_.x,y:_.y,width:0,height:0}),E=p+S+b;q(o,{width:w,height:E,x:v.x-w/2,y:v.y-E/2}),q(f,{fontSize:p+"px",lineHeight:a,paddingTop:S+"px",paddingBottom:b+"px"})}return N(e,"bpmn:TextAnnotation")&&(q(o,{width:i.width,height:i.height,minWidth:30*l,minHeight:10*l}),q(f,{textAlign:"left",paddingTop:5*l+"px",paddingBottom:7*l+"px",paddingLeft:7*l+"px",paddingRight:5*l+"px",fontSize:c+"px",lineHeight:h})),{bounds:o,style:f}};la.prototype.update=function(e,t,n,i){var r,o;N(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),CL(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function Id(e){return N(e,"bpmn:SubProcess")&&!Ne(e)}function EL(e){return N(e,"bpmn:SubProcess")&&Ne(e)}function xL(e){return N(e,"bpmn:Participant")&&!Ne(e)}function SL(e){return N(e,"bpmn:Participant")&&Ne(e)}function CL(e){return!e||!e.trim()}var Pg="djs-element-hidden",Dg="djs-label-hidden";function R0(e,t,n){var i=this,r=t.getDefaultLayer(),o,l,u;e.on("directEditing.activate",function(s){var p=s.active;if(o=p.element.label||p.element,N(o,"bpmn:TextAnnotation")){l=t.getAbsoluteBBox(o),u=he("g");var a=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),c=i.path=he("path");ce(c,{d:a,strokeWidth:2,stroke:AL(o)}),me(u,c),me(r,u),Ft(u,o.x,o.y)}N(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,Pg):(N(o,"bpmn:Task")||N(o,"bpmn:CallActivity")||N(o,"bpmn:SubProcess")||N(o,"bpmn:Participant"))&&t.addMarker(o,Dg)}),e.on("directEditing.resize",function(s){if(N(o,"bpmn:TextAnnotation")){var p=s.height,a=s.dy,c=Math.max(o.height/l.height*(p+a),0),h=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:c,position:{mx:0,my:0}});ce(i.path,{d:h})}}),e.on(["directEditing.complete","directEditing.cancel"],function(s){var p=s.active;p&&(t.removeMarker(p.element.label||p.element,Pg),t.removeMarker(o,Dg)),o=void 0,l=void 0,u&&(ut(u),u=void 0)})}R0.$inject=["eventBus","canvas","pathMap"];function AL(e,t){var n=He(e);return n.get("stroke")||t||"black"}const TL={__depends__:[lh,$0,y0],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",la],labelEditingPreview:["type",R0]};var $L=new uc("tt");function RL(e){var t=tt('<div class="djs-tooltip-container" />');return Nt(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function ML(e,t,n){Nt(e,{left:t+"px",top:n+"px"})}function Ld(e,t){e.style.display=t===!1?"none":""}var M0="djs-tooltip",wu="."+M0;function on(e,t){this._eventBus=e,this._canvas=t,this._ids=$L,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=RL(t.getContainer());var n=this;cn.bind(this._tooltipRoot,wu,"mousedown",function(i){i.stopPropagation()}),cn.bind(this._tooltipRoot,wu,"mouseover",function(i){n.trigger("mouseover",i)}),cn.bind(this._tooltipRoot,wu,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}on.$inject=["eventBus","canvas"];on.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=q({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t};on.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(Bt(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};on.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]};on.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}};on.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}};on.prototype.remove=function(e){var t=this.get(e);t&&(ri(t.html),ri(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};on.prototype.show=function(){Ld(this._tooltipRoot)};on.prototype.hide=function(){Ld(this._tooltipRoot,!1)};on.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i};on.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),un(n)&&(n=tt(n)),i=tt('<div data-tooltip-id="'+t+'" class="'+M0+'">'),Nt(i,{position:"absolute"}),i.appendChild(n),e.type&&nt(i).add("djs-tooltip-"+e.type),e.className&&nt(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)};on.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;ML(n,t.x,t.y)};on.prototype._updateTooltipVisibilty=function(e){J(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),Ld(i,r))})};on.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};const kL={__init__:["tooltips"],tooltips:["type",on]};var IL="flow elements must be children of pools/participants";function k0(e,t,n){function i(r,o,l){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:l||2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,l=o.shape,u=o.target;N(u,"bpmn:Collaboration")&&N(l,"bpmn:FlowNode")&&i(r,n(IL))})}k0.$inject=["eventBus","tooltips","translate"];const LL={__depends__:[kL],__init__:["modelingFeedback"],modelingFeedback:["type",k0]};var PL=500,DL=1250,OL=1500,Pl=Math.round;function NL(e){return{x:e.x+Pl(e.width/2),y:e.y+Pl(e.height/2)}}function I0(e,t,n,i,r){function o(u,s,p,a){return r.allowed("elements.move",{shapes:u,delta:s,position:p,target:a})}e.on("shape.move.start",OL,function(u){var s=u.context,p=u.shape,a=i.get().slice();a.indexOf(p)===-1&&(a=[p]),a=BL(a),q(s,{shapes:a,validatedShapes:a,shape:p})}),e.on("shape.move.start",DL,function(u){var s=u.context,p=s.validatedShapes,a;if(a=s.canExecute=o(p),!a)return!1}),e.on("shape.move.move",PL,function(u){var s=u.context,p=s.validatedShapes,a=u.hover,c={x:u.dx,y:u.dy},h={x:u.x,y:u.y},f;if(f=o(p,c,h,a),s.delta=c,s.canExecute=f,f===null){s.target=null;return}s.target=a}),e.on("shape.move.end",function(u){var s=u.context,p=s.delta,a=s.canExecute,c=a==="attach",h=s.shapes;if(a===!1)return!1;p.x=Pl(p.x),p.y=Pl(p.y),!(p.x===0&&p.y===0)&&n.moveElements(h,p,s.target,{primaryShape:s.shape,attach:c})}),e.on("element.mousedown",function(u){if(sr(u)){var s=Io(u);if(!s)throw new Error("must supply DOM mousedown event");return l(s,u.element)}});function l(u,s,p,a){if(Mt(p)&&(a=p,p=!1),!(s.waypoints||!s.parent)&&!Fe(u.target).has("djs-hit-no-move")){var c=NL(s);return t.init(u,c,"shape.move",{cursor:"grabbing",autoActivate:p,data:{shape:s,context:a||{}}}),!0}}this.start=l}I0.$inject=["eventBus","dragging","modeling","selection","rules"];function BL(e){var t=So(e,"id");return Re(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var Og=499,_u="djs-dragging",Ng="drop-ok",Bg="drop-not-ok",Fg="new-parent",Wg="attach-ok";function L0(e,t,n,i){function r(s){var p=o(s),a=FL(p);return a}function o(s){var p=Is(s,!0),a=Pt(p,function(c){return(c.incoming||[]).concat(c.outgoing||[])});return ll(p.concat(a))}function l(s,p){[Wg,Ng,Bg,Fg].forEach(function(a){a===p?t.addMarker(s,a):t.removeMarker(s,a)})}function u(s,p,a){i.addDragger(p,s.dragGroup),a&&t.addMarker(p,_u),s.allDraggedElements?s.allDraggedElements.push(p):s.allDraggedElements=[p]}e.on("shape.move.start",Og,function(s){var p=s.context,a=p.shapes,c=p.allDraggedElements,h=r(a);if(!p.dragGroup){var f=he("g");ce(f,n.cls("djs-drag-group",["no-events"]));var d=t.getActiveLayer();me(d,f),p.dragGroup=f}h.forEach(function(m){i.addDragger(m,p.dragGroup)}),c?c=ll([c,o(a)]):c=o(a),J(c,function(m){t.addMarker(m,_u)}),p.allDraggedElements=c,p.differentParents=WL(a)}),e.on("shape.move.move",Og,function(s){var p=s.context,a=p.dragGroup,c=p.target,h=p.shape.parent,f=p.canExecute;c&&(f==="attach"?l(c,Wg):p.canExecute&&c&&c.id!==h.id?l(c,Fg):l(c,p.canExecute?Ng:Bg)),Ft(a,s.dx,s.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(s){var p=s.context,a=p.target;a&&l(a,null)}),e.on("shape.move.cleanup",function(s){var p=s.context,a=p.allDraggedElements,c=p.dragGroup;J(a,function(h){t.removeMarker(h,_u)}),c&&ut(c)}),this.makeDraggable=u}L0.$inject=["eventBus","canvas","styles","previewSupport"];function FL(e){var t=Re(e,function(n){return Qe(n)?je(e,Fn({id:n.source.id}))&&je(e,Fn({id:n.target.id})):!0});return t}function WL(e){return D_(So(e,function(t){return t.parent&&t.parent.id}))!==1}const HL={__depends__:[cc,ai,sh,ci,$i,Bo],__init__:["move","movePreview"],move:["type",I0],movePreview:["type",L0]},jL="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",GL="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",VL={width:36,height:50},zL={width:50,height:50};function Hg(e,t,n){return he("path",{d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`,...n})}const Hi=5;function Xc(e,t){this._styles=t,e.registerProvider(this)}Xc.$inject=["outline","styles"];Xc.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Ve(e))return N(e,"bpmn:Gateway")?(n=he("rect"),q(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),ce(n,q({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):Me(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group"])?(n=he("rect"),ce(n,q({x:-Hi,y:-Hi,rx:14,width:e.width+Hi*2,height:e.height+Hi*2},t))):N(e,"bpmn:EndEvent")?(n=he("circle"),ce(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+Hi+1},t))):N(e,"bpmn:Event")?(n=he("circle"),ce(n,q({cx:e.width/2,cy:e.height/2,r:e.width/2+Hi},t))):N(e,"bpmn:DataObjectReference")&&jg(e,"bpmn:DataObjectReference")?n=Hg(jL,{x:-6,y:-6},t):N(e,"bpmn:DataStoreReference")&&jg(e,"bpmn:DataStoreReference")&&(n=Hg(GL,{x:-6,y:-6},t)),n};Xc.prototype.updateOutline=function(e,t){if(!Ve(e))return Me(e,["bpmn:SubProcess","bpmn:Group"])?(ce(t,{width:e.width+Hi*2,height:e.height+Hi*2}),!0):!!Me(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function jg(e,t){var n;return t==="bpmn:DataObjectReference"?n=VL:t==="bpmn:DataStoreReference"&&(n=zL),e.width===n.width&&e.height===n.height}const UL={__depends__:[sh],__init__:["outlineProvider"],outlineProvider:["type",Xc]};var P0=".djs-palette-toggle",D0=".entry",YL=P0+", "+D0,vp="djs-palette-",XL="shown",yp="open",Gg="two-column",ZL=1e3;function wt(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}wt.$inject=["eventBus","canvas"];wt.prototype.registerProvider=function(e,t){t||(t=e,e=ZL),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()};wt.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(JL,{})};wt.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}};wt.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=tt(wt.HTML_MARKUP);n.appendChild(i),nt(n).add(vp+XL),cn.bind(i,YL,"click",function(r){var o=r.delegateTarget;if(Gp(o,P0))return e.toggle();e.trigger("click",r)}),we.bind(i,"mousedown",function(r){r.stopPropagation()}),cn.bind(i,D0,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})};wt.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers};wt.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=nt(n),l=nt(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(Gg,r),l.toggle(vp+Gg,r),"open"in e&&(o.toggle(yp,e.open),l.toggle(vp+yp,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})};wt.prototype._update=function(){var e=Ke(".djs-palette-entries",this._container),t=this._entries=this.getEntries();ql(e),J(t,function(n,i){var r=n.group||"default",o=Ke("[data-group="+Lr(r)+"]",e);o||(o=tt('<div class="group"></div>'),Bt(o,"data-group",r),e.appendChild(o));var l=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),u=tt(l);if(o.appendChild(u),!n.separator&&(Bt(u,"data-action",i),n.title&&Bt(u,"title",n.title),n.className&&KL(u,n.className),n.imageUrl)){var s=tt("<img>");Bt(s,"src",n.imageUrl),u.appendChild(s)}}),this.open()};wt.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=Bt(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()};wt.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,l;if(o=r[e],!!o&&(l=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(yt(l)){if(t==="click")return l(n,i)}else if(l[t])return l[t](n,i);n.preventDefault()}};wt.prototype._layoutChanged=function(){this._toggleState({})};wt.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n};wt.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})};wt.prototype.open=function(){this._toggleState({open:!0})};wt.prototype.toggle=function(){this.isOpen()?this.close():this.open()};wt.prototype.isActiveTool=function(e){return e&&this._activeTool===e};wt.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=Ke(".djs-palette-entries",this._container),this._toolsContainer=Ke("[data-group=tools]",t)),n=this._toolsContainer,J(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=nt(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})};wt.prototype.isOpen=function(){return nt(this._container).has(yp)};wt.prototype._getParentContainer=function(){return this._canvas.getContainer()};wt.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function KL(e,t){var n=nt(e),i=Ie(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function JL(e,t){var n=t.getPaletteEntries();return yt(n)?n(e):(J(n,function(i,r){e[r]=i}),e)}const O0={__init__:["palette"],palette:["type",wt]};var N0="crosshair";function eo(e,t,n,i,r,o,l){this._selection=r,this._dragging=n,this._mouse=l;var u=this,s={create:function(p){var a=t.getActiveLayer(),c;c=p.frame=he("rect"),ce(c,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),me(a,c)},update:function(p){var a=p.frame,c=p.bbox;ce(a,{x:c.x,y:c.y,width:c.width,height:c.height})},remove:function(p){p.frame&&ut(p.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(p){var a=p.originalEvent.target;!p.hover&&!(a instanceof SVGElement)||e.once("lasso.selection.ended",function(){u.activateLasso(p.originalEvent,!0)})}),e.on("lasso.end",0,function(p){var a=p.context,c=Eu(p),h=i.filter(function(d){return d}),f=El(p);u.select(h,c,f?a.selection:[])}),e.on("lasso.start",function(p){var a=p.context;a.bbox=Eu(p),s.create(a),a.selection=r.get()}),e.on("lasso.move",function(p){var a=p.context;a.bbox=Eu(p),s.update(a)}),e.on("lasso.cleanup",function(p){var a=p.context;s.remove(a)}),e.on("element.mousedown",1500,function(p){if(El(p))return u.activateLasso(p.originalEvent),!0})}eo.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"];eo.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:N0,data:{context:{}}})};eo.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:N0,data:{context:{}},keepSelection:!0})};eo.prototype.select=function(e,t,n=[]){var i=iS(e,t);this._selection.select([...n,...Cp(i)])};eo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)};eo.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Eu(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}const B0={__depends__:[kc,Us],__init__:["lassoTool"],lassoTool:["type",eo]};var xu=1500,F0="grab";function Fo(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var l=this,u=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",xu,function(s){if(go(s))return l.activateMove(s.originalEvent,!0),!1}),u&&u.addListener(xu,function(s){if(!(!Vg(s.keyEvent)||l.isActive())){var p=l._mouse.getLastMoveEvent();l.activateMove(p,!!p)}},"keyboard.keydown"),u&&u.addListener(xu,function(s){!Vg(s.keyEvent)||!l.isActive()||l.toggle()},"keyboard.keyup"),e.on("hand.end",function(s){var p=s.originalEvent.target;if(!s.hover&&!(p instanceof SVGElement))return!1;e.once("hand.ended",function(){l.activateMove(s.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(s){var p=t.viewbox().scale;t.scroll({dx:s.dx*p,dy:s.dy*p})}),e.on("hand.move.end",function(s){var p=s.context,a=p.reactivate;return!go(s)&&a&&e.once("hand.move.ended",function(c){l.activateHand(c.originalEvent,!0,!0)}),!1})}Fo.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"];Fo.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:F0,data:{context:n||{}}})};Fo.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:F0,data:{context:{reactivate:n}}})};Fo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)};Fo.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function Vg(e){return Lt("Space",e)}const W0={__depends__:[kc,Us],__init__:["handTool"],handTool:["type",Fo]};var zg="connect-ok",Ug="connect-not-ok";function Wo(e,t,n,i,r,o,l){var u=this;this._dragging=t,this._rules=o,this._mouse=l,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(s){var p=s.context,a=s.hover,c=p.canStartConnect=u.canStartConnect(a);c!==null&&(p.startTarget=a,i.addMarker(a,c?zg:Ug))}),e.on(["global-connect.out","global-connect.cleanup"],function(s){var p=s.context.startTarget,a=s.context.canStartConnect;p&&i.removeMarker(p,a?zg:Ug)}),e.on(["global-connect.ended"],function(s){var p=s.context,a=p.startTarget,c={x:s.x,y:s.y},h=u.canStartConnect(a);if(h)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,a,c)}),!1})}Wo.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"];Wo.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})};Wo.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)};Wo.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)};Wo.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};const H0={__depends__:[Th,ci,$i,kc,Us],globalConnect:["type",Wo]};function Pd(e,t,n,i,r,o,l,u){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=l,this._translate=u,e.registerProvider(this)}Pd.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Pd.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,o=this._handTool,l=this._globalConnect,u=this._translate;function s(c,h,f,d,m){function g(y){var w=n.createShape(q({type:c},m));t.start(y,w)}return{group:h,className:f,title:d,action:{dragstart:g,click:g}}}function p(c){var h=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),f=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:h});t.start(c,[h,f],{hints:{autoSelect:[h]}})}function a(c){t.start(c,n.createParticipantShape())}return q(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:u("Activate hand tool"),action:{click:function(c){o.activateHand(c)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:u("Activate lasso tool"),action:{click:function(c){r.activateSelection(c)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:u("Activate create/remove space tool"),action:{click:function(c){i.activateSelection(c)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:u("Activate global connect tool"),action:{click:function(c){l.start(c)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":s("bpmn:StartEvent","event","bpmn-icon-start-event-none",u("Create start event")),"create.intermediate-event":s("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",u("Create intermediate/boundary event")),"create.end-event":s("bpmn:EndEvent","event","bpmn-icon-end-event-none",u("Create end event")),"create.exclusive-gateway":s("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",u("Create gateway"),{isMarkerVisible:!0}),"create.task":s("bpmn:Task","activity","bpmn-icon-task",u("Create task")),"create.data-object":s("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",u("Create data object reference")),"create.data-store":s("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",u("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:u("Create expanded sub-process"),action:{dragstart:p,click:p}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:u("Create pool/participant"),action:{dragstart:a,click:a}},"create.group":s("bpmn:Group","artifact","bpmn-icon-group",u("Create group"))}),e};const QL={__depends__:[O0,zs,t0,B0,W0,H0,Ws],__init__:["paletteProvider"],paletteProvider:["type",Pd]};var qL=250;function Dd(e,t,n,i,r){se.call(this,e);function o(u){var s=u.canExecute.replacements;J(s,function(p){var a=p.oldElementId,c={type:p.newElementType};if(!u.visualReplacements[a]){var h=t.get(a);q(c,{x:h.x,y:h.y});var f=n.createShape(c);i.addShape(f,h.parent);var d=Ke('[data-element-id="'+Lr(h.id)+'"]',u.dragGroup);d&&ce(d,{display:"none"});var m=r.addDragger(f,u.dragGroup);u.visualReplacements[a]=m,i.removeShape(f)}})}function l(u){var s=u.visualReplacements;J(s,function(p,a){var c=Ke('[data-element-id="'+Lr(a)+'"]',u.dragGroup);c&&ce(c,{display:"inline"}),p.remove(),s[a]&&delete s[a]})}e.on("shape.move.move",qL,function(u){var s=u.context,p=s.canExecute;s.visualReplacements||(s.visualReplacements={}),p&&p.replacements?o(s):l(s)})}Dd.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"];de(Dd,se);const eP={__depends__:[Bo],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Dd]};var tP=1250,Su=40,nP=20,iP=10,Yg=20,j0=["x","y"],rP=Math.abs;function G0(e){e.on(["connect.hover","connect.move","connect.end"],tP,function(t){var n=t.context,i=n.canExecute,r=n.start,o=n.hover,l=n.source,u=n.target;t.originalEvent&&mn(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&oP(t,o,cP(o)),o&&lP(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Sn(r),Me(o,["bpmn:Event","bpmn:Gateway"])&&Xg(t,Sn(o)),Me(o,["bpmn:Task","bpmn:SubProcess"])&&sP(t,o),N(l,"bpmn:BoundaryEvent")&&u===l.host&&aP(t)):V0(i,"bpmn:MessageFlow")?(N(r,"bpmn:Event")&&(n.connectionStart=Sn(r)),N(o,"bpmn:Event")&&Xg(t,Sn(o))):n.connectionStart=n.initialConnectionStart)})}G0.$inject=["eventBus"];function oP(e,t,n){j0.forEach(function(i){var r=z0(i,t);e[i]<t[i]+n?gt(e,i,t[i]+n):e[i]>t[i]+r-n&&gt(e,i,t[i]+r-n)})}function sP(e,t){var n=Sn(t);j0.forEach(function(i){uP(e,t,i)&&gt(e,i,n[i])})}function aP(e){var t=e.context,n=t.source,i=t.target;if(!pP(t)){var r=Sn(n),o=zt(r,i,-10),l=[];/top|bottom/.test(o)&&l.push("x"),/left|right/.test(o)&&l.push("y"),l.forEach(function(u){var s=e[u],p;rP(s-r[u])<Su&&(s>r[u]?p=r[u]+Su:p=r[u]-Su,gt(e,u,p))})}}function Xg(e,t){gt(e,"x",t.x),gt(e,"y",t.y)}function V0(e,t){return e&&e.type===t}function lP(e,t){return Ut(t,function(n){return V0(e,n)})}function z0(e,t){return e==="x"?t.width:t.height}function cP(e){return N(e,"bpmn:Task")?iP:nP}function uP(e,t,n){return e[n]>t[n]+Yg&&e[n]<t[n]+z0(n,t)-Yg}function pP(e){var t=e.hover,n=e.source;return t&&n&&t===n}function vr(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}vr.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]};vr.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)};vr.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)};vr.prototype.getSnapLocations=function(){return this._snapLocations};vr.prototype.setSnapLocations=function(e){this._snapLocations=e};vr.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Zc,n.initDefaults(this._defaultSnaps)),n};function Zc(){this._snapValues={}}Zc.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)};Zc.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&TR(e[n],r[n],i)};Zc.prototype.initDefaults=function(e){var t=this;J(e||{},function(n,i){J(n,function(r){t.add(i,r)})})};var hP=1250;function ui(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],hP,function(r){var o=r.context,l=o.shape,u=o.snapContext,s=o.target;if(!(r.originalEvent&&mn(r.originalEvent))&&!(yo(r)||!s)){var p=u.pointsForTarget(s);p.initialized||(p=i.addSnapTargetPoints(p,l,s),p.initialized=!0),n.snap(r,p)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}ui.$inject=["elementRegistry","eventBus","snapping"];ui.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new vr);var o;t.get(i.id)?o=Sn(i,e):o={x:e.x+Sn(i).x,y:e.y+Sn(i).y};var l={x:o.x-i.width/2,y:o.y-i.height/2},u={x:o.x+i.width/2,y:o.y+i.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Ve(i)||(r.setSnapOrigin("top-left",{x:l.x-e.x,y:l.y-e.y}),r.setSnapOrigin("bottom-right",{x:u.x-e.x,y:u.y-e.y})),r};ui.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return J(i,function(r){if(Ve(r)){Ve(t)&&e.add("mid",Sn(r));return}if(Qe(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);J(o,function(l){e.add("mid",l)});return}e.add("mid",Sn(r))}),!Se(t.x)||!Se(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Sn(t)),e};ui.prototype.getSnapTargets=function(e,t){return iw(t).filter(function(n){return!dP(n)})};function dP(e){return!!e.hidden}var Zg=1500;function Ho(e,t){t.invoke(ui,this),e.on(["create.move","create.end"],Zg,vP),e.on(["create.move","create.end","shape.move.move","shape.move.end"],Zg,function(n){var i=n.context,r=i.canExecute,o=i.target,l=r&&(r==="attach"||r.attach);l&&!yo(n)&&fP(n,o)})}de(Ho,ui);Ho.$inject=["eventBus","injector"];Ho.prototype.initSnap=function(e){var t=ui.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return J(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",Jg(o,i,e))}),J(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",Jg(o,i,e))}),N(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t};Ho.prototype.addSnapTargetPoints=function(e,t,n){ui.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);J(i,function(o){(gP(o)||mP([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",tw(o)),e.add("bottom-right",nw(o)))});var r=this._elementRegistry;return J(t.incoming,function(o){if(r.get(t.id)){Kg(i,o.source)||e.add("mid",xe(o.source));var l=o.waypoints[0];e.add(o.id+"-docking",l.original||l)}}),J(t.outgoing,function(o){if(r.get(t.id)){Kg(i,o.target)||e.add("mid",xe(o.target));var l=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",l.original||l)}}),N(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e};Ho.prototype.getSnapTargets=function(e,t){return ui.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!N(n,"bpmn:Lane")})};function fP(e,t){var n=ye(t),i=Rw(e,t),r=e.context,o=r.shape,l;o.parent?l={x:0,y:0}:l=xe(o),/top/.test(i)?gt(e,"y",n.top-l.y):/bottom/.test(i)&&gt(e,"y",n.bottom-l.y),/left/.test(i)?gt(e,"x",n.left-l.x):/right/.test(i)&&gt(e,"x",n.right-l.x)}function mP(e,t){return e.every(function(n){return N(n,t)})}function gP(e){return N(e,"bpmn:SubProcess")&&Ne(e)?!0:N(e,"bpmn:Participant")}function vP(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,o=n.bottom,l=n.left;(l&&l>=e.x||r&&r<=e.x)&&gt(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&gt(e,"y",e.y)}}function Kg(e,t){return e.indexOf(t)!==-1}function Jg(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var yP=1250;function ca(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],yP,function(i){var r=i.context,o=r.shape,l=o.parent,u=r.direction,s=r.snapContext;if(!(i.originalEvent&&mn(i.originalEvent))&&!yo(i)){var p=s.pointsForTarget(l);p.initialized||(p=n.addSnapTargetPoints(p,o,l,u),p.initialized=!0),_P(u)&&gt(i,"x",i.x),EP(u)&&gt(i,"y",i.y),t.snap(i,p)}}),e.on(["resize.cleanup"],function(){t.hide()})}ca.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new vr);var o=U0(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r};ca.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return J(r,function(o){e.add("corner",nw(o)),e.add("corner",tw(o))}),e.add("corner",U0(t,i)),e};ca.$inject=["eventBus","snapping"];ca.prototype.getSnapTargets=function(e,t){return iw(t).filter(function(n){return!bP(n,e)&&!Qe(n)&&!wP(n)&&!Ve(n)})};function U0(e,t){var n=xe(e),i=ye(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function bP(e,t){return e.host===t}function wP(e){return!!e.hidden}function _P(e){return e==="n"||e==="s"}function EP(e){return e==="e"||e==="w"}var xP=7,SP=1e3;function yr(e){this._canvas=e,this._asyncHide=vv(tn(this.hide,this),SP)}yr.$inject=["canvas"];yr.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),o={x:yo(e,"x"),y:yo(e,"y")};J(r,function(l){var u=i.getSnapOrigin(l),s={x:e.x+u.x,y:e.y+u.y};if(J(["x","y"],function(p){var a;o[p]||(a=t.snap(s,l,p,xP),a!==void 0&&(o[p]={value:a,originValue:a-u[p]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),J(["x","y"],function(l){var u=o[l];Mt(u)&&gt(e,l,u.originValue)})};yr.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=he("path");return ce(n,{d:"M0,0 L0,0"}),Fe(n).add("djs-snap-line"),me(t,n),{update:function(i){Se(i)?e==="horizontal"?ce(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):ce(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):ce(n,{display:"none"})}}};yr.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};yr.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()};yr.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]};yr.prototype.hide=function(){J(this._snapLines,function(e){e.update()})};const CP={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",ui],resizeSnapping:["type",ca],snapping:["type",yr]},AP={__depends__:[CP],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",G0],createMoveSnapping:["type",Ho]};function Ae(e,t,n,i){this._open=!1,this._results=[],this._eventMaps=[],this._canvas=e,this._eventBus=t,this._overlays=n,this._selection=i,this._container=tt(Ae.BOX_HTML),this._searchInput=Ke(Ae.INPUT_SELECTOR,this._container),this._resultsContainer=Ke(Ae.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy"],this.close,this)}Ae.$inject=["canvas","eventBus","overlays","selection"];Ae.prototype._bindEvents=function(){var e=this;function t(n,i,r,o){e._eventMaps.push({el:n,type:r,listener:cn.bind(n,i,r,o)})}t(document,"html","click",function(n){e.close()}),t(this._container,Ae.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Ae.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Ae.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Ae.INPUT_SELECTOR,"keydown",function(n){Lt("ArrowUp",n)&&n.preventDefault(),Lt("ArrowDown",n)&&n.preventDefault()}),t(this._container,Ae.INPUT_SELECTOR,"keyup",function(n){if(Lt("Escape",n))return e.close();if(Lt("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close()}if(Lt("ArrowUp",n))return e._scrollToDirection(!0);if(Lt("ArrowDown",n))return e._scrollToDirection();Lt(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})};Ae.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){cn.unbind(e.el,e.type,e.listener)})};Ae.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n.length){n.forEach(function(r){var o=r.element.id,l=t._createResultNode(r,o);t._results[o]={element:r.element,node:l}});var i=Ke(Ae.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}}};Ae.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}};Ae.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}};Ae.prototype._clearResults=function(){ql(this._resultsContainer),this._results=[],this._resetOverlay(),this._eventBus.fire("searchPad.cleared")};Ae.prototype._getCurrentResult=function(){return Ke(Ae.RESULT_SELECTED_SELECTOR,this._resultsContainer)};Ae.prototype._createResultNode=function(e,t){var n=tt(Ae.RESULT_HTML);return e.primaryTokens.length>0&&Qg(n,e.primaryTokens,Ae.RESULT_PRIMARY_HTML),Qg(n,e.secondaryTokens,Ae.RESULT_SECONDARY_HTML),Bt(n,Ae.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n};Ae.prototype.registerProvider=function(e){this._searchProvider=e};Ae.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,nt(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};Ae.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,nt(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))};Ae.prototype.toggle=function(){this.isOpen()?this.close():this.open()};Ae.prototype.isOpen=function(){return this._open};Ae.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){t&&nt(t).remove(Ae.RESULT_SELECTED_CLASS);var n=Bt(e,Ae.RESULT_ID_ATTRIBUTE),i=this._results[n].element;nt(e).add(Ae.RESULT_SELECTED_CLASS),this._resetOverlay(i),this._canvas.scrollToElement(i,{top:400}),this._selection.select(i),this._eventBus.fire("searchPad.preselected",i)}};Ae.prototype._select=function(e){var t=Bt(e,Ae.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this.close(),this._resetOverlay(),this._canvas.scrollToElement(n,{top:400}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)};Ae.prototype._resetOverlay=function(e){if(this._overlayId&&this._overlays.remove(this._overlayId),e){var t=vt(e),n=TP(t);this._overlayId=this._overlays.add(e,n)}};function TP(e){var t=6,n=e.width+t*2,i=e.height+t*2,r={width:n+"px",height:i+"px"},o=tt('<div class="'+Ae.OVERLAY_CLASS+'"></div>');return Nt(o,r),{position:{bottom:i-t,right:n-t},show:!0,html:o}}function Qg(e,t,n){var i=$P(t),r=tt(n);r.innerHTML=i,e.appendChild(r)}function $P(e){var t="";return e.forEach(function(n){n.matched?t+='<strong class="'+Ae.RESULT_HIGHLIGHT_CLASS+'">'+fl(n.matched)+"</strong>":t+=fl(n.normal)}),t!==""?t:null}Ae.CONTAINER_SELECTOR=".djs-search-container";Ae.INPUT_SELECTOR=".djs-search-input input";Ae.RESULTS_CONTAINER_SELECTOR=".djs-search-results";Ae.RESULT_SELECTOR=".djs-search-result";Ae.RESULT_SELECTED_CLASS="djs-search-result-selected";Ae.RESULT_SELECTED_SELECTOR="."+Ae.RESULT_SELECTED_CLASS;Ae.RESULT_ID_ATTRIBUTE="data-result-id";Ae.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";Ae.OVERLAY_CLASS="djs-search-overlay";Ae.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/></div><div class="djs-search-results"></div></div>';Ae.RESULT_HTML='<div class="djs-search-result"></div>';Ae.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>';Ae.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';const RP={__depends__:[hc,ai],searchPad:["type",Ae]};function Od(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}Od.$inject=["elementRegistry","searchPad","canvas"];Od.prototype.find=function(e){var t=this._canvas.getRootElement(),n=this._elementRegistry.filter(function(i){return!i.labelTarget});return n=Re(n,function(i){return i!==t}),n=Pt(n,function(i){return{primaryTokens:ev(Tn(i),e),secondaryTokens:ev(i.id,e),element:i}}),n=Re(n,function(i){return qg(i.primaryTokens)||qg(i.secondaryTokens)}),n=Gn(n,function(i){return Tn(i.element)+i.element.id}),n};function qg(e){var t=Re(e,function(n){return!!n.matched});return t.length>0}function ev(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.substr(0,r)}),n.push({matched:i.substr(r,t.length)}),t.length+r<e.length&&n.push({normal:i.substr(t.length+r,e.length)})):n.push({normal:i}),n}const MP={__depends__:[RP],__init__:["bpmnSearch"],bpmnSearch:["type",Od]};var kP='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function Hn(e){Bs.call(this,e)}de(Hn,Bs);Hn.Viewer=lr;Hn.NavigatedViewer=fs;Hn.prototype.createDiagram=function(){return this.importXML(kP)};Hn.prototype._interactionModules=[hb,gb,bb];Hn.prototype._modelingModules=[F$,Eh,cR,iR,RR,Th,DR,DI,Xw,zs,WI,GI,sL,cL,uL,mL,TL,v0,LL,HL,UL,QL,eP,$0,AP,MP];Hn.prototype._modules=[].concat(lr.prototype._modules,Hn.prototype._interactionModules,Hn.prototype._modelingModules);const IP=(e,t,n)=>{const i="currentUser";return n||(n="camunda"),`<?xml version="1.0" encoding="UTF-8"?>
    <bpmn2:definitions
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
    xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
    id="diagram_${e}"
    targetNamespace="${{activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n]}">
  <bpmn2:process id="Process_${e}" name="${t}" isExecutable="true">
    <bpmn2:startEvent id="Event_178kjur" name="开始">
      <bpmn2:outgoing>Flow_0girvld</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:userTask id="Activity_108ybh5" name="发起人审批" camunda:assignee="${i}" camunda:candidateUsers="" camunda:candidateGroups="" dataType="INITIATOR" text="流程发起人">
      <bpmn2:incoming>Flow_0girvld</bpmn2:incoming>
      <bpmn2:outgoing>Flow_1ni5oq0</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="Flow_0girvld" sourceRef="Event_178kjur" targetRef="Activity_108ybh5" />
    <bpmn2:exclusiveGateway id="Gateway_0finfu0">
      <bpmn2:incoming>Flow_0s1ezcy</bpmn2:incoming>
      <bpmn2:outgoing>Flow_02rgowj</bpmn2:outgoing>
      <bpmn2:outgoing>Flow_0uf3b6k</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="Flow_1ni5oq0" sourceRef="Activity_108ybh5" targetRef="Event_1fn5snq" />
    <bpmn2:userTask id="Activity_0skpz90" name="财务审批" camunda:candidateUsers="" camunda:candidateGroups="2" dataType="ROLES" text="">
      <bpmn2:incoming>Flow_02rgowj</bpmn2:incoming>
      <bpmn2:outgoing>Flow_08ruziy</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="Flow_02rgowj" name="money&#60;=500" sourceRef="Gateway_0finfu0" targetRef="Activity_0skpz90">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">&lt;=500</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:userTask id="Activity_1krg6rf" name="项目经理审批" camunda:candidateUsers="" camunda:candidateGroups="1" dataType="ROLES" text="">
      <bpmn2:incoming>Flow_0uf3b6k</bpmn2:incoming>
      <bpmn2:outgoing>Flow_086481q</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="Flow_0uf3b6k" name="money&#62;500" sourceRef="Gateway_0finfu0" targetRef="Activity_1krg6rf">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">&gt;500</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:endEvent id="Event_05xkxhs" name="结束">
      <bpmn2:incoming>Flow_08ruziy</bpmn2:incoming>
      <bpmn2:incoming>Flow_086481q</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:sequenceFlow id="Flow_08ruziy" sourceRef="Activity_0skpz90" targetRef="Event_05xkxhs" />
    <bpmn2:sequenceFlow id="Flow_086481q" sourceRef="Activity_1krg6rf" targetRef="Event_05xkxhs" />
    <bpmn2:intermediateCatchEvent id="Event_1fn5snq" name="定时等待5分钟">
      <bpmn2:incoming>Flow_1ni5oq0</bpmn2:incoming>
      <bpmn2:outgoing>Flow_0s1ezcy</bpmn2:outgoing>
      <bpmn2:timerEventDefinition id="TimerEventDefinition_1n3lqzc">
        <bpmn2:timeDuration xsi:type="bpmn2:tFormalExpression">PT5M</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:sequenceFlow id="Flow_0s1ezcy" sourceRef="Event_1fn5snq" targetRef="Gateway_0finfu0" />
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_${e}">
      <bpmndi:BPMNShape id="Event_178kjur_di" bpmnElement="Event_178kjur">
        <dc:Bounds x="182" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="189" y="275" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_108ybh5_di" bpmnElement="Activity_108ybh5">
        <dc:Bounds x="270" y="210" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_05xkxhs_di" bpmnElement="Event_05xkxhs">
        <dc:Bounds x="1022" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1029" y="275" width="23" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0skpz90_di" bpmnElement="Activity_0skpz90">
        <dc:Bounds x="720" y="210" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1krg6rf_di" bpmnElement="Activity_1krg6rf">
        <dc:Bounds x="720" y="370" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0finfu0_di" bpmnElement="Gateway_0finfu0" isMarkerVisible="true">
        <dc:Bounds x="555" y="225" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0qbuued_di" bpmnElement="Event_1fn5snq">
        <dc:Bounds x="442" y="232" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="425" y="275" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0girvld_di" bpmnElement="Flow_0girvld">
        <di:waypoint x="218" y="250" />
        <di:waypoint x="270" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ni5oq0_di" bpmnElement="Flow_1ni5oq0">
        <di:waypoint x="370" y="250" />
        <di:waypoint x="442" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_02rgowj_di" bpmnElement="Flow_02rgowj">
        <di:waypoint x="605" y="250" />
        <di:waypoint x="720" y="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="631" y="232" width="65" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0uf3b6k_di" bpmnElement="Flow_0uf3b6k">
        <di:waypoint x="580" y="275" />
        <di:waypoint x="580" y="410" />
        <di:waypoint x="720" y="410" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="510" y="375" width="59" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_08ruziy_di" bpmnElement="Flow_08ruziy">
        <di:waypoint x="820" y="250" />
        <di:waypoint x="1022" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_086481q_di" bpmnElement="Flow_086481q">
        <di:waypoint x="820" y="410" />
        <di:waypoint x="920" y="410" />
        <di:waypoint x="920" y="250" />
        <di:waypoint x="1022" y="250" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0s1ezcy_di" bpmnElement="Flow_0s1ezcy">
        <di:waypoint x="478" y="250" />
        <di:waypoint x="555" y="250" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>
`},LP=(e,t,n)=>(n||(n="camunda"),`
    <?xml version="1.0" encoding="UTF-8"?>
    <bpmn2:definitions
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL"
      xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
      xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
      xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
      xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd"
      id="diagram_${e}"
      targetNamespace="${{activiti:"http://activiti.org/bpmn",camunda:"http://bpmn.io/schema/bpmn",flowable:"http://flowable.org/bpmn"}[n]}">
    <bpmn2:process id="Process_${e}" name="${t}" isExecutable="true">
      </bpmn2:process>
      <bpmndi:BPMNDiagram id="BPMNDiagram_1">
        <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="${e}">
        </bpmndi:BPMNPlane>
      </bpmndi:BPMNDiagram>
    </bpmn2:definitions>
  `);var bp=function(){return bp=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},bp.apply(this,arguments)},Y0=10,PP=Y0*10,DP=.5,OP=.4,NP="#ccc",BP="djs-grid-line",co={width:1e5,height:1e5},X0=function(){function e(t,n,i){var r=this;this._config=bp({smallGridSpacing:Y0,gridSpacing:PP,gridLineStroke:DP,gridLineOpacity:OP,gridLineColor:NP},t||{}),this._canvas=n,this._visible=!1,i.on("diagram.init",function(){r._init(),r.toggle(!0)}),i.on("gridSnapping.toggle",function(o){var l=o.active;r.toggle(l),r._centerGridAroundViewbox()}),i.on("canvas.viewbox.changed",function(o){var l=o.viewbox;r._centerGridAroundViewbox(l)})}return e.prototype._init=function(){var t=Ke("defs",this._canvas._svg);t||(t=he("defs"),me(this._canvas._svg,t));var n=he("pattern"),i="djs-small-grid-pattern-"+tv();ce(n,{id:i,width:this._config.smallGridSpacing,height:this._config.smallGridSpacing,patternUnits:"userSpaceOnUse"});var r=he("path");ce(r,{d:"M ".concat(this._config.smallGridSpacing,",0 L 0,0 0,").concat(this._config.smallGridSpacing," ").concat(this._config.smallGridSpacing,",").concat(this._config.smallGridSpacing," Z"),fill:"none",stroke:this._config.gridLineColor,strokeWidth:this._config.gridLineStroke,opacity:this._config.gridLineOpacity}),me(n,r);var o=this._pattern=he("pattern"),l="djs-grid-pattern-"+tv();ce(o,{id:l,width:this._config.gridSpacing,height:this._config.gridSpacing,patternUnits:"userSpaceOnUse"});var u=he("path");ce(u,{d:"M ".concat(this._config.gridSpacing,",0 L 0,0 0,").concat(this._config.gridSpacing," ").concat(this._config.gridSpacing,",").concat(this._config.gridSpacing," Z"),fill:"none",stroke:this._config.gridLineColor,strokeWidth:this._config.gridLineStroke*2,opacity:this._config.gridLineOpacity*2}),me(o,u);var s=he("rect");ce(s,{width:this._config.gridSpacing,height:this._config.gridSpacing,fill:"url(#".concat(i,")")}),me(o,s),me(t,n),me(t,o);var p=this._gfx=he("rect");ce(p,{x:-(co.width/2),y:-(co.height/2),width:co.width,height:co.height,fill:"url(#".concat(l,")")})},e.prototype._centerGridAroundViewbox=function(t){t||(t=this._canvas.viewbox());var n=xe(t);ce(this._gfx,{x:-(co.width/2)+ps(n.x,this._config.gridSpacing,"round"),y:-(co.height/2)+ps(n.y,this._config.gridSpacing,"round")})},e.prototype.isVisible=function(){return this._visible},e.prototype.toggle=function(t){if(typeof t>"u"&&(t=!this._visible),t!==this._visible){var n=this._getParent();t?me(n,this._gfx):Vr(n),this._visible=t}},e.prototype._getParent=function(){return this._canvas.getLayer(BP,-2)},e}();X0.$inject=["config.gridLine","canvas","eventBus"];function tv(){return Math.round(Math.random()*1e6)}var nv={__init__:["gridLineBg"],gridLineBg:["type",X0]};var Fa=50,FP=new uc,iv={min:.2,max:4},WP=10,HP=.1,jP=250;function Qt(e,t,n,i,r){var o=this;this._canvas=i,this._elementRegistry=r,this._eventBus=n,this._injector=t,this._state={isOpen:void 0,isDragging:!1,initialDragPosition:null,offsetViewport:null,cachedViewbox:null,dragger:null,svgClientRect:null,parentClientRect:null,zoomDelta:0},this._minimapId=FP.next(),this._init(),this.toggle(e&&e.open||!1);function l(a){(!o._state._svgClientRect||Ha(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect());var c=Wa({x:a.x-o._state._svgClientRect.left,y:a.y-o._state._svgClientRect.top},o._svg,o._lastViewbox);Cu(c,o._canvas),o._update()}function u(a){return function(h){var f=Au(h);(!o._state._svgClientRect||Ha(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect()),a&&l(f);var d=Wa({x:f.x-o._state._svgClientRect.left,y:f.y-o._state._svgClientRect.top},o._svg,o._lastViewbox),m=i.viewbox(),g=VP(d,m),y=o._viewportDom.getBoundingClientRect(),w={x:f.x-y.left+1,y:f.y-y.top+1};Nn(o._state,{cachedViewbox:m,initialDragPosition:{x:f.x,y:f.y},isDragging:!0,offsetViewport:g,offsetViewportDom:w,viewportClientRect:o._viewport.getBoundingClientRect(),parentClientRect:o._parent.getBoundingClientRect()}),we.bind(document,"mousemove",s),we.bind(document,"mouseup",p)}}function s(a){var c=Au(a);if(o._state.isDragging){(!o._state._svgClientRect||Ha(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect());var h=o._state.offsetViewportDom,f=o._state.viewportClientRect,d=o._state.parentClientRect;Nn(o._viewportDom.style,{top:c.y-h.y-d.top+"px",left:c.x-h.x-d.left+"px"});var m=Z0(d,{top:c.y-h.y-d.top,left:c.x-h.x-d.left,width:f.width,height:f.height});Nn(o._overlay.style,{clipPath:m});var g=Wa({x:c.x-o._state._svgClientRect.left,y:c.y-o._state._svgClientRect.top},o._svg,o._lastViewbox);Cu({x:g.x-o._state.offsetViewport.x,y:g.y-o._state.offsetViewport.y},o._canvas)}}function p(a){var c=Au(a);o._state.isDragging&&(o._state.initialDragPosition.x===c.x&&o._state.initialDragPosition.y===c.y&&l(a),o._update(),Nn(o._state,{cachedViewbox:null,initialDragPosition:null,isDragging:!1,offsetViewport:null,offsetViewportDom:null}),we.unbind(document,"mousemove",s),we.unbind(document,"mouseup",p))}we.bind(this._viewportDom,"mousedown",u(!1)),we.bind(this._svg,"mousedown",u(!0)),we.bind(this._parent,"wheel",function(a){if(a.preventDefault(),a.stopPropagation(),!!a.ctrlKey&&((!o._state._svgClientRect||Ha(o._state._svgClientRect))&&(o._state._svgClientRect=o._svg.getBoundingClientRect()),!!XP(a,o._state._svgClientRect))){var c=a.deltaMode===0?.02:.32,h=Math.sqrt(Math.pow(a.deltaY,2)+Math.pow(a.deltaX,2))*ZP(a.deltaY)*-c;if(o._state.zoomDelta+=h,Math.abs(o._state.zoomDelta)>HP){var f=h>0?1:-1,d=Math.log(i.zoom())/Math.log(10),m=KP(iv,WP*2),g=Math.round(d/m)*m;g+=m*f;var y=Math.pow(10,g);i.zoom(JP(iv,y),w),o._state.zoomDelta=0;var w=Wa({x:a.clientX-o._state._svgClientRect.left,y:a.clientY-o._state._svgClientRect.top},o._svg,o._lastViewbox);Cu(w,o._canvas),o._update()}}}),we.bind(this._toggle,"click",function(a){a.preventDefault(),a.stopPropagation(),o.toggle()}),n.on(["shape.added","connection.added"],function(a){var c=a.element;o._addElement(c),o._update()}),n.on(["shape.removed","connection.removed"],function(a){var c=a.element;o._removeElement(c),o._update()}),n.on("elements.changed",jP,function(a){var c=a.elements;c.forEach(function(h){o._updateElement(h)}),o._update()}),n.on("element.updateId",function(a){var c=a.element,h=a.newId;o._updateElementId(c,h)}),n.on("canvas.viewbox.changed",function(){o._state.isDragging||o._update()}),n.on("canvas.resized",function(){document.body.contains(o._parent)&&(o._state.isDragging||o._update(),o._state._svgClientRect=o._svg.getBoundingClientRect())}),n.on(["root.set","plane.set"],function(a){o._clear();var c=a.element||a.plane.rootElement;c.children.forEach(function(h){o._addElement(h)}),o._update()})}Qt.$inject=["config.minimap","injector","eventBus","canvas","elementRegistry"];Qt.prototype._init=function(){var e=this._canvas,t=e.getContainer(),n=this._parent=document.createElement("div");nt(n).add("djs-minimap"),t.appendChild(n);var i=this._toggle=document.createElement("div");nt(i).add("toggle"),n.appendChild(i);var r=this._map=document.createElement("div");nt(r).add("map"),n.appendChild(r);var o=this._svg=he("svg");ce(o,{width:"100%",height:"100%"}),me(r,o);var l=this._elementsGroup=he("g");me(o,l);var u=this._viewportGroup=he("g");me(o,u);var s=this._viewport=he("rect");Fe(s).add("viewport"),me(u,s),we.bind(n,"mousedown",function(c){c.stopPropagation()});var p=this._viewportDom=document.createElement("div");nt(p).add("viewport-dom"),this._parent.appendChild(p);var a=this._overlay=document.createElement("div");nt(a).add("overlay"),this._parent.appendChild(a)};Qt.prototype._update=function(){var e=this._canvas.viewbox(),t=e.inner,n=e.outer;if(K0(e)){var i,r,o,l,u=n.width-t.width,s=n.height-t.height;t.width<n.width?(i=t.x-u/2,o=n.width,t.x+t.width<n.width&&(i=Math.min(0,t.x))):(i=t.x,o=t.width),t.height<n.height?(r=t.y-s/2,l=n.height,t.y+t.height<n.height&&(r=Math.min(0,t.y))):(r=t.y,l=t.height),i=i-Fa,r=r-Fa,o=o+Fa*2,l=l+Fa*2,this._lastViewbox={x:i,y:r,width:o,height:l},ce(this._svg,{viewBox:i+", "+r+", "+o+", "+l}),ce(this._viewport,{x:e.x,y:e.y,width:e.width,height:e.height});var p=this._state._parentClientRect=this._parent.getBoundingClientRect(),a=this._viewport.getBoundingClientRect(),c={top:a.top-p.top,left:a.left-p.left,width:a.width,height:a.height};Nn(this._viewportDom.style,{top:c.top+"px",left:c.left+"px",width:c.width+"px",height:c.height+"px"});var h=Z0(p,c);Nn(this._overlay.style,{clipPath:h})}};Qt.prototype.open=function(){Nn(this._state,{isOpen:!0}),nt(this._parent).add("open");var e=this._injector.get("translate",!1)||function(t){return t};Bt(this._toggle,"title",e("Close minimap")),this._update(),this._eventBus.fire("minimap.toggle",{open:!0})};Qt.prototype.close=function(){Nn(this._state,{isOpen:!1}),nt(this._parent).remove("open");var e=this._injector.get("translate",!1)||function(t){return t};Bt(this._toggle,"title",e("Open minimap")),this._eventBus.fire("minimap.toggle",{open:!1})};Qt.prototype.toggle=function(e){var t=this.isOpen();typeof e>"u"&&(e=!t),e!=t&&(e?this.open():this.close())};Qt.prototype.isOpen=function(){return this._state.isOpen};Qt.prototype._updateElement=function(e){try{e.parent!==void 0&&e.parent!==null&&(this._removeElement(e),this._addElement(e))}catch(t){console.warn("Minimap#_updateElement errored",t)}};Qt.prototype._updateElementId=function(e,t){try{var n=Ke("#"+Lr(this._prefixId(e.id)),this._elementsGroup);n&&(n.id=this._prefixId(t))}catch(i){console.warn("Minimap#_updateElementId errored",i)}};Qt.prototype.isOnActivePlane=function(e){var t=this._canvas;return t.findRoot?t.findRoot(e)===t.getRootElement():t.findPlane?t.findPlane(e)===t.getActivePlane():!0};Qt.prototype._addElement=function(e){var t=this;if(this._removeElement(e),!!this.isOnActivePlane(e)){var n,i,r,o=this._createElement(e),l=Ke("#"+Lr(this._prefixId(e.parent.id)),this._elementsGroup);if(o){var u=this._elementRegistry.getGraphics(e),s=this._elementRegistry.getGraphics(e.parent),p=UP(u,s);return p!=="undefined"?l?l.childNodes.length>p?ov(o,l,p):ov(o,l,l.childNodes.length-1):this._elementsGroup.appendChild(o):this._elementsGroup.appendChild(o),GP(e)?(n=e.parent,i=0,r=0,typeof n.x<"u"&&typeof n.y<"u"&&(i=-n.x,r=-n.y),ce(o,{transform:"translate("+i+" "+r+")"})):(i=e.x,r=e.y,l&&(n=e.parent,i-=n.x,r-=n.y),ce(o,{transform:"translate("+i+" "+r+")"})),e.children&&e.children.length&&e.children.forEach(function(a){t._addElement(a)}),o}}};Qt.prototype._removeElement=function(e){var t=this._svg.getElementById(this._prefixId(e.id));t&&ut(t)};Qt.prototype._createElement=function(e){var t=this._elementRegistry.getGraphics(e),n;if(t&&(n=zi(t),n)){var i=QP(Vp(n));return ce(i,{id:this._prefixId(e.id)}),i}};Qt.prototype._clear=function(){Vr(this._elementsGroup)};Qt.prototype._prefixId=function(e){return"djs-minimap-"+e+"-"+this._minimapId};function GP(e){return e.waypoints}function VP(e,t){var n={x:t.x+t.width/2,y:t.y+t.height/2};return{x:e.x-n.x,y:e.y-n.y}}function Wa(e,t,n){var i=t.getBoundingClientRect(),r=zP(n,i.width/i.height),o=rv(e.x,0,i.width,r.x,r.x+r.width),l=rv(e.y,0,i.height,r.y,r.y+r.height);return{x:o,y:l}}function Cu(e,t){var n=t.viewbox(),i=n.width,r=n.height;t.viewbox({x:e.x-i/2,y:e.y-r/2,width:i,height:r})}function zP(e,t){var n=e.width/e.height,i=Nn({},{x:e.x,y:e.y,width:e.width,height:e.height});if(n>t){var r=i.width*(1/t),o=i.y-(r-i.height)/2;Nn(i,{y:o,height:r})}else if(n<t){var l=i.height*t,u=i.x-(l-i.width)/2;Nn(i,{x:u,width:l})}return i}function rv(e,t,n,i,r){var o=n-t,l=r-i;return(e-t)*l/o+i}function UP(e,t){var n=Ke(".djs-children",t.parentNode);if(n){var i=[].slice.call(n.childNodes),r=-1;return i.forEach(function(o,l){Ke(".djs-element",o)===e&&(r=l)}),r}}function ov(e,t,n){var i=YP(t),r=[].slice.call(i.childNodes),o=r[n];o?t.insertBefore(e,o.nextSibling):t.appendChild(e)}function YP(e){var t=Ke(".children",e);return t||(t=he("g",{class:"children"}),me(e,t)),t}function Ha(e){return e.width===0&&e.height===0}function XP(e,t){return e.x>t.left&&e.x<t.left+t.width&&e.y>t.top&&e.y<t.top+t.height}var ZP=Math.sign||function(e){return e>=0?1:-1};function KP(e,t){var n=Math.log(e.min)/Math.log(10),i=Math.log(e.max)/Math.log(10),r=Math.abs(n)+Math.abs(i);return r/t}function JP(e,t){return Math.max(e.min,Math.min(e.max,t))}function Z0(e,t){var n=[Jn(t.left,t.top),Jn(t.left+t.width,t.top),Jn(t.left+t.width,t.top+t.height),Jn(t.left,t.top+t.height),Jn(t.left,e.height),Jn(e.width,e.height),Jn(e.width,0),Jn(0,0),Jn(0,e.height),Jn(t.left,e.height)].join(", ");return"polygon("+n+")"}function Jn(e,t){return e+"px "+t+"px"}function K0(e){return uE(e,function(t){return oE(t)?K0(t):sE(t)&&isFinite(t)})}function Au(e){return e.center?e.center:{x:e.clientX,y:e.clientY}}function QP(e){return vl("[id]",e).forEach(function(t){t.remove()}),e}var qP={__init__:["minimap"],minimap:["type",Qt]};function Nd(e,t,n,i,r,o,l,u){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=l,this._translate=u,e.registerProvider(this)}Nd.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];Nd.prototype.getPaletteEntries=function(e){const t={},n=this._create,i=this._elementFactory,r=this._spaceTool,o=this._lassoTool,l=this._handTool,u=this._globalConnect,s=this._translate;function p(h,f,d,m,g){function y(S){const b=i.createShape(Object.assign({type:h},g));g&&(b.businessObject.di.isExpanded=g.isExpanded),n.start(S,b)}const w=h.replace(/^bpmn:/,"");return{group:f,className:d,title:m||s("Create {type}",{type:w}),action:{dragstart:y,click:y}}}function a(h){const f=i.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),d=i.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:f});n.start(h,[f,d],{hints:{autoSelect:[f]}})}function c(h){n.start(h,i.createParticipantShape())}return Object.assign(t,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate the hand tool"),action:{click:function(h){l.activateHand(h)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate the lasso tool"),action:{click:function(h){o.activateSelection(h)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate the create/remove space tool"),action:{click:function(h){r.activateSelection(h)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate the global connect tool"),action:{click:function(h){u.start(h)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":p("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create StartEvent")),"create.intermediate-event":p("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create Intermediate/Boundary Event")),"create.end-event":p("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create EndEvent")),"create.exclusive-gateway":p("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-xor",s("Exclusive Gateway")),"create.paralle-gateway":p("bpmn:ParallelGateway","gateway","bpmn-icon-gateway-parallel",s("Parallel Gateway")),"create.task":p("bpmn:Task","activity","bpmn-icon-task",s("Create Task")),"create.user-task":p("bpmn:UserTask","activity","bpmn-icon-user-task",s("Create User Task")),"create.service-task":p("bpmn:ServiceTask","activity","bpmn-icon-service-task",s("Create Service Task")),"create.script-task":p("bpmn:ScriptTask","activity","bpmn-icon-script-task",s("Create Script Task")),"create.receive-task":p("bpmn:ReceiveTask","activity","bpmn-icon-receive-task",s("Create Receive Task")),"create.data-object":p("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create DataObjectReference")),"create.data-store":p("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create DataStoreReference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded SubProcess"),action:{dragstart:a,click:a}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create Pool/Participant"),action:{dragstart:c,click:c}},"create.group":p("bpmn:Group","artifact","bpmn-icon-group",s("Create Group"))}),t};const eD={__depends__:[O0,zs,e0,B0,W0,H0,Ws],__init__:["paletteProvider"],paletteProvider:["type",Nd]};function Bd(e,t,n,i,r,o,l,u,s,p,a,c){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=l,this._create=u,this._popupMenu=s,this._canvas=p,this._rules=a,this._translate=c,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(h){const f=h.context,d=f.shape;if(!go(h)||!i.isOpen(d))return;const m=i.getEntries(d);m.replace&&m.replace.action.click(h,d)})}Bd.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];Bd.prototype.getContextPadEntries=function(e){const t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,l=this._popupMenu,u=this._canvas,s=this._autoPlace,p=this._translate,a={},c=e.businessObject;function h(y,w,S,b){typeof S!="string"&&(b=S,S=p("Append {type}",{type:y.replace(/^bpmn:/,"")}));function _(E,x){const T=i.createShape(Object.assign({type:y},b));o.start(E,T,{source:x})}return{group:"model",className:w,title:S,action:{dragstart:_,click:s?function(E,x){const T=i.createShape(Object.assign({type:y},b));s.append(x,T)}:_}}}function f(y){n.removeElements([e])}function d(y,w){r.start(y,w)}function m(y){const S=u.getContainer(),b=t.getPad(y).html,_=S.getBoundingClientRect(),v=b.getBoundingClientRect(),E=v.top-_.top;return{x:v.left-_.left,y:E+v.height+5}}function g(y){return function(w,S){n.splitLane(S,y),t.open(S,!0)}}if(Me(c,["bpmn:Lane","bpmn:Participant"])&&Ne(c)){const y=Mi(e);Object.assign(a,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:p("Add Lane above"),action:{click:function(w,S){n.addLane(S,"top")}}}}),y.length<2&&(e.height>=120&&Object.assign(a,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:p("Divide into two Lanes"),action:{click:g(2)}}}),e.height>=180&&Object.assign(a,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:p("Divide into three Lanes"),action:{click:g(3)}}})),Object.assign(a,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:p("Add Lane below"),action:{click:function(w,S){n.addLane(S,"bottom")}}}})}return e.type==="bpmn:SequenceFlow"?Object.assign(a,{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Remove"),action:{click:f}}}):(Object.assign(a,{"append.end-event":h("bpmn:EndEvent","bpmn-icon-end-event-none",p("Append EndEvent")),"append.append-task":h("bpmn:UserTask","bpmn-icon-user-task",p("Append Task")),"append.intermediate-event":h("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",p("Append Intermediate/Boundary Event")),"append.exclusive-gateway":h("bpmn:ExclusiveGateway","bpmn-icon-gateway-xor",p("Append Exclusive Gateway")),"append.parallel-gateway":h("bpmn:ParallelGateway","bpmn-icon-gateway-parallel",p("Append Parallel Gateway"))}),!l.isEmpty(e,"bpmn-replace")&&e.type.indexOf("Event")>-1&&Object.assign(a,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:p("Change type"),action:{click:function(y,w){const S=Object.assign(m(w),{cursor:{x:y.x,y:y.y}});l.open(w,"bpmn-replace",S)}}}}),Object.assign(a,{delete:{group:"edit",className:"bpmn-icon-trash",title:p("Remove"),action:{click:f}},connect:{group:"connect",className:"bpmn-icon-connection-multi",title:p("Connect using Association"),action:{click:d,dragstart:d}}})),a};const tD={__init__:["contextPadProvider"],contextPadProvider:["type",Bd]},nD="Camunda",iD="http://camunda.org/schema/1.0/bpmn",rD="camunda",oD={tagAlias:"lowerCase"},sD=[],aD=[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","camunda:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"camunda:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"},{name:"modelerTemplateVersion",isAttr:!0,type:"Integer"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"processCategory",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["camunda:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","camunda:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","camunda:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["camunda:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0},{name:"id",type:"String",isAttr:!0},{name:"eventDefinitions",type:"bpmn:TimerEventDefinition",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormData",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"fields",type:"FormField",isMany:!0},{name:"businessKey",type:"String",isAttr:!0}]},{name:"FormField",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvents",isAttr:!0,type:"String"}]}],lD=[],cD={name:nD,uri:iD,prefix:rD,xml:oD,associations:sD,types:aD,emumerations:lD},uD="Activiti",pD="http://activiti.org/bpmn",hD="activiti",dD={tagAlias:"lowerCase"},fD=[],mD=[{name:"Definitions",isAbstract:!0,extends:["bpmn:Definitions"],properties:[{name:"diagramRelationId",isAttr:!0,type:"String"}]},{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","activiti:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"activiti:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"processCategory",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0},{name:"executionListener",isAbstract:!0,type:"Expression"}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"multiinstance_type",superClass:["Element"]},{name:"multiinstance_condition",superClass:["Element"]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"assignee",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"},{name:"multiinstance_condition",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["activiti:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","activiti:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["activiti:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","activiti:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["activiti:ServiceTaskLike","activiti:ExecutionListener","activiti:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["activiti:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["activiti:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormProperty",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ExtensionElements",properties:[{name:"operationList",type:"String",isAttr:!0}]},{name:"OperationList",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"operationList",type:"FormOperation",isMany:!0}]},{name:"FormOperation",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"showOrder",type:"String",isAttr:!0},{name:"multiSignAssignee",type:"String",isAttr:!0}]},{name:"VariableList",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"variableList",type:"FormVariable",isMany:!0}]},{name:"FormVariable",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0}]},{name:"DeptPostList",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"deptPostList",type:"DeptPost",isMany:!0}]},{name:"DeptPost",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"postId",type:"String",isAttr:!0},{name:"deptPostId",type:"String",isAttr:!0}]},{name:"UserCandidateGroups",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"type",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"CustomCondition",superClass:["Element"],meta:{allowedIn:["bpmn:SequenceFlow"]},properties:[{name:"type",type:"String",isAttr:!0},{name:"operationType",type:"String",isAttr:!0},{name:"parallelRefuse",type:"Boolean",isAttr:!0,default:!1}]},{name:"AssigneeList",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"assigneeList",type:"Assignee",isMany:!0},{name:"type",type:"String",isAttr:!0}]},{name:"Assignee",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvent",isAttr:!0,type:"String"}]}],gD=[],vD={name:uD,uri:pD,prefix:hD,xml:dD,associations:fD,types:mD,emumerations:gD},yD="Flowable",bD="http://flowable.org/bpmn",wD="flowable",_D={tagAlias:"lowerCase"},ED=[],xD=[{name:"InOutBinding",superClass:["Element"],isAbstract:!0,properties:[{name:"source",isAttr:!0,type:"String"},{name:"sourceExpression",isAttr:!0,type:"String"},{name:"target",isAttr:!0,type:"String"},{name:"businessKey",isAttr:!0,type:"String"},{name:"local",isAttr:!0,type:"Boolean",default:!1},{name:"variables",isAttr:!0,type:"String"}]},{name:"In",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"Out",superClass:["InOutBinding"],meta:{allowedIn:["bpmn:CallActivity"]}},{name:"AsyncCapable",isAbstract:!0,extends:["bpmn:Activity","bpmn:Gateway","bpmn:Event"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1},{name:"asyncBefore",isAttr:!0,type:"Boolean",default:!1},{name:"asyncAfter",isAttr:!0,type:"Boolean",default:!1},{name:"exclusive",isAttr:!0,type:"Boolean",default:!0}]},{name:"JobPriorized",isAbstract:!0,extends:["bpmn:Process","flowable:AsyncCapable"],properties:[{name:"jobPriority",isAttr:!0,type:"String"}]},{name:"SignalEventDefinition",isAbstract:!0,extends:["bpmn:SignalEventDefinition"],properties:[{name:"async",isAttr:!0,type:"Boolean",default:!1}]},{name:"ErrorEventDefinition",isAbstract:!0,extends:["bpmn:ErrorEventDefinition"],properties:[{name:"errorCodeVariable",isAttr:!0,type:"String"},{name:"errorMessageVariable",isAttr:!0,type:"String"}]},{name:"Error",isAbstract:!0,extends:["bpmn:Error"],properties:[{name:"flowable:errorMessage",isAttr:!0,type:"String"}]},{name:"PotentialStarter",superClass:["Element"],properties:[{name:"resourceAssignmentExpression",type:"bpmn:ResourceAssignmentExpression"}]},{name:"FormSupported",isAbstract:!0,extends:["bpmn:StartEvent","bpmn:UserTask"],properties:[{name:"formHandlerClass",isAttr:!0,type:"String"},{name:"formKey",isAttr:!0,type:"String"},{name:"localScope",isAttr:!0,type:"Boolean",default:!1}]},{name:"TemplateSupported",isAbstract:!0,extends:["bpmn:Process","bpmn:FlowElement"],properties:[{name:"modelerTemplate",isAttr:!0,type:"String"}]},{name:"Initiator",isAbstract:!0,extends:["bpmn:StartEvent"],properties:[{name:"initiator",isAttr:!0,type:"String"}]},{name:"ScriptTask",isAbstract:!0,extends:["bpmn:ScriptTask"],properties:[{name:"resultVariable",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"}]},{name:"Process",isAbstract:!0,extends:["bpmn:Process"],properties:[{name:"candidateStarterGroups",isAttr:!0,type:"String"},{name:"candidateStarterUsers",isAttr:!0,type:"String"},{name:"processCategory",isAttr:!0,type:"String"},{name:"versionTag",isAttr:!0,type:"String"},{name:"historyTimeToLive",isAttr:!0,type:"String"},{name:"isStartableInTasklist",isAttr:!0,type:"Boolean",default:!0}]},{name:"EscalationEventDefinition",isAbstract:!0,extends:["bpmn:EscalationEventDefinition"],properties:[{name:"escalationCodeVariable",isAttr:!0,type:"String"}]},{name:"xcField",isAbstract:!0,properties:[{name:"xcString",isMany:!0,type:"Element"},{name:"name",isAttr:!0,type:"String"}]},{name:"xcString",isAbstract:!0,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",isAbstract:!0,extends:["bpmn:FormalExpression"],properties:[{name:"resource",isAttr:!0,type:"String"}]},{name:"Assignable",extends:["bpmn:UserTask"],properties:[{name:"dataType",isAttr:!0,type:"String"},{name:"assignee",isAttr:!0,type:"String"},{name:"xcformKey",isAttr:!0,type:"String"},{name:"candidateUsers",isAttr:!0,type:"String"},{name:"candidateGroups",isAttr:!0,type:"String"},{name:"text",isAttr:!0,type:"String"},{name:"dueDate",isAttr:!0,type:"String"},{name:"followUpDate",isAttr:!0,type:"String"},{name:"priority",isAttr:!0,type:"String"}]},{name:"CallActivity",extends:["bpmn:CallActivity"],properties:[{name:"calledElementBinding",isAttr:!0,type:"String",default:"latest"},{name:"calledElementVersion",isAttr:!0,type:"String"},{name:"calledElementVersionTag",isAttr:!0,type:"String"},{name:"calledElementTenantId",isAttr:!0,type:"String"},{name:"caseRef",isAttr:!0,type:"String"},{name:"caseBinding",isAttr:!0,type:"String",default:"latest"},{name:"caseVersion",isAttr:!0,type:"String"},{name:"caseTenantId",isAttr:!0,type:"String"},{name:"variableMappingClass",isAttr:!0,type:"String"},{name:"variableMappingDelegateExpression",isAttr:!0,type:"String"}]},{name:"ServiceTaskLike",extends:["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"resultVariable",isAttr:!0,type:"String"}]},{name:"DmnCapable",extends:["bpmn:BusinessRuleTask"],properties:[{name:"decisionRef",isAttr:!0,type:"String"},{name:"decisionRefBinding",isAttr:!0,type:"String",default:"latest"},{name:"decisionRefVersion",isAttr:!0,type:"String"},{name:"mapDecisionResult",isAttr:!0,type:"String",default:"resultList"},{name:"decisionRefTenantId",isAttr:!0,type:"String"}]},{name:"ExternalCapable",extends:["flowable:ServiceTaskLike"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"topic",isAttr:!0,type:"String"}]},{name:"TaskPriorized",extends:["bpmn:Process","flowable:ExternalCapable"],properties:[{name:"taskPriority",isAttr:!0,type:"String"}]},{name:"Properties",superClass:["Element"],meta:{allowedIn:["*"]},properties:[{name:"values",type:"Property",isMany:!0}]},{name:"Property",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"Connector",superClass:["Element"],meta:{allowedIn:["flowable:ServiceTaskLike"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"}]},{name:"InputOutput",superClass:["Element"],meta:{allowedIn:["bpmn:FlowNode","flowable:Connector"]},properties:[{name:"inputOutput",type:"InputOutput"},{name:"connectorId",type:"String"},{name:"inputParameters",isMany:!0,type:"InputParameter"},{name:"outputParameters",isMany:!0,type:"OutputParameter"}]},{name:"InputOutputParameter",properties:[{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"InputOutputParameterDefinition",isAbstract:!0},{name:"List",superClass:["InputOutputParameterDefinition"],properties:[{name:"items",isMany:!0,type:"InputOutputParameterDefinition"}]},{name:"Map",superClass:["InputOutputParameterDefinition"],properties:[{name:"entries",isMany:!0,type:"Entry"}]},{name:"Entry",properties:[{name:"key",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"},{name:"definition",type:"InputOutputParameterDefinition"}]},{name:"Value",superClass:["InputOutputParameterDefinition"],properties:[{name:"id",isAttr:!0,type:"String"},{name:"name",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Script",superClass:["InputOutputParameterDefinition"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"resource",isAttr:!0,type:"String"},{name:"value",isBody:!0,type:"String"}]},{name:"Field",superClass:["Element"],meta:{allowedIn:["flowable:ServiceTaskLike","flowable:ExecutionListener","flowable:TaskListener"]},properties:[{name:"name",isAttr:!0,type:"String"},{name:"expression",type:"String"},{name:"stringValue",isAttr:!0,type:"String"},{name:"string",type:"String"}]},{name:"InputParameter",superClass:["InputOutputParameter"]},{name:"OutputParameter",superClass:["InputOutputParameter"]},{name:"Collectable",isAbstract:!0,extends:["bpmn:MultiInstanceLoopCharacteristics"],superClass:["flowable:AsyncCapable"],properties:[{name:"collection",isAttr:!0,type:"String"},{name:"elementVariable",isAttr:!0,type:"String"}]},{name:"FailedJobRetryTimeCycle",superClass:["Element"],meta:{allowedIn:["flowable:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},properties:[{name:"body",isBody:!0,type:"String"}]},{name:"ExecutionListener",superClass:["Element"],meta:{allowedIn:["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"TaskListener",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"expression",isAttr:!0,type:"String"},{name:"class",isAttr:!0,type:"String"},{name:"delegateExpression",isAttr:!0,type:"String"},{name:"event",isAttr:!0,type:"String"},{name:"script",type:"Script"},{name:"fields",type:"Field",isMany:!0}]},{name:"FormProperty",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"id",type:"String",isAttr:!0},{name:"name",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"required",type:"String",isAttr:!0},{name:"readable",type:"String",isAttr:!0},{name:"writable",type:"String",isAttr:!0},{name:"variable",type:"String",isAttr:!0},{name:"expression",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"default",type:"String",isAttr:!0},{name:"values",type:"Value",isMany:!0}]},{name:"FormProperty",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"datePattern",type:"String",isAttr:!0},{name:"defaultValue",type:"String",isAttr:!0},{name:"properties",type:"Properties"},{name:"validation",type:"Validation"},{name:"values",type:"Value",isMany:!0}]},{name:"Validation",superClass:["Element"],properties:[{name:"constraints",type:"Constraint",isMany:!0}]},{name:"Constraint",superClass:["Element"],properties:[{name:"name",type:"String",isAttr:!0},{name:"config",type:"String",isAttr:!0}]},{name:"ExtensionElements",properties:[{name:"operationList",type:"String",isAttr:!0}]},{name:"OperationList",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"operationList",type:"FormOperation",isMany:!0}]},{name:"FormOperation",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"label",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"showOrder",type:"String",isAttr:!0},{name:"multiSignAssignee",type:"String",isAttr:!0}]},{name:"VariableList",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"variableList",type:"FormVariable",isMany:!0}]},{name:"FormVariable",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0}]},{name:"DeptPostList",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"deptPostList",type:"DeptPost",isMany:!0}]},{name:"DeptPost",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0},{name:"type",type:"String",isAttr:!0},{name:"postId",type:"String",isAttr:!0},{name:"deptPostId",type:"String",isAttr:!0}]},{name:"UserCandidateGroups",superClass:["Element"],meta:{allowedIn:["bpmn:UserTask"]},properties:[{name:"type",type:"String",isAttr:!0},{name:"value",type:"String",isAttr:!0}]},{name:"CustomCondition",superClass:["Element"],meta:{allowedIn:["bpmn:SequenceFlow"]},properties:[{name:"type",type:"String",isAttr:!0},{name:"operationType",type:"String",isAttr:!0},{name:"parallelRefuse",type:"Boolean",isAttr:!0,default:!1}]},{name:"AssigneeList",superClass:["Element"],meta:{allowedIn:["bpmn:StartEvent","bpmn:UserTask"]},properties:[{name:"assigneeList",type:"Assignee",isMany:!0},{name:"type",type:"String",isAttr:!0}]},{name:"Assignee",superClass:["Element"],properties:[{name:"id",type:"String",isAttr:!0}]},{name:"ConditionalEventDefinition",isAbstract:!0,extends:["bpmn:ConditionalEventDefinition"],properties:[{name:"variableName",isAttr:!0,type:"String"},{name:"variableEvent",isAttr:!0,type:"String"}]}],SD=[],CD={name:yD,uri:bD,prefix:wD,xml:_D,associations:ED,types:xD,emumerations:SD},AD="*";function jo(e){const t=this;e.on("moddleCopy.canCopyProperty",function(n){const i=n.property,r=n.parent;return t.canCopyProperty(i,r)})}jo.$inject=["eventBus"];jo.prototype.canCopyProperty=function(e,t){if(Mt(e)&&!TD(e,t)||wo(e,"camunda:InputOutput")&&!this.canHostInputOutput(t)||J0(e,["camunda:Connector","camunda:Field"])&&!this.canHostConnector(t)||wo(e,"camunda:In")&&!this.canHostIn(t))return!1};jo.prototype.canHostInputOutput=function(e){if(Bn(e,"camunda:Connector"))return!0;const n=Bn(e,"bpmn:FlowNode");return!(!n||J0(n,["bpmn:StartEvent","bpmn:Gateway","bpmn:BoundaryEvent"])||wo(n,"bpmn:SubProcess")&&n.get("triggeredByEvent"))};jo.prototype.canHostConnector=function(e){const t=Bn(e,"camunda:ServiceTaskLike");return wo(t,"bpmn:MessageEventDefinition")?Bn(e,"bpmn:IntermediateThrowEvent")||Bn(e,"bpmn:EndEvent"):!0};jo.prototype.canHostIn=function(e){return Bn(e,"bpmn:CallActivity")?!0:Bn(e,"bpmn:SignalEventDefinition")?Bn(e,"bpmn:IntermediateThrowEvent")||Bn(e,"bpmn:EndEvent"):!0};function wo(e,t){return e&&yt(e.$instanceOf)&&e.$instanceOf(t)}function J0(e,t){return Ut(t,function(n){return wo(e,n)})}function Bn(e,t){if(!t)return e.$parent;if(wo(e,t))return e;if(e.$parent)return Bn(e.$parent,t)}function TD(e,t){const n=e.$type&&e.$model.getTypeDescriptor(e.$type),i=n&&n.meta&&n.meta.allowedIn;return!i||$D(i)?!0:Ut(i,function(r){return Bn(t,r)})}function $D(e){return e.indexOf(AD)!==-1}const RD={__init__:["camundaModdleExtension"],camundaModdleExtension:["type",jo]},MD={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function Fd(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}function kD(e){return e&&e.length}function ja(e,t){return kD(e)&&Ut(e,function(n){return Fd(n,t)})}function ID(e,t){return Ut(t,function(n){return Fd(e,n)})}function Tu(e,t,n){const i=t.name,r=MD[i.replace(/activiti:/,"")];return i===e&&ID(n,r)}function Wd(e){e.on("property.clone",function(t){const n=t.newElement,i=t.propertyDescriptor;this.canCloneProperty(n,i)},this)}Wd.$inject=["eventBus"];Wd.prototype.canCloneProperty=function(e,t){if(Tu("activiti:FailedJobRetryTimeCycle",t,e))return ja(e.eventDefinitions,"bpmn:TimerEventDefinition")||ja(e.eventDefinitions,"bpmn:SignalEventDefinition")||Fd(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics");if(Tu("activiti:Connector",t,e)||Tu("activiti:Field",t,e))return ja(e.eventDefinitions,"bpmn:MessageEventDefinition")};const LD={__init__:["ActivitiModdleExtension"],ActivitiModdleExtension:["type",Wd]},PD={FailedJobRetryTimeCycle:["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent","bpmn:Activity"],Connector:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"],Field:["bpmn:EndEvent","bpmn:IntermediateThrowEvent"]};function Hd(e,t){return e&&typeof e.$instanceOf=="function"&&e.$instanceOf(t)}function DD(e){return e&&e.length}function Ga(e,t){return DD(e)&&Ut(e,function(n){return Hd(n,t)})}function OD(e,t){return Ut(t,function(n){return Hd(e,n)})}function $u(e,t,n){const i=t.name,r=PD[i.replace(/flowable:/,"")];return i===e&&OD(n,r)}function jd(e){e.on("property.clone",function(t){const n=t.newElement,i=t.propertyDescriptor;this.canCloneProperty(n,i)},this)}jd.$inject=["eventBus"];jd.prototype.canCloneProperty=function(e,t){if($u("flowable:FailedJobRetryTimeCycle",t,e))return Ga(e.eventDefinitions,"bpmn:TimerEventDefinition")||Ga(e.eventDefinitions,"bpmn:SignalEventDefinition")||Hd(e.loopCharacteristics,"bpmn:MultiInstanceLoopCharacteristics");if($u("flowable:Connector",t,e)||$u("flowable:Field",t,e))return Ga(e.eventDefinitions,"bpmn:MessageEventDefinition")};const ND={__init__:["FlowableModdleExtension"],FlowableModdleExtension:["type",jd]};var Q0={exports:{}};(function(e,t){(function(){var n="ace",i=function(){return this}();!i&&typeof window<"u"&&(i=window);var r=function(a,c,h){if(typeof a!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(h=c),r.modules[a]||(r.payloads[a]=h,r.modules[a]=null)};r.modules={},r.payloads={};var o=function(a,c,h){if(typeof c=="string"){var f=s(a,c);if(f!=null)return h&&h(),f}else if(Object.prototype.toString.call(c)==="[object Array]"){for(var d=[],m=0,g=c.length;m<g;++m){var y=s(a,c[m]);if(y==null&&l.original)return;d.push(y)}return h&&h.apply(null,d)||!0}},l=function(a,c){var h=o("",a,c);return h==null&&l.original?l.original.apply(this,arguments):h},u=function(a,c){if(c.indexOf("!")!==-1){var h=c.split("!");return u(a,h[0])+"!"+u(a,h[1])}if(c.charAt(0)=="."){var f=a.split("/").slice(0,-1).join("/");for(c=f+"/"+c;c.indexOf(".")!==-1&&d!=c;){var d=c;c=c.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return c},s=function(a,c){c=u(a,c);var h=r.modules[c];if(!h){if(h=r.payloads[c],typeof h=="function"){var f={},d={id:c,uri:"",exports:f,packaged:!0},m=function(y,w){return o(c,y,w)},g=h(m,f,d);f=g||d.exports,r.modules[c]=f,delete r.payloads[c]}h=r.modules[c]=f||h}return h};function p(a){var c=i;a&&(i[a]||(i[a]={}),c=i[a]),(!c.define||!c.define.packaged)&&(r.original=c.define,c.define=r,c.define.packaged=!0),(!c.require||!c.require.packaged)&&(l.original=c.require,c.require=l,c.require.packaged=!0)}p(n)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(n,i,r){function o(l,u,s){Object.defineProperty(l,u,{value:s,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||o(String.prototype,"startsWith",function(l,u){return u=u||0,this.lastIndexOf(l,u)===u}),String.prototype.endsWith||o(String.prototype,"endsWith",function(l,u){var s=this;(u===void 0||u>s.length)&&(u=s.length),u-=l.length;var p=s.indexOf(l,u);return p!==-1&&p===u}),String.prototype.repeat||o(String.prototype,"repeat",function(l){for(var u="",s=this;l>0;)l&1&&(u+=s),(l>>=1)&&(s+=s);return u}),String.prototype.includes||o(String.prototype,"includes",function(l,u){return this.indexOf(l,u)!=-1}),Object.assign||(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(l),s=1;s<arguments.length;s++){var p=arguments[s];p!=null&&Object.keys(p).forEach(function(a){u[a]=p[a]})}return u}),Object.values||(Object.values=function(l){return Object.keys(l).map(function(u){return l[u]})}),Array.prototype.find||o(Array.prototype,"find",function(l){for(var u=this.length,s=arguments[1],p=0;p<u;p++){var a=this[p];if(l.call(s,a,p,this))return a}}),Array.prototype.findIndex||o(Array.prototype,"findIndex",function(l){for(var u=this.length,s=arguments[1],p=0;p<u;p++){var a=this[p];if(l.call(s,a,p,this))return p}}),Array.prototype.includes||o(Array.prototype,"includes",function(l,u){return this.indexOf(l,u)!=-1}),Array.prototype.fill||o(Array.prototype,"fill",function(l){for(var u=this,s=u.length>>>0,p=arguments[1],a=p>>0,c=a<0?Math.max(s+a,0):Math.min(a,s),h=arguments[2],f=h===void 0?s:h>>0,d=f<0?Math.max(s+f,0):Math.min(f,s);c<d;)u[c]=l,c++;return u}),Array.of||o(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(n,i,r){n("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(n,i,r){i.deepCopy=function o(l){if(typeof l!="object"||!l)return l;var u;if(Array.isArray(l)){u=[];for(var s=0;s<l.length;s++)u[s]=o(l[s]);return u}if(Object.prototype.toString.call(l)!=="[object Object]")return l;u={};for(var s in l)u[s]=o(l[s]);return u}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(n,i,r){i.last=function(u){return u[u.length-1]},i.stringReverse=function(u){return u.split("").reverse().join("")},i.stringRepeat=function(u,s){for(var p="";s>0;)s&1&&(p+=u),(s>>=1)&&(u+=u);return p};var o=/^\s\s*/,l=/\s\s*$/;i.stringTrimLeft=function(u){return u.replace(o,"")},i.stringTrimRight=function(u){return u.replace(l,"")},i.copyObject=function(u){var s={};for(var p in u)s[p]=u[p];return s},i.copyArray=function(u){for(var s=[],p=0,a=u.length;p<a;p++)u[p]&&typeof u[p]=="object"?s[p]=this.copyObject(u[p]):s[p]=u[p];return s},i.deepCopy=n("./deep_copy").deepCopy,i.arrayToMap=function(u){for(var s={},p=0;p<u.length;p++)s[u[p]]=1;return s},i.createMap=function(u){var s=Object.create(null);for(var p in u)s[p]=u[p];return s},i.arrayRemove=function(u,s){for(var p=0;p<=u.length;p++)s===u[p]&&u.splice(p,1)},i.escapeRegExp=function(u){return u.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},i.escapeHTML=function(u){return(""+u).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},i.getMatchOffsets=function(u,s){var p=[];return u.replace(s,function(a){p.push({offset:arguments[arguments.length-2],length:a.length})}),p},i.deferredCall=function(u){var s=null,p=function(){s=null,u()},a=function(c){return a.cancel(),s=setTimeout(p,c||0),a};return a.schedule=a,a.call=function(){return this.cancel(),u(),a},a.cancel=function(){return clearTimeout(s),s=null,a},a.isPending=function(){return s},a},i.delayedCall=function(u,s){var p=null,a=function(){p=null,u()},c=function(h){p==null&&(p=setTimeout(a,h||s))};return c.delay=function(h){p&&clearTimeout(p),p=setTimeout(a,h||s)},c.schedule=c,c.call=function(){this.cancel(),u()},c.cancel=function(){p&&clearTimeout(p),p=null},c.isPending=function(){return p},c},i.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},i.skipEmptyMatch=function(u,s,p){return p&&u.codePointAt(s)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(n,i,r){i.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},i.getOS=function(){return i.isMac?i.OS.MAC:i.isLinux?i.OS.LINUX:i.OS.WINDOWS};var o=typeof navigator=="object"?navigator:{},l=(/mac|win|linux/i.exec(o.platform)||["other"])[0].toLowerCase(),u=o.userAgent||"",s=o.appName||"";i.isWin=l=="win",i.isMac=l=="mac",i.isLinux=l=="linux",i.isIE=s=="Microsoft Internet Explorer"||s.indexOf("MSAppHost")>=0?parseFloat((u.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((u.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),i.isOldIE=i.isIE&&i.isIE<9,i.isGecko=i.isMozilla=u.match(/ Gecko\/\d+/),i.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",i.isWebKit=parseFloat(u.split("WebKit/")[1])||void 0,i.isChrome=parseFloat(u.split(" Chrome/")[1])||void 0,i.isSafari=parseFloat(u.split(" Safari/")[1])&&!i.isChrome||void 0,i.isEdge=parseFloat(u.split(" Edge/")[1])||void 0,i.isAIR=u.indexOf("AdobeAIR")>=0,i.isAndroid=u.indexOf("Android")>=0,i.isChromeOS=u.indexOf(" CrOS ")>=0,i.isIOS=/iPad|iPhone|iPod/.test(u)&&!window.MSStream,i.isIOS&&(i.isMac=!0),i.isMobile=i.isIOS||i.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(n,i,r){var o=n("./useragent"),l="http://www.w3.org/1999/xhtml";i.buildDom=function h(f,d,m){if(typeof f=="string"&&f){var g=document.createTextNode(f);return d&&d.appendChild(g),g}if(!Array.isArray(f))return f&&f.appendChild&&d&&d.appendChild(f),f;if(typeof f[0]!="string"||!f[0]){for(var y=[],w=0;w<f.length;w++){var S=h(f[w],d,m);S&&y.push(S)}return y}var b=document.createElement(f[0]),_=f[1],v=1;_&&typeof _=="object"&&!Array.isArray(_)&&(v=2);for(var w=v;w<f.length;w++)h(f[w],b,m);return v==2&&Object.keys(_).forEach(function(E){var x=_[E];E==="class"?b.className=Array.isArray(x)?x.join(" "):x:typeof x=="function"||E=="value"||E[0]=="$"?b[E]=x:E==="ref"?m&&(m[x]=b):E==="style"?typeof x=="string"&&(b.style.cssText=x):x!=null&&b.setAttribute(E,x)}),d&&d.appendChild(b),b},i.getDocumentHead=function(h){return h||(h=document),h.head||h.getElementsByTagName("head")[0]||h.documentElement},i.createElement=function(h,f){return document.createElementNS?document.createElementNS(f||l,h):document.createElement(h)},i.removeChildren=function(h){h.innerHTML=""},i.createTextNode=function(h,f){var d=f?f.ownerDocument:document;return d.createTextNode(h)},i.createFragment=function(h){var f=h?h.ownerDocument:document;return f.createDocumentFragment()},i.hasCssClass=function(h,f){var d=(h.className+"").split(/\s+/g);return d.indexOf(f)!==-1},i.addCssClass=function(h,f){i.hasCssClass(h,f)||(h.className+=" "+f)},i.removeCssClass=function(h,f){for(var d=h.className.split(/\s+/g);;){var m=d.indexOf(f);if(m==-1)break;d.splice(m,1)}h.className=d.join(" ")},i.toggleCssClass=function(h,f){for(var d=h.className.split(/\s+/g),m=!0;;){var g=d.indexOf(f);if(g==-1)break;m=!1,d.splice(g,1)}return m&&d.push(f),h.className=d.join(" "),m},i.setCssClass=function(h,f,d){d?i.addCssClass(h,f):i.removeCssClass(h,f)},i.hasCssString=function(h,f){var d=0,m;if(f=f||document,m=f.querySelectorAll("style")){for(;d<m.length;)if(m[d++].id===h)return!0}},i.removeElementById=function(h,f){f=f||document,f.getElementById(h)&&f.getElementById(h).remove()};var u,s=[];i.useStrictCSP=function(h){u=h,h==!1?p():s||(s=[])};function p(){var h=s;s=null,h&&h.forEach(function(f){a(f[0],f[1])})}function a(h,f,d){if(!(typeof document>"u")){if(s){if(d)p();else if(d===!1)return s.push([h,f])}if(!u){var m=d;!d||!d.getRootNode?m=document:(m=d.getRootNode(),(!m||m==d)&&(m=document));var g=m.ownerDocument||m;if(f&&i.hasCssString(f,m))return null;f&&(h+=`
/*# sourceURL=ace/css/`+f+" */");var y=i.createElement("style");y.appendChild(g.createTextNode(h)),f&&(y.id=f),m==g&&(m=i.getDocumentHead(g)),m.insertBefore(y,m.firstChild)}}}if(i.importCssString=a,i.importCssStylsheet=function(h,f){i.buildDom(["link",{rel:"stylesheet",href:h}],i.getDocumentHead(f))},i.scrollbarWidth=function(h){var f=i.createElement("ace_inner");f.style.width="100%",f.style.minWidth="0px",f.style.height="200px",f.style.display="block";var d=i.createElement("ace_outer"),m=d.style;m.position="absolute",m.left="-10000px",m.overflow="hidden",m.width="200px",m.minWidth="0px",m.height="150px",m.display="block",d.appendChild(f);var g=h&&h.documentElement||document&&document.documentElement;if(!g)return 0;g.appendChild(d);var y=f.offsetWidth;m.overflow="scroll";var w=f.offsetWidth;return y===w&&(w=d.clientWidth),g.removeChild(d),y-w},i.computedStyle=function(h,f){return window.getComputedStyle(h,"")||{}},i.setStyle=function(h,f,d){h[f]!==d&&(h[f]=d)},i.HAS_CSS_ANIMATION=!1,i.HAS_CSS_TRANSFORMS=!1,i.HI_DPI=o.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,o.isChromeOS&&(i.HI_DPI=!1),typeof document<"u"){var c=document.createElement("div");i.HI_DPI&&c.style.transform!==void 0&&(i.HAS_CSS_TRANSFORMS=!0),!o.isEdge&&typeof c.style.animationName<"u"&&(i.HAS_CSS_ANIMATION=!0),c=null}i.HAS_CSS_TRANSFORMS?i.translate=function(h,f,d){h.style.transform="translate("+Math.round(f)+"px, "+Math.round(d)+"px)"}:i.translate=function(h,f,d){h.style.top=Math.round(d)+"px",h.style.left=Math.round(f)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("./dom");i.get=function(l,u){var s=new XMLHttpRequest;s.open("GET",l,!0),s.onreadystatechange=function(){s.readyState===4&&u(s.responseText)},s.send(null)},i.loadScript=function(l,u){var s=o.getDocumentHead(),p=document.createElement("script");p.src=l,s.appendChild(p),p.onload=p.onreadystatechange=function(a,c){(c||!p.readyState||p.readyState=="loaded"||p.readyState=="complete")&&(p=p.onload=p.onreadystatechange=null,c||u())}},i.qualifyURL=function(l){var u=document.createElement("a");return u.href=l,u.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(n,i,r){i.inherits=function(o,l){o.super_=l,o.prototype=Object.create(l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})},i.mixin=function(o,l){for(var u in l)o[u]=l[u];return o},i.implement=function(o,l){i.mixin(o,l)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(n,i,r){var o={},l=function(){this.propagationStopped=!0},u=function(){this.defaultPrevented=!0};o._emit=o._dispatchEvent=function(s,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var a=this._eventRegistry[s]||[],c=this._defaultHandlers[s];if(!(!a.length&&!c)){(typeof p!="object"||!p)&&(p={}),p.type||(p.type=s),p.stopPropagation||(p.stopPropagation=l),p.preventDefault||(p.preventDefault=u),a=a.slice();for(var h=0;h<a.length&&(a[h](p,this),!p.propagationStopped);h++);if(c&&!p.defaultPrevented)return c(p,this)}},o._signal=function(s,p){var a=(this._eventRegistry||{})[s];if(a){a=a.slice();for(var c=0;c<a.length;c++)a[c](p,this)}},o.once=function(s,p){var a=this;if(this.on(s,function c(){a.off(s,c),p.apply(null,arguments)}),!p)return new Promise(function(c){p=c})},o.setDefaultHandler=function(s,p){var a=this._defaultHandlers;if(a||(a=this._defaultHandlers={_disabled_:{}}),a[s]){var c=a[s],h=a._disabled_[s];h||(a._disabled_[s]=h=[]),h.push(c);var f=h.indexOf(p);f!=-1&&h.splice(f,1)}a[s]=p},o.removeDefaultHandler=function(s,p){var a=this._defaultHandlers;if(a){var c=a._disabled_[s];if(a[s]==p)c&&this.setDefaultHandler(s,c.pop());else if(c){var h=c.indexOf(p);h!=-1&&c.splice(h,1)}}},o.on=o.addEventListener=function(s,p,a){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[s];return c||(c=this._eventRegistry[s]=[]),c.indexOf(p)==-1&&c[a?"unshift":"push"](p),p},o.off=o.removeListener=o.removeEventListener=function(s,p){this._eventRegistry=this._eventRegistry||{};var a=this._eventRegistry[s];if(a){var c=a.indexOf(p);c!==-1&&a.splice(c,1)}},o.removeAllListeners=function(s){s||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[s]=void 0),this._defaultHandlers&&(this._defaultHandlers[s]=void 0)},i.EventEmitter=o}),ace.define("ace/lib/report_error",["require","exports","module"],function(n,i,r){i.reportError=function(l,u){var s=new Error(l);s.data=u,typeof console=="object"&&console.error&&console.error(s),setTimeout(function(){throw s})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(n,i,r){var o={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages"};i.defaultEnglishMessages=o}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(n,i,r){"no use strict";var o=n("./oop"),l=n("./event_emitter").EventEmitter,u=n("./report_error").reportError,s=n("./default_english_messages").defaultEnglishMessages,p={setOptions:function(d){Object.keys(d).forEach(function(m){this.setOption(m,d[m])},this)},getOptions:function(d){var m={};if(d)Array.isArray(d)||(m=d,d=Object.keys(m));else{var g=this.$options;d=Object.keys(g).filter(function(y){return!g[y].hidden})}return d.forEach(function(y){m[y]=this.getOption(y)},this),m},setOption:function(d,m){if(this["$"+d]!==m){var g=this.$options[d];if(!g)return a('misspelled option "'+d+'"');if(g.forwardTo)return this[g.forwardTo]&&this[g.forwardTo].setOption(d,m);g.handlesSet||(this["$"+d]=m),g&&g.set&&g.set.call(this,m)}},getOption:function(d){var m=this.$options[d];return m?m.forwardTo?this[m.forwardTo]&&this[m.forwardTo].getOption(d):m&&m.get?m.get.call(this):this["$"+d]:a('misspelled option "'+d+'"')}};function a(d){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var c,h,f=function(){function d(){this.$defaultOptions={},c=s,h="dollarSigns"}return d.prototype.defineOptions=function(m,g,y){return m.$options||(this.$defaultOptions[g]=m.$options={}),Object.keys(y).forEach(function(w){var S=y[w];typeof S=="string"&&(S={forwardTo:S}),S.name||(S.name=w),m.$options[S.name]=S,"initialValue"in S&&(m["$"+S.name]=S.initialValue)}),o.implement(m,p),this},d.prototype.resetOptions=function(m){Object.keys(m.$options).forEach(function(g){var y=m.$options[g];"value"in y&&m.setOption(g,y.value)})},d.prototype.setDefaultValue=function(m,g,y){if(!m){for(m in this.$defaultOptions)if(this.$defaultOptions[m][g])break;if(!this.$defaultOptions[m][g])return!1}var w=this.$defaultOptions[m]||(this.$defaultOptions[m]={});w[g]&&(w.forwardTo?this.setDefaultValue(w.forwardTo,g,y):w[g].value=y)},d.prototype.setDefaultValues=function(m,g){Object.keys(g).forEach(function(y){this.setDefaultValue(m,y,g[y])},this)},d.prototype.setMessages=function(m,g){c=m,g&&g.placeholders&&(h=g.placeholders)},d.prototype.nls=function(m,g,y){c[m]||(a("No message found for the key '"+m+"' in the provided messages, trying to find a translation for the default string '"+g+"'."),c[g]||a("No message found for the default string '"+g+"' in the provided messages. Falling back to the default English message."));var w=c[m]||c[g]||g;return y&&(h==="dollarSigns"&&(w=w.replace(/\$(\$|[\d]+)/g,function(S,b){return b=="$"?"$":y[b]})),h==="curlyBrackets"&&(w=w.replace(/\{([^\}]+)\}/g,function(S,b){return y[b]}))),w},d}();f.prototype.warn=a,f.prototype.reportError=u,o.implement(f.prototype,l),i.AppConfig=f}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(n,i,r){r.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(n,i,r){i.isDark=!1,i.cssClass="ace-tm",i.cssText=n("./textmate-css"),i.$id="ace/theme/textmate";var o=n("../lib/dom");o.importCssString(i.cssText,i.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(n,i,r){"no use strict";var o=n("./lib/lang"),l=n("./lib/net"),u=n("./lib/dom"),s=n("./lib/app_config").AppConfig;r.exports=i=new s;var p={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};i.get=function(f){if(!p.hasOwnProperty(f))throw new Error("Unknown config key: "+f);return p[f]},i.set=function(f,d){if(p.hasOwnProperty(f))p[f]=d;else if(this.setDefaultValue("",f,d)==!1)throw new Error("Unknown config key: "+f);f=="useStrictCSP"&&u.useStrictCSP(d)},i.all=function(){return o.copyObject(p)},i.$modes={},i.moduleUrl=function(f,d){if(p.$moduleUrls[f])return p.$moduleUrls[f];var m=f.split("/");d=d||m[m.length-2]||"";var g=d=="snippets"?"/":"-",y=m[m.length-1];if(d=="worker"&&g=="-"){var w=new RegExp("^"+d+"[\\-_]|[\\-_]"+d+"$","g");y=y.replace(w,"")}(!y||y==d)&&m.length>1&&(y=m[m.length-2]);var S=p[d+"Path"];return S==null?S=p.basePath:g=="/"&&(d=g=""),S&&S.slice(-1)!="/"&&(S+="/"),S+d+g+y+this.get("suffix")},i.setModuleUrl=function(f,d){return p.$moduleUrls[f]=d};var a=function(f,d){if(f==="ace/theme/textmate"||f==="./theme/textmate")return d(null,n("./theme/textmate"));if(c)return c(f,d);console.error("loader is not configured")},c;i.setLoader=function(f){c=f},i.dynamicModules=Object.create(null),i.$loading={},i.$loaded={},i.loadModule=function(f,d){var m;if(Array.isArray(f))var g=f[0],y=f[1];else if(typeof f=="string")var y=f;var w=function(S){if(S&&!i.$loading[y])return d&&d(S);if(i.$loading[y]||(i.$loading[y]=[]),i.$loading[y].push(d),!(i.$loading[y].length>1)){var b=function(){a(y,function(_,v){v&&(i.$loaded[y]=v),i._emit("load.module",{name:y,module:v});var E=i.$loading[y];i.$loading[y]=null,E.forEach(function(x){x&&x(v)})})};if(!i.get("packaged"))return b();l.loadScript(i.moduleUrl(y,g),b),h()}};if(i.dynamicModules[y])i.dynamicModules[y]().then(function(S){S.default?w(S.default):w(S)});else{try{m=this.$require(y)}catch{}w(m||i.$loaded[y])}},i.$require=function(f){if(typeof r.require=="function"){var d="require";return r[d](f)}},i.setModuleLoader=function(f,d){i.dynamicModules[f]=d};var h=function(){!p.basePath&&!p.workerPath&&!p.modePath&&!p.themePath&&!Object.keys(p.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),h=function(){})};i.version="1.35.2"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(n,i,r){n("./lib/fixoldbrowsers");var o=n("./config");o.setLoader(function(p,a){n([p],function(c){a(null,c)})});var l=function(){return this||typeof window<"u"&&window}();r.exports=function(p){o.init=u,o.$require=n,p.require=n},u(!0);function u(p){if(!(!l||!l.document)){o.set("packaged",p||n.packaged||r.packaged||l.define&&(void 0).packaged);var a={},c="",h=document.currentScript||document._currentScript,f=h&&h.ownerDocument||document;h&&h.src&&(c=h.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var d=f.getElementsByTagName("script"),m=0;m<d.length;m++){var g=d[m],y=g.src||g.getAttribute("src");if(y){for(var w=g.attributes,S=0,b=w.length;S<b;S++){var _=w[S];_.name.indexOf("data-ace-")===0&&(a[s(_.name.replace(/^data-ace-/,""))]=_.value)}var v=y.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);v&&(c=v[1])}}c&&(a.base=a.base||c,a.packaged=!0),a.basePath=a.base,a.workerPath=a.workerPath||a.base,a.modePath=a.modePath||a.base,a.themePath=a.themePath||a.base,delete a.base;for(var E in a)typeof a[E]<"u"&&o.set(E,a[E])}}function s(p){return p.replace(/-(.)/g,function(a,c){return c.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(n,i,r){var o=function(){function l(u,s,p,a){this.start={row:u,column:s},this.end={row:p,column:a}}return l.prototype.isEqual=function(u){return this.start.row===u.start.row&&this.end.row===u.end.row&&this.start.column===u.start.column&&this.end.column===u.end.column},l.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},l.prototype.contains=function(u,s){return this.compare(u,s)==0},l.prototype.compareRange=function(u){var s,p=u.end,a=u.start;return s=this.compare(p.row,p.column),s==1?(s=this.compare(a.row,a.column),s==1?2:s==0?1:0):s==-1?-2:(s=this.compare(a.row,a.column),s==-1?-1:s==1?42:0)},l.prototype.comparePoint=function(u){return this.compare(u.row,u.column)},l.prototype.containsRange=function(u){return this.comparePoint(u.start)==0&&this.comparePoint(u.end)==0},l.prototype.intersects=function(u){var s=this.compareRange(u);return s==-1||s==0||s==1},l.prototype.isEnd=function(u,s){return this.end.row==u&&this.end.column==s},l.prototype.isStart=function(u,s){return this.start.row==u&&this.start.column==s},l.prototype.setStart=function(u,s){typeof u=="object"?(this.start.column=u.column,this.start.row=u.row):(this.start.row=u,this.start.column=s)},l.prototype.setEnd=function(u,s){typeof u=="object"?(this.end.column=u.column,this.end.row=u.row):(this.end.row=u,this.end.column=s)},l.prototype.inside=function(u,s){return this.compare(u,s)==0?!(this.isEnd(u,s)||this.isStart(u,s)):!1},l.prototype.insideStart=function(u,s){return this.compare(u,s)==0?!this.isEnd(u,s):!1},l.prototype.insideEnd=function(u,s){return this.compare(u,s)==0?!this.isStart(u,s):!1},l.prototype.compare=function(u,s){return!this.isMultiLine()&&u===this.start.row?s<this.start.column?-1:s>this.end.column?1:0:u<this.start.row?-1:u>this.end.row?1:this.start.row===u?s>=this.start.column?0:-1:this.end.row===u?s<=this.end.column?0:1:0},l.prototype.compareStart=function(u,s){return this.start.row==u&&this.start.column==s?-1:this.compare(u,s)},l.prototype.compareEnd=function(u,s){return this.end.row==u&&this.end.column==s?1:this.compare(u,s)},l.prototype.compareInside=function(u,s){return this.end.row==u&&this.end.column==s?1:this.start.row==u&&this.start.column==s?-1:this.compare(u,s)},l.prototype.clipRows=function(u,s){if(this.end.row>s)var p={row:s+1,column:0};else if(this.end.row<u)var p={row:u,column:0};if(this.start.row>s)var a={row:s+1,column:0};else if(this.start.row<u)var a={row:u,column:0};return l.fromPoints(a||this.start,p||this.end)},l.prototype.extend=function(u,s){var p=this.compare(u,s);if(p==0)return this;if(p==-1)var a={row:u,column:s};else var c={row:u,column:s};return l.fromPoints(a||this.start,c||this.end)},l.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},l.prototype.isMultiLine=function(){return this.start.row!==this.end.row},l.prototype.clone=function(){return l.fromPoints(this.start,this.end)},l.prototype.collapseRows=function(){return this.end.column==0?new l(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new l(this.start.row,0,this.end.row,0)},l.prototype.toScreenRange=function(u){var s=u.documentToScreenPosition(this.start),p=u.documentToScreenPosition(this.end);return new l(s.row,s.column,p.row,p.column)},l.prototype.moveBy=function(u,s){this.start.row+=u,this.start.column+=s,this.end.row+=u,this.end.column+=s},l}();o.fromPoints=function(l,u){return new o(l.row,l.column,u.row,u.column)},o.comparePoints=function(l,u){return l.row-u.row||l.column-u.column},i.Range=o}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(n,i,r){for(var o=n("./oop"),l={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},u={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},s=0;s<10;s++)u["Digit"+s]=48+s,u["Numpad"+s]=96+s,l.PRINTABLE_KEYS[48+s]=""+s,l.FUNCTION_KEYS[96+s]="Numpad"+s;for(var s=65;s<91;s++){var p=String.fromCharCode(s+32);u["Key"+p.toUpperCase()]=s,l.PRINTABLE_KEYS[s]=p}for(var s=1;s<13;s++)u["F"+s]=111+s,l.FUNCTION_KEYS[111+s]="F"+s;var a={Shift:16,Control:17,Alt:18,Meta:224};for(var c in a)u[c]=u[c+"Left"]=u[c+"Right"]=a[c];i.$codeToKeyCode=u,l.PRINTABLE_KEYS[173]="-";for(var h in l.FUNCTION_KEYS){var f=l.FUNCTION_KEYS[h].toLowerCase();l[f]=parseInt(h,10)}for(var h in l.PRINTABLE_KEYS){var f=l.PRINTABLE_KEYS[h].toLowerCase();l[f]=parseInt(h,10)}o.mixin(l,l.MODIFIER_KEYS),o.mixin(l,l.PRINTABLE_KEYS),o.mixin(l,l.FUNCTION_KEYS),l.enter=l.return,l.escape=l.esc,l.del=l.delete,function(){for(var d=["cmd","ctrl","alt","shift"],m=Math.pow(2,d.length);m--;)l.KEY_MODS[m]=d.filter(function(g){return m&l.KEY_MODS[g]}).join("-")+"-"}(),l.KEY_MODS[0]="",l.KEY_MODS[-1]="input-",o.mixin(i,l),i.default=i,i.keyCodeToString=function(d){var m=l[d];return typeof m!="string"&&(m=String.fromCharCode(d)),m.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,i,r){var o=n("./keys"),l=n("./useragent"),u=null,s=0,p;function a(){p=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return p={passive:!1},!0}})}catch{}}function c(){return p==null&&a(),p}function h(S,b,_){this.elem=S,this.type=b,this.callback=_}h.prototype.destroy=function(){d(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var f=i.addListener=function(S,b,_,v){S.addEventListener(b,_,c()),v&&v.$toDestroy.push(new h(S,b,_))},d=i.removeListener=function(S,b,_){S.removeEventListener(b,_,c())};i.stopEvent=function(S){return i.stopPropagation(S),i.preventDefault(S),!1},i.stopPropagation=function(S){S.stopPropagation&&S.stopPropagation()},i.preventDefault=function(S){S.preventDefault&&S.preventDefault()},i.getButton=function(S){return S.type=="dblclick"?0:S.type=="contextmenu"||l.isMac&&S.ctrlKey&&!S.altKey&&!S.shiftKey?2:S.button},i.capture=function(S,b,_){var v=S&&S.ownerDocument||document;function E(x){b&&b(x),_&&_(x),d(v,"mousemove",b),d(v,"mouseup",E),d(v,"dragstart",E)}return f(v,"mousemove",b),f(v,"mouseup",E),f(v,"dragstart",E),E},i.addMouseWheelListener=function(S,b,_){f(S,"wheel",function(v){var E=.15,x=v.deltaX||0,T=v.deltaY||0;switch(v.deltaMode){case v.DOM_DELTA_PIXEL:v.wheelX=x*E,v.wheelY=T*E;break;case v.DOM_DELTA_LINE:var k=15;v.wheelX=x*k,v.wheelY=T*k;break;case v.DOM_DELTA_PAGE:var $=150;v.wheelX=x*$,v.wheelY=T*$;break}b(v)},_)},i.addMultiMouseDownListener=function(S,b,_,v,E){var x=0,T,k,$,R={2:"dblclick",3:"tripleclick",4:"quadclick"};function A(C){if(i.getButton(C)!==0?x=0:C.detail>1?(x++,x>4&&(x=1)):x=1,l.isIE){var M=Math.abs(C.clientX-T)>5||Math.abs(C.clientY-k)>5;(!$||M)&&(x=1),$&&clearTimeout($),$=setTimeout(function(){$=null},b[x-1]||600),x==1&&(T=C.clientX,k=C.clientY)}if(C._clicks=x,_[v]("mousedown",C),x>4)x=0;else if(x>1)return _[v](R[x],C)}Array.isArray(S)||(S=[S]),S.forEach(function(C){f(C,"mousedown",A,E)})};function m(S){return 0|(S.ctrlKey?1:0)|(S.altKey?2:0)|(S.shiftKey?4:0)|(S.metaKey?8:0)}i.getModifierString=function(S){return o.KEY_MODS[m(S)]};function g(S,b,_){var v=m(b);if(!_&&b.code&&(_=o.$codeToKeyCode[b.code]||_),!l.isMac&&u){if(b.getModifierState&&(b.getModifierState("OS")||b.getModifierState("Win"))&&(v|=8),u.altGr)if((3&v)!=3)u.altGr=0;else return;if(_===18||_===17){var E=b.location;if(_===17&&E===1)u[_]==1&&(s=b.timeStamp);else if(_===18&&v===3&&E===2){var x=b.timeStamp-s;x<50&&(u.altGr=!0)}}}if(_ in o.MODIFIER_KEYS&&(_=-1),!(!v&&_===13&&b.location===3&&(S(b,v,-_),b.defaultPrevented))){if(l.isChromeOS&&v&8){if(S(b,v,_),b.defaultPrevented)return;v&=-9}return!v&&!(_ in o.FUNCTION_KEYS)&&!(_ in o.PRINTABLE_KEYS)?!1:S(b,v,_)}}i.addCommandKeyListener=function(S,b,_){var v=null;f(S,"keydown",function(E){u[E.keyCode]=(u[E.keyCode]||0)+1;var x=g(b,E,E.keyCode);return v=E.defaultPrevented,x},_),f(S,"keypress",function(E){v&&(E.ctrlKey||E.altKey||E.shiftKey||E.metaKey)&&(i.stopEvent(E),v=null)},_),f(S,"keyup",function(E){u[E.keyCode]=null},_),u||(y(),f(window,"focus",y))};function y(){u=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!l.isOldIE){var w=1;i.nextTick=function(S,b){b=b||window;var _="zero-timeout-message-"+w++,v=function(E){E.data==_&&(i.stopPropagation(E),d(b,"message",v),S())};f(b,"message",v),b.postMessage(_,"*")}}i.$idleBlocked=!1,i.onIdle=function(S,b){return setTimeout(function _(){i.$idleBlocked?setTimeout(_,100):S()},b)},i.$idleBlockId=null,i.blockIdle=function(S){i.$idleBlockId&&clearTimeout(i.$idleBlockId),i.$idleBlocked=!0,i.$idleBlockId=setTimeout(function(){i.$idleBlocked=!1},S||100)},i.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),i.nextFrame?i.nextFrame=i.nextFrame.bind(window):i.nextFrame=function(S){setTimeout(S,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(n,i,r){var o;r.exports={lineMode:!1,pasteCancelled:function(){return o&&o>Date.now()-50?!0:o=!1},cancel:function(){o=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(n,i,r){var o=n("../lib/event"),l=n("../config").nls,u=n("../lib/useragent"),s=n("../lib/dom"),p=n("../lib/lang"),a=n("../clipboard"),c=u.isChrome<18,h=u.isIE,f=u.isChrome>63,d=400,m=n("../lib/keys"),g=m.KEY_MODS,y=u.isIOS,w=y?/\s/:/\n/,S=u.isMobile,b;b=function(_,v){var E=s.createElement("textarea");E.className="ace_text-input",E.setAttribute("wrap","off"),E.setAttribute("autocorrect","off"),E.setAttribute("autocapitalize","off"),E.setAttribute("spellcheck","false"),E.style.opacity="0",_.insertBefore(E,_.firstChild);var x=!1,T=!1,k=!1,$=!1,R="";S||(E.style.fontSize="1px");var A=!1,C=!1,M="",I=0,D=0,B=0,F=Number.MAX_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER,Z=0;try{var Q=document.activeElement===E}catch{}this.setNumberOfExtraLines=function(ie){if(F=Number.MAX_SAFE_INTEGER,j=Number.MIN_SAFE_INTEGER,ie<0){Z=0;return}Z=ie},this.setAriaOptions=function(ie){if(ie.activeDescendant?(E.setAttribute("aria-haspopup","true"),E.setAttribute("aria-autocomplete",ie.inline?"both":"list"),E.setAttribute("aria-activedescendant",ie.activeDescendant)):(E.setAttribute("aria-haspopup","false"),E.setAttribute("aria-autocomplete","both"),E.removeAttribute("aria-activedescendant")),ie.role&&E.setAttribute("role",ie.role),ie.setLabel){E.setAttribute("aria-roledescription",l("text-input.aria-roledescription","editor"));var ge="";if(v.$textInputAriaLabel&&(ge+="".concat(v.$textInputAriaLabel,", ")),v.session){var Ee=v.session.selection.cursor.row;ge+=l("text-input.aria-label","Cursor at row $0",[Ee+1])}E.setAttribute("aria-label",ge)}},this.setAriaOptions({role:"textbox"}),o.addListener(E,"blur",function(ie){C||(v.onBlur(ie),Q=!1)},v),o.addListener(E,"focus",function(ie){if(!C){if(Q=!0,u.isEdge)try{if(!document.hasFocus())return}catch{}v.onFocus(ie),u.isEdge?setTimeout(V):V()}},v),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:v.renderer.enableKeyboardAccessibility}),R||f||this.$focusScroll=="browser")return E.focus({preventScroll:!0});var ie=E.style.top;E.style.position="fixed",E.style.top="0px";try{var ge=E.getBoundingClientRect().top!=0}catch{return}var Ee=[];if(ge)for(var Ye=E.parentElement;Ye&&Ye.nodeType==1;)Ee.push(Ye),Ye.setAttribute("ace_nocontext","true"),!Ye.parentElement&&Ye.getRootNode?Ye=Ye.getRootNode().host:Ye=Ye.parentElement;E.focus({preventScroll:!0}),ge&&Ee.forEach(function(qe){qe.removeAttribute("ace_nocontext")}),setTimeout(function(){E.style.position="",E.style.top=="0px"&&(E.style.top=ie)},0)},this.blur=function(){E.blur()},this.isFocused=function(){return Q},v.on("beforeEndOperation",function(){var ie=v.curOp,ge=ie&&ie.command&&ie.command.name;if(ge!="insertstring"){var Ee=ge&&(ie.docChanged||ie.selectionChanged);k&&Ee&&(M=E.value="",$e()),V()}});var W=function(ie,ge){for(var Ee=ge,Ye=1;Ye<=ie-F&&Ye<2*Z+1;Ye++)Ee+=v.session.getLine(ie-Ye).length+1;return Ee},V=y?function(ie){if(!(!Q||x&&!ie||$)){ie||(ie="");var ge=`
 ab`+ie+`cde fg
`;ge!=E.value&&(E.value=M=ge);var Ee=4,Ye=4+(ie.length||(v.selection.isEmpty()?0:1));(I!=Ee||D!=Ye)&&E.setSelectionRange(Ee,Ye),I=Ee,D=Ye}}:function(){if(!(k||$)&&!(!Q&&!Y)){k=!0;var ie=0,ge=0,Ee="";if(v.session){var Ye=v.selection,qe=Ye.getRange(),ht=Ye.cursor.row;ht===j+1?(F=j+1,j=F+2*Z):ht===F-1?(j=F-1,F=j-2*Z):(ht<F-1||ht>j+1)&&(F=ht>Z?ht-Z:0,j=ht>Z?ht+Z:2*Z);for(var $t=[],dt=F;dt<=j;dt++)$t.push(v.session.getLine(dt));if(Ee=$t.join(`
`),ie=W(qe.start.row,qe.start.column),ge=W(qe.end.row,qe.end.column),qe.start.row<F){var at=v.session.getLine(F-1);ie=qe.start.row<F-1?0:ie,ge+=at.length+1,Ee=at+`
`+Ee}else if(qe.end.row>j){var et=v.session.getLine(j+1);ge=qe.end.row>j+1?et.length:qe.end.column,ge+=Ee.length+1,Ee=Ee+`
`+et}else S&&ht>0&&(Ee=`
`+Ee,ge+=1,ie+=1);Ee.length>d&&(ie<d&&ge<d?Ee=Ee.slice(0,d):(Ee=`
`,ie==ge?ie=ge=0:(ie=0,ge=1)));var sn=Ee+`

`;sn!=M&&(E.value=M=sn,I=D=sn.length)}if(Y&&(I=E.selectionStart,D=E.selectionEnd),D!=ge||I!=ie||E.selectionEnd!=D)try{E.setSelectionRange(ie,ge),I=ie,D=ge}catch{}k=!1}};this.resetSelection=V,Q&&v.onFocus();var G=function(ie){return ie.selectionStart===0&&ie.selectionEnd>=M.length&&ie.value===M&&M&&ie.selectionEnd!==D},U=function(ie){k||(x?x=!1:G(E)?(v.selectAll(),V()):S&&E.selectionStart!=I&&V())},ee=null;this.setInputHandler=function(ie){ee=ie},this.getInputHandler=function(){return ee};var Y=!1,O=function(ie,ge){if(Y&&(Y=!1),T)return V(),ie&&v.onPaste(ie),T=!1,"";for(var Ee=E.selectionStart,Ye=E.selectionEnd,qe=I,ht=M.length-D,$t=ie,dt=ie.length-Ee,at=ie.length-Ye,et=0;qe>0&&M[et]==ie[et];)et++,qe--;for($t=$t.slice(et),et=1;ht>0&&M.length-et>I-1&&M[M.length-et]==ie[ie.length-et];)et++,ht--;dt-=et-1,at-=et-1;var sn=$t.length-et+1;if(sn<0&&(qe=-sn,sn=0),$t=$t.slice(0,sn),!ge&&!$t&&!dt&&!qe&&!ht&&!at)return"";$=!0;var Go=!1;return u.isAndroid&&$t==". "&&($t="  ",Go=!0),$t&&!qe&&!ht&&!dt&&!at||A?v.onTextInput($t):v.onTextInput($t,{extendLeft:qe,extendRight:ht,restoreStart:dt,restoreEnd:at}),$=!1,M=ie,I=Ee,D=Ye,B=at,Go?`
`:$t},L=function(ie){if(k)return _e();if(ie&&ie.inputType){if(ie.inputType=="historyUndo")return v.execCommand("undo");if(ie.inputType=="historyRedo")return v.execCommand("redo")}var ge=E.value,Ee=O(ge,!0);(ge.length>d+100||w.test(Ee)||S&&I<1&&I==D)&&V()},P=function(ie,ge,Ee){var Ye=ie.clipboardData||window.clipboardData;if(!(!Ye||c)){var qe=h||Ee?"Text":"text/plain";try{return ge?Ye.setData(qe,ge)!==!1:Ye.getData(qe)}catch(ht){if(!Ee)return P(ht,ge,!0)}}},z=function(ie,ge){var Ee=v.getCopyText();if(!Ee)return o.preventDefault(ie);P(ie,Ee)?(y&&(V(Ee),x=Ee,setTimeout(function(){x=!1},10)),ge?v.onCut():v.onCopy(),o.preventDefault(ie)):(x=!0,E.value=Ee,E.select(),setTimeout(function(){x=!1,V(),ge?v.onCut():v.onCopy()}))},K=function(ie){z(ie,!0)},te=function(ie){z(ie,!1)},ne=function(ie){var ge=P(ie);a.pasteCancelled()||(typeof ge=="string"?(ge&&v.onPaste(ge,ie),u.isIE&&setTimeout(V),o.preventDefault(ie)):(E.value="",T=!0))};o.addCommandKeyListener(E,function(ie,ge,Ee){if(!k)return v.onCommandKey(ie,ge,Ee)},v),o.addListener(E,"select",U,v),o.addListener(E,"input",L,v),o.addListener(E,"cut",K,v),o.addListener(E,"copy",te,v),o.addListener(E,"paste",ne,v),(!("oncut"in E)||!("oncopy"in E)||!("onpaste"in E))&&o.addListener(_,"keydown",function(ie){if(!(u.isMac&&!ie.metaKey||!ie.ctrlKey))switch(ie.keyCode){case 67:te(ie);break;case 86:ne(ie);break;case 88:K(ie);break}},v);var fe=function(ie){if(!(k||!v.onCompositionStart||v.$readOnly)&&(k={},!A)){ie.data&&(k.useTextareaForIME=!1),setTimeout(_e,0),v._signal("compositionStart"),v.on("mousedown",ke);var ge=v.getSelectionRange();ge.end.row=ge.start.row,ge.end.column=ge.start.column,k.markerRange=ge,k.selectionStart=I,v.onCompositionStart(k),k.useTextareaForIME?(M=E.value="",I=0,D=0):(E.msGetInputContext&&(k.context=E.msGetInputContext()),E.getInputContext&&(k.context=E.getInputContext()))}},_e=function(){if(!(!k||!v.onCompositionUpdate||v.$readOnly)){if(A)return ke();if(k.useTextareaForIME)v.onCompositionUpdate(E.value);else{var ie=E.value;O(ie),k.markerRange&&(k.context&&(k.markerRange.start.column=k.selectionStart=k.context.compositionStartOffset),k.markerRange.end.column=k.markerRange.start.column+D-k.selectionStart+B)}}},$e=function(ie){!v.onCompositionEnd||v.$readOnly||(k=!1,v.onCompositionEnd(),v.off("mousedown",ke),ie&&L())};function ke(){C=!0,E.blur(),E.focus(),C=!1}var ze=p.delayedCall(_e,50).schedule.bind(null,null);function Zn(ie){ie.keyCode==27&&E.value.length<E.selectionStart&&(k||(M=E.value),I=D=-1,V()),ze()}o.addListener(E,"compositionstart",fe,v),o.addListener(E,"compositionupdate",_e,v),o.addListener(E,"keyup",Zn,v),o.addListener(E,"keydown",ze,v),o.addListener(E,"compositionend",$e,v),this.getElement=function(){return E},this.setCommandMode=function(ie){A=ie,E.readOnly=!1},this.setReadOnly=function(ie){A||(E.readOnly=ie)},this.setCopyWithEmptySelection=function(ie){},this.onContextMenu=function(ie){Y=!0,V(),v._emit("nativecontextmenu",{target:v,domEvent:ie}),this.moveToMouse(ie,!0)},this.moveToMouse=function(ie,ge){R||(R=E.style.cssText),E.style.cssText=(ge?"z-index:100000;":"")+(u.isIE?"opacity:0.1;":"")+"text-indent: -"+(I+D)*v.renderer.characterWidth*.5+"px;";var Ee=v.container.getBoundingClientRect(),Ye=s.computedStyle(v.container),qe=Ee.top+(parseInt(Ye.borderTopWidth)||0),ht=Ee.left+(parseInt(Ee.borderLeftWidth)||0),$t=Ee.bottom-qe-E.clientHeight-2,dt=function(at){s.translate(E,at.clientX-ht-2,Math.min(at.clientY-qe-2,$t))};dt(ie),ie.type=="mousedown"&&(v.renderer.$isMousePressed=!0,clearTimeout(Pi),u.isWin&&o.capture(v.container,dt,It))},this.onContextMenuClose=It;var Pi;function It(){clearTimeout(Pi),Pi=setTimeout(function(){R&&(E.style.cssText=R,R=""),v.renderer.$isMousePressed=!1,v.renderer.$keepTextAreaAtCursor&&v.renderer.$moveTextAreaToCursor()},0)}var ve=function(ie){v.textInput.onContextMenu(ie),It()};o.addListener(E,"mouseup",ve,v),o.addListener(E,"mousedown",function(ie){ie.preventDefault(),It()},v),o.addListener(v.renderer.scroller,"contextmenu",ve,v),o.addListener(E,"contextmenu",ve,v),y&&Ue(_,v,E);function Ue(ie,ge,Ee){var Ye=null,qe=!1;Ee.addEventListener("keydown",function($t){Ye&&clearTimeout(Ye),qe=!0},!0),Ee.addEventListener("keyup",function($t){Ye=setTimeout(function(){qe=!1},100)},!0);var ht=function($t){if(document.activeElement===Ee&&!(qe||k||ge.$mouseHandler.isMousePressed)&&!x){var dt=Ee.selectionStart,at=Ee.selectionEnd,et=null,sn=0;if(dt==0?et=m.up:dt==1?et=m.home:at>D&&M[at]==`
`?et=m.end:dt<I&&M[dt-1]==" "?(et=m.left,sn=g.option):dt<I||dt==I&&D!=I&&dt==at?et=m.left:at>D&&M.slice(0,at).split(`
`).length>2?et=m.down:at>D&&M[at-1]==" "?(et=m.right,sn=g.option):(at>D||at==D&&D!=I&&dt==at)&&(et=m.right),dt!==at&&(sn|=g.shift),et){var Go=ge.onCommandKey({},sn,et);if(!Go&&ge.commands){et=m.keyCodeToString(et);var Gd=ge.commands.findKeyCommand(sn,et);Gd&&ge.execCommand(Gd)}I=dt,D=at,V("")}}};document.addEventListener("selectionchange",ht),ge.on("destroy",function(){document.removeEventListener("selectionchange",ht)})}this.destroy=function(){E.parentElement&&E.parentElement.removeChild(E)}},i.TextInput=b,i.$setUserAgentForTests=function(_,v){S=_,y=v}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(n,i,r){var o=n("../lib/useragent"),l=0,u=550,s=function(){function c(h){h.$clickSelection=null;var f=h.editor;f.setDefaultHandler("mousedown",this.onMouseDown.bind(h)),f.setDefaultHandler("dblclick",this.onDoubleClick.bind(h)),f.setDefaultHandler("tripleclick",this.onTripleClick.bind(h)),f.setDefaultHandler("quadclick",this.onQuadClick.bind(h)),f.setDefaultHandler("mousewheel",this.onMouseWheel.bind(h));var d=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];d.forEach(function(m){h[m]=this[m]},this),h.selectByLines=this.extendSelectionBy.bind(h,"getLineRange"),h.selectByWords=this.extendSelectionBy.bind(h,"getWordRange")}return c.prototype.onMouseDown=function(h){var f=h.inSelection(),d=h.getDocumentPosition();this.mousedownEvent=h;var m=this.editor,g=h.getButton();if(g!==0){var y=m.getSelectionRange(),w=y.isEmpty();(w||g==1)&&m.selection.moveToPosition(d),g==2&&(m.textInput.onContextMenu(h.domEvent),o.isMozilla||h.preventDefault());return}if(this.mousedownEvent.time=Date.now(),f&&!m.isFocused()&&(m.focus(),this.$focusTimeout&&!this.$clickSelection&&!m.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(h);return}return this.captureMouse(h),this.startSelect(d,h.domEvent._clicks>1),h.preventDefault()},c.prototype.startSelect=function(h,f){h=h||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var d=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?d.selection.selectToPosition(h):f||d.selection.moveToPosition(h),f||this.select(),d.setStyle("ace_selecting"),this.setState("select"))},c.prototype.select=function(){var h,f=this.editor,d=f.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var m=this.$clickSelection.comparePoint(d);if(m==-1)h=this.$clickSelection.end;else if(m==1)h=this.$clickSelection.start;else{var g=a(this.$clickSelection,d);d=g.cursor,h=g.anchor}f.selection.setSelectionAnchor(h.row,h.column)}f.selection.selectToPosition(d),f.renderer.scrollCursorIntoView()},c.prototype.extendSelectionBy=function(h){var f,d=this.editor,m=d.renderer.screenToTextCoordinates(this.x,this.y),g=d.selection[h](m.row,m.column);if(this.$clickSelection){var y=this.$clickSelection.comparePoint(g.start),w=this.$clickSelection.comparePoint(g.end);if(y==-1&&w<=0)f=this.$clickSelection.end,(g.end.row!=m.row||g.end.column!=m.column)&&(m=g.start);else if(w==1&&y>=0)f=this.$clickSelection.start,(g.start.row!=m.row||g.start.column!=m.column)&&(m=g.end);else if(y==-1&&w==1)m=g.end,f=g.start;else{var S=a(this.$clickSelection,m);m=S.cursor,f=S.anchor}d.selection.setSelectionAnchor(f.row,f.column)}d.selection.selectToPosition(m),d.renderer.scrollCursorIntoView()},c.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},c.prototype.focusWait=function(){var h=p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),f=Date.now();(h>l||f-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},c.prototype.onDoubleClick=function(h){var f=h.getDocumentPosition(),d=this.editor,m=d.session,g=m.getBracketRange(f);g?(g.isEmpty()&&(g.start.column--,g.end.column++),this.setState("select")):(g=d.selection.getWordRange(f.row,f.column),this.setState("selectByWords")),this.$clickSelection=g,this.select()},c.prototype.onTripleClick=function(h){var f=h.getDocumentPosition(),d=this.editor;this.setState("selectByLines");var m=d.getSelectionRange();m.isMultiLine()&&m.contains(f.row,f.column)?(this.$clickSelection=d.selection.getLineRange(m.start.row),this.$clickSelection.end=d.selection.getLineRange(m.end.row).end):this.$clickSelection=d.selection.getLineRange(f.row),this.select()},c.prototype.onQuadClick=function(h){var f=this.editor;f.selectAll(),this.$clickSelection=f.getSelectionRange(),this.setState("selectAll")},c.prototype.onMouseWheel=function(h){if(!h.getAccelKey()){h.getShiftKey()&&h.wheelY&&!h.wheelX&&(h.wheelX=h.wheelY,h.wheelY=0);var f=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var d=this.$lastScroll,m=h.domEvent.timeStamp,g=m-d.t,y=g?h.wheelX/g:d.vx,w=g?h.wheelY/g:d.vy;g<u&&(y=(y+d.vx)/2,w=(w+d.vy)/2);var S=Math.abs(y/w),b=!1;if(S>=1&&f.renderer.isScrollableBy(h.wheelX*h.speed,0)&&(b=!0),S<=1&&f.renderer.isScrollableBy(0,h.wheelY*h.speed)&&(b=!0),b)d.allowed=m;else if(m-d.allowed<u){var _=Math.abs(y)<=1.5*Math.abs(d.vx)&&Math.abs(w)<=1.5*Math.abs(d.vy);_?(b=!0,d.allowed=m):d.allowed=0}if(d.t=m,d.vx=y,d.vy=w,b)return f.renderer.scrollBy(h.wheelX*h.speed,h.wheelY*h.speed),h.stop()}},c}();s.prototype.selectEnd=s.prototype.selectByLinesEnd,s.prototype.selectAllEnd=s.prototype.selectByLinesEnd,s.prototype.selectByWordsEnd=s.prototype.selectByLinesEnd,i.DefaultHandlers=s;function p(c,h,f,d){return Math.sqrt(Math.pow(f-c,2)+Math.pow(d-h,2))}function a(c,h){if(c.start.row==c.end.row)var f=2*h.column-c.start.column-c.end.column;else if(c.start.row==c.end.row-1&&!c.start.column&&!c.end.column)var f=h.column-4;else var f=2*h.row-c.start.row-c.end.row;return f<0?{cursor:c.start,anchor:c.end}:{cursor:c.end,anchor:c.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(n,i,r){i.preventParentScroll=function(l){l.stopPropagation();var u=l.currentTarget,s=u.scrollHeight>u.clientHeight;s||l.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(n,i,r){var o=this&&this.__extends||function(){var m=function(g,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,S){w.__proto__=S}||function(w,S){for(var b in S)Object.prototype.hasOwnProperty.call(S,b)&&(w[b]=S[b])},m(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(g,y);function w(){this.constructor=g}g.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}}(),l=this&&this.__values||function(m){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&m[g],w=0;if(y)return y.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&w>=m.length&&(m=void 0),{value:m&&m[w++],done:!m}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},u=n("./lib/dom");n("./lib/event");var s=n("./range").Range,p=n("./lib/scroll").preventParentScroll,a="ace_tooltip",c=function(){function m(g){this.isOpen=!1,this.$element=null,this.$parentNode=g}return m.prototype.$init=function(){return this.$element=u.createElement("div"),this.$element.className=a,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},m.prototype.getElement=function(){return this.$element||this.$init()},m.prototype.setText=function(g){this.getElement().textContent=g},m.prototype.setHtml=function(g){this.getElement().innerHTML=g},m.prototype.setPosition=function(g,y){this.getElement().style.left=g+"px",this.getElement().style.top=y+"px"},m.prototype.setClassName=function(g){u.addCssClass(this.getElement(),g)},m.prototype.setTheme=function(g){this.$element.className=a+" "+(g.isDark?"ace_dark ":"")+(g.cssClass||"")},m.prototype.show=function(g,y,w){g!=null&&this.setText(g),y!=null&&w!=null&&this.setPosition(y,w),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},m.prototype.hide=function(g){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=a,this.isOpen=!1)},m.prototype.getHeight=function(){return this.getElement().offsetHeight},m.prototype.getWidth=function(){return this.getElement().offsetWidth},m.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},m}(),h=function(){function m(){this.popups=[]}return m.prototype.addPopup=function(g){this.popups.push(g),this.updatePopups()},m.prototype.removePopup=function(g){var y=this.popups.indexOf(g);y!==-1&&(this.popups.splice(y,1),this.updatePopups())},m.prototype.updatePopups=function(){var g,y,w,S;this.popups.sort(function(R,A){return A.priority-R.priority});var b=[];try{for(var _=l(this.popups),v=_.next();!v.done;v=_.next()){var E=v.value,x=!0;try{for(var T=(w=void 0,l(b)),k=T.next();!k.done;k=T.next()){var $=k.value;if(this.doPopupsOverlap($,E)){x=!1;break}}}catch(R){w={error:R}}finally{try{k&&!k.done&&(S=T.return)&&S.call(T)}finally{if(w)throw w.error}}x?b.push(E):E.hide()}}catch(R){g={error:R}}finally{try{v&&!v.done&&(y=_.return)&&y.call(_)}finally{if(g)throw g.error}}},m.prototype.doPopupsOverlap=function(g,y){var w=g.getElement().getBoundingClientRect(),S=y.getElement().getBoundingClientRect();return w.left<S.right&&w.right>S.left&&w.top<S.bottom&&w.bottom>S.top},m}(),f=new h;i.popupManager=f,i.Tooltip=c;var d=function(m){o(g,m);function g(y){y===void 0&&(y=document.body);var w=m.call(this,y)||this;w.timeout=void 0,w.lastT=0,w.idleTime=350,w.lastEvent=void 0,w.onMouseOut=w.onMouseOut.bind(w),w.onMouseMove=w.onMouseMove.bind(w),w.waitForHover=w.waitForHover.bind(w),w.hide=w.hide.bind(w);var S=w.getElement();return S.style.whiteSpace="pre-wrap",S.style.pointerEvents="auto",S.addEventListener("mouseout",w.onMouseOut),S.tabIndex=-1,S.addEventListener("blur",(function(){S.contains(document.activeElement)||this.hide()}).bind(w)),S.addEventListener("wheel",p),w}return g.prototype.addToEditor=function(y){y.on("mousemove",this.onMouseMove),y.on("mousedown",this.hide),y.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},g.prototype.removeFromEditor=function(y){y.off("mousemove",this.onMouseMove),y.off("mousedown",this.hide),y.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},g.prototype.onMouseMove=function(y,w){this.lastEvent=y,this.lastT=Date.now();var S=w.$mouseHandler.isMousePressed;if(this.isOpen){var b=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(b.row,b.column)||S||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||S||(this.lastEvent=y,this.timeout=setTimeout(this.waitForHover,this.idleTime))},g.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var y=Date.now()-this.lastT;if(this.idleTime-y>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-y);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},g.prototype.isOutsideOfText=function(y){var w=y.editor,S=y.getDocumentPosition(),b=w.session.getLine(S.row);if(S.column==b.length){var _=w.renderer.pixelToScreenCoordinates(y.clientX,y.clientY),v=w.session.documentToScreenPosition(S.row,S.column);if(v.column!=_.column||v.row!=_.row)return!0}return!1},g.prototype.setDataProvider=function(y){this.$gatherData=y},g.prototype.showForRange=function(y,w,S,b){var _=10;if(!(b&&b!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var v=y.renderer;this.isOpen||(f.addPopup(this),this.$registerCloseEvents(),this.setTheme(v.theme)),this.isOpen=!0,this.addMarker(w,y.session),this.range=s.fromPoints(w.start,w.end);var E=v.textToScreenCoordinates(w.start.row,w.start.column),x=v.scroller.getBoundingClientRect();E.pageX<x.left&&(E.pageX=x.left);var T=this.getElement();T.innerHTML="",T.appendChild(S),T.style.maxHeight="",T.style.display="block";var k=T.clientHeight,$=T.clientWidth,R=window.innerHeight-E.pageY-v.lineHeight,A=!0;E.pageY-k<0&&E.pageY<R&&(A=!1),T.style.maxHeight=(A?E.pageY:R)-_+"px",T.style.top=A?"":E.pageY+v.lineHeight+"px",T.style.bottom=A?window.innerHeight-E.pageY+"px":"",T.style.left=Math.min(E.pageX,window.innerWidth-$-_)+"px"}},g.prototype.addMarker=function(y,w){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=w,this.marker=w&&w.addMarker(y,"ace_highlight-marker","text")},g.prototype.hide=function(y){!y&&document.activeElement==this.getElement()||y&&y.target&&(y.type!="keydown"||y.ctrlKey||y.metaKey)&&this.$element.contains(y.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,f.removePopup(this)))},g.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},g.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},g.prototype.onMouseOut=function(y){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!y.relatedTarget||this.getElement().contains(y.relatedTarget)||y&&y.currentTarget.contains(y.relatedTarget)||y.relatedTarget.classList.contains("ace_content")||this.hide())},g}(c);i.HoverTooltip=d}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(n,i,r){var o=this&&this.__extends||function(){var f=function(d,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(g[w]=y[w])},f(d,m)};return function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");f(d,m);function g(){this.constructor=d}d.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),l=this&&this.__values||function(f){var d=typeof Symbol=="function"&&Symbol.iterator,m=d&&f[d],g=0;if(m)return m.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&g>=f.length&&(f=void 0),{value:f&&f[g++],done:!f}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},u=n("../lib/dom"),s=n("../lib/event"),p=n("../tooltip").Tooltip,a=n("../config").nls;n("../lib/lang");function c(f){var d=f.editor,m=d.renderer.$gutterLayer,g=new h(d);f.editor.setDefaultHandler("guttermousedown",function(v){if(!(!d.isFocused()||v.getButton()!=0)){var E=m.getRegion(v);if(E!="foldWidgets"){var x=v.getDocumentPosition().row,T=d.session.selection;if(v.getShiftKey())T.selectTo(x,0);else{if(v.domEvent.detail==2)return d.selectAll(),v.preventDefault();f.$clickSelection=d.selection.getLineRange(x)}return f.setState("selectByLines"),f.captureMouse(v),v.preventDefault()}}});var y,w;function S(){var v=w.getDocumentPosition().row,E=d.session.getLength();if(v==E){var x=d.renderer.pixelToScreenCoordinates(0,w.y).row,T=w.$pos;if(x>d.session.documentToScreenRow(T.row,T.column))return b()}if(g.showTooltip(v),!!g.isOpen)if(d.on("mousewheel",b),f.$tooltipFollowsMouse)_(w);else{var k=w.getGutterRow(),$=m.$lines.get(k);if($){var R=$.element.querySelector(".ace_gutter_annotation"),A=R.getBoundingClientRect(),C=g.getElement().style;C.left=A.right+"px",C.top=A.bottom+"px"}else _(w)}}function b(){y&&(y=clearTimeout(y)),g.isOpen&&(g.hideTooltip(),d.off("mousewheel",b))}function _(v){g.setPosition(v.x,v.y)}f.editor.setDefaultHandler("guttermousemove",function(v){var E=v.domEvent.target||v.domEvent.srcElement;if(u.hasCssClass(E,"ace_fold-widget"))return b();g.isOpen&&f.$tooltipFollowsMouse&&_(v),w=v,!y&&(y=setTimeout(function(){y=null,w&&!f.isMousePressed?S():b()},50))}),s.addListener(d.renderer.$gutter,"mouseout",function(v){w=null,!(!g.isOpen||y)&&(y=setTimeout(function(){y=null,b()},50))},d),d.on("changeSession",b),d.on("input",b)}i.GutterHandler=c;var h=function(f){o(d,f);function d(m){var g=f.call(this,m.container)||this;return g.editor=m,g}return d.prototype.setPosition=function(m,g){var y=window.innerWidth||document.documentElement.clientWidth,w=window.innerHeight||document.documentElement.clientHeight,S=this.getWidth(),b=this.getHeight();m+=15,g+=15,m+S>y&&(m-=m+S-y),g+b>w&&(g-=20+b),p.prototype.setPosition.call(this,m,g)},Object.defineProperty(d,"annotationLabels",{get:function(){return{error:{singular:a("gutter-tooltip.aria-label.error.singular","error"),plural:a("gutter-tooltip.aria-label.error.plural","errors")},warning:{singular:a("gutter-tooltip.aria-label.warning.singular","warning"),plural:a("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:a("gutter-tooltip.aria-label.info.singular","information message"),plural:a("gutter-tooltip.aria-label.info.plural","information messages")}}},enumerable:!1,configurable:!0}),d.prototype.showTooltip=function(m){var g,y=this.editor.renderer.$gutterLayer,w=y.$annotations[m],S;w?S={displayText:Array.from(w.displayText),type:Array.from(w.type)}:S={displayText:[],type:[]};var b=y.session.getFoldLine(m);if(b&&y.$showFoldedAnnotations){for(var _={error:[],warning:[],info:[]},v,E=m+1;E<=b.end.row;E++)if(y.$annotations[E])for(var x=0;x<y.$annotations[E].text.length;x++){var T=y.$annotations[E].type[x];if(_[T].push(y.$annotations[E].text[x]),T==="error"){v="error_fold";continue}if(T==="warning"){v="warning_fold";continue}}if(v==="error_fold"||v==="warning_fold"){var k="".concat(d.annotationsToSummaryString(_)," in folded code.");S.displayText.push(k),S.type.push(v)}}if(S.displayText.length===0)return this.hide();for(var $={error:[],warning:[],info:[]},R=y.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",E=0;E<S.displayText.length;E++){var A=u.createElement("span"),C=u.createElement("span");(g=C.classList).add.apply(g,["ace_".concat(S.type[E]),R]),C.setAttribute("aria-label","".concat(d.annotationLabels[S.type[E].replace("_fold","")].singular)),C.setAttribute("role","img"),C.appendChild(u.createTextNode(" ")),A.appendChild(C),A.appendChild(u.createTextNode(S.displayText[E])),A.appendChild(u.createElement("br")),$[S.type[E].replace("_fold","")].push(A)}var M=this.getElement();u.removeChildren(M),$.error.forEach(function(I){return M.appendChild(I)}),$.warning.forEach(function(I){return M.appendChild(I)}),$.info.forEach(function(I){return M.appendChild(I)}),M.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},d.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},d.annotationsToSummaryString=function(m){var g,y,w=[],S=["error","warning","info"];try{for(var b=l(S),_=b.next();!_.done;_=b.next()){var v=_.value;if(m[v].length){var E=m[v].length===1?d.annotationLabels[v].singular:d.annotationLabels[v].plural;w.push("".concat(m[v].length," ").concat(E))}}}catch(x){g={error:x}}finally{try{_&&!_.done&&(y=b.return)&&y.call(b)}finally{if(g)throw g.error}}return w.join(", ")},d}(p);i.GutterTooltip=h}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,i,r){var o=n("../lib/event"),l=n("../lib/useragent"),u=function(){function s(p,a){this.speed,this.wheelX,this.wheelY,this.domEvent=p,this.editor=a,this.x=this.clientX=p.clientX,this.y=this.clientY=p.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return s.prototype.stopPropagation=function(){o.stopPropagation(this.domEvent),this.propagationStopped=!0},s.prototype.preventDefault=function(){o.preventDefault(this.domEvent),this.defaultPrevented=!0},s.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},s.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},s.prototype.getGutterRow=function(){var p=this.getDocumentPosition().row,a=this.editor.session.documentToScreenRow(p,0),c=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return a-c},s.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var p=this.editor,a=p.getSelectionRange();if(a.isEmpty())this.$inSelection=!1;else{var c=this.getDocumentPosition();this.$inSelection=a.contains(c.row,c.column)}return this.$inSelection},s.prototype.getButton=function(){return o.getButton(this.domEvent)},s.prototype.getShiftKey=function(){return this.domEvent.shiftKey},s.prototype.getAccelKey=function(){return l.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},s}();i.MouseEvent=u}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(n,i,r){var o=n("../lib/dom"),l=n("../lib/event"),u=n("../lib/useragent"),s=200,p=200,a=5;function c(f){var d=f.editor,m=o.createElement("div");m.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",m.textContent=" ";var g=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];g.forEach(function(W){f[W]=this[W]},this),d.on("mousedown",this.onMouseDown.bind(f));var y=d.container,w,S,b,_,v,E,x=0,T,k,$,R,A;this.onDragStart=function(W){if(this.cancelDrag||!y.draggable){var V=this;return setTimeout(function(){V.startSelect(),V.captureMouse(W)},0),W.preventDefault()}v=d.getSelectionRange();var G=W.dataTransfer;G.effectAllowed=d.getReadOnly()?"copy":"copyMove",d.container.appendChild(m),G.setDragImage&&G.setDragImage(m,0,0),setTimeout(function(){d.container.removeChild(m)}),G.clearData(),G.setData("Text",d.session.getTextRange()),k=!0,this.setState("drag")},this.onDragEnd=function(W){if(y.draggable=!1,k=!1,this.setState(null),!d.getReadOnly()){var V=W.dataTransfer.dropEffect;!T&&V=="move"&&d.session.remove(d.getSelectionRange()),d.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(W){if(!(d.getReadOnly()||!Z(W.dataTransfer)))return S=W.clientX,b=W.clientY,w||D(),x++,W.dataTransfer.dropEffect=T=Q(W),l.preventDefault(W)},this.onDragOver=function(W){if(!(d.getReadOnly()||!Z(W.dataTransfer)))return S=W.clientX,b=W.clientY,w||(D(),x++),F!==null&&(F=null),W.dataTransfer.dropEffect=T=Q(W),l.preventDefault(W)},this.onDragLeave=function(W){if(x--,x<=0&&w)return B(),T=null,l.preventDefault(W)},this.onDrop=function(W){if(E){var V=W.dataTransfer;if(k)switch(T){case"move":v.contains(E.row,E.column)?v={start:E,end:E}:v=d.moveText(v,E);break;case"copy":v=d.moveText(v,E,!0);break}else{var G=V.getData("Text");v={start:E,end:d.session.insert(E,G)},d.focus(),T=null}return B(),l.preventDefault(W)}},l.addListener(y,"dragstart",this.onDragStart.bind(f),d),l.addListener(y,"dragend",this.onDragEnd.bind(f),d),l.addListener(y,"dragenter",this.onDragEnter.bind(f),d),l.addListener(y,"dragover",this.onDragOver.bind(f),d),l.addListener(y,"dragleave",this.onDragLeave.bind(f),d),l.addListener(y,"drop",this.onDrop.bind(f),d);function C(W,V){var G=Date.now(),U=!V||W.row!=V.row,ee=!V||W.column!=V.column;if(!R||U||ee)d.moveCursorToPosition(W),R=G,A={x:S,y:b};else{var Y=h(A.x,A.y,S,b);Y>a?R=null:G-R>=p&&(d.renderer.scrollCursorIntoView(),R=null)}}function M(W,V){var G=Date.now(),U=d.renderer.layerConfig.lineHeight,ee=d.renderer.layerConfig.characterWidth,Y=d.renderer.scroller.getBoundingClientRect(),O={x:{left:S-Y.left,right:Y.right-S},y:{top:b-Y.top,bottom:Y.bottom-b}},L=Math.min(O.x.left,O.x.right),P=Math.min(O.y.top,O.y.bottom),z={row:W.row,column:W.column};L/ee<=2&&(z.column+=O.x.left<O.x.right?-3:2),P/U<=1&&(z.row+=O.y.top<O.y.bottom?-1:1);var K=W.row!=z.row,te=W.column!=z.column,ne=!V||W.row!=V.row;K||te&&!ne?$?G-$>=s&&d.renderer.scrollCursorIntoView(z):$=G:$=null}function I(){var W=E;E=d.renderer.screenToTextCoordinates(S,b),C(E,W),M(E,W)}function D(){v=d.selection.toOrientedRange(),w=d.session.addMarker(v,"ace_selection",d.getSelectionStyle()),d.clearSelection(),d.isFocused()&&d.renderer.$cursorLayer.setBlinking(!1),clearInterval(_),I(),_=setInterval(I,20),x=0,l.addListener(document,"mousemove",j)}function B(){clearInterval(_),d.session.removeMarker(w),w=null,d.selection.fromOrientedRange(v),d.isFocused()&&!k&&d.$resetCursorStyle(),v=null,E=null,x=0,$=null,R=null,l.removeListener(document,"mousemove",j)}var F=null;function j(){F==null&&(F=setTimeout(function(){F!=null&&w&&B()},20))}function Z(W){var V=W.types;return!V||Array.prototype.some.call(V,function(G){return G=="text/plain"||G=="Text"})}function Q(W){var V=["copy","copymove","all","uninitialized"],G=["move","copymove","linkmove","all","uninitialized"],U=u.isMac?W.altKey:W.ctrlKey,ee="uninitialized";try{ee=W.dataTransfer.effectAllowed.toLowerCase()}catch{}var Y="none";return U&&V.indexOf(ee)>=0?Y="copy":G.indexOf(ee)>=0?Y="move":V.indexOf(ee)>=0&&(Y="copy"),Y}}(function(){this.dragWait=function(){var f=Date.now()-this.mousedownEvent.time;f>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var f=this.editor.container;f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(f){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var f=this.editor,d=f.container;d.draggable=!0,f.renderer.$cursorLayer.setBlinking(!1),f.setStyle("ace_dragging");var m=u.isWin?"default":"move";f.renderer.setCursorStyle(m),this.setState("dragReady")},this.onMouseDrag=function(f){var d=this.editor.container;if(u.isIE&&this.state=="dragReady"){var m=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);m>3&&d.dragDrop()}if(this.state==="dragWait"){var m=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);m>0&&(d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(f){if(this.$dragEnabled){this.mousedownEvent=f;var d=this.editor,m=f.inSelection(),g=f.getButton(),y=f.domEvent.detail||1;if(y===1&&g===0&&m){if(f.editor.inMultiSelectMode&&(f.getAccelKey()||f.getShiftKey()))return;this.mousedownEvent.time=Date.now();var w=f.domEvent.target||f.domEvent.srcElement;if("unselectable"in w&&(w.unselectable="on"),d.getDragDelay()){if(u.isWebKit){this.cancelDrag=!0;var S=d.container;S.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(f,this.onMouseDrag.bind(this)),f.defaultPrevented=!0}}}}).call(c.prototype);function h(f,d,m,g){return Math.sqrt(Math.pow(m-f,2)+Math.pow(g-d,2))}i.DragdropHandler=c}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(n,i,r){var o=n("./mouse_event").MouseEvent,l=n("../lib/event"),u=n("../lib/dom");i.addTouchListeners=function(s,p){var a="scroll",c,h,f,d,m,g,y=0,w,S=0,b=0,_=0,v,E;function x(){var C=window.navigator&&window.navigator.clipboard,M=!1,I=function(){var F=p.getCopyText(),j=p.session.getUndoManager().hasUndo();E.replaceChild(u.buildDom(M?["span",!F&&D("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],F&&D("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],F&&D("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],C&&D("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],j&&D("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],D("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],D("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),E.firstChild)},D=function(F){return p.commands.canExecute(F,p)},B=function(F){var j=F.target.getAttribute("action");if(j=="more"||!M)return M=!M,I();j=="paste"?C.readText().then(function(Z){p.execCommand(j,Z)}):j&&((j=="cut"||j=="copy")&&(C?C.writeText(p.getCopyText()):document.execCommand("copy")),p.execCommand(j)),E.firstChild.style.display="none",M=!1,j!="openCommandPalette"&&p.focus()};E=u.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(F){a="menu",F.stopPropagation(),F.preventDefault(),p.textInput.focus()},ontouchend:function(F){F.stopPropagation(),F.preventDefault(),B(F)},onclick:B},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],p.container)}function T(){if(!p.getOption("enableMobileMenu")){E&&k();return}E||x();var C=p.selection.cursor,M=p.renderer.textToScreenCoordinates(C.row,C.column),I=p.renderer.textToScreenCoordinates(0,0).pageX,D=p.renderer.scrollLeft,B=p.container.getBoundingClientRect();E.style.top=M.pageY-B.top-3+"px",M.pageX-B.left<B.width-70?(E.style.left="",E.style.right="10px"):(E.style.right="",E.style.left=I+D-B.left+"px"),E.style.display="",E.firstChild.style.display="none",p.on("input",k)}function k(C){E&&(E.style.display="none"),p.off("input",k)}function $(){m=null,clearTimeout(m);var C=p.selection.getRange(),M=C.contains(w.row,w.column);(C.isEmpty()||!M)&&(p.selection.moveToPosition(w),p.selection.selectWord()),a="wait",T()}function R(){m=null,clearTimeout(m),p.selection.moveToPosition(w);var C=S>=2?p.selection.getLineRange(w.row):p.session.getBracketRange(w);C&&!C.isEmpty()?p.selection.setRange(C):p.selection.selectWord(),a="wait"}l.addListener(s,"contextmenu",function(C){if(v){var M=p.textInput.getElement();M.focus()}},p),l.addListener(s,"touchstart",function(C){var M=C.touches;if(m||M.length>1){clearTimeout(m),m=null,f=-1,a="zoom";return}v=p.$mouseHandler.isMousePressed=!0;var I=p.renderer.layerConfig.lineHeight,D=p.renderer.layerConfig.lineHeight,B=C.timeStamp;d=B;var F=M[0],j=F.clientX,Z=F.clientY;Math.abs(c-j)+Math.abs(h-Z)>I&&(f=-1),c=C.clientX=j,h=C.clientY=Z,b=_=0;var Q=new o(C,p);if(w=Q.getDocumentPosition(),B-f<500&&M.length==1&&!y)S++,C.preventDefault(),C.button=0,R();else{S=0;var W=p.selection.cursor,V=p.selection.isEmpty()?W:p.selection.anchor,G=p.renderer.$cursorLayer.getPixelPosition(W,!0),U=p.renderer.$cursorLayer.getPixelPosition(V,!0),ee=p.renderer.scroller.getBoundingClientRect(),Y=p.renderer.layerConfig.offset,O=p.renderer.scrollLeft,L=function(K,te){return K=K/D,te=te/I-.75,K*K+te*te};if(C.clientX<ee.left){a="zoom";return}var P=L(C.clientX-ee.left-G.left+O,C.clientY-ee.top-G.top+Y),z=L(C.clientX-ee.left-U.left+O,C.clientY-ee.top-U.top+Y);P<3.5&&z<3.5&&(a=P>z?"cursor":"anchor"),z<3.5?a="anchor":P<3.5?a="cursor":a="scroll",m=setTimeout($,450)}f=B},p),l.addListener(s,"touchend",function(C){v=p.$mouseHandler.isMousePressed=!1,g&&clearInterval(g),a=="zoom"?(a="",y=0):m?(p.selection.moveToPosition(w),y=0,T()):a=="scroll"?(A(),k()):T(),clearTimeout(m),m=null},p),l.addListener(s,"touchmove",function(C){m&&(clearTimeout(m),m=null);var M=C.touches;if(!(M.length>1||a=="zoom")){var I=M[0],D=c-I.clientX,B=h-I.clientY;if(a=="wait")if(D*D+B*B>4)a="cursor";else return C.preventDefault();c=I.clientX,h=I.clientY,C.clientX=I.clientX,C.clientY=I.clientY;var F=C.timeStamp,j=F-d;if(d=F,a=="scroll"){var Z=new o(C,p);Z.speed=1,Z.wheelX=D,Z.wheelY=B,10*Math.abs(D)<Math.abs(B)&&(D=0),10*Math.abs(B)<Math.abs(D)&&(B=0),j!=0&&(b=D/j,_=B/j),p._emit("mousewheel",Z),Z.propagationStopped||(b=_=0)}else{var Q=new o(C,p),W=Q.getDocumentPosition();a=="cursor"?p.selection.moveCursorToPosition(W):a=="anchor"&&p.selection.setSelectionAnchor(W.row,W.column),p.renderer.scrollCursorIntoView(W),C.preventDefault()}}},p);function A(){y+=60,g=setInterval(function(){y--<=0&&(clearInterval(g),g=null),Math.abs(b)<.01&&(b=0),Math.abs(_)<.01&&(_=0),y<20&&(b=.9*b),y<20&&(_=.9*_);var C=p.session.getScrollTop();p.renderer.scrollBy(10*b,10*_),C==p.session.getScrollTop()&&(y=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(n,i,r){var o=n("../lib/event"),l=n("../lib/useragent"),u=n("./default_handlers").DefaultHandlers,s=n("./default_gutter_handler").GutterHandler,p=n("./mouse_event").MouseEvent,a=n("./dragdrop_handler").DragdropHandler,c=n("./touch_handler").addTouchListeners,h=n("../config"),f=function(){function d(m){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var g=this;this.editor=m,new u(this),new s(this),new a(this);var y=function(b){var _=!document.hasFocus||!document.hasFocus()||!m.isFocused()&&document.activeElement==(m.textInput&&m.textInput.getElement());_&&window.focus(),m.focus(),setTimeout(function(){m.isFocused()||m.focus()})},w=m.renderer.getMouseEventTarget();o.addListener(w,"click",this.onMouseEvent.bind(this,"click"),m),o.addListener(w,"mousemove",this.onMouseMove.bind(this,"mousemove"),m),o.addMultiMouseDownListener([w,m.renderer.scrollBarV&&m.renderer.scrollBarV.inner,m.renderer.scrollBarH&&m.renderer.scrollBarH.inner,m.textInput&&m.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",m),o.addMouseWheelListener(m.container,this.onMouseWheel.bind(this,"mousewheel"),m),c(m.container,m);var S=m.renderer.$gutter;o.addListener(S,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),m),o.addListener(S,"click",this.onMouseEvent.bind(this,"gutterclick"),m),o.addListener(S,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),m),o.addListener(S,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),m),o.addListener(w,"mousedown",y,m),o.addListener(S,"mousedown",y,m),l.isIE&&m.renderer.scrollBarV&&(o.addListener(m.renderer.scrollBarV.element,"mousedown",y,m),o.addListener(m.renderer.scrollBarH.element,"mousedown",y,m)),m.on("mousemove",function(b){if(!(g.state||g.$dragDelay||!g.$dragEnabled)){var _=m.renderer.screenToTextCoordinates(b.x,b.y),v=m.session.selection.getRange(),E=m.renderer;!v.isEmpty()&&v.insideStart(_.row,_.column)?E.setCursorStyle("default"):E.setCursorStyle("")}},m)}return d.prototype.onMouseEvent=function(m,g){this.editor.session&&this.editor._emit(m,new p(g,this.editor))},d.prototype.onMouseMove=function(m,g){var y=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!y||!y.length||this.editor._emit(m,new p(g,this.editor))},d.prototype.onMouseWheel=function(m,g){var y=new p(g,this.editor);y.speed=this.$scrollSpeed*2,y.wheelX=g.wheelX,y.wheelY=g.wheelY,this.editor._emit(m,y)},d.prototype.setState=function(m){this.state=m},d.prototype.captureMouse=function(m,g){this.x=m.x,this.y=m.y,this.isMousePressed=!0;var y=this.editor,w=this.editor.renderer;w.$isMousePressed=!0;var S=this,b=function(T){if(T){if(l.isWebKit&&!T.which&&S.releaseMouse)return S.releaseMouse();S.x=T.clientX,S.y=T.clientY,g&&g(T),S.mouseEvent=new p(T,S.editor),S.$mouseMoved=!0}},_=function(T){y.off("beforeEndOperation",E),clearInterval(x),y.session&&v(),S[S.state+"End"]&&S[S.state+"End"](T),S.state="",S.isMousePressed=w.$isMousePressed=!1,w.$keepTextAreaAtCursor&&w.$moveTextAreaToCursor(),S.$onCaptureMouseMove=S.releaseMouse=null,T&&S.onMouseEvent("mouseup",T),y.endOperation()},v=function(){S[S.state]&&S[S.state](),S.$mouseMoved=!1};if(l.isOldIE&&m.domEvent.type=="dblclick")return setTimeout(function(){_(m)});var E=function(T){S.releaseMouse&&y.curOp.command.name&&y.curOp.selectionChanged&&(S[S.state+"End"]&&S[S.state+"End"](),S.state="",S.releaseMouse())};y.on("beforeEndOperation",E),y.startOperation({command:{name:"mouse"}}),S.$onCaptureMouseMove=b,S.releaseMouse=o.capture(this.editor.container,b,_);var x=setInterval(v,20)},d.prototype.cancelContextMenu=function(){var m=(function(g){g&&g.domEvent&&g.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",m),g&&g.domEvent&&o.stopEvent(g.domEvent))}).bind(this);setTimeout(m,10),this.editor.on("nativecontextmenu",m)},d.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},d}();f.prototype.releaseMouse=null,h.defineOptions(f.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:l.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),i.MouseHandler=f}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("../lib/dom"),l=function(){function u(s){s.on("click",function(p){var a=p.getDocumentPosition(),c=s.session,h=c.getFoldAt(a.row,a.column,1);h&&(p.getAccelKey()?c.removeFold(h):c.expandFold(h),p.stop());var f=p.domEvent&&p.domEvent.target;f&&o.hasCssClass(f,"ace_inline_button")&&o.hasCssClass(f,"ace_toggle_wrap")&&(c.setOption("wrap",!c.getUseWrapMode()),s.renderer.scrollCursorIntoView())}),s.on("gutterclick",function(p){var a=s.renderer.$gutterLayer.getRegion(p);if(a=="foldWidgets"){var c=p.getDocumentPosition().row,h=s.session;h.foldWidgets&&h.foldWidgets[c]&&s.session.onFoldWidgetClick(c,p),s.isFocused()||s.focus(),p.stop()}}),s.on("gutterdblclick",function(p){var a=s.renderer.$gutterLayer.getRegion(p);if(a=="foldWidgets"){var c=p.getDocumentPosition().row,h=s.session,f=h.getParentFoldRangeData(c,!0),d=f.range||f.firstRange;if(d){c=d.start.row;var m=h.getFoldAt(c,h.getLine(c).length,1);m?h.removeFold(m):(h.addFold("...",d),s.renderer.scrollCursorIntoView({row:d.start.row,column:0}))}p.stop()}})}return u}();i.FoldHandler=l}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(n,i,r){var o=n("../lib/keys"),l=n("../lib/event"),u=function(){function s(p){this.$editor=p,this.$data={editor:p},this.$handlers=[],this.setDefaultHandler(p.commands)}return s.prototype.setDefaultHandler=function(p){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=p,this.addKeyboardHandler(p,0)},s.prototype.setKeyboardHandler=function(p){var a=this.$handlers;if(a[a.length-1]!=p){for(;a[a.length-1]&&a[a.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(a[a.length-1]);this.addKeyboardHandler(p,1)}},s.prototype.addKeyboardHandler=function(p,a){if(p){typeof p=="function"&&!p.handleKeyboard&&(p.handleKeyboard=p);var c=this.$handlers.indexOf(p);c!=-1&&this.$handlers.splice(c,1),a==null?this.$handlers.push(p):this.$handlers.splice(a,0,p),c==-1&&p.attach&&p.attach(this.$editor)}},s.prototype.removeKeyboardHandler=function(p){var a=this.$handlers.indexOf(p);return a==-1?!1:(this.$handlers.splice(a,1),p.detach&&p.detach(this.$editor),!0)},s.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},s.prototype.getStatusText=function(){var p=this.$data,a=p.editor;return this.$handlers.map(function(c){return c.getStatusText&&c.getStatusText(a,p)||""}).filter(Boolean).join(" ")},s.prototype.$callKeyboardHandlers=function(p,a,c,h){for(var f,d=!1,m=this.$editor.commands,g=this.$handlers.length;g--&&(f=this.$handlers[g].handleKeyboard(this.$data,p,a,c,h),!(!(!f||!f.command)&&(f.command=="null"?d=!0:d=m.exec(f.command,this.$editor,f.args,h),d&&h&&p!=-1&&f.passEvent!=!0&&f.command.passEvent!=!0&&l.stopEvent(h),d))););return!d&&p==-1&&(f={command:"insertstring"},d=m.exec("insertstring",this.$editor,a)),d&&this.$editor._signal&&this.$editor._signal("keyboardActivity",f),d},s.prototype.onCommandKey=function(p,a,c){var h=o.keyCodeToString(c);return this.$callKeyboardHandlers(a,h,c,p)},s.prototype.onTextInput=function(p){return this.$callKeyboardHandlers(-1,p)},s}();i.KeyBinding=u}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(n,i,r){var o=0,l=0,u=!1,s=!1,p=!1,a=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,f=1,d=0,m=1,g=2,y=3,w=4,S=5,b=6,_=7,v=8,E=9,x=10,T=11,k=12,$=13,R=14,A=15,C=16,M=17,I=18,D=[I,I,I,I,I,I,I,I,I,b,S,b,v,S,I,I,I,I,I,I,I,I,I,I,I,I,I,I,S,S,S,b,v,w,w,T,T,T,w,w,w,w,w,x,E,x,E,E,g,g,g,g,g,g,g,g,g,g,E,w,w,w,w,w,w,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,w,w,w,w,w,w,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,w,w,w,w,I,I,I,I,I,I,S,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,E,w,T,T,T,T,w,w,w,w,d,w,w,I,w,w,T,T,g,g,w,d,w,w,w,g,d,w,w,w,w,w],B=[v,v,v,v,v,v,v,v,v,v,v,I,I,I,d,m,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,v,S,$,R,A,C,M,E,T,T,T,T,T,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,E,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,v];function F(W,V,G,U){var ee=o?c:a,Y=null,O=null,L=null,P=0,z=null,K=null,te=-1,ne=null,fe=null,_e=[];if(!U)for(ne=0,U=[];ne<G;ne++)U[ne]=Q(W[ne]);for(l=o,u=!1,s=!1,p=!1,fe=0;fe<G;fe++){if(Y=P,_e[fe]=O=Z(W,U,_e,fe),P=ee[Y][O],z=P&240,P&=15,V[fe]=L=ee[P][5],z>0)if(z==16){for(ne=te;ne<fe;ne++)V[ne]=1;te=-1}else te=-1;if(K=ee[P][6],K)te==-1&&(te=fe);else if(te>-1){for(ne=te;ne<fe;ne++)V[ne]=L;te=-1}U[fe]==S&&(V[fe]=0),l|=L}if(p){for(ne=0;ne<G;ne++)if(U[ne]==b){V[ne]=o;for(var $e=ne-1;$e>=0&&U[$e]==v;$e--)V[$e]=o}}}function j(W,V,G){if(!(l<W)){if(W==1&&o==f&&!s){G.reverse();return}for(var U=G.length,ee=0,Y,O,L,P;ee<U;){if(V[ee]>=W){for(Y=ee+1;Y<U&&V[Y]>=W;)Y++;for(O=ee,L=Y-1;O<L;O++,L--)P=G[O],G[O]=G[L],G[L]=P;ee=Y}ee++}}}function Z(W,V,G,U){var ee=V[U],Y,O,L,P;switch(ee){case d:case m:u=!1;case w:case y:return ee;case g:return u?y:g;case _:return u=!0,m;case v:return w;case E:return U<1||U+1>=V.length||(Y=G[U-1])!=g&&Y!=y||(O=V[U+1])!=g&&O!=y?w:(u&&(O=y),O==Y?O:w);case x:return Y=U>0?G[U-1]:S,Y==g&&U+1<V.length&&V[U+1]==g?g:w;case T:if(U>0&&G[U-1]==g)return g;if(u)return w;for(P=U+1,L=V.length;P<L&&V[P]==T;)P++;return P<L&&V[P]==g?g:w;case k:for(L=V.length,P=U+1;P<L&&V[P]==k;)P++;if(P<L){var z=W[U],K=z>=1425&&z<=2303||z==64286;if(Y=V[P],K&&(Y==m||Y==_))return m}return U<1||(Y=V[U-1])==S?w:G[U-1];case S:return u=!1,s=!0,o;case b:return p=!0,w;case $:case R:case C:case M:case A:u=!1;case I:return w}}function Q(W){var V=W.charCodeAt(0),G=V>>8;return G==0?V>191?d:D[V]:G==5?/[\u0591-\u05f4]/.test(W)?m:d:G==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(W)?k:/[\u0660-\u0669\u066b-\u066c]/.test(W)?y:V==1642?T:/[\u06f0-\u06f9]/.test(W)?g:_:G==32&&V<=8287?B[V&255]:G==254&&V>=65136?_:w}i.L=d,i.R=m,i.EN=g,i.ON_R=3,i.AN=4,i.R_H=5,i.B=6,i.RLE=7,i.DOT="·",i.doBidiReorder=function(W,V,G){if(W.length<2)return{};var U=W.split(""),ee=new Array(U.length),Y=new Array(U.length),O=[];o=G?f:h,F(U,O,U.length,V);for(var L=0;L<ee.length;ee[L]=L,L++);j(2,O,ee),j(1,O,ee);for(var L=0;L<ee.length-1;L++)V[L]===y?O[L]=i.AN:O[L]===m&&(V[L]>_&&V[L]<$||V[L]===w||V[L]===I)?O[L]=i.ON_R:L>0&&U[L-1]==="ل"&&/\u0622|\u0623|\u0625|\u0627/.test(U[L])&&(O[L-1]=O[L]=i.R_H,L++);U[U.length-1]===i.DOT&&(O[U.length-1]=i.B),U[0]==="‫"&&(O[0]=i.RLE);for(var L=0;L<ee.length;L++)Y[L]=O[ee[L]];return{logicalFromVisual:ee,bidiLevels:Y}},i.hasBidiCharacters=function(W,V){for(var G=!1,U=0;U<W.length;U++)V[U]=Q(W.charAt(U)),!G&&(V[U]==m||V[U]==_||V[U]==y)&&(G=!0);return G},i.getVisualFromLogicalIdx=function(W,V){for(var G=0;G<V.logicalFromVisual.length;G++)if(V.logicalFromVisual[G]==W)return G;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(n,i,r){var o=n("./lib/bidiutil"),l=n("./lib/lang"),u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(){function p(a){this.session=a,this.bidiMap={},this.currentRow=null,this.bidiUtil=o,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=u.test(a.getValue())}return p.prototype.isBidiRow=function(a,c,h){return this.seenBidi?(a!==this.currentRow&&(this.currentRow=a,this.updateRowLine(c,h),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},p.prototype.onChange=function(a){this.seenBidi?this.currentRow=null:a.action=="insert"&&u.test(a.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},p.prototype.getDocumentRow=function(){var a=0,c=this.session.$screenRowCache;if(c.length){var h=this.session.$getRowCacheIndex(c,this.currentRow);h>=0&&(a=this.session.$docRowCache[h])}return a},p.prototype.getSplitIndex=function(){var a=0,c=this.session.$screenRowCache;if(c.length)for(var h,f=this.session.$getRowCacheIndex(c,this.currentRow);this.currentRow-a>0&&(h=this.session.$getRowCacheIndex(c,this.currentRow-a-1),h===f);)f=h,a++;else a=this.currentRow;return a},p.prototype.updateRowLine=function(a,c){a===void 0&&(a=this.getDocumentRow());var h=a===this.session.getLength()-1,f=h?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(a),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var d=this.session.$wrapData[a];d&&(c===void 0&&(c=this.getSplitIndex()),c>0&&d.length?(this.wrapIndent=d.indent,this.wrapOffset=this.wrapIndent*this.charWidths[o.L],this.line=c<d.length?this.line.substring(d[c-1],d[c]):this.line.substring(d[d.length-1])):this.line=this.line.substring(0,d[c]),c==d.length&&(this.line+=this.showInvisibles?f:o.DOT))}else this.line+=this.showInvisibles?f:o.DOT;var m=this.session,g=0,y;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(w,S){return w==="	"||m.isFullWidth(w.charCodeAt(0))?(y=w==="	"?m.getScreenTabSize(S+g):2,g+=y-1,l.stringRepeat(o.DOT,y)):w}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==o.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},p.prototype.updateBidiMap=function(){var a=[];o.hasBidiCharacters(this.line,a)||this.isRtlDir?this.bidiMap=o.doBidiReorder(this.line,a,this.isRtlDir):this.bidiMap={}},p.prototype.markAsDirty=function(){this.currentRow=null},p.prototype.updateCharacterWidths=function(a){if(this.characterWidth!==a.$characterSize.width){this.fontMetrics=a;var c=this.characterWidth=a.$characterSize.width,h=a.$measureCharWidth("ה");this.charWidths[o.L]=this.charWidths[o.EN]=this.charWidths[o.ON_R]=c,this.charWidths[o.R]=this.charWidths[o.AN]=h,this.charWidths[o.R_H]=h*.45,this.charWidths[o.B]=this.charWidths[o.RLE]=0,this.currentRow=null}},p.prototype.setShowInvisibles=function(a){this.showInvisibles=a,this.currentRow=null},p.prototype.setEolChar=function(a){this.EOL=a},p.prototype.setContentWidth=function(a){this.contentWidth=a},p.prototype.isRtlLine=function(a){return this.$isRtl?!0:a!=null?this.session.getLine(a).charAt(0)==this.RLE:this.isRtlDir},p.prototype.setRtlDirection=function(a,c){for(var h=a.getCursorPosition(),f=a.selection.getSelectionAnchor().row;f<=h.row;f++)!c&&a.session.getLine(f).charAt(0)===a.session.$bidiHandler.RLE?a.session.doc.removeInLine(f,0,1):c&&a.session.getLine(f).charAt(0)!==a.session.$bidiHandler.RLE&&a.session.doc.insert({column:0,row:f},a.session.$bidiHandler.RLE)},p.prototype.getPosLeft=function(a){a-=this.wrapIndent;var c=this.line.charAt(0)===this.RLE?1:0,h=a>c?this.session.getOverwrite()?a:a-1:c,f=o.getVisualFromLogicalIdx(h,this.bidiMap),d=this.bidiMap.bidiLevels,m=0;!this.session.getOverwrite()&&a<=c&&d[f]%2!==0&&f++;for(var g=0;g<f;g++)m+=this.charWidths[d[g]];return!this.session.getOverwrite()&&a>c&&d[f]%2===0&&(m+=this.charWidths[d[f]]),this.wrapIndent&&(m+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(m+=this.rtlLineOffset),m},p.prototype.getSelections=function(a,c){var h=this.bidiMap,f=h.bidiLevels,d,m=[],g=0,y=Math.min(a,c)-this.wrapIndent,w=Math.max(a,c)-this.wrapIndent,S=!1,b=!1,_=0;this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var v,E=0;E<f.length;E++)v=h.logicalFromVisual[E],d=f[E],S=v>=y&&v<w,S&&!b?_=g:!S&&b&&m.push({left:_,width:g-_}),g+=this.charWidths[d],b=S;if(S&&E===f.length&&m.push({left:_,width:g-_}),this.isRtlDir)for(var x=0;x<m.length;x++)m[x].left+=this.rtlLineOffset;return m},p.prototype.offsetToCol=function(h){this.isRtlDir&&(h-=this.rtlLineOffset);var c=0,h=Math.max(h,0),f=0,d=0,m=this.bidiMap.bidiLevels,g=this.charWidths[m[d]];for(this.wrapIndent&&(h-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);h>f+g/2;){if(f+=g,d===m.length-1){g=0;break}g=this.charWidths[m[++d]]}return d>0&&m[d-1]%2!==0&&m[d]%2===0?(h<f&&d--,c=this.bidiMap.logicalFromVisual[d]):d>0&&m[d-1]%2===0&&m[d]%2!==0?c=1+(h>f?this.bidiMap.logicalFromVisual[d]:this.bidiMap.logicalFromVisual[d-1]):this.isRtlDir&&d===m.length-1&&g===0&&m[d-1]%2===0||!this.isRtlDir&&d===0&&m[d]%2!==0?c=1+this.bidiMap.logicalFromVisual[d]:(d>0&&m[d-1]%2!==0&&g!==0&&d--,c=this.bidiMap.logicalFromVisual[d]),c===0&&this.isRtlDir&&c++,c+this.wrapIndent},p}();i.BidiHandler=s}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(n,i,r){var o=n("./lib/oop"),l=n("./lib/lang"),u=n("./lib/event_emitter").EventEmitter,s=n("./range").Range,p=function(){function a(c){this.session=c,this.doc=c.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var h=this;this.cursor.on("change",function(f){h.$cursorChanged=!0,h.$silent||h._emit("changeCursor"),!h.$isEmpty&&!h.$silent&&h._emit("changeSelection"),!h.$keepDesiredColumnOnChange&&f.old.column!=f.value.column&&(h.$desiredColumn=null)}),this.anchor.on("change",function(){h.$anchorChanged=!0,!h.$isEmpty&&!h.$silent&&h._emit("changeSelection")})}return a.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},a.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},a.prototype.getCursor=function(){return this.lead.getPosition()},a.prototype.setAnchor=function(c,h){this.$isEmpty=!1,this.anchor.setPosition(c,h)},a.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},a.prototype.getSelectionLead=function(){return this.lead.getPosition()},a.prototype.isBackwards=function(){var c=this.anchor,h=this.lead;return c.row>h.row||c.row==h.row&&c.column>h.column},a.prototype.getRange=function(){var c=this.anchor,h=this.lead;return this.$isEmpty?s.fromPoints(h,h):this.isBackwards()?s.fromPoints(h,c):s.fromPoints(c,h)},a.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},a.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},a.prototype.setRange=function(c,h){var f=h?c.end:c.start,d=h?c.start:c.end;this.$setSelection(f.row,f.column,d.row,d.column)},a.prototype.$setSelection=function(c,h,f,d){if(!this.$silent){var m=this.$isEmpty,g=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(c,h),this.cursor.setPosition(f,d),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||m!=this.$isEmpty||g)&&this._emit("changeSelection")}},a.prototype.$moveSelection=function(c){var h=this.lead;this.$isEmpty&&this.setSelectionAnchor(h.row,h.column),c.call(this)},a.prototype.selectTo=function(c,h){this.$moveSelection(function(){this.moveCursorTo(c,h)})},a.prototype.selectToPosition=function(c){this.$moveSelection(function(){this.moveCursorToPosition(c)})},a.prototype.moveTo=function(c,h){this.clearSelection(),this.moveCursorTo(c,h)},a.prototype.moveToPosition=function(c){this.clearSelection(),this.moveCursorToPosition(c)},a.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},a.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},a.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},a.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},a.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},a.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},a.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},a.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},a.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},a.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},a.prototype.getWordRange=function(c,h){if(typeof h>"u"){var f=c||this.lead;c=f.row,h=f.column}return this.session.getWordRange(c,h)},a.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},a.prototype.selectAWord=function(){var c=this.getCursor(),h=this.session.getAWordRange(c.row,c.column);this.setSelectionRange(h)},a.prototype.getLineRange=function(c,h){var f=typeof c=="number"?c:this.lead.row,d,m=this.session.getFoldLine(f);return m?(f=m.start.row,d=m.end.row):d=f,h===!0?new s(f,0,d,this.session.getLine(d).length):new s(f,0,d+1,0)},a.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},a.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},a.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},a.prototype.wouldMoveIntoSoftTab=function(c,h,f){var d=c.column,m=c.column+h;return f<0&&(d=c.column-h,m=c.column),this.session.isTabStop(c)&&this.doc.getLine(c.row).slice(d,m).split(" ").length-1==h},a.prototype.moveCursorLeft=function(){var c=this.lead.getPosition(),h;if(h=this.session.getFoldAt(c.row,c.column,-1))this.moveCursorTo(h.start.row,h.start.column);else if(c.column===0)c.row>0&&this.moveCursorTo(c.row-1,this.doc.getLine(c.row-1).length);else{var f=this.session.getTabSize();this.wouldMoveIntoSoftTab(c,f,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-f):this.moveCursorBy(0,-1)}},a.prototype.moveCursorRight=function(){var c=this.lead.getPosition(),h;if(h=this.session.getFoldAt(c.row,c.column,1))this.moveCursorTo(h.end.row,h.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var f=this.session.getTabSize(),c=this.lead;this.wouldMoveIntoSoftTab(c,f,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,f):this.moveCursorBy(0,1)}},a.prototype.moveCursorLineStart=function(){var c=this.lead.row,h=this.lead.column,f=this.session.documentToScreenRow(c,h),d=this.session.screenToDocumentPosition(f,0),m=this.session.getDisplayLine(c,null,d.row,d.column),g=m.match(/^\s*/);g[0].length!=h&&!this.session.$useEmacsStyleLineStart&&(d.column+=g[0].length),this.moveCursorToPosition(d)},a.prototype.moveCursorLineEnd=function(){var c=this.lead,h=this.session.getDocumentLastRowColumnPosition(c.row,c.column);if(this.lead.column==h.column){var f=this.session.getLine(h.row);if(h.column==f.length){var d=f.search(/\s+$/);d>0&&(h.column=d)}}this.moveCursorTo(h.row,h.column)},a.prototype.moveCursorFileEnd=function(){var c=this.doc.getLength()-1,h=this.doc.getLine(c).length;this.moveCursorTo(c,h)},a.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},a.prototype.moveCursorLongWordRight=function(){var c=this.lead.row,h=this.lead.column,f=this.doc.getLine(c),d=f.substring(h);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var m=this.session.getFoldAt(c,h,1);if(m){this.moveCursorTo(m.end.row,m.end.column);return}if(this.session.nonTokenRe.exec(d)&&(h+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,d=f.substring(h)),h>=f.length){this.moveCursorTo(c,f.length),this.moveCursorRight(),c<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(d)&&(h+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(c,h)},a.prototype.moveCursorLongWordLeft=function(){var c=this.lead.row,h=this.lead.column,f;if(f=this.session.getFoldAt(c,h,-1)){this.moveCursorTo(f.start.row,f.start.column);return}var d=this.session.getFoldStringAt(c,h,-1);d==null&&(d=this.doc.getLine(c).substring(0,h));var m=l.stringReverse(d);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(m)&&(h-=this.session.nonTokenRe.lastIndex,m=m.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),h<=0){this.moveCursorTo(c,0),this.moveCursorLeft(),c>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(m)&&(h-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(c,h)},a.prototype.$shortWordEndIndex=function(c){var h=0,f,d=/\s/,m=this.session.tokenRe;if(m.lastIndex=0,this.session.tokenRe.exec(c))h=this.session.tokenRe.lastIndex;else{for(;(f=c[h])&&d.test(f);)h++;if(h<1){for(m.lastIndex=0;(f=c[h])&&!m.test(f);)if(m.lastIndex=0,h++,d.test(f))if(h>2){h--;break}else{for(;(f=c[h])&&d.test(f);)h++;if(h>2)break}}}return m.lastIndex=0,h},a.prototype.moveCursorShortWordRight=function(){var c=this.lead.row,h=this.lead.column,f=this.doc.getLine(c),d=f.substring(h),m=this.session.getFoldAt(c,h,1);if(m)return this.moveCursorTo(m.end.row,m.end.column);if(h==f.length){var g=this.doc.getLength();do c++,d=this.doc.getLine(c);while(c<g&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),h=0}var y=this.$shortWordEndIndex(d);this.moveCursorTo(c,h+y)},a.prototype.moveCursorShortWordLeft=function(){var c=this.lead.row,h=this.lead.column,f;if(f=this.session.getFoldAt(c,h,-1))return this.moveCursorTo(f.start.row,f.start.column);var d=this.session.getLine(c).substring(0,h);if(h===0){do c--,d=this.doc.getLine(c);while(c>0&&/^\s*$/.test(d));h=d.length,/\s+$/.test(d)||(d="")}var m=l.stringReverse(d),g=this.$shortWordEndIndex(m);return this.moveCursorTo(c,h-g)},a.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},a.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},a.prototype.moveCursorBy=function(c,h){var f=this.session.documentToScreenPosition(this.lead.row,this.lead.column),d;if(h===0&&(c!==0&&(this.session.$bidiHandler.isBidiRow(f.row,this.lead.row)?(d=this.session.$bidiHandler.getPosLeft(f.column),f.column=Math.round(d/this.session.$bidiHandler.charWidths[0])):d=f.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?f.column=this.$desiredColumn:this.$desiredColumn=f.column),c!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var m=this.session.lineWidgets[this.lead.row];c<0?c-=m.rowsAbove||0:c>0&&(c+=m.rowCount-(m.rowsAbove||0))}var g=this.session.screenToDocumentPosition(f.row+c,f.column,d);c!==0&&h===0&&g.row===this.lead.row&&(g.column,this.lead.column),this.moveCursorTo(g.row,g.column+h,h===0)},a.prototype.moveCursorToPosition=function(c){this.moveCursorTo(c.row,c.column)},a.prototype.moveCursorTo=function(c,h,f){var d=this.session.getFoldAt(c,h,1);d&&(c=d.start.row,h=d.start.column),this.$keepDesiredColumnOnChange=!0;var m=this.session.getLine(c);/[\uDC00-\uDFFF]/.test(m.charAt(h))&&m.charAt(h-1)&&(this.lead.row==c&&this.lead.column==h+1?h=h-1:h=h+1),this.lead.setPosition(c,h),this.$keepDesiredColumnOnChange=!1,f||(this.$desiredColumn=null)},a.prototype.moveCursorToScreen=function(c,h,f){var d=this.session.screenToDocumentPosition(c,h);this.moveCursorTo(d.row,d.column,f)},a.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},a.prototype.fromOrientedRange=function(c){this.setSelectionRange(c,c.cursor==c.start),this.$desiredColumn=c.desiredColumn||this.$desiredColumn},a.prototype.toOrientedRange=function(c){var h=this.getRange();return c?(c.start.column=h.start.column,c.start.row=h.start.row,c.end.column=h.end.column,c.end.row=h.end.row):c=h,c.cursor=this.isBackwards()?c.start:c.end,c.desiredColumn=this.$desiredColumn,c},a.prototype.getRangeOfMovements=function(c){var h=this.getCursor();try{c(this);var f=this.getCursor();return s.fromPoints(h,f)}catch{return s.fromPoints(h,h)}finally{this.moveCursorToPosition(h)}},a.prototype.toJSON=function(){if(this.rangeCount)var c=this.ranges.map(function(h){var f=h.clone();return f.isBackwards=h.cursor==h.start,f});else{var c=this.getRange();c.isBackwards=this.isBackwards()}return c},a.prototype.fromJSON=function(c){if(c.start==null)if(this.rangeList&&c.length>1){this.toSingleRange(c[0]);for(var h=c.length;h--;){var f=s.fromPoints(c[h].start,c[h].end);c[h].isBackwards&&(f.cursor=f.start),this.addRange(f,!0)}return}else c=c[0];this.rangeList&&this.toSingleRange(c),this.setSelectionRange(c,c.isBackwards)},a.prototype.isEqual=function(c){if((c.length||this.rangeCount)&&c.length!=this.rangeCount)return!1;if(!c.length||!this.ranges)return this.getRange().isEqual(c);for(var h=this.ranges.length;h--;)if(!this.ranges[h].isEqual(c[h]))return!1;return!0},a}();p.prototype.setSelectionAnchor=p.prototype.setAnchor,p.prototype.getSelectionAnchor=p.prototype.getAnchor,p.prototype.setSelectionRange=p.prototype.setRange,o.implement(p.prototype,u),i.Selection=p}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(n,i,r){var o=n("./lib/report_error").reportError,l=2e3,u=function(){function s(p){this.splitRegex,this.states=p,this.regExps={},this.matchMappings={};for(var a in this.states){for(var c=this.states[a],h=[],f=0,d=this.matchMappings[a]={defaultToken:"text"},m="g",g=[],y=0;y<c.length;y++){var w=c[y];if(w.defaultToken&&(d.defaultToken=w.defaultToken),w.caseInsensitive&&m.indexOf("i")===-1&&(m+="i"),w.unicode&&m.indexOf("u")===-1&&(m+="u"),w.regex!=null){w.regex instanceof RegExp&&(w.regex=w.regex.toString().slice(1,-1));var S=w.regex,b=new RegExp("(?:("+S+")|(.))").exec("a").length-2;Array.isArray(w.token)?w.token.length==1||b==1?w.token=w.token[0]:b-1!=w.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:w,groupCount:b-1}),w.token=w.token[0]):(w.tokenArray=w.token,w.token=null,w.onMatch=this.$arrayTokens):typeof w.token=="function"&&!w.onMatch&&(b>1?w.onMatch=this.$applyToken:w.onMatch=w.token),b>1&&(/\\\d/.test(w.regex)?S=w.regex.replace(/\\([0-9]+)/g,function(_,v){return"\\"+(parseInt(v,10)+f+1)}):(b=1,S=this.removeCapturingGroups(w.regex)),!w.splitRegex&&typeof w.token!="string"&&g.push(w)),d[f]=y,f+=b,h.push(S),w.onMatch||(w.onMatch=null)}}h.length||(d[0]=0,h.push("$")),g.forEach(function(_){_.splitRegex=this.createSplitterRegexp(_.regex,m)},this),this.regExps[a]=new RegExp("("+h.join(")|(")+")|($)",m)}}return s.prototype.$setMaxTokenCount=function(p){l=p|0},s.prototype.$applyToken=function(p){var a=this.splitRegex.exec(p).slice(1),c=this.token.apply(this,a);if(typeof c=="string")return[{type:c,value:p}];for(var h=[],f=0,d=c.length;f<d;f++)a[f]&&(h[h.length]={type:c[f],value:a[f]});return h},s.prototype.$arrayTokens=function(p){if(!p)return[];var a=this.splitRegex.exec(p);if(!a)return"text";for(var c=[],h=this.tokenArray,f=0,d=h.length;f<d;f++)a[f+1]&&(c[c.length]={type:h[f],value:a[f+1]});return c},s.prototype.removeCapturingGroups=function(p){var a=p.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(c,h){return h?"(?:":c});return a},s.prototype.createSplitterRegexp=function(p,a){if(p.indexOf("(?=")!=-1){var c=0,h=!1,f={};p.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(d,m,g,y,w,S){return h?h=w!="]":w?h=!0:y?(c==f.stack&&(f.end=S+1,f.stack=-1),c--):g&&(c++,g.length!=1&&(f.stack=c,f.start=S)),d}),f.end!=null&&/^\)*$/.test(p.substr(f.end))&&(p=p.substring(0,f.start)+p.substr(f.end))}return p.charAt(0)!="^"&&(p="^"+p),p.charAt(p.length-1)!="$"&&(p+="$"),new RegExp(p,(a||"").replace("g",""))},s.prototype.getLineTokens=function(p,a){if(a&&typeof a!="string"){var c=a.slice(0);a=c[0],a==="#tmp"&&(c.shift(),a=c.shift())}else var c=[];var h=a||"start",f=this.states[h];f||(h="start",f=this.states[h]);var d=this.matchMappings[h],m=this.regExps[h];m.lastIndex=0;for(var g,y=[],w=0,S=0,b={type:null,value:""};g=m.exec(p);){var _=d.defaultToken,v=null,E=g[0],x=m.lastIndex;if(x-E.length>w){var T=p.substring(w,x-E.length);b.type==_?b.value+=T:(b.type&&y.push(b),b={type:_,value:T})}for(var k=0;k<g.length-2;k++)if(g[k+1]!==void 0){v=f[d[k]],v.onMatch?_=v.onMatch(E,h,c,p):_=v.token,v.next&&(typeof v.next=="string"?h=v.next:h=v.next(h,c),f=this.states[h],f||(this.reportError("state doesn't exist",h),h="start",f=this.states[h]),d=this.matchMappings[h],w=x,m=this.regExps[h],m.lastIndex=x),v.consumeLineEnd&&(w=x);break}if(E){if(typeof _=="string")(!v||v.merge!==!1)&&b.type===_?b.value+=E:(b.type&&y.push(b),b={type:_,value:E});else if(_){b.type&&y.push(b),b={type:null,value:""};for(var k=0;k<_.length;k++)y.push(_[k])}}if(w==p.length)break;if(w=x,S++>l){for(S>2*p.length&&this.reportError("infinite loop with in ace tokenizer",{startState:a,line:p});w<p.length;)b.type&&y.push(b),b={value:p.substring(w,w+=500),type:"overflow"};h="start",c=[];break}}return b.type&&y.push(b),c.length>1&&c[0]!==h&&c.unshift("#tmp",h),{tokens:y,state:c.length?c:h}},s}();u.prototype.reportError=o,i.Tokenizer=u}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(n,i,r){var o=n("../lib/deep_copy").deepCopy,l;l=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(p,a){if(!a){for(var c in p)this.$rules[c]=p[c];return}for(var c in p){for(var h=p[c],f=0;f<h.length;f++){var d=h[f];(d.next||d.onMatch)&&(typeof d.next=="string"&&d.next.indexOf(a)!==0&&(d.next=a+d.next),d.nextState&&d.nextState.indexOf(a)!==0&&(d.nextState=a+d.nextState))}this.$rules[a+c]=h}},this.getRules=function(){return this.$rules},this.embedRules=function(p,a,c,h,f){var d=typeof p=="function"?new p().getRules():p;if(h)for(var m=0;m<h.length;m++)h[m]=a+h[m];else{h=[];for(var g in d)h.push(a+g)}if(this.addRules(d,a),c)for(var y=Array.prototype[f?"push":"unshift"],m=0;m<h.length;m++)y.apply(this.$rules[h[m]],o(c));this.$embeds||(this.$embeds=[]),this.$embeds.push(a)},this.getEmbeds=function(){return this.$embeds};var u=function(p,a){return(p!="start"||a.length)&&a.unshift(this.nextState,p),this.nextState},s=function(p,a){return a.shift(),a.shift()||"start"};this.normalizeRules=function(){var p=0,a=this.$rules;function c(h){var f=a[h];f.processed=!0;for(var d=0;d<f.length;d++){var m=f[d],g=null;Array.isArray(m)&&(g=m,m={}),!m.regex&&m.start&&(m.regex=m.start,m.next||(m.next=[]),m.next.push({defaultToken:m.token},{token:m.token+".end",regex:m.end||m.start,next:"pop"}),m.token=m.token+".start",m.push=!0);var y=m.next||m.push;if(y&&Array.isArray(y)){var w=m.stateName;w||(w=m.token,typeof w!="string"&&(w=w[0]||""),a[w]&&(w+=p++)),a[w]=y,m.next=w,c(w)}else y=="pop"&&(m.next=s);if(m.push&&(m.nextState=m.next||m.push,m.next=u,delete m.push),m.rules)for(var S in m.rules)a[S]?a[S].push&&a[S].push.apply(a[S],m.rules[S]):a[S]=m.rules[S];var b=typeof m=="string"?m:m.include;if(b&&(b==="$self"&&(b="start"),Array.isArray(b)?g=b.map(function(v){return a[v]}):g=a[b]),g){var _=[d,1].concat(g);m.noEscape&&(_=_.filter(function(v){return!v.next})),f.splice.apply(f,_),d--}m.keywordMap&&(m.token=this.createKeywordMapper(m.keywordMap,m.defaultToken||"text",m.caseInsensitive),delete m.defaultToken)}}Object.keys(a).forEach(c,this)},this.createKeywordMapper=function(p,a,c,h){var f=Object.create(null);return this.$keywordList=[],Object.keys(p).forEach(function(d){for(var m=p[d],g=m.split(h||"|"),y=g.length;y--;){var w=g[y];this.$keywordList.push(w),c&&(w=w.toLowerCase()),f[w]=d}},this),p=null,c?function(d){return f[d.toLowerCase()]||a}:function(d){return f[d]||a}},this.getKeywords=function(){return this.$keywords}}).call(l.prototype),i.TextHighlightRules=l}),ace.define("ace/mode/behaviour",["require","exports","module"],function(n,i,r){var o;o=function(){this.$behaviours={}},(function(){this.add=function(l,u,s){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[l]:this.$behaviours[l]={}}this.$behaviours[l][u]=s},this.addBehaviours=function(l){for(var u in l)for(var s in l[u])this.add(u,s,l[u][s])},this.remove=function(l){this.$behaviours&&this.$behaviours[l]&&delete this.$behaviours[l]},this.inherit=function(l,u){if(typeof l=="function")var s=new l().getBehaviours(u);else var s=l.getBehaviours(u);this.addBehaviours(s)},this.getBehaviours=function(l){if(l){for(var u={},s=0;s<l.length;s++)this.$behaviours[l[s]]&&(u[l[s]]=this.$behaviours[l[s]]);return u}else return this.$behaviours}}).call(o.prototype),i.Behaviour=o}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(n,i,r){var o=n("./range").Range,l=function(){function u(s,p,a){this.$session=s,this.$row=p,this.$rowTokens=s.getTokens(p);var c=s.getTokenAt(p,a);this.$tokenIndex=c?c.index:-1}return u.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},u.prototype.stepForward=function(){this.$tokenIndex+=1;for(var s;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,s||(s=this.$session.getLength()),this.$row>=s)return this.$row=s-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},u.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},u.prototype.getCurrentTokenRow=function(){return this.$row},u.prototype.getCurrentTokenColumn=function(){var s=this.$rowTokens,p=this.$tokenIndex,a=s[p].start;if(a!==void 0)return a;for(a=0;p>0;)p-=1,a+=s[p].value.length;return a},u.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},u.prototype.getCurrentTokenRange=function(){var s=this.$rowTokens[this.$tokenIndex],p=this.getCurrentTokenColumn();return new o(this.$row,p,this.$row,p+s.value.length)},u}();i.TokenIterator=l}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(n,i,r){var o=n("../../lib/oop"),l=n("../behaviour").Behaviour,u=n("../../token_iterator").TokenIterator,s=n("../../lib/lang"),p=["text","paren.rparen","rparen","paren","punctuation.operator"],a=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],c,h={},f={'"':'"',"'":"'"},d=function(y){var w=-1;if(y.multiSelect&&(w=y.selection.index,h.rangeCount!=y.multiSelect.rangeCount&&(h={rangeCount:y.multiSelect.rangeCount})),h[w])return c=h[w];c=h[w]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},m=function(y,w,S,b){var _=y.end.row-y.start.row;return{text:S+w+b,selection:[0,y.start.column+1,_,y.end.column+(_?0:1)]}},g;g=function(y){y=y||{},this.add("braces","insertion",function(w,S,b,_,v){var E=b.getCursorPosition(),x=_.doc.getLine(E.row);if(v=="{"){d(b);var T=b.getSelectionRange(),k=_.doc.getTextRange(T),$=_.getTokenAt(E.row,E.column);if(k!==""&&k!=="{"&&b.getWrapBehavioursEnabled())return m(T,k,"{","}");if($&&/(?:string)\.quasi|\.xml/.test($.type)){var R=[/tag\-(?:open|name)/,/attribute\-name/];return R.some(function(F){return F.test($.type)})||/(string)\.quasi/.test($.type)&&$.value[E.column-$.start-1]!=="$"?void 0:(g.recordAutoInsert(b,_,"}"),{text:"{}",selection:[1,1]})}else if(g.isSaneInsertion(b,_))return/[\]\}\)]/.test(x[E.column])||b.inMultiSelectMode||y.braces?(g.recordAutoInsert(b,_,"}"),{text:"{}",selection:[1,1]}):(g.recordMaybeInsert(b,_,"{"),{text:"{",selection:[1,1]})}else if(v=="}"){d(b);var A=x.substring(E.column,E.column+1);if(A=="}"){var C=_.$findOpeningBracket("}",{column:E.column+1,row:E.row});if(C!==null&&g.isAutoInsertedClosing(E,x,v))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(v==`
`||v==`\r
`){d(b);var M="";g.isMaybeInsertedClosing(E,x)&&(M=s.stringRepeat("}",c.maybeInsertedBrackets),g.clearMaybeInsertedClosing());var A=x.substring(E.column,E.column+1);if(A==="}"){var I=_.findMatchingBracket({row:E.row,column:E.column+1},"}");if(!I)return null;var D=this.$getIndent(_.getLine(I.row))}else if(M)var D=this.$getIndent(x);else{g.clearMaybeInsertedClosing();return}var B=D+_.getTabString();return{text:`
`+B+`
`+D+M,selection:[1,B.length,1,B.length]}}else g.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(w,S,b,_,v){var E=_.doc.getTextRange(v);if(!v.isMultiLine()&&E=="{"){d(b);var x=_.doc.getLine(v.start.row),T=x.substring(v.end.column,v.end.column+1);if(T=="}")return v.end.column++,v;c.maybeInsertedBrackets--}}),this.add("parens","insertion",function(w,S,b,_,v){if(v=="("){d(b);var E=b.getSelectionRange(),x=_.doc.getTextRange(E);if(x!==""&&b.getWrapBehavioursEnabled())return m(E,x,"(",")");if(g.isSaneInsertion(b,_))return g.recordAutoInsert(b,_,")"),{text:"()",selection:[1,1]}}else if(v==")"){d(b);var T=b.getCursorPosition(),k=_.doc.getLine(T.row),$=k.substring(T.column,T.column+1);if($==")"){var R=_.$findOpeningBracket(")",{column:T.column+1,row:T.row});if(R!==null&&g.isAutoInsertedClosing(T,k,v))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(w,S,b,_,v){var E=_.doc.getTextRange(v);if(!v.isMultiLine()&&E=="("){d(b);var x=_.doc.getLine(v.start.row),T=x.substring(v.start.column+1,v.start.column+2);if(T==")")return v.end.column++,v}}),this.add("brackets","insertion",function(w,S,b,_,v){if(v=="["){d(b);var E=b.getSelectionRange(),x=_.doc.getTextRange(E);if(x!==""&&b.getWrapBehavioursEnabled())return m(E,x,"[","]");if(g.isSaneInsertion(b,_))return g.recordAutoInsert(b,_,"]"),{text:"[]",selection:[1,1]}}else if(v=="]"){d(b);var T=b.getCursorPosition(),k=_.doc.getLine(T.row),$=k.substring(T.column,T.column+1);if($=="]"){var R=_.$findOpeningBracket("]",{column:T.column+1,row:T.row});if(R!==null&&g.isAutoInsertedClosing(T,k,v))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(w,S,b,_,v){var E=_.doc.getTextRange(v);if(!v.isMultiLine()&&E=="["){d(b);var x=_.doc.getLine(v.start.row),T=x.substring(v.start.column+1,v.start.column+2);if(T=="]")return v.end.column++,v}}),this.add("string_dquotes","insertion",function(w,S,b,_,v){var E=_.$mode.$quotes||f;if(v.length==1&&E[v]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(v)!=-1)return;d(b);var x=v,T=b.getSelectionRange(),k=_.doc.getTextRange(T);if(k!==""&&(k.length!=1||!E[k])&&b.getWrapBehavioursEnabled())return m(T,k,x,x);if(!k){var $=b.getCursorPosition(),R=_.doc.getLine($.row),A=R.substring($.column-1,$.column),C=R.substring($.column,$.column+1),M=_.getTokenAt($.row,$.column),I=_.getTokenAt($.row,$.column+1);if(A=="\\"&&M&&/escape/.test(M.type))return null;var D=M&&/string|escape/.test(M.type),B=!I||/string|escape/.test(I.type),F;if(C==x)F=D!==B,F&&/string\.end/.test(I.type)&&(F=!1);else{if(D&&!B||D&&B)return null;var j=_.$mode.tokenRe;j.lastIndex=0;var Z=j.test(A);j.lastIndex=0;var Q=j.test(C),W=_.$mode.$pairQuotesAfter,V=W&&W[x]&&W[x].test(A);if(!V&&Z||Q||C&&!/[\s;,.})\]\\]/.test(C))return null;var G=R[$.column-2];if(A==x&&(G==x||j.test(G)))return null;F=!0}return{text:F?x+x:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(w,S,b,_,v){var E=_.$mode.$quotes||f,x=_.doc.getTextRange(v);if(!v.isMultiLine()&&E.hasOwnProperty(x)){d(b);var T=_.doc.getLine(v.start.row),k=T.substring(v.start.column+1,v.start.column+2);if(k==x)return v.end.column++,v}}),y.closeDocComment!==!1&&this.add("doc comment end","insertion",function(w,S,b,_,v){if(w==="doc-start"&&(v===`
`||v===`\r
`)&&b.selection.isEmpty()){var E=b.getCursorPosition();if(E.column===0)return;for(var x=_.doc.getLine(E.row),T=_.doc.getLine(E.row+1),k=_.getTokens(E.row),$=0,R=0;R<k.length;R++){$+=k[R].value.length;var A=k[R];if($>=E.column){if($===E.column){if(!/\.doc/.test(A.type))return;if(/\*\//.test(A.value)){var C=k[R+1];if(!C||!/\.doc/.test(C.type))return}}var M=E.column-($-A.value.length),I=A.value.indexOf("*/"),D=A.value.indexOf("/**",I>-1?I+2:0);if(D!==-1&&M>D&&M<D+3||I!==-1&&D!==-1&&M>=I&&M<=D||!/\.doc/.test(A.type))return;break}}var B=this.$getIndent(x);if(/\s*\*/.test(T))return/^\s*\*/.test(x)?{text:v+B+"* ",selection:[1,2+B.length,1,2+B.length]}:{text:v+B+" * ",selection:[1,3+B.length,1,3+B.length]};if(/\/\*\*/.test(x.substring(0,E.column)))return{text:v+B+" * "+v+" "+B+"*/",selection:[1,4+B.length,1,4+B.length]}}})},g.isSaneInsertion=function(y,w){var S=y.getCursorPosition(),b=new u(w,S.row,S.column);if(!this.$matchTokenType(b.getCurrentToken()||"text",p)){if(/[)}\]]/.test(y.session.getLine(S.row)[S.column]))return!0;var _=new u(w,S.row,S.column+1);if(!this.$matchTokenType(_.getCurrentToken()||"text",p))return!1}return b.stepForward(),b.getCurrentTokenRow()!==S.row||this.$matchTokenType(b.getCurrentToken()||"text",a)},g.$matchTokenType=function(y,w){return w.indexOf(y.type||y)>-1},g.recordAutoInsert=function(y,w,S){var b=y.getCursorPosition(),_=w.doc.getLine(b.row);this.isAutoInsertedClosing(b,_,c.autoInsertedLineEnd[0])||(c.autoInsertedBrackets=0),c.autoInsertedRow=b.row,c.autoInsertedLineEnd=S+_.substr(b.column),c.autoInsertedBrackets++},g.recordMaybeInsert=function(y,w,S){var b=y.getCursorPosition(),_=w.doc.getLine(b.row);this.isMaybeInsertedClosing(b,_)||(c.maybeInsertedBrackets=0),c.maybeInsertedRow=b.row,c.maybeInsertedLineStart=_.substr(0,b.column)+S,c.maybeInsertedLineEnd=_.substr(b.column),c.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(y,w,S){return c.autoInsertedBrackets>0&&y.row===c.autoInsertedRow&&S===c.autoInsertedLineEnd[0]&&w.substr(y.column)===c.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(y,w){return c.maybeInsertedBrackets>0&&y.row===c.maybeInsertedRow&&w.substr(y.column)===c.maybeInsertedLineEnd&&w.substr(0,y.column)==c.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){c.autoInsertedLineEnd=c.autoInsertedLineEnd.substr(1),c.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){c&&(c.maybeInsertedBrackets=0,c.maybeInsertedRow=-1)},o.inherits(g,l),i.CstyleBehaviour=g}),ace.define("ace/unicode",["require","exports","module"],function(n,i,r){for(var o=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],l=0,u=[],s=0;s<o.length;s+=2)u.push(l+=o[s]),o[s+1]&&u.push(45,l+=o[s+1]);i.wordChars=String.fromCharCode.apply(null,u)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(n,i,r){var o=n("../config"),l=n("../tokenizer").Tokenizer,u=n("./text_highlight_rules").TextHighlightRules,s=n("./behaviour/cstyle").CstyleBehaviour,p=n("../unicode"),a=n("../lib/lang"),c=n("../token_iterator").TokenIterator,h=n("../range").Range,f;f=function(){this.HighlightRules=u},(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+p.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+p.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new l(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(d,m,g,y){var w=m.doc,S=!0,b=!0,_=1/0,v=m.getTabSize(),E=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var k=this.lineCommentStart.map(a.escapeRegExp).join("|"),x=this.lineCommentStart[0];else var k=a.escapeRegExp(this.lineCommentStart),x=this.lineCommentStart;k=new RegExp("^(\\s*)(?:"+k+") ?"),E=m.getUseSoftTabs();var A=function(Q,W){var V=Q.match(k);if(V){var G=V[1].length,U=V[0].length;!I(Q,G,U)&&V[0][U-1]==" "&&U--,w.removeInLine(W,G,U)}},M=x+" ",R=function(Q,W){(!S||/\S/.test(Q))&&(I(Q,_,_)?w.insertInLine({row:W,column:_},M):w.insertInLine({row:W,column:_},x))},C=function(Q,W){return k.test(Q)},I=function(Q,W,V){for(var G=0;W--&&Q.charAt(W)==" ";)G++;if(G%v!=0)return!1;for(var G=0;Q.charAt(V++)==" ";)G++;return v>2?G%v!=v-1:G%v==0}}else{if(!this.blockComment)return!1;var x=this.blockComment.start,T=this.blockComment.end,k=new RegExp("^(\\s*)(?:"+a.escapeRegExp(x)+")"),$=new RegExp("(?:"+a.escapeRegExp(T)+")\\s*$"),R=function(F,j){C(F,j)||(!S||/\S/.test(F))&&(w.insertInLine({row:j,column:F.length},T),w.insertInLine({row:j,column:_},x))},A=function(F,j){var Z;(Z=F.match($))&&w.removeInLine(j,F.length-Z[0].length,F.length),(Z=F.match(k))&&w.removeInLine(j,Z[1].length,Z[0].length)},C=function(F,j){if(k.test(F))return!0;for(var Z=m.getTokens(j),Q=0;Q<Z.length;Q++)if(Z[Q].type==="comment")return!0}}function D(F){for(var j=g;j<=y;j++)F(w.getLine(j),j)}var B=1/0;D(function(F,j){var Z=F.search(/\S/);Z!==-1?(Z<_&&(_=Z),b&&!C(F,j)&&(b=!1)):B>F.length&&(B=F.length)}),_==1/0&&(_=B,S=!1,b=!1),E&&_%v!=0&&(_=Math.floor(_/v)*v),D(b?A:R)},this.toggleBlockComment=function(d,m,g,y){var w=this.blockComment;if(w){!w.start&&w[0]&&(w=w[0]);var S=new c(m,y.row,y.column),b=S.getCurrentToken();m.selection;var _=m.selection.toOrientedRange(),v,E;if(b&&/comment/.test(b.type)){for(var x,T;b&&/comment/.test(b.type);){var k=b.value.indexOf(w.start);if(k!=-1){var $=S.getCurrentTokenRow(),R=S.getCurrentTokenColumn()+k;x=new h($,R,$,R+w.start.length);break}b=S.stepBackward()}for(var S=new c(m,y.row,y.column),b=S.getCurrentToken();b&&/comment/.test(b.type);){var k=b.value.indexOf(w.end);if(k!=-1){var $=S.getCurrentTokenRow(),R=S.getCurrentTokenColumn()+k;T=new h($,R,$,R+w.end.length);break}b=S.stepForward()}T&&m.remove(T),x&&(m.remove(x),v=x.start.row,E=-w.start.length)}else E=w.start.length,v=g.start.row,m.insert(g.end,w.end),m.insert(g.start,w.start);_.start.row==v&&(_.start.column+=E),_.end.row==v&&(_.end.column+=E),m.selection.fromOrientedRange(_)}},this.getNextLineIndent=function(d,m,g){return this.$getIndent(m)},this.checkOutdent=function(d,m,g){return!1},this.autoOutdent=function(d,m,g){},this.$getIndent=function(d){return d.match(/^\s*/)[0]},this.createWorker=function(d){return null},this.createModeDelegates=function(d){this.$embeds=[],this.$modes={};for(var m in d)if(d[m]){var g=d[m],y=g.prototype.$id,w=o.$modes[y];w||(o.$modes[y]=w=new g),o.$modes[m]||(o.$modes[m]=w),this.$embeds.push(m),this.$modes[m]=w}for(var S=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],b=function(v){(function(E){var x=S[v],T=E[x];E[S[v]]=function(){return this.$delegator(x,arguments,T)}})(_)},_=this,m=0;m<S.length;m++)b(m)},this.$delegator=function(d,m,g){var y=m[0]||"start";if(typeof y!="string"){if(Array.isArray(y[2])){var w=y[2][y[2].length-1],S=this.$modes[w];if(S)return S[d].apply(S,[y[1]].concat([].slice.call(m,1)))}y=y[0]||"start"}for(var b=0;b<this.$embeds.length;b++)if(this.$modes[this.$embeds[b]]){var _=y.split(this.$embeds[b]);if(!_[0]&&_[1]){m[0]=_[1];var S=this.$modes[this.$embeds[b]];return S[d].apply(S,m)}}var v=g.apply(this,m);return g?v:void 0},this.transformAction=function(d,m,g,y,w){if(this.$behaviour){var S=this.$behaviour.getBehaviours();for(var b in S)if(S[b][m]){var _=S[b][m].apply(this,arguments);if(_)return _}}},this.getKeywords=function(d){if(!this.completionKeywords){var m=this.$tokenizer.rules,g=[];for(var y in m)for(var w=m[y],S=0,b=w.length;S<b;S++)if(typeof w[S].token=="string")/keyword|support|storage/.test(w[S].token)&&g.push(w[S].regex);else if(typeof w[S].token=="object"){for(var _=0,v=w[S].token.length;_<v;_++)if(/keyword|support|storage/.test(w[S].token[_])){var y=w[S].regex.match(/\(.+?\)/g)[_];g.push(y.substr(1,y.length-2))}}this.completionKeywords=g}return d?g.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(d,m,g,y){var w=this.$keywordList||this.$createKeywordList();return w.map(function(S){return{name:S,value:S,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(f.prototype),i.Mode=f}),ace.define("ace/apply_delta",["require","exports","module"],function(n,i,r){i.applyDelta=function(o,l,u){var s=l.start.row,p=l.start.column,a=o[s]||"";switch(l.action){case"insert":var c=l.lines;if(c.length===1)o[s]=a.substring(0,p)+l.lines[0]+a.substring(p);else{var h=[s,1].concat(l.lines);o.splice.apply(o,h),o[s]=a.substring(0,p)+o[s],o[s+l.lines.length-1]+=a.substring(p)}break;case"remove":var f=l.end.column,d=l.end.row;s===d?o[s]=a.substring(0,p)+a.substring(f):o.splice(s,d-s+1,a.substring(0,p)+o[d].substring(f));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,i,r){var o=n("./lib/oop"),l=n("./lib/event_emitter").EventEmitter,u=function(){function a(c,h,f){this.$onChange=this.onChange.bind(this),this.attach(c),typeof h!="number"?this.setPosition(h.row,h.column):this.setPosition(h,f)}return a.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},a.prototype.getDocument=function(){return this.document},a.prototype.onChange=function(c){if(!(c.start.row==c.end.row&&c.start.row!=this.row)&&!(c.start.row>this.row)){var h=p(c,{row:this.row,column:this.column},this.$insertRight);this.setPosition(h.row,h.column,!0)}},a.prototype.setPosition=function(c,h,f){var d;if(f?d={row:c,column:h}:d=this.$clipPositionToDocument(c,h),!(this.row==d.row&&this.column==d.column)){var m={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:m,value:d})}},a.prototype.detach=function(){this.document.off("change",this.$onChange)},a.prototype.attach=function(c){this.document=c||this.document,this.document.on("change",this.$onChange)},a.prototype.$clipPositionToDocument=function(c,h){var f={};return c>=this.document.getLength()?(f.row=Math.max(0,this.document.getLength()-1),f.column=this.document.getLine(f.row).length):c<0?(f.row=0,f.column=0):(f.row=c,f.column=Math.min(this.document.getLine(f.row).length,Math.max(0,h))),h<0&&(f.column=0),f},a}();u.prototype.$insertRight=!1,o.implement(u.prototype,l);function s(a,c,h){var f=h?a.column<=c.column:a.column<c.column;return a.row<c.row||a.row==c.row&&f}function p(a,c,h){var f=a.action=="insert",d=(f?1:-1)*(a.end.row-a.start.row),m=(f?1:-1)*(a.end.column-a.start.column),g=a.start,y=f?g:a.end;return s(c,g,h)?{row:c.row,column:c.column}:s(y,c,!h)?{row:c.row+d,column:c.column+(c.row==y.row?m:0)}:{row:g.row,column:g.column}}i.Anchor=u}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(n,i,r){var o=n("./lib/oop"),l=n("./apply_delta").applyDelta,u=n("./lib/event_emitter").EventEmitter,s=n("./range").Range,p=n("./anchor").Anchor,a=function(){function c(h){this.$lines=[""],h.length===0?this.$lines=[""]:Array.isArray(h)?this.insertMergedLines({row:0,column:0},h):this.insert({row:0,column:0},h)}return c.prototype.setValue=function(h){var f=this.getLength()-1;this.remove(new s(0,0,f,this.getLine(f).length)),this.insert({row:0,column:0},h||"")},c.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},c.prototype.createAnchor=function(h,f){return new p(this,h,f)},c.prototype.$detectNewLine=function(h){var f=h.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=f?f[1]:`
`,this._signal("changeNewLineMode")},c.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},c.prototype.setNewLineMode=function(h){this.$newLineMode!==h&&(this.$newLineMode=h,this._signal("changeNewLineMode"))},c.prototype.getNewLineMode=function(){return this.$newLineMode},c.prototype.isNewLine=function(h){return h==`\r
`||h=="\r"||h==`
`},c.prototype.getLine=function(h){return this.$lines[h]||""},c.prototype.getLines=function(h,f){return this.$lines.slice(h,f+1)},c.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},c.prototype.getLength=function(){return this.$lines.length},c.prototype.getTextRange=function(h){return this.getLinesForRange(h).join(this.getNewLineCharacter())},c.prototype.getLinesForRange=function(h){var f;if(h.start.row===h.end.row)f=[this.getLine(h.start.row).substring(h.start.column,h.end.column)];else{f=this.getLines(h.start.row,h.end.row),f[0]=(f[0]||"").substring(h.start.column);var d=f.length-1;h.end.row-h.start.row==d&&(f[d]=f[d].substring(0,h.end.column))}return f},c.prototype.insertLines=function(h,f){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(h,f)},c.prototype.removeLines=function(h,f){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(h,f)},c.prototype.insertNewLine=function(h){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(h,["",""])},c.prototype.insert=function(h,f){return this.getLength()<=1&&this.$detectNewLine(f),this.insertMergedLines(h,this.$split(f))},c.prototype.insertInLine=function(h,f){var d=this.clippedPos(h.row,h.column),m=this.pos(h.row,h.column+f.length);return this.applyDelta({start:d,end:m,action:"insert",lines:[f]},!0),this.clonePos(m)},c.prototype.clippedPos=function(h,f){var d=this.getLength();h===void 0?h=d:h<0?h=0:h>=d&&(h=d-1,f=void 0);var m=this.getLine(h);return f==null&&(f=m.length),f=Math.min(Math.max(f,0),m.length),{row:h,column:f}},c.prototype.clonePos=function(h){return{row:h.row,column:h.column}},c.prototype.pos=function(h,f){return{row:h,column:f}},c.prototype.$clipPosition=function(h){var f=this.getLength();return h.row>=f?(h.row=Math.max(0,f-1),h.column=this.getLine(f-1).length):(h.row=Math.max(0,h.row),h.column=Math.min(Math.max(h.column,0),this.getLine(h.row).length)),h},c.prototype.insertFullLines=function(h,f){h=Math.min(Math.max(h,0),this.getLength());var d=0;h<this.getLength()?(f=f.concat([""]),d=0):(f=[""].concat(f),h--,d=this.$lines[h].length),this.insertMergedLines({row:h,column:d},f)},c.prototype.insertMergedLines=function(h,f){var d=this.clippedPos(h.row,h.column),m={row:d.row+f.length-1,column:(f.length==1?d.column:0)+f[f.length-1].length};return this.applyDelta({start:d,end:m,action:"insert",lines:f}),this.clonePos(m)},c.prototype.remove=function(h){var f=this.clippedPos(h.start.row,h.start.column),d=this.clippedPos(h.end.row,h.end.column);return this.applyDelta({start:f,end:d,action:"remove",lines:this.getLinesForRange({start:f,end:d})}),this.clonePos(f)},c.prototype.removeInLine=function(h,f,d){var m=this.clippedPos(h,f),g=this.clippedPos(h,d);return this.applyDelta({start:m,end:g,action:"remove",lines:this.getLinesForRange({start:m,end:g})},!0),this.clonePos(m)},c.prototype.removeFullLines=function(h,f){h=Math.min(Math.max(0,h),this.getLength()-1),f=Math.min(Math.max(0,f),this.getLength()-1);var d=f==this.getLength()-1&&h>0,m=f<this.getLength()-1,g=d?h-1:h,y=d?this.getLine(g).length:0,w=m?f+1:f,S=m?0:this.getLine(w).length,b=new s(g,y,w,S),_=this.$lines.slice(h,f+1);return this.applyDelta({start:b.start,end:b.end,action:"remove",lines:this.getLinesForRange(b)}),_},c.prototype.removeNewLine=function(h){h<this.getLength()-1&&h>=0&&this.applyDelta({start:this.pos(h,this.getLine(h).length),end:this.pos(h+1,0),action:"remove",lines:["",""]})},c.prototype.replace=function(h,f){if(h instanceof s||(h=s.fromPoints(h.start,h.end)),f.length===0&&h.isEmpty())return h.start;if(f==this.getTextRange(h))return h.end;this.remove(h);var d;return f?d=this.insert(h.start,f):d=h.start,d},c.prototype.applyDeltas=function(h){for(var f=0;f<h.length;f++)this.applyDelta(h[f])},c.prototype.revertDeltas=function(h){for(var f=h.length-1;f>=0;f--)this.revertDelta(h[f])},c.prototype.applyDelta=function(h,f){var d=h.action=="insert";(d?h.lines.length<=1&&!h.lines[0]:!s.comparePoints(h.start,h.end))||(d&&h.lines.length>2e4?this.$splitAndapplyLargeDelta(h,2e4):(l(this.$lines,h,f),this._signal("change",h)))},c.prototype.$safeApplyDelta=function(h){var f=this.$lines.length;(h.action=="remove"&&h.start.row<f&&h.end.row<f||h.action=="insert"&&h.start.row<=f)&&this.applyDelta(h)},c.prototype.$splitAndapplyLargeDelta=function(h,f){for(var d=h.lines,m=d.length-f+1,g=h.start.row,y=h.start.column,w=0,S=0;w<m;w=S){S+=f-1;var b=d.slice(w,S);b.push(""),this.applyDelta({start:this.pos(g+w,y),end:this.pos(g+S,y=0),action:h.action,lines:b},!0)}h.lines=d.slice(w),h.start.row=g+w,h.start.column=y,this.applyDelta(h,!0)},c.prototype.revertDelta=function(h){this.$safeApplyDelta({start:this.clonePos(h.start),end:this.clonePos(h.end),action:h.action=="insert"?"remove":"insert",lines:h.lines.slice()})},c.prototype.indexToPosition=function(h,f){for(var d=this.$lines||this.getAllLines(),m=this.getNewLineCharacter().length,g=f||0,y=d.length;g<y;g++)if(h-=d[g].length+m,h<0)return{row:g,column:h+d[g].length+m};return{row:y-1,column:h+d[y-1].length+m}},c.prototype.positionToIndex=function(h,f){for(var d=this.$lines||this.getAllLines(),m=this.getNewLineCharacter().length,g=0,y=Math.min(h.row,d.length),w=f||0;w<y;++w)g+=d[w].length+m;return g+h.column},c.prototype.$split=function(h){return h.split(/\r\n|\r|\n/)},c}();a.prototype.$autoNewLine="",a.prototype.$newLineMode="auto",o.implement(a.prototype,u),i.Document=a}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(n,i,r){var o=n("./lib/oop"),l=n("./lib/event_emitter").EventEmitter,u=function(){function s(p,a){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=p;var c=this;this.$worker=function(){if(c.running){for(var h=new Date,f=c.currentLine,d=-1,m=c.doc,g=f;c.lines[f];)f++;var y=m.getLength(),w=0;for(c.running=!1;f<y;){c.$tokenizeRow(f),d=f;do f++;while(c.lines[f]);if(w++,w%5===0&&new Date-h>20){c.running=setTimeout(c.$worker,20);break}}c.currentLine=f,d==-1&&(d=f),g<=d&&c.fireUpdateEvent(g,d)}}}return s.prototype.setTokenizer=function(p){this.tokenizer=p,this.lines=[],this.states=[],this.start(0)},s.prototype.setDocument=function(p){this.doc=p,this.lines=[],this.states=[],this.stop()},s.prototype.fireUpdateEvent=function(p,a){var c={first:p,last:a};this._signal("update",{data:c})},s.prototype.start=function(p){this.currentLine=Math.min(p||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},s.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},s.prototype.$updateOnChange=function(p){var a=p.start.row,c=p.end.row-a;if(c===0)this.lines[a]=null;else if(p.action=="remove")this.lines.splice(a,c+1,null),this.states.splice(a,c+1,null);else{var h=Array(c+1);h.unshift(a,1),this.lines.splice.apply(this.lines,h),this.states.splice.apply(this.states,h)}this.currentLine=Math.min(a,this.currentLine,this.doc.getLength()),this.stop()},s.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},s.prototype.getTokens=function(p){return this.lines[p]||this.$tokenizeRow(p)},s.prototype.getState=function(p){return this.currentLine==p&&this.$tokenizeRow(p),this.states[p]||"start"},s.prototype.$tokenizeRow=function(p){var a=this.doc.getLine(p),c=this.states[p-1],h=this.tokenizer.getLineTokens(a,c,p);return this.states[p]+""!=h.state+""?(this.states[p]=h.state,this.lines[p+1]=null,this.currentLine>p+1&&(this.currentLine=p+1)):this.currentLine==p&&(this.currentLine=p+1),this.lines[p]=h.tokens},s.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},s}();o.implement(u.prototype,l),i.BackgroundTokenizer=u}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(n,i,r){var o=n("./lib/lang"),l=n("./range").Range,u=function(){function s(p,a,c){c===void 0&&(c="text"),this.setRegexp(p),this.clazz=a,this.type=c}return s.prototype.setRegexp=function(p){this.regExp+""!=p+""&&(this.regExp=p,this.cache=[])},s.prototype.update=function(p,a,c,h){if(this.regExp)for(var f=h.firstRow,d=h.lastRow,m={},g=f;g<=d;g++){var y=this.cache[g];y==null&&(y=o.getMatchOffsets(c.getLine(g),this.regExp),y.length>this.MAX_RANGES&&(y=y.slice(0,this.MAX_RANGES)),y=y.map(function(_){return new l(g,_.offset,g,_.offset+_.length)}),this.cache[g]=y.length?y:"");for(var w=y.length;w--;){var S=y[w].toScreenRange(c),b=S.toString();m[b]||(m[b]=!0,a.drawSingleLineMarker(p,S,this.clazz,h))}}},s}();u.prototype.MAX_RANGES=500,i.SearchHighlight=u}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(n,i,r){var o=function(){function _(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return _.prototype.addSession=function(v){this.$session=v},_.prototype.add=function(v,E,x){if(!this.$fromUndo&&v!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),E===!1||!this.lastDeltas){this.lastDeltas=[];var T=this.$undoStack.length;T>this.$undoDepth-1&&this.$undoStack.splice(0,T-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),v.id=this.$rev=++this.$maxRev}(v.action=="remove"||v.action=="insert")&&(this.$lastDelta=v),this.lastDeltas.push(v)}},_.prototype.addSelection=function(v,E){this.selections.push({value:v,rev:E||this.$rev})},_.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},_.prototype.markIgnored=function(v,E){E==null&&(E=this.$rev+1);for(var x=this.$undoStack,T=x.length;T--;){var k=x[T][0];if(k.id<=v)break;k.id<E&&(k.ignore=!0)}this.lastDeltas=null},_.prototype.getSelection=function(v,E){for(var x=this.selections,T=x.length;T--;){var k=x[T];if(k.rev<v)return E&&(k=x[T+1]),k}},_.prototype.getRevision=function(){return this.$rev},_.prototype.getDeltas=function(v,E){E==null&&(E=this.$rev+1);for(var x=this.$undoStack,T=null,k=0,$=x.length;$--;){var R=x[$][0];if(R.id<E&&!T&&(T=$+1),R.id<=v){k=$+1;break}}return x.slice(k,T)},_.prototype.getChangedRanges=function(v,E){E==null&&(E=this.$rev+1)},_.prototype.getChangedLines=function(v,E){E==null&&(E=this.$rev+1)},_.prototype.undo=function(v,E){this.lastDeltas=null;var x=this.$undoStack;if(l(x,x.length)){v||(v=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var T=x.pop(),k=null;return T&&(k=v.undoChanges(T,E),this.$redoStack.push(T),this.$syncRev()),this.$fromUndo=!1,k}},_.prototype.redo=function(v,E){if(this.lastDeltas=null,v||(v=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var x=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);b(this.$redoStack,x),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function($){$[0].id=++this.$maxRev},this)}var T=this.$redoStack.pop(),k=null;return T&&(k=v.redoChanges(T,E),this.$undoStack.push(T),this.$syncRev()),this.$fromUndo=!1,k},_.prototype.$syncRev=function(){var v=this.$undoStack,E=v[v.length-1],x=E&&E[0].id||0;this.$redoStackBaseRev=x,this.$rev=x},_.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},_.prototype.canUndo=function(){return this.$undoStack.length>0},_.prototype.canRedo=function(){return this.$redoStack.length>0},_.prototype.bookmark=function(v){v==null&&(v=this.$rev),this.mark=v},_.prototype.isAtBookmark=function(){return this.$rev===this.mark},_.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},_.prototype.fromJSON=function(v){this.reset(),this.$undoStack=v.$undoStack,this.$redoStack=v.$redoStack},_.prototype.$prettyPrint=function(v){return v?c(v):c(this.$undoStack)+`
---
`+c(this.$redoStack)},_}();o.prototype.hasUndo=o.prototype.canUndo,o.prototype.hasRedo=o.prototype.canRedo,o.prototype.isClean=o.prototype.isAtBookmark,o.prototype.markClean=o.prototype.bookmark;function l(_,v){for(var E=v;E--;){var x=_[E];if(x&&!x[0].ignore){for(;E<v-1;){var T=d(_[E],_[E+1]);_[E]=T[0],_[E+1]=T[1],E++}return!0}}}var u=n("./range").Range,s=u.comparePoints;u.comparePoints;function p(_){return{row:_.row,column:_.column}}function a(_){return{start:p(_.start),end:p(_.end),action:_.action,lines:_.lines.slice()}}function c(_){if(_=_||this,Array.isArray(_))return _.map(c).join(`
`);var v="";return _.action?(v=_.action=="insert"?"+":"-",v+="["+_.lines+"]"):_.value&&(Array.isArray(_.value)?v=_.value.map(h).join(`
`):v=h(_.value)),_.start&&(v+=h(_)),(_.id||_.rev)&&(v+="	("+(_.id||_.rev)+")"),v}function h(_){return _.start.row+":"+_.start.column+"=>"+_.end.row+":"+_.end.column}function f(_,v){var E=_.action=="insert",x=v.action=="insert";if(E&&x)if(s(v.start,_.end)>=0)g(v,_,-1);else if(s(v.start,_.start)<=0)g(_,v,1);else return null;else if(E&&!x)if(s(v.start,_.end)>=0)g(v,_,-1);else if(s(v.end,_.start)<=0)g(_,v,-1);else return null;else if(!E&&x)if(s(v.start,_.start)>=0)g(v,_,1);else if(s(v.start,_.start)<=0)g(_,v,1);else return null;else if(!E&&!x)if(s(v.start,_.start)>=0)g(v,_,1);else if(s(v.end,_.start)<=0)g(_,v,-1);else return null;return[v,_]}function d(_,v){for(var E=_.length;E--;)for(var x=0;x<v.length;x++)if(!f(_[E],v[x])){for(;E<_.length;){for(;x--;)f(v[x],_[E]);x=v.length,E++}return[_,v]}return _.selectionBefore=v.selectionBefore=_.selectionAfter=v.selectionAfter=null,[v,_]}function m(_,v){var E=_.action=="insert",x=v.action=="insert";if(E&&x)s(_.start,v.start)<0?g(v,_,1):g(_,v,1);else if(E&&!x)s(_.start,v.end)>=0?g(_,v,-1):(s(_.start,v.start)<=0||g(_,u.fromPoints(v.start,_.start),-1),g(v,_,1));else if(!E&&x)s(v.start,_.end)>=0?g(v,_,-1):(s(v.start,_.start)<=0||g(v,u.fromPoints(_.start,v.start),-1),g(_,v,1));else if(!E&&!x)if(s(v.start,_.end)>=0)g(v,_,-1);else if(s(v.end,_.start)<=0)g(_,v,-1);else{var T,k;return s(_.start,v.start)<0&&(T=_,_=w(_,v.start)),s(_.end,v.end)>0&&(k=w(_,v.end)),y(v.end,_.start,_.end,-1),k&&!T&&(_.lines=k.lines,_.start=k.start,_.end=k.end,k=_),[v,T,k].filter(Boolean)}return[v,_]}function g(_,v,E){y(_.start,v.start,v.end,E),y(_.end,v.start,v.end,E)}function y(_,v,E,x){_.row==(x==1?v:E).row&&(_.column+=x*(E.column-v.column)),_.row+=x*(E.row-v.row)}function w(_,v){var E=_.lines,x=_.end;_.end=p(v);var T=_.end.row-_.start.row,k=E.splice(T,E.length),$=T?v.column:v.column-_.start.column;E.push(k[0].substring(0,$)),k[0]=k[0].substr($);var R={start:p(v),end:x,lines:k,action:_.action};return R}function S(_,v){v=a(v);for(var E=_.length;E--;){for(var x=_[E],T=0;T<x.length;T++){var k=x[T],$=m(k,v);v=$[0],$.length!=2&&($[2]?(x.splice(T+1,1,$[1],$[2]),T++):$[1]||(x.splice(T,1),T--))}x.length||_.splice(E,1)}return _}function b(_,v){for(var E=0;E<v.length;E++)for(var x=v[E],T=0;T<x.length;T++)S(_,x[T])}i.UndoManager=o}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(n,i,r){var o=n("../range").Range,l=function(){function u(s,p){this.foldData=s,Array.isArray(p)?this.folds=p:p=this.folds=[p];var a=p[p.length-1];this.range=new o(p[0].start.row,p[0].start.column,a.end.row,a.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(c){c.setFoldLine(this)},this)}return u.prototype.shiftRow=function(s){this.start.row+=s,this.end.row+=s,this.folds.forEach(function(p){p.start.row+=s,p.end.row+=s})},u.prototype.addFold=function(s){if(s.sameRow){if(s.start.row<this.startRow||s.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(s),this.folds.sort(function(p,a){return-p.range.compareEnd(a.start.row,a.start.column)}),this.range.compareEnd(s.start.row,s.start.column)>0?(this.end.row=s.end.row,this.end.column=s.end.column):this.range.compareStart(s.end.row,s.end.column)<0&&(this.start.row=s.start.row,this.start.column=s.start.column)}else if(s.start.row==this.end.row)this.folds.push(s),this.end.row=s.end.row,this.end.column=s.end.column;else if(s.end.row==this.start.row)this.folds.unshift(s),this.start.row=s.start.row,this.start.column=s.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");s.foldLine=this},u.prototype.containsRow=function(s){return s>=this.start.row&&s<=this.end.row},u.prototype.walk=function(s,p,a){var c=0,h=this.folds,f,d,m,g=!0;p==null&&(p=this.end.row,a=this.end.column);for(var y=0;y<h.length;y++){if(f=h[y],d=f.range.compareStart(p,a),d==-1){s(null,p,a,c,g);return}if(m=s(null,f.start.row,f.start.column,c,g),m=!m&&s(f.placeholder,f.start.row,f.start.column,c),m||d===0)return;g=!f.sameRow,c=f.end.column}s(null,p,a,c,g)},u.prototype.getNextFoldTo=function(s,p){for(var a,c,h=0;h<this.folds.length;h++){if(a=this.folds[h],c=a.range.compareEnd(s,p),c==-1)return{fold:a,kind:"after"};if(c===0)return{fold:a,kind:"inside"}}return null},u.prototype.addRemoveChars=function(s,p,a){var c=this.getNextFoldTo(s,p),h,f;if(c){if(h=c.fold,c.kind=="inside"&&h.start.column!=p&&h.start.row!=s)window.console&&window.console.log(s,p,h);else if(h.start.row==s){f=this.folds;var d=f.indexOf(h);for(d===0&&(this.start.column+=a),d;d<f.length;d++){if(h=f[d],h.start.column+=a,!h.sameRow)return;h.end.column+=a}this.end.column+=a}}},u.prototype.split=function(s,p){var a=this.getNextFoldTo(s,p);if(!a||a.kind=="inside")return null;var c=a.fold,h=this.folds,f=this.foldData,d=h.indexOf(c),m=h[d-1];this.end.row=m.end.row,this.end.column=m.end.column,h=h.splice(d,h.length-d);var g=new u(f,h);return f.splice(f.indexOf(this)+1,0,g),g},u.prototype.merge=function(s){for(var p=s.folds,a=0;a<p.length;a++)this.addFold(p[a]);var c=this.foldData;c.splice(c.indexOf(s),1)},u.prototype.toString=function(){var s=[this.range.toString()+": ["];return this.folds.forEach(function(p){s.push("  "+p.toString())}),s.push("]"),s.join(`
`)},u.prototype.idxToPosition=function(s){for(var p=0,a=0;a<this.folds.length;a++){var c=this.folds[a];if(s-=c.start.column-p,s<0)return{row:c.start.row,column:c.start.column+s};if(s-=c.placeholder.length,s<0)return c.start;p=c.end.column}return{row:this.end.row,column:this.end.column+s}},u}();i.FoldLine=l}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(n,i,r){var o=n("./range").Range,l=o.comparePoints,u=function(){function s(){this.ranges=[],this.$bias=1}return s.prototype.pointIndex=function(p,a,c){for(var h=this.ranges,f=c||0;f<h.length;f++){var d=h[f],m=l(p,d.end);if(!(m>0)){var g=l(p,d.start);return m===0?a&&g!==0?-f-2:f:g>0||g===0&&!a?f:-f-1}}return-f-1},s.prototype.add=function(p){var a=!p.isEmpty(),c=this.pointIndex(p.start,a);c<0&&(c=-c-1);var h=this.pointIndex(p.end,a,c);return h<0?h=-h-1:h++,this.ranges.splice(c,h-c,p)},s.prototype.addList=function(p){for(var a=[],c=p.length;c--;)a.push.apply(a,this.add(p[c]));return a},s.prototype.substractPoint=function(p){var a=this.pointIndex(p);if(a>=0)return this.ranges.splice(a,1)},s.prototype.merge=function(){var p=[],a=this.ranges;a=a.sort(function(m,g){return l(m.start,g.start)});for(var c=a[0],h,f=1;f<a.length;f++){h=c,c=a[f];var d=l(h.end,c.start);d<0||d==0&&!h.isEmpty()&&!c.isEmpty()||(l(h.end,c.end)<0&&(h.end.row=c.end.row,h.end.column=c.end.column),a.splice(f,1),p.push(c),c=h,f--)}return this.ranges=a,p},s.prototype.contains=function(p,a){return this.pointIndex({row:p,column:a})>=0},s.prototype.containsPoint=function(p){return this.pointIndex(p)>=0},s.prototype.rangeAtPoint=function(p){var a=this.pointIndex(p);if(a>=0)return this.ranges[a]},s.prototype.clipRows=function(p,a){var c=this.ranges;if(c[0].start.row>a||c[c.length-1].start.row<p)return[];var h=this.pointIndex({row:p,column:0});h<0&&(h=-h-1);var f=this.pointIndex({row:a,column:0},h);f<0&&(f=-f-1);for(var d=[],m=h;m<f;m++)d.push(c[m]);return d},s.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},s.prototype.attach=function(p){this.session&&this.detach(),this.session=p,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},s.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},s.prototype.$onChange=function(p){for(var a=p.start,c=p.end,h=a.row,f=c.row,d=this.ranges,m=0,g=d.length;m<g;m++){var y=d[m];if(y.end.row>=h)break}if(p.action=="insert")for(var w=f-h,S=-a.column+c.column;m<g;m++){var y=d[m];if(y.start.row>h)break;if(y.start.row==h&&y.start.column>=a.column&&(y.start.column==a.column&&this.$bias<=0||(y.start.column+=S,y.start.row+=w)),y.end.row==h&&y.end.column>=a.column){if(y.end.column==a.column&&this.$bias<0)continue;y.end.column==a.column&&S>0&&m<g-1&&y.end.column>y.start.column&&y.end.column==d[m+1].start.column&&(y.end.column-=S),y.end.column+=S,y.end.row+=w}}else for(var w=h-f,S=a.column-c.column;m<g;m++){var y=d[m];if(y.start.row>f)break;y.end.row<f&&(h<y.end.row||h==y.end.row&&a.column<y.end.column)?(y.end.row=h,y.end.column=a.column):y.end.row==f?y.end.column<=c.column?(w||y.end.column>a.column)&&(y.end.column=a.column,y.end.row=a.row):(y.end.column+=S,y.end.row+=w):y.end.row>f&&(y.end.row+=w),y.start.row<f&&(h<y.start.row||h==y.start.row&&a.column<y.start.column)?(y.start.row=h,y.start.column=a.column):y.start.row==f?y.start.column<=c.column?(w||y.start.column>a.column)&&(y.start.column=a.column,y.start.row=a.row):(y.start.column+=S,y.start.row+=w):y.start.row>f&&(y.start.row+=w)}if(w!=0&&m<g)for(;m<g;m++){var y=d[m];y.start.row+=w,y.end.row+=w}},s}();u.prototype.comparePoints=l,i.RangeList=u}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(n,i,r){var o=this&&this.__extends||function(){var h=function(f,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(m[y]=g[y])},h(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");h(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}(),l=n("../range_list").RangeList,u=function(h){o(f,h);function f(d,m){var g=h.call(this)||this;return g.foldLine=null,g.placeholder=m,g.range=d,g.start=d.start,g.end=d.end,g.sameRow=d.start.row==d.end.row,g.subFolds=g.ranges=[],g}return f.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},f.prototype.setFoldLine=function(d){this.foldLine=d,this.subFolds.forEach(function(m){m.setFoldLine(d)})},f.prototype.clone=function(){var d=this.range.clone(),m=new f(d,this.placeholder);return this.subFolds.forEach(function(g){m.subFolds.push(g.clone())}),m.collapseChildren=this.collapseChildren,m},f.prototype.addSubFold=function(d){if(!this.range.isEqual(d)){p(d,this.start);for(var S=d.start.row,b=d.start.column,m=0,g=-1;m<this.subFolds.length&&(g=this.subFolds[m].range.compare(S,b),g==1);m++);var y=this.subFolds[m],w=0;if(g==0){if(y.range.containsRange(d))return y.addSubFold(d);w=1}for(var S=d.range.end.row,b=d.range.end.column,_=m,g=-1;_<this.subFolds.length&&(g=this.subFolds[_].range.compare(S,b),g==1);_++);g==0&&_++;for(var v=this.subFolds.splice(m,_-m,d),E=g==0?v.length-1:v.length,x=w;x<E;x++)d.addSubFold(v[x]);return d.setFoldLine(this.foldLine),d}},f.prototype.restoreRange=function(d){return c(d,this.start)},f}(l);function s(h,f){h.row-=f.row,h.row==0&&(h.column-=f.column)}function p(h,f){s(h.start,f),s(h.end,f)}function a(h,f){h.row==0&&(h.column+=f.column),h.row+=f.row}function c(h,f){a(h.start,f),a(h.end,f)}i.Fold=u}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(n,i,r){var o=n("../range").Range,l=n("./fold_line").FoldLine,u=n("./fold").Fold,s=n("../token_iterator").TokenIterator,p=n("../mouse/mouse_event").MouseEvent;function a(){this.getFoldAt=function(c,h,f){var d=this.getFoldLine(c);if(!d)return null;for(var m=d.folds,g=0;g<m.length;g++){var y=m[g].range;if(y.contains(c,h)){if(f==1&&y.isEnd(c,h)&&!y.isEmpty())continue;if(f==-1&&y.isStart(c,h)&&!y.isEmpty())continue;return m[g]}}},this.getFoldsInRange=function(c){var h=c.start,f=c.end,d=this.$foldData,m=[];h.column+=1,f.column-=1;for(var g=0;g<d.length;g++){var y=d[g].range.compareRange(c);if(y!=2){if(y==-2)break;for(var w=d[g].folds,S=0;S<w.length;S++){var b=w[S];if(y=b.range.compareRange(c),y==-2)break;if(y==2)continue;if(y==42)break;m.push(b)}}}return h.column-=1,f.column+=1,m},this.getFoldsInRangeList=function(c){if(Array.isArray(c)){var h=[];c.forEach(function(f){h=h.concat(this.getFoldsInRange(f))},this)}else var h=this.getFoldsInRange(c);return h},this.getAllFolds=function(){for(var c=[],h=this.$foldData,f=0;f<h.length;f++)for(var d=0;d<h[f].folds.length;d++)c.push(h[f].folds[d]);return c},this.getFoldStringAt=function(c,h,f,d){if(d=d||this.getFoldLine(c),!d)return null;for(var m={end:{column:0}},g,y,w=0;w<d.folds.length;w++){y=d.folds[w];var S=y.range.compareEnd(c,h);if(S==-1){g=this.getLine(y.start.row).substring(m.end.column,y.start.column);break}else if(S===0)return null;m=y}return g||(g=this.getLine(y.start.row).substring(m.end.column)),f==-1?g.substring(0,h-m.end.column):f==1?g.substring(h-m.end.column):g},this.getFoldLine=function(c,h){var f=this.$foldData,d=0;for(h&&(d=f.indexOf(h)),d==-1&&(d=0),d;d<f.length;d++){var m=f[d];if(m.start.row<=c&&m.end.row>=c)return m;if(m.end.row>c)return null}return null},this.getNextFoldLine=function(c,h){var f=this.$foldData,d=0;for(h&&(d=f.indexOf(h)),d==-1&&(d=0),d;d<f.length;d++){var m=f[d];if(m.end.row>=c)return m}return null},this.getFoldedRowCount=function(c,h){for(var f=this.$foldData,d=h-c+1,m=0;m<f.length;m++){var g=f[m],y=g.end.row,w=g.start.row;if(y>=h){w<h&&(w>=c?d-=h-w:d=0);break}else y>=c&&(w>=c?d-=y-w:d-=y-c+1)}return d},this.$addFoldLine=function(c){return this.$foldData.push(c),this.$foldData.sort(function(h,f){return h.start.row-f.start.row}),c},this.addFold=function(c,h){var f=this.$foldData,d=!1,m;c instanceof u?m=c:(m=new u(h,c),m.collapseChildren=h.collapseChildren),this.$clipRangeToDocument(m.range);var g=m.start.row,y=m.start.column,w=m.end.row,S=m.end.column,b=this.getFoldAt(g,y,1),_=this.getFoldAt(w,S,-1);if(b&&_==b)return b.addSubFold(m);b&&!b.range.isStart(g,y)&&this.removeFold(b),_&&!_.range.isEnd(w,S)&&this.removeFold(_);var v=this.getFoldsInRange(m.range);v.length>0&&(this.removeFolds(v),m.collapseChildren||v.forEach(function(k){m.addSubFold(k)}));for(var E=0;E<f.length;E++){var x=f[E];if(w==x.start.row){x.addFold(m),d=!0;break}else if(g==x.end.row){if(x.addFold(m),d=!0,!m.sameRow){var T=f[E+1];if(T&&T.start.row==w){x.merge(T);break}}break}else if(w<=x.start.row)break}return d||(x=this.$addFoldLine(new l(this.$foldData,m))),this.$useWrapMode?this.$updateWrapData(x.start.row,x.start.row):this.$updateRowLengthCache(x.start.row,x.start.row),this.$modified=!0,this._signal("changeFold",{data:m,action:"add"}),m},this.addFolds=function(c){c.forEach(function(h){this.addFold(h)},this)},this.removeFold=function(c){var h=c.foldLine,f=h.start.row,d=h.end.row,m=this.$foldData,g=h.folds;if(g.length==1)m.splice(m.indexOf(h),1);else if(h.range.isEnd(c.end.row,c.end.column))g.pop(),h.end.row=g[g.length-1].end.row,h.end.column=g[g.length-1].end.column;else if(h.range.isStart(c.start.row,c.start.column))g.shift(),h.start.row=g[0].start.row,h.start.column=g[0].start.column;else if(c.sameRow)g.splice(g.indexOf(c),1);else{var y=h.split(c.start.row,c.start.column);g=y.folds,g.shift(),y.start.row=g[0].start.row,y.start.column=g[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(f,d):this.$updateRowLengthCache(f,d)),this.$modified=!0,this._signal("changeFold",{data:c,action:"remove"})},this.removeFolds=function(c){for(var h=[],f=0;f<c.length;f++)h.push(c[f]);h.forEach(function(d){this.removeFold(d)},this),this.$modified=!0},this.expandFold=function(c){this.removeFold(c),c.subFolds.forEach(function(h){c.restoreRange(h),this.addFold(h)},this),c.collapseChildren>0&&this.foldAll(c.start.row+1,c.end.row,c.collapseChildren-1),c.subFolds=[]},this.expandFolds=function(c){c.forEach(function(h){this.expandFold(h)},this)},this.unfold=function(c,h){var f,d;if(c==null)f=new o(0,0,this.getLength(),0),h==null&&(h=!0);else if(typeof c=="number")f=new o(c,0,c,this.getLine(c).length);else if("row"in c)f=o.fromPoints(c,c);else{if(Array.isArray(c))return d=[],c.forEach(function(g){d=d.concat(this.unfold(g))},this),d;f=c}d=this.getFoldsInRangeList(f);for(var m=d;d.length==1&&o.comparePoints(d[0].start,f.start)<0&&o.comparePoints(d[0].end,f.end)>0;)this.expandFolds(d),d=this.getFoldsInRangeList(f);if(h!=!1?this.removeFolds(d):this.expandFolds(d),m.length)return m},this.isRowFolded=function(c,h){return!!this.getFoldLine(c,h)},this.getRowFoldEnd=function(c,h){var f=this.getFoldLine(c,h);return f?f.end.row:c},this.getRowFoldStart=function(c,h){var f=this.getFoldLine(c,h);return f?f.start.row:c},this.getFoldDisplayLine=function(c,h,f,d,m){d==null&&(d=c.start.row),m==null&&(m=0),h==null&&(h=c.end.row),f==null&&(f=this.getLine(h).length);var g=this.doc,y="";return c.walk(function(w,S,b,_){if(!(S<d)){if(S==d){if(b<m)return;_=Math.max(m,_)}w!=null?y+=w:y+=g.getLine(S).substring(_,b)}},h,f),y},this.getDisplayLine=function(c,h,f,d){var m=this.getFoldLine(c);if(m)return this.getFoldDisplayLine(m,c,h,f,d);var g;return g=this.doc.getLine(c),g.substring(d||0,h||g.length)},this.$cloneFoldData=function(){var c=[];return c=this.$foldData.map(function(h){var f=h.folds.map(function(d){return d.clone()});return new l(c,f)}),c},this.toggleFold=function(c){var h=this.selection,f=h.getRange(),d,m;if(f.isEmpty()){var g=f.start;if(d=this.getFoldAt(g.row,g.column),d){this.expandFold(d);return}else(m=this.findMatchingBracket(g))?f.comparePoint(m)==1?f.end=m:(f.start=m,f.start.column++,f.end.column--):(m=this.findMatchingBracket({row:g.row,column:g.column+1}))?(f.comparePoint(m)==1?f.end=m:f.start=m,f.start.column++):f=this.getCommentFoldRange(g.row,g.column)||f}else{var y=this.getFoldsInRange(f);if(c&&y.length){this.expandFolds(y);return}else y.length==1&&(d=y[0])}if(d||(d=this.getFoldAt(f.start.row,f.start.column)),d&&d.range.toString()==f.toString()){this.expandFold(d);return}var w="...";if(!f.isMultiLine()){if(w=this.getTextRange(f),w.length<4)return;w=w.trim().substring(0,2)+".."}this.addFold(w,f)},this.getCommentFoldRange=function(c,h,f){var d=new s(this,c,h),m=d.getCurrentToken(),g=m&&m.type;if(m&&/^comment|string/.test(g)){g=g.match(/comment|string/)[0],g=="comment"&&(g+="|doc-start|\\.doc");var y=new RegExp(g),w=new o;if(f!=1){do m=d.stepBackward();while(m&&y.test(m.type));m=d.stepForward()}w.start.row=d.getCurrentTokenRow(),w.start.column=d.getCurrentTokenColumn()+m.value.length,d=new s(this,c,h);var S=this.getState(d.$row);if(f!=-1){var b=-1;do if(m=d.stepForward(),b==-1){var _=this.getState(d.$row);S.toString()!==_.toString()&&(b=d.$row)}else if(d.$row>b)break;while(m&&y.test(m.type));m=d.stepBackward()}else m=d.getCurrentToken();return w.end.row=d.getCurrentTokenRow(),w.end.column=d.getCurrentTokenColumn(),w}},this.foldAll=function(c,h,f,d){f==null&&(f=1e5);var m=this.foldWidgets;if(m){h=h||this.getLength(),c=c||0;for(var g=c;g<h;g++)if(m[g]==null&&(m[g]=this.getFoldWidget(g)),m[g]=="start"&&!(d&&!d(g))){var y=this.getFoldWidgetRange(g);y&&y.isMultiLine()&&y.end.row<=h&&y.start.row>=c&&(g=y.end.row,y.collapseChildren=f,this.addFold("...",y))}}},this.foldToLevel=function(c){for(this.foldAll();c-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var c=this;this.foldAll(null,null,null,function(h){for(var f=c.getTokens(h),d=0;d<f.length;d++){var m=f[d];if(!(m.type=="text"&&/^\s+$/.test(m.value)))return!!/comment/.test(m.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(c){if(!this.$foldStyles[c])throw new Error("invalid fold style: "+c+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=c){this.$foldStyle=c,c=="manual"&&this.unfold();var h=this.$foldMode;this.$setFolding(null),this.$setFolding(h)}},this.$setFolding=function(c){if(this.$foldMode!=c){if(this.$foldMode=c,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!c||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=c.getFoldWidget.bind(c,this,this.$foldStyle),this.getFoldWidgetRange=c.getFoldWidgetRange.bind(c,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(c,h){var f=this.foldWidgets;if(!f||h&&f[c])return{};for(var d=c-1,m;d>=0;){var g=f[d];if(g==null&&(g=f[d]=this.getFoldWidget(d)),g=="start"){var y=this.getFoldWidgetRange(d);if(m||(m=y),y&&y.end.row>=c)break}d--}return{range:d!==-1&&y,firstRange:m}},this.onFoldWidgetClick=function(c,h){h instanceof p&&(h=h.domEvent);var f={children:h.shiftKey,all:h.ctrlKey||h.metaKey,siblings:h.altKey},d=this.$toggleFoldWidget(c,f);if(!d){var m=h.target||h.srcElement;m&&/ace_fold-widget/.test(m.className)&&(m.className+=" ace_invalid")}},this.$toggleFoldWidget=function(c,h){if(this.getFoldWidget){var f=this.getFoldWidget(c),d=this.getLine(c),m=f==="end"?-1:1,g=this.getFoldAt(c,m===-1?0:d.length,m);if(g)return h.children||h.all?this.removeFold(g):this.expandFold(g),g;var y=this.getFoldWidgetRange(c,!0);if(y&&!y.isMultiLine()&&(g=this.getFoldAt(y.start.row,y.start.column,1),g&&y.isEqual(g.range)))return this.removeFold(g),g;if(h.siblings){var w=this.getParentFoldRangeData(c);if(w.range)var S=w.range.start.row+1,b=w.range.end.row;this.foldAll(S,b,h.all?1e4:0)}else h.children?(b=y?y.end.row:this.getLength(),this.foldAll(c+1,b,h.all?1e4:0)):y&&(h.all&&(y.collapseChildren=1e4),this.addFold("...",y));return y}},this.toggleFoldWidget=function(c){var h=this.selection.getCursor().row;h=this.getRowFoldStart(h);var f=this.$toggleFoldWidget(h,{});if(!f){var d=this.getParentFoldRangeData(h,!0);if(f=d.range||d.firstRange,f){h=f.start.row;var m=this.getFoldAt(h,this.getLine(h).length,1);m?this.removeFold(m):this.addFold("...",f)}}},this.updateFoldWidgets=function(c){var h=c.start.row,f=c.end.row-h;if(f===0)this.foldWidgets[h]=null;else if(c.action=="remove")this.foldWidgets.splice(h,f+1,null);else{var d=Array(f+1);d.unshift(h,1),this.foldWidgets.splice.apply(this.foldWidgets,d)}},this.tokenizerUpdateFoldWidgets=function(c){var h=c.data;h.first!=h.last&&this.foldWidgets.length>h.first&&this.foldWidgets.splice(h.first,this.foldWidgets.length)}}i.Folding=a}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(n,i,r){var o=n("../token_iterator").TokenIterator,l=n("../range").Range;function u(){this.findMatchingBracket=function(s,p){if(s.column==0)return null;var a=p||this.getLine(s.row).charAt(s.column-1);if(a=="")return null;var c=a.match(/([\(\[\{])|([\)\]\}])/);return c?c[1]?this.$findClosingBracket(c[1],s):this.$findOpeningBracket(c[2],s):null},this.getBracketRange=function(s){var p=this.getLine(s.row),a=!0,c,h=p.charAt(s.column-1),f=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(f||(h=p.charAt(s.column),s={row:s.row,column:s.column+1},f=h&&h.match(/([\(\[\{])|([\)\]\}])/),a=!1),!f)return null;if(f[1]){var d=this.$findClosingBracket(f[1],s);if(!d)return null;c=l.fromPoints(s,d),a||(c.end.column++,c.start.column--),c.cursor=c.end}else{var d=this.$findOpeningBracket(f[2],s);if(!d)return null;c=l.fromPoints(d,s),a||(c.start.column++,c.end.column--),c.cursor=c.start}return c},this.getMatchingBracketRanges=function(s,p){var a=this.getLine(s.row),c=/([\(\[\{])|([\)\]\}])/,h=!p&&a.charAt(s.column-1),f=h&&h.match(c);if(f||(h=(p===void 0||p)&&a.charAt(s.column),s={row:s.row,column:s.column+1},f=h&&h.match(c)),!f)return null;var d=new l(s.row,s.column-1,s.row,s.column),m=f[1]?this.$findClosingBracket(f[1],s):this.$findOpeningBracket(f[2],s);if(!m)return[d];var g=new l(m.row,m.column,m.row,m.column+1);return[d,g]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(s,p,a){var c=this.$brackets[s],h=1,f=new o(this,p.row,p.column),d=f.getCurrentToken();if(d||(d=f.stepForward()),!!d){a||(a=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var m=p.column-f.getCurrentTokenColumn()-2,g=d.value;;){for(;m>=0;){var y=g.charAt(m);if(y==c){if(h-=1,h==0)return{row:f.getCurrentTokenRow(),column:m+f.getCurrentTokenColumn()}}else y==s&&(h+=1);m-=1}do d=f.stepBackward();while(d&&!a.test(d.type));if(d==null)break;g=d.value,m=g.length-1}return null}},this.$findClosingBracket=function(s,p,a){var c=this.$brackets[s],h=1,f=new o(this,p.row,p.column),d=f.getCurrentToken();if(d||(d=f.stepForward()),!!d){a||(a=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var m=p.column-f.getCurrentTokenColumn();;){for(var g=d.value,y=g.length;m<y;){var w=g.charAt(m);if(w==c){if(h-=1,h==0)return{row:f.getCurrentTokenRow(),column:m+f.getCurrentTokenColumn()}}else w==s&&(h+=1);m+=1}do d=f.stepForward();while(d&&!a.test(d.type));if(d==null)break;m=0}return null}},this.getMatchingTags=function(s){var p=new o(this,s.row,s.column),a=this.$findTagName(p);if(a){var c=p.stepBackward();return c.value==="<"?this.$findClosingTag(p,a):this.$findOpeningTag(p,a)}},this.$findTagName=function(s){var p=s.getCurrentToken(),a=!1,c=!1;if(p&&p.type.indexOf("tag-name")===-1)do c?p=s.stepBackward():p=s.stepForward(),p&&(p.value==="/>"?c=!0:p.type.indexOf("tag-name")!==-1&&(a=!0));while(p&&!a);return p},this.$findClosingTag=function(s,p){var a,c=p.value,h=p.value,f=0,d=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);p=s.stepForward();var m=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+p.value.length),g=!1;do{if(a=p,a.type.indexOf("tag-close")!==-1&&!g){var y=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);g=!0}if(p=s.stepForward(),p){if(p.value===">"&&!g){var y=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);g=!0}if(p.type.indexOf("tag-name")!==-1){if(c=p.value,h===c){if(a.value==="<")f++;else if(a.value==="</"&&(f--,f<0)){s.stepBackward();var w=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+2);p=s.stepForward();var S=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+p.value.length);if(p.type.indexOf("tag-close")===-1&&(p=s.stepForward()),p&&p.value===">")var b=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);else return}}}else if(h===c&&p.value==="/>"&&(f--,f<0))var w=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+2),S=w,b=S,y=new l(m.end.row,m.end.column,m.end.row,m.end.column+1)}}while(p&&f>=0);if(d&&y&&w&&b&&m&&S)return{openTag:new l(d.start.row,d.start.column,y.end.row,y.end.column),closeTag:new l(w.start.row,w.start.column,b.end.row,b.end.column),openTagName:m,closeTagName:S}},this.$findOpeningTag=function(s,p){var a=s.getCurrentToken(),c=p.value,h=0,f=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn(),m=d+2,g=new l(f,d,f,m);s.stepForward();var y=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+p.value.length);if(p.type.indexOf("tag-close")===-1&&(p=s.stepForward()),!(!p||p.value!==">")){var w=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);s.stepBackward(),s.stepBackward();do if(p=a,f=s.getCurrentTokenRow(),d=s.getCurrentTokenColumn(),m=d+p.value.length,a=s.stepBackward(),p){if(p.type.indexOf("tag-name")!==-1){if(c===p.value)if(a.value==="<"){if(h++,h>0){var S=new l(f,d,f,m),b=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);do p=s.stepForward();while(p&&p.value!==">");var _=new l(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1)}}else a.value==="</"&&h--}else if(p.value==="/>"){for(var v=0,E=a;E;){if(E.type.indexOf("tag-name")!==-1&&E.value===c){h--;break}else if(E.value==="<")break;E=s.stepBackward(),v++}for(var x=0;x<v;x++)s.stepForward()}}while(a&&h<=0);if(b&&_&&g&&w&&S&&y)return{openTag:new l(b.start.row,b.start.column,_.end.row,_.end.column),closeTag:new l(g.start.row,g.start.column,w.end.row,w.end.column),openTagName:S,closeTagName:y}}}}i.BracketMatch=u}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(n,i,r){var o=n("./lib/oop"),l=n("./lib/lang"),u=n("./bidihandler").BidiHandler,s=n("./config"),p=n("./lib/event_emitter").EventEmitter,a=n("./selection").Selection,c=n("./mode/text").Mode,h=n("./range").Range,f=n("./document").Document,d=n("./background_tokenizer").BackgroundTokenizer,m=n("./search_highlight").SearchHighlight,g=n("./undomanager").UndoManager,y=function(){function $(R,A){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++$.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new d(new c().getTokenizer(),this);var C=this;this.bgTokenizer.on("update",function(M){C._signal("tokenizerUpdate",M)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof R!="object"||!R.getLine)&&(R=new f(R)),this.setDocument(R),this.selection=new a(this),this.$bidiHandler=new u(this),s.resetOptions(this),this.setMode(A),s._signal("session",this),this.destroyed=!1}return $.prototype.setDocument=function(R){this.doc&&this.doc.off("change",this.$onChange),this.doc=R,R.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},$.prototype.getDocument=function(){return this.doc},$.prototype.$resetRowCache=function(R){if(!R){this.$docRowCache=[],this.$screenRowCache=[];return}var A=this.$docRowCache.length,C=this.$getRowCacheIndex(this.$docRowCache,R)+1;A>C&&(this.$docRowCache.splice(C,A),this.$screenRowCache.splice(C,A))},$.prototype.$getRowCacheIndex=function(R,A){for(var C=0,M=R.length-1;C<=M;){var I=C+M>>1,D=R[I];if(A>D)C=I+1;else if(A<D)M=I-1;else return I}return C-1},$.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},$.prototype.onChangeFold=function(R){var A=R.data;this.$resetRowCache(A.start.row)},$.prototype.onChange=function(R){this.$modified=!0,this.$bidiHandler.onChange(R),this.$resetRowCache(R.start.row);var A=this.$updateInternalDataOnChange(R);!this.$fromUndo&&this.$undoManager&&(A&&A.length&&(this.$undoManager.add({action:"removeFolds",folds:A},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(R,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(R),this._signal("change",R)},$.prototype.setValue=function(R){this.doc.setValue(R),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},$.fromJSON=function(R){typeof R=="string"&&(R=JSON.parse(R));var A=new g;A.$undoStack=R.history.undo,A.$redoStack=R.history.redo,A.mark=R.history.mark,A.$rev=R.history.rev;var C=new $(R.value);return R.folds.forEach(function(M){C.addFold("...",h.fromPoints(M.start,M.end))}),C.setAnnotations(R.annotations),C.setBreakpoints(R.breakpoints),C.setMode(R.mode),C.setScrollLeft(R.scrollLeft),C.setScrollTop(R.scrollTop),C.setUndoManager(A),C.selection.fromJSON(R.selection),C},$.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(R){return R.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},$.prototype.toString=function(){return this.doc.getValue()},$.prototype.getSelection=function(){return this.selection},$.prototype.getState=function(R){return this.bgTokenizer.getState(R)},$.prototype.getTokens=function(R){return this.bgTokenizer.getTokens(R)},$.prototype.getTokenAt=function(R,A){var C=this.bgTokenizer.getTokens(R),M,I=0;if(A==null){var D=C.length-1;I=this.getLine(R).length}else for(var D=0;D<C.length&&(I+=C[D].value.length,!(I>=A));D++);return M=C[D],M?(M.index=D,M.start=I-M.value.length,M):null},$.prototype.setUndoManager=function(R){if(this.$undoManager=R,this.$informUndoManager&&this.$informUndoManager.cancel(),R){var A=this;R.addSession(this),this.$syncInformUndoManager=function(){A.$informUndoManager.cancel(),A.mergeUndoDeltas=!1},this.$informUndoManager=l.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},$.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},$.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},$.prototype.getTabString=function(){return this.getUseSoftTabs()?l.stringRepeat(" ",this.getTabSize()):"	"},$.prototype.setUseSoftTabs=function(R){this.setOption("useSoftTabs",R)},$.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},$.prototype.setTabSize=function(R){this.setOption("tabSize",R)},$.prototype.getTabSize=function(){return this.$tabSize},$.prototype.isTabStop=function(R){return this.$useSoftTabs&&R.column%this.$tabSize===0},$.prototype.setNavigateWithinSoftTabs=function(R){this.setOption("navigateWithinSoftTabs",R)},$.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},$.prototype.setOverwrite=function(R){this.setOption("overwrite",R)},$.prototype.getOverwrite=function(){return this.$overwrite},$.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},$.prototype.addGutterDecoration=function(R,A){this.$decorations[R]||(this.$decorations[R]=""),this.$decorations[R]+=" "+A,this._signal("changeBreakpoint",{})},$.prototype.removeGutterDecoration=function(R,A){this.$decorations[R]=(this.$decorations[R]||"").replace(" "+A,""),this._signal("changeBreakpoint",{})},$.prototype.getBreakpoints=function(){return this.$breakpoints},$.prototype.setBreakpoints=function(R){this.$breakpoints=[];for(var A=0;A<R.length;A++)this.$breakpoints[R[A]]="ace_breakpoint";this._signal("changeBreakpoint",{})},$.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},$.prototype.setBreakpoint=function(R,A){A===void 0&&(A="ace_breakpoint"),A?this.$breakpoints[R]=A:delete this.$breakpoints[R],this._signal("changeBreakpoint",{})},$.prototype.clearBreakpoint=function(R){delete this.$breakpoints[R],this._signal("changeBreakpoint",{})},$.prototype.addMarker=function(R,A,C,M){var I=this.$markerId++,D={range:R,type:C||"line",renderer:typeof C=="function"?C:null,clazz:A,inFront:!!M,id:I};return M?(this.$frontMarkers[I]=D,this._signal("changeFrontMarker")):(this.$backMarkers[I]=D,this._signal("changeBackMarker")),I},$.prototype.addDynamicMarker=function(R,A){if(R.update){var C=this.$markerId++;return R.id=C,R.inFront=!!A,A?(this.$frontMarkers[C]=R,this._signal("changeFrontMarker")):(this.$backMarkers[C]=R,this._signal("changeBackMarker")),R}},$.prototype.removeMarker=function(R){var A=this.$frontMarkers[R]||this.$backMarkers[R];if(A){var C=A.inFront?this.$frontMarkers:this.$backMarkers;delete C[R],this._signal(A.inFront?"changeFrontMarker":"changeBackMarker")}},$.prototype.getMarkers=function(R){return R?this.$frontMarkers:this.$backMarkers},$.prototype.highlight=function(R){if(!this.$searchHighlight){var A=new m(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(A)}this.$searchHighlight.setRegexp(R)},$.prototype.highlightLines=function(R,A,C,M){typeof A!="number"&&(C=A,A=R),C||(C="ace_step");var I=new h(R,0,A,1/0);return I.id=this.addMarker(I,C,"fullLine",M),I},$.prototype.setAnnotations=function(R){this.$annotations=R,this._signal("changeAnnotation",{})},$.prototype.getAnnotations=function(){return this.$annotations||[]},$.prototype.clearAnnotations=function(){this.setAnnotations([])},$.prototype.$detectNewLine=function(R){var A=R.match(/^.*?(\r?\n)/m);A?this.$autoNewLine=A[1]:this.$autoNewLine=`
`},$.prototype.getWordRange=function(R,A){var C=this.getLine(R),M=!1;if(A>0&&(M=!!C.charAt(A-1).match(this.tokenRe)),M||(M=!!C.charAt(A).match(this.tokenRe)),M)var I=this.tokenRe;else if(/^\s+$/.test(C.slice(A-1,A+1)))var I=/\s/;else var I=this.nonTokenRe;var D=A;if(D>0){do D--;while(D>=0&&C.charAt(D).match(I));D++}for(var B=A;B<C.length&&C.charAt(B).match(I);)B++;return new h(R,D,R,B)},$.prototype.getAWordRange=function(R,A){for(var C=this.getWordRange(R,A),M=this.getLine(C.end.row);M.charAt(C.end.column).match(/[ \t]/);)C.end.column+=1;return C},$.prototype.setNewLineMode=function(R){this.doc.setNewLineMode(R)},$.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},$.prototype.setUseWorker=function(R){this.setOption("useWorker",R)},$.prototype.getUseWorker=function(){return this.$useWorker},$.prototype.onReloadTokenizer=function(R){var A=R.data;this.bgTokenizer.start(A.first),this._signal("tokenizerUpdate",R)},$.prototype.setMode=function(R,A){if(R&&typeof R=="object"){if(R.getTokenizer)return this.$onChangeMode(R);var C=R,M=C.path}else M=R||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[M]&&!C){this.$onChangeMode(this.$modes[M]),A&&A();return}this.$modeId=M,s.loadModule(["mode",M],(function(I){if(this.$modeId!==M)return A&&A();this.$modes[M]&&!C?this.$onChangeMode(this.$modes[M]):I&&I.Mode&&(I=new I.Mode(C),C||(this.$modes[M]=I,I.$id=M),this.$onChangeMode(I)),A&&A()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},$.prototype.$onChangeMode=function(R,A){if(A||(this.$modeId=R.$id),this.$mode!==R){var C=this.$mode;this.$mode=R,this.$stopWorker(),this.$useWorker&&this.$startWorker();var M=R.getTokenizer();if(M.on!==void 0){var I=this.onReloadTokenizer.bind(this);M.on("update",I)}this.bgTokenizer.setTokenizer(M),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=R.tokenRe,this.nonTokenRe=R.nonTokenRe,A||(R.attachToSession&&R.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(R.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:C,mode:R}))}},$.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},$.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(R){s.warn("Could not load worker",R),this.$worker=null}},$.prototype.getMode=function(){return this.$mode},$.prototype.setScrollTop=function(R){this.$scrollTop===R||isNaN(R)||(this.$scrollTop=R,this._signal("changeScrollTop",R))},$.prototype.getScrollTop=function(){return this.$scrollTop},$.prototype.setScrollLeft=function(R){this.$scrollLeft===R||isNaN(R)||(this.$scrollLeft=R,this._signal("changeScrollLeft",R))},$.prototype.getScrollLeft=function(){return this.$scrollLeft},$.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},$.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var R=0;return this.lineWidgets.forEach(function(A){A&&A.screenWidth>R&&(R=A.screenWidth)}),this.lineWidgetWidth=R},$.prototype.$computeWidth=function(R){if(this.$modified||R){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var A=this.doc.getAllLines(),C=this.$rowLengthCache,M=0,I=0,D=this.$foldData[I],B=D?D.start.row:1/0,F=A.length,j=0;j<F;j++){if(j>B){if(j=D.end.row+1,j>=F)break;D=this.$foldData[I++],B=D?D.start.row:1/0}C[j]==null&&(C[j]=this.$getStringScreenWidth(A[j])[0]),C[j]>M&&(M=C[j])}this.screenWidth=M}},$.prototype.getLine=function(R){return this.doc.getLine(R)},$.prototype.getLines=function(R,A){return this.doc.getLines(R,A)},$.prototype.getLength=function(){return this.doc.getLength()},$.prototype.getTextRange=function(R){return this.doc.getTextRange(R||this.selection.getRange())},$.prototype.insert=function(R,A){return this.doc.insert(R,A)},$.prototype.remove=function(R){return this.doc.remove(R)},$.prototype.removeFullLines=function(R,A){return this.doc.removeFullLines(R,A)},$.prototype.undoChanges=function(R,A){if(R.length){this.$fromUndo=!0;for(var C=R.length-1;C!=-1;C--){var M=R[C];M.action=="insert"||M.action=="remove"?this.doc.revertDelta(M):M.folds&&this.addFolds(M.folds)}!A&&this.$undoSelect&&(R.selectionBefore?this.selection.fromJSON(R.selectionBefore):this.selection.setRange(this.$getUndoSelection(R,!0))),this.$fromUndo=!1}},$.prototype.redoChanges=function(R,A){if(R.length){this.$fromUndo=!0;for(var C=0;C<R.length;C++){var M=R[C];(M.action=="insert"||M.action=="remove")&&this.doc.$safeApplyDelta(M)}!A&&this.$undoSelect&&(R.selectionAfter?this.selection.fromJSON(R.selectionAfter):this.selection.setRange(this.$getUndoSelection(R,!1))),this.$fromUndo=!1}},$.prototype.setUndoSelect=function(R){this.$undoSelect=R},$.prototype.$getUndoSelection=function(R,A){function C(F){return A?F.action!=="insert":F.action==="insert"}for(var M,I,D=0;D<R.length;D++){var B=R[D];if(B.start){if(!M){C(B)?M=h.fromPoints(B.start,B.end):M=h.fromPoints(B.start,B.start);continue}C(B)?(I=B.start,M.compare(I.row,I.column)==-1&&M.setStart(I),I=B.end,M.compare(I.row,I.column)==1&&M.setEnd(I)):(I=B.start,M.compare(I.row,I.column)==-1&&(M=h.fromPoints(B.start,B.start)))}}return M},$.prototype.replace=function(R,A){return this.doc.replace(R,A)},$.prototype.moveText=function(R,A,C){var M=this.getTextRange(R),I=this.getFoldsInRange(R),D=h.fromPoints(A,A);if(!C){this.remove(R);var B=R.start.row-R.end.row,F=B?-R.end.column:R.start.column-R.end.column;F&&(D.start.row==R.end.row&&D.start.column>R.end.column&&(D.start.column+=F),D.end.row==R.end.row&&D.end.column>R.end.column&&(D.end.column+=F)),B&&D.start.row>=R.end.row&&(D.start.row+=B,D.end.row+=B)}if(D.end=this.insert(D.start,M),I.length){var j=R.start,Z=D.start,B=Z.row-j.row,F=Z.column-j.column;this.addFolds(I.map(function(V){return V=V.clone(),V.start.row==j.row&&(V.start.column+=F),V.end.row==j.row&&(V.end.column+=F),V.start.row+=B,V.end.row+=B,V}))}return D},$.prototype.indentRows=function(R,A,C){C=C.replace(/\t/g,this.getTabString());for(var M=R;M<=A;M++)this.doc.insertInLine({row:M,column:0},C)},$.prototype.outdentRows=function(R){for(var A=R.collapseRows(),C=new h(0,0,0,0),M=this.getTabSize(),I=A.start.row;I<=A.end.row;++I){var D=this.getLine(I);C.start.row=I,C.end.row=I;for(var B=0;B<M&&D.charAt(B)==" ";++B);B<M&&D.charAt(B)=="	"?(C.start.column=B,C.end.column=B+1):(C.start.column=0,C.end.column=B),this.remove(C)}},$.prototype.$moveLines=function(R,A,C){if(R=this.getRowFoldStart(R),A=this.getRowFoldEnd(A),C<0){var M=this.getRowFoldStart(R+C);if(M<0)return 0;var I=M-R}else if(C>0){var M=this.getRowFoldEnd(A+C);if(M>this.doc.getLength()-1)return 0;var I=M-A}else{R=this.$clipRowToDocument(R),A=this.$clipRowToDocument(A);var I=A-R+1}var D=new h(R,0,A,Number.MAX_VALUE),B=this.getFoldsInRange(D).map(function(j){return j=j.clone(),j.start.row+=I,j.end.row+=I,j}),F=C==0?this.doc.getLines(R,A):this.doc.removeFullLines(R,A);return this.doc.insertFullLines(R+I,F),B.length&&this.addFolds(B),I},$.prototype.moveLinesUp=function(R,A){return this.$moveLines(R,A,-1)},$.prototype.moveLinesDown=function(R,A){return this.$moveLines(R,A,1)},$.prototype.duplicateLines=function(R,A){return this.$moveLines(R,A,0)},$.prototype.$clipRowToDocument=function(R){return Math.max(0,Math.min(R,this.doc.getLength()-1))},$.prototype.$clipColumnToRow=function(R,A){return A<0?0:Math.min(this.doc.getLine(R).length,A)},$.prototype.$clipPositionToDocument=function(R,A){if(A=Math.max(0,A),R<0)R=0,A=0;else{var C=this.doc.getLength();R>=C?(R=C-1,A=this.doc.getLine(C-1).length):A=Math.min(this.doc.getLine(R).length,A)}return{row:R,column:A}},$.prototype.$clipRangeToDocument=function(R){R.start.row<0?(R.start.row=0,R.start.column=0):R.start.column=this.$clipColumnToRow(R.start.row,R.start.column);var A=this.doc.getLength()-1;return R.end.row>A?(R.end.row=A,R.end.column=this.doc.getLine(A).length):R.end.column=this.$clipColumnToRow(R.end.row,R.end.column),R},$.prototype.setUseWrapMode=function(R){if(R!=this.$useWrapMode){if(this.$useWrapMode=R,this.$modified=!0,this.$resetRowCache(0),R){var A=this.getLength();this.$wrapData=Array(A),this.$updateWrapData(0,A-1)}this._signal("changeWrapMode")}},$.prototype.getUseWrapMode=function(){return this.$useWrapMode},$.prototype.setWrapLimitRange=function(R,A){(this.$wrapLimitRange.min!==R||this.$wrapLimitRange.max!==A)&&(this.$wrapLimitRange={min:R,max:A},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},$.prototype.adjustWrapLimit=function(R,A){var C=this.$wrapLimitRange;C.max<0&&(C={min:A,max:A});var M=this.$constrainWrapLimit(R,C.min,C.max);return M!=this.$wrapLimit&&M>1?(this.$wrapLimit=M,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},$.prototype.$constrainWrapLimit=function(R,A,C){return A&&(R=Math.max(A,R)),C&&(R=Math.min(C,R)),R},$.prototype.getWrapLimit=function(){return this.$wrapLimit},$.prototype.setWrapLimit=function(R){this.setWrapLimitRange(R,R)},$.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},$.prototype.$updateInternalDataOnChange=function(R){var A=this.$useWrapMode,C=R.action,M=R.start,I=R.end,D=M.row,B=I.row,F=B-D,j=null;if(this.$updating=!0,F!=0)if(C==="remove"){this[A?"$wrapData":"$rowLengthCache"].splice(D,F);var Z=this.$foldData;j=this.getFoldsInRange(R),this.removeFolds(j);var Q=this.getFoldLine(I.row),W=0;if(Q){Q.addRemoveChars(I.row,I.column,M.column-I.column),Q.shiftRow(-F);var V=this.getFoldLine(D);V&&V!==Q&&(V.merge(Q),Q=V),W=Z.indexOf(Q)+1}for(W;W<Z.length;W++){var Q=Z[W];Q.start.row>=I.row&&Q.shiftRow(-F)}B=D}else{var G=Array(F);G.unshift(D,0);var U=A?this.$wrapData:this.$rowLengthCache;U.splice.apply(U,G);var Z=this.$foldData,Q=this.getFoldLine(D),W=0;if(Q){var ee=Q.range.compareInside(M.row,M.column);ee==0?(Q=Q.split(M.row,M.column),Q&&(Q.shiftRow(F),Q.addRemoveChars(B,0,I.column-M.column))):ee==-1&&(Q.addRemoveChars(D,0,I.column-M.column),Q.shiftRow(F)),W=Z.indexOf(Q)+1}for(W;W<Z.length;W++){var Q=Z[W];Q.start.row>=D&&Q.shiftRow(F)}}else{F=Math.abs(R.start.column-R.end.column),C==="remove"&&(j=this.getFoldsInRange(R),this.removeFolds(j),F=-F);var Q=this.getFoldLine(D);Q&&Q.addRemoveChars(D,M.column,F)}return A&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,A?this.$updateWrapData(D,B):this.$updateRowLengthCache(D,B),j},$.prototype.$updateRowLengthCache=function(R,A){this.$rowLengthCache[R]=null,this.$rowLengthCache[A]=null},$.prototype.$updateWrapData=function(R,A){var C=this.doc.getAllLines(),M=this.getTabSize(),I=this.$wrapData,D=this.$wrapLimit,B,F,j=R;for(A=Math.min(A,C.length-1);j<=A;)F=this.getFoldLine(j,F),F?(B=[],F.walk((function(Z,Q,W,V){var G;if(Z!=null){G=this.$getDisplayTokens(Z,B.length),G[0]=b;for(var U=1;U<G.length;U++)G[U]=_}else G=this.$getDisplayTokens(C[Q].substring(V,W),B.length);B=B.concat(G)}).bind(this),F.end.row,C[F.end.row].length+1),I[F.start.row]=this.$computeWrapSplits(B,D,M),j=F.end.row+1):(B=this.$getDisplayTokens(C[j]),I[j]=this.$computeWrapSplits(B,D,M),j++)},$.prototype.$computeWrapSplits=function(R,A,C){if(R.length==0)return[];var M=[],I=R.length,D=0,B=0,F=this.$wrapAsCode,j=this.$indentedSoftWrap,Z=A<=Math.max(2*C,8)||j===!1?0:Math.floor(A/2);function Q(){var ee=0;if(Z===0)return ee;if(j)for(var Y=0;Y<R.length;Y++){var O=R[Y];if(O==E)ee+=1;else if(O==x)ee+=C;else{if(O==T)continue;break}}return F&&j!==!1&&(ee+=C),Math.min(ee,Z)}function W(ee){for(var Y=ee-D,O=D;O<ee;O++){var L=R[O];(L===12||L===2)&&(Y-=1)}M.length||(V=Q(),M.indent=V),B+=Y,M.push(B),D=ee}for(var V=0;I-D>A-V;){var G=D+A-V;if(R[G-1]>=E&&R[G]>=E){W(G);continue}if(R[G]==b||R[G]==_){for(G;G!=D-1&&R[G]!=b;G--);if(G>D){W(G);continue}for(G=D+A,G;G<R.length&&R[G]==_;G++);if(G==R.length)break;W(G);continue}for(var U=Math.max(G-(A-(A>>2)),D-1);G>U&&R[G]<b;)G--;if(F){for(;G>U&&R[G]<b;)G--;for(;G>U&&R[G]==v;)G--}else for(;G>U&&R[G]<E;)G--;if(G>U){W(++G);continue}G=D+A,R[G]==S&&G--,W(G-V)}return M},$.prototype.$getDisplayTokens=function(R,A){var C=[],M;A=A||0;for(var I=0;I<R.length;I++){var D=R.charCodeAt(I);if(D==9){M=this.getScreenTabSize(C.length+A),C.push(x);for(var B=1;B<M;B++)C.push(T)}else D==32?C.push(E):D>39&&D<48||D>57&&D<64?C.push(v):D>=4352&&k(D)?C.push(w,S):C.push(w)}return C},$.prototype.$getStringScreenWidth=function(R,A,C){if(A==0)return[0,0];A==null&&(A=1/0),C=C||0;var M,I;for(I=0;I<R.length&&(M=R.charCodeAt(I),M==9?C+=this.getScreenTabSize(C):M>=4352&&k(M)?C+=2:C+=1,!(C>A));I++);return[C,I]},$.prototype.getRowLength=function(R){var A=1;return this.lineWidgets&&(A+=this.lineWidgets[R]&&this.lineWidgets[R].rowCount||0),!this.$useWrapMode||!this.$wrapData[R]?A:this.$wrapData[R].length+A},$.prototype.getRowLineCount=function(R){return!this.$useWrapMode||!this.$wrapData[R]?1:this.$wrapData[R].length+1},$.prototype.getRowWrapIndent=function(R){if(this.$useWrapMode){var A=this.screenToDocumentPosition(R,Number.MAX_VALUE),C=this.$wrapData[A.row];return C.length&&C[0]<A.column?C.indent:0}else return 0},$.prototype.getScreenLastRowColumn=function(R){var A=this.screenToDocumentPosition(R,Number.MAX_VALUE);return this.documentToScreenColumn(A.row,A.column)},$.prototype.getDocumentLastRowColumn=function(R,A){var C=this.documentToScreenRow(R,A);return this.getScreenLastRowColumn(C)},$.prototype.getDocumentLastRowColumnPosition=function(R,A){var C=this.documentToScreenRow(R,A);return this.screenToDocumentPosition(C,Number.MAX_VALUE/10)},$.prototype.getRowSplitData=function(R){if(this.$useWrapMode)return this.$wrapData[R]},$.prototype.getScreenTabSize=function(R){return this.$tabSize-(R%this.$tabSize|0)},$.prototype.screenToDocumentRow=function(R,A){return this.screenToDocumentPosition(R,A).row},$.prototype.screenToDocumentColumn=function(R,A){return this.screenToDocumentPosition(R,A).column},$.prototype.screenToDocumentPosition=function(R,A,C){if(R<0)return{row:0,column:0};var M,I=0,D=0,B,F=0,j=0,Z=this.$screenRowCache,Q=this.$getRowCacheIndex(Z,R),W=Z.length;if(W&&Q>=0)var F=Z[Q],I=this.$docRowCache[Q],V=R>Z[W-1];else var V=!W;for(var G=this.getLength()-1,U=this.getNextFoldLine(I),ee=U?U.start.row:1/0;F<=R&&(j=this.getRowLength(I),!(F+j>R||I>=G));)F+=j,I++,I>ee&&(I=U.end.row+1,U=this.getNextFoldLine(I,U),ee=U?U.start.row:1/0),V&&(this.$docRowCache.push(I),this.$screenRowCache.push(F));if(U&&U.start.row<=I)M=this.getFoldDisplayLine(U),I=U.start.row;else{if(F+j<=R||I>G)return{row:G,column:this.getLine(G).length};M=this.getLine(I),U=null}var Y=0,O=Math.floor(R-F);if(this.$useWrapMode){var L=this.$wrapData[I];L&&(B=L[O],O>0&&L.length&&(Y=L.indent,D=L[O-1]||L[L.length-1],M=M.substring(D)))}return C!==void 0&&this.$bidiHandler.isBidiRow(F+O,I,O)&&(A=this.$bidiHandler.offsetToCol(C)),D+=this.$getStringScreenWidth(M,A-Y)[1],this.$useWrapMode&&D>=B&&(D=B-1),U?U.idxToPosition(D):{row:I,column:D}},$.prototype.documentToScreenPosition=function(R,A){if(typeof A>"u")var C=this.$clipPositionToDocument(R.row,R.column);else C=this.$clipPositionToDocument(R,A);R=C.row,A=C.column;var M=0,I=null,D=null;D=this.getFoldAt(R,A,1),D&&(R=D.start.row,A=D.start.column);var B,F=0,j=this.$docRowCache,Z=this.$getRowCacheIndex(j,R),Q=j.length;if(Q&&Z>=0)var F=j[Z],M=this.$screenRowCache[Z],W=R>j[Q-1];else var W=!Q;for(var V=this.getNextFoldLine(F),G=V?V.start.row:1/0;F<R;){if(F>=G){if(B=V.end.row+1,B>R)break;V=this.getNextFoldLine(B,V),G=V?V.start.row:1/0}else B=F+1;M+=this.getRowLength(F),F=B,W&&(this.$docRowCache.push(F),this.$screenRowCache.push(M))}var U="";V&&F>=G?(U=this.getFoldDisplayLine(V,R,A),I=V.start.row):(U=this.getLine(R).substring(0,A),I=R);var ee=0;if(this.$useWrapMode){var Y=this.$wrapData[I];if(Y){for(var O=0;U.length>=Y[O];)M++,O++;U=U.substring(Y[O-1]||0,U.length),ee=O>0?Y.indent:0}}return this.lineWidgets&&this.lineWidgets[F]&&this.lineWidgets[F].rowsAbove&&(M+=this.lineWidgets[F].rowsAbove),{row:M,column:ee+this.$getStringScreenWidth(U)[0]}},$.prototype.documentToScreenColumn=function(R,A){return this.documentToScreenPosition(R,A).column},$.prototype.documentToScreenRow=function(R,A){return this.documentToScreenPosition(R,A).row},$.prototype.getScreenLength=function(){var R=0,A=null;if(this.$useWrapMode)for(var I=this.$wrapData.length,D=0,M=0,A=this.$foldData[M++],B=A?A.start.row:1/0;D<I;){var F=this.$wrapData[D];R+=F?F.length+1:1,D++,D>B&&(D=A.end.row+1,A=this.$foldData[M++],B=A?A.start.row:1/0)}else{R=this.getLength();for(var C=this.$foldData,M=0;M<C.length;M++)A=C[M],R-=A.end.row-A.start.row}return this.lineWidgets&&(R+=this.$getWidgetScreenLength()),R},$.prototype.$setFontMetrics=function(R){this.$enableVarChar&&(this.$getStringScreenWidth=function(A,C,M){if(C===0)return[0,0];C||(C=1/0),M=M||0;var I,D;for(D=0;D<A.length&&(I=A.charAt(D),I==="	"?M+=this.getScreenTabSize(M):M+=R.getCharacterWidth(I),!(M>C));D++);return[M,D]})},$.prototype.getPrecedingCharacter=function(){var R=this.selection.getCursor();if(R.column===0)return R.row===0?"":this.doc.getNewLineCharacter();var A=this.getLine(R.row);return A[R.column-1]},$.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},$}();y.$uid=0,y.prototype.$modes=s.$modes,y.prototype.getValue=y.prototype.toString,y.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},y.prototype.$overwrite=!1,y.prototype.$mode=null,y.prototype.$modeId=null,y.prototype.$scrollTop=0,y.prototype.$scrollLeft=0,y.prototype.$wrapLimit=80,y.prototype.$useWrapMode=!1,y.prototype.$wrapLimitRange={min:null,max:null},y.prototype.lineWidgets=null,y.prototype.isFullWidth=k,o.implement(y.prototype,p);var w=1,S=2,b=3,_=4,v=9,E=10,x=11,T=12;function k($){return $<4352?!1:$>=4352&&$<=4447||$>=4515&&$<=4519||$>=4602&&$<=4607||$>=9001&&$<=9002||$>=11904&&$<=11929||$>=11931&&$<=12019||$>=12032&&$<=12245||$>=12272&&$<=12283||$>=12288&&$<=12350||$>=12353&&$<=12438||$>=12441&&$<=12543||$>=12549&&$<=12589||$>=12593&&$<=12686||$>=12688&&$<=12730||$>=12736&&$<=12771||$>=12784&&$<=12830||$>=12832&&$<=12871||$>=12880&&$<=13054||$>=13056&&$<=19903||$>=19968&&$<=42124||$>=42128&&$<=42182||$>=43360&&$<=43388||$>=44032&&$<=55203||$>=55216&&$<=55238||$>=55243&&$<=55291||$>=63744&&$<=64255||$>=65040&&$<=65049||$>=65072&&$<=65106||$>=65108&&$<=65126||$>=65128&&$<=65131||$>=65281&&$<=65376||$>=65504&&$<=65510}n("./edit_session/folding").Folding.call(y.prototype),n("./edit_session/bracket_match").BracketMatch.call(y.prototype),s.defineOptions(y.prototype,"session",{wrap:{set:function($){if(!$||$=="off"?$=!1:$=="free"?$=!0:$=="printMargin"?$=-1:typeof $=="string"&&($=parseInt($,10)||!1),this.$wrap!=$)if(this.$wrap=$,!$)this.setUseWrapMode(!1);else{var R=typeof $=="number"?$:null;this.setWrapLimitRange(R,R),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function($){$=$=="auto"?this.$mode.type!="text":$!="text",$!=this.$wrapAsCode&&(this.$wrapAsCode=$,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function($){this.$useWorker=$,this.$stopWorker(),$&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function($){$=parseInt($),$>0&&this.$tabSize!==$&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=$,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function($){this.setFoldStyle($)},handlesSet:!0},overwrite:{set:function($){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function($){this.doc.setNewLineMode($)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function($){this.setMode($)},get:function(){return this.$modeId},handlesSet:!0}}),i.EditSession=y}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(n,i,r){var o=n("./lib/lang"),l=n("./lib/oop"),u=n("./range").Range,s=function(){function a(){this.$options={}}return a.prototype.set=function(c){return l.mixin(this.$options,c),this},a.prototype.getOptions=function(){return o.copyObject(this.$options)},a.prototype.setOptions=function(c){this.$options=c},a.prototype.find=function(c){var h=this.$options,f=this.$matchIterator(c,h);if(!f)return!1;var d=null;return f.forEach(function(m,g,y,w){return d=new u(m,g,y,w),g==w&&h.start&&h.start.start&&h.skipCurrent!=!1&&d.isEqual(h.start)?(d=null,!1):!0}),d},a.prototype.findAll=function(c){var h=this.$options;if(!h.needle)return[];this.$assembleRegExp(h);var f=h.range,d=f?c.getLines(f.start.row,f.end.row):c.doc.getAllLines(),m=[],g=h.re;if(h.$isMultiLine){var y=g.length,w=d.length-y,S;e:for(var b=g.offset||0;b<=w;b++){for(var _=0;_<y;_++)if(d[b+_].search(g[_])==-1)continue e;var v=d[b],E=d[b+y-1],x=v.length-v.match(g[0])[0].length,T=E.match(g[y-1])[0].length;S&&S.end.row===b&&S.end.column>x||(m.push(S=new u(b,x,b+y-1,T)),y>2&&(b=b+y-2))}}else for(var k=0;k<d.length;k++)for(var $=o.getMatchOffsets(d[k],g),_=0;_<$.length;_++){var R=$[_];m.push(new u(k,R.offset,k,R.offset+R.length))}if(f){for(var A=f.start.column,C=f.end.column,k=0,_=m.length-1;k<_&&m[k].start.column<A&&m[k].start.row==0;)k++;for(var M=f.end.row-f.start.row;k<_&&m[_].end.column>C&&m[_].end.row==M;)_--;for(m=m.slice(k,_+1),k=0,_=m.length;k<_;k++)m[k].start.row+=f.start.row,m[k].end.row+=f.start.row}return m},a.prototype.replace=function(c,h){var f=this.$options,d=this.$assembleRegExp(f);if(f.$isMultiLine)return h;if(d){var m=d.exec(c);if(!m||m[0].length!=c.length)return null;if(f.regExp||(h=h.replace(/\$/g,"$$$$")),h=c.replace(d,h),f.preserveCase){h=h.split("");for(var g=Math.min(c.length,c.length);g--;){var y=c[g];y&&y.toLowerCase()!=y?h[g]=h[g].toUpperCase():h[g]=h[g].toLowerCase()}h=h.join("")}return h}},a.prototype.$assembleRegExp=function(c,h){if(c.needle instanceof RegExp)return c.re=c.needle;var f=c.needle;if(!c.needle)return c.re=!1;c.regExp||(f=o.escapeRegExp(f));var d=c.caseSensitive?"gm":"gmi";try{new RegExp(f,"u"),c.$supportsUnicodeFlag=!0,d+="u"}catch{c.$supportsUnicodeFlag=!1}if(c.wholeWord&&(f=p(f,c)),c.$isMultiLine=!h&&/[\n\r]/.test(f),c.$isMultiLine)return c.re=this.$assembleMultilineRegExp(f,d);try{var m=new RegExp(f,d)}catch{m=!1}return c.re=m},a.prototype.$assembleMultilineRegExp=function(c,h){for(var f=c.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),d=[],m=0;m<f.length;m++)try{d.push(new RegExp(f[m],h))}catch{return!1}return d},a.prototype.$matchIterator=function(c,h){var f=this.$assembleRegExp(h);if(!f)return!1;var d=h.backwards==!0,m=h.skipCurrent!=!1,g=f.unicode,y=h.range,w=h.start;w||(w=y?y[d?"end":"start"]:c.selection.getRange()),w.start&&(w=w[m!=d?"end":"start"]);var S=y?y.start.row:0,b=y?y.end.row:c.getLength()-1;if(d)var _=function(x){var T=w.row;if(!E(T,w.column,x)){for(T--;T>=S;T--)if(E(T,Number.MAX_VALUE,x))return;if(h.wrap!=!1){for(T=b,S=w.row;T>=S;T--)if(E(T,Number.MAX_VALUE,x))return}}};else var _=function(T){var k=w.row;if(!E(k,w.column,T)){for(k=k+1;k<=b;k++)if(E(k,0,T))return;if(h.wrap!=!1){for(k=S,b=w.row;k<=b;k++)if(E(k,0,T))return}}};if(h.$isMultiLine)var v=f.length,E=function(x,T,k){var $=d?x-v+1:x;if(!($<0||$+v>c.getLength())){var R=c.getLine($),A=R.search(f[0]);if(!(!d&&A<T||A===-1)){for(var C=1;C<v;C++)if(R=c.getLine($+C),R.search(f[C])==-1)return;var M=R.match(f[v-1])[0].length;if(!(d&&M>T)&&k($,A,$+v-1,M))return!0}}};else if(d)var E=function(T,k,$){var R=c.getLine(T),A=[],C,M=0;for(f.lastIndex=0;C=f.exec(R);){var I=C[0].length;if(M=C.index,!I){if(M>=R.length)break;f.lastIndex=M+=o.skipEmptyMatch(R,M,g)}if(C.index+I>k)break;A.push(C.index,I)}for(var D=A.length-1;D>=0;D-=2){var B=A[D-1],I=A[D];if($(T,B,T,B+I))return!0}};else var E=function(T,k,$){var R=c.getLine(T),A,C;for(f.lastIndex=k;C=f.exec(R);){var M=C[0].length;if(A=C.index,$(T,A,T,A+M))return!0;if(!M&&(f.lastIndex=A+=o.skipEmptyMatch(R,A,g),A>=R.length))return!1}};return{forEach:_}},a}();function p(a,c){var h=o.supportsLookbehind();function f(y,w){w===void 0&&(w=!0);var S=h&&c.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return S.test(y)||c.regExp?h&&c.$supportsUnicodeFlag?w?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var d=Array.from(a),m=d[0],g=d[d.length-1];return f(m)+a+f(g,!1)}i.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(n,i,r){var o=this&&this.__extends||function(){var h=function(f,d){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(m[y]=g[y])},h(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");h(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}}(),l=n("../lib/keys"),u=n("../lib/useragent"),s=l.KEY_MODS,p=function(){function h(f,d){this.$init(f,d,!1)}return h.prototype.$init=function(f,d,m){this.platform=d||(u.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=m},h.prototype.addCommand=function(f){this.commands[f.name]&&this.removeCommand(f),this.commands[f.name]=f,f.bindKey&&this._buildKeyHash(f)},h.prototype.removeCommand=function(f,d){var m=f&&(typeof f=="string"?f:f.name);f=this.commands[m],d||delete this.commands[m];var g=this.commandKeyBinding;for(var y in g){var w=g[y];if(w==f)delete g[y];else if(Array.isArray(w)){var S=w.indexOf(f);S!=-1&&(w.splice(S,1),w.length==1&&(g[y]=w[0]))}}},h.prototype.bindKey=function(f,d,m){if(typeof f=="object"&&f&&(m==null&&(m=f.position),f=f[this.platform]),!!f){if(typeof d=="function")return this.addCommand({exec:d,bindKey:f,name:d.name||f});f.split("|").forEach(function(g){var y="";if(g.indexOf(" ")!=-1){var w=g.split(/\s+/);g=w.pop(),w.forEach(function(_){var v=this.parseKeys(_),E=s[v.hashId]+v.key;y+=(y?" ":"")+E,this._addCommandToBinding(y,"chainKeys")},this),y+=" "}var S=this.parseKeys(g),b=s[S.hashId]+S.key;this._addCommandToBinding(y+b,d,m)},this)}},h.prototype._addCommandToBinding=function(f,d,m){var g=this.commandKeyBinding,y;if(!d)delete g[f];else if(!g[f]||this.$singleCommand)g[f]=d;else{Array.isArray(g[f])?(y=g[f].indexOf(d))!=-1&&g[f].splice(y,1):g[f]=[g[f]],typeof m!="number"&&(m=a(d));var w=g[f];for(y=0;y<w.length;y++){var S=w[y],b=a(S);if(b>m)break}w.splice(y,0,d)}},h.prototype.addCommands=function(f){f&&Object.keys(f).forEach(function(d){var m=f[d];if(m){if(typeof m=="string")return this.bindKey(m,d);typeof m=="function"&&(m={exec:m}),typeof m=="object"&&(m.name||(m.name=d),this.addCommand(m))}},this)},h.prototype.removeCommands=function(f){Object.keys(f).forEach(function(d){this.removeCommand(f[d])},this)},h.prototype.bindKeys=function(f){Object.keys(f).forEach(function(d){this.bindKey(d,f[d])},this)},h.prototype._buildKeyHash=function(f){this.bindKey(f.bindKey,f)},h.prototype.parseKeys=function(f){var d=f.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(b){return b}),m=d.pop(),g=l[m];if(l.FUNCTION_KEYS[g])m=l.FUNCTION_KEYS[g].toLowerCase();else if(d.length){if(d.length==1&&d[0]=="shift")return{key:m.toUpperCase(),hashId:-1}}else return{key:m,hashId:-1};for(var y=0,w=d.length;w--;){var S=l.KEY_MODS[d[w]];if(S==null)return typeof console<"u"&&console.error("invalid modifier "+d[w]+" in "+f),!1;y|=S}return{key:m,hashId:y}},h.prototype.findKeyCommand=function(f,d){var m=s[f]+d;return this.commandKeyBinding[m]},h.prototype.handleKeyboard=function(f,d,m,g){if(!(g<0)){var y=s[d]+m,w=this.commandKeyBinding[y];return f.$keyChain&&(f.$keyChain+=" "+y,w=this.commandKeyBinding[f.$keyChain]||w),w&&(w=="chainKeys"||w[w.length-1]=="chainKeys")?(f.$keyChain=f.$keyChain||y,{command:"null"}):(f.$keyChain&&((!d||d==4)&&m.length==1?f.$keyChain=f.$keyChain.slice(0,-y.length-1):(d==-1||g>0)&&(f.$keyChain="")),{command:w})}},h.prototype.getStatusText=function(f,d){return d.$keyChain||""},h}();function a(h){return typeof h=="object"&&h.bindKey&&h.bindKey.position||(h.isDefault?-100:0)}var c=function(h){o(f,h);function f(d,m){var g=h.call(this,d,m)||this;return g.$singleCommand=!0,g}return f}(p);c.call=function(h,f,d){p.prototype.$init.call(h,f,d,!0)},p.call=function(h,f,d){p.prototype.$init.call(h,f,d,!1)},i.HashHandler=c,i.MultiHashHandler=p}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(n,i,r){var o=this&&this.__extends||function(){var a=function(c,h){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)Object.prototype.hasOwnProperty.call(d,m)&&(f[m]=d[m])},a(c,h)};return function(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");a(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}(),l=n("../lib/oop"),u=n("../keyboard/hash_handler").MultiHashHandler,s=n("../lib/event_emitter").EventEmitter,p=function(a){o(c,a);function c(h,f){var d=a.call(this,f,h)||this;return d.byName=d.commands,d.setDefaultHandler("exec",function(m){return m.args?m.command.exec(m.editor,m.args,m.event,!1):m.command.exec(m.editor,{},m.event,!0)}),d}return c.prototype.exec=function(h,f,d){if(Array.isArray(h)){for(var m=h.length;m--;)if(this.exec(h[m],f,d))return!0;return!1}if(typeof h=="string"&&(h=this.commands[h]),!this.canExecute(h,f))return!1;var g={editor:f,command:h,args:d};return g.returnValue=this._emit("exec",g),this._signal("afterExec",g),g.returnValue!==!1},c.prototype.canExecute=function(h,f){return typeof h=="string"&&(h=this.commands[h]),!(!h||f&&f.$readOnly&&!h.readOnly||this.$checkCommandState!=!1&&h.isAvailable&&!h.isAvailable(f))},c.prototype.toggleRecording=function(h){if(!this.$inReplay)return h&&h._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(f){this.macro.push([f.command,f.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},c.prototype.replay=function(h){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(h);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,h):this.exec(f[0],h,f[1])},this)}finally{this.$inReplay=!1}}},c.prototype.trimMacro=function(h){return h.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})},c}(u);l.implement(p.prototype,s),i.CommandManager=p}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(n,i,r){var o=n("../lib/lang"),l=n("../config"),u=n("../range").Range;function s(a,c){return{win:a,mac:c}}i.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:s("Ctrl-,","Command-,"),exec:function(a){l.loadModule("ace/ext/settings_menu",function(c){c.init(a),a.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:s("Alt-E","F4"),exec:function(a){l.loadModule("ace/ext/error_marker",function(c){c.showErrorMarker(a,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(a){l.loadModule("ace/ext/error_marker",function(c){c.showErrorMarker(a,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(a){a.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(a,c){typeof c=="number"&&!isNaN(c)&&a.gotoLine(c),a.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(a){a.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(a){a.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:s("F2","F2"),exec:function(a){a.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:s("Alt-F2","Alt-F2"),exec:function(a){a.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(a){a.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(a){a.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(a){a.session.foldAll(),a.session.unfold(a.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(a){a.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(a){a.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(a){a.selection.isEmpty()?a.selection.selectWord():a.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(a){l.loadModule("ace/ext/searchbox",function(c){c.Search(a)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(a){a.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(a,c){a.navigateUp(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(a,c){a.navigateDown(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(a){a.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(a,c){a.navigateLeft(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(a){a.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(a,c){a.navigateRight(c.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(a){a.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(a){a.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(a){a.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(a){a.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(a){a.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(a){a.renderer.scrollBy(0,-2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(a){a.renderer.scrollBy(0,2*a.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording(a)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(a){a.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(a){a.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(a){},readOnly:!0},{name:"cut",description:"Cut",exec:function(a){var c=a.$copyWithEmptySelection&&a.selection.isEmpty(),h=c?a.selection.getLineRange():a.selection.getRange();a._emit("cut",h),h.isEmpty()||a.session.remove(h),a.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(a,c){a.$handlePaste(c)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(a){a.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(a){a.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(a){a.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(a){a.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(a){a.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(a){a.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(a){a.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(a){l.loadModule("ace/ext/searchbox",function(c){c.Search(a,!0)})}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(a){a.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(a){a.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(a){a.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(a){if(a.selection.isEmpty())a.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(a){a.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(a){var c=a.selection.getRange();c.start.column=0,a.session.remove(c)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(a){var c=a.selection.getRange();c.end.column=Number.MAX_VALUE,a.session.remove(c)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(a){a.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(a){a.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(a,c){a.insert(c)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(a,c){a.insert(o.stringRepeat(c.text||"",c.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(a){a.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(a){a.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(a){var c=a.selection.getRange();c.start.column=c.end.column=0,c.end.row++,a.selection.setRange(c,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:s("Ctrl+F3","F3"),exec:function(a){a.openLink()}},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(a){for(var c=a.selection.isBackwards(),h=c?a.selection.getSelectionLead():a.selection.getSelectionAnchor(),f=c?a.selection.getSelectionAnchor():a.selection.getSelectionLead(),d=a.session.doc.getLine(h.row).length,m=a.session.doc.getTextRange(a.selection.getRange()),g=m.replace(/\n\s*/," ").length,y=a.session.doc.getLine(h.row),w=h.row+1;w<=f.row+1;w++){var S=o.stringTrimLeft(o.stringTrimRight(a.session.doc.getLine(w)));S.length!==0&&(S=" "+S),y+=S}f.row+1<a.session.doc.getLength()-1&&(y+=a.session.doc.getNewLineCharacter()),a.clearSelection(),a.session.doc.replace(new u(h.row,0,f.row+2,0),y),g>0?(a.selection.moveCursorTo(h.row,h.column),a.selection.selectTo(h.row,h.column+g)):(d=a.session.doc.getLine(h.row).length>d?d+1:d,a.selection.moveCursorTo(h.row,d))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(a){var c=a.session.doc.getLength()-1,h=a.session.doc.getLine(c).length,f=a.selection.rangeList.ranges,d=[];f.length<1&&(f=[a.selection.getRange()]);for(var m=0;m<f.length;m++)m==f.length-1&&(f[m].end.row===c&&f[m].end.column===h||d.push(new u(f[m].end.row,f[m].end.column,c,h))),m===0?f[m].start.row===0&&f[m].start.column===0||d.push(new u(0,0,f[m].start.row,f[m].start.column)):d.push(new u(f[m-1].end.row,f[m-1].end.column,f[m].start.row,f[m].start.column));a.exitMultiSelectMode(),a.clearSelection();for(var m=0;m<d.length;m++)a.selection.addRange(d[m],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(a){a.selection.clearSelection(),a.navigateLineEnd(),a.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(a){a.selection.clearSelection();var c=a.getCursorPosition();a.selection.moveTo(c.row-1,Number.MAX_VALUE),a.insert(`
`),c.row===0&&a.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(a){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),a.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:s("F1","F1"),exec:function(a){a.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(a){a.prompt({$type:"modes"})},readOnly:!0}];for(var p=1;p<9;p++)i.commands.push({name:"foldToLevel"+p,description:"Fold To Level "+p,level:p,exec:function(a){a.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("./lib/dom"),l=function(){function u(s){this.session=s,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return u.prototype.getRowLength=function(s){var p;return this.lineWidgets?p=this.lineWidgets[s]&&this.lineWidgets[s].rowCount||0:p=0,!this.$useWrapMode||!this.$wrapData[s]?1+p:this.$wrapData[s].length+1+p},u.prototype.$getWidgetScreenLength=function(){var s=0;return this.lineWidgets.forEach(function(p){p&&p.rowCount&&!p.hidden&&(s+=p.rowCount)}),s},u.prototype.$onChangeEditor=function(s){this.attach(s.editor)},u.prototype.attach=function(s){s&&s.widgetManager&&s.widgetManager!=this&&s.widgetManager.detach(),this.editor!=s&&(this.detach(),this.editor=s,s&&(s.widgetManager=this,s.renderer.on("beforeRender",this.measureWidgets),s.renderer.on("afterRender",this.renderWidgets)))},u.prototype.detach=function(s){var p=this.editor;if(p){this.editor=null,p.widgetManager=null,p.renderer.off("beforeRender",this.measureWidgets),p.renderer.off("afterRender",this.renderWidgets);var a=this.session.lineWidgets;a&&a.forEach(function(c){c&&c.el&&c.el.parentNode&&(c._inDocument=!1,c.el.parentNode.removeChild(c.el))})}},u.prototype.updateOnFold=function(s,p){var a=p.lineWidgets;if(!(!a||!s.action)){for(var c=s.data,h=c.start.row,f=c.end.row,d=s.action=="add",m=h+1;m<f;m++)a[m]&&(a[m].hidden=d);a[f]&&(d?a[h]?a[f].hidden=d:a[h]=a[f]:(a[h]==a[f]&&(a[h]=void 0),a[f].hidden=d))}},u.prototype.updateOnChange=function(s){var p=this.session.lineWidgets;if(p){var a=s.start.row,c=s.end.row-a;if(c!==0)if(s.action=="remove"){var h=p.splice(a+1,c);!p[a]&&h[h.length-1]&&(p[a]=h.pop()),h.forEach(function(d){d&&this.removeLineWidget(d)},this),this.$updateRows()}else{var f=new Array(c);p[a]&&p[a].column!=null&&s.start.column>p[a].column&&a++,f.unshift(a,0),p.splice.apply(p,f),this.$updateRows()}}},u.prototype.$updateRows=function(){var s=this.session.lineWidgets;if(s){var p=!0;s.forEach(function(a,c){if(a)for(p=!1,a.row=c;a.$oldWidget;)a.$oldWidget.row=c,a=a.$oldWidget}),p&&(this.session.lineWidgets=null)}},u.prototype.$registerLineWidget=function(s){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var p=this.session.lineWidgets[s.row];return p&&(s.$oldWidget=p,p.el&&p.el.parentNode&&(p.el.parentNode.removeChild(p.el),p._inDocument=!1)),this.session.lineWidgets[s.row]=s,s},u.prototype.addLineWidget=function(s){if(this.$registerLineWidget(s),s.session=this.session,!this.editor)return s;var p=this.editor.renderer;s.html&&!s.el&&(s.el=o.createElement("div"),s.el.innerHTML=s.html),s.text&&!s.el&&(s.el=o.createElement("div"),s.el.textContent=s.text),s.el&&(o.addCssClass(s.el,"ace_lineWidgetContainer"),s.className&&o.addCssClass(s.el,s.className),s.el.style.position="absolute",s.el.style.zIndex="5",p.container.appendChild(s.el),s._inDocument=!0,s.coverGutter||(s.el.style.zIndex="3"),s.pixelHeight==null&&(s.pixelHeight=s.el.offsetHeight)),s.rowCount==null&&(s.rowCount=s.pixelHeight/p.layerConfig.lineHeight);var a=this.session.getFoldAt(s.row,0);if(s.$fold=a,a){var c=this.session.lineWidgets;s.row==a.end.row&&!c[a.start.row]?c[a.start.row]=s:s.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:s.row}}}),this.$updateRows(),this.renderWidgets(null,p),this.onWidgetChanged(s),s},u.prototype.removeLineWidget=function(s){if(s._inDocument=!1,s.session=null,s.el&&s.el.parentNode&&s.el.parentNode.removeChild(s.el),s.editor&&s.editor.destroy)try{s.editor.destroy()}catch{}if(this.session.lineWidgets){var p=this.session.lineWidgets[s.row];if(p==s)this.session.lineWidgets[s.row]=s.$oldWidget,s.$oldWidget&&this.onWidgetChanged(s.$oldWidget);else for(;p;){if(p.$oldWidget==s){p.$oldWidget=s.$oldWidget;break}p=p.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:s.row}}}),this.$updateRows()},u.prototype.getWidgetsAtRow=function(s){for(var p=this.session.lineWidgets,a=p&&p[s],c=[];a;)c.push(a),a=a.$oldWidget;return c},u.prototype.onWidgetChanged=function(s){this.session._changedWidgets.push(s),this.editor&&this.editor.renderer.updateFull()},u.prototype.measureWidgets=function(s,p){var a=this.session._changedWidgets,c=p.layerConfig;if(!(!a||!a.length)){for(var h=1/0,f=0;f<a.length;f++){var d=a[f];if(!(!d||!d.el)&&d.session==this.session){if(!d._inDocument){if(this.session.lineWidgets[d.row]!=d)continue;d._inDocument=!0,p.container.appendChild(d.el)}d.h=d.el.offsetHeight,d.fixedWidth||(d.w=d.el.offsetWidth,d.screenWidth=Math.ceil(d.w/c.characterWidth));var m=d.h/c.lineHeight;d.coverLine&&(m-=this.session.getRowLineCount(d.row),m<0&&(m=0)),d.rowCount!=m&&(d.rowCount=m,d.row<h&&(h=d.row))}}h!=1/0&&(this.session._emit("changeFold",{data:{start:{row:h}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},u.prototype.renderWidgets=function(s,p){var a=p.layerConfig,c=this.session.lineWidgets;if(c){for(var h=Math.min(this.firstRow,a.firstRow),f=Math.max(this.lastRow,a.lastRow,c.length);h>0&&!c[h];)h--;this.firstRow=a.firstRow,this.lastRow=a.lastRow,p.$cursorLayer.config=a;for(var d=h;d<=f;d++){var m=c[d];if(!(!m||!m.el)){if(m.hidden){m.el.style.top=-100-(m.pixelHeight||0)+"px";continue}m._inDocument||(m._inDocument=!0,p.container.appendChild(m.el));var g=p.$cursorLayer.getPixelPosition({row:d,column:0},!0).top;m.coverLine||(g+=a.lineHeight*this.session.getRowLineCount(m.row)),m.el.style.top=g-a.offset+"px";var y=m.coverGutter?0:p.gutterWidth;m.fixedWidth||(y-=p.scrollLeft),m.el.style.left=y+"px",m.fullWidth&&m.screenWidth&&(m.el.style.minWidth=a.width+2*a.padding+"px"),m.fixedWidth?m.el.style.right=p.scrollBar.getWidth()+"px":m.el.style.right=""}}}},u}();i.LineWidgets=l}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(n,i,r){var o=n("../lib/keys"),l=n("../mouse/default_gutter_handler").GutterTooltip,u=function(){function p(a){this.editor=a,this.gutterLayer=a.renderer.$gutterLayer,this.element=a.renderer.$gutter,this.lines=a.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new l(this.editor)}return p.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},p.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},p.prototype.$onGutterKeyDown=function(a){if(this.annotationTooltip.isOpen){a.preventDefault(),a.keyCode===o.escape&&this.annotationTooltip.hideTooltip();return}if(a.target===this.element){if(a.keyCode!=o.enter)return;a.preventDefault();var c=this.editor.getCursorPosition().row;this.editor.isRowVisible(c)||this.editor.scrollToLine(c,!0,!0),setTimeout((function(){var h=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),f=this.$findNearestFoldWidget(h),d=this.$findNearestAnnotation(h);if(!(f===null&&d===null)){if(f===null&&d!==null){this.activeRowIndex=d,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(f!==null&&d===null){this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(d-h)<Math.abs(f-h)){this.activeRowIndex=d,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=f,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(a),setTimeout((function(){this.editor._signal("gutterkeydown",new s(a,this))}).bind(this),10)},p.prototype.$handleGutterKeyboardInteraction=function(a){if(a.keyCode===o.tab){a.preventDefault();return}if(a.keyCode===o.escape){a.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(a.keyCode===o.up){switch(a.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(a.keyCode===o.down){switch(a.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(a.keyCode===o.left){a.preventDefault(),this.$switchLane("annotation");return}if(a.keyCode===o.right){a.preventDefault(),this.$switchLane("fold");return}if(a.keyCode===o.enter||a.keyCode===o.space){switch(a.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var c=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),a),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==c&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(c),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var h=this.lines.cells[this.activeRowIndex].element.childNodes[2],f=h.getBoundingClientRect(),d=this.annotationTooltip.getElement().style;d.left=f.right+"px",d.top=f.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},p.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},p.prototype.$isFoldWidgetVisible=function(a){var c=this.editor.isRowFullyVisible(this.$rowIndexToRow(a)),h=this.$getFoldWidget(a).style.display!=="none";return c&&h},p.prototype.$isAnnotationVisible=function(a){var c=this.editor.isRowFullyVisible(this.$rowIndexToRow(a)),h=this.$getAnnotation(a).style.display!=="none";return c&&h},p.prototype.$getFoldWidget=function(a){var c=this.lines.get(a),h=c.element;return h.childNodes[1]},p.prototype.$getAnnotation=function(a){var c=this.lines.get(a),h=c.element;return h.childNodes[2]},p.prototype.$findNearestFoldWidget=function(a){if(this.$isFoldWidgetVisible(a))return a;for(var c=0;a-c>0||a+c<this.lines.getLength()-1;){if(c++,a-c>=0&&this.$isFoldWidgetVisible(a-c))return a-c;if(a+c<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(a+c))return a+c}return null},p.prototype.$findNearestAnnotation=function(a){if(this.$isAnnotationVisible(a))return a;for(var c=0;a-c>0||a+c<this.lines.getLength()-1;){if(c++,a-c>=0&&this.$isAnnotationVisible(a-c))return a-c;if(a+c<=this.lines.getLength()-1&&this.$isAnnotationVisible(a+c))return a+c}return null},p.prototype.$focusFoldWidget=function(a){if(a!=null){var c=this.$getFoldWidget(a);c.classList.add(this.editor.renderer.keyboardFocusClassName),c.focus()}},p.prototype.$focusAnnotation=function(a){if(a!=null){var c=this.$getAnnotation(a);c.classList.add(this.editor.renderer.keyboardFocusClassName),c.focus()}},p.prototype.$blurFoldWidget=function(a){var c=this.$getFoldWidget(a);c.classList.remove(this.editor.renderer.keyboardFocusClassName),c.blur()},p.prototype.$blurAnnotation=function(a){var c=this.$getAnnotation(a);c.classList.remove(this.editor.renderer.keyboardFocusClassName),c.blur()},p.prototype.$moveFoldWidgetUp=function(){for(var a=this.activeRowIndex;a>0;)if(a--,this.$isFoldWidgetVisible(a)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=a,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveFoldWidgetDown=function(){for(var a=this.activeRowIndex;a<this.lines.getLength()-1;)if(a++,this.$isFoldWidgetVisible(a)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=a,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveAnnotationUp=function(){for(var a=this.activeRowIndex;a>0;)if(a--,this.$isAnnotationVisible(a)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=a,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$moveAnnotationDown=function(){for(var a=this.activeRowIndex;a<this.lines.getLength()-1;)if(a++,this.$isAnnotationVisible(a)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=a,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$switchLane=function(a){switch(a){case"annotation":if(this.activeLane==="annotation")break;var c=this.$findNearestAnnotation(this.activeRowIndex);if(c==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=c,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var h=this.$findNearestFoldWidget(this.activeRowIndex);if(h==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=h,this.$focusFoldWidget(this.activeRowIndex);break}},p.prototype.$rowIndexToRow=function(a){var c=this.lines.get(a);return c?c.row:null},p.prototype.$rowToRowIndex=function(a){for(var c=0;c<this.lines.getLength();c++){var h=this.lines.get(c);if(h.row==a)return c}return null},p}();i.GutterKeyboardHandler=u;var s=function(){function p(a,c){this.gutterKeyboardHandler=c,this.domEvent=a}return p.prototype.getKey=function(){return o.keyCodeToString(this.domEvent.keyCode)},p.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},p.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},p.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},p}();i.GutterKeyboardEvent=s}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(n,i,r){var o=this&&this.__values||function(A){var C=typeof Symbol=="function"&&Symbol.iterator,M=C&&A[C],I=0;if(M)return M.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&I>=A.length&&(A=void 0),{value:A&&A[I++],done:!A}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},l=n("./lib/oop"),u=n("./lib/dom"),s=n("./lib/lang"),p=n("./lib/useragent"),a=n("./keyboard/textinput").TextInput,c=n("./mouse/mouse_handler").MouseHandler,h=n("./mouse/fold_handler").FoldHandler,f=n("./keyboard/keybinding").KeyBinding,d=n("./edit_session").EditSession,m=n("./search").Search,g=n("./range").Range,y=n("./lib/event_emitter").EventEmitter,w=n("./commands/command_manager").CommandManager,S=n("./commands/default_commands").commands,b=n("./config"),_=n("./token_iterator").TokenIterator,v=n("./line_widgets").LineWidgets,E=n("./keyboard/gutter_handler").GutterKeyboardHandler,x=n("./config").nls,T=n("./clipboard"),k=n("./lib/keys"),$=function(){function A(C,M,I){this.session,this.$toDestroy=[];var D=C.getContainerElement();this.container=D,this.renderer=C,this.id="editor"+ ++A.$uid,this.commands=new w(p.isMac?"mac":"win",S),typeof document=="object"&&(this.textInput=new a(C.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new h(this)),this.keyBinding=new f(this),this.$search=new m().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(B,F){F._$emitInputEvent.schedule(31)}),this.setSession(M||I&&I.session||new d("")),b.resetOptions(this),I&&this.setOptions(I),b._signal("editor",this)}return A.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},A.prototype.startOperation=function(C){if(this.curOp){if(!C||this.curOp.command)return;this.prevOp=this.curOp}C||(this.previousCommand=null,C={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:C.command||{},args:C.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},A.prototype.endOperation=function(C){if(this.curOp&&this.session){if(C&&C.returnValue===!1||!this.session)return this.curOp=null;if(C==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var M=this.curOp.command,I=M&&M.scrollIntoView;if(I){switch(I){case"center-animate":I="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var D=this.selection.getRange(),B=this.renderer.layerConfig;(D.start.row>=B.lastRow||D.end.row<=B.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}I=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var F=this.selection.toJSON();this.curOp.selectionAfter=F,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(F),this.prevOp=this.curOp,this.curOp=null}},A.prototype.$historyTracker=function(C){if(this.$mergeUndoDeltas){var M=this.prevOp,I=this.$mergeableCommands,D=M.command&&C.command.name==M.command.name;if(C.command.name=="insertstring"){var B=C.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),D=D&&this.mergeNextCommand&&(!/\s/.test(B)||/\s/.test(M.args)),this.mergeNextCommand=!0}else D=D&&I.indexOf(C.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(D=!1),D?this.session.mergeUndoDeltas=!0:I.indexOf(C.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},A.prototype.setKeyboardHandler=function(C,M){if(C&&typeof C=="string"&&C!="ace"){this.$keybindingId=C;var I=this;b.loadModule(["keybinding",C],function(D){I.$keybindingId==C&&I.keyBinding.setKeyboardHandler(D&&D.handler),M&&M()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(C),M&&M()},A.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},A.prototype.setSession=function(C){if(this.session!=C){this.curOp&&this.endOperation(),this.curOp={};var M=this.session;if(M){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var I=this.session.getSelection();I.off("changeCursor",this.$onCursorChange),I.off("changeSelection",this.$onSelectionChange)}this.session=C,C?(this.$onDocumentChange=this.onDocumentChange.bind(this),C.on("change",this.$onDocumentChange),this.renderer.setSession(C),this.$onChangeMode=this.onChangeMode.bind(this),C.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),C.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),C.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),C.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),C.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),C.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=C.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(C)),this._signal("changeSession",{session:C,oldSession:M}),this.curOp=null,M&&M._signal("changeEditor",{oldEditor:this}),C&&C._signal("changeEditor",{editor:this}),C&&!C.destroyed&&C.bgTokenizer.scheduleStart()}},A.prototype.getSession=function(){return this.session},A.prototype.setValue=function(C,M){return this.session.doc.setValue(C),M?M==1?this.navigateFileEnd():M==-1&&this.navigateFileStart():this.selectAll(),C},A.prototype.getValue=function(){return this.session.getValue()},A.prototype.getSelection=function(){return this.selection},A.prototype.resize=function(C){this.renderer.onResize(C)},A.prototype.setTheme=function(C,M){this.renderer.setTheme(C,M)},A.prototype.getTheme=function(){return this.renderer.getTheme()},A.prototype.setStyle=function(C){this.renderer.setStyle(C)},A.prototype.unsetStyle=function(C){this.renderer.unsetStyle(C)},A.prototype.getFontSize=function(){return this.getOption("fontSize")||u.computedStyle(this.container).fontSize},A.prototype.setFontSize=function(C){this.setOption("fontSize",C)},A.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var C=this;this.$highlightPending=!0,setTimeout(function(){C.$highlightPending=!1;var M=C.session;if(!(!M||M.destroyed)){M.$bracketHighlight&&(M.$bracketHighlight.markerIds.forEach(function(V){M.removeMarker(V)}),M.$bracketHighlight=null);var I=C.getCursorPosition(),D=C.getKeyboardHandler(),B=D&&D.$getDirectionForHighlight&&D.$getDirectionForHighlight(C),F=M.getMatchingBracketRanges(I,B);if(!F){var j=new _(M,I.row,I.column),Z=j.getCurrentToken();if(Z&&/\b(?:tag-open|tag-name)/.test(Z.type)){var Q=M.getMatchingTags(I);Q&&(F=[Q.openTagName.isEmpty()?Q.openTag:Q.openTagName,Q.closeTagName.isEmpty()?Q.closeTag:Q.closeTagName])}}if(!F&&M.$mode.getMatching&&(F=M.$mode.getMatching(C.session)),!F){C.getHighlightIndentGuides()&&C.renderer.$textLayer.$highlightIndentGuide();return}var W="ace_bracket";Array.isArray(F)?F.length==1&&(W="ace_error_bracket"):F=[F],F.length==2&&(g.comparePoints(F[0].end,F[1].start)==0?F=[g.fromPoints(F[0].start,F[1].end)]:g.comparePoints(F[0].start,F[1].end)==0&&(F=[g.fromPoints(F[1].start,F[0].end)])),M.$bracketHighlight={ranges:F,markerIds:F.map(function(V){return M.addMarker(V,W,"text")})},C.getHighlightIndentGuides()&&C.renderer.$textLayer.$highlightIndentGuide()}},50)}},A.prototype.focus=function(){this.textInput.focus()},A.prototype.isFocused=function(){return this.textInput.isFocused()},A.prototype.blur=function(){this.textInput.blur()},A.prototype.onFocus=function(C){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",C))},A.prototype.onBlur=function(C){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",C))},A.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},A.prototype.onDocumentChange=function(C){var M=this.session.$useWrapMode,I=C.start.row==C.end.row?C.end.row:1/0;this.renderer.updateLines(C.start.row,I,M),this._signal("change",C),this.$cursorChange()},A.prototype.onTokenizerUpdate=function(C){var M=C.data;this.renderer.updateLines(M.first,M.last)},A.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},A.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},A.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},A.prototype.$updateHighlightActiveLine=function(){var C=this.getSession(),M;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(M=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(M=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(M=!1)),C.$highlightLineMarker&&!M)C.removeMarker(C.$highlightLineMarker.id),C.$highlightLineMarker=null;else if(!C.$highlightLineMarker&&M){var I=new g(M.row,M.column,M.row,1/0);I.id=C.addMarker(I,"ace_active-line","screenLine"),C.$highlightLineMarker=I}else M&&(C.$highlightLineMarker.start.row=M.row,C.$highlightLineMarker.end.row=M.row,C.$highlightLineMarker.start.column=M.column,C._signal("changeBackMarker"))},A.prototype.onSelectionChange=function(C){var M=this.session;if(M.$selectionMarker&&M.removeMarker(M.$selectionMarker),M.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var I=this.selection.getRange(),D=this.getSelectionStyle();M.$selectionMarker=M.addMarker(I,"ace_selection",D)}var B=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(B),this._signal("changeSelection")},A.prototype.$getSelectionHighLightRegexp=function(){var C=this.session,M=this.getSelectionRange();if(!(M.isEmpty()||M.isMultiLine())){var I=M.start.column,D=M.end.column,B=C.getLine(M.start.row),F=B.substring(I,D);if(!(F.length>5e3||!/[\w\d]/.test(F))){var j=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:F}),Z=B.substring(I-1,D+1);if(j.test(Z))return j}}},A.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},A.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},A.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},A.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},A.prototype.onChangeMode=function(C){this.renderer.updateText(),this._emit("changeMode",C)},A.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},A.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},A.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},A.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},A.prototype.getCopyText=function(){var C=this.getSelectedText(),M=this.session.doc.getNewLineCharacter(),I=!1;if(!C&&this.$copyWithEmptySelection){I=!0;for(var D=this.selection.getAllRanges(),B=0;B<D.length;B++){var F=D[B];B&&D[B-1].start.row==F.start.row||(C+=this.session.getLine(F.start.row)+M)}}var j={text:C};return this._signal("copy",j),T.lineMode=I?j.text:!1,j.text},A.prototype.onCopy=function(){this.commands.exec("copy",this)},A.prototype.onCut=function(){this.commands.exec("cut",this)},A.prototype.onPaste=function(C,M){var I={text:C,event:M};this.commands.exec("paste",this,I)},A.prototype.$handlePaste=function(C){typeof C=="string"&&(C={text:C}),this._signal("paste",C);var M=C.text,I=M===T.lineMode,D=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)I?D.insert({row:this.selection.lead.row,column:0},M):this.insert(M);else if(I)this.selection.rangeList.ranges.forEach(function(W){D.insert({row:W.start.row,column:0},M)});else{var B=M.split(/\r\n|\r|\n/),F=this.selection.rangeList.ranges,j=B.length==2&&(!B[0]||!B[1]);if(B.length!=F.length||j)return this.commands.exec("insertstring",this,M);for(var Z=F.length;Z--;){var Q=F[Z];Q.isEmpty()||D.remove(Q),D.insert(Q.start,B[Z])}}},A.prototype.execCommand=function(C,M){return this.commands.exec(C,this,M)},A.prototype.insert=function(C,M){var I=this.session,D=I.getMode(),B=this.getCursorPosition();if(this.getBehavioursEnabled()&&!M){var F=D.transformAction(I.getState(B.row),"insertion",this,I,C);F&&(C!==F.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),C=F.text)}if(C=="	"&&(C=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&C.indexOf(`
`)==-1){var j=g.fromPoints(B,B);j.end.column+=C.length,this.session.remove(j)}}else{var j=this.getSelectionRange();B=this.session.remove(j),this.clearSelection()}if(C==`
`||C==`\r
`){var V=I.getLine(B.row);if(B.column>V.search(/\S|$/)){var Z=V.substr(B.column).search(/\S|$/);I.doc.removeInLine(B.row,B.column,B.column+Z)}}this.clearSelection();var Q=B.column,W=I.getState(B.row),V=I.getLine(B.row),G=D.checkOutdent(W,V,C);if(I.insert(B,C),F&&F.selection&&(F.selection.length==2?this.selection.setSelectionRange(new g(B.row,Q+F.selection[0],B.row,Q+F.selection[1])):this.selection.setSelectionRange(new g(B.row+F.selection[0],F.selection[1],B.row+F.selection[2],F.selection[3]))),this.$enableAutoIndent){if(I.getDocument().isNewLine(C)){var U=D.getNextLineIndent(W,V.slice(0,B.column),I.getTabString());I.insert({row:B.row+1,column:0},U)}G&&D.autoOutdent(W,I,B.row)}},A.prototype.autoIndent=function(){for(var C=this.session,M=C.getMode(),I=this.selection.isEmpty()?[new g(0,0,C.doc.getLength()-1,0)]:this.selection.getAllRanges(),D="",B="",F="",j=C.getTabString(),Z=0;Z<I.length;Z++)for(var Q=I[Z].start.row,W=I[Z].end.row,V=Q;V<=W;V++){V>0&&(D=C.getState(V-1),B=C.getLine(V-1),F=M.getNextLineIndent(D,B,j));var G=C.getLine(V),U=M.$getIndent(G);if(F!==U){if(U.length>0){var ee=new g(V,0,V,U.length);C.remove(ee)}F.length>0&&C.insert({row:V,column:0},F)}M.autoOutdent(D,C,V)}},A.prototype.onTextInput=function(C,M){if(!M)return this.keyBinding.onTextInput(C);this.startOperation({command:{name:"insertstring"}});var I=this.applyComposition.bind(this,C,M);this.selection.rangeCount?this.forEachSelection(I):I(),this.endOperation()},A.prototype.applyComposition=function(C,M){if(M.extendLeft||M.extendRight){var I=this.selection.getRange();I.start.column-=M.extendLeft,I.end.column+=M.extendRight,I.start.column<0&&(I.start.row--,I.start.column+=this.session.getLine(I.start.row).length+1),this.selection.setRange(I),!C&&!I.isEmpty()&&this.remove()}if((C||!this.selection.isEmpty())&&this.insert(C,!0),M.restoreStart||M.restoreEnd){var I=this.selection.getRange();I.start.column-=M.restoreStart,I.end.column-=M.restoreEnd,this.selection.setRange(I)}},A.prototype.onCommandKey=function(C,M,I){return this.keyBinding.onCommandKey(C,M,I)},A.prototype.setOverwrite=function(C){this.session.setOverwrite(C)},A.prototype.getOverwrite=function(){return this.session.getOverwrite()},A.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},A.prototype.setScrollSpeed=function(C){this.setOption("scrollSpeed",C)},A.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},A.prototype.setDragDelay=function(C){this.setOption("dragDelay",C)},A.prototype.getDragDelay=function(){return this.getOption("dragDelay")},A.prototype.setSelectionStyle=function(C){this.setOption("selectionStyle",C)},A.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},A.prototype.setHighlightActiveLine=function(C){this.setOption("highlightActiveLine",C)},A.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},A.prototype.setHighlightGutterLine=function(C){this.setOption("highlightGutterLine",C)},A.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},A.prototype.setHighlightSelectedWord=function(C){this.setOption("highlightSelectedWord",C)},A.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},A.prototype.setAnimatedScroll=function(C){this.renderer.setAnimatedScroll(C)},A.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},A.prototype.setShowInvisibles=function(C){this.renderer.setShowInvisibles(C)},A.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},A.prototype.setDisplayIndentGuides=function(C){this.renderer.setDisplayIndentGuides(C)},A.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},A.prototype.setHighlightIndentGuides=function(C){this.renderer.setHighlightIndentGuides(C)},A.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},A.prototype.setShowPrintMargin=function(C){this.renderer.setShowPrintMargin(C)},A.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},A.prototype.setPrintMarginColumn=function(C){this.renderer.setPrintMarginColumn(C)},A.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},A.prototype.setReadOnly=function(C){this.setOption("readOnly",C)},A.prototype.getReadOnly=function(){return this.getOption("readOnly")},A.prototype.setBehavioursEnabled=function(C){this.setOption("behavioursEnabled",C)},A.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},A.prototype.setWrapBehavioursEnabled=function(C){this.setOption("wrapBehavioursEnabled",C)},A.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},A.prototype.setShowFoldWidgets=function(C){this.setOption("showFoldWidgets",C)},A.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},A.prototype.setFadeFoldWidgets=function(C){this.setOption("fadeFoldWidgets",C)},A.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},A.prototype.remove=function(C){this.selection.isEmpty()&&(C=="left"?this.selection.selectLeft():this.selection.selectRight());var M=this.getSelectionRange();if(this.getBehavioursEnabled()){var I=this.session,D=I.getState(M.start.row),B=I.getMode().transformAction(D,"deletion",this,I,M);if(M.end.column===0){var F=I.getTextRange(M);if(F[F.length-1]==`
`){var j=I.getLine(M.end.row);/^\s+$/.test(j)&&(M.end.column=j.length)}}B&&(M=B)}this.session.remove(M),this.clearSelection()},A.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},A.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},A.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},A.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var C=this.getSelectionRange();C.start.column==C.end.column&&C.start.row==C.end.row&&(C.end.column=0,C.end.row++),this.session.remove(C),this.clearSelection()},A.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var C=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(C)},A.prototype.setGhostText=function(C,M){this.session.widgetManager||(this.session.widgetManager=new v(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(C,M)},A.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},A.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var C=this.getCursorPosition(),M=C.column;if(M!==0){var I=this.session.getLine(C.row),D,B;M<I.length?(D=I.charAt(M)+I.charAt(M-1),B=new g(C.row,M-1,C.row,M+1)):(D=I.charAt(M-1)+I.charAt(M-2),B=new g(C.row,M-2,C.row,M)),this.session.replace(B,D),this.session.selection.moveToPosition(B.end)}}},A.prototype.toLowerCase=function(){var C=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var M=this.getSelectionRange(),I=this.session.getTextRange(M);this.session.replace(M,I.toLowerCase()),this.selection.setSelectionRange(C)},A.prototype.toUpperCase=function(){var C=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var M=this.getSelectionRange(),I=this.session.getTextRange(M);this.session.replace(M,I.toUpperCase()),this.selection.setSelectionRange(C)},A.prototype.indent=function(){var C=this.session,M=this.getSelectionRange();if(M.start.row<M.end.row){var I=this.$getSelectedRows();C.indentRows(I.first,I.last,"	");return}else if(M.start.column<M.end.column){var D=C.getTextRange(M);if(!/^\s+$/.test(D)){var I=this.$getSelectedRows();C.indentRows(I.first,I.last,"	");return}}var B=C.getLine(M.start.row),F=M.start,j=C.getTabSize(),Z=C.documentToScreenColumn(F.row,F.column);if(this.session.getUseSoftTabs())var Q=j-Z%j,W=s.stringRepeat(" ",Q);else{for(var Q=Z%j;B[M.start.column-1]==" "&&Q;)M.start.column--,Q--;this.selection.setSelectionRange(M),W="	"}return this.insert(W)},A.prototype.blockIndent=function(){var C=this.$getSelectedRows();this.session.indentRows(C.first,C.last,"	")},A.prototype.blockOutdent=function(){var C=this.session.getSelection();this.session.outdentRows(C.getRange())},A.prototype.sortLines=function(){for(var C=this.$getSelectedRows(),M=this.session,I=[],D=C.first;D<=C.last;D++)I.push(M.getLine(D));I.sort(function(j,Z){return j.toLowerCase()<Z.toLowerCase()?-1:j.toLowerCase()>Z.toLowerCase()?1:0});for(var B=new g(0,0,0,0),D=C.first;D<=C.last;D++){var F=M.getLine(D);B.start.row=D,B.end.row=D,B.end.column=F.length,M.replace(B,I[D-C.first])}},A.prototype.toggleCommentLines=function(){var C=this.session.getState(this.getCursorPosition().row),M=this.$getSelectedRows();this.session.getMode().toggleCommentLines(C,this.session,M.first,M.last)},A.prototype.toggleBlockComment=function(){var C=this.getCursorPosition(),M=this.session.getState(C.row),I=this.getSelectionRange();this.session.getMode().toggleBlockComment(M,this.session,I,C)},A.prototype.getNumberAt=function(C,M){var I=/[\-]?[0-9]+(?:\.[0-9]+)?/g;I.lastIndex=0;for(var D=this.session.getLine(C);I.lastIndex<M;){var B=I.exec(D);if(B.index<=M&&B.index+B[0].length>=M){var F={value:B[0],start:B.index,end:B.index+B[0].length};return F}}return null},A.prototype.modifyNumber=function(C){var M=this.selection.getCursor().row,I=this.selection.getCursor().column,D=new g(M,I-1,M,I),B=this.session.getTextRange(D);if(!isNaN(parseFloat(B))&&isFinite(B)){var F=this.getNumberAt(M,I);if(F){var j=F.value.indexOf(".")>=0?F.start+F.value.indexOf(".")+1:F.end,Z=F.start+F.value.length-j,Q=parseFloat(F.value);Q*=Math.pow(10,Z),j!==F.end&&I<j?C*=Math.pow(10,F.end-I-1):C*=Math.pow(10,F.end-I),Q+=C,Q/=Math.pow(10,Z);var W=Q.toFixed(Z),V=new g(M,F.start,M,F.end);this.session.replace(V,W),this.moveCursorTo(M,Math.max(F.start+1,I+W.length-F.value.length))}}else this.toggleWord()},A.prototype.toggleWord=function(){var C=this.selection.getCursor().row,M=this.selection.getCursor().column;this.selection.selectWord();var I=this.getSelectedText(),D=this.selection.getWordRange().start.column,B=I.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),F=M-D-1;F<0&&(F=0);var j=0,Z=0,Q=this;I.match(/[A-Za-z0-9_]+/)&&B.forEach(function(P,z){Z=j+P.length,F>=j&&F<=Z&&(I=P,Q.selection.clearSelection(),Q.moveCursorTo(C,j+D),Q.selection.selectTo(C,Z+D)),j=Z});for(var W=this.$toggleWordPairs,V,G=0;G<W.length;G++)for(var U=W[G],ee=0;ee<=1;ee++){var Y=+!ee,O=I.match(new RegExp("^\\s?_?("+s.escapeRegExp(U[ee])+")\\s?$","i"));if(O){var L=I.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(O[1])+")($|\\s)","g"));L&&(V=I.replace(new RegExp(s.escapeRegExp(U[ee]),"i"),function(P){var z=U[Y];return P.toUpperCase()==P?z=z.toUpperCase():P.charAt(0).toUpperCase()==P.charAt(0)&&(z=z.substr(0,0)+U[Y].charAt(0).toUpperCase()+z.substr(1)),z}),this.insert(V),V="")}}},A.prototype.findLinkAt=function(C,M){var I,D,B=this.session.getLine(C),F=B.split(/((?:https?|ftp):\/\/[\S]+)/),j=M;j<0&&(j=0);var Z=0,Q=0,W;try{for(var V=o(F),G=V.next();!G.done;G=V.next()){var U=G.value;if(Q=Z+U.length,j>=Z&&j<=Q&&U.match(/((?:https?|ftp):\/\/[\S]+)/)){W=U.replace(/[\s:.,'";}\]]+$/,"");break}Z=Q}}catch(ee){I={error:ee}}finally{try{G&&!G.done&&(D=V.return)&&D.call(V)}finally{if(I)throw I.error}}return W},A.prototype.openLink=function(){var C=this.selection.getCursor(),M=this.findLinkAt(C.row,C.column);return M&&window.open(M,"_blank"),M!=null},A.prototype.removeLines=function(){var C=this.$getSelectedRows();this.session.removeFullLines(C.first,C.last),this.clearSelection()},A.prototype.duplicateSelection=function(){var C=this.selection,M=this.session,I=C.getRange(),D=C.isBackwards();if(I.isEmpty()){var B=I.start.row;M.duplicateLines(B,B)}else{var F=D?I.start:I.end,j=M.insert(F,M.getTextRange(I));I.start=F,I.end=j,C.setSelectionRange(I,D)}},A.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},A.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},A.prototype.moveText=function(C,M,I){return this.session.moveText(C,M,I)},A.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},A.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},A.prototype.$moveLines=function(C,M){var I,D,B=this.selection;if(!B.inMultiSelectMode||this.inVirtualSelectionMode){var F=B.toOrientedRange();I=this.$getSelectedRows(F),D=this.session.$moveLines(I.first,I.last,M?0:C),M&&C==-1&&(D=0),F.moveBy(D,0),B.fromOrientedRange(F)}else{var j=B.rangeList.ranges;B.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var Z=0,Q=0,W=j.length,V=0;V<W;V++){var G=V;j[V].moveBy(Z,0),I=this.$getSelectedRows(j[V]);for(var U=I.first,ee=I.last;++V<W;){Q&&j[V].moveBy(Q,0);var Y=this.$getSelectedRows(j[V]);if(M&&Y.first!=ee)break;if(!M&&Y.first>ee+1)break;ee=Y.last}for(V--,Z=this.session.$moveLines(U,ee,M?0:C),M&&C==-1&&(G=V+1);G<=V;)j[G].moveBy(Z,0),G++;M||(Z=0),Q+=Z}B.fromOrientedRange(B.ranges[0]),B.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},A.prototype.$getSelectedRows=function(C){return C=(C||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(C.start.row),last:this.session.getRowFoldEnd(C.end.row)}},A.prototype.onCompositionStart=function(C){this.renderer.showComposition(C)},A.prototype.onCompositionUpdate=function(C){this.renderer.setCompositionText(C)},A.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},A.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},A.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},A.prototype.isRowVisible=function(C){return C>=this.getFirstVisibleRow()&&C<=this.getLastVisibleRow()},A.prototype.isRowFullyVisible=function(C){return C>=this.renderer.getFirstFullyVisibleRow()&&C<=this.renderer.getLastFullyVisibleRow()},A.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},A.prototype.$moveByPage=function(C,M){var I=this.renderer,D=this.renderer.layerConfig,B=C*Math.floor(D.height/D.lineHeight);M===!0?this.selection.$moveSelection(function(){this.moveCursorBy(B,0)}):M===!1&&(this.selection.moveCursorBy(B,0),this.selection.clearSelection());var F=I.scrollTop;I.scrollBy(0,B*D.lineHeight),M!=null&&I.scrollCursorIntoView(null,.5),I.animateScrolling(F)},A.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},A.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},A.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},A.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},A.prototype.scrollPageDown=function(){this.$moveByPage(1)},A.prototype.scrollPageUp=function(){this.$moveByPage(-1)},A.prototype.scrollToRow=function(C){this.renderer.scrollToRow(C)},A.prototype.scrollToLine=function(C,M,I,D){this.renderer.scrollToLine(C,M,I,D)},A.prototype.centerSelection=function(){var C=this.getSelectionRange(),M={row:Math.floor(C.start.row+(C.end.row-C.start.row)/2),column:Math.floor(C.start.column+(C.end.column-C.start.column)/2)};this.renderer.alignCursor(M,.5)},A.prototype.getCursorPosition=function(){return this.selection.getCursor()},A.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},A.prototype.getSelectionRange=function(){return this.selection.getRange()},A.prototype.selectAll=function(){this.selection.selectAll()},A.prototype.clearSelection=function(){this.selection.clearSelection()},A.prototype.moveCursorTo=function(C,M){this.selection.moveCursorTo(C,M)},A.prototype.moveCursorToPosition=function(C){this.selection.moveCursorToPosition(C)},A.prototype.jumpToMatching=function(C,M){var I=this.getCursorPosition(),D=new _(this.session,I.row,I.column),B=D.getCurrentToken(),F=0;B&&B.type.indexOf("tag-name")!==-1&&(B=D.stepBackward());var j=B||D.stepForward();if(j){var Z,Q=!1,W={},V=I.column-j.start,G,U={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(j.value.match(/[{}()\[\]]/g)){for(;V<j.value.length&&!Q;V++)if(U[j.value[V]])switch(G=U[j.value[V]]+"."+j.type.replace("rparen","lparen"),isNaN(W[G])&&(W[G]=0),j.value[V]){case"(":case"[":case"{":W[G]++;break;case")":case"]":case"}":W[G]--,W[G]===-1&&(Z="bracket",Q=!0);break}}else j.type.indexOf("tag-name")!==-1&&(isNaN(W[j.value])&&(W[j.value]=0),B.value==="<"&&F>1?W[j.value]++:B.value==="</"&&W[j.value]--,W[j.value]===-1&&(Z="tag",Q=!0));Q||(B=j,F++,j=D.stepForward(),V=0)}while(j&&!Q);if(Z){var ee,Y;if(Z==="bracket")ee=this.session.getBracketRange(I),ee||(ee=new g(D.getCurrentTokenRow(),D.getCurrentTokenColumn()+V-1,D.getCurrentTokenRow(),D.getCurrentTokenColumn()+V-1),Y=ee.start,(M||Y.row===I.row&&Math.abs(Y.column-I.column)<2)&&(ee=this.session.getBracketRange(Y)));else if(Z==="tag"){if(!j||j.type.indexOf("tag-name")===-1)return;if(ee=new g(D.getCurrentTokenRow(),D.getCurrentTokenColumn()-2,D.getCurrentTokenRow(),D.getCurrentTokenColumn()-2),ee.compare(I.row,I.column)===0){var O=this.session.getMatchingTags(I);O&&(O.openTag.contains(I.row,I.column)?(ee=O.closeTag,Y=ee.start):(ee=O.openTag,O.closeTag.start.row===I.row&&O.closeTag.start.column===I.column?Y=ee.end:Y=ee.start))}Y=Y||ee.start}Y=ee&&ee.cursor||Y,Y&&(C?ee&&M?this.selection.setRange(ee):ee&&ee.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(Y.row,Y.column):this.selection.moveTo(Y.row,Y.column))}}},A.prototype.gotoLine=function(C,M,I){this.selection.clearSelection(),this.session.unfold({row:C-1,column:M||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(C-1,M||0),this.isRowFullyVisible(C-1)||this.scrollToLine(C-1,!0,I)},A.prototype.navigateTo=function(C,M){this.selection.moveTo(C,M)},A.prototype.navigateUp=function(C){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var M=this.selection.anchor.getPosition();return this.moveCursorToPosition(M)}this.selection.clearSelection(),this.selection.moveCursorBy(-C||-1,0)},A.prototype.navigateDown=function(C){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var M=this.selection.anchor.getPosition();return this.moveCursorToPosition(M)}this.selection.clearSelection(),this.selection.moveCursorBy(C||1,0)},A.prototype.navigateLeft=function(C){if(this.selection.isEmpty())for(C=C||1;C--;)this.selection.moveCursorLeft();else{var M=this.getSelectionRange().start;this.moveCursorToPosition(M)}this.clearSelection()},A.prototype.navigateRight=function(C){if(this.selection.isEmpty())for(C=C||1;C--;)this.selection.moveCursorRight();else{var M=this.getSelectionRange().end;this.moveCursorToPosition(M)}this.clearSelection()},A.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},A.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},A.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},A.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},A.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},A.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},A.prototype.replace=function(C,M){M&&this.$search.set(M);var I=this.$search.find(this.session),D=0;return I&&(this.$tryReplace(I,C)&&(D=1),this.selection.setSelectionRange(I),this.renderer.scrollSelectionIntoView(I.start,I.end)),D},A.prototype.replaceAll=function(C,M){M&&this.$search.set(M);var I=this.$search.findAll(this.session),D=0;if(!I.length)return D;var B=this.getSelectionRange();this.selection.moveTo(0,0);for(var F=I.length-1;F>=0;--F)this.$tryReplace(I[F],C)&&D++;return this.selection.setSelectionRange(B),D},A.prototype.$tryReplace=function(C,M){var I=this.session.getTextRange(C);return M=this.$search.replace(I,M),M!==null?(C.end=this.session.replace(C,M),C):null},A.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},A.prototype.find=function(C,M,I){M||(M={}),typeof C=="string"||C instanceof RegExp?M.needle=C:typeof C=="object"&&l.mixin(M,C);var D=this.selection.getRange();M.needle==null&&(C=this.session.getTextRange(D)||this.$search.$options.needle,C||(D=this.session.getWordRange(D.start.row,D.start.column),C=this.session.getTextRange(D)),this.$search.set({needle:C})),this.$search.set(M),M.start||this.$search.set({start:D});var B=this.$search.find(this.session);if(M.preventScroll)return B;if(B)return this.revealRange(B,I),B;M.backwards?D.start=D.end:D.end=D.start,this.selection.setRange(D)},A.prototype.findNext=function(C,M){this.find({skipCurrent:!0,backwards:!1},C,M)},A.prototype.findPrevious=function(C,M){this.find(C,{skipCurrent:!0,backwards:!0},M)},A.prototype.revealRange=function(C,M){this.session.unfold(C),this.selection.setSelectionRange(C);var I=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(C.start,C.end,.5),M!==!1&&this.renderer.animateScrolling(I)},A.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},A.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},A.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(C){C.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},A.prototype.setAutoScrollEditorIntoView=function(C){if(C){var M,I=this,D=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var B=this.$scrollAnchor;B.style.cssText="position:absolute",this.container.insertBefore(B,this.container.firstChild);var F=this.on("changeSelection",function(){D=!0}),j=this.renderer.on("beforeRender",function(){D&&(M=I.renderer.container.getBoundingClientRect())}),Z=this.renderer.on("afterRender",function(){if(D&&M&&(I.isFocused()||I.searchBox&&I.searchBox.isFocused())){var Q=I.renderer,W=Q.$cursorLayer.$pixelPos,V=Q.layerConfig,G=W.top-V.offset;W.top>=0&&G+M.top<0?D=!0:W.top<V.height&&W.top+M.top+V.lineHeight>window.innerHeight?D=!1:D=null,D!=null&&(B.style.top=G+"px",B.style.left=W.left+"px",B.style.height=V.lineHeight+"px",B.scrollIntoView(D)),D=M=null}});this.setAutoScrollEditorIntoView=function(Q){Q||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",F),this.renderer.off("afterRender",Z),this.renderer.off("beforeRender",j))}}},A.prototype.$resetCursorStyle=function(){var C=this.$cursorStyle||"ace",M=this.renderer.$cursorLayer;M&&(M.setSmoothBlinking(/smooth/.test(C)),M.isBlinking=!this.$readOnly&&C!="wide",u.setCssClass(M.element,"ace_slim-cursors",/slim/.test(C)))},A.prototype.prompt=function(C,M,I){var D=this;b.loadModule("ace/ext/prompt",function(B){B.prompt(D,C,M,I)})},A}();$.$uid=0,$.prototype.curOp=null,$.prototype.prevOp={},$.prototype.$mergeableCommands=["backspace","del","insertstring"],$.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],l.implement($.prototype,y),b.defineOptions($.prototype,"editor",{selectionStyle:{set:function(A){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:A})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(A){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(A){this.textInput.setReadOnly(A),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(A){this.textInput.setCopyWithEmptySelection(A)},initialValue:!1},cursorStyle:{set:function(A){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(A){this.setAutoScrollEditorIntoView(A)}},keyboardHandler:{set:function(A){this.setKeyboardHandler(A)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(A){this.session.setValue(A)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(A){this.setSession(A)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(A){this.renderer.$gutterLayer.setShowLineNumbers(A),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),A&&this.$relativeLineNumbers?R.attach(this):R.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(A){this.$showLineNumbers&&A?R.attach(this):R.detach(this)}},placeholder:{set:function(A){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var C=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(C&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),u.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!C&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),u.addCssClass(this.container,"ace_hasPlaceholder");var M=u.createElement("div");M.className="ace_placeholder",M.textContent=this.$placeholder||"",this.renderer.placeholderNode=M,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!C&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(A){var C={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(D){D.blur(),D.renderer.scroller.focus()},readOnly:!0},M=function(D){if(D.target==this.renderer.scroller&&D.keyCode===k.enter){D.preventDefault();var B=this.getCursorPosition().row;this.isRowVisible(B)||this.scrollToLine(B,!0,!0),this.focus()}},I;A?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(p.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",x("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",x("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",M.bind(this)),this.commands.addCommand(C),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",x("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",x("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),I||(I=new E(this)),I.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",M.bind(this)),this.commands.removeCommand(C),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),I&&I.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(A){this.$textInputAriaLabel=A},initialValue:""},enableMobileMenu:{set:function(A){this.$enableMobileMenu=A},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var R={getText:function(A,C){return(Math.abs(A.selection.lead.row-C)||C+1+(C<9?"·":""))+""},getWidth:function(A,C,M){return Math.max(C.toString().length,(M.lastRow+1).toString().length,2)*M.characterWidth},update:function(A,C){C.renderer.$loop.schedule(C.renderer.CHANGE_GUTTER)},attach:function(A){A.renderer.$gutterLayer.$renderer=this,A.on("changeSelection",this.update),this.update(null,A)},detach:function(A){A.renderer.$gutterLayer.$renderer==this&&(A.renderer.$gutterLayer.$renderer=null),A.off("changeSelection",this.update),this.update(null,A)}};i.Editor=$}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("../lib/dom"),l=function(){function u(s,p){this.element=s,this.canvasHeight=p||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return u.prototype.moveContainer=function(s){o.translate(this.element,0,-(s.firstRowScreen*s.lineHeight%this.canvasHeight)-s.offset*this.$offsetCoefficient)},u.prototype.pageChanged=function(s,p){return Math.floor(s.firstRowScreen*s.lineHeight/this.canvasHeight)!==Math.floor(p.firstRowScreen*p.lineHeight/this.canvasHeight)},u.prototype.computeLineTop=function(s,p,a){var c=p.firstRowScreen*p.lineHeight,h=Math.floor(c/this.canvasHeight),f=a.documentToScreenRow(s,0)*p.lineHeight;return f-h*this.canvasHeight},u.prototype.computeLineHeight=function(s,p,a){return p.lineHeight*a.getRowLineCount(s)},u.prototype.getLength=function(){return this.cells.length},u.prototype.get=function(s){return this.cells[s]},u.prototype.shift=function(){this.$cacheCell(this.cells.shift())},u.prototype.pop=function(){this.$cacheCell(this.cells.pop())},u.prototype.push=function(s){if(Array.isArray(s)){this.cells.push.apply(this.cells,s);for(var p=o.createFragment(this.element),a=0;a<s.length;a++)p.appendChild(s[a].element);this.element.appendChild(p)}else this.cells.push(s),this.element.appendChild(s.element)},u.prototype.unshift=function(s){if(Array.isArray(s)){this.cells.unshift.apply(this.cells,s);for(var p=o.createFragment(this.element),a=0;a<s.length;a++)p.appendChild(s[a].element);this.element.firstChild?this.element.insertBefore(p,this.element.firstChild):this.element.appendChild(p)}else this.cells.unshift(s),this.element.insertAdjacentElement("afterbegin",s.element)},u.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},u.prototype.$cacheCell=function(s){s&&(s.element.remove(),this.cellCache.push(s))},u.prototype.createCell=function(s,p,a,c){var h=this.cellCache.pop();if(!h){var f=o.createElement("div");c&&c(f),this.element.appendChild(f),h={element:f,text:"",row:s}}return h.row=s,h},u}();i.Lines=l}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(n,i,r){var o=n("../lib/dom"),l=n("../lib/oop"),u=n("../lib/lang"),s=n("../lib/event_emitter").EventEmitter,p=n("./lines").Lines,a=n("../config").nls,c=function(){function f(d){this.element=o.createElement("div"),this.element.className="ace_layer ace_gutter-layer",d.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new p(this.element),this.$lines.$offsetCoefficient=1}return f.prototype.setSession=function(d){this.session&&this.session.off("change",this.$updateAnnotations),this.session=d,d&&d.on("change",this.$updateAnnotations)},f.prototype.addGutterDecoration=function(d,m){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(d,m)},f.prototype.removeGutterDecoration=function(d,m){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(d,m)},f.prototype.setAnnotations=function(d){this.$annotations=[];for(var m=0;m<d.length;m++){var g=d[m],y=g.row,w=this.$annotations[y];w||(w=this.$annotations[y]={text:[],type:[],displayText:[]});var S=g.text,b=g.text,_=g.type;S=S?u.escapeHTML(S):g.html||"",b=b||g.html||"",w.text.indexOf(S)===-1&&(w.text.push(S),w.type.push(_),w.displayText.push(b));var v=g.className;v?w.className=v:_=="error"?w.className=" ace_error":_=="warning"&&w.className!=" ace_error"?w.className=" ace_warning":_=="info"&&!w.className&&(w.className=" ace_info")}},f.prototype.$updateAnnotations=function(d){if(this.$annotations.length){var m=d.start.row,g=d.end.row-m;if(g!==0)if(d.action=="remove")this.$annotations.splice(m,g+1,null);else{var y=new Array(g+1);y.unshift(m,1),this.$annotations.splice.apply(this.$annotations,y)}}},f.prototype.update=function(d){this.config=d;var m=this.session,g=d.firstRow,y=Math.min(d.lastRow+d.gutterOffset,m.getLength()-1);this.oldLastRow=y,this.config=d,this.$lines.moveContainer(d),this.$updateCursorRow();for(var w=m.getNextFoldLine(g),S=w?w.start.row:1/0,b=null,_=-1,v=g;;){if(v>S&&(v=w.end.row+1,w=m.getNextFoldLine(v,w),S=w?w.start.row:1/0),v>y){for(;this.$lines.getLength()>_+1;)this.$lines.pop();break}b=this.$lines.get(++_),b?b.row=v:(b=this.$lines.createCell(v,d,this.session,h),this.$lines.push(b)),this.$renderCell(b,d,w,v),v++}this._signal("afterRender"),this.$updateGutterWidth(d)},f.prototype.$updateGutterWidth=function(d){var m=this.session,g=m.gutterRenderer||this.$renderer,y=m.$firstLineNumber,w=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||m.$useWrapMode)&&(w=m.getLength()+y-1);var S=g?g.getWidth(m,w,d):w.toString().length*d.characterWidth,b=this.$padding||this.$computePadding();S+=b.left+b.right,S!==this.gutterWidth&&!isNaN(S)&&(this.gutterWidth=S,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",S))},f.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var d=this.session.selection.getCursor();this.$cursorRow!==d.row&&(this.$cursorRow=d.row)}},f.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var d=this.session.selection.cursor.row;if(this.$cursorRow=d,!(this.$cursorCell&&this.$cursorCell.row==d)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var m=this.$lines.cells;this.$cursorCell=null;for(var g=0;g<m.length;g++){var y=m[g];if(y.row>=this.$cursorRow){if(y.row>this.$cursorRow){var w=this.session.getFoldLine(this.$cursorRow);if(g>0&&w&&w.start.row==m[g-1].row)y=m[g-1];else break}y.element.className="ace_gutter-active-line "+y.element.className,this.$cursorCell=y;break}}}}},f.prototype.scrollLines=function(d){var m=this.config;if(this.config=d,this.$updateCursorRow(),this.$lines.pageChanged(m,d))return this.update(d);this.$lines.moveContainer(d);var g=Math.min(d.lastRow+d.gutterOffset,this.session.getLength()-1),y=this.oldLastRow;if(this.oldLastRow=g,!m||y<d.firstRow)return this.update(d);if(g<m.firstRow)return this.update(d);if(m.firstRow<d.firstRow)for(var w=this.session.getFoldedRowCount(m.firstRow,d.firstRow-1);w>0;w--)this.$lines.shift();if(y>g)for(var w=this.session.getFoldedRowCount(g+1,y);w>0;w--)this.$lines.pop();d.firstRow<m.firstRow&&this.$lines.unshift(this.$renderLines(d,d.firstRow,m.firstRow-1)),g>y&&this.$lines.push(this.$renderLines(d,y+1,g)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(d)},f.prototype.$renderLines=function(d,m,g){for(var y=[],w=m,S=this.session.getNextFoldLine(w),b=S?S.start.row:1/0;w>b&&(w=S.end.row+1,S=this.session.getNextFoldLine(w,S),b=S?S.start.row:1/0),!(w>g);){var _=this.$lines.createCell(w,d,this.session,h);this.$renderCell(_,d,S,w),y.push(_),w++}return y},f.prototype.$renderCell=function(d,m,g,y){var w=d.element,S=this.session,b=w.childNodes[0],_=w.childNodes[1],v=w.childNodes[2],E=v.firstChild,x=S.$firstLineNumber,T=S.$breakpoints,k=S.$decorations,$=S.gutterRenderer||this.$renderer,R=this.$showFoldWidgets&&S.foldWidgets,A=g?g.start.row:Number.MAX_VALUE,C=m.lineHeight+"px",M=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",I=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",D=($?$.getText(S,y):y+x).toString();if(this.$highlightGutterLine&&(y==this.$cursorRow||g&&y<this.$cursorRow&&y>=A&&this.$cursorRow<=g.end.row)&&(M+="ace_gutter-active-line ",this.$cursorCell!=d&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=d)),T[y]&&(M+=T[y]),k[y]&&(M+=k[y]),this.$annotations[y]&&y!==A&&(M+=this.$annotations[y].className),R){var B=R[y];B==null&&(B=R[y]=S.getFoldWidget(y))}if(B){var F="ace_fold-widget ace_"+B,j=B=="start"&&y==A&&y<g.end.row;if(j){F+=" ace_closed";for(var Z="",Q=!1,W=y+1;W<=g.end.row;W++)if(this.$annotations[W]){if(this.$annotations[W].className===" ace_error"){Q=!0,Z=" ace_error_fold";break}if(this.$annotations[W].className===" ace_warning"){Q=!0,Z=" ace_warning_fold";continue}}M+=Z}else F+=" ace_open";_.className!=F&&(_.className=F),o.setStyle(_.style,"height",C),o.setStyle(_.style,"display","inline-block"),_.setAttribute("role","button"),_.setAttribute("tabindex","-1");var V=S.getFoldWidgetRange(y);V?_.setAttribute("aria-label",a("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[V.start.row+1,V.end.row+1])):g?_.setAttribute("aria-label",a("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[g.start.row+1,g.end.row+1])):_.setAttribute("aria-label",a("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[y+1])),j?(_.setAttribute("aria-expanded","false"),_.setAttribute("title",a("gutter.code-folding.closed.title","Unfold code"))):(_.setAttribute("aria-expanded","true"),_.setAttribute("title",a("gutter.code-folding.open.title","Fold code")))}else _&&(o.setStyle(_.style,"display","none"),_.setAttribute("tabindex","0"),_.removeAttribute("role"),_.removeAttribute("aria-label"));if(Q&&this.$showFoldedAnnotations){v.className="ace_gutter_annotation",E.className=I,E.className+=Z,o.setStyle(E.style,"height",C),o.setStyle(v.style,"display","block"),o.setStyle(v.style,"height",C);var G;switch(Z){case" ace_error_fold":G=a("gutter.annotation.aria-label.error","Read annotations row $0",[D]);break;case" ace_warning_fold":G=a("gutter.annotation.aria-label.warning","Read annotations row $0",[D]);break}v.setAttribute("aria-label",G),v.setAttribute("tabindex","-1"),v.setAttribute("role","button")}else if(this.$annotations[y]){v.className="ace_gutter_annotation",E.className=I,this.$useSvgGutterIcons?E.className+=this.$annotations[y].className:w.classList.add(this.$annotations[y].className.replace(" ","")),o.setStyle(E.style,"height",C),o.setStyle(v.style,"display","block"),o.setStyle(v.style,"height",C);var G;switch(this.$annotations[y].className){case" ace_error":G=a("gutter.annotation.aria-label.error","Read annotations row $0",[D]);break;case" ace_warning":G=a("gutter.annotation.aria-label.warning","Read annotations row $0",[D]);break;case" ace_info":G=a("gutter.annotation.aria-label.info","Read annotations row $0",[D]);break}v.setAttribute("aria-label",G),v.setAttribute("tabindex","-1"),v.setAttribute("role","button")}else o.setStyle(v.style,"display","none"),v.removeAttribute("aria-label"),v.removeAttribute("role"),v.setAttribute("tabindex","0");return D!==b.data&&(b.data=D),w.className!=M&&(w.className=M),o.setStyle(d.element.style,"height",this.$lines.computeLineHeight(y,m,S)+"px"),o.setStyle(d.element.style,"top",this.$lines.computeLineTop(y,m,S)+"px"),d.text=D,v.style.display==="none"&&_.style.display==="none"?d.element.setAttribute("aria-hidden",!0):d.element.setAttribute("aria-hidden",!1),d},f.prototype.setHighlightGutterLine=function(d){this.$highlightGutterLine=d},f.prototype.setShowLineNumbers=function(d){this.$renderer=!d&&{getWidth:function(){return 0},getText:function(){return""}}},f.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},f.prototype.setShowFoldWidgets=function(d){d?o.addCssClass(this.element,"ace_folding-enabled"):o.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=d,this.$padding=null},f.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},f.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var d=o.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(d.borderLeftWidth)||0)+(parseInt(d.paddingLeft)||0)+1,this.$padding.right=(parseInt(d.borderRightWidth)||0)+(parseInt(d.paddingRight)||0),this.$padding},f.prototype.getRegion=function(d){var m=this.$padding||this.$computePadding(),g=this.element.getBoundingClientRect();if(d.x<m.left+g.left)return"markers";if(this.$showFoldWidgets&&d.x>g.right-m.right)return"foldWidgets"},f}();c.prototype.$fixedWidth=!1,c.prototype.$highlightGutterLine=!0,c.prototype.$renderer="",c.prototype.$showLineNumbers=!0,c.prototype.$showFoldWidgets=!0,l.implement(c.prototype,s);function h(f){var d=document.createTextNode("");f.appendChild(d);var m=o.createElement("span");f.appendChild(m);var g=o.createElement("span");f.appendChild(g);var y=o.createElement("span");return g.appendChild(y),f}i.Gutter=c}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(n,i,r){var o=n("../range").Range,l=n("../lib/dom"),u=function(){function p(a){this.element=l.createElement("div"),this.element.className="ace_layer ace_marker-layer",a.appendChild(this.element)}return p.prototype.setPadding=function(a){this.$padding=a},p.prototype.setSession=function(a){this.session=a},p.prototype.setMarkers=function(a){this.markers=a},p.prototype.elt=function(a,c){var h=this.i!=-1&&this.element.childNodes[this.i];h?this.i++:(h=document.createElement("div"),this.element.appendChild(h),this.i=-1),h.style.cssText=c,h.className=a},p.prototype.update=function(a){if(a){this.config=a,this.i=0;var c;for(var h in this.markers){var f=this.markers[h];if(!f.range){f.update(c,this,this.session,a);continue}var d=f.range.clipRows(a.firstRow,a.lastRow);if(!d.isEmpty())if(d=d.toScreenRange(this.session),f.renderer){var m=this.$getTop(d.start.row,a),g=this.$padding+d.start.column*a.characterWidth;f.renderer(c,d,g,m,a)}else f.type=="fullLine"?this.drawFullLineMarker(c,d,f.clazz,a):f.type=="screenLine"?this.drawScreenLineMarker(c,d,f.clazz,a):d.isMultiLine()?f.type=="text"?this.drawTextMarker(c,d,f.clazz,a):this.drawMultiLineMarker(c,d,f.clazz,a):this.drawSingleLineMarker(c,d,f.clazz+" ace_start ace_br15",a)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},p.prototype.$getTop=function(a,c){return(a-c.firstRowScreen)*c.lineHeight},p.prototype.drawTextMarker=function(a,c,h,f,d){for(var m=this.session,g=c.start.row,y=c.end.row,w=g,S=0,b=0,_=m.getScreenLastRowColumn(w),v=new o(w,c.start.column,w,b);w<=y;w++)v.start.row=v.end.row=w,v.start.column=w==g?c.start.column:m.getRowWrapIndent(w),v.end.column=_,S=b,b=_,_=w+1<y?m.getScreenLastRowColumn(w+1):w==y?0:c.end.column,this.drawSingleLineMarker(a,v,h+(w==g?" ace_start":"")+" ace_br"+s(w==g||w==g+1&&c.start.column,S<b,b>_,w==y),f,w==y?0:1,d)},p.prototype.drawMultiLineMarker=function(a,c,h,f,d){var m=this.$padding,g=f.lineHeight,y=this.$getTop(c.start.row,f),w=m+c.start.column*f.characterWidth;if(d=d||"",this.session.$bidiHandler.isBidiRow(c.start.row)){var S=c.clone();S.end.row=S.start.row,S.end.column=this.session.getLine(S.start.row).length,this.drawBidiSingleLineMarker(a,S,h+" ace_br1 ace_start",f,null,d)}else this.elt(h+" ace_br1 ace_start","height:"+g+"px;right:0;top:"+y+"px;left:"+w+"px;"+(d||""));if(this.session.$bidiHandler.isBidiRow(c.end.row)){var S=c.clone();S.start.row=S.end.row,S.start.column=0,this.drawBidiSingleLineMarker(a,S,h+" ace_br12",f,null,d)}else{y=this.$getTop(c.end.row,f);var b=c.end.column*f.characterWidth;this.elt(h+" ace_br12","height:"+g+"px;width:"+b+"px;top:"+y+"px;left:"+m+"px;"+(d||""))}if(g=(c.end.row-c.start.row-1)*f.lineHeight,!(g<=0)){y=this.$getTop(c.start.row+1,f);var _=(c.start.column?1:0)|(c.end.column?0:8);this.elt(h+(_?" ace_br"+_:""),"height:"+g+"px;right:0;top:"+y+"px;left:"+m+"px;"+(d||""))}},p.prototype.drawSingleLineMarker=function(a,c,h,f,d,m){if(this.session.$bidiHandler.isBidiRow(c.start.row))return this.drawBidiSingleLineMarker(a,c,h,f,d,m);var g=f.lineHeight,y=(c.end.column+(d||0)-c.start.column)*f.characterWidth,w=this.$getTop(c.start.row,f),S=this.$padding+c.start.column*f.characterWidth;this.elt(h,"height:"+g+"px;width:"+y+"px;top:"+w+"px;left:"+S+"px;"+(m||""))},p.prototype.drawBidiSingleLineMarker=function(a,c,h,f,d,m){var g=f.lineHeight,y=this.$getTop(c.start.row,f),w=this.$padding,S=this.session.$bidiHandler.getSelections(c.start.column,c.end.column);S.forEach(function(b){this.elt(h,"height:"+g+"px;width:"+(b.width+(d||0))+"px;top:"+y+"px;left:"+(w+b.left)+"px;"+(m||""))},this)},p.prototype.drawFullLineMarker=function(a,c,h,f,d){var m=this.$getTop(c.start.row,f),g=f.lineHeight;c.start.row!=c.end.row&&(g+=this.$getTop(c.end.row,f)-m),this.elt(h,"height:"+g+"px;top:"+m+"px;left:0;right:0;"+(d||""))},p.prototype.drawScreenLineMarker=function(a,c,h,f,d){var m=this.$getTop(c.start.row,f),g=f.lineHeight;this.elt(h,"height:"+g+"px;top:"+m+"px;left:0;right:0;"+(d||""))},p}();u.prototype.$padding=0;function s(p,a,c,h){return(p?1:0)|(a?2:0)|(c?4:0)|(h?8:0)}i.Marker=u}),ace.define("ace/layer/text_util",["require","exports","module"],function(n,i,r){var o=new Set(["text","rparen","lparen"]);i.isTextToken=function(l){return o.has(l)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(n,i,r){var o=n("../lib/oop"),l=n("../lib/dom"),u=n("../lib/lang"),s=n("./lines").Lines,p=n("../lib/event_emitter").EventEmitter,a=n("../config").nls,c=n("./text_util").isTextToken,h=function(){function f(d){this.dom=l,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",d.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)}return f.prototype.$updateEolChar=function(){var d=this.session.doc,m=d.getNewLineCharacter()==`
`&&d.getNewLineMode()!="windows",g=m?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=g)return this.EOL_CHAR=g,!0},f.prototype.setPadding=function(d){this.$padding=d,this.element.style.margin="0 "+d+"px"},f.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},f.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},f.prototype.$setFontMetrics=function(d){this.$fontMetrics=d,this.$fontMetrics.on("changeCharacterSize",(function(m){this._signal("changeCharacterSize",m)}).bind(this)),this.$pollSizeChanges()},f.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},f.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},f.prototype.setSession=function(d){this.session=d,d&&this.$computeTabString()},f.prototype.setShowInvisibles=function(d){return this.showInvisibles==d?!1:(this.showInvisibles=d,typeof d=="string"?(this.showSpaces=/tab/i.test(d),this.showTabs=/space/i.test(d),this.showEOL=/eol/i.test(d)):this.showSpaces=this.showTabs=this.showEOL=d,this.$computeTabString(),!0)},f.prototype.setDisplayIndentGuides=function(d){return this.displayIndentGuides==d?!1:(this.displayIndentGuides=d,this.$computeTabString(),!0)},f.prototype.setHighlightIndentGuides=function(d){return this.$highlightIndentGuides===d?!1:(this.$highlightIndentGuides=d,d)},f.prototype.$computeTabString=function(){var d=this.session.getTabSize();this.tabSize=d;for(var m=this.$tabStrings=[0],g=1;g<d+1;g++)if(this.showTabs){var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_tab",y.textContent=u.stringRepeat(this.TAB_CHAR,g),m.push(y)}else m.push(this.dom.createTextNode(u.stringRepeat(" ",g),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var w="ace_indent-guide",S=this.showSpaces?" ace_invisible ace_invisible_space":"",b=this.showSpaces?u.stringRepeat(this.SPACE_CHAR,this.tabSize):u.stringRepeat(" ",this.tabSize),_=this.showTabs?" ace_invisible ace_invisible_tab":"",v=this.showTabs?u.stringRepeat(this.TAB_CHAR,this.tabSize):b,y=this.dom.createElement("span");y.className=w+S,y.textContent=b,this.$tabStrings[" "]=y;var y=this.dom.createElement("span");y.className=w+_,y.textContent=v,this.$tabStrings["	"]=y}},f.prototype.updateLines=function(d,m,g){if(this.config.lastRow!=d.lastRow||this.config.firstRow!=d.firstRow)return this.update(d);this.config=d;for(var y=Math.max(m,d.firstRow),w=Math.min(g,d.lastRow),S=this.element.childNodes,b=0,v=d.firstRow;v<y;v++){var E=this.session.getFoldLine(v);if(E)if(E.containsRow(y)){y=E.start.row;break}else v=E.end.row;b++}for(var _=!1,v=y,E=this.session.getNextFoldLine(v),x=E?E.start.row:1/0;v>x&&(v=E.end.row+1,E=this.session.getNextFoldLine(v,E),x=E?E.start.row:1/0),!(v>w);){var T=S[b++];if(T){this.dom.removeChildren(T),this.$renderLine(T,v,v==x?E:!1),_&&(T.style.top=this.$lines.computeLineTop(v,d,this.session)+"px");var k=d.lineHeight*this.session.getRowLength(v)+"px";T.style.height!=k&&(_=!0,T.style.height=k)}v++}if(_)for(;b<this.$lines.cells.length;){var $=this.$lines.cells[b++];$.element.style.top=this.$lines.computeLineTop($.row,d,this.session)+"px"}},f.prototype.scrollLines=function(d){var m=this.config;if(this.config=d,this.$lines.pageChanged(m,d))return this.update(d);this.$lines.moveContainer(d);var g=d.lastRow,y=m?m.lastRow:-1;if(!m||y<d.firstRow)return this.update(d);if(g<m.firstRow)return this.update(d);if(!m||m.lastRow<d.firstRow)return this.update(d);if(d.lastRow<m.firstRow)return this.update(d);if(m.firstRow<d.firstRow)for(var w=this.session.getFoldedRowCount(m.firstRow,d.firstRow-1);w>0;w--)this.$lines.shift();if(m.lastRow>d.lastRow)for(var w=this.session.getFoldedRowCount(d.lastRow+1,m.lastRow);w>0;w--)this.$lines.pop();d.firstRow<m.firstRow&&this.$lines.unshift(this.$renderLinesFragment(d,d.firstRow,m.firstRow-1)),d.lastRow>m.lastRow&&this.$lines.push(this.$renderLinesFragment(d,m.lastRow+1,d.lastRow)),this.$highlightIndentGuide()},f.prototype.$renderLinesFragment=function(d,m,g){for(var y=[],w=m,S=this.session.getNextFoldLine(w),b=S?S.start.row:1/0;w>b&&(w=S.end.row+1,S=this.session.getNextFoldLine(w,S),b=S?S.start.row:1/0),!(w>g);){var _=this.$lines.createCell(w,d,this.session),v=_.element;this.dom.removeChildren(v),l.setStyle(v.style,"height",this.$lines.computeLineHeight(w,d,this.session)+"px"),l.setStyle(v.style,"top",this.$lines.computeLineTop(w,d,this.session)+"px"),this.$renderLine(v,w,w==b?S:!1),this.$useLineGroups()?v.className="ace_line_group":v.className="ace_line",y.push(_),w++}return y},f.prototype.update=function(d){this.$lines.moveContainer(d),this.config=d;for(var m=d.firstRow,g=d.lastRow,y=this.$lines;y.getLength();)y.pop();y.push(this.$renderLinesFragment(d,m,g))},f.prototype.$renderToken=function(d,m,g,y){for(var w=this,S=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,b=this.dom.createFragment(this.element),_,v=0;_=S.exec(y);){var E=_[1],x=_[2],T=_[3],k=_[4],$=_[5];if(!(!w.showSpaces&&x)){var R=v!=_.index?y.slice(v,_.index):"";if(v=_.index+_[0].length,R&&b.appendChild(this.dom.createTextNode(R,this.element)),E){var A=w.session.getScreenTabSize(m+_.index);b.appendChild(w.$tabStrings[A].cloneNode(!0)),m+=A-1}else if(x)if(w.showSpaces){var C=this.dom.createElement("span");C.className="ace_invisible ace_invisible_space",C.textContent=u.stringRepeat(w.SPACE_CHAR,x.length),b.appendChild(C)}else b.appendChild(this.dom.createTextNode(x,this.element));else if(T){var C=this.dom.createElement("span");C.className="ace_invisible ace_invisible_space ace_invalid",C.textContent=u.stringRepeat(w.SPACE_CHAR,T.length),b.appendChild(C)}else if(k){m+=1;var C=this.dom.createElement("span");C.style.width=w.config.characterWidth*2+"px",C.className=w.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",C.textContent=w.showSpaces?w.SPACE_CHAR:k,b.appendChild(C)}else if($){m+=1;var C=this.dom.createElement("span");C.style.width=w.config.characterWidth*2+"px",C.className="ace_cjk",C.textContent=$,b.appendChild(C)}}}if(b.appendChild(this.dom.createTextNode(v?y.slice(v):y,this.element)),c(g.type))d.appendChild(b);else{var M="ace_"+g.type.replace(/\./g," ace_"),C=this.dom.createElement("span");g.type=="fold"&&(C.style.width=g.value.length*this.config.characterWidth+"px",C.setAttribute("title",a("inline-fold.closed.title","Unfold code"))),C.className=M,C.appendChild(b),d.appendChild(C)}return m+y.length},f.prototype.renderIndentGuide=function(d,m,g){var y=m.search(this.$indentGuideRe);if(y<=0||y>=g)return m;if(m[0]==" "){y-=y%this.tabSize;for(var w=y/this.tabSize,S=0;S<w;S++)d.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),m.substr(y)}else if(m[0]=="	"){for(var S=0;S<y;S++)d.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),m.substr(y)}return this.$highlightIndentGuide(),m},f.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var d=this.session.doc.$lines;if(d){var m=this.session.selection.getCursor(),g=/^\s*/.exec(this.session.doc.getLine(m.row))[0].length,y=Math.floor(g/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:y,start:m.row};var w=this.session.$bracketHighlight;if(w){for(var S=this.session.$bracketHighlight.ranges,b=0;b<S.length;b++)if(m.row!==S[b].start.row){this.$highlightIndentGuideMarker.end=S[b].start.row,m.row>S[b].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&d[m.row]!==""&&m.column===d[m.row].length){this.$highlightIndentGuideMarker.dir=1;for(var b=m.row+1;b<d.length;b++){var _=d[b],v=/^\s*/.exec(_)[0].length;if(_!==""&&(this.$highlightIndentGuideMarker.end=b,v<=g))break}}this.$renderHighlightIndentGuide()}}},f.prototype.$clearActiveIndentGuide=function(){for(var d=this.$lines.cells,m=0;m<d.length;m++){var g=d[m],y=g.element.childNodes;if(y.length>0){for(var w=0;w<y.length;w++)if(y[w].classList&&y[w].classList.contains("ace_indent-guide-active")){y[w].classList.remove("ace_indent-guide-active");break}}}},f.prototype.$setIndentGuideActive=function(d,m){var g=this.session.doc.getLine(d.row);if(g!==""){var y=d.element.childNodes;if(y){var w=y[m-1];w&&w.classList&&w.classList.contains("ace_indent-guide")&&w.classList.add("ace_indent-guide-active")}}},f.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var d=this.$lines.cells;this.$clearActiveIndentGuide();var m=this.$highlightIndentGuideMarker.indentLevel;if(m!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var g=0;g<d.length;g++){var y=d[g];if(this.$highlightIndentGuideMarker.end&&y.row>=this.$highlightIndentGuideMarker.start+1){if(y.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,m)}}else for(var g=d.length-1;g>=0;g--){var y=d[g];if(this.$highlightIndentGuideMarker.end&&y.row<this.$highlightIndentGuideMarker.start){if(y.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,m)}}}},f.prototype.$createLineElement=function(d){var m=this.dom.createElement("div");return m.className="ace_line",m.style.height=this.config.lineHeight+"px",m},f.prototype.$renderWrappedLine=function(d,m,g){var y=0,w=0,S=g[0],b=0,_=this.$createLineElement();d.appendChild(_);for(var v=0;v<m.length;v++){var E=m[v],x=E.value;if(v==0&&this.displayIndentGuides){if(y=x.length,x=this.renderIndentGuide(_,x,S),!x)continue;y-=x.length}if(y+x.length<S)b=this.$renderToken(_,b,E,x),y+=x.length;else{for(;y+x.length>=S;)b=this.$renderToken(_,b,E,x.substring(0,S-y)),x=x.substring(S-y),y=S,_=this.$createLineElement(),d.appendChild(_),_.appendChild(this.dom.createTextNode(u.stringRepeat(" ",g.indent),this.element)),w++,b=0,S=g[w]||Number.MAX_VALUE;x.length!=0&&(y+=x.length,b=this.$renderToken(_,b,E,x))}}g[g.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(_,b,null,"",!0)},f.prototype.$renderSimpleLine=function(d,m){for(var g=0,y=0;y<m.length;y++){var w=m[y],S=w.value;if(!(y==0&&this.displayIndentGuides&&(S=this.renderIndentGuide(d,S),!S))){if(g+S.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(d,g,w,S);g=this.$renderToken(d,g,w,S)}}},f.prototype.$renderOverflowMessage=function(d,m,g,y,w){g&&this.$renderToken(d,m,g,y.slice(0,this.MAX_LINE_LENGTH-m));var S=this.dom.createElement("span");S.className="ace_inline_button ace_keyword ace_toggle_wrap",S.textContent=w?"<hide>":"<click to see more...>",d.appendChild(S)},f.prototype.$renderLine=function(d,m,g){if(!g&&g!=!1&&(g=this.session.getFoldLine(m)),g)var y=this.$getFoldLineTokens(m,g);else var y=this.session.getTokens(m);var w=d;if(y.length){var S=this.session.getRowSplitData(m);if(S&&S.length){this.$renderWrappedLine(d,y,S);var w=d.lastChild}else{var w=d;this.$useLineGroups()&&(w=this.$createLineElement(),d.appendChild(w)),this.$renderSimpleLine(w,y)}}else this.$useLineGroups()&&(w=this.$createLineElement(),d.appendChild(w));if(this.showEOL&&w){g&&(m=g.end.row);var b=this.dom.createElement("span");b.className="ace_invisible ace_invisible_eol",b.textContent=m==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,w.appendChild(b)}},f.prototype.$getFoldLineTokens=function(d,m){var g=this.session,y=[];function w(b,_,v){for(var E=0,x=0;x+b[E].value.length<_;)if(x+=b[E].value.length,E++,E==b.length)return;if(x!=_){var T=b[E].value.substring(_-x);T.length>v-_&&(T=T.substring(0,v-_)),y.push({type:b[E].type,value:T}),x=_+T.length,E+=1}for(;x<v&&E<b.length;){var T=b[E].value;T.length+x>v?y.push({type:b[E].type,value:T.substring(0,v-x)}):y.push(b[E]),x+=T.length,E+=1}}var S=g.getTokens(d);return m.walk(function(b,_,v,E,x){b!=null?y.push({type:"fold",value:b}):(x&&(S=g.getTokens(_)),S.length&&w(S,E,v))},m.end.row,this.session.getLine(m.end.row).length),y},f.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},f}();h.prototype.EOF_CHAR="¶",h.prototype.EOL_CHAR_LF="¬",h.prototype.EOL_CHAR_CRLF="¤",h.prototype.EOL_CHAR=h.prototype.EOL_CHAR_LF,h.prototype.TAB_CHAR="—",h.prototype.SPACE_CHAR="·",h.prototype.$padding=0,h.prototype.MAX_LINE_LENGTH=1e4,h.prototype.showInvisibles=!1,h.prototype.showSpaces=!1,h.prototype.showTabs=!1,h.prototype.showEOL=!1,h.prototype.displayIndentGuides=!0,h.prototype.$highlightIndentGuides=!0,h.prototype.$tabStrings=[],h.prototype.destroy={},h.prototype.onChangeTabSize=h.prototype.$computeTabString,o.implement(h.prototype,p),i.Text=h}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(n,i,r){var o=n("../lib/dom"),l=function(){function u(s){this.element=o.createElement("div"),this.element.className="ace_layer ace_cursor-layer",s.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),o.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return u.prototype.$updateOpacity=function(s){for(var p=this.cursors,a=p.length;a--;)o.setStyle(p[a].style,"opacity",s?"":"0")},u.prototype.$startCssAnimation=function(){for(var s=this.cursors,p=s.length;p--;)s[p].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&o.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},u.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,o.removeCssClass(this.element,"ace_animate-blinking")},u.prototype.setPadding=function(s){this.$padding=s},u.prototype.setSession=function(s){this.session=s},u.prototype.setBlinking=function(s){s!=this.isBlinking&&(this.isBlinking=s,this.restartTimer())},u.prototype.setBlinkInterval=function(s){s!=this.blinkInterval&&(this.blinkInterval=s,this.restartTimer())},u.prototype.setSmoothBlinking=function(s){s!=this.smoothBlinking&&(this.smoothBlinking=s,o.setCssClass(this.element,"ace_smooth-blinking",s),this.$updateCursors(!0),this.restartTimer())},u.prototype.addCursor=function(){var s=o.createElement("div");return s.className="ace_cursor",this.element.appendChild(s),this.cursors.push(s),s},u.prototype.removeCursor=function(){if(this.cursors.length>1){var s=this.cursors.pop();return s.parentNode.removeChild(s),s}},u.prototype.hideCursor=function(){this.isVisible=!1,o.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},u.prototype.showCursor=function(){this.isVisible=!0,o.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},u.prototype.restartTimer=function(){var s=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,o.removeCssClass(this.element,"ace_smooth-blinking")),s(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&o.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),o.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var p=(function(){this.timeoutId=setTimeout(function(){s(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){s(!0),p()},this.blinkInterval),p()}},u.prototype.getPixelPosition=function(s,p){if(!this.config||!this.session)return{left:0,top:0};s||(s=this.session.selection.getCursor());var a=this.session.documentToScreenPosition(s),c=this.$padding+(this.session.$bidiHandler.isBidiRow(a.row,s.row)?this.session.$bidiHandler.getPosLeft(a.column):a.column*this.config.characterWidth),h=(a.row-(p?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:c,top:h}},u.prototype.isCursorInView=function(s,p){return s.top>=0&&s.top<p.maxHeight},u.prototype.update=function(s){this.config=s;var p=this.session.$selectionMarkers,a=0,c=0;(p===void 0||p.length===0)&&(p=[{cursor:null}]);for(var a=0,h=p.length;a<h;a++){var f=this.getPixelPosition(p[a].cursor,!0);if(!((f.top>s.height+s.offset||f.top<0)&&a>1)){var d=this.cursors[c++]||this.addCursor(),m=d.style;this.drawCursor?this.drawCursor(d,f,s,p[a],this.session):this.isCursorInView(f,s)?(o.setStyle(m,"display","block"),o.translate(d,f.left,f.top),o.setStyle(m,"width",Math.round(s.characterWidth)+"px"),o.setStyle(m,"height",s.lineHeight+"px")):o.setStyle(m,"display","none")}}for(;this.cursors.length>c;)this.removeCursor();var g=this.session.getOverwrite();this.$setOverwrite(g),this.$pixelPos=f,this.restartTimer()},u.prototype.$setOverwrite=function(s){s!=this.overwrite&&(this.overwrite=s,s?o.addCssClass(this.element,"ace_overwrite-cursors"):o.removeCssClass(this.element,"ace_overwrite-cursors"))},u.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},u}();l.prototype.$padding=0,l.prototype.drawCursor=null,i.Cursor=l}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,i,r){var o=this&&this.__extends||function(){var d=function(m,g){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(y[S]=w[S])},d(m,g)};return function(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");d(m,g);function y(){this.constructor=m}m.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),l=n("./lib/oop"),u=n("./lib/dom"),s=n("./lib/event"),p=n("./lib/event_emitter").EventEmitter,a=32768,c=function(){function d(m,g){this.element=u.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+g,this.inner=u.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),m.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)}return d.prototype.setVisible=function(m){this.element.style.display=m?"":"none",this.isVisible=m,this.coeff=1},d}();l.implement(c.prototype,p);var h=function(d){o(m,d);function m(g,y){var w=d.call(this,g,"-v")||this;return w.scrollTop=0,w.scrollHeight=0,y.$scrollbarWidth=w.width=u.scrollbarWidth(g.ownerDocument),w.inner.style.width=w.element.style.width=(w.width||15)+5+"px",w.$minWidth=0,w}return m.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var g=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-g)/(this.coeff-g)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},m.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},m.prototype.setHeight=function(g){this.element.style.height=g+"px"},m.prototype.setScrollHeight=function(g){this.scrollHeight=g,g>a?(this.coeff=a/g,g=a):this.coeff!=1&&(this.coeff=1),this.inner.style.height=g+"px"},m.prototype.setScrollTop=function(g){this.scrollTop!=g&&(this.skipEvent=!0,this.scrollTop=g,this.element.scrollTop=g*this.coeff)},m}(c);h.prototype.setInnerHeight=h.prototype.setScrollHeight;var f=function(d){o(m,d);function m(g,y){var w=d.call(this,g,"-h")||this;return w.scrollLeft=0,w.height=y.$scrollbarWidth,w.inner.style.height=w.element.style.height=(w.height||15)+5+"px",w}return m.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},m.prototype.getHeight=function(){return this.isVisible?this.height:0},m.prototype.setWidth=function(g){this.element.style.width=g+"px"},m.prototype.setInnerWidth=function(g){this.inner.style.width=g+"px"},m.prototype.setScrollWidth=function(g){this.inner.style.width=g+"px"},m.prototype.setScrollLeft=function(g){this.scrollLeft!=g&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=g)},m}(c);i.ScrollBar=h,i.ScrollBarV=h,i.ScrollBarH=f,i.VScrollBar=h,i.HScrollBar=f}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(n,i,r){var o=this&&this.__extends||function(){var f=function(d,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(g[w]=y[w])},f(d,m)};return function(d,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");f(d,m);function g(){this.constructor=d}d.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}(),l=n("./lib/oop"),u=n("./lib/dom"),s=n("./lib/event"),p=n("./lib/event_emitter").EventEmitter;u.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var a=function(){function f(d,m){this.element=u.createElement("div"),this.element.className="ace_sb"+m,this.inner=u.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return f.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},f}();l.implement(a.prototype,p);var c=function(f){o(d,f);function d(m,g){var y=f.call(this,m,"-v")||this;return y.scrollTop=0,y.scrollHeight=0,y.parent=m,y.width=y.VScrollWidth,y.renderer=g,y.inner.style.width=y.element.style.width=(y.width||15)+"px",y.$minWidth=0,y}return d.prototype.onMouseDown=function(m,g){if(m==="mousedown"&&!(s.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var y=this,w=g.clientY,S=function(k){w=k.clientY},b=function(){clearInterval(x)},_=g.clientY,v=this.thumbTop,E=function(){if(w!==void 0){var k=y.scrollTopFromThumbTop(v+w-_);k!==y.scrollTop&&y._emit("scroll",{data:k})}};s.capture(this.inner,S,b);var x=setInterval(E,20);return s.preventDefault(g)}var T=g.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(T)}),s.preventDefault(g)}},d.prototype.getHeight=function(){return this.height},d.prototype.scrollTopFromThumbTop=function(m){var g=m*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return g=g>>0,g<0?g=0:g>this.pageHeight-this.viewHeight&&(g=this.pageHeight-this.viewHeight),g},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(m){this.height=Math.max(0,m),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},d.prototype.setScrollHeight=function(m,g){this.pageHeight===m&&!g||(this.pageHeight=m,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},d.prototype.setScrollTop=function(m){this.scrollTop=m,m<0&&(m=0),this.thumbTop=m*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},d}(a);c.prototype.setInnerHeight=c.prototype.setScrollHeight;var h=function(f){o(d,f);function d(m,g){var y=f.call(this,m,"-h")||this;return y.scrollLeft=0,y.scrollWidth=0,y.height=y.HScrollHeight,y.inner.style.height=y.element.style.height=(y.height||12)+"px",y.renderer=g,y}return d.prototype.onMouseDown=function(m,g){if(m==="mousedown"&&!(s.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var y=this,w=g.clientX,S=function(k){w=k.clientX},b=function(){clearInterval(x)},_=g.clientX,v=this.thumbLeft,E=function(){if(w!==void 0){var k=y.scrollLeftFromThumbLeft(v+w-_);k!==y.scrollLeft&&y._emit("scroll",{data:k})}};s.capture(this.inner,S,b);var x=setInterval(E,20);return s.preventDefault(g)}var T=g.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(T)}),s.preventDefault(g)}},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.scrollLeftFromThumbLeft=function(m){var g=m*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return g=g>>0,g<0?g=0:g>this.pageWidth-this.viewWidth&&(g=this.pageWidth-this.viewWidth),g},d.prototype.setWidth=function(m){this.width=Math.max(0,m),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},d.prototype.setScrollWidth=function(m,g){this.pageWidth===m&&!g||(this.pageWidth=m,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},d.prototype.setScrollLeft=function(m){this.scrollLeft=m,m<0&&(m=0),this.thumbLeft=m*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},d}(a);h.prototype.setInnerWidth=h.prototype.setScrollWidth,i.ScrollBar=c,i.ScrollBarV=c,i.ScrollBarH=h,i.VScrollBar=c,i.HScrollBar=h}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(n,i,r){var o=n("./lib/event"),l=function(){function u(s,p){this.onRender=s,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=p||window;var a=this;this._flush=function(c){a.pending=!1;var h=a.changes;if(h&&(o.blockIdle(100),a.changes=0,a.onRender(h)),a.changes){if(a.$recursionLimit--<0)return;a.schedule()}else a.$recursionLimit=2}}return u.prototype.schedule=function(s){this.changes=this.changes|s,this.changes&&!this.pending&&(o.nextFrame(this._flush),this.pending=!0)},u.prototype.clear=function(s){var p=this.changes;return this.changes=0,p},u}();i.RenderLoop=l}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(n,i,r){var o=n("../lib/oop"),l=n("../lib/dom"),u=n("../lib/lang"),s=n("../lib/event"),p=n("../lib/useragent"),a=n("../lib/event_emitter").EventEmitter,c=512,h=typeof ResizeObserver=="function",f=200,d=function(){function m(g){this.el=l.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=l.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=l.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),g.appendChild(this.el),this.$measureNode.textContent=u.stringRepeat("X",c),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()}return m.prototype.$setMeasureNodeStyles=function(g,y){g.width=g.height="auto",g.left=g.top="0px",g.visibility="hidden",g.position="absolute",g.whiteSpace="pre",p.isIE<8?g["font-family"]="inherit":g.font="inherit",g.overflow=y?"hidden":"visible"},m.prototype.checkForSizeChanges=function(g){if(g===void 0&&(g=this.$measureSizes()),g&&(this.$characterSize.width!==g.width||this.$characterSize.height!==g.height)){this.$measureNode.style.fontWeight="bold";var y=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=g,this.charSizes=Object.create(null),this.allowBoldFonts=y&&y.width===g.width&&y.height===g.height,this._emit("changeCharacterSize",{data:g})}},m.prototype.$addObserver=function(){var g=this;this.$observer=new window.ResizeObserver(function(y){g.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},m.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var g=this;return this.$pollSizeChangesTimer=s.onIdle(function y(){g.checkForSizeChanges(),s.onIdle(y,500)},500)},m.prototype.setPolling=function(g){g?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},m.prototype.$measureSizes=function(g){var y={height:(g||this.$measureNode).clientHeight,width:(g||this.$measureNode).clientWidth/c};return y.width===0||y.height===0?null:y},m.prototype.$measureCharWidth=function(g){this.$main.textContent=u.stringRepeat(g,c);var y=this.$main.getBoundingClientRect();return y.width/c},m.prototype.getCharacterWidth=function(g){var y=this.charSizes[g];return y===void 0&&(y=this.charSizes[g]=this.$measureCharWidth(g)/this.$characterSize.width),y},m.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},m.prototype.$getZoom=function(g){return!g||!g.parentElement?1:(Number(window.getComputedStyle(g).zoom)||1)*this.$getZoom(g.parentElement)},m.prototype.$initTransformMeasureNodes=function(){var g=function(y,w){return["div",{style:"position: absolute;top:"+y+"px;left:"+w+"px;"}]};this.els=l.buildDom([g(0,0),g(f,0),g(0,f),g(f,f)],this.el)},m.prototype.transformCoordinates=function(g,y){if(g){var w=this.$getZoom(this.el);g=v(1/w,g)}function S(j,Z,Q){var W=j[1]*Z[0]-j[0]*Z[1];return[(-Z[1]*Q[0]+Z[0]*Q[1])/W,(+j[1]*Q[0]-j[0]*Q[1])/W]}function b(j,Z){return[j[0]-Z[0],j[1]-Z[1]]}function _(j,Z){return[j[0]+Z[0],j[1]+Z[1]]}function v(j,Z){return[j*Z[0],j*Z[1]]}this.els||this.$initTransformMeasureNodes();function E(j){var Z=j.getBoundingClientRect();return[Z.left,Z.top]}var x=E(this.els[0]),T=E(this.els[1]),k=E(this.els[2]),$=E(this.els[3]),R=S(b($,T),b($,k),b(_(T,k),_($,x))),A=v(1+R[0],b(T,x)),C=v(1+R[1],b(k,x));if(y){var M=y,I=R[0]*M[0]/f+R[1]*M[1]/f+1,D=_(v(M[0],A),v(M[1],C));return _(v(1/I/f,D),x)}var B=b(g,x),F=S(b(A,v(R[0],B)),b(C,v(R[1],B)),B);return v(f,F)},m}();d.prototype.$characterSize={width:0,height:0},o.implement(d.prototype,a),i.FontMetrics=d}),ace.define("ace/css/editor-css",["require","exports","module"],function(n,i,r){r.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "↩";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(n,i,r){var o=n("../lib/dom"),l=n("../lib/oop"),u=n("../lib/event_emitter").EventEmitter,s=function(){function p(a,c){this.canvas=o.createElement("canvas"),this.renderer=c,this.pixelRatio=1,this.maxHeight=c.layerConfig.maxHeight,this.lineHeight=c.layerConfig.lineHeight,this.canvasHeight=a.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=a.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},a.element.appendChild(this.canvas)}return p.prototype.$updateDecorators=function(a){var c=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(a){this.maxHeight=a.maxHeight,this.lineHeight=a.lineHeight,this.canvasHeight=a.height;var h=(a.lastRow+1)*this.lineHeight;h<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var f=this.canvas.getContext("2d");function d($,R){return $.priority<R.priority?-1:$.priority>R.priority?1:0}var m=this.renderer.session.$annotations;if(f.clearRect(0,0,this.canvas.width,this.canvas.height),m){var g={info:1,warning:2,error:3};m.forEach(function($){$.priority=g[$.type]||null}),m=m.sort(d);for(var y=this.renderer.session.$foldData,w=0;w<m.length;w++){var S=m[w].row,b=this.compensateFoldRows(S,y),_=Math.round((S-b)*this.lineHeight*this.heightRatio),v=Math.round((S-b)*this.lineHeight*this.heightRatio),E=Math.round(((S-b)*this.lineHeight+this.lineHeight)*this.heightRatio),x=E-v;if(x<this.minDecorationHeight){var T=(v+E)/2|0;T<this.halfMinDecorationHeight?T=this.halfMinDecorationHeight:T+this.halfMinDecorationHeight>this.canvasHeight&&(T=this.canvasHeight-this.halfMinDecorationHeight),v=Math.round(T-this.halfMinDecorationHeight),E=Math.round(T+this.halfMinDecorationHeight)}f.fillStyle=c[m[w].type]||null,f.fillRect(0,_,this.canvasWidth,E-v)}}var k=this.renderer.session.selection.getCursor();if(k){var b=this.compensateFoldRows(k.row,y),_=Math.round((k.row-b)*this.lineHeight*this.heightRatio);f.fillStyle="rgba(0, 0, 0, 0.5)",f.fillRect(0,_,this.canvasWidth,2)}},p.prototype.compensateFoldRows=function(a,c){var h=0;if(c&&c.length>0)for(var f=0;f<c.length;f++)a>c[f].start.row&&a<c[f].end.row?h+=a-c[f].start.row:a>=c[f].end.row&&(h+=c[f].end.row-c[f].start.row);return h},p}();l.implement(s.prototype,u),i.Decorator=s}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(n,i,r){var o=n("./lib/oop"),l=n("./lib/dom"),u=n("./lib/lang"),s=n("./config"),p=n("./layer/gutter").Gutter,a=n("./layer/marker").Marker,c=n("./layer/text").Text,h=n("./layer/cursor").Cursor,f=n("./scrollbar").HScrollBar,d=n("./scrollbar").VScrollBar,m=n("./scrollbar_custom").HScrollBar,g=n("./scrollbar_custom").VScrollBar,y=n("./renderloop").RenderLoop,w=n("./layer/font_metrics").FontMetrics,S=n("./lib/event_emitter").EventEmitter,b=n("./css/editor-css"),_=n("./layer/decorators").Decorator,v=n("./lib/useragent");l.importCssString(b,"ace_editor.css",!1);var E=function(){function x(T,k){var $=this;this.container=T||l.createElement("div"),l.addCssClass(this.container,"ace_editor"),l.HI_DPI&&l.addCssClass(this.container,"ace_hidpi"),this.setTheme(k),s.get("useStrictCSP")==null&&s.set("useStrictCSP",!1),this.$gutter=l.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=l.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=l.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new p(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var R=this.$textLayer=new c(this.content);this.canvas=R.element,this.$markerFront=new a(this.content),this.$cursorLayer=new h(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.on("scroll",function(A){$.$scrollAnimation||$.session.setScrollTop(A.data-$.scrollMargin.top)}),this.scrollBarH.on("scroll",function(A){$.$scrollAnimation||$.session.setScrollLeft(A.data-$.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new w(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(A){$.updateCharacterSize(),$.onResize(!0,$.gutterWidth,$.$size.width,$.$size.height),$._signal("changeCharacterSize",A)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!v.isIOS,this.$loop=new y(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),s.resetOptions(this),s._signal("renderer",this)}return x.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),l.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},x.prototype.setSession=function(T){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=T,T&&this.scrollMargin.top&&T.getScrollTop()<=0&&T.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(T),this.$markerBack.setSession(T),this.$markerFront.setSession(T),this.$gutterLayer.setSession(T),this.$textLayer.setSession(T),T&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},x.prototype.updateLines=function(T,k,$){if(k===void 0&&(k=1/0),this.$changedLines?(this.$changedLines.firstRow>T&&(this.$changedLines.firstRow=T),this.$changedLines.lastRow<k&&(this.$changedLines.lastRow=k)):this.$changedLines={firstRow:T,lastRow:k},this.$changedLines.lastRow<this.layerConfig.firstRow)if($)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},x.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},x.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},x.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},x.prototype.updateFull=function(T){T?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},x.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},x.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},x.prototype.onResize=function(T,k,$,R){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=T?1:0;var A=this.container;R||(R=A.clientHeight||A.scrollHeight),!R&&this.$maxLines&&this.lineHeight>1&&(!A.style.height||A.style.height=="0px")&&(A.style.height="1px",R=A.clientHeight||A.scrollHeight),$||($=A.clientWidth||A.scrollWidth);var C=this.$updateCachedSize(T,k,$,R);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!$&&!R)return this.resizing=0;T&&(this.$gutterLayer.$padding=null),T?this.$renderChanges(C|this.$changes,!0):this.$loop.schedule(C|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},x.prototype.$updateCachedSize=function(T,k,$,R){R-=this.$extraHeight||0;var A=0,C=this.$size,M={width:C.width,height:C.height,scrollerHeight:C.scrollerHeight,scrollerWidth:C.scrollerWidth};if(R&&(T||C.height!=R)&&(C.height=R,A|=this.CHANGE_SIZE,C.scrollerHeight=C.height,this.$horizScroll&&(C.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(C.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",A=A|this.CHANGE_SCROLL),$&&(T||C.width!=$)){A|=this.CHANGE_SIZE,C.width=$,k==null&&(k=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=k,l.setStyle(this.scrollBarH.element.style,"left",k+"px"),l.setStyle(this.scroller.style,"left",k+this.margin.left+"px"),C.scrollerWidth=Math.max(0,$-k-this.scrollBarV.getWidth()-this.margin.h),l.setStyle(this.$gutter.style,"left",this.margin.left+"px");var I=this.scrollBarV.getWidth()+"px";l.setStyle(this.scrollBarH.element.style,"right",I),l.setStyle(this.scroller.style,"right",I),l.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(C.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||T)&&(A|=this.CHANGE_FULL)}return C.$dirty=!$||!R,A&&this._signal("resize",M),A},x.prototype.onGutterResize=function(T){var k=this.$showGutter?T:0;k!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,k,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},x.prototype.adjustWrapLimit=function(){var T=this.$size.scrollerWidth-this.$padding*2,k=Math.floor(T/this.characterWidth);return this.session.adjustWrapLimit(k,this.$showPrintMargin&&this.$printMarginColumn)},x.prototype.setAnimatedScroll=function(T){this.setOption("animatedScroll",T)},x.prototype.getAnimatedScroll=function(){return this.$animatedScroll},x.prototype.setShowInvisibles=function(T){this.setOption("showInvisibles",T),this.session.$bidiHandler.setShowInvisibles(T)},x.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},x.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},x.prototype.setDisplayIndentGuides=function(T){this.setOption("displayIndentGuides",T)},x.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},x.prototype.setHighlightIndentGuides=function(T){this.setOption("highlightIndentGuides",T)},x.prototype.setShowPrintMargin=function(T){this.setOption("showPrintMargin",T)},x.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},x.prototype.setPrintMarginColumn=function(T){this.setOption("printMarginColumn",T)},x.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},x.prototype.getShowGutter=function(){return this.getOption("showGutter")},x.prototype.setShowGutter=function(T){return this.setOption("showGutter",T)},x.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},x.prototype.setFadeFoldWidgets=function(T){this.setOption("fadeFoldWidgets",T)},x.prototype.setHighlightGutterLine=function(T){this.setOption("highlightGutterLine",T)},x.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},x.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var T=l.createElement("div");T.className="ace_layer ace_print-margin-layer",this.$printMarginEl=l.createElement("div"),this.$printMarginEl.className="ace_print-margin",T.appendChild(this.$printMarginEl),this.content.insertBefore(T,this.content.firstChild)}var k=this.$printMarginEl.style;k.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",k.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},x.prototype.getContainerElement=function(){return this.container},x.prototype.getMouseEventTarget=function(){return this.scroller},x.prototype.getTextAreaContainer=function(){return this.container},x.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var T=this.textarea.style,k=this.$composition;if(!this.$keepTextAreaAtCursor&&!k){l.translate(this.textarea,-100,0);return}var $=this.$cursorLayer.$pixelPos;if($){k&&k.markerRange&&($=this.$cursorLayer.getPixelPosition(k.markerRange.start,!0));var R=this.layerConfig,A=$.top,C=$.left;A-=R.offset;var M=k&&k.useTextareaForIME||v.isMobile?this.lineHeight:1;if(A<0||A>R.height-M){l.translate(this.textarea,0,0);return}var I=1,D=this.$size.height-M;if(!k)A+=this.lineHeight;else if(k.useTextareaForIME){var B=this.textarea.value;I=this.characterWidth*this.session.$getStringScreenWidth(B)[0]}else A+=this.lineHeight+2;C-=this.scrollLeft,C>this.$size.scrollerWidth-I&&(C=this.$size.scrollerWidth-I),C+=this.gutterWidth+this.margin.left,l.setStyle(T,"height",M+"px"),l.setStyle(T,"width",I+"px"),l.translate(this.textarea,Math.min(C,this.$size.scrollerWidth-I),Math.min(A,D))}}},x.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},x.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},x.prototype.getLastFullyVisibleRow=function(){var T=this.layerConfig,k=T.lastRow,$=this.session.documentToScreenRow(k,0)*T.lineHeight;return $-this.session.getScrollTop()>T.height-T.lineHeight?k-1:k},x.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},x.prototype.setPadding=function(T){this.$padding=T,this.$textLayer.setPadding(T),this.$cursorLayer.setPadding(T),this.$markerFront.setPadding(T),this.$markerBack.setPadding(T),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},x.prototype.setScrollMargin=function(T,k,$,R){var A=this.scrollMargin;A.top=T|0,A.bottom=k|0,A.right=R|0,A.left=$|0,A.v=A.top+A.bottom,A.h=A.left+A.right,A.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-A.top),this.updateFull()},x.prototype.setMargin=function(T,k,$,R){var A=this.margin;A.top=T|0,A.bottom=k|0,A.right=R|0,A.left=$|0,A.v=A.top+A.bottom,A.h=A.left+A.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},x.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},x.prototype.setHScrollBarAlwaysVisible=function(T){this.setOption("hScrollBarAlwaysVisible",T)},x.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},x.prototype.setVScrollBarAlwaysVisible=function(T){this.setOption("vScrollBarAlwaysVisible",T)},x.prototype.$updateScrollBarV=function(){var T=this.layerConfig.maxHeight,k=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(T-=(k-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>T-k&&(T=this.scrollTop+k,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(T+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},x.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},x.prototype.freeze=function(){this.$frozen=!0},x.prototype.unfreeze=function(){this.$frozen=!1},x.prototype.$renderChanges=function(T,k){if(this.$changes&&(T|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!T&&!k){this.$changes|=T;return}if(this.$size.$dirty)return this.$changes|=T,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",T),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var $=this.layerConfig;if(T&this.CHANGE_FULL||T&this.CHANGE_SIZE||T&this.CHANGE_TEXT||T&this.CHANGE_LINES||T&this.CHANGE_SCROLL||T&this.CHANGE_H_SCROLL){if(T|=this.$computeLayerConfig()|this.$loop.clear(),$.firstRow!=this.layerConfig.firstRow&&$.firstRowScreen==this.layerConfig.firstRowScreen){var R=this.scrollTop+($.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;R>0&&(this.scrollTop=R,T=T|this.CHANGE_SCROLL,T|=this.$computeLayerConfig()|this.$loop.clear())}$=this.layerConfig,this.$updateScrollBarV(),T&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),l.translate(this.content,-this.scrollLeft,-$.offset);var A=$.width+2*this.$padding+"px",C=$.minHeight+"px";l.setStyle(this.content.style,"width",A),l.setStyle(this.content.style,"height",C)}if(T&this.CHANGE_H_SCROLL&&(l.translate(this.content,-this.scrollLeft,-$.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),T&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update($),this.$showGutter&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($),this.$markerBack.update($),this.$markerFront.update($),this.$cursorLayer.update($),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}if(T&this.CHANGE_SCROLL){this.$changedLines=null,T&this.CHANGE_TEXT||T&this.CHANGE_LINES?this.$textLayer.update($):this.$textLayer.scrollLines($),this.$showGutter&&(T&this.CHANGE_GUTTER||T&this.CHANGE_LINES?this.$gutterLayer.update($):this.$gutterLayer.scrollLines($)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($),this.$markerBack.update($),this.$markerFront.update($),this.$cursorLayer.update($),this.$moveTextAreaToCursor(),this._signal("afterRender",T);return}T&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update($),this.$showGutter&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)):T&this.CHANGE_LINES?((this.$updateLines()||T&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)):T&this.CHANGE_TEXT||T&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)):T&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight($),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators($)),T&this.CHANGE_CURSOR&&(this.$cursorLayer.update($),this.$moveTextAreaToCursor()),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update($),T&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update($),this._signal("afterRender",T)},x.prototype.$autosize=function(){var T=this.session.getScreenLength()*this.lineHeight,k=this.$maxLines*this.lineHeight,$=Math.min(k,Math.max((this.$minLines||1)*this.lineHeight,T))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&($+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&$>this.$maxPixelHeight&&($=this.$maxPixelHeight);var R=$<=2*this.lineHeight,A=!R&&T>k;if($!=this.desiredHeight||this.$size.height!=this.desiredHeight||A!=this.$vScroll){A!=this.$vScroll&&(this.$vScroll=A,this.scrollBarV.setVisible(A));var C=this.container.clientWidth;this.container.style.height=$+"px",this.$updateCachedSize(!0,this.$gutterWidth,C,$),this.desiredHeight=$,this._signal("autosize")}},x.prototype.$computeLayerConfig=function(){var T=this.session,k=this.$size,$=k.height<=2*this.lineHeight,R=this.session.getScreenLength(),A=R*this.lineHeight,C=this.$getLongestLine(),M=!$&&(this.$hScrollBarAlwaysVisible||k.scrollerWidth-C-2*this.$padding<0),I=this.$horizScroll!==M;I&&(this.$horizScroll=M,this.scrollBarH.setVisible(M));var D=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var B=k.scrollerHeight+this.lineHeight,F=!this.$maxLines&&this.$scrollPastEnd?(k.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;A+=F;var j=this.scrollMargin;this.session.setScrollTop(Math.max(-j.top,Math.min(this.scrollTop,A-k.scrollerHeight+j.bottom))),this.session.setScrollLeft(Math.max(-j.left,Math.min(this.scrollLeft,C+2*this.$padding-k.scrollerWidth+j.right)));var Z=!$&&(this.$vScrollBarAlwaysVisible||k.scrollerHeight-A+F<0||this.scrollTop>j.top),Q=D!==Z;Q&&(this.$vScroll=Z,this.scrollBarV.setVisible(Z));var W=this.scrollTop%this.lineHeight,V=Math.ceil(B/this.lineHeight)-1,G=Math.max(0,Math.round((this.scrollTop-W)/this.lineHeight)),U=G+V,ee,Y,O=this.lineHeight;G=T.screenToDocumentRow(G,0);var L=T.getFoldLine(G);L&&(G=L.start.row),ee=T.documentToScreenRow(G,0),Y=T.getRowLength(G)*O,U=Math.min(T.screenToDocumentRow(U,0),T.getLength()-1),B=k.scrollerHeight+T.getRowLength(U)*O+Y,W=this.scrollTop-ee*O;var P=0;return(this.layerConfig.width!=C||I)&&(P=this.CHANGE_H_SCROLL),(I||Q)&&(P|=this.$updateCachedSize(!0,this.gutterWidth,k.width,k.height),this._signal("scrollbarVisibilityChanged"),Q&&(C=this.$getLongestLine())),this.layerConfig={width:C,padding:this.$padding,firstRow:G,firstRowScreen:ee,lastRow:U,lineHeight:O,characterWidth:this.characterWidth,minHeight:B,maxHeight:A,offset:W,gutterOffset:O?Math.max(0,Math.ceil((W+k.height-k.scrollerHeight)/O)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(C-this.$padding),P},x.prototype.$updateLines=function(){if(this.$changedLines){var T=this.$changedLines.firstRow,k=this.$changedLines.lastRow;this.$changedLines=null;var $=this.layerConfig;if(!(T>$.lastRow+1)&&!(k<$.firstRow)){if(k===1/0){this.$showGutter&&this.$gutterLayer.update($),this.$textLayer.update($);return}return this.$textLayer.updateLines($,T,k),!0}}},x.prototype.$getLongestLine=function(){var T=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(T+=1),this.$textLayer&&T>this.$textLayer.MAX_LINE_LENGTH&&(T=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(T*this.characterWidth))},x.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},x.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},x.prototype.addGutterDecoration=function(T,k){this.$gutterLayer.addGutterDecoration(T,k)},x.prototype.removeGutterDecoration=function(T,k){this.$gutterLayer.removeGutterDecoration(T,k)},x.prototype.updateBreakpoints=function(T){this._rows=T,this.$loop.schedule(this.CHANGE_GUTTER)},x.prototype.setAnnotations=function(T){this.$gutterLayer.setAnnotations(T),this.$loop.schedule(this.CHANGE_GUTTER)},x.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},x.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},x.prototype.showCursor=function(){this.$cursorLayer.showCursor()},x.prototype.scrollSelectionIntoView=function(T,k,$){this.scrollCursorIntoView(T,$),this.scrollCursorIntoView(k,$)},x.prototype.scrollCursorIntoView=function(T,k,$){if(this.$size.scrollerHeight!==0){var R=this.$cursorLayer.getPixelPosition(T),A=R.left,C=R.top,M=$&&$.top||0,I=$&&$.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var D=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;D+M>C?(k&&D+M>C+this.lineHeight&&(C-=k*this.$size.scrollerHeight),C===0&&(C=-this.scrollMargin.top),this.session.setScrollTop(C)):D+this.$size.scrollerHeight-I<C+this.lineHeight&&(k&&D+this.$size.scrollerHeight-I<C-this.lineHeight&&(C+=k*this.$size.scrollerHeight),this.session.setScrollTop(C+this.lineHeight+I-this.$size.scrollerHeight));var B=this.scrollLeft,F=2*this.layerConfig.characterWidth;A-F<B?(A-=F,A<this.$padding+F&&(A=-this.scrollMargin.left),this.session.setScrollLeft(A)):(A+=F,B+this.$size.scrollerWidth<A+this.characterWidth?this.session.setScrollLeft(Math.round(A+this.characterWidth-this.$size.scrollerWidth)):B<=this.$padding&&A-B<this.characterWidth&&this.session.setScrollLeft(0))}},x.prototype.getScrollTop=function(){return this.session.getScrollTop()},x.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},x.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},x.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},x.prototype.scrollToRow=function(T){this.session.setScrollTop(T*this.lineHeight)},x.prototype.alignCursor=function(T,k){typeof T=="number"&&(T={row:T,column:0});var $=this.$cursorLayer.getPixelPosition(T),R=this.$size.scrollerHeight-this.lineHeight,A=$.top-R*(k||0);return this.session.setScrollTop(A),A},x.prototype.$calcSteps=function(T,k){var $=0,R=this.STEPS,A=[],C=function(M,I,D){return D*(Math.pow(M-1,3)+1)+I};for($=0;$<R;++$)A.push(C($/this.STEPS,T,k-T));return A},x.prototype.scrollToLine=function(T,k,$,R){var A=this.$cursorLayer.getPixelPosition({row:T,column:0}),C=A.top;k&&(C-=this.$size.scrollerHeight/2);var M=this.scrollTop;this.session.setScrollTop(C),$!==!1&&this.animateScrolling(M,R)},x.prototype.animateScrolling=function(T,k){var $=this.scrollTop;if(!this.$animatedScroll)return;var R=this;if(T==$)return;if(this.$scrollAnimation){var A=this.$scrollAnimation.steps;if(A.length&&(T=A[0],T==$))return}var C=R.$calcSteps(T,$);this.$scrollAnimation={from:T,to:$,steps:C},clearInterval(this.$timer),R.session.setScrollTop(C.shift()),R.session.$scrollTop=$;function M(){R.$timer=clearInterval(R.$timer),R.$scrollAnimation=null,R.$stopAnimation=!1,k&&k()}this.$timer=setInterval(function(){if(R.$stopAnimation){M();return}if(!R.session)return clearInterval(R.$timer);C.length?(R.session.setScrollTop(C.shift()),R.session.$scrollTop=$):$!=null?(R.session.$scrollTop=-1,R.session.setScrollTop($),$=null):M()},10)},x.prototype.scrollToY=function(T){this.scrollTop!==T&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=T)},x.prototype.scrollToX=function(T){this.scrollLeft!==T&&(this.scrollLeft=T),this.$loop.schedule(this.CHANGE_H_SCROLL)},x.prototype.scrollTo=function(T,k){this.session.setScrollTop(k),this.session.setScrollLeft(T)},x.prototype.scrollBy=function(T,k){k&&this.session.setScrollTop(this.session.getScrollTop()+k),T&&this.session.setScrollLeft(this.session.getScrollLeft()+T)},x.prototype.isScrollableBy=function(T,k){if(k<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||k>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||T<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||T>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},x.prototype.pixelToScreenCoordinates=function(T,k){var $;if(this.$hasCssTransforms){$={top:0,left:0};var R=this.$fontMetrics.transformCoordinates([T,k]);T=R[1]-this.gutterWidth-this.margin.left,k=R[0]}else $=this.scroller.getBoundingClientRect();var A=T+this.scrollLeft-$.left-this.$padding,C=A/this.characterWidth,M=Math.floor((k+this.scrollTop-$.top)/this.lineHeight),I=this.$blockCursor?Math.floor(C):Math.round(C);return{row:M,column:I,side:C-I>0?1:-1,offsetX:A}},x.prototype.screenToTextCoordinates=function(T,k){var $;if(this.$hasCssTransforms){$={top:0,left:0};var R=this.$fontMetrics.transformCoordinates([T,k]);T=R[1]-this.gutterWidth-this.margin.left,k=R[0]}else $=this.scroller.getBoundingClientRect();var A=T+this.scrollLeft-$.left-this.$padding,C=A/this.characterWidth,M=this.$blockCursor?Math.floor(C):Math.round(C),I=Math.floor((k+this.scrollTop-$.top)/this.lineHeight);return this.session.screenToDocumentPosition(I,Math.max(M,0),A)},x.prototype.textToScreenCoordinates=function(T,k){var $=this.scroller.getBoundingClientRect(),R=this.session.documentToScreenPosition(T,k),A=this.$padding+(this.session.$bidiHandler.isBidiRow(R.row,T)?this.session.$bidiHandler.getPosLeft(R.column):Math.round(R.column*this.characterWidth)),C=R.row*this.lineHeight;return{pageX:$.left+A-this.scrollLeft,pageY:$.top+C-this.scrollTop}},x.prototype.visualizeFocus=function(){l.addCssClass(this.container,"ace_focus")},x.prototype.visualizeBlur=function(){l.removeCssClass(this.container,"ace_focus")},x.prototype.showComposition=function(T){this.$composition=T,T.cssText||(T.cssText=this.textarea.style.cssText),T.useTextareaForIME==null&&(T.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(l.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):T.markerId=this.session.addMarker(T.markerRange,"ace_composition_marker","text")},x.prototype.setCompositionText=function(T){var k=this.session.selection.cursor;this.addToken(T,"composition_placeholder",k.row,k.column),this.$moveTextAreaToCursor()},x.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),l.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var T=this.session.selection.cursor;this.removeExtraToken(T.row,T.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},x.prototype.setGhostText=function(T,k){var $=this.session.selection.cursor,R=k||{row:$.row,column:$.column};this.removeGhostText();var A=this.$calculateWrappedTextChunks(T,R);this.addToken(A[0].text,"ghost_text",R.row,R.column),this.$ghostText={text:T,position:{row:R.row,column:R.column}};var C=l.createElement("div");if(A.length>1){A.slice(1).forEach(function(j){var Z=l.createElement("div");j.wrapped&&(Z.className="ghost_text_line_wrapped"),Z.appendChild(l.createTextNode(j.text)),C.appendChild(Z)}),this.$ghostTextWidget={el:C,row:R.row,column:R.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var M=this.$cursorLayer.getPixelPosition(R,!0),I=this.container,D=I.getBoundingClientRect().height,B=A.length*this.lineHeight,F=B<D-M.top;if(F)return;B<D?this.scrollBy(0,(A.length-1)*this.lineHeight):this.scrollToRow(R.row)}},x.prototype.$calculateWrappedTextChunks=function(T,k){var $=this.$size.scrollerWidth-this.$padding*2,R=Math.floor($/this.characterWidth)-2;R=R<=0?60:R;for(var A=T.split(/\r?\n/),C=[],M=0;M<A.length;M++){var I=this.session.$getDisplayTokens(A[M],k.column),D=this.session.$computeWrapSplits(I,R,this.session.$tabSize);if(D.length>0){var B=0;D.push(A[M].length);for(var F=0;F<D.length;F++){var j=A[M].slice(B,D[F]);C.push({text:j,wrapped:!0}),B=D[F]}}else C.push({text:A[M],wrapped:!1})}return C},x.prototype.removeGhostText=function(){if(this.$ghostText){var T=this.$ghostText.position;this.removeExtraToken(T.row,T.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},x.prototype.addToken=function(T,k,$,R){var A=this.session;A.bgTokenizer.lines[$]=null;var C={type:k,value:T},M=A.getTokens($);if(R==null||!M.length)M.push(C);else for(var I=0,D=0;D<M.length;D++){var B=M[D];if(I+=B.value.length,R<=I){var F=B.value.length-(I-R),j=B.value.slice(0,F),Z=B.value.slice(F);M.splice(D,1,{type:B.type,value:j},C,{type:B.type,value:Z});break}}this.updateLines($,$)},x.prototype.removeExtraToken=function(T,k){this.session.bgTokenizer.lines[T]=null,this.updateLines(T,T)},x.prototype.setTheme=function(T,k){var $=this;if(this.$themeId=T,$._dispatchEvent("themeChange",{theme:T}),!T||typeof T=="string"){var R=T||this.$options.theme.initialValue;s.loadModule(["theme",R],A)}else A(T);function A(C){if($.$themeId!=T)return k&&k();if(!C||!C.cssClass)throw new Error("couldn't load module "+T+" or it didn't call define");C.$id&&($.$themeId=C.$id),l.importCssString(C.cssText,C.cssClass,$.container),$.theme&&l.removeCssClass($.container,$.theme.cssClass);var M="padding"in C?C.padding:"padding"in($.theme||{})?4:$.$padding;$.$padding&&M!=$.$padding&&$.setPadding(M),$.$theme=C.cssClass,$.theme=C,l.addCssClass($.container,C.cssClass),l.setCssClass($.container,"ace_dark",C.isDark),$.$size&&($.$size.width=0,$.$updateSizeAsync()),$._dispatchEvent("themeLoaded",{theme:C}),k&&k(),v.isSafari&&$.scroller&&($.scroller.style.background="red",$.scroller.style.background="")}},x.prototype.getTheme=function(){return this.$themeId},x.prototype.setStyle=function(T,k){l.setCssClass(this.container,T,k!==!1)},x.prototype.unsetStyle=function(T){l.removeCssClass(this.container,T)},x.prototype.setCursorStyle=function(T){l.setStyle(this.scroller.style,"cursor",T)},x.prototype.setMouseCursor=function(T){l.setStyle(this.scroller.style,"cursor",T)},x.prototype.attachToShadowRoot=function(){l.importCssString(b,"ace_editor.css",this.container)},x.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},x.prototype.$updateCustomScrollbar=function(T){var k=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,T===!0?(this.scrollBarV=new g(this.container,this),this.scrollBarH=new m(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function($){k.$scrollAnimation||k.session.setScrollTop($.data-k.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function($){k.$scrollAnimation||k.session.setScrollLeft($.data-k.scrollMargin.left)}),this.$scrollDecorator=new _(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new d(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.addEventListener("scroll",function($){k.$scrollAnimation||k.session.setScrollTop($.data-k.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function($){k.$scrollAnimation||k.session.setScrollLeft($.data-k.scrollMargin.left)}))},x.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var T=this;this.$resizeTimer=u.delayedCall(function(){T.destroyed||T.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(k){var $=k[0].contentRect.width,R=k[0].contentRect.height;Math.abs(T.$size.width-$)>1||Math.abs(T.$size.height-R)>1?T.$resizeTimer.delay():T.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},x}();E.prototype.CHANGE_CURSOR=1,E.prototype.CHANGE_MARKER=2,E.prototype.CHANGE_GUTTER=4,E.prototype.CHANGE_SCROLL=8,E.prototype.CHANGE_LINES=16,E.prototype.CHANGE_TEXT=32,E.prototype.CHANGE_SIZE=64,E.prototype.CHANGE_MARKER_BACK=128,E.prototype.CHANGE_MARKER_FRONT=256,E.prototype.CHANGE_FULL=512,E.prototype.CHANGE_H_SCROLL=1024,E.prototype.$changes=0,E.prototype.$padding=null,E.prototype.$frozen=!1,E.prototype.STEPS=8,o.implement(E.prototype,S),s.defineOptions(E.prototype,"renderer",{useResizeObserver:{set:function(x){!x&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):x&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(x){this.$textLayer.setShowInvisibles(x)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(x){typeof x=="number"&&(this.$printMarginColumn=x),this.$showPrintMargin=!!x,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(x){this.$gutter.style.display=x?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(x){this.$gutterLayer.$useSvgGutterIcons=x},initialValue:!1},showFoldedAnnotations:{set:function(x){this.$gutterLayer.$showFoldedAnnotations=x},initialValue:!1},fadeFoldWidgets:{set:function(x){l.setCssClass(this.$gutter,"ace_fade-fold-widgets",x)},initialValue:!1},showFoldWidgets:{set:function(x){this.$gutterLayer.setShowFoldWidgets(x),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(x){this.$textLayer.setDisplayIndentGuides(x)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(x){this.$textLayer.setHighlightIndentGuides(x)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(x){this.$gutterLayer.setHighlightGutterLine(x),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(x){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(x){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(x){typeof x=="number"&&(x=x+"px"),this.container.style.fontSize=x,this.updateFontSize()},initialValue:12},fontFamily:{set:function(x){this.container.style.fontFamily=x,this.updateFontSize()}},maxLines:{set:function(x){this.updateFull()}},minLines:{set:function(x){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(x){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(x){x=+x||0,this.$scrollPastEnd!=x&&(this.$scrollPastEnd=x,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(x){this.$gutterLayer.$fixedWidth=!!x,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(x){this.$updateCustomScrollbar(x)},initialValue:!1},theme:{set:function(x){this.setTheme(x)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!v.isMobile&&!v.isIE}}),i.VirtualRenderer=E}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(n,i,r){var o=n("../lib/oop"),l=n("../lib/net"),u=n("../lib/event_emitter").EventEmitter,s=n("../config");function p(f){var d="importScripts('"+l.qualifyURL(f)+"');";try{return new Blob([d],{type:"application/javascript"})}catch{var m=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,g=new m;return g.append(d),g.getBlob("application/javascript")}}function a(f){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var d=p(f),m=window.URL||window.webkitURL,g=m.createObjectURL(d);return new Worker(g)}return new Worker(f)}var c=function(f){f.postMessage||(f=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=f,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){o.implement(this,u),this.$createWorkerFromOldConfig=function(f,d,m,g,y){if(n.nameToUrl&&!n.toUrl&&(n.toUrl=n.nameToUrl),s.get("packaged")||!n.toUrl)g=g||s.moduleUrl(d,"worker");else{var w=this.$normalizePath;g=g||w(n.toUrl("ace/worker/worker.js",null,"_"));var S={};f.forEach(function(b){S[b]=w(n.toUrl(b,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=a(g),y&&this.send("importScripts",y),this.$worker.postMessage({init:!0,tlns:S,module:d,classname:m}),this.$worker},this.onMessage=function(f){var d=f.data;switch(d.type){case"event":this._signal(d.name,{data:d.data});break;case"call":var m=this.callbacks[d.id];m&&(m(d.data),delete this.callbacks[d.id]);break;case"error":this.reportError(d.data);break;case"log":window.console&&console.log&&console.log.apply(console,d.data);break}},this.reportError=function(f){window.console&&console.error&&console.error(f)},this.$normalizePath=function(f){return l.qualifyURL(f)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(f){f.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(f,d){this.$worker.postMessage({command:f,args:d})},this.call=function(f,d,m){if(m){var g=this.callbackId++;this.callbacks[g]=m,d.push(g)}this.send(f,d)},this.emit=function(f,d){try{d.data&&d.data.err&&(d.data.err={message:d.data.err.message,stack:d.data.err.stack,code:d.data.err.code}),this.$worker&&this.$worker.postMessage({event:f,data:{data:d.data}})}catch(m){console.error(m.stack)}},this.attachToDocument=function(f){this.$doc&&this.terminate(),this.$doc=f,this.call("setValue",[f.getValue()]),f.on("change",this.changeListener,!0)},this.changeListener=function(f){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),f.action=="insert"?this.deltaQueue.push(f.start,f.lines):this.deltaQueue.push(f.start,f.end)},this.$sendDeltaQueue=function(){var f=this.deltaQueue;f&&(this.deltaQueue=null,f.length>50&&f.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:f}))}}).call(c.prototype);var h=function(f,d,m){var g=null,y=!1,w=Object.create(u),S=[],b=new c({messageBuffer:S,terminate:function(){},postMessage:function(v){S.push(v),g&&(y?setTimeout(_):_())}});b.setEmitSync=function(v){y=v};var _=function(){var v=S.shift();v.command?g[v.command].apply(g,v.args):v.event&&w._signal(v.event,v.data)};return w.postMessage=function(v){b.onMessage({data:v})},w.callback=function(v,E){this.postMessage({type:"call",id:E,data:v})},w.emit=function(v,E){this.postMessage({type:"event",name:v,data:E})},s.loadModule(["worker",d],function(v){for(g=new v[m](w);S.length;)_()}),b};i.UIWorkerClient=h,i.WorkerClient=c,i.createWorker=a}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(n,i,r){var o=n("./range").Range,l=n("./lib/event_emitter").EventEmitter,u=n("./lib/oop"),s=function(){function p(a,c,h,f,d,m){var g=this;this.length=c,this.session=a,this.doc=a.getDocument(),this.mainClass=d,this.othersClass=m,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=f,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=h;var y=a.getUndoManager().$undoStack||a.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=y.length,this.setup(),a.selection.on("changeCursor",this.$onCursorChange)}return p.prototype.setup=function(){var a=this,c=this.doc,h=this.session;this.selectionBefore=h.selection.toJSON(),h.selection.inMultiSelectMode&&h.selection.toSingleRange(),this.pos=c.createAnchor(this.$pos.row,this.$pos.column);var f=this.pos;f.$insertRight=!0,f.detach(),f.markerId=h.addMarker(new o(f.row,f.column,f.row,f.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(d){var m=c.createAnchor(d.row,d.column);m.$insertRight=!0,m.detach(),a.others.push(m)}),h.setUndoSelect(!1)},p.prototype.showOtherMarkers=function(){if(!this.othersActive){var a=this.session,c=this;this.othersActive=!0,this.others.forEach(function(h){h.markerId=a.addMarker(new o(h.row,h.column,h.row,h.column+c.length),c.othersClass,null,!1)})}},p.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var a=0;a<this.others.length;a++)this.session.removeMarker(this.others[a].markerId)}},p.prototype.onUpdate=function(a){if(this.$updating)return this.updateAnchors(a);var c=a;if(c.start.row===c.end.row&&c.start.row===this.pos.row){this.$updating=!0;var h=a.action==="insert"?c.end.column-c.start.column:c.start.column-c.end.column,f=c.start.column>=this.pos.column&&c.start.column<=this.pos.column+this.length+1,d=c.start.column-this.pos.column;if(this.updateAnchors(a),f&&(this.length+=h),f&&!this.session.$fromUndo){if(a.action==="insert")for(var m=this.others.length-1;m>=0;m--){var g=this.others[m],y={row:g.row,column:g.column+d};this.doc.insertMergedLines(y,a.lines)}else if(a.action==="remove")for(var m=this.others.length-1;m>=0;m--){var g=this.others[m],y={row:g.row,column:g.column+d};this.doc.remove(new o(y.row,y.column,y.row,y.column-h))}}this.$updating=!1,this.updateMarkers()}},p.prototype.updateAnchors=function(a){this.pos.onChange(a);for(var c=this.others.length;c--;)this.others[c].onChange(a);this.updateMarkers()},p.prototype.updateMarkers=function(){if(!this.$updating){var a=this,c=this.session,h=function(d,m){c.removeMarker(d.markerId),d.markerId=c.addMarker(new o(d.row,d.column,d.row,d.column+a.length),m,null,!1)};h(this.pos,this.mainClass);for(var f=this.others.length;f--;)h(this.others[f],this.othersClass)}},p.prototype.onCursorChange=function(a){if(!(this.$updating||!this.session)){var c=this.session.selection.getCursor();c.row===this.pos.row&&c.column>=this.pos.column&&c.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",a)):(this.hideOtherMarkers(),this._emit("cursorLeave",a))}},p.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},p.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var a=this.session.getUndoManager(),c=(a.$undoStack||a.$undostack).length-this.$undoStackDepth,h=0;h<c;h++)a.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},p}();u.implement(s.prototype,l),i.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(n,i,r){var o=n("../lib/event"),l=n("../lib/useragent");function u(p,a){return p.row==a.row&&p.column==a.column}function s(p){var a=p.domEvent,c=a.altKey,h=a.shiftKey,f=a.ctrlKey,d=p.getAccelKey(),m=p.getButton();if(f&&l.isMac&&(m=a.button),p.editor.inMultiSelectMode&&m==2){p.editor.textInput.onContextMenu(p.domEvent);return}if(!f&&!c&&!d){m===0&&p.editor.inMultiSelectMode&&p.editor.exitMultiSelectMode();return}if(m===0){var g=p.editor,y=g.selection,w=g.inMultiSelectMode,S=p.getDocumentPosition(),b=y.getCursor(),_=p.inSelection()||y.isEmpty()&&u(S,b),v=p.x,E=p.y,x=function(Z){v=Z.clientX,E=Z.clientY},T=g.session,k=g.renderer.pixelToScreenCoordinates(v,E),$=k,R;if(g.$mouseHandler.$enableJumpToDef)f&&c||d&&c?R=h?"block":"add":c&&g.$blockSelectEnabled&&(R="block");else if(d&&!c){if(R="add",!w&&h)return}else c&&g.$blockSelectEnabled&&(R="block");if(R&&l.isMac&&a.ctrlKey&&g.$mouseHandler.cancelContextMenu(),R=="add"){if(!w&&_)return;if(!w){var A=y.toOrientedRange();g.addSelectionMarker(A)}var C=y.rangeList.rangeAtPoint(S);g.inVirtualSelectionMode=!0,h&&(C=null,A=y.ranges[0]||A,g.removeSelectionMarker(A)),g.once("mouseup",function(){var Z=y.toOrientedRange();C&&Z.isEmpty()&&u(C.cursor,Z.cursor)?y.substractPoint(Z.cursor):(h?y.substractPoint(A.cursor):A&&(g.removeSelectionMarker(A),y.addRange(A)),y.addRange(Z)),g.inVirtualSelectionMode=!1})}else if(R=="block"){p.stop(),g.inVirtualSelectionMode=!0;var M,I=[],D=function(){var Z=g.renderer.pixelToScreenCoordinates(v,E),Q=T.screenToDocumentPosition(Z.row,Z.column,Z.offsetX);u($,Z)&&u(Q,y.lead)||($=Z,g.selection.moveToPosition(Q),g.renderer.scrollCursorIntoView(),g.removeSelectionMarkers(I),I=y.rectangularRangeBlock($,k),g.$mouseHandler.$clickSelection&&I.length==1&&I[0].isEmpty()&&(I[0]=g.$mouseHandler.$clickSelection.clone()),I.forEach(g.addSelectionMarker,g),g.updateSelectionMarkers())};w&&!d?y.toSingleRange():!w&&d&&(M=y.toOrientedRange(),g.addSelectionMarker(M)),h?k=T.documentToScreenPosition(y.lead):y.moveToPosition(S),$={row:-1,column:-1};var B=function(Z){D(),clearInterval(j),g.removeSelectionMarkers(I),I.length||(I=[y.toOrientedRange()]),M&&(g.removeSelectionMarker(M),y.toSingleRange(M));for(var Q=0;Q<I.length;Q++)y.addRange(I[Q]);g.inVirtualSelectionMode=!1,g.$mouseHandler.$clickSelection=null},F=D;o.capture(g.container,x,B);var j=setInterval(function(){F()},20);return p.preventDefault()}}}i.onMouseDown=s}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(n,i,r){i.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(l){l.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(l){l.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(l){l.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(l){l.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(l){l.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(l){l.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(l){l.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(l){l.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(l){l.multiSelect.rangeCount>1?l.multiSelect.joinSelections():l.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(l){l.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(l){l.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(l){l.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],i.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(l){l.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(l){return l&&l.inMultiSelectMode}}];var o=n("../keyboard/hash_handler").HashHandler;i.keyboardHandler=new o(i.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(n,i,r){var o=n("./range_list").RangeList,l=n("./range").Range,u=n("./selection").Selection,s=n("./mouse/multi_select_handler").onMouseDown,p=n("./lib/event"),a=n("./lib/lang"),c=n("./commands/multi_select_commands");i.commands=c.defaultCommands.concat(c.multiSelectCommands);var h=n("./search").Search,f=new h;function d(b,_,v){return f.$options.wrap=!0,f.$options.needle=_,f.$options.backwards=v==-1,f.find(b)}var m=n("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(b,_){if(b){if(!this.inMultiSelectMode&&this.rangeCount===0){var v=this.toOrientedRange();if(this.rangeList.add(v),this.rangeList.add(b),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),_||this.fromOrientedRange(b);this.rangeList.removeAll(),this.rangeList.add(v),this.$onAddRange(v)}b.cursor||(b.cursor=b.end);var E=this.rangeList.add(b);return this.$onAddRange(b),E.length&&this.$onRemoveRange(E),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),_||this.fromOrientedRange(b)}},this.toSingleRange=function(b){b=b||this.ranges[0];var _=this.rangeList.removeAll();_.length&&this.$onRemoveRange(_),b&&this.fromOrientedRange(b)},this.substractPoint=function(b){var _=this.rangeList.substractPoint(b);if(_)return this.$onRemoveRange(_),_[0]},this.mergeOverlappingRanges=function(){var b=this.rangeList.merge();b.length&&this.$onRemoveRange(b)},this.$onAddRange=function(b){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(b),this._signal("addRange",{range:b})},this.$onRemoveRange=function(b){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var _=this.rangeList.ranges.pop();b.push(_),this.rangeCount=0}for(var v=b.length;v--;){var E=this.ranges.indexOf(b[v]);this.ranges.splice(E,1)}this._signal("removeRange",{ranges:b}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),_=_||this.ranges[0],_&&!_.isEqual(this.getRange())&&this.fromOrientedRange(_)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new o,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var b=this.ranges.length?this.ranges:[this.getRange()],_=[],v=0;v<b.length;v++){var E=b[v],x=E.start.row,T=E.end.row;if(x===T)_.push(E.clone());else{for(_.push(new l(x,E.start.column,x,this.session.getLine(x).length));++x<T;)_.push(this.getLineRange(x,!0));_.push(new l(T,0,T,E.end.column))}v==0&&!this.isBackwards()&&(_=_.reverse())}this.toSingleRange();for(var v=_.length;v--;)this.addRange(_[v])},this.joinSelections=function(){var b=this.rangeList.ranges,_=b[b.length-1],v=l.fromPoints(b[0].start,_.end);this.toSingleRange(),this.setSelectionRange(v,_.cursor==_.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var b=this.rangeList.ranges,_=b[b.length-1],v=l.fromPoints(b[0].start,_.end);this.toSingleRange(),this.setSelectionRange(v,_.cursor==_.start)}else{var E=this.session.documentToScreenPosition(this.cursor),x=this.session.documentToScreenPosition(this.anchor),T=this.rectangularRangeBlock(E,x);T.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(b,_,v){var E=[],x=b.column<_.column;if(x)var T=b.column,k=_.column,$=b.offsetX,R=_.offsetX;else var T=_.column,k=b.column,$=_.offsetX,R=b.offsetX;var A=b.row<_.row;if(A)var C=b.row,M=_.row;else var C=_.row,M=b.row;T<0&&(T=0),C<0&&(C=0),C==M&&(v=!0);for(var I,D=C;D<=M;D++){var B=l.fromPoints(this.session.screenToDocumentPosition(D,T,$),this.session.screenToDocumentPosition(D,k,R));if(B.isEmpty()){if(I&&y(B.end,I))break;I=B.end}B.cursor=x?B.start:B.end,E.push(B)}if(A&&E.reverse(),!v){for(var F=E.length-1;E[F].isEmpty()&&F>0;)F--;if(F>0)for(var j=0;E[j].isEmpty();)j++;for(var Z=F;Z>=j;Z--)E[Z].isEmpty()&&E.splice(Z,1)}return E}}).call(u.prototype);var g=n("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(b){b.cursor||(b.cursor=b.end);var _=this.getSelectionStyle();return b.marker=this.session.addMarker(b,"ace_selection",_),this.session.$selectionMarkers.push(b),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,b},this.removeSelectionMarker=function(b){if(b.marker){this.session.removeMarker(b.marker);var _=this.session.$selectionMarkers.indexOf(b);_!=-1&&this.session.$selectionMarkers.splice(_,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(b){for(var _=this.session.$selectionMarkers,v=b.length;v--;){var E=b[v];if(E.marker){this.session.removeMarker(E.marker);var x=_.indexOf(E);x!=-1&&_.splice(x,1)}}this.session.selectionMarkerCount=_.length},this.$onAddRange=function(b){this.addSelectionMarker(b.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(b){this.removeSelectionMarkers(b.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(b){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(b){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(b){var _=b.command,v=b.editor;if(v.multiSelect){if(_.multiSelectAction)_.multiSelectAction=="forEach"?E=v.forEachSelection(_,b.args):_.multiSelectAction=="forEachLine"?E=v.forEachSelection(_,b.args,!0):_.multiSelectAction=="single"?(v.exitMultiSelectMode(),E=_.exec(v,b.args||{})):E=_.multiSelectAction(v,b.args||{});else{var E=_.exec(v,b.args||{});v.multiSelect.addRange(v.multiSelect.toOrientedRange()),v.multiSelect.mergeOverlappingRanges()}return E}},this.forEachSelection=function(b,_,v){if(!this.inVirtualSelectionMode){var E=v&&v.keepOrder,x=v==!0||v&&v.$byLines,T=this.session,k=this.selection,$=k.rangeList,R=(E?k:$).ranges,A;if(!R.length)return b.exec?b.exec(this,_||{}):b(this,_||{});var C=k._eventRegistry;k._eventRegistry={};var M=new u(T);this.inVirtualSelectionMode=!0;for(var I=R.length;I--;){if(x)for(;I>0&&R[I].start.row==R[I-1].end.row;)I--;M.fromOrientedRange(R[I]),M.index=I,this.selection=T.selection=M;var D=b.exec?b.exec(this,_||{}):b(this,_||{});!A&&D!==void 0&&(A=D),M.toOrientedRange(R[I])}M.detach(),this.selection=T.selection=k,this.inVirtualSelectionMode=!1,k._eventRegistry=C,k.mergeOverlappingRanges(),k.ranges[0]&&k.fromOrientedRange(k.ranges[0]);var B=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),B&&B.from==B.to&&this.renderer.animateScrolling(B.from),A}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var b="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var _=this.multiSelect.rangeList.ranges,v=[],E=0;E<_.length;E++)v.push(this.session.getTextRange(_[E]));var x=this.session.getDocument().getNewLineCharacter();b=v.join(x),b.length==(v.length-1)*x.length&&(b="")}else this.selection.isEmpty()||(b=this.session.getTextRange(this.getSelectionRange()));return b},this.$checkMultiselectChange=function(b,_){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var v=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&_==this.multiSelect.anchor)return;var E=_==this.multiSelect.anchor?v.cursor==v.start?v.end:v.start:v.cursor;E.row!=_.row||this.session.$clipPositionToDocument(E.row,E.column).column!=_.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(b,_,v){if(_=_||{},_.needle=b||_.needle,_.needle==null){var E=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();_.needle=this.session.getTextRange(E)}this.$search.set(_);var x=this.$search.findAll(this.session);if(!x.length)return 0;var T=this.multiSelect;v||T.toSingleRange(x[0]);for(var k=x.length;k--;)T.addRange(x[k],!0);return E&&T.rangeList.rangeAtPoint(E.start)&&T.addRange(E,!0),x.length},this.selectMoreLines=function(b,_){var v=this.selection.toOrientedRange(),E=v.cursor==v.end,x=this.session.documentToScreenPosition(v.cursor);this.selection.$desiredColumn&&(x.column=this.selection.$desiredColumn);var T=this.session.screenToDocumentPosition(x.row+b,x.column);if(v.isEmpty())var $=T;else var k=this.session.documentToScreenPosition(E?v.end:v.start),$=this.session.screenToDocumentPosition(k.row+b,k.column);if(E){var R=l.fromPoints(T,$);R.cursor=R.start}else{var R=l.fromPoints($,T);R.cursor=R.end}if(R.desiredColumn=x.column,!this.selection.inMultiSelectMode)this.selection.addRange(v);else if(_)var A=v.cursor;this.selection.addRange(R),A&&this.selection.substractPoint(A)},this.transposeSelections=function(b){for(var _=this.session,v=_.multiSelect,E=v.ranges,x=E.length;x--;){var T=E[x];if(T.isEmpty()){var k=_.getWordRange(T.start.row,T.start.column);T.start.row=k.start.row,T.start.column=k.start.column,T.end.row=k.end.row,T.end.column=k.end.column}}v.mergeOverlappingRanges();for(var $=[],x=E.length;x--;){var T=E[x];$.unshift(_.getTextRange(T))}b<0?$.unshift($.pop()):$.push($.shift());for(var x=E.length;x--;){var T=E[x],R=T.clone();_.replace(T,$[x]),T.start.row=R.start.row,T.start.column=R.start.column}v.fromOrientedRange(v.ranges[0])},this.selectMore=function(b,_,v){var E=this.session,x=E.multiSelect,T=x.toOrientedRange();if(!(T.isEmpty()&&(T=E.getWordRange(T.start.row,T.start.column),T.cursor=b==-1?T.start:T.end,this.multiSelect.addRange(T),v))){var k=E.getTextRange(T),$=d(E,k,b);$&&($.cursor=b==-1?$.start:$.end,this.session.unfold($),this.multiSelect.addRange($),this.renderer.scrollCursorIntoView(null,.5)),_&&this.multiSelect.substractPoint(T.cursor)}},this.alignCursors=function(){var b=this.session,_=b.multiSelect,v=_.ranges,E=-1,x=v.filter(function(F){if(F.cursor.row==E)return!0;E=F.cursor.row});if(!v.length||x.length==v.length-1){var T=this.selection.getRange(),k=T.start.row,$=T.end.row,R=k==$;if(R){var A=this.session.getLength(),C;do C=this.session.getLine($);while(/[=:]/.test(C)&&++$<A);do C=this.session.getLine(k);while(/[=:]/.test(C)&&--k>0);k<0&&(k=0),$>=A&&($=A-1)}var M=this.session.removeFullLines(k,$);M=this.$reAlignText(M,R),this.session.insert({row:k,column:0},M.join(`
`)+`
`),R||(T.start.column=0,T.end.column=M[M.length-1].length),this.selection.setRange(T)}else{x.forEach(function(F){_.substractPoint(F.cursor)});var I=0,D=1/0,B=v.map(function(F){var j=F.cursor,Z=b.getLine(j.row),Q=Z.substr(j.column).search(/\S/g);return Q==-1&&(Q=0),j.column>I&&(I=j.column),Q<D&&(D=Q),Q});v.forEach(function(F,j){var Z=F.cursor,Q=I-Z.column,W=B[j]-D;Q>W?b.insert(Z,a.stringRepeat(" ",Q-W)):b.remove(new l(Z.row,Z.column,Z.row,Z.column-Q+W)),F.start.column=F.end.column=I,F.start.row=F.end.row=Z.row,F.cursor=F.end}),_.fromOrientedRange(v[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(b,_){var v=!0,E=!0,x,T,k;return b.map(function(M){var I=M.match(/(\s*)(.*?)(\s*)([=:].*)/);return I?x==null?(x=I[1].length,T=I[2].length,k=I[3].length,I):(x+T+k!=I[1].length+I[2].length+I[3].length&&(E=!1),x!=I[1].length&&(v=!1),x>I[1].length&&(x=I[1].length),T<I[2].length&&(T=I[2].length),k>I[3].length&&(k=I[3].length),I):[M]}).map(_?R:v?E?A:R:C);function $(M){return a.stringRepeat(" ",M)}function R(M){return M[2]?$(x)+M[2]+$(T-M[2].length+k)+M[4].replace(/^([=:])\s+/,"$1 "):M[0]}function A(M){return M[2]?$(x+T-M[2].length)+M[2]+$(k)+M[4].replace(/^([=:])\s+/,"$1 "):M[0]}function C(M){return M[2]?$(x)+M[2]+$(k)+M[4].replace(/^([=:])\s+/,"$1 "):M[0]}}}).call(g.prototype);function y(b,_){return b.row==_.row&&b.column==_.column}i.onSessionChange=function(b){var _=b.session;_&&!_.multiSelect&&(_.$selectionMarkers=[],_.selection.$initRangeList(),_.multiSelect=_.selection),this.multiSelect=_&&_.multiSelect;var v=b.oldSession;v&&(v.multiSelect.off("addRange",this.$onAddRange),v.multiSelect.off("removeRange",this.$onRemoveRange),v.multiSelect.off("multiSelect",this.$onMultiSelect),v.multiSelect.off("singleSelect",this.$onSingleSelect),v.multiSelect.lead.off("change",this.$checkMultiselectChange),v.multiSelect.anchor.off("change",this.$checkMultiselectChange)),_&&(_.multiSelect.on("addRange",this.$onAddRange),_.multiSelect.on("removeRange",this.$onRemoveRange),_.multiSelect.on("multiSelect",this.$onMultiSelect),_.multiSelect.on("singleSelect",this.$onSingleSelect),_.multiSelect.lead.on("change",this.$checkMultiselectChange),_.multiSelect.anchor.on("change",this.$checkMultiselectChange)),_&&this.inMultiSelectMode!=_.selection.inMultiSelectMode&&(_.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function w(b){b.$multiselectOnSessionChange||(b.$onAddRange=b.$onAddRange.bind(b),b.$onRemoveRange=b.$onRemoveRange.bind(b),b.$onMultiSelect=b.$onMultiSelect.bind(b),b.$onSingleSelect=b.$onSingleSelect.bind(b),b.$multiselectOnSessionChange=i.onSessionChange.bind(b),b.$checkMultiselectChange=b.$checkMultiselectChange.bind(b),b.$multiselectOnSessionChange(b),b.on("changeSession",b.$multiselectOnSessionChange),b.on("mousedown",s),b.commands.addCommands(c.defaultCommands),S(b))}function S(b){if(!b.textInput)return;var _=b.textInput.getElement(),v=!1;p.addListener(_,"keydown",function(x){var T=x.keyCode==18&&!(x.ctrlKey||x.shiftKey||x.metaKey);b.$blockSelectEnabled&&T?v||(b.renderer.setMouseCursor("crosshair"),v=!0):v&&E()},b),p.addListener(_,"keyup",E,b),p.addListener(_,"blur",E,b);function E(x){v&&(b.renderer.setMouseCursor(""),v=!1)}}i.MultiSelect=w,n("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(b){w(this),b?this.on("mousedown",s):this.off("mousedown",s)},value:!0},enableBlockSelect:{set:function(b){this.$blockSelectEnabled=b},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(n,i,r){var o=n("../../range").Range,l=i.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(u,s,p){var a=u.getLine(p);return this.foldingStartMarker.test(a)?"start":s=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(a)?"end":""},this.getFoldWidgetRange=function(u,s,p){return null},this.indentationBlock=function(u,s,p){var a=/\S/,c=u.getLine(s),h=c.search(a);if(h!=-1){for(var f=p||c.length,d=u.getLength(),m=s,g=s;++s<d;){var y=u.getLine(s).search(a);if(y!=-1){if(y<=h){var w=u.getTokenAt(s,0);if(!w||w.type!=="string")break}g=s}}if(g>m){var S=u.getLine(g).length;return new o(m,f,g,S)}}},this.openingBracketBlock=function(u,s,p,a,c){var h={row:p,column:a+1},f=u.$findClosingBracket(s,h,c);if(f){var d=u.foldWidgets[f.row];return d==null&&(d=u.getFoldWidget(f.row)),d=="start"&&f.row>h.row&&(f.row--,f.column=u.getLine(f.row).length),o.fromPoints(h,f)}},this.closingBracketBlock=function(u,s,p,a,c){var h={row:p,column:a},f=u.$findOpeningBracket(s,h);if(f)return f.column++,h.column--,o.fromPoints(f,h)}}).call(l.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(n,i,r){var o=n("../line_widgets").LineWidgets,l=n("../lib/dom"),u=n("../range").Range,s=n("../config").nls;function p(c,h,f){for(var d=0,m=c.length-1;d<=m;){var g=d+m>>1,y=f(h,c[g]);if(y>0)d=g+1;else if(y<0)m=g-1;else return g}return-(d+1)}function a(c,h,f){var d=c.getAnnotations().sort(u.comparePoints);if(d.length){var m=p(d,{row:h,column:-1},u.comparePoints);m<0&&(m=-m-1),m>=d.length?m=f>0?0:d.length-1:m===0&&f<0&&(m=d.length-1);var g=d[m];if(!(!g||!f)){if(g.row===h){do g=d[m+=f];while(g&&g.row===h);if(!g)return d.slice()}var y=[];h=g.row;do y[f<0?"unshift":"push"](g),g=d[m+=f];while(g&&g.row==h);return y.length&&y}}}i.showErrorMarker=function(c,h){var f=c.session;f.widgetManager||(f.widgetManager=new o(f),f.widgetManager.attach(c));var d=c.getCursorPosition(),m=d.row,g=f.widgetManager.getWidgetsAtRow(m).filter(function(T){return T.type=="errorMarker"})[0];g?g.destroy():m-=h;var y=a(f,m,h),w;if(y){var S=y[0];d.column=(S.pos&&typeof S.column!="number"?S.pos.sc:S.column)||0,d.row=S.row,w=c.renderer.$gutterLayer.$annotations[d.row]}else{if(g)return;w={text:[s("error-marker.good-state","Looks good!")],className:"ace_ok"}}c.session.unfold(d.row),c.selection.moveToPosition(d);var b={row:d.row,fixedWidth:!0,coverGutter:!0,el:l.createElement("div"),type:"errorMarker"},_=b.el.appendChild(l.createElement("div")),v=b.el.appendChild(l.createElement("div"));v.className="error_widget_arrow "+w.className;var E=c.renderer.$cursorLayer.getPixelPosition(d).left;v.style.left=E+c.renderer.gutterWidth-5+"px",b.el.className="error_widget_wrapper",_.className="error_widget "+w.className,_.innerHTML=w.text.join("<br>"),_.appendChild(l.createElement("div"));var x=function(T,k,$){if(k===0&&($==="esc"||$==="return"))return b.destroy(),{command:"null"}};b.destroy=function(){c.$mouseHandler.isMousePressed||(c.keyBinding.removeKeyboardHandler(x),f.widgetManager.removeLineWidget(b),c.off("changeSelection",b.destroy),c.off("changeSession",b.destroy),c.off("mouseup",b.destroy),c.off("change",b.destroy))},c.keyBinding.addKeyboardHandler(x),c.on("changeSelection",b.destroy),c.on("changeSession",b.destroy),c.on("mouseup",b.destroy),c.on("change",b.destroy),c.session.widgetManager.addLineWidget(b),b.el.onmousedown=c.focus.bind(c),c.renderer.scrollCursorIntoView(null,.5,{bottom:b.el.offsetHeight})},l.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(n,i,r){n("./loader_build")(i);var o=n("./lib/dom"),l=n("./range").Range,u=n("./editor").Editor,s=n("./edit_session").EditSession,p=n("./undomanager").UndoManager,a=n("./virtual_renderer").VirtualRenderer;n("./worker/worker_client"),n("./keyboard/hash_handler"),n("./placeholder"),n("./multi_select"),n("./mode/folding/fold_mode"),n("./theme/textmate"),n("./ext/error_marker"),i.config=n("./config"),i.edit=function(c,h){if(typeof c=="string"){var f=c;if(c=document.getElementById(f),!c)throw new Error("ace.edit can't find div #"+f)}if(c&&c.env&&c.env.editor instanceof u)return c.env.editor;var d="";if(c&&/input|textarea/i.test(c.tagName)){var m=c;d=m.value,c=o.createElement("pre"),m.parentNode.replaceChild(c,m)}else c&&(d=c.textContent,c.innerHTML="");var g=i.createEditSession(d),y=new u(new a(c),g,h),w={document:g,editor:y,onResize:y.resize.bind(y,null)};return m&&(w.textarea=m),y.on("destroy",function(){w.editor.container.env=null}),y.container.env=y.env=w,y},i.createEditSession=function(c,h){var f=new s(c,h);return f.setUndoManager(new p),f},i.Range=l,i.Editor=u,i.EditSession=s,i.UndoManager=p,i.VirtualRenderer=a,i.version=i.config.version}),function(){ace.require(["ace/ace"],function(n){n&&(n.config.init(!0),n.define=ace.define);var i=function(){return this}();!i&&typeof window<"u"&&(i=window),!i&&typeof self<"u"&&(i=self),i.ace||(i.ace=n);for(var r in n)n.hasOwnProperty(r)&&(i.ace[r]=n[r]);i.ace.default=i.ace,e&&(e.exports=i.ace)})}()})(Q0);var BD=Q0.exports;const Tt=wp(BD),sv=["blur","input","change","changeSelectionStyle","changeSession","copy","focus","paste"],FD=kt({name:"VAceEditor",props:{value:{type:String,required:!0},lang:{type:String,default:"text"},theme:{type:String,default:"chrome"},options:Object,placeholder:String,readonly:Boolean,wrap:Boolean,printMargin:{type:[Boolean,Number],default:!0},minLines:Number,maxLines:Number},emits:["update:value","init",...sv],render(){return r_("div")},mounted(){const e=this._editor=o_(Tt.edit(this.$el,{placeholder:this.placeholder,readOnly:this.readonly,value:this.value,mode:"ace/mode/"+this.lang,theme:"ace/theme/"+this.theme,wrap:this.wrap,printMargin:this.printMargin,useWorker:!1,minLines:this.minLines,maxLines:this.maxLines,...this.options}));this._contentBackup=this.value,this._isSettingContent=!1,e.on("change",()=>{if(this._isSettingContent)return;const t=e.getValue();this._contentBackup=t,this.$emit("update:value",t)}),sv.forEach(t=>{const n="on"+s_(t);typeof this.$.vnode.props[n]=="function"&&e.on(t,this.$emit.bind(this,t))}),this._ro=new d_(()=>e.resize()),this._ro.observe(this.$el),this.$emit("init",e)},beforeUnmount(){var e,t;(e=this._ro)===null||e===void 0||e.disconnect(),(t=this._editor)===null||t===void 0||t.destroy()},methods:{focus(){this._editor.focus()},blur(){this._editor.blur()},selectAll(){this._editor.selectAll()},getAceInstance(){return this._editor}},watch:{value(e){if(this._contentBackup!==e){try{this._isSettingContent=!0,this._editor.setValue(e,1)}finally{this._isSettingContent=!1}this._contentBackup=e}},theme(e){this._editor.setTheme("ace/theme/"+e)},options(e){this._editor.setOptions(e)},readonly(e){this._editor.setReadOnly(e)},placeholder(e){this._editor.setOption("placeholder",e)},wrap(e){this._editor.setWrapBehavioursEnabled(e)},printMargin(e){this._editor.setOption("printMargin",e)},lang(e){this._editor.setOption("mode","ace/mode/"+e)},minLines(e){this._editor.setOption("minLines",e)},maxLines(e){this._editor.setOption("maxLines",e)}}}),WD="data:application/javascript;base64,YWNlLmRlZmluZSgiYWNlL3RoZW1lL2dpdGh1Yi1jc3MiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXttb2R1bGUuZXhwb3J0cyA9ICIvKiBDU1Mgc3R5bGUgY29udGVudCBmcm9tIGdpdGh1YidzIGRlZmF1bHQgcHlnbWVudHMgaGlnaGxpZ2h0ZXIgdGVtcGxhdGUuXG4gICBDdXJzb3IgYW5kIHNlbGVjdGlvbiBzdHlsZXMgZnJvbSB0ZXh0bWF0ZS5jc3MuICovXG4uYWNlLWdpdGh1YiAuYWNlX2d1dHRlciB7XG4gIGJhY2tncm91bmQ6ICNlOGU4ZTg7XG4gIGNvbG9yOiAjQUFBO1xufVxuXG4uYWNlLWdpdGh1YiAge1xuICBiYWNrZ3JvdW5kOiAjZmZmO1xuICBjb2xvcjogIzAwMDtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9rZXl3b3JkIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2Vfc3RyaW5nIHtcbiAgY29sb3I6ICNEMTQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfdmFyaWFibGUuYWNlX2NsYXNzIHtcbiAgY29sb3I6IHRlYWw7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY29uc3RhbnQuYWNlX251bWVyaWMge1xuICBjb2xvcjogIzA5OTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9jb25zdGFudC5hY2VfYnVpbGRpbiB7XG4gIGNvbG9yOiAjMDA4NkIzO1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX3N1cHBvcnQuYWNlX2Z1bmN0aW9uIHtcbiAgY29sb3I6ICMwMDg2QjM7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY29tbWVudCB7XG4gIGNvbG9yOiAjOTk4O1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfdmFyaWFibGUuYWNlX2xhbmd1YWdlICB7XG4gIGNvbG9yOiAjMDA4NkIzO1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX3BhcmVuIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfYm9vbGVhbiB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX3N0cmluZy5hY2VfcmVnZXhwIHtcbiAgY29sb3I6ICMwMDk5MjY7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfdmFyaWFibGUuYWNlX2luc3RhbmNlIHtcbiAgY29sb3I6IHRlYWw7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY29uc3RhbnQuYWNlX2xhbmd1YWdlIHtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfY3Vyc29yIHtcbiAgY29sb3I6IGJsYWNrO1xufVxuXG4uYWNlLWdpdGh1Yi5hY2VfZm9jdXMgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9hY3RpdmUtbGluZSB7XG4gIGJhY2tncm91bmQ6IHJnYigyNTUsIDI1NSwgMjA0KTtcbn1cbi5hY2UtZ2l0aHViIC5hY2VfbWFya2VyLWxheWVyIC5hY2VfYWN0aXZlLWxpbmUge1xuICBiYWNrZ3JvdW5kOiByZ2IoMjQ1LCAyNDUsIDI0NSk7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc2VsZWN0aW9uIHtcbiAgYmFja2dyb3VuZDogcmdiKDE4MSwgMjEzLCAyNTUpO1xufVxuXG4uYWNlLWdpdGh1Yi5hY2VfbXVsdGlzZWxlY3QgLmFjZV9zZWxlY3Rpb24uYWNlX3N0YXJ0IHtcbiAgYm94LXNoYWRvdzogMCAwIDNweCAwcHggd2hpdGU7XG59XG4vKiBib2xkIGtleXdvcmRzIGNhdXNlIGN1cnNvciBpc3N1ZXMgZm9yIHNvbWUgZm9udHMgKi9cbi8qIHRoaXMgZGlzYWJsZXMgYm9sZCBzdHlsZSBmb3IgZWRpdG9yIGFuZCBrZWVwcyBmb3Igc3RhdGljIGhpZ2hsaWdodGVyICovXG4uYWNlLWdpdGh1Yi5hY2Vfbm9ib2xkIC5hY2VfbGluZSA+IHNwYW4ge1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWwgIWltcG9ydGFudDtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGVwIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MiwgMjU1LCAwKTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGFjayB7XG4gIGJhY2tncm91bmQ6IHJnYigxNjQsIDIyOSwgMTAxKTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9icmFja2V0IHtcbiAgbWFyZ2luOiAtMXB4IDAgMCAtMXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMTkyLCAxOTIsIDE5Mik7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfZ3V0dGVyLWFjdGl2ZS1saW5lIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yIDogcmdiYSgwLCAwLCAwLCAwLjA3KTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zZWxlY3RlZC13b3JkIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MCwgMjUwLCAyNTUpO1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMjAwLCAyMDAsIDI1MCk7XG59XG5cbi5hY2UtZ2l0aHViIC5hY2VfaW52aXNpYmxlIHtcbiAgY29sb3I6ICNCRkJGQkZcbn1cblxuLmFjZS1naXRodWIgLmFjZV9wcmludC1tYXJnaW4ge1xuICB3aWR0aDogMXB4O1xuICBiYWNrZ3JvdW5kOiAjZThlOGU4O1xufVxuXG4uYWNlLWdpdGh1YiAuYWNlX2luZGVudC1ndWlkZSB7XG4gIGJhY2tncm91bmQ6IHVybChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQUVBQUFBQ0NBWUFBQUNaZ2JZbkFBQUFFMGxFUVZRSW1XUDQvLy8vZjRiTGx5Ly9Cd0FtVmdkMS93MTEvZ0FBQUFCSlJVNUVya0pnZ2c9PVwiKSByaWdodCByZXBlYXQteTtcbn1cblxuLmFjZS1naXRodWIgLmFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBQVpTVVJCVkhqYVl2ai8vLzkvaGl2S3l2OEJBQUFBLy84REFDTHFCaGJ2aysvZUFBQUFBRWxGVGtTdVFtQ0NcIikgcmlnaHQgcmVwZWF0LXk7XG59XG4iOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvdGhlbWUvZ2l0aHViIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL3RoZW1lL2dpdGh1Yi1jc3MiLCJhY2UvbGliL2RvbSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpe2V4cG9ydHMuaXNEYXJrID0gZmFsc2U7CmV4cG9ydHMuY3NzQ2xhc3MgPSAiYWNlLWdpdGh1YiI7CmV4cG9ydHMuY3NzVGV4dCA9IHJlcXVpcmUoIi4vZ2l0aHViLWNzcyIpOwp2YXIgZG9tID0gcmVxdWlyZSgiLi4vbGliL2RvbSIpOwpkb20uaW1wb3J0Q3NzU3RyaW5nKGV4cG9ydHMuY3NzVGV4dCwgZXhwb3J0cy5jc3NDbGFzcywgZmFsc2UpOwoKfSk7ICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhY2UucmVxdWlyZShbImFjZS90aGVtZS9naXRodWIiXSwgZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiB0eXBlb2YgZXhwb3J0cyA9PSAib2JqZWN0IiAmJiBtb2R1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAg",HD="data:application/javascript;base64,YWNlLmRlZmluZSgiYWNlL3RoZW1lL2Nocm9tZS1jc3MiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiXSwgZnVuY3Rpb24ocmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlKXttb2R1bGUuZXhwb3J0cyA9ICIuYWNlLWNocm9tZSAuYWNlX2d1dHRlciB7XG4gIGJhY2tncm91bmQ6ICNlYmViZWI7XG4gIGNvbG9yOiAjMzMzO1xuICBvdmVyZmxvdyA6IGhpZGRlbjtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9wcmludC1tYXJnaW4ge1xuICB3aWR0aDogMXB4O1xuICBiYWNrZ3JvdW5kOiAjZThlOGU4O1xufVxuXG4uYWNlLWNocm9tZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGRkZGRkY7XG4gIGNvbG9yOiBibGFjaztcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9jdXJzb3Ige1xuICBjb2xvcjogYmxhY2s7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfaW52aXNpYmxlIHtcbiAgY29sb3I6IHJnYigxOTEsIDE5MSwgMTkxKTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9jb25zdGFudC5hY2VfYnVpbGRpbiB7XG4gIGNvbG9yOiByZ2IoODgsIDcyLCAyNDYpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbnN0YW50LmFjZV9sYW5ndWFnZSB7XG4gIGNvbG9yOiByZ2IoODgsIDkyLCAyNDYpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbnN0YW50LmFjZV9saWJyYXJ5IHtcbiAgY29sb3I6IHJnYig2LCAxNTAsIDE0KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9pbnZhbGlkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE1MywgMCwgMCk7XG4gIGNvbG9yOiB3aGl0ZTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9mb2xkIHtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV9mdW5jdGlvbiB7XG4gIGNvbG9yOiByZ2IoNjAsIDc2LCAxMTQpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX3N1cHBvcnQuYWNlX2NvbnN0YW50IHtcbiAgY29sb3I6IHJnYig2LCAxNTAsIDE0KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV90eXBlLFxuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV9jbGFzc1xuLmFjZS1jaHJvbWUgLmFjZV9zdXBwb3J0LmFjZV9vdGhlciB7XG4gIGNvbG9yOiByZ2IoMTA5LCAxMjEsIDIyMik7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfdmFyaWFibGUuYWNlX3BhcmFtZXRlciB7XG4gIGZvbnQtc3R5bGU6aXRhbGljO1xuICBjb2xvcjojRkQ5NzFGO1xufVxuLmFjZS1jaHJvbWUgLmFjZV9rZXl3b3JkLmFjZV9vcGVyYXRvciB7XG4gIGNvbG9yOiByZ2IoMTA0LCAxMTgsIDEzNSk7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfY29tbWVudCB7XG4gIGNvbG9yOiAjMjM2ZTI0O1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbW1lbnQuYWNlX2RvYyB7XG4gIGNvbG9yOiAjMjM2ZTI0O1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2NvbW1lbnQuYWNlX2RvYy5hY2VfdGFnIHtcbiAgY29sb3I6ICMyMzZlMjQ7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfY29uc3RhbnQuYWNlX251bWVyaWMge1xuICBjb2xvcjogcmdiKDAsIDAsIDIwNSk7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfdmFyaWFibGUge1xuICBjb2xvcjogcmdiKDQ5LCAxMzIsIDE0OSk7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfeG1sLXBlIHtcbiAgY29sb3I6IHJnYigxMDQsIDEwNCwgOTEpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2VudGl0eS5hY2VfbmFtZS5hY2VfZnVuY3Rpb24ge1xuICBjb2xvcjogIzAwMDBBMjtcbn1cblxuXG4uYWNlLWNocm9tZSAuYWNlX2hlYWRpbmcge1xuICBjb2xvcjogcmdiKDEyLCA3LCAyNTUpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2xpc3Qge1xuICBjb2xvcjpyZ2IoMTg1LCA2LCAxNDQpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGlvbiB7XG4gIGJhY2tncm91bmQ6IHJnYigxODEsIDIxMywgMjU1KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGVwIHtcbiAgYmFja2dyb3VuZDogcmdiKDI1MiwgMjU1LCAwKTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zdGFjayB7XG4gIGJhY2tncm91bmQ6IHJnYigxNjQsIDIyOSwgMTAxKTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9icmFja2V0IHtcbiAgbWFyZ2luOiAtMXB4IDAgMCAtMXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCByZ2IoMTkyLCAxOTIsIDE5Mik7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfbWFya2VyLWxheWVyIC5hY2VfYWN0aXZlLWxpbmUge1xuICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDcpO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX2d1dHRlci1hY3RpdmUtbGluZSB7XG4gICAgYmFja2dyb3VuZC1jb2xvciA6ICNkY2RjZGM7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc2VsZWN0ZWQtd29yZCB7XG4gIGJhY2tncm91bmQ6IHJnYigyNTAsIDI1MCwgMjU1KTtcbiAgYm9yZGVyOiAxcHggc29saWQgcmdiKDIwMCwgMjAwLCAyNTApO1xufVxuXG4uYWNlLWNocm9tZSAuYWNlX3N0b3JhZ2UsXG4uYWNlLWNocm9tZSAuYWNlX2tleXdvcmQsXG4uYWNlLWNocm9tZSAuYWNlX21ldGEuYWNlX3RhZyB7XG4gIGNvbG9yOiByZ2IoMTQ3LCAxNSwgMTI4KTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9zdHJpbmcuYWNlX3JlZ2V4IHtcbiAgY29sb3I6IHJnYigyNTUsIDAsIDApXG59XG5cbi5hY2UtY2hyb21lIC5hY2Vfc3RyaW5nIHtcbiAgY29sb3I6ICMxQTFBQTY7XG59XG5cbi5hY2UtY2hyb21lIC5hY2VfZW50aXR5LmFjZV9vdGhlci5hY2VfYXR0cmlidXRlLW5hbWUge1xuICBjb2xvcjogIzk5NDQwOTtcbn1cblxuLmFjZS1jaHJvbWUgLmFjZV9pbmRlbnQtZ3VpZGUge1xuICBiYWNrZ3JvdW5kOiB1cmwoXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUNDQVlBQUFDWmdiWW5BQUFBRTBsRVFWUUltV1A0Ly8vL2Y0YkxseS8vQndBbVZnZDEvdzExL2dBQUFBQkpSVTVFcmtKZ2dnPT1cIikgcmlnaHQgcmVwZWF0LXk7XG59XG4gIFxuLmFjZS1jaHJvbWUgLmFjZV9pbmRlbnQtZ3VpZGUtYWN0aXZlIHtcbiAgYmFja2dyb3VuZDogdXJsKFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUNYQklXWE1BQUFzVEFBQUxFd0VBbXB3WUFBQUFJR05JVWswQUFIb2xBQUNBZ3dBQStmOEFBSURwQUFCMU1BQUE2bUFBQURxWUFBQVhiNUpmeFVZQUFBQVpTVVJCVkhqYVl2ai8vLzkvaGl2S3l2OEJBQUFBLy84REFDTHFCaGJ2aysvZUFBQUFBRWxGVGtTdVFtQ0NcIikgcmlnaHQgcmVwZWF0LXk7XG59XG4iOwoKfSk7CgphY2UuZGVmaW5lKCJhY2UvdGhlbWUvY2hyb21lIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIiwiYWNlL3RoZW1lL2Nocm9tZS1jc3MiLCJhY2UvbGliL2RvbSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpe2V4cG9ydHMuaXNEYXJrID0gZmFsc2U7CmV4cG9ydHMuY3NzQ2xhc3MgPSAiYWNlLWNocm9tZSI7CmV4cG9ydHMuY3NzVGV4dCA9IHJlcXVpcmUoIi4vY2hyb21lLWNzcyIpOwp2YXIgZG9tID0gcmVxdWlyZSgiLi4vbGliL2RvbSIpOwpkb20uaW1wb3J0Q3NzU3RyaW5nKGV4cG9ydHMuY3NzVGV4dCwgZXhwb3J0cy5jc3NDbGFzcywgZmFsc2UpOwoKfSk7ICAgICAgICAgICAgICAgIChmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBhY2UucmVxdWlyZShbImFjZS90aGVtZS9jaHJvbWUiXSwgZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiB0eXBlb2YgZXhwb3J0cyA9PSAib2JqZWN0IiAmJiBtb2R1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAg",jD="data:application/javascript;base64,YWNlLmRlZmluZSgiYWNlL3RoZW1lL21vbm9rYWktY3NzIixbInJlcXVpcmUiLCJleHBvcnRzIiwibW9kdWxlIl0sIGZ1bmN0aW9uKHJlcXVpcmUsIGV4cG9ydHMsIG1vZHVsZSl7bW9kdWxlLmV4cG9ydHMgPSAiLmFjZS1tb25va2FpIC5hY2VfZ3V0dGVyIHtcbiAgYmFja2dyb3VuZDogIzJGMzEyOTtcbiAgY29sb3I6ICM4RjkwOEFcbn1cblxuLmFjZS1tb25va2FpIC5hY2VfcHJpbnQtbWFyZ2luIHtcbiAgd2lkdGg6IDFweDtcbiAgYmFja2dyb3VuZDogIzU1NTY1MVxufVxuXG4uYWNlLW1vbm9rYWkge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjcyODIyO1xuICBjb2xvcjogI0Y4RjhGMlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9jdXJzb3Ige1xuICBjb2xvcjogI0Y4RjhGMFxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9zZWxlY3Rpb24ge1xuICBiYWNrZ3JvdW5kOiAjNDk0ODNFXG59XG5cbi5hY2UtbW9ub2thaS5hY2VfbXVsdGlzZWxlY3QgLmFjZV9zZWxlY3Rpb24uYWNlX3N0YXJ0IHtcbiAgYm94LXNoYWRvdzogMCAwIDNweCAwcHggIzI3MjgyMjtcbn1cblxuLmFjZS1tb25va2FpIC5hY2VfbWFya2VyLWxheWVyIC5hY2Vfc3RlcCB7XG4gIGJhY2tncm91bmQ6IHJnYigxMDIsIDgyLCAwKVxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9tYXJrZXItbGF5ZXIgLmFjZV9icmFja2V0IHtcbiAgbWFyZ2luOiAtMXB4IDAgMCAtMXB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjNDk0ODNFXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX21hcmtlci1sYXllciAuYWNlX2FjdGl2ZS1saW5lIHtcbiAgYmFja2dyb3VuZDogIzIwMjAyMFxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9ndXR0ZXItYWN0aXZlLWxpbmUge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjcyNzI3XG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX21hcmtlci1sYXllciAuYWNlX3NlbGVjdGVkLXdvcmQge1xuICBib3JkZXI6IDFweCBzb2xpZCAjNDk0ODNFXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2ludmlzaWJsZSB7XG4gIGNvbG9yOiAjNTI1MjRkXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2VudGl0eS5hY2VfbmFtZS5hY2VfdGFnLFxuLmFjZS1tb25va2FpIC5hY2Vfa2V5d29yZCxcbi5hY2UtbW9ub2thaSAuYWNlX21ldGEuYWNlX3RhZyxcbi5hY2UtbW9ub2thaSAuYWNlX3N0b3JhZ2Uge1xuICBjb2xvcjogI0Y5MjY3MlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9wdW5jdHVhdGlvbixcbi5hY2UtbW9ub2thaSAuYWNlX3B1bmN0dWF0aW9uLmFjZV90YWcge1xuICBjb2xvcjogI2ZmZlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9jb25zdGFudC5hY2VfY2hhcmFjdGVyLFxuLmFjZS1tb25va2FpIC5hY2VfY29uc3RhbnQuYWNlX2xhbmd1YWdlLFxuLmFjZS1tb25va2FpIC5hY2VfY29uc3RhbnQuYWNlX251bWVyaWMsXG4uYWNlLW1vbm9rYWkgLmFjZV9jb25zdGFudC5hY2Vfb3RoZXIge1xuICBjb2xvcjogI0FFODFGRlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9pbnZhbGlkIHtcbiAgY29sb3I6ICNGOEY4RjA7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGOTI2NzJcbn1cblxuLmFjZS1tb25va2FpIC5hY2VfaW52YWxpZC5hY2VfZGVwcmVjYXRlZCB7XG4gIGNvbG9yOiAjRjhGOEYwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjQUU4MUZGXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3N1cHBvcnQuYWNlX2NvbnN0YW50LFxuLmFjZS1tb25va2FpIC5hY2Vfc3VwcG9ydC5hY2VfZnVuY3Rpb24ge1xuICBjb2xvcjogIzY2RDlFRlxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9mb2xkIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0E2RTIyRTtcbiAgYm9yZGVyLWNvbG9yOiAjRjhGOEYyXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3N0b3JhZ2UuYWNlX3R5cGUsXG4uYWNlLW1vbm9rYWkgLmFjZV9zdXBwb3J0LmFjZV9jbGFzcyxcbi5hY2UtbW9ub2thaSAuYWNlX3N1cHBvcnQuYWNlX3R5cGUge1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG4gIGNvbG9yOiAjNjZEOUVGXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2VudGl0eS5hY2VfbmFtZS5hY2VfZnVuY3Rpb24sXG4uYWNlLW1vbm9rYWkgLmFjZV9lbnRpdHkuYWNlX290aGVyLFxuLmFjZS1tb25va2FpIC5hY2VfZW50aXR5LmFjZV9vdGhlci5hY2VfYXR0cmlidXRlLW5hbWUsXG4uYWNlLW1vbm9rYWkgLmFjZV92YXJpYWJsZSB7XG4gIGNvbG9yOiAjQTZFMjJFXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3ZhcmlhYmxlLmFjZV9wYXJhbWV0ZXIge1xuICBmb250LXN0eWxlOiBpdGFsaWM7XG4gIGNvbG9yOiAjRkQ5NzFGXG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX3N0cmluZyB7XG4gIGNvbG9yOiAjRTZEQjc0XG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2NvbW1lbnQge1xuICBjb2xvcjogIzc1NzE1RVxufVxuXG4uYWNlLW1vbm9rYWkgLmFjZV9pbmRlbnQtZ3VpZGUge1xuICBiYWNrZ3JvdW5kOiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUVrbEVRVlFJbVdQUTBGRDBaWEJ6ZC93UEFBalZBb3hlU2dOZUFBQUFBRWxGVGtTdVFtQ0MpIHJpZ2h0IHJlcGVhdC15XG59XG5cbi5hY2UtbW9ub2thaSAuYWNlX2luZGVudC1ndWlkZS1hY3RpdmUge1xuICBiYWNrZ3JvdW5kOiB1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFDQ0FZQUFBQ1pnYlluQUFBQUVrbEVRVlFJVzJQUTFkWDl6ekJ6NXN6L0FCQ2NCRkZlbnRMbEFBQUFBRWxGVGtTdVFtQ0MpIHJpZ2h0IHJlcGVhdC15O1xufVxuIjsKCn0pOwoKYWNlLmRlZmluZSgiYWNlL3RoZW1lL21vbm9rYWkiLFsicmVxdWlyZSIsImV4cG9ydHMiLCJtb2R1bGUiLCJhY2UvdGhlbWUvbW9ub2thaS1jc3MiLCJhY2UvbGliL2RvbSJdLCBmdW5jdGlvbihyZXF1aXJlLCBleHBvcnRzLCBtb2R1bGUpe2V4cG9ydHMuaXNEYXJrID0gdHJ1ZTsKZXhwb3J0cy5jc3NDbGFzcyA9ICJhY2UtbW9ub2thaSI7CmV4cG9ydHMuY3NzVGV4dCA9IHJlcXVpcmUoIi4vbW9ub2thaS1jc3MiKTsKdmFyIGRvbSA9IHJlcXVpcmUoIi4uL2xpYi9kb20iKTsKZG9tLmltcG9ydENzc1N0cmluZyhleHBvcnRzLmNzc1RleHQsIGV4cG9ydHMuY3NzQ2xhc3MsIGZhbHNlKTsKCn0pOyAgICAgICAgICAgICAgICAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgYWNlLnJlcXVpcmUoWyJhY2UvdGhlbWUvbW9ub2thaSJdLCBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kdWxlID09ICJvYmplY3QiICYmIHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiICYmIG1vZHVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICA=",GD="/static/mode-json-812ca1e1.js",VD="/static/mode-javascript-e35357be.js",zD="/static/mode-html-7a8d61ab.js",UD="/static/mode-xml-f73c96cd.js",YD="/static/mode-python-b7f6052d.js",XD="/static/worker-base-78504947.js",ZD="/static/worker-json-b183eeb3.js",KD="/static/worker-javascript-e3ad1990.js",JD="/static/worker-html-a0682eba.js",QD="/static/worker-xml-681b1af8.js",qD="data:application/javascript;base64,CjsgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGFjZS5yZXF1aXJlKFsiYWNlL3NuaXBwZXRzL2pzb24iXSwgZnVuY3Rpb24obSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1vZHVsZSA9PSAib2JqZWN0IiAmJiB0eXBlb2YgZXhwb3J0cyA9PSAib2JqZWN0IiAmJiBtb2R1bGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZS5leHBvcnRzID0gbTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSkoKTsKICAgICAgICAgICAg",eO="/static/javascript-adb9f602.js",tO="/static/html-bfd118fb.js",nO="data:application/javascript;base64,CjsgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgIGFjZS5yZXF1aXJlKFsiYWNlL3NuaXBwZXRzL3htbCJdLCBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kdWxlID09ICJvYmplY3QiICYmIHR5cGVvZiBleHBvcnRzID09ICJvYmplY3QiICYmIG1vZHVsZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBtOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KSgpOwogICAgICAgICAgICA=",iO="/static/python-952d910c.js",rO="/static/ext-searchbox-abeb360f.js";var oO={exports:{}};(function(e,t){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(n,i,r){var o=n("./lib/dom"),l=n("./lib/oop"),u=n("./lib/event_emitter").EventEmitter,s=n("./lib/lang"),p=n("./range").Range,a=n("./range_list").RangeList,c=n("./keyboard/hash_handler").HashHandler,h=n("./tokenizer").Tokenizer,f=n("./clipboard"),d={CURRENT_WORD:function(v){return v.session.getTextRange(v.session.getWordRange())},SELECTION:function(v,E,x){var T=v.session.getTextRange();return x?T.replace(/\n\r?([ \t]*\S)/g,`
`+x+"$1"):T},CURRENT_LINE:function(v){return v.session.getLine(v.getCursorPosition().row)},PREV_LINE:function(v){return v.session.getLine(v.getCursorPosition().row-1)},LINE_INDEX:function(v){return v.getCursorPosition().row},LINE_NUMBER:function(v){return v.getCursorPosition().row+1},SOFT_TABS:function(v){return v.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(v){return v.session.getTabSize()},CLIPBOARD:function(v){return f.getText&&f.getText()},FILENAME:function(v){return/[^/\\]*$/.exec(this.FILEPATH(v))[0]},FILENAME_BASE:function(v){return/[^/\\]*$/.exec(this.FILEPATH(v))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(v){return this.FILEPATH(v).replace(/[^/\\]*$/,"")},FILEPATH:function(v){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(v){var E=v.session.$mode||{};return E.blockComment&&E.blockComment.start||""},BLOCK_COMMENT_END:function(v){var E=v.session.$mode||{};return E.blockComment&&E.blockComment.end||""},LINE_COMMENT:function(v){var E=v.session.$mode||{};return E.lineCommentStart||""},CURRENT_YEAR:m.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:m.bind(null,{year:"2-digit"}),CURRENT_MONTH:m.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:m.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:m.bind(null,{month:"short"}),CURRENT_DATE:m.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:m.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:m.bind(null,{weekday:"short"}),CURRENT_HOUR:m.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:m.bind(null,{minute:"2-digit"}),CURRENT_SECOND:m.bind(null,{second:"2-digit"})};d.SELECTED_TEXT=d.SELECTION;function m(v){var E=new Date().toLocaleString("en-us",v);return E.length==1?"0"+E:E}var g=function(){function v(){this.snippetMap={},this.snippetNameMap={},this.variables=d}return v.prototype.getTokenizer=function(){return v.$tokenizer||this.createTokenizer()},v.prototype.createTokenizer=function(){function E(k){return k=k.substr(1),/^\d+$/.test(k)?[{tabstopId:parseInt(k,10)}]:[{text:k}]}function x(k){return"(?:[^\\\\"+k+"]|\\\\.)"}var T={regex:"/("+x("/")+"+)/",onMatch:function(k,$,R){var A=R[0];return A.fmtString=!0,A.guard=k.slice(1,-1),A.flag="",""},next:"formatString"};return v.$tokenizer=new h({start:[{regex:/\\./,onMatch:function(k,$,R){var A=k[1];return(A=="}"&&R.length||"`$\\".indexOf(A)!=-1)&&(k=A),[k]}},{regex:/}/,onMatch:function(k,$,R){return[R.length?R.shift():k]}},{regex:/\$(?:\d+|\w+)/,onMatch:E},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(k,$,R){var A=E(k.substr(1));return R.unshift(A[0]),A},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+x("\\|")+"*\\|",onMatch:function(k,$,R){var A=k.slice(1,-1).replace(/\\[,|\\]|,/g,function(C){return C.length==2?C[1]:"\0"}).split("\0").map(function(C){return{value:C}});return R[0].choices=A,[A[0]]},next:"start"},T,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(k,$,R){return R.length&&R[0].expectElse?(R[0].expectElse=!1,R[0].ifEnd={elseEnd:R[0]},[R[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(k,$,R){var A=k[1];return A=="}"&&R.length||"`$\\".indexOf(A)!=-1?k=A:A=="n"?k=`
`:A=="t"?k="	":"ulULE".indexOf(A)!=-1&&(k={changeCase:A,local:A>"a"}),[k]}},{regex:"/\\w*}",onMatch:function(k,$,R){var A=R.shift();return A&&(A.flag=k.slice(1,-1)),this.next=A&&A.tabstopId?"start":"",[A||k]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(k,$,R){return[{text:k.slice(1)}]}},{regex:/\${\w+/,onMatch:function(k,$,R){var A={text:k.slice(2)};return R.unshift(A),[A]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(k,$,R){var A=R.shift();return this.next=A&&A.tabstopId?"start":"",[A||k]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(k,$,R){var A=R[0];return A.formatFunction=k.slice(2,-1),[R.shift()]},next:"formatString"},T,{regex:/:[\?\-+]?/,onMatch:function(k,$,R){k[1]=="+"&&(R[0].ifEnd=R[0]),k[1]=="?"&&(R[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),v.$tokenizer},v.prototype.tokenizeTmSnippet=function(E,x){return this.getTokenizer().getLineTokens(E,x).tokens.map(function(T){return T.value||T})},v.prototype.getVariableValue=function(E,x,T){if(/^\d+$/.test(x))return(this.variables.__||{})[x]||"";if(/^[A-Z]\d+$/.test(x))return(this.variables[x[0]+"__"]||{})[x.substr(1)]||"";if(x=x.replace(/^TM_/,""),!this.variables.hasOwnProperty(x))return"";var k=this.variables[x];return typeof k=="function"&&(k=this.variables[x](E,x,T)),k??""},v.prototype.tmStrFormat=function(E,x,T){if(!x.fmt)return E;var k=x.flag||"",$=x.guard;$=new RegExp($,k.replace(/[^gim]/g,""));var R=typeof x.fmt=="string"?this.tokenizeTmSnippet(x.fmt,"formatString"):x.fmt,A=this,C=E.replace($,function(){var M=A.variables.__;A.variables.__=[].slice.call(arguments);for(var I=A.resolveVariables(R,T),D="E",B=0;B<I.length;B++){var F=I[B];if(typeof F=="object")if(I[B]="",F.changeCase&&F.local){var j=I[B+1];j&&typeof j=="string"&&(F.changeCase=="u"?I[B]=j[0].toUpperCase():I[B]=j[0].toLowerCase(),I[B+1]=j.substr(1))}else F.changeCase&&(D=F.changeCase);else D=="U"?I[B]=F.toUpperCase():D=="L"&&(I[B]=F.toLowerCase())}return A.variables.__=M,I.join("")});return C},v.prototype.tmFormatFunction=function(E,x,T){return x.formatFunction=="upcase"?E.toUpperCase():x.formatFunction=="downcase"?E.toLowerCase():E},v.prototype.resolveVariables=function(E,x){for(var T=[],k="",$=!0,R=0;R<E.length;R++){var A=E[R];if(typeof A=="string"){T.push(A),A==`
`?($=!0,k=""):$&&(k=/^\t*/.exec(A)[0],$=/\S/.test(A));continue}if(A){if($=!1,A.fmtString){var C=E.indexOf(A,R+1);C==-1&&(C=E.length),A.fmt=E.slice(R+1,C),R=C}if(A.text){var M=this.getVariableValue(x,A.text,k)+"";A.fmtString&&(M=this.tmStrFormat(M,A,x)),A.formatFunction&&(M=this.tmFormatFunction(M,A,x)),M&&!A.ifEnd?(T.push(M),I(A)):!M&&A.ifEnd&&I(A.ifEnd)}else A.elseEnd?I(A.elseEnd):(A.tabstopId!=null||A.changeCase!=null)&&T.push(A)}}function I(D){var B=E.indexOf(D,R+1);B!=-1&&(R=B)}return T},v.prototype.getDisplayTextForSnippet=function(E,x){var T=y.call(this,E,x);return T.text},v.prototype.insertSnippetForSelection=function(E,x,T){T===void 0&&(T={});var k=y.call(this,E,x,T),$=E.getSelectionRange(),R=E.session.replace($,k.text),A=new w(E),C=E.inVirtualSelectionMode&&E.selection.index;A.addTabstops(k.tabstops,$.start,R,C)},v.prototype.insertSnippet=function(E,x,T){T===void 0&&(T={});var k=this;if(E.inVirtualSelectionMode)return k.insertSnippetForSelection(E,x,T);E.forEachSelection(function(){k.insertSnippetForSelection(E,x,T)},null,{keepOrder:!0}),E.tabstopManager&&E.tabstopManager.tabNext()},v.prototype.$getScope=function(E){var x=E.session.$mode.$id||"";if(x=x.split("/").pop(),x==="html"||x==="php"){x==="php"&&!E.session.$mode.inlinePhp&&(x="html");var T=E.getCursorPosition(),k=E.session.getState(T.row);typeof k=="object"&&(k=k[0]),k.substring&&(k.substring(0,3)=="js-"?x="javascript":k.substring(0,4)=="css-"?x="css":k.substring(0,4)=="php-"&&(x="php"))}return x},v.prototype.getActiveScopes=function(E){var x=this.$getScope(E),T=[x],k=this.snippetMap;return k[x]&&k[x].includeScopes&&T.push.apply(T,k[x].includeScopes),T.push("_"),T},v.prototype.expandWithTab=function(E,x){var T=this,k=E.forEachSelection(function(){return T.expandSnippetForSelection(E,x)},null,{keepOrder:!0});return k&&E.tabstopManager&&E.tabstopManager.tabNext(),k},v.prototype.expandSnippetForSelection=function(E,x){var T=E.getCursorPosition(),k=E.session.getLine(T.row),$=k.substring(0,T.column),R=k.substr(T.column),A=this.snippetMap,C;return this.getActiveScopes(E).some(function(M){var I=A[M];return I&&(C=this.findMatchingSnippet(I,$,R)),!!C},this),C?(x&&x.dryRun||(E.session.doc.removeInLine(T.row,T.column-C.replaceBefore.length,T.column+C.replaceAfter.length),this.variables.M__=C.matchBefore,this.variables.T__=C.matchAfter,this.insertSnippetForSelection(E,C.content),this.variables.M__=this.variables.T__=null),!0):!1},v.prototype.findMatchingSnippet=function(E,x,T){for(var k=E.length;k--;){var $=E[k];if(!($.startRe&&!$.startRe.test(x))&&!($.endRe&&!$.endRe.test(T))&&!(!$.startRe&&!$.endRe))return $.matchBefore=$.startRe?$.startRe.exec(x):[""],$.matchAfter=$.endRe?$.endRe.exec(T):[""],$.replaceBefore=$.triggerRe?$.triggerRe.exec(x)[0]:"",$.replaceAfter=$.endTriggerRe?$.endTriggerRe.exec(T)[0]:"",$}},v.prototype.register=function(E,x){var T=this.snippetMap,k=this.snippetNameMap,$=this;E||(E=[]);function R(M){return M&&!/^\^?\(.*\)\$?$|^\\b$/.test(M)&&(M="(?:"+M+")"),M||""}function A(M,I,D){return M=R(M),I=R(I),D?(M=I+M,M&&M[M.length-1]!="$"&&(M=M+"$")):(M=M+I,M&&M[0]!="^"&&(M="^"+M)),new RegExp(M)}function C(M){M.scope||(M.scope=x||"_"),x=M.scope,T[x]||(T[x]=[],k[x]={});var I=k[x];if(M.name){var D=I[M.name];D&&$.unregister(D),I[M.name]=M}T[x].push(M),M.prefix&&(M.tabTrigger=M.prefix),!M.content&&M.body&&(M.content=Array.isArray(M.body)?M.body.join(`
`):M.body),M.tabTrigger&&!M.trigger&&(!M.guard&&/^\w/.test(M.tabTrigger)&&(M.guard="\\b"),M.trigger=s.escapeRegExp(M.tabTrigger)),!(!M.trigger&&!M.guard&&!M.endTrigger&&!M.endGuard)&&(M.startRe=A(M.trigger,M.guard,!0),M.triggerRe=new RegExp(M.trigger),M.endRe=A(M.endTrigger,M.endGuard,!0),M.endTriggerRe=new RegExp(M.endTrigger))}Array.isArray(E)?E.forEach(C):Object.keys(E).forEach(function(M){C(E[M])}),this._signal("registerSnippets",{scope:x})},v.prototype.unregister=function(E,x){var T=this.snippetMap,k=this.snippetNameMap;function $(R){var A=k[R.scope||x];if(A&&A[R.name]){delete A[R.name];var C=T[R.scope||x],M=C&&C.indexOf(R);M>=0&&C.splice(M,1)}}E.content?$(E):Array.isArray(E)&&E.forEach($)},v.prototype.parseSnippetFile=function(E){E=E.replace(/\r/g,"");for(var x=[],T={},k=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,$;$=k.exec(E);){if($[1])try{T=JSON.parse($[1]),x.push(T)}catch{}if($[4])T.content=$[4].replace(/^\t/gm,""),x.push(T),T={};else{var R=$[2],A=$[3];if(R=="regex"){var C=/\/((?:[^\/\\]|\\.)*)|$/g;T.guard=C.exec(A)[1],T.trigger=C.exec(A)[1],T.endTrigger=C.exec(A)[1],T.endGuard=C.exec(A)[1]}else R=="snippet"?(T.tabTrigger=A.match(/^\S*/)[0],T.name||(T.name=A)):R&&(T[R]=A)}}return x},v.prototype.getSnippetByName=function(E,x){var T=this.snippetNameMap,k;return this.getActiveScopes(x).some(function($){var R=T[$];return R&&(k=R[E]),!!k},this),k},v}();l.implement(g.prototype,u);var y=function(v,E,x){x===void 0&&(x={});var T=v.getCursorPosition(),k=v.session.getLine(T.row),$=v.session.getTabString(),R=k.match(/^\s*/)[0];T.column<R.length&&(R=R.slice(0,T.column)),E=E.replace(/\r/g,"");var A=this.tokenizeTmSnippet(E);A=this.resolveVariables(A,v),A=A.map(function(U){return U==`
`&&!x.excludeExtraIndent?U+R:typeof U=="string"?U.replace(/\t/g,$):U});var C=[];A.forEach(function(U,ee){if(typeof U=="object"){var Y=U.tabstopId,O=C[Y];if(O||(O=C[Y]=[],O.index=Y,O.value="",O.parents={}),O.indexOf(U)===-1){U.choices&&!O.choices&&(O.choices=U.choices),O.push(U);var L=A.indexOf(U,ee+1);if(L!==-1){var P=A.slice(ee+1,L),z=P.some(function(K){return typeof K=="object"});z&&!O.value?O.value=P:P.length&&(!O.value||typeof O.value!="string")&&(O.value=P.join(""))}}}}),C.forEach(function(U){U.length=0});var M={};function I(U){for(var ee=[],Y=0;Y<U.length;Y++){var O=U[Y];if(typeof O=="object"){if(M[O.tabstopId])continue;var L=U.lastIndexOf(O,Y-1);O=ee[L]||{tabstopId:O.tabstopId}}ee[Y]=O}return ee}for(var D=0;D<A.length;D++){var B=A[D];if(typeof B=="object"){var F=B.tabstopId,j=C[F],Z=A.indexOf(B,D+1);if(M[F]){M[F]===B&&(delete M[F],Object.keys(M).forEach(function(U){j.parents[U]=!0}));continue}M[F]=B;var Q=j.value;typeof Q!="string"?Q=I(Q):B.fmt&&(Q=this.tmStrFormat(Q,B,v)),A.splice.apply(A,[D+1,Math.max(0,Z-D)].concat(Q,B)),j.indexOf(B)===-1&&j.push(B)}}var W=0,V=0,G="";return A.forEach(function(U){if(typeof U=="string"){var ee=U.split(`
`);ee.length>1?(V=ee[ee.length-1].length,W+=ee.length-1):V+=U.length,G+=U}else U&&(U.start?U.end={row:W,column:V}:U.start={row:W,column:V})}),{text:G,tabstops:C,tokens:A}},w=function(){function v(E){if(this.index=0,this.ranges=[],this.tabstops=[],E.tabstopManager)return E.tabstopManager;E.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(E)}return v.prototype.attach=function(E){this.$openTabstops=null,this.selectedTabstop=null,this.editor=E,this.session=E.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},v.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},v.prototype.onChange=function(E){for(var x=E.action[0]=="r",T=this.selectedTabstop||{},k=T.parents||{},$=this.tabstops.slice(),R=0;R<$.length;R++){var A=$[R],C=A==T||k[A.index];if(A.rangeList.$bias=C?0:1,E.action=="remove"&&A!==T){var M=A.parents&&A.parents[T.index],I=A.rangeList.pointIndex(E.start,M);I=I<0?-I-1:I+1;var D=A.rangeList.pointIndex(E.end,M);D=D<0?-D-1:D-1;for(var B=A.rangeList.ranges.slice(I,D),F=0;F<B.length;F++)this.removeRange(B[F])}A.rangeList.$onChange(E)}var j=this.session;!this.$inChange&&x&&j.getLength()==1&&!j.getValue()&&this.detach()},v.prototype.updateLinkedFields=function(){var E=this.selectedTabstop;if(!(!E||!E.hasLinkedRanges||!E.firstNonLinked)){this.$inChange=!0;for(var x=this.session,T=x.getTextRange(E.firstNonLinked),k=0;k<E.length;k++){var $=E[k];if($.linked){var R=$.original,A=i.snippetManager.tmStrFormat(T,R,this.editor);x.replace($,A)}}this.$inChange=!1}},v.prototype.onAfterExec=function(E){E.command&&!E.command.readOnly&&this.updateLinkedFields()},v.prototype.onChangeSelection=function(){if(this.editor){for(var E=this.editor.selection.lead,x=this.editor.selection.anchor,T=this.editor.selection.isEmpty(),k=0;k<this.ranges.length;k++)if(!this.ranges[k].linked){var $=this.ranges[k].contains(E.row,E.column),R=T||this.ranges[k].contains(x.row,x.column);if($&&R)return}this.detach()}},v.prototype.onChangeSession=function(){this.detach()},v.prototype.tabNext=function(E){var x=this.tabstops.length,T=this.index+(E||1);T=Math.min(Math.max(T,1),x),T==x&&(T=0),this.selectTabstop(T),this.updateTabstopMarkers(),T===0&&this.detach()},v.prototype.selectTabstop=function(E){this.$openTabstops=null;var x=this.tabstops[this.index];if(x&&this.addTabstopMarkers(x),this.index=E,x=this.tabstops[this.index],!(!x||!x.length)){this.selectedTabstop=x;var T=x.firstNonLinked||x;if(x.choices&&(T.cursor=T.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(T);else{var k=this.editor.multiSelect;k.toSingleRange(T);for(var $=0;$<x.length;$++)x.hasLinkedRanges&&x[$].linked||k.addRange(x[$].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},v.prototype.addTabstops=function(E,x,T){var k=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!E[0]){var $=p.fromPoints(T,T);b($.start,x),b($.end,x),E[0]=[$],E[0].index=0}var R=this.index,A=[R+1,0],C=this.ranges,M=this.snippetId=(this.snippetId||0)+1;E.forEach(function(I,D){var B=this.$openTabstops[D]||I;B.snippetId=M;for(var F=0;F<I.length;F++){var j=I[F],Z=p.fromPoints(j.start,j.end||j.start);S(Z.start,x),S(Z.end,x),Z.original=j,Z.tabstop=B,C.push(Z),B!=I?B.unshift(Z):B[F]=Z,j.fmtString||B.firstNonLinked&&k?(Z.linked=!0,B.hasLinkedRanges=!0):B.firstNonLinked||(B.firstNonLinked=Z)}B.firstNonLinked||(B.hasLinkedRanges=!1),B===I&&(A.push(B),this.$openTabstops[D]=B),this.addTabstopMarkers(B),B.rangeList=B.rangeList||new a,B.rangeList.$bias=0,B.rangeList.addList(B)},this),A.length>2&&(this.tabstops.length&&A.push(A.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,A))},v.prototype.addTabstopMarkers=function(E){var x=this.session;E.forEach(function(T){T.markerId||(T.markerId=x.addMarker(T,"ace_snippet-marker","text"))})},v.prototype.removeTabstopMarkers=function(E){var x=this.session;E.forEach(function(T){x.removeMarker(T.markerId),T.markerId=null})},v.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var E=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&E--,this.tabstops.forEach(function(x){x.snippetId===E?this.addTabstopMarkers(x):this.removeTabstopMarkers(x)},this)}},v.prototype.removeRange=function(E){var x=E.tabstop.indexOf(E);x!=-1&&E.tabstop.splice(x,1),x=this.ranges.indexOf(E),x!=-1&&this.ranges.splice(x,1),x=E.tabstop.rangeList.ranges.indexOf(E),x!=-1&&E.tabstop.splice(x,1),this.session.removeMarker(E.markerId),E.tabstop.length||(x=this.tabstops.indexOf(E.tabstop),x!=-1&&this.tabstops.splice(x,1),this.tabstops.length||this.detach())},v}();w.prototype.keyboardHandler=new c,w.prototype.keyboardHandler.bindKeys({Tab:function(v){i.snippetManager&&i.snippetManager.expandWithTab(v)||(v.tabstopManager.tabNext(1),v.renderer.scrollCursorIntoView())},"Shift-Tab":function(v){v.tabstopManager.tabNext(-1),v.renderer.scrollCursorIntoView()},Esc:function(v){v.tabstopManager.detach()}});var S=function(v,E){v.row==0&&(v.column+=E.column),v.row+=E.row},b=function(v,E){v.row==E.row&&(v.column-=E.column),v.row-=E.row};o.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),i.snippetManager=new g;var _=n("./editor").Editor;(function(){this.insertSnippet=function(v,E){return i.snippetManager.insertSnippet(this,v,E)},this.expandSnippet=function(v){return i.snippetManager.expandWithTab(this,v)}}).call(_.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(n,i,r){var o=n("../virtual_renderer").VirtualRenderer,l=n("../editor").Editor,u=n("../range").Range,s=n("../lib/event"),p=n("../lib/lang"),a=n("../lib/dom"),c=n("../config").nls,h=n("./../lib/useragent"),f=function(S){return"suggest-aria-id:".concat(S)},d=h.isSafari?"menu":"listbox",m=h.isSafari?"menuitem":"option",g=h.isSafari?"aria-current":"aria-selected",y=function(S){var b=new o(S);b.$maxLines=4;var _=new l(b);return _.setHighlightActiveLine(!1),_.setShowPrintMargin(!1),_.renderer.setShowGutter(!1),_.renderer.setHighlightGutterLine(!1),_.$mouseHandler.$focusTimeout=0,_.$highlightTagPending=!0,_},w=function(){function S(b){var _=a.createElement("div"),v=y(_);b&&b.appendChild(_),_.style.display="none",v.renderer.content.style.cursor="default",v.renderer.setStyle("ace_autocomplete"),v.renderer.$textLayer.element.setAttribute("role",d),v.renderer.$textLayer.element.setAttribute("aria-roledescription",c("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),v.renderer.$textLayer.element.setAttribute("aria-label",c("autocomplete.popup.aria-label","Autocomplete suggestions")),v.renderer.textarea.setAttribute("aria-hidden","true"),v.setOption("displayIndentGuides",!1),v.setOption("dragDelay",150);var E=function(){};v.focus=E,v.$isFocused=!0,v.renderer.$cursorLayer.restartTimer=E,v.renderer.$cursorLayer.element.style.opacity="0",v.renderer.$maxLines=8,v.renderer.$keepTextAreaAtCursor=!1,v.setHighlightActiveLine(!1),v.session.highlight(""),v.session.$searchHighlight.clazz="ace_highlight-marker",v.on("mousedown",function(C){var M=C.getDocumentPosition();v.selection.moveToPosition(M),k.start.row=k.end.row=M.row,C.stop()});var x,T=new u(-1,0,-1,1/0),k=new u(-1,0,-1,1/0);k.id=v.session.addMarker(k,"ace_active-line","fullLine"),v.setSelectOnHover=function(C){C?T.id&&(v.session.removeMarker(T.id),T.id=null):T.id=v.session.addMarker(T,"ace_line-hover","fullLine")},v.setSelectOnHover(!1),v.on("mousemove",function(C){if(!x){x=C;return}if(!(x.x==C.x&&x.y==C.y)){x=C,x.scrollTop=v.renderer.scrollTop,v.isMouseOver=!0;var M=x.getDocumentPosition().row;T.start.row!=M&&(T.id||v.setRow(M),R(M))}}),v.renderer.on("beforeRender",function(){if(x&&T.start.row!=-1){x.$pos=null;var C=x.getDocumentPosition().row;T.id||v.setRow(C),R(C,!0)}}),v.renderer.on("afterRender",function(){var C=v.getRow(),M=v.renderer.$textLayer,I=M.element.childNodes[C-M.config.firstRow],D=document.activeElement;if(I!==v.selectedNode&&v.selectedNode&&(a.removeCssClass(v.selectedNode,"ace_selected"),D.removeAttribute("aria-activedescendant"),v.selectedNode.removeAttribute(g),v.selectedNode.removeAttribute("id")),v.selectedNode=I,I){a.addCssClass(I,"ace_selected");var B=f(C);I.id=B,M.element.setAttribute("aria-activedescendant",B),D.setAttribute("aria-activedescendant",B),I.setAttribute("role",m),I.setAttribute("aria-roledescription",c("autocomplete.popup.item.aria-roledescription","item")),I.setAttribute("aria-label",v.getData(C).caption||v.getData(C).value),I.setAttribute("aria-setsize",v.data.length),I.setAttribute("aria-posinset",C+1),I.setAttribute("aria-describedby","doc-tooltip"),I.setAttribute(g,"true")}});var $=function(){R(-1)},R=function(C,M){C!==T.start.row&&(T.start.row=T.end.row=C,M||v.session._emit("changeBackMarker"),v._emit("changeHoverMarker"))};v.getHoveredRow=function(){return T.start.row},s.addListener(v.container,"mouseout",function(){v.isMouseOver=!1,$()}),v.on("hide",$),v.on("changeSelection",$),v.session.doc.getLength=function(){return v.data.length},v.session.doc.getLine=function(C){var M=v.data[C];return typeof M=="string"?M:M&&M.value||""};var A=v.session.bgTokenizer;return A.$tokenizeRow=function(C){var M=v.data[C],I=[];if(!M)return I;typeof M=="string"&&(M={value:M});var D=M.caption||M.value||M.name;function B(U,ee){U&&I.push({type:(M.className||"")+(ee||""),value:U})}for(var F=D.toLowerCase(),j=(v.filterText||"").toLowerCase(),Z=0,Q=0,W=0;W<=j.length;W++)if(W!=Q&&(M.matchMask&1<<W||W==j.length)){var V=j.slice(Q,W);Q=W;var G=F.indexOf(V,Z);if(G==-1)continue;B(D.slice(Z,G),""),Z=G+V.length,B(D.slice(G,Z),"completion-highlight")}return B(D.slice(Z,D.length),""),I.push({type:"completion-spacer",value:" "}),M.meta&&I.push({type:"completion-meta",value:M.meta}),M.message&&I.push({type:"completion-message",value:M.message}),I},A.$updateOnChange=E,A.start=E,v.session.$computeWidth=function(){return this.screenWidth=0},v.isOpen=!1,v.isTopdown=!1,v.autoSelect=!0,v.filterText="",v.isMouseOver=!1,v.data=[],v.setData=function(C,M){v.filterText=M||"",v.setValue(p.stringRepeat(`
`,C.length),-1),v.data=C||[],v.setRow(0)},v.getData=function(C){return v.data[C]},v.getRow=function(){return k.start.row},v.setRow=function(C){C=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,C)),k.start.row!=C&&(v.selection.clearSelection(),k.start.row=k.end.row=C||0,v.session._emit("changeBackMarker"),v.moveCursorTo(C||0,0),v.isOpen&&v._signal("select"))},v.on("changeSelection",function(){v.isOpen&&v.setRow(v.selection.lead.row),v.renderer.scrollCursorIntoView()}),v.hide=function(){this.container.style.display="none",v.anchorPos=null,v.anchor=null,v.isOpen&&(v.isOpen=!1,this._signal("hide"))},v.tryShow=function(C,M,I,D){if(!D&&v.isOpen&&v.anchorPos&&v.anchor&&v.anchorPos.top===C.top&&v.anchorPos.left===C.left&&v.anchor===I)return!0;var B=this.container,F=window.innerHeight,j=window.innerWidth,Z=this.renderer,Q=Z.$maxLines*M*1.4,W={top:0,bottom:0,left:0},V=F-C.top-3*this.$borderSize-M,G=C.top-3*this.$borderSize;I||(G<=V||V>=Q?I="bottom":I="top"),I==="top"?(W.bottom=C.top-this.$borderSize,W.top=W.bottom-Q):I==="bottom"&&(W.top=C.top+M+this.$borderSize,W.bottom=W.top+Q);var U=W.top>=0&&W.bottom<=F;if(!D&&!U)return!1;U?Z.$maxPixelHeight=null:I==="top"?Z.$maxPixelHeight=G:Z.$maxPixelHeight=V,I==="top"?(B.style.top="",B.style.bottom=F-W.bottom+"px",v.isTopdown=!1):(B.style.top=W.top+"px",B.style.bottom="",v.isTopdown=!0),B.style.display="";var ee=C.left;return ee+B.offsetWidth>j&&(ee=j-B.offsetWidth),B.style.left=ee+"px",B.style.right="",v.isOpen||(v.isOpen=!0,this._signal("show"),x=null),v.anchorPos=C,v.anchor=I,!0},v.show=function(C,M,I){this.tryShow(C,M,I?"bottom":void 0,!0)},v.goTo=function(C){var M=this.getRow(),I=this.session.getLength()-1;switch(C){case"up":M=M<=0?I:M-1;break;case"down":M=M>=I?-1:M+1;break;case"start":M=0;break;case"end":M=I;break}this.setRow(M)},v.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},v.$imageSize=0,v.$borderSize=1,v}return S}();a.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),i.AcePopup=w,i.$singleLineEditor=y,i.getAriaId=f}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(n,i,r){var o=function(){function l(u){this.editor=u,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return l.prototype.setScreenReaderContent=function(u){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",(function(){var p=this.popup.getRow(),a=this.popup.renderer.$textLayer,c=a.element.childNodes[p-a.config.firstRow];if(c){for(var h="doc-tooltip ",f=0;f<this._lines.length;f++)h+="ace-inline-screenreader-line-".concat(f," ");c.setAttribute("aria-describedby",h)}}).bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=u.split(/\r\n|\r|\n/);var s=this.createCodeBlock();this.screenReaderDiv.appendChild(s)},l.prototype.destroy=function(){this.screenReaderDiv.remove()},l.prototype.createCodeBlock=function(){var u=document.createElement("pre");u.setAttribute("id","ace-inline-screenreader");for(var s=0;s<this._lines.length;s++){var p=document.createElement("code");p.setAttribute("id","ace-inline-screenreader-line-".concat(s));var a=document.createTextNode(this._lines[s]);p.appendChild(a),u.appendChild(p)}return u},l}();i.AceInlineScreenReader=o}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(n,i,r){var o=n("../snippets").snippetManager,l=n("./inline_screenreader").AceInlineScreenReader,u=function(){function s(){this.editor=null}return s.prototype.show=function(p,a,c){if(c=c||"",p&&this.editor&&this.editor!==p&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!p||!a)return!1;this.inlineScreenReader||(this.inlineScreenReader=new l(p));var h=a.snippet?o.getDisplayTextForSnippet(p,a.snippet):a.value;return a.hideInlinePreview||!h||!h.startsWith(c)?!1:(this.editor=p,this.inlineScreenReader.setScreenReaderContent(h),h=h.slice(c.length),h===""?p.removeGhostText():p.setGhostText(h),!0)},s.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},s.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},s.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},s}();i.AceInline=u}),ace.define("ace/autocomplete/util",["require","exports","module"],function(n,i,r){i.parForEach=function(l,u,s){var p=0,a=l.length;a===0&&s();for(var c=0;c<a;c++)u(l[c],function(h,f){p++,p===a&&s(h,f)})};var o=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;i.retrievePrecedingIdentifier=function(l,u,s){s=s||o;for(var p=[],a=u-1;a>=0&&s.test(l[a]);a--)p.push(l[a]);return p.reverse().join("")},i.retrieveFollowingIdentifier=function(l,u,s){s=s||o;for(var p=[],a=u;a<l.length&&s.test(l[a]);a++)p.push(l[a]);return p},i.getCompletionPrefix=function(l){var u=l.getCursorPosition(),s=l.session.getLine(u.row),p;return l.completers.forEach((function(a){a.identifierRegexps&&a.identifierRegexps.forEach((function(c){!p&&c&&(p=this.retrievePrecedingIdentifier(s,u.column,c))}).bind(this))}).bind(this)),p||this.retrievePrecedingIdentifier(s,u.column)},i.triggerAutocomplete=function(l,s){var s=s??l.session.getPrecedingCharacter();return l.completers.some(function(p){if(p.triggerCharacters&&Array.isArray(p.triggerCharacters))return p.triggerCharacters.includes(s)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(n,i,r){var o=n("./keyboard/hash_handler").HashHandler,l=n("./autocomplete/popup").AcePopup,u=n("./autocomplete/inline").AceInline,s=n("./autocomplete/popup").getAriaId,p=n("./autocomplete/util"),a=n("./lib/lang"),c=n("./lib/dom"),h=n("./snippets").snippetManager,f=n("./config"),d=n("./lib/event"),m=n("./lib/scroll").preventParentScroll,g=function(b,_){_.completer&&_.completer.destroy()},y=function(){function b(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new o,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=a.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=a.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=a.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=a.delayedCall((function(){this.stickySelection=!0}).bind(this),this.stickySelectionDelay),this.$firstOpenTimer=a.delayedCall((function(){var _=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!_||this.editor.completers.length===0||(this.completions=new S(b.completionsForLoading),this.openPopup(this.editor,_.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}).bind(this),this.stickySelectionDelay)}return Object.defineProperty(b,"completionsForLoading",{get:function(){return[{caption:f.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),b.prototype.$init=function(){return this.popup=new l(this.parentNode||document.body||document.documentElement),this.popup.on("click",(function(_){this.insertMatch(),_.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),d.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},b.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new u,this.inlineRenderer},b.prototype.getPopup=function(){return this.popup||this.$init()},b.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},b.prototype.$seen=function(_){!this.hasSeen.has(_)&&_&&_.completer&&_.completer.onSeen&&typeof _.completer.onSeen=="function"&&(_.completer.onSeen(this.editor,_),this.hasSeen.add(_))},b.prototype.$onPopupChange=function(_){if(this.inlineRenderer&&this.inlineEnabled){var v=_?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(v),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},b.prototype.$updateGhostText=function(_){var v=this.base.row,E=this.base.column,x=this.editor.getCursorPosition().column,T=this.editor.session.getLine(v).slice(E,x);this.inlineRenderer.show(this.editor,_,T)?this.$seen(_):this.inlineRenderer.hide()},b.prototype.$onPopupRender=function(){var _=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var v=this.popup.getFirstVisibleRow();v<=this.popup.getLastVisibleRow();v++){var E=this.popup.getData(v);E&&(!_||E.hideInlinePreview)&&this.$seen(E)}},b.prototype.$onPopupShow=function(_){this.$onPopupChange(_),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},b.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var _=this.editor.container.parentNode,v=[];_;)v.push(_),_.addEventListener("scroll",this.onLayoutChange,{passive:!0}),_=_.parentNode;this.$elements=v}},b.prototype.unObserveLayoutChanges=function(){var _=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(v){v.removeEventListener("scroll",_.onLayoutChange,{passive:!0})}),this.$elements=null},b.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},b.prototype.$updatePopupPosition=function(){var _=this.editor,v=_.renderer,E=v.layerConfig.lineHeight,x=v.$cursorLayer.getPixelPosition(this.base,!0);x.left-=this.popup.getTextLeftOffset();var T=_.container.getBoundingClientRect();x.top+=T.top-v.layerConfig.offset,x.left+=T.left-_.renderer.scrollLeft,x.left+=v.gutterWidth;var k={top:x.top,left:x.left};v.$ghostText&&v.$ghostTextWidget&&this.base.row===v.$ghostText.position.row&&(k.top+=v.$ghostTextWidget.el.offsetHeight);var $=_.container.getBoundingClientRect().bottom-E,R=$<k.top?{top:$,left:k.left}:k;this.popup.tryShow(R,E,"bottom")||this.popup.tryShow(x,E,"top")||this.popup.show(x,E)},b.prototype.openPopup=function(_,v,E){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var x=this.popup.getRow(),T=this.popup.data[x];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:s(this.popup.getRow()),inline:this.inlineEnabled}),_.keyBinding.addKeyboardHandler(this.keyboardHandler);var k;this.stickySelection&&(k=this.popup.data.indexOf(T)),(!k||k===-1)&&(k=0),this.popup.setRow(this.autoSelect?k:-1),k===x&&T!==this.completions.filtered[k]&&this.$onPopupChange();var $=this.inlineRenderer&&this.inlineEnabled;if(k===x&&$){var R=this.popup.getData(this.popup.getRow());this.$updateGhostText(R)}E||(this.popup.setTheme(_.getTheme()),this.popup.setFontSize(_.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},b.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},b.prototype.changeListener=function(_){var v=this.editor.selection.lead;(v.row!=this.base.row||v.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},b.prototype.blurListener=function(_){var v=document.activeElement,E=this.editor.textInput.getElement(),x=_.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(_.relatedTarget),T=this.popup&&this.popup.container;v!=E&&v.parentNode!=T&&!x&&v!=this.tooltipNode&&_.relatedTarget!=E&&this.detach()},b.prototype.mousedownListener=function(_){this.detach()},b.prototype.mousewheelListener=function(_){this.popup&&!this.popup.isMouseOver&&this.detach()},b.prototype.mouseOutListener=function(_){this.popup.isOpen&&this.$updatePopupPosition()},b.prototype.goTo=function(_){this.popup.goTo(_)},b.prototype.insertMatch=function(_,v){if(_||(_=this.popup.getData(this.popup.getRow())),!_)return!1;if(_.value==="")return this.detach();var E=this.completions,x=this.getCompletionProvider().insertMatch(this.editor,_,E.filterText,v);return this.completions==E&&this.detach(),x},b.prototype.showPopup=function(_,v){this.editor&&this.detach(),this.activated=!0,this.editor=_,_.completer!=this&&(_.completer&&_.completer.detach(),_.completer=this),_.on("changeSelection",this.changeListener),_.on("blur",this.blurListener),_.on("mousedown",this.mousedownListener),_.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,v)},b.prototype.getCompletionProvider=function(_){return this.completionProvider||(this.completionProvider=new w(_)),this.completionProvider},b.prototype.gatherCompletions=function(_,v){return this.getCompletionProvider().gatherCompletions(_,v)},b.prototype.updateCompletions=function(_,v){if(_&&this.base&&this.completions){var x=this.editor.getCursorPosition(),T=this.editor.session.getTextRange({start:this.base,end:x});if(T==this.completions.filterText)return;if(this.completions.setFilter(T),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==T&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,T,_);return}if(v&&v.matches){var x=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(x.row,x.column),this.base.$insertRight=!0,this.completions=new S(v.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",_)}var E=this.editor.getSession(),x=this.editor.getCursorPosition(),T=p.getCompletionPrefix(this.editor);this.base=E.doc.createAnchor(x.row,x.column-T.length),this.base.$insertRight=!0;var k={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:T,pos:x}).provideCompletions(this.editor,k,(function($,R,A){var C=R.filtered,M=p.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),A){if(!C.length){var I=!this.autoShown&&this.emptyMessage;if(typeof I=="function"&&(I=this.emptyMessage(M)),I){var D=[{caption:I,value:""}];this.completions=new S(D),this.openPopup(this.editor,M,_),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(C.length==1&&C[0].value==M&&!C[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&C.length==1)return this.insertMatch(C[0])}this.completions=!A&&this.showLoadingState?new S(b.completionsForLoading.concat(C),R.filterText):R,this.openPopup(this.editor,M,_),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!A)}).bind(this)),this.showLoadingState&&!this.autoShown&&!(this.popup&&this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},b.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},b.prototype.updateDocTooltip=function(){var _=this.popup,v=this.completions.filtered,E=v&&(v[_.getHoveredRow()]||v[_.getRow()]),x=null;if(!E||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var T=this.editor.completers.length,k=0;k<T;k++){var $=this.editor.completers[k];if($.getDocTooltip&&E.completerId===$.id){x=$.getDocTooltip(E);break}}if(!x&&typeof E!="string"&&(x=E),typeof x=="string"&&(x={docText:x}),!x||!(x.docHTML||x.docText))return this.hideDocTooltip();this.showDocTooltip(x)},b.prototype.showDocTooltip=function(_){this.tooltipNode||(this.tooltipNode=c.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",m));var v=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(v.isDark?"ace_dark ":"")+(v.cssClass||"");var E=this.tooltipNode;_.docHTML?E.innerHTML=_.docHTML:_.docText&&(E.textContent=_.docText),E.parentNode||this.popup.container.appendChild(this.tooltipNode);var x=this.popup,T=x.container.getBoundingClientRect();E.style.top=x.container.style.top,E.style.bottom=x.container.style.bottom,E.style.display="block",window.innerWidth-T.right<320?T.left<320?x.isTopdown?(E.style.top=T.bottom+"px",E.style.left=T.left+"px",E.style.right="",E.style.bottom=""):(E.style.top=x.container.offsetTop-E.offsetHeight+"px",E.style.left=T.left+"px",E.style.right="",E.style.bottom=""):(E.style.right=window.innerWidth-T.left+"px",E.style.left=""):(E.style.left=T.right+1+"px",E.style.right="")},b.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var _=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==_&&this.editor.focus(),this.tooltipNode=null,_.parentNode&&_.parentNode.removeChild(_)}},b.prototype.onTooltipClick=function(_){for(var v=_.target;v&&v!=this.tooltipNode;){if(v.nodeName=="A"&&v.href){v.rel="noreferrer",v.target="_blank";break}v=v.parentNode}},b.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var _=this.popup.container;_&&_.parentNode&&_.parentNode.removeChild(_)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",g),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},b}();y.prototype.commands={Up:function(b){b.completer.goTo("up")},Down:function(b){b.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(b){b.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(b){b.completer.goTo("end")},Esc:function(b){b.completer.detach()},Return:function(b){return b.completer.insertMatch()},"Shift-Return":function(b){b.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(b){var _=b.completer.insertMatch();if(!_&&!b.tabstopManager)b.completer.goTo("down");else return _},Backspace:function(b){b.execCommand("backspace");var _=p.getCompletionPrefix(b);!_&&b.completer&&b.completer.detach()},PageUp:function(b){b.completer.popup.gotoPageUp()},PageDown:function(b){b.completer.popup.gotoPageDown()}},y.for=function(b){return b.completer instanceof y||(b.completer&&(b.completer.destroy(),b.completer=null),f.get("sharedPopups")?(y.$sharedInstance||(y.$sharedInstance=new y),b.completer=y.$sharedInstance):(b.completer=new y,b.once("destroy",g))),b.completer},y.startCommand={name:"startAutocomplete",exec:function(b,_){var v=y.for(b);v.autoInsert=!1,v.autoSelect=!0,v.autoShown=!1,v.showPopup(b,_),v.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var w=function(){function b(_){this.initialPosition=_,this.active=!0}return b.prototype.insertByIndex=function(_,v,E){return!this.completions||!this.completions.filtered?!1:this.insertMatch(_,this.completions.filtered[v],E)},b.prototype.insertMatch=function(_,v,E){if(!v)return!1;if(_.startOperation({command:{name:"insertMatch"}}),v.completer&&v.completer.insertMatch)v.completer.insertMatch(_,v);else{if(!this.completions)return!1;var x=this.completions.filterText.length,T=0;if(v.range&&v.range.start.row===v.range.end.row&&(x-=this.initialPosition.prefix.length,x+=this.initialPosition.pos.column-v.range.start.column,T+=v.range.end.column-this.initialPosition.pos.column),x||T){var k;_.selection.getAllRanges?k=_.selection.getAllRanges():k=[_.getSelectionRange()];for(var $=0,R;R=k[$];$++)R.start.column-=x,R.end.column+=T,_.session.remove(R)}v.snippet?h.insertSnippet(_,v.snippet):this.$insertString(_,v),v.completer&&v.completer.onInsert&&typeof v.completer.onInsert=="function"&&v.completer.onInsert(_,v),v.command&&v.command==="startAutocomplete"&&_.execCommand(v.command)}return _.endOperation(),!0},b.prototype.$insertString=function(_,v){var E=v.value||v;_.execCommand("insertstring",E)},b.prototype.gatherCompletions=function(_,v){var E=_.getSession(),x=_.getCursorPosition(),T=p.getCompletionPrefix(_),k=[];this.completers=_.completers;var $=_.completers.length;return _.completers.forEach(function(R,A){R.getCompletions(_,E,x,T,function(C,M){R.hideInlinePreview&&(M=M.map(function(I){return Object.assign(I,{hideInlinePreview:R.hideInlinePreview})})),!C&&M&&(k=k.concat(M)),v(null,{prefix:p.getCompletionPrefix(_),matches:k,finished:--$===0})})}),!0},b.prototype.provideCompletions=function(_,v,E){var x=(function(R){var A=R.prefix,C=R.matches;this.completions=new S(C),v.exactMatch&&(this.completions.exactMatch=!0),v.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(A),(R.finished||this.completions.filtered.length)&&E(null,this.completions,R.finished)}).bind(this),T=!0,k=null;if(this.gatherCompletions(_,(function(R,A){if(this.active){R&&(E(R,[],!0),this.detach());var C=A.prefix;if(C.indexOf(A.prefix)===0){if(T){k=A;return}x(A)}}}).bind(this)),T=!1,k){var $=k;k=null,x($)}},b.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(_){typeof _.cancel=="function"&&_.cancel()})},b}(),S=function(){function b(_,v){this.all=_,this.filtered=_,this.filterText=v||"",this.exactMatch=!1,this.ignoreCaption=!1}return b.prototype.setFilter=function(_){if(_.length>this.filterText&&_.lastIndexOf(this.filterText,0)===0)var v=this.filtered;else var v=this.all;this.filterText=_,v=this.filterCompletions(v,this.filterText),v=v.sort(function(x,T){return T.exactMatch-x.exactMatch||T.$score-x.$score||(x.caption||x.value).localeCompare(T.caption||T.value)});var E=null;v=v.filter(function(x){var T=x.snippet||x.caption||x.value;return T===E?!1:(E=T,!0)}),this.filtered=v},b.prototype.filterCompletions=function(_,v){var E=[],x=v.toUpperCase(),T=v.toLowerCase();e:for(var k=0,$;$=_[k];k++){var R=!this.ignoreCaption&&$.caption||$.value||$.snippet;if(R){var A=-1,C=0,M=0,I,D;if(this.exactMatch){if(v!==R.substr(0,v.length))continue e}else{var B=R.toLowerCase().indexOf(T);if(B>-1)M=B;else for(var F=0;F<v.length;F++){var j=R.indexOf(T[F],A+1),Z=R.indexOf(x[F],A+1);if(I=j>=0&&(Z<0||j<Z)?j:Z,I<0)continue e;D=I-A-1,D>0&&(A===-1&&(M+=10),M+=D,C=C|1<<F),A=I}}$.matchMask=C,$.exactMatch=M?0:1,$.$score=($.score||0)-M,E.push($)}}return E},b}();i.Autocomplete=y,i.CompletionProvider=w,i.FilteredList=S}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(n,i,r){var o=n("../range").Range,l=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function u(p,a){var c=p.getTextRange(o.fromPoints({row:0,column:0},a));return c.split(l).length-1}function s(p,a){var c=u(p,a),h=p.getValue().split(l),f=Object.create(null),d=h[c];return h.forEach(function(m,g){if(!(!m||m===d)){var y=Math.abs(c-g),w=h.length-y;f[m]?f[m]=Math.max(w,f[m]):f[m]=w}}),f}i.getCompletions=function(p,a,c,h,f){var d=s(a,c),m=Object.keys(d);f(null,m.map(function(g){return{caption:g,value:g,score:d[g],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(n,i,r){var o=n("../snippets").snippetManager,l=n("../autocomplete").Autocomplete,u=n("../config"),s=n("../lib/lang"),p=n("../autocomplete/util"),a=n("../autocomplete/text_completer"),c={getCompletions:function(x,T,k,$,R){if(T.$mode.completer)return T.$mode.completer.getCompletions(x,T,k,$,R);var A=x.session.getState(k.row),C=T.$mode.getCompletions(A,T,k,$);C=C.map(function(M){return M.completerId=c.id,M}),R(null,C)},id:"keywordCompleter"},h=function(x){var T={};return x.replace(/\${(\d+)(:(.*?))?}/g,function(k,$,R,A){return T[$]=A||""}).replace(/\$(\d+?)/g,function(k,$){return T[$]})},f={getCompletions:function(x,T,k,$,R){var A=[],C=T.getTokenAt(k.row,k.column);C&&C.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?A.push("html-tag"):A=o.getActiveScopes(x);var M=o.snippetMap,I=[];A.forEach(function(D){for(var B=M[D]||[],F=B.length;F--;){var j=B[F],Z=j.name||j.tabTrigger;Z&&I.push({caption:Z,snippet:j.content,meta:j.tabTrigger&&!j.name?j.tabTrigger+"⇥ ":"snippet",completerId:f.id})}},this),R(null,I)},getDocTooltip:function(x){x.snippet&&!x.docHTML&&(x.docHTML=["<b>",s.escapeHTML(x.caption),"</b>","<hr></hr>",s.escapeHTML(h(x.snippet))].join(""))},id:"snippetCompleter"},d=[f,a,c];i.setCompleters=function(x){d.length=0,x&&d.push.apply(d,x)},i.addCompleter=function(x){d.push(x)},i.textCompleter=a,i.keyWordCompleter=c,i.snippetCompleter=f;var m={name:"expandSnippet",exec:function(x){return o.expandWithTab(x)},bindKey:"Tab"},g=function(x,T){y(T.session.$mode)},y=function(x){typeof x=="string"&&(x=u.$modes[x]),x&&(o.files||(o.files={}),w(x.$id,x.snippetFileId),x.modes&&x.modes.forEach(y))},w=function(x,T){!T||!x||o.files[x]||(o.files[x]={},u.loadModule(T,function(k){k&&(o.files[x]=k,!k.snippets&&k.snippetText&&(k.snippets=o.parseSnippetFile(k.snippetText)),o.register(k.snippets||[],k.scope),k.includeScopes&&(o.snippetMap[k.scope].includeScopes=k.includeScopes,k.includeScopes.forEach(function($){y("ace/mode/"+$)})))}))},S=function(x){var T=x.editor,k=T.completer&&T.completer.activated;if(x.command.name==="backspace")k&&!p.getCompletionPrefix(T)&&T.completer.detach();else if(x.command.name==="insertstring"&&!k){b=x;var $=x.editor.$liveAutocompletionDelay;$?_.delay($):v(x)}},b,_=s.delayedCall(function(){v(b)},0),v=function(x){var T=x.editor,k=p.getCompletionPrefix(T),$=x.args,R=p.triggerAutocomplete(T,$);if(k&&k.length>=T.$liveAutocompletionThreshold||R){var A=l.for(T);A.autoShown=!0,A.showPopup(T)}},E=n("../editor").Editor;n("../config").defineOptions(E.prototype,"editor",{enableBasicAutocompletion:{set:function(x){x?(this.completers||(this.completers=Array.isArray(x)?x:d),this.commands.addCommand(l.startCommand)):this.commands.removeCommand(l.startCommand)},value:!1},enableLiveAutocompletion:{set:function(x){x?(this.completers||(this.completers=Array.isArray(x)?x:d),this.commands.on("afterExec",S)):this.commands.off("afterExec",S)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(x){x?(this.commands.addCommand(m),this.on("changeMode",g),g(null,this)):(this.commands.removeCommand(m),this.off("changeMode",g))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(n){e&&(e.exports=n)})}()})(oO);Tt.config.setModuleUrl("ace/theme/github",WD);Tt.config.setModuleUrl("ace/theme/chrome",HD);Tt.config.setModuleUrl("ace/theme/monokai",jD);Tt.config.setModuleUrl("ace/mode/json",GD);Tt.config.setModuleUrl("ace/mode/javascript",VD);Tt.config.setModuleUrl("ace/mode/html",zD);Tt.config.setModuleUrl("ace/mode/xml",UD);Tt.config.setModuleUrl("ace/mode/yaml",YD);Tt.config.setModuleUrl("ace/mode/base",XD);Tt.config.setModuleUrl("ace/mode/json_worker",ZD);Tt.config.setModuleUrl("ace/mode/javascript_worker",KD);Tt.config.setModuleUrl("ace/mode/html_worker",JD);Tt.config.setModuleUrl("ace/mode/xml_worker",QD);Tt.config.setModuleUrl("ace/snippets/json",qD);Tt.config.setModuleUrl("ace/snippets/javascript",eO);Tt.config.setModuleUrl("ace/snippets/html",tO);Tt.config.setModuleUrl("ace/snippets/xml",nO);Tt.config.setModuleUrl("ace/snippets/javascript",iO);Tt.config.setModuleUrl("ace/ext/searchbox",rO);Tt.require("ace/ext/language_tools");function q0(e,t,n,i){const r=Object.create(null);switch(r.event=t.event,t.listenerType){case"scriptListener":r.script=aO(e,t,i);break;case"expressionListener":r.expression=t.expression;break;case"delegateExpressionListener":r.delegateExpression=t.delegateExpression;break;default:r.class=t.class}if(t.fields&&(r.fields=t.fields.map(o=>sO(e,o,i))),n&&t.event==="timeout"&&t.eventDefinitionType){const o=e.moddle.create("bpmn:FormalExpression",{body:t.eventTimeDefinitions}),l=e.moddle.create("bpmn:TimerEventDefinition",{id:`TimerEventDefinition_${lO(8)}`,[`time${t.eventDefinitionType.replace(/^\S/,u=>u.toUpperCase())}`]:o});r.eventDefinitions=[l]}return e.moddle.create(`${i}:${n?"TaskListener":"ExecutionListener"}`,r)}function sO(e,t,n){const{name:i,fieldType:r,string:o,expression:l}=t,u=r==="string"?{name:i,string:o}:{name:i,expression:l};return e.moddle.create(`${n}:Field`,u)}function aO(e,t,n){const{scriptType:i,scriptFormat:r,value:o,resource:l}=t,u=i==="inlineScript"?{scriptFormat:r,value:o}:{scriptFormat:r,resource:l};return e.moddle.create(`${n}:Script`,u)}function Dl(e,t,n){const i=e.moddle.create("bpmn:ExtensionElements",{values:n});e.modeling.updateProperties(t,{extensionElements:i})}function lO(e=8,t){let n="";const i=t||"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=e;r>0;--r)n+=i[Math.floor(Math.random()*i.length)];return n}function e_(e){let t={...e};if(e.script&&(t={...e,...e.script,scriptType:e.script.resource?"externalScript":"inlineScript"}),e.event==="timeout"&&e.eventDefinitions&&e.eventDefinitions.length){let n="";for(const i in e.eventDefinitions[0])e.eventDefinitions,i.indexOf("time")!==-1&&(n=i,t.eventDefinitionType=i.replace("time","").toLowerCase());t.eventTimeDefinitions=e.eventDefinitions[0][n].body}return t}function t_(e){let t;return e.class&&(t="classListener"),e.expression&&(t="expressionListener"),e.delegateExpression&&(t="delegateExpressionListener"),e.script&&(t="scriptListener"),{...JSON.parse(JSON.stringify(e)),...e.script??{},listenerType:t}}const n_={classListener:"Java 类",expressionListener:"表达式",delegateExpressionListener:"代理表达式",scriptListener:"脚本"},cO={create:"创建",assignment:"指派",complete:"完成",delete:"删除",update:"更新",timeout:"超时"},i_={string:"字符串",expression:"表达式"},uO={class:"w100"},pO={key:0},hO={key:1},dO={class:"w100 mt-1"},fO={class:"listener-filed__title"},mO=Le("span",null,[Le("i",{class:"a-icon-menu"}),ae("注入字段：")],-1),gO={key:0},vO={key:1},yO={key:2},bO={class:"w100 ub ub-ac ub-pc mt-2"},Li=kt({__name:"ElementListeners",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("bpmnInstances"),i=De("bpmnElement"),r=De("prefix"),o=e,l=ue([{title:"序号",dataIndex:"index",fixed:"left",width:50},{title:"事件类型",dataIndex:"event",ellipsis:!0},{title:"监听器类型",dataIndex:"listenerType",ellipsis:!0},{title:"操作",dataIndex:"operation",width:100}]),u=ue([{title:"序号",dataIndex:"index",fixed:"left",width:50},{title:"字段名称",dataIndex:"name",ellipsis:!0},{title:"字段类型",dataIndex:"fieldType",ellipsis:!0},{title:"字段值/表达式",dataIndex:"expression",ellipsis:!0},{title:"操作",dataIndex:"operation"}]),s=ue([]),p=ue({}),a=ue(!1),c=ue([]),h=ue({}),f=ue(!1),d=ue(-1),m=ue(-1),g=ue(n_),y=ue(i_),w=ue(),S=ue(),b=ue([]),_=ue([]);Wt(()=>o.bpmnElementId,A=>{it(()=>{v()})},{deep:!0,immediate:!0});const v=()=>{var A,C,M;b.value=[],_.value=((M=(C=(A=o.businessObject)==null?void 0:A.extensionElements)==null?void 0:C.values)==null?void 0:M.filter(I=>I.$type===`${r}:ExecutionListener`))??[],s.value=_.value.map(I=>t_(I))},E=async()=>{var D,B,F;const A=n(),C=i();if(!await w.value.validate())return;const I=q0(A,p.value,!1,r);d.value===-1?(_.value.push(I),s.value.push(p.value)):(_.value.splice(d.value,1,I),s.value.splice(d.value,1,p.value)),b.value=((F=(B=(D=o.businessObject)==null?void 0:D.extensionElements)==null?void 0:B.values)==null?void 0:F.filter(j=>j.$type!==`${r}:ExecutionListener`))??[],Dl(A,C,b.value.concat(_.value)),a.value=!1,p.value={}},x=(A,C)=>{A?(p.value=e_(A),d.value=C):(p.value={},d.value=-1),A&&A.fields?c.value=A.fields.map(M=>({...M,fieldType:M.string?"string":"expression"})):(c.value=[],p.value.fields=[]),a.value=!0,it(()=>{var M;w!=null&&w.value&&((M=w==null?void 0:w.value)==null||M.clearValidate())})},T=(A,C)=>{h.value=A?JSON.parse(JSON.stringify(A)):{},m.value=A?C:-1,f.value=!0,it(()=>{var M;S!=null&&S.value&&((M=S==null?void 0:S.value)==null||M.clearValidate())})},k=async()=>{await S.value.validate()&&(m.value===-1?(c.value.push(h.value),p.value.fields.push(h.value)):(c.value.splice(m.value,1,h.value),p.value.fields.splice(m.value,1,h.value)),f.value=!1,it(()=>h.value={}))},$=(A,C)=>{di.confirm({title:"提示",content:"确认移除该字段吗？",okText:"确 认",cancelText:"取 消",onOk(){c.value.splice(C,1),p.value.fields.splice(C,1)},onCancel(){console.info("操作取消"),di.destroyAll()}})},R=(A,C)=>{const M=n(),I=i();di.confirm({title:"提示",content:"确认移除该监听器吗？",okText:"确 认",cancelText:"取 消",onOk(){_.value.splice(C,1),s.value.splice(C,1),Dl(M,I,b.value.concat(_.value))},onCancel(){console.info("操作取消"),di.destroyAll()}})};return(A,C)=>{const M=oe("a-button"),I=oe("a-table"),D=oe("a-select-option"),B=oe("a-select"),F=oe("a-form-item"),j=oe("a-input"),Z=oe("a-form"),Q=oe("a-divider"),W=oe("a-drawer"),V=oe("a-modal");return le(),Oe(lt,null,[Le("div",uO,[H(I,{class:"ant-table-striped","row-class-name":(G,U)=>U%2===1?"table-striped":null,bordered:"",size:"small",columns:l.value,"row-key":G=>G.id,"data-source":s.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:G,record:U,index:ee})=>[G.dataIndex==="index"?(le(),Oe("a",pO,Xe(parseInt(ee)+1),1)):be("",!0),G.dataIndex==="listenerType"?(le(),Oe("span",hO,Xe(g.value[U.listenerType]),1)):be("",!0),G.dataIndex==="operation"?(le(),Oe(lt,{key:2},[H(M,{type:"link",size:"small",onClick:Y=>x(U,ee)},{default:X(()=>[ae(Xe(A.$t("opts.edit")),1)]),_:2},1032,["onClick"]),H(M,{type:"link",size:"small",onClick:Y=>R(U,ee)},{default:X(()=>[ae(Xe(A.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",dO,[H(M,{block:"",type:"primary",onClick:C[0]||(C[0]=G=>x(null))},{default:X(()=>[ae("添加监听器")]),_:1})])]),H(W,{open:a.value,"onUpdate:open":C[12]||(C[12]=G=>a.value=G),title:"执行监听器",width:"500px",placement:"right",destroyOnClose:""},{default:X(()=>[H(Z,{model:p.value,layout:"vertical",ref_key:"listenerFormRef",ref:w},{default:X(()=>[H(F,{label:"事件类型",name:"event",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(B,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"},value:p.value.event,"onUpdate:value":C[1]||(C[1]=G=>p.value.event=G)},{default:X(()=>[H(D,{value:"start"},{default:X(()=>[ae("start")]),_:1}),H(D,{value:"end"},{default:X(()=>[ae("end")]),_:1})]),_:1},8,["filter-option","placeholder","value"])]),_:1}),H(F,{label:"监听器类型",name:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(B,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"},value:p.value.listenerType,"onUpdate:value":C[2]||(C[2]=G=>p.value.listenerType=G)},{default:X(()=>[(le(!0),Oe(lt,null,$r(Object.keys(g.value),G=>(le(),Ce(D,{key:G,value:G},{default:X(()=>[ae(Xe(g.value[G]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),p.value.listenerType==="classListener"?(le(),Ce(F,{key:0,label:"Java类",name:"class",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(j,{allowClear:"",placeholder:A.$t("inputTips"),value:p.value.class,"onUpdate:value":C[3]||(C[3]=G=>p.value.class=G),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):be("",!0),p.value.listenerType==="expressionListener"?(le(),Ce(F,{key:1,label:"表达式",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(j,{value:p.value.expression,"onUpdate:value":C[4]||(C[4]=G=>p.value.expression=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),p.value.listenerType==="delegateExpressionListener"?(le(),Ce(F,{key:2,label:"代理表达式",name:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(j,{value:p.value.delegateExpression,"onUpdate:value":C[5]||(C[5]=G=>p.value.delegateExpression=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),p.value.listenerType==="scriptListener"?(le(),Oe(lt,{key:3},[H(F,{label:"脚本格式",name:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本格式"}},{default:X(()=>[H(j,{value:p.value.scriptFormat,"onUpdate:value":C[6]||(C[6]=G=>p.value.scriptFormat=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1}),H(F,{label:"脚本类型",name:"scriptType",rules:{required:!0,trigger:["blur","change"],message:"请选择脚本类型"}},{default:X(()=>[H(B,{value:p.value.scriptType,"onUpdate:value":C[7]||(C[7]=G=>p.value.scriptType=G),"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"}},{default:X(()=>[H(D,{value:"inlineScript"},{default:X(()=>[ae("内联脚本")]),_:1}),H(D,{value:"externalScript"},{default:X(()=>[ae("外部脚本")]),_:1})]),_:1},8,["value","filter-option","placeholder"])]),_:1}),p.value.scriptType==="inlineScript"?(le(),Ce(F,{key:0,label:"脚本内容",name:"value",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本内容"}},{default:X(()=>[H(j,{value:p.value.value,"onUpdate:value":C[8]||(C[8]=G=>p.value.value=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),p.value.scriptType==="externalScript"?(le(),Ce(F,{key:1,label:"资源地址",name:"resource",rules:{required:!0,trigger:["blur","change"],message:"请填写资源地址"}},{default:X(()=>[H(j,{value:p.value.resource,"onUpdate:value":C[9]||(C[9]=G=>p.value.resource=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0)],64)):be("",!0)]),_:1},8,["model"]),H(Q),Le("p",fO,[mO,H(M,{size:"small",type:"primary",onClick:C[10]||(C[10]=G=>T(null))},{default:X(()=>[ae("添加字段")]),_:1})]),H(I,{class:"ant-table-striped","row-class-name":(G,U)=>U%2===1?"table-striped":null,bordered:"",size:"small",columns:u.value,"row-key":G=>G.id,"data-source":c.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:G,record:U,index:ee})=>[G.dataIndex==="index"?(le(),Oe("a",gO,Xe(parseInt(ee)+1),1)):be("",!0),G.dataIndex==="fieldType"?(le(),Oe("span",vO,Xe(y.value[U.fieldType]),1)):be("",!0),G.dataIndex==="expression"?(le(),Oe("span",yO,Xe(U.string||U.expression),1)):be("",!0),G.dataIndex==="operation"?(le(),Oe(lt,{key:3},[H(M,{type:"link",size:"small",onClick:Y=>T(U,ee)},{default:X(()=>[ae(Xe(A.$t("opts.edit")),1)]),_:2},1032,["onClick"]),H(M,{type:"link",size:"small",onClick:Y=>$(U,ee)},{default:X(()=>[ae(Xe(A.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",bO,[H(M,{onClick:C[11]||(C[11]=G=>a.value=!1)},{default:X(()=>[ae("取 消")]),_:1}),H(M,{class:"ml-2",type:"primary",onClick:E},{default:X(()=>[ae("保 存")]),_:1})])]),_:1},8,["open"]),H(V,{open:f.value,"onUpdate:open":C[18]||(C[18]=G=>f.value=G),title:"字段配置",width:"500px",cancelText:A.$t("opts.cancel"),okText:A.$t("opts.sure"),destroyOnClose:""},{footer:X(()=>[H(M,{key:"back",onClick:C[13]||(C[13]=G=>f.value=!1)},{default:X(()=>[ae(Xe(A.$t("opts.cancel")),1)]),_:1}),H(M,{key:"submit",type:"primary",onClick:k},{default:X(()=>[ae(Xe(A.$t("opts.sure")),1)]),_:1})]),default:X(()=>[H(Z,{model:h.value,layout:"vertical",ref_key:"listenerFieldFormRef",ref:S},{default:X(()=>[H(F,{label:"字段名称",name:"name",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(j,{allowClear:"",placeholder:A.$t("inputTips"),value:h.value.name,"onUpdate:value":C[14]||(C[14]=G=>h.value.name=G),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),H(F,{label:"字段类型",name:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(B,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:A.$t("selectTips"),style:{width:"100%"},value:h.value.fieldType,"onUpdate:value":C[15]||(C[15]=G=>h.value.fieldType=G)},{default:X(()=>[(le(!0),Oe(lt,null,$r(Object.keys(y.value),G=>(le(),Ce(D,{key:G,value:G},{default:X(()=>[ae(Xe(y.value[G]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),h.value.fieldType==="string"?(le(),Ce(F,{key:0,label:"字段值：",name:"string",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(j,{value:h.value.string,"onUpdate:value":C[16]||(C[16]=G=>h.value.string=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),h.value.fieldType==="expression"?(le(),Ce(F,{key:1,label:"表达式：",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(j,{value:h.value.expression,"onUpdate:value":C[17]||(C[17]=G=>h.value.expression=G),valueModifiers:{trim:!0},placeholder:A.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0)]),_:1},8,["model"])]),_:1},8,["open","cancelText","okText"])],64)}}}),wO={class:"w100"},_O={key:0},EO={class:"w100 mt-1"},On=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("bpmnInstances"),n=De("bpmnElement"),i=De("prefix"),r=e,o=ue([{title:"序号",dataIndex:"index",fixed:"left",width:50},{title:"属性名",dataIndex:"name",ellipsis:!0},{title:"属性值",dataIndex:"value",ellipsis:!0},{title:"操作",dataIndex:"operation",width:120}]),l=ue([]),u=ue({}),s=ue(-1),p=ue(!1),a=ue(),c=ue(),h=ue(),f=ue();Wt(()=>r.businessObject,S=>{it(()=>{d()})},{deep:!0,immediate:!0});const d=()=>{var S,b,_;a.value=[],c.value=((_=(b=(S=r.businessObject)==null?void 0:S.extensionElements)==null?void 0:b.values)==null?void 0:_.filter(v=>(v.$type!==`${i}:Properties`&&a.value.push(v),v.$type===`${i}:Properties`)))??[],h.value=c.value.reduce((v,E)=>v.concat(E.values),[]),l.value=JSON.parse(JSON.stringify(h.value??[]))},m=(S,b)=>{s.value=b,u.value=b===-1?{}:JSON.parse(JSON.stringify(S)),p.value=!0,it(()=>{f.value&&f.value.clearValidate()})},g=S=>{const b=t(),_=n(),v=b.moddle.create("bpmn:ExtensionElements",{values:a.value.concat([S])});b.modeling.updateProperties(_,{extensionElements:v})},y=(S,b)=>{const _=t();di.confirm({title:()=>"提示",icon:()=>H(f_),content:()=>"确认移除该属性吗？",onOk(){l.value.splice(b,1),h.value.splice(b,1);const v=_.moddle.create(`${i}:Properties`,{values:h.value});g(v),d()},onCancel(){console.info("操作取消")}})},w=()=>{const S=t(),b=n(),{name:_,value:v}=u.value;if(s.value!==-1)S.modeling.updateModdleProperties(b,ti(h.value)[ti(s.value)],{name:_,value:v});else{const E=S.moddle.create(`${i}:Property`,{name:_,value:v}),x=S.moddle.create(`${i}:Properties`,{values:h.value.concat([E])});g(x)}p.value=!1,d()};return(S,b)=>{const _=oe("a-button"),v=oe("a-table"),E=oe("a-input"),x=oe("a-form-item"),T=oe("a-form"),k=oe("a-modal");return le(),Oe(lt,null,[Le("div",wO,[H(v,{class:"ant-table-striped","row-class-name":($,R)=>R%2===1?"table-striped":null,bordered:"",size:"small",columns:o.value,"row-key":$=>$.id,"data-source":l.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:$,record:R,index:A})=>[$.dataIndex==="index"?(le(),Oe("a",_O,Xe(parseInt(A)+1),1)):be("",!0),$.dataIndex==="operation"?(le(),Oe(lt,{key:1},[H(_,{type:"link",size:"small",onClick:C=>m(R,A)},{default:X(()=>[ae(Xe(S.$t("opts.edit")),1)]),_:2},1032,["onClick"]),H(_,{type:"link",size:"small",onClick:C=>y(R,A)},{default:X(()=>[ae(Xe(S.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",EO,[H(_,{block:"",type:"primary",onClick:b[0]||(b[0]=$=>m(null,-1))},{default:X(()=>[ae("添加属性")]),_:1})])]),H(k,{open:p.value,"onUpdate:open":b[4]||(b[4]=$=>p.value=$),title:"属性配置",width:"600px",cancelText:S.$t("opts.cancel"),okText:S.$t("opts.sure"),destroyOnClose:""},{footer:X(()=>[H(_,{key:"back",onClick:b[1]||(b[1]=$=>p.value=!1)},{default:X(()=>[ae(Xe(S.$t("opts.cancel")),1)]),_:1}),H(_,{key:"submit",type:"primary",onClick:w},{default:X(()=>[ae(Xe(S.$t("opts.sure")),1)]),_:1})]),default:X(()=>[H(T,{model:u.value,layout:"vertical",ref_key:"attributeFormRef",ref:f},{default:X(()=>[H(x,{label:"属性名",name:"name",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(E,{allowClear:"",placeholder:S.$t("inputTips"),value:u.value.name,"onUpdate:value":b[2]||(b[2]=$=>u.value.name=$),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),H(x,{label:"属性值：",name:"value",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(E,{value:u.value.value,"onUpdate:value":b[3]||(b[3]=$=>u.value.value=$),valueModifiers:{trim:!0},placeholder:S.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open","cancelText","okText"])],64)}}}),xO=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("updateProperties"),n=De("bpmnElement"),i=e,r=Zt({id:"",name:""});Wt(()=>i.businessObject,u=>{it(()=>{o(u)})},{deep:!0,immediate:!0});const o=u=>{r.id=u.id,r.name=u.name},l=u=>{const s=n(),p=Object.create(null);p[u]=r[u],u==="id"?t(s,{id:r[u]}):t(s,p)};return(u,s)=>{const p=oe("a-input"),a=oe("a-form-item"),c=oe("a-divider"),h=oe("a-form");return le(),Ce(h,{model:r,layout:"vertical"},{default:X(()=>[H(a,{label:"ID"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.id,"onUpdate:value":s[0]||(s[0]=f=>r.id=f),valueModifiers:{trim:!0},onChange:s[1]||(s[1]=f=>l("id"))},null,8,["placeholder","value"])]),_:1}),H(a,{label:"名称"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.name,"onUpdate:value":s[2]||(s[2]=f=>r.name=f),valueModifiers:{trim:!0},onChange:s[3]||(s[3]=f=>l("name"))},null,8,["placeholder","value"])]),_:1}),H(c),H(a,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(a,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),SO=kt({__name:"StartEnd",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("updateProperties"),n=De("bpmnElement"),i=e,r=Zt({id:"",name:""});Wt(()=>i.businessObject,u=>{it(()=>{o(u)})},{deep:!0,immediate:!0});const o=u=>{r.id=u.id,r.name=u.name},l=u=>{const s=n(),p=Object.create(null);p[u]=r[u],u==="id"?t(s,{id:r[u]}):t(s,p)};return(u,s)=>{const p=oe("a-input"),a=oe("a-form-item"),c=oe("a-divider"),h=oe("a-form");return le(),Ce(h,{model:r,layout:"vertical"},{default:X(()=>[H(a,{label:"ID"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.id,"onUpdate:value":s[0]||(s[0]=f=>r.id=f),valueModifiers:{trim:!0},onChange:s[1]||(s[1]=f=>l("id"))},null,8,["placeholder","value"])]),_:1}),H(a,{label:"名称"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.name,"onUpdate:value":s[2]||(s[2]=f=>r.name=f),valueModifiers:{trim:!0},onChange:s[3]||(s[3]=f=>l("name"))},null,8,["placeholder","value"])]),_:1}),H(c),H(a,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(a,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),CO=kt({__name:"Process",props:{bpmnElementId:{type:String},roles:{type:Array,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("updateProperties"),i=De("bpmnElement")(),r=ue(),o=e,l=Zt({id:"",name:""});return a_(()=>{l.id=o.businessObject.id,l.name=o.businessObject.name}),Wt(()=>l.name,u=>{t(i,{name:u})}),av(()=>{r.value.validate().then(async()=>{}).catch(u=>{lv.error("有必选或者必填字段没有选择或填写！")})}),(u,s)=>{const p=oe("a-input"),a=oe("a-form-item"),c=oe("a-form");return le(),Ce(c,{ref_key:"formRef",ref:r,model:l,layout:"vertical"},{default:X(()=>[H(a,{label:"流程标识",name:"id",rules:[{required:!0}]},{default:X(()=>[H(p,{disabled:"",allowClear:"",placeholder:u.$t("inputTips"),value:l.id,"onUpdate:value":s[0]||(s[0]=h=>l.id=h),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),H(a,{label:"流程名称",name:"name",rules:[{required:!0}]},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:l.name,"onUpdate:value":s[1]||(s[1]=h=>l.name=h),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),H(a,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),AO={};function TO(e,t){return le(),Oe("div",null,"该任务目前不支持")}const $O=cv(AO,[["render",TO]]),RO=kt({__name:"Stage",props:{bpmnElementId:{type:String},roles:{type:Array,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("updateProperties"),n=De("bpmnElement"),i=e,r=Zt({id:"",name:""});Wt(()=>i.businessObject,u=>{it(()=>{o(u)})},{deep:!0,immediate:!0});const o=u=>{var s;r.id=u.id,r.name=(s=u==null?void 0:u.categoryValueRef)==null?void 0:s.value},l=u=>{const s=n(),p=Object.create(null);p[u]=r[u],u==="id"?t(s,{id:r[u]}):t(s,p)};return(u,s)=>{const p=oe("a-input"),a=oe("a-form-item"),c=oe("a-form");return le(),Ce(c,{model:r,layout:"vertical"},{default:X(()=>[H(a,{label:"ID"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.id,"onUpdate:value":s[0]||(s[0]=h=>r.id=h),valueModifiers:{trim:!0},onChange:s[1]||(s[1]=h=>l("id"))},null,8,["placeholder","value"])]),_:1}),H(a,{label:"名称"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.name,"onUpdate:value":s[2]||(s[2]=h=>r.name=h),valueModifiers:{trim:!0},onChange:s[3]||(s[3]=h=>l("name"))},null,8,["placeholder","value"])]),_:1}),H(a,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),MO=kt({__name:"index",props:{bpmnElementId:{type:String},roles:{type:Array,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),r=De("bpmnInstances")(),o=De("bpmnElement"),l=e,u=ue([{label:"普通流转路径",value:"normal"},{label:"默认流转路径",value:"default"},{label:"条件流转路径",value:"condition"}]),s=ue([{label:"表达式",value:"expression"},{label:"脚本",value:"script"}]),p=ue([{label:"内联脚本",value:"inlineScript"},{label:"外部脚本",value:"externalScript"}]),a=Zt({id:"",name:"",type:void 0,conditionType:void 0,scriptType:void 0,body:"",resource:"",language:""}),c=()=>{a.id="",a.id="",a.type=void 0,a.conditionType=void 0,a.scriptType=void 0,a.body="",a.resource="",a.language=""},h=ue(!1);Wt(()=>l.businessObject,y=>{it(()=>{f(y)})},{deep:!0,immediate:!0});const f=y=>{var b;c();const w=o(),S=y.sourceRef;if(a.id=y.id,a.name=y.name,h.value=!(l.type==="bpmn:SequenceFlow"&&S&&S.$type.indexOf("StartEvent")>-1),!!h.value)if(S&&(S!=null&&S.default)&&((b=S==null?void 0:S.default)==null?void 0:b.id)===(w==null?void 0:w.id))a.type="default";else if(!w.businessObject.conditionExpression)a.type="normal";else{const _=y.conditionExpression;if(a.body=_.body,a.language=_.language,a.type="condition",a.resource){a.conditionType="script",a.scriptType="externalScript";return}if(_.language){a.conditionType="script",a.scriptType="inlineScript";return}a.conditionType="expression"}},d=()=>{const y=o(),{conditionType:w,scriptType:S,body:b,resource:_,language:v}=a;let E;w==="expression"?E=r.moddle.create("bpmn:FormalExpression",{body:b}):S==="inlineScript"?(E=r.moddle.create("bpmn:FormalExpression",{body:b,language:v}),a.resource=""):(a.body="",E=r.moddle.create("bpmn:FormalExpression",{resource:_,language:v})),n(y,{conditionExpression:E})},m=y=>{var _;const w=o(),S=w.source,b=l.businessObject.sourceRef;if(y==="condition"){const v=r.moddle.create("bpmn:FormalExpression");n(w,{conditionExpression:v});return}if(y==="default"){n(w,{conditionExpression:null}),n(S,{default:w});return}b!=null&&b.default&&((_=b==null?void 0:b.default)==null?void 0:_.id)===(w==null?void 0:w.id)&&n(S,{default:null}),n(w,{conditionExpression:null})},g=y=>{const w=o(),S=Object.create(null);S[y]=a[y],y==="id"?n(w,{id:a[y]}):n(w,S)};return(y,w)=>{const S=oe("a-input"),b=oe("a-form-item"),_=oe("a-select"),v=oe("a-textarea"),E=oe("a-form");return le(),Ce(E,{model:a,layout:"vertical"},{default:X(()=>[H(b,{label:"ID"},{default:X(()=>[H(S,{allowClear:"",placeholder:y.$t("inputTips"),value:a.id,"onUpdate:value":w[0]||(w[0]=x=>a.id=x),valueModifiers:{trim:!0},onChange:w[1]||(w[1]=x=>g("id"))},null,8,["placeholder","value"])]),_:1}),H(b,{label:"名称"},{default:X(()=>[H(S,{allowClear:"",placeholder:y.$t("inputTips"),value:a.name,"onUpdate:value":w[2]||(w[2]=x=>a.name=x),valueModifiers:{trim:!0},onChange:w[3]||(w[3]=x=>g("name"))},null,8,["placeholder","value"])]),_:1}),h.value?(le(),Oe(lt,{key:0},[H(b,{label:"流转类型"},{default:X(()=>[H(_,{"show-search":"","filter-option":Ct(t),options:u.value,allowClear:"",placeholder:y.$t("selectTips"),style:{width:"100%"},value:a.type,"onUpdate:value":w[4]||(w[4]=x=>a.type=x),onChange:m},null,8,["filter-option","options","placeholder","value"])]),_:1}),a.type==="condition"?(le(),Ce(b,{key:0,label:"条件格式"},{default:X(()=>[H(_,{"show-search":"","filter-option":Ct(t),options:s.value,allowClear:"",placeholder:y.$t("selectTips"),style:{width:"100%"},value:a.conditionType,"onUpdate:value":w[5]||(w[5]=x=>a.conditionType=x),onChange:m},null,8,["filter-option","options","placeholder","value"])]),_:1})):be("",!0),a.conditionType&&a.conditionType==="expression"?(le(),Ce(b,{key:1,label:"表达式"},{default:X(()=>[H(S,{allowClear:"",placeholder:y.$t("inputTips"),value:a.body,"onUpdate:value":w[6]||(w[6]=x=>a.body=x),valueModifiers:{trim:!0},onChange:d},null,8,["placeholder","value"])]),_:1})):be("",!0),a.conditionType&&a.conditionType==="script"?(le(),Oe(lt,{key:2},[H(b,{label:"脚本语言"},{default:X(()=>[H(S,{value:a.language,"onUpdate:value":w[7]||(w[7]=x=>a.language=x),valueModifiers:{trim:!0},clearable:"",onChange:d},null,8,["value"])]),_:1}),H(b,{label:"脚本类型"},{default:X(()=>[H(_,{"show-search":"","filter-option":Ct(t),options:p.value,allowClear:"",placeholder:y.$t("selectTips"),style:{width:"100%"},value:a.scriptType,"onUpdate:value":w[8]||(w[8]=x=>a.scriptType=x)},null,8,["filter-option","options","placeholder","value"])]),_:1}),a.scriptType==="inlineScript"?(le(),Ce(b,{key:0,label:"脚本"},{default:X(()=>[H(v,{value:a.body,"onUpdate:value":w[9]||(w[9]=x=>a.body=x),valueModifiers:{trim:!0},clearable:"",onChange:d},null,8,["value"])]),_:1})):be("",!0),a.scriptType==="externalScript"?(le(),Ce(b,{key:1,label:"资源地址"},{default:X(()=>[H(S,{value:a.resource,"onUpdate:value":w[10]||(w[10]=x=>a.resource=x),valueModifiers:{trim:!0},clearable:"",onChange:d},null,8,["value"])]),_:1})):be("",!0)],64)):be("",!0)],64)):be("",!0),H(b,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),kO=Le("br",null,null,-1),IO=Le("br",null,null,-1),LO=Le("br",null,null,-1),PO=Le("br",null,null,-1),DO=Le("br",null,null,-1),OO=Le("br",null,null,-1),NO=Le("br",null,null,-1),BO=Le("br",null,null,-1),FO=Le("br",null,null,-1),WO=Le("br",null,null,-1),HO=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),i=De("bpmnInstances"),r=De("bpmnElement"),o=e,l=ue([{label:"指定时间",value:"timeDate"},{label:"持续时间",value:"timeDuration"},{label:"周期执行",value:"timeCycle"}]),u=Zt({id:"",name:"",timeDefinitionType:void 0,FormalExpression:""});Wt(()=>o.businessObject,d=>{it(()=>{p(d)})},{deep:!0,immediate:!0});const s=()=>{u.id="",u.name="",u.timeDefinitionType=void 0,u.FormalExpression=""},p=d=>{var m,g,y,w,S,b,_,v,E;s(),u.id=d.id,u.name=d.name,d.hasOwnProperty("eventDefinitions")&&d.eventDefinitions.length>0&&d.eventDefinitions[0].$type=="bpmn:TimerEventDefinition"&&((g=(m=d.eventDefinitions[0])==null?void 0:m.timeDuration)!=null&&g.body?(u.timeDefinitionType="timeDuration",u.FormalExpression=(y=d.eventDefinitions[0].timeDuration)==null?void 0:y.body):(S=(w=d.eventDefinitions[0])==null?void 0:w.timeDate)!=null&&S.body?(u.timeDefinitionType="timeDate",u.FormalExpression=(b=d.eventDefinitions[0].timeDate)==null?void 0:b.body):(v=(_=d.eventDefinitions[0])==null?void 0:_.timeCycle)!=null&&v.body&&(u.timeDefinitionType="timeCycle",u.FormalExpression=(E=d.eventDefinitions[0].timeCycle)==null?void 0:E.body))},a=d=>{c(u.timeDefinitionType,d.target.value)},c=(d,m)=>{const g=i(),y=r(),w=y.businessObject.eventDefinitions[0],S=g.moddle.create("bpmn:FormalExpression",{body:m}),b=g.moddle.create("bpmn:FormalExpression",{body:m}),_=g.moddle.create("bpmn:FormalExpression",{body:m});d=="timeCycle"?(g.modeling.updateModdleProperties(y,w,{timeDate:null}),g.modeling.updateModdleProperties(y,w,{timeDuration:null}),g.modeling.updateModdleProperties(y,w,{timeCycle:S})):d=="timeDate"?(g.modeling.updateModdleProperties(y,w,{timeCycle:null}),g.modeling.updateModdleProperties(y,w,{timeDuration:null}),g.modeling.updateModdleProperties(y,w,{timeDate:b})):d=="timeDuration"&&(g.modeling.updateModdleProperties(y,w,{timeDate:null}),g.modeling.updateModdleProperties(y,w,{timeCycle:null}),g.modeling.updateModdleProperties(y,w,{timeDuration:_}))},h=d=>{u.FormalExpression="",u.timeDefinitionType=d,c(u.timeDefinitionType,u.FormalExpression)},f=d=>{const m=r(),g=Object.create(null);g[d]=u[d],d==="id"?n(m,{id:u[d]}):n(m,g)};return(d,m)=>{const g=oe("a-input"),y=oe("a-form-item"),w=oe("a-divider"),S=oe("a-select"),b=oe("a-tooltip"),_=oe("a-form");return le(),Ce(_,{model:u,layout:"vertical"},{default:X(()=>{var v;return[H(y,{label:"ID"},{default:X(()=>[H(g,{allowClear:"",placeholder:d.$t("inputTips"),value:u.id,"onUpdate:value":m[0]||(m[0]=E=>u.id=E),valueModifiers:{trim:!0},onChange:m[1]||(m[1]=E=>f("id"))},null,8,["placeholder","value"])]),_:1}),H(y,{label:"名称"},{default:X(()=>[H(g,{allowClear:"",placeholder:d.$t("inputTips"),value:u.name,"onUpdate:value":m[2]||(m[2]=E=>u.name=E),valueModifiers:{trim:!0},onChange:m[3]||(m[3]=E=>f("name"))},null,8,["placeholder","value"])]),_:1}),H(w),(v=e.businessObject)!=null&&v.eventDefinitions&&e.businessObject.eventDefinitions[0].$type.indexOf("TimerEventDefinition")!==-1?(le(),Oe(lt,{key:0},[H(y,{label:"事件类型"},{default:X(()=>[H(S,{"show-search":"","filter-option":Ct(t),options:l.value,allowClear:"",placeholder:d.$t("selectTips"),style:{width:"100%"},value:u.timeDefinitionType,"onUpdate:value":m[4]||(m[4]=E=>u.timeDefinitionType=E),onChange:h},null,8,["filter-option","options","placeholder","value"])]),_:1}),u.timeDefinitionType!==""?(le(),Ce(y,{key:0,label:"时间设置"},{default:X(()=>[H(b,null,{title:X(()=>[ae(" 事件类型配置说明"),kO,ae(" 1.指定时间(timeDate):触发事件的时间,如:2022-12-16T11:12:16 "),IO,ae(" 2.持续时间(timeDuration):指定时器之前需等待多长时间,使用ISO 8601规定的格式"),LO,ae(" (由BPMN 2.0规定),如PT5M(等待5分钟),也支持表达式${duration},"),PO,ae(" 这样你就可以通过流程变量来影响定时器定义"),DO,ae(" 3.周期执行(timeCycle):指定重复执行的间隔,可以用来定期启动流程实例,"),OO,ae(" 或为超时时间发送多个提醒。timeCycle元素可以使用两种格式。"),NO,ae(" 第一种是 ISO 8601 标准的格式。示例值(R3/PT5M)(重复3次,"),BO,ae(" 每次间隔5分钟),或也可以用cron表达式指定timeCycle,如从整点开始,"),FO,ae(" 每10分钟执行一次(0 0/10 * * * ?)"),WO]),default:X(()=>[H(g,{value:u.FormalExpression,"onUpdate:value":m[5]||(m[5]=E=>u.FormalExpression=E),valueModifiers:{trim:!0},placeholder:d.$t("inputTips"),clearable:"",onChange:a},null,8,["value","placeholder"])]),_:1})]),_:1})):be("",!0),H(w),H(y,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(y,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})],64)):be("",!0)]}),_:1},8,["model"])}}}),jO=Le("br",null,null,-1),GO=Le("br",null,null,-1),VO=Le("br",null,null,-1),zO=Le("br",null,null,-1),UO=Le("br",null,null,-1),YO=Le("br",null,null,-1),XO=Le("br",null,null,-1),ZO=Le("br",null,null,-1),KO=Le("br",null,null,-1),JO=Le("br",null,null,-1),QO=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),i=De("bpmnInstances"),r=De("bpmnElement"),o=e,l=ue([{label:"指定时间",value:"timeDate"},{label:"持续时间",value:"timeDuration"},{label:"周期执行",value:"timeCycle"}]),u=Zt({id:"",name:"",timeDefinitionType:void 0,FormalExpression:""});Wt(()=>o.businessObject,d=>{it(()=>{p(d)})},{deep:!0,immediate:!0});const s=()=>{u.id="",u.name="",u.timeDefinitionType=void 0,u.FormalExpression=""},p=d=>{var m,g,y,w,S,b,_,v,E;s(),u.id=d.id,u.name=d.name,d.hasOwnProperty("eventDefinitions")&&d.eventDefinitions.length>0&&d.eventDefinitions[0].$type=="bpmn:TimerEventDefinition"&&((g=(m=d.eventDefinitions[0])==null?void 0:m.timeDuration)!=null&&g.body?(u.timeDefinitionType="timeDuration",u.FormalExpression=(y=d.eventDefinitions[0].timeDuration)==null?void 0:y.body):(S=(w=d.eventDefinitions[0])==null?void 0:w.timeDate)!=null&&S.body?(u.timeDefinitionType="timeDate",u.FormalExpression=(b=d.eventDefinitions[0].timeDate)==null?void 0:b.body):(v=(_=d.eventDefinitions[0])==null?void 0:_.timeCycle)!=null&&v.body&&(u.timeDefinitionType="timeCycle",u.FormalExpression=(E=d.eventDefinitions[0].timeCycle)==null?void 0:E.body))},a=d=>{c(u.timeDefinitionType,d.target.value)},c=(d,m)=>{const g=i(),y=r(),w=y.businessObject.eventDefinitions[0],S=g.moddle.create("bpmn:FormalExpression",{body:m}),b=g.moddle.create("bpmn:FormalExpression",{body:m}),_=g.moddle.create("bpmn:FormalExpression",{body:m});d=="timeCycle"?(g.modeling.updateModdleProperties(y,w,{timeDate:null}),g.modeling.updateModdleProperties(y,w,{timeDuration:null}),g.modeling.updateModdleProperties(y,w,{timeCycle:S})):d=="timeDate"?(g.modeling.updateModdleProperties(y,w,{timeCycle:null}),g.modeling.updateModdleProperties(y,w,{timeDuration:null}),g.modeling.updateModdleProperties(y,w,{timeDate:b})):d=="timeDuration"&&(g.modeling.updateModdleProperties(y,w,{timeDate:null}),g.modeling.updateModdleProperties(y,w,{timeCycle:null}),g.modeling.updateModdleProperties(y,w,{timeDuration:_}))},h=d=>{u.FormalExpression="",u.timeDefinitionType=d,c(u.timeDefinitionType,u.FormalExpression)},f=d=>{const m=r(),g=Object.create(null);g[d]=u[d],d==="id"?n(m,{id:u[d]}):n(m,g)};return(d,m)=>{const g=oe("a-input"),y=oe("a-form-item"),w=oe("a-divider"),S=oe("a-select"),b=oe("a-tooltip"),_=oe("a-form");return le(),Ce(_,{model:u,layout:"vertical"},{default:X(()=>{var v;return[H(y,{label:"ID"},{default:X(()=>[H(g,{allowClear:"",placeholder:d.$t("inputTips"),value:u.id,"onUpdate:value":m[0]||(m[0]=E=>u.id=E),valueModifiers:{trim:!0},onChange:m[1]||(m[1]=E=>f("id"))},null,8,["placeholder","value"])]),_:1}),H(y,{label:"名称"},{default:X(()=>[H(g,{allowClear:"",placeholder:d.$t("inputTips"),value:u.name,"onUpdate:value":m[2]||(m[2]=E=>u.name=E),valueModifiers:{trim:!0},onChange:m[3]||(m[3]=E=>f("name"))},null,8,["placeholder","value"])]),_:1}),H(w),(v=e.businessObject)!=null&&v.eventDefinitions&&e.businessObject.eventDefinitions[0].$type.indexOf("TimerEventDefinition")!==-1?(le(),Oe(lt,{key:0},[H(y,{label:"事件类型"},{default:X(()=>[H(S,{"show-search":"","filter-option":Ct(t),options:l.value,allowClear:"",placeholder:d.$t("selectTips"),style:{width:"100%"},value:u.timeDefinitionType,"onUpdate:value":m[4]||(m[4]=E=>u.timeDefinitionType=E),onChange:h},null,8,["filter-option","options","placeholder","value"])]),_:1}),u.timeDefinitionType!==""?(le(),Ce(y,{key:0,label:"时间设置"},{default:X(()=>[H(b,null,{title:X(()=>[ae(" 事件类型配置说明"),jO,ae(" 1.指定时间(timeDate):触发事件的时间,如:2022-12-16T11:12:16 "),GO,ae(" 2.持续时间(timeDuration):指定时器之前需等待多长时间,使用ISO 8601规定的格式"),VO,ae(" (由BPMN 2.0规定),如PT5M(等待5分钟),也支持表达式${duration},"),zO,ae(" 这样你就可以通过流程变量来影响定时器定义"),UO,ae(" 3.周期执行(timeCycle):指定重复执行的间隔,可以用来定期启动流程实例,"),YO,ae(" 或为超时时间发送多个提醒。timeCycle元素可以使用两种格式。"),XO,ae(" 第一种是 ISO 8601 标准的格式。示例值(R3/PT5M)(重复3次,"),ZO,ae(" 每次间隔5分钟),或也可以用cron表达式指定timeCycle,如从整点开始,"),KO,ae(" 每10分钟执行一次(0 0/10 * * * ?)"),JO]),default:X(()=>[H(g,{value:u.FormalExpression,"onUpdate:value":m[5]||(m[5]=E=>u.FormalExpression=E),valueModifiers:{trim:!0},placeholder:d.$t("inputTips"),clearable:"",onChange:a},null,8,["value","placeholder"])]),_:1})]),_:1})):be("",!0),H(w),H(y,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(y,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})],64)):be("",!0)]}),_:1},8,["model"])}}}),qO={class:"w100"},eN={key:0},tN={key:1},nN={class:"w100 mt-1"},iN={class:"listener-filed__title"},rN=Le("span",null,[Le("i",{class:"a-icon-menu"}),ae("注入字段：")],-1),oN={key:0},sN={key:1},aN={key:2},lN={class:"w100 ub ub-ac ub-pc mt-2"},cN=kt({__name:"UserTaskListeners",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("bpmnInstances"),i=De("bpmnElement"),r=De("prefix"),o=e,l=ue([{title:"序号",dataIndex:"index",fixed:"left",width:50},{title:"事件类型",dataIndex:"event",ellipsis:!0},{title:"监听器类型",dataIndex:"listenerType",ellipsis:!0},{title:"操作",dataIndex:"operation",width:100}]),u=ue([{title:"序号",dataIndex:"index",fixed:"left",width:50},{title:"字段名称",dataIndex:"name",ellipsis:!0},{title:"字段类型",dataIndex:"fieldType",ellipsis:!0},{title:"字段值/表达式",dataIndex:"expression",ellipsis:!0},{title:"操作",dataIndex:"operation"}]),s=ue([]),p=ue({}),a=ue(!1),c=ue([]),h=ue({}),f=ue(!1),d=ue(-1),m=ue(-1),g=ue(cO),y=ue(n_),w=ue(i_),S=ue(),b=ue(),_=ue([]),v=ue([]);Wt(()=>o.bpmnElementId,C=>{it(()=>{E()})},{deep:!0,immediate:!0});const E=()=>{var C,M,I;_.value=[],v.value=((I=(M=(C=o.businessObject)==null?void 0:C.extensionElements)==null?void 0:M.values)==null?void 0:I.filter(D=>D.$type===`${r}:TaskListener`))??[],s.value=v.value.map(D=>t_(D))},x=async()=>{var B,F,j;const C=n(),M=i();if(!await S.value.validate())return;const D=q0(C,p.value,!0,r);d.value===-1?(v.value.push(D),s.value.push(p.value)):(v.value.splice(d.value,1,D),s.value.splice(d.value,1,p.value)),_.value=((j=(F=(B=o.businessObject)==null?void 0:B.extensionElements)==null?void 0:F.values)==null?void 0:j.filter(Z=>Z.$type!==`${r}:TaskListener`))??[],Dl(C,M,_.value.concat(v.value)),a.value=!1,p.value={}},T=(C,M)=>{C?(p.value=e_(C),d.value=M):(p.value={},d.value=-1),C&&C.fields?c.value=C.fields.map(I=>({...I,fieldType:I.string?"string":"expression"})):(c.value=[],p.value.fields=[]),a.value=!0,it(()=>{var I;S!=null&&S.value&&((I=S==null?void 0:S.value)==null||I.clearValidate())})},k=(C,M)=>{h.value=C?JSON.parse(JSON.stringify(C)):{},m.value=C?M:-1,f.value=!0,it(()=>{var I;b!=null&&b.value&&((I=b==null?void 0:b.value)==null||I.clearValidate())})},$=async()=>{await b.value.validate()&&(m.value===-1?(c.value.push(h.value),p.value.fields.push(h.value)):(c.value.splice(m.value,1,h.value),p.value.fields.splice(m.value,1,h.value)),f.value=!1,it(()=>h.value={}))},R=(C,M)=>{di.confirm({title:"提示",content:"确认移除该字段吗？",okText:"确 认",cancelText:"取 消",onOk(){c.value.splice(M,1),p.value.fields.splice(M,1)},onCancel(){console.info("操作取消"),di.destroyAll()}})},A=(C,M)=>{const I=n(),D=i();di.confirm({title:"提示",content:"确认移除该监听器吗？",okText:"确 认",cancelText:"取 消",onOk(){v.value.splice(M,1),s.value.splice(M,1),Dl(I,D,_.value.concat(v.value))},onCancel(){console.info("操作取消"),di.destroyAll()}})};return(C,M)=>{const I=oe("a-button"),D=oe("a-table"),B=oe("a-select-option"),F=oe("a-select"),j=oe("a-form-item"),Z=oe("a-input"),Q=oe("a-form"),W=oe("a-divider"),V=oe("a-drawer"),G=oe("a-modal");return le(),Oe(lt,null,[Le("div",qO,[H(D,{class:"ant-table-striped","row-class-name":(U,ee)=>ee%2===1?"table-striped":null,bordered:"",size:"small",columns:l.value,"row-key":U=>U.id,"data-source":s.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:U,record:ee,index:Y})=>[U.dataIndex==="index"?(le(),Oe("a",eN,Xe(parseInt(Y)+1),1)):be("",!0),U.dataIndex==="listenerType"?(le(),Oe("span",tN,Xe(y.value[ee.listenerType]),1)):be("",!0),U.dataIndex==="operation"?(le(),Oe(lt,{key:2},[H(I,{type:"link",size:"small",onClick:O=>T(ee,Y)},{default:X(()=>[ae(Xe(C.$t("opts.edit")),1)]),_:2},1032,["onClick"]),H(I,{type:"link",size:"small",onClick:O=>A(ee,Y)},{default:X(()=>[ae(Xe(C.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",nN,[H(I,{block:"",type:"primary",onClick:M[0]||(M[0]=U=>T(null))},{default:X(()=>[ae("添加监听器")]),_:1})])]),H(V,{open:a.value,"onUpdate:open":M[14]||(M[14]=U=>a.value=U),title:"任务监听器",width:"500px",placement:"right",destroyOnClose:""},{default:X(()=>[H(Q,{model:p.value,layout:"vertical",ref_key:"listenerFormRef",ref:S},{default:X(()=>[H(j,{label:"事件类型",name:"event",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(F,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:C.$t("selectTips"),style:{width:"100%"},value:p.value.event,"onUpdate:value":M[1]||(M[1]=U=>p.value.event=U)},{default:X(()=>[(le(!0),Oe(lt,null,$r(Object.keys(g.value),U=>(le(),Ce(B,{key:U,value:U},{default:X(()=>[ae(Xe(g.value[U]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),H(j,{label:"监听器类型",name:"listenerType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(F,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:C.$t("selectTips"),style:{width:"100%"},value:p.value.listenerType,"onUpdate:value":M[2]||(M[2]=U=>p.value.listenerType=U)},{default:X(()=>[(le(!0),Oe(lt,null,$r(Object.keys(y.value),U=>(le(),Ce(B,{key:U,value:U},{default:X(()=>[ae(Xe(y.value[U]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),p.value.listenerType==="classListener"?(le(),Ce(j,{key:0,label:"Java类",name:"class",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(Z,{allowClear:"",placeholder:C.$t("inputTips"),value:p.value.class,"onUpdate:value":M[3]||(M[3]=U=>p.value.class=U),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1})):be("",!0),p.value.listenerType==="expressionListener"?(le(),Ce(j,{key:1,label:"表达式",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(Z,{value:p.value.expression,"onUpdate:value":M[4]||(M[4]=U=>p.value.expression=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),p.value.listenerType==="delegateExpressionListener"?(le(),Ce(j,{key:2,label:"代理表达式",name:"delegateExpression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(Z,{value:p.value.delegateExpression,"onUpdate:value":M[5]||(M[5]=U=>p.value.delegateExpression=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),p.value.listenerType==="scriptListener"?(le(),Oe(lt,{key:3},[H(j,{label:"脚本格式",name:"scriptFormat",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本格式"}},{default:X(()=>[H(Z,{value:p.value.scriptFormat,"onUpdate:value":M[6]||(M[6]=U=>p.value.scriptFormat=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1}),H(j,{label:"脚本类型",name:"scriptType",rules:{required:!0,trigger:["blur","change"],message:"请选择脚本类型"}},{default:X(()=>[H(F,{value:p.value.scriptType,"onUpdate:value":M[7]||(M[7]=U=>p.value.scriptType=U),"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:C.$t("selectTips"),style:{width:"100%"}},{default:X(()=>[H(B,{value:"inlineScript"},{default:X(()=>[ae("内联脚本")]),_:1}),H(B,{value:"externalScript"},{default:X(()=>[ae("外部脚本")]),_:1})]),_:1},8,["value","filter-option","placeholder"])]),_:1}),p.value.scriptType==="inlineScript"?(le(),Ce(j,{key:0,label:"脚本内容",name:"value",rules:{required:!0,trigger:["blur","change"],message:"请填写脚本内容"}},{default:X(()=>[H(Z,{value:p.value.value,"onUpdate:value":M[8]||(M[8]=U=>p.value.value=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),p.value.scriptType==="externalScript"?(le(),Ce(j,{key:1,label:"资源地址",name:"resource",rules:{required:!0,trigger:["blur","change"],message:"请填写资源地址"}},{default:X(()=>[H(Z,{value:p.value.resource,"onUpdate:value":M[9]||(M[9]=U=>p.value.resource=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0)],64)):be("",!0),p.value.event==="timeout"?(le(),Oe(lt,{key:4},[H(j,{label:"定时器类型"},{default:X(()=>[H(F,{value:p.value.eventDefinitionType,"onUpdate:value":M[10]||(M[10]=U=>p.value.eventDefinitionType=U),"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:C.$t("selectTips"),style:{width:"100%"}},{default:X(()=>[H(B,{value:"date"},{default:X(()=>[ae("日期")]),_:1}),H(B,{value:"duration"},{default:X(()=>[ae("持续时长")]),_:1}),H(B,{value:"cycle"},{default:X(()=>[ae("循环")]),_:1}),H(B,{value:"null"},{default:X(()=>[ae("无")]),_:1})]),_:1},8,["value","filter-option","placeholder"])]),_:1}),p.value.eventDefinitionType&&p.value.eventDefinitionType!=="null"?(le(),Ce(j,{key:0,label:"定时器",name:"eventTimeDefinitions",rules:{required:!0,trigger:["blur","change"],message:"请填写定时器配置"}},{default:X(()=>[H(Z,{value:p.value.eventTimeDefinitions,"onUpdate:value":M[11]||(M[11]=U=>p.value.eventTimeDefinitions=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0)],64)):be("",!0)]),_:1},8,["model"]),H(W),Le("p",iN,[rN,H(I,{size:"small",type:"primary",onClick:M[12]||(M[12]=U=>k(null))},{default:X(()=>[ae("添加字段")]),_:1})]),H(D,{class:"ant-table-striped","row-class-name":(U,ee)=>ee%2===1?"table-striped":null,bordered:"",size:"small",columns:u.value,"row-key":U=>U.id,"data-source":c.value,pagination:!1,scroll:{y:500}},{bodyCell:X(({column:U,record:ee,index:Y})=>[U.dataIndex==="index"?(le(),Oe("a",oN,Xe(parseInt(Y)+1),1)):be("",!0),U.dataIndex==="fieldType"?(le(),Oe("span",sN,Xe(w.value[ee.fieldType]),1)):be("",!0),U.dataIndex==="expression"?(le(),Oe("span",aN,Xe(ee.string||ee.expression),1)):be("",!0),U.dataIndex==="operation"?(le(),Oe(lt,{key:3},[H(I,{type:"link",size:"small",onClick:O=>k(ee,Y)},{default:X(()=>[ae(Xe(C.$t("opts.edit")),1)]),_:2},1032,["onClick"]),H(I,{type:"link",size:"small",onClick:O=>R(ee,Y)},{default:X(()=>[ae(Xe(C.$t("opts.delete")),1)]),_:2},1032,["onClick"])],64)):be("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source"]),Le("div",lN,[H(I,{onClick:M[13]||(M[13]=U=>a.value=!1)},{default:X(()=>[ae("取 消")]),_:1}),H(I,{class:"ml-2",type:"primary",onClick:x},{default:X(()=>[ae("保 存")]),_:1})])]),_:1},8,["open"]),H(G,{open:f.value,"onUpdate:open":M[20]||(M[20]=U=>f.value=U),title:"字段配置",width:"500px",cancelText:C.$t("opts.cancel"),okText:C.$t("opts.sure"),destroyOnClose:""},{footer:X(()=>[H(I,{key:"back",onClick:M[15]||(M[15]=U=>f.value=!1)},{default:X(()=>[ae(Xe(C.$t("opts.cancel")),1)]),_:1}),H(I,{key:"submit",type:"primary",onClick:$},{default:X(()=>[ae(Xe(C.$t("opts.sure")),1)]),_:1})]),default:X(()=>[H(Q,{model:h.value,layout:"vertical",ref_key:"listenerFieldFormRef",ref:b},{default:X(()=>[H(j,{label:"字段名称",name:"name",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(Z,{allowClear:"",placeholder:C.$t("inputTips"),value:h.value.name,"onUpdate:value":M[16]||(M[16]=U=>h.value.name=U),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1}),H(j,{label:"字段类型",name:"fieldType",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(F,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:C.$t("selectTips"),style:{width:"100%"},value:h.value.fieldType,"onUpdate:value":M[17]||(M[17]=U=>h.value.fieldType=U)},{default:X(()=>[(le(!0),Oe(lt,null,$r(Object.keys(w.value),U=>(le(),Ce(B,{key:U,value:U},{default:X(()=>[ae(Xe(w.value[U]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"])]),_:1}),h.value.fieldType==="string"?(le(),Ce(j,{key:0,label:"字段值：",name:"string",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(Z,{value:h.value.string,"onUpdate:value":M[18]||(M[18]=U=>h.value.string=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0),h.value.fieldType==="expression"?(le(),Ce(j,{key:1,label:"表达式：",name:"expression",rules:{required:!0,trigger:["blur","change"]}},{default:X(()=>[H(Z,{value:h.value.expression,"onUpdate:value":M[19]||(M[19]=U=>h.value.expression=U),valueModifiers:{trim:!0},placeholder:C.$t("inputTips"),allowClear:""},null,8,["value","placeholder"])]),_:1})):be("",!0)]),_:1},8,["model"])]),_:1},8,["open","cancelText","okText"])],64)}}});function uN(e){const t={...e,...e.$attrs};return pN(t)}function pN(e){for(const t in e)if(t.indexOf("camunda:")===0){const n=t.replace("camunda:","");e[n]=e[t],delete e[t]}return e=hN(e),e}function hN(e){if("documentation"in e){let t="";e.documentation.forEach(n=>{t+=n.text}),e.documentation=t}return e}const dN={key:0,class:"w100 mt-2"},fN={key:1,class:"w100 mt-2"},mN={key:1,class:"ub ub-ac mt-1"},gN=Le("span",{class:"custom-label",style:{"margin-left":"5px"}},"顺序审批：",-1),vN=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),r=De("bpmnInstances")(),o=De("bpmnElement"),l={dataType:"",assignee:"",candidateUsers:"",candidateGroups:"",text:""},u=e,s=Zt({id:"",name:"",dataType:"",selectedUser:{ids:[],text:[]},roleIds:[]}),p=ue(!1),a=ue(!1),c=ue(!1),h=ue("Null"),f=ue(),d=ue("${nrOfCompletedInstances/nrOfInstances>=1}");Wt(()=>u.bpmnElementId,T=>{it(()=>{g()})},{deep:!0,immediate:!0});const m=()=>{p.value=!1,a.value=!1,c.value=!1,h.value="Null",f.value=null,d.value="${nrOfCompletedInstances/nrOfInstances>=1}"},g=()=>{var k;m();const T=uN(u.businessObject);if(s.id=T.id,s.name=T.name,w(),s.dataType=(T==null?void 0:T.dataType)??(((k=T.$attrs)==null?void 0:k.dataType)||""),l.dataType=s.dataType,s.dataType,s.dataType==="USERS"){const $=T.candidateUsers||T.assignee,R=T.text||[];$&&$.toString().length>0&&R&&R.length>0&&(s.selectedUser.ids=$==null?void 0:$.toString().split(","),s.selectedUser.text=R==null?void 0:R.split(",")),s.selectedUser.ids.length>1&&(a.value=!0)}else if(s.dataType==="ROLES"){const $=T.candidateGroups||[];$&&$.length>0&&(s.roleIds=$.split(",")),a.value=!0}y(T)},y=T=>{if(!T.loopCharacteristics){h.value="Null";return}c.value=T.loopCharacteristics.isSequential,T.loopCharacteristics.completionCondition&&(T.loopCharacteristics.completionCondition.body==="${nrOfCompletedInstances >= nrOfInstances}"?h.value="SequentialMultiInstance":T.loopCharacteristics.completionCondition.body==="${nrOfCompletedInstances > 0}"?h.value="ParallelMultiInstance":h.value="CustomMultiInstance")},w=()=>{s.selectedUser.ids=[],s.selectedUser.text=[],s.roleIds=[],Object.keys(l).forEach(T=>l[T]="")},S=()=>{p.value=!0},b=T=>{var $;const k=T.target.value;if(k==="ROLES"?a.value=!0:a.value=!1,h.value="Null",E(),Object.keys(l).forEach(R=>l[R]=""),l.dataType=k,k==="USERS")s.selectedUser&&s.selectedUser.ids&&s.selectedUser.ids.length>0&&(s.selectedUser.ids.length===1?l.assignee=s.selectedUser.ids[0]:l.candidateUsers=s.selectedUser.ids.join(),l.text=(($=s.selectedUser.text)==null?void 0:$.join())||"");else if(k==="ROLES"){if(s.roleIds&&s.roleIds.length>0){l.candidateGroups=s.roleIds.join()||"";const R=u.roles.filter(A=>s.roleIds.indexOf(`ROLE${A.roleId}`)>=0);l.text=(R==null?void 0:R.map(A=>A.roleName).join())||""}}else k==="MANAGER"||k==="INITIATOR"&&(l.assignee="${initiator}",l.text="流程发起人");v()},_=T=>{let k="",$="";if(T&&T.length>0){l.dataType="ROLES",k=T.join()||"";const R=u.roles.filter(A=>T.indexOf(`ROLE${A.value}`)>=0);$=(R==null?void 0:R.map(A=>A.label).join())||""}else l.dataType="",h.value="Null";l.candidateGroups=k,l.text=$,v(),E()},v=()=>{const T=o(),k=Object.create(null);for(const $ in l)k[$]=l[$];n(T,k)},E=()=>{const T=o();if(h.value==="Null"){n(T,{loopCharacteristics:null,assignee:null});return}f.value=r.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:c.value}),n(T,{loopCharacteristics:f.value,assignee:"${assignee}"});let k=null;h.value==="SequentialMultiInstance"&&(k=r.moddle.create("bpmn:FormalExpression",{body:"${nrOfCompletedInstances >= nrOfInstances}"})),h.value==="ParallelMultiInstance"&&(k=r.moddle.create("bpmn:FormalExpression",{body:"${nrOfCompletedInstances > 0}"})),h.value==="CustomMultiInstance"&&(k=r.moddle.create("bpmn:FormalExpression",{body:d.value})),r.modeling.updateModdleProperties(T,f.value,{collection:"${multiInstanceHandler.getUserNames(execution)}",elementVariable:"assignee",completionCondition:k})},x=T=>{const k=o(),$=Object.create(null);$[T]=s[T],T==="id"?n(k,{id:s[T]}):n(k,$)};return(T,k)=>{const $=oe("a-input"),R=oe("a-form-item"),A=oe("a-divider"),C=oe("a-radio"),M=oe("a-radio-group"),I=oe("a-row"),D=oe("a-tag"),B=oe("a-button"),F=oe("a-select"),j=oe("a-tooltip"),Z=oe("a-switch"),Q=oe("a-form");return le(),Ce(Q,{model:s,layout:"vertical"},{default:X(()=>[H(R,{label:"ID"},{default:X(()=>[H($,{allowClear:"",placeholder:T.$t("inputTips"),value:s.id,"onUpdate:value":k[0]||(k[0]=W=>s.id=W),valueModifiers:{trim:!0},onChange:k[1]||(k[1]=W=>x("id"))},null,8,["placeholder","value"])]),_:1}),H(R,{label:"名称"},{default:X(()=>[H($,{allowClear:"",placeholder:T.$t("inputTips"),value:s.name,"onUpdate:value":k[2]||(k[2]=W=>s.name=W),valueModifiers:{trim:!0},onChange:k[3]||(k[3]=W=>x("name"))},null,8,["placeholder","value"])]),_:1}),H(A),H(R,{label:"审批人设置"},{default:X(()=>[H(I,null,{default:X(()=>[H(M,{value:s.dataType,"onUpdate:value":k[4]||(k[4]=W=>s.dataType=W),onChange:b},{default:X(()=>[H(C,{value:"ROLES"},{default:X(()=>[ae("角色")]),_:1}),H(C,{value:"INITIATOR"},{default:X(()=>[ae("发起人")]),_:1})]),_:1},8,["value"])]),_:1}),H(I,null,{default:X(()=>[s.dataType==="USERS"?(le(),Oe("div",dN,[(le(!0),Oe(lt,null,$r(s.selectedUser.text,W=>(le(),Ce(D,{key:W,effect:"plain"},{default:X(()=>[ae(Xe(W),1)]),_:2},1024))),128)),Le("div",null,[H(B,{size:"small",type:"primary",onClick:k[5]||(k[5]=W=>S())},{default:X(()=>[ae("添加用户")]),_:1})])])):be("",!0),s.dataType==="ROLES"?(le(),Oe("div",fN,[H(F,{"show-search":"",mode:"multiple","filter-option":Ct(t),options:e.roles,allowClear:"",placeholder:T.$t("selectTips"),style:{width:"100%"},value:s.roleIds,"onUpdate:value":k[6]||(k[6]=W=>s.roleIds=W),onChange:_},null,8,["filter-option","options","placeholder","value"])])):be("",!0)]),_:1})]),_:1}),a.value?(le(),Ce(A,{key:0})):be("",!0),a.value?(le(),Ce(R,{key:1,label:"多实例审批方式"},{default:X(()=>[H(I,null,{default:X(()=>[H(M,{value:h.value,"onUpdate:value":k[7]||(k[7]=W=>h.value=W),name:"radioGroup",onChange:E},{default:X(()=>[H(I,null,{default:X(()=>[H(C,{value:"Null"},{default:X(()=>[ae("无")]),_:1})]),_:1}),H(I,null,{default:X(()=>[H(C,{value:"SequentialMultiInstance"},{default:X(()=>[ae("会签（需所有审批人同意）")]),_:1})]),_:1}),H(I,null,{default:X(()=>[H(C,{value:"ParallelMultiInstance"},{default:X(()=>[ae("或签（一名审批人同意即可）")]),_:1})]),_:1}),H(I,null,{default:X(()=>[H(C,{value:"CustomMultiInstance"},{default:X(()=>[ae("自定义会签条件")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),h.value==="CustomMultiInstance"?(le(),Ce(I,{key:0,class:"mt-1"},{default:X(()=>[H($,{value:d.value,"onUpdate:value":k[8]||(k[8]=W=>d.value=W),placeholder:T.$t("inputTips"),allowClear:"",onChange:E},null,8,["value","placeholder"])]),_:1})):be("",!0),h.value!=="Null"?(le(),Oe("div",mN,[H(j,null,{title:X(()=>[ae("开启后，实例需按顺序轮流审批")]),default:X(()=>[H(Ct(m_),{style:{fontSize:"16px"}})]),_:1}),gN,H(Z,{checked:c.value,"onUpdate:checked":k[9]||(k[9]=W=>c.value=W),onChange:E},null,8,["checked"])])):be("",!0)]),_:1})):be("",!0),H(A),H(R,{label:"任务监听器"},{default:X(()=>[H(cN,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(A),H(R,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(R,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),Kc=kt({__name:"ElementMultiInstance",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),i=De("bpmnInstances"),r=De("bpmnElement"),o=De("prefix"),l=e,u=ue(),s=ue(""),p=ue({completionCondition:"",loopCardinality:"",extensionElements:[],asyncAfter:!1,asyncBefore:!1,exclusive:!1}),a=ue({});Wt(()=>l.bpmnElementId,()=>{it(()=>{h(l.businessObject)})},{deep:!0,immediate:!0});const c=()=>{u.value=null,s.value="",a.value={},p.value.completionCondition="",p.value.loopCardinality="",p.value.extensionElements=[],p.value.asyncAfter=!1,p.value.asyncBefore=!1,p.value.exclusive=!1},h=S=>{var b,_,v,E;if(c(),!S.loopCharacteristics){s.value="Null",a.value={};return}if(S.loopCharacteristics.$type==="bpmn:StandardLoopCharacteristics"){s.value="StandardLoop",a.value={};return}S.loopCharacteristics.isSequential?s.value="SequentialMultiInstance":s.value="ParallelMultiInstance",a.value={...p.value,...S.loopCharacteristics,completionCondition:((_=(b=S.loopCharacteristics)==null?void 0:b.completionCondition)==null?void 0:_.body)??"",loopCardinality:((E=(v=S.loopCharacteristics)==null?void 0:v.loopCardinality)==null?void 0:E.body)??""},u.value=S.loopCharacteristics,S.loopCharacteristics.extensionElements&&S.loopCharacteristics.extensionElements.values&&S.loopCharacteristics.extensionElements.values.length&&(a.value.timeCycle=S.loopCharacteristics.extensionElements.values[0].body)},f=S=>{const b=i(),_=r();if(S==="Null"){n(_,{loopCharacteristics:null});return}if(S==="StandardLoop"){const v=b.moddle.create("bpmn:StandardLoopCharacteristics");n(_,{loopCharacteristics:v}),u.value=null;return}S==="SequentialMultiInstance"?u.value=b.moddle.create("bpmn:MultiInstanceLoopCharacteristics",{isSequential:!0}):u.value=b.moddle.create("bpmn:MultiInstanceLoopCharacteristics"),n(_,{loopCharacteristics:ti(u.value)})},d=S=>{const b=i(),_=r(),v=S.target.value;let E=null;v&&v.length&&(E=b.moddle.create("bpmn:FormalExpression",{body:v})),b.modeling.updateModdleProperties(_,ti(u.value),{loopCardinality:E})},m=S=>{const b=i(),_=r(),v=S.target.value;let E=null;v&&v.length&&(E=b.moddle.create("bpmn:FormalExpression",{body:v})),b.modeling.updateModdleProperties(_,ti(u.value),{completionCondition:E})},g=S=>{const b=i(),_=r(),v=S.target.value,E=b.moddle.create("bpmn:ExtensionElements",{values:[b.moddle.create(`${o}:FailedJobRetryTimeCycle`,{body:v})]});b.modeling.updateModdleProperties(_,ti(u.value),{extensionElements:E})},y=()=>{const S=i(),b=r();S.modeling.updateModdleProperties(b,ti(u.value),{collection:a.value.collection||null,elementVariable:a.value.elementVariable||null})},w=S=>{const b=i(),_=r(),{asyncBefore:v,asyncAfter:E}=a.value;let x=Object.create(null);!v&&!E?(a.value.exclusive=!1,x={asyncBefore:!1,asyncAfter:!1,exclusive:!1,extensionElements:null}):x[S]=a.value[S],b.modeling.updateModdleProperties(_,ti(u.value),x)};return(S,b)=>{const _=oe("a-select-option"),v=oe("a-select"),E=oe("a-form-item"),x=oe("a-input"),T=oe("a-checkbox"),k=oe("a-form");return le(),Oe("div",null,[H(k,{layout:"vertical"},{default:X(()=>[H(E,{label:"回路特性"},{default:X(()=>[H(v,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:S.$t("selectTips"),style:{width:"100%"},value:s.value,"onUpdate:value":b[0]||(b[0]=$=>s.value=$),onChange:f},{default:X(()=>[H(_,{value:"ParallelMultiInstance"},{default:X(()=>[ae("并行多重事件")]),_:1}),H(_,{value:"SequentialMultiInstance"},{default:X(()=>[ae("时序多重事件")]),_:1}),H(_,{value:"StandardLoop"},{default:X(()=>[ae("循环事件")]),_:1}),H(_,{value:"Null"},{default:X(()=>[ae("无")]),_:1})]),_:1},8,["filter-option","placeholder","value"])]),_:1}),s.value==="ParallelMultiInstance"||s.value==="SequentialMultiInstance"?(le(),Oe(lt,{key:0},[H(E,{label:"循环基数"},{default:X(()=>[H(x,{value:a.value.loopCardinality,"onUpdate:value":b[1]||(b[1]=$=>a.value.loopCardinality=$),placeholder:S.$t("inputTips"),allowClear:"",onChange:d},null,8,["value","placeholder"])]),_:1}),H(E,{label:"集合"},{default:X(()=>[H(x,{value:a.value.collection,"onUpdate:value":b[2]||(b[2]=$=>a.value.collection=$),placeholder:S.$t("inputTips"),allowClear:"",onChange:y},null,8,["value","placeholder"])]),_:1}),H(E,{label:"元素变量"},{default:X(()=>[H(x,{value:a.value.elementVariable,"onUpdate:value":b[3]||(b[3]=$=>a.value.elementVariable=$),placeholder:S.$t("inputTips"),allowClear:"",onChange:y},null,8,["value","placeholder"])]),_:1}),H(E,{label:"完成条件"},{default:X(()=>[H(x,{value:a.value.completionCondition,"onUpdate:value":b[4]||(b[4]=$=>a.value.completionCondition=$),placeholder:S.$t("inputTips"),allowClear:"",onChange:m},null,8,["value","placeholder"])]),_:1}),H(E,{label:"异步状态"},{default:X(()=>[H(T,{checked:a.value.asyncBefore,"onUpdate:checked":b[5]||(b[5]=$=>a.value.asyncBefore=$),onChange:b[6]||(b[6]=$=>w("asyncBefore"))},{default:X(()=>[ae("异步前")]),_:1},8,["checked"]),H(T,{checked:a.value.asyncAfter,"onUpdate:checked":b[7]||(b[7]=$=>a.value.asyncAfter=$),onChange:b[8]||(b[8]=$=>w("asyncAfter"))},{default:X(()=>[ae("异步后")]),_:1},8,["checked"]),a.value.asyncAfter||a.value.asyncBefore?(le(),Ce(T,{key:0,checked:a.value.exclusive,"onUpdate:checked":b[9]||(b[9]=$=>a.value.exclusive=$),onChange:b[10]||(b[10]=$=>w("exclusive"))},{default:X(()=>[ae("排除")]),_:1},8,["checked"])):be("",!0)]),_:1}),a.value.asyncAfter||a.value.asyncBefore?(le(),Ce(E,{key:0,label:"重试周期",name:"timeCycle"},{default:X(()=>[H(x,{value:a.value.timeCycle,"onUpdate:value":b[11]||(b[11]=$=>a.value.timeCycle=$),placeholder:S.$t("inputTips"),allowClear:"",onChange:g},null,8,["value","placeholder"])]),_:1})):be("",!0)],64)):be("",!0)]),_:1})])}}}),yN=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("updateProperties"),n=De("bpmnElement"),i=e,r=Zt({id:"",name:""});Wt(()=>i.businessObject,u=>{it(()=>{o(u)})},{deep:!0,immediate:!0});const o=u=>{r.id=u.id,r.name=u.name},l=u=>{const s=n(),p=Object.create(null);p[u]=r[u],u==="id"?t(s,{id:r[u]}):t(s,p)};return(u,s)=>{const p=oe("a-input"),a=oe("a-form-item"),c=oe("a-divider"),h=oe("a-form");return le(),Ce(h,{model:r,layout:"vertical"},{default:X(()=>[H(a,{label:"ID"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.id,"onUpdate:value":s[0]||(s[0]=f=>r.id=f),valueModifiers:{trim:!0},onChange:s[1]||(s[1]=f=>l("id"))},null,8,["placeholder","value"])]),_:1}),H(a,{label:"名称"},{default:X(()=>[H(p,{allowClear:"",placeholder:u.$t("inputTips"),value:r.name,"onUpdate:value":s[2]||(s[2]=f=>r.name=f),valueModifiers:{trim:!0},onChange:s[3]||(s[3]=f=>l("name"))},null,8,["placeholder","value"])]),_:1}),H(c),H(a,{label:"多实例"},{default:X(()=>[H(Kc,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(c),H(a,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(a,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),bN=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),i=De("bpmnElement"),r=e,o=ue([{label:"Java类",value:"class"},{label:"表达式",value:"expression"},{label:"代理表达式",value:"delegateExpression"}]),l=Zt({id:"",name:"",executeType:void 0,class:"",expression:"",resultVariable:"",delegateExpression:""}),u=()=>{l.id="",l.name="",l.executeType=void 0,l.class="",l.expression="",l.resultVariable="",l.delegateExpression=""};Wt(()=>r.businessObject,c=>{it(()=>{s(c)})},{deep:!0,immediate:!0});const s=c=>{u(),l.id=c.id,l.name=c.name;for(const h in l)if(!["id","name"].includes(h)){const f=c[h];f&&(l.executeType=h),l[h]=f}},p=()=>{const c=i(),h=Object.create(null),f=l.executeType;for(const d in l)["id","name"].includes(d)||d!=="executeType"&&d!==f&&(h[d]=null);h[f]=l[f]||"",n(c,h)},a=c=>{const h=i(),f=Object.create(null);f[c]=l[c],c==="id"?n(h,{id:l[c]}):n(h,f)};return(c,h)=>{const f=oe("a-input"),d=oe("a-form-item"),m=oe("a-divider"),g=oe("a-select"),y=oe("a-form");return le(),Ce(y,{model:l,layout:"vertical"},{default:X(()=>[H(d,{label:"ID"},{default:X(()=>[H(f,{allowClear:"",placeholder:c.$t("inputTips"),value:l.id,"onUpdate:value":h[0]||(h[0]=w=>l.id=w),valueModifiers:{trim:!0},onChange:h[1]||(h[1]=w=>a("id"))},null,8,["placeholder","value"])]),_:1}),H(d,{label:"名称"},{default:X(()=>[H(f,{allowClear:"",placeholder:c.$t("inputTips"),value:l.name,"onUpdate:value":h[2]||(h[2]=w=>l.name=w),valueModifiers:{trim:!0},onChange:h[3]||(h[3]=w=>a("name"))},null,8,["placeholder","value"])]),_:1}),H(m),H(d,{label:"执行类型"},{default:X(()=>[H(g,{"show-search":"","filter-option":Ct(t),options:o.value,allowClear:"",placeholder:c.$t("selectTips"),style:{width:"100%"},value:l.executeType,"onUpdate:value":h[4]||(h[4]=w=>l.executeType=w)},null,8,["filter-option","options","placeholder","value"])]),_:1}),l.executeType==="class"?(le(),Ce(d,{key:0,label:"Java类"},{default:X(()=>[H(f,{value:l.class,"onUpdate:value":h[5]||(h[5]=w=>l.class=w),valueModifiers:{trim:!0},clearable:"",onChange:p},null,8,["value"])]),_:1})):be("",!0),l.executeType==="expression"?(le(),Ce(d,{key:1,label:"表达式"},{default:X(()=>[H(f,{value:l.expression,"onUpdate:value":h[6]||(h[6]=w=>l.expression=w),valueModifiers:{trim:!0},clearable:"",onChange:p},null,8,["value"])]),_:1})):be("",!0),l.executeType==="delegateExpression"?(le(),Ce(d,{key:2,label:"代理表达式"},{default:X(()=>[H(f,{value:l.delegateExpression,"onUpdate:value":h[7]||(h[7]=w=>l.delegateExpression=w),valueModifiers:{trim:!0},clearable:"",onChange:p},null,8,["value"])]),_:1})):be("",!0),H(m),H(d,{label:"多实例"},{default:X(()=>[H(Kc,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(m),H(d,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(d,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),wN=kt({__name:"AsyncContinue",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=De("updateProperties"),n=De("bpmnElement"),i=e,r=Zt({asyncAfter:!1,asyncBefore:!1,exclusive:!1});Wt(()=>i.businessObject,s=>{it(()=>{l(s)})},{deep:!0,immediate:!0}),Wt(()=>i.businessObject,s=>{it(()=>{l(s)})},{deep:!0,immediate:!0});const o=()=>{r.asyncBefore=!1,r.asyncAfter=!1,r.exclusive=!1},l=s=>{o(),r.asyncBefore=s==null?void 0:s.asyncBefore,r.asyncAfter=s==null?void 0:s.asyncAfter,r.exclusive=s==null?void 0:s.exclusive},u=()=>{const s=n();!r.asyncBefore&&!r.asyncAfter&&(r.exclusive=!1),t(s,{...ti(r)})};return(s,p)=>{const a=oe("a-checkbox");return le(),Oe("div",null,[H(a,{checked:r.asyncBefore,"onUpdate:checked":p[0]||(p[0]=c=>r.asyncBefore=c),onChange:u},{default:X(()=>[ae("异步前")]),_:1},8,["checked"]),H(a,{checked:r.asyncAfter,"onUpdate:checked":p[1]||(p[1]=c=>r.asyncAfter=c),onChange:u},{default:X(()=>[ae("异步后")]),_:1},8,["checked"]),r.asyncAfter||r.asyncBefore?(le(),Ce(a,{key:0,checked:r.exclusive,"onUpdate:checked":p[2]||(p[2]=c=>r.exclusive=c),onChange:u},{default:X(()=>[ae("排除")]),_:1},8,["checked"])):be("",!0)])}}}),_N=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),i=De("bpmnElement"),r=e,o=ue([{label:"内联脚本",value:"inline"},{label:"外部资源",value:"external"}]),l=Zt({id:"",name:"",scriptFormat:"",scriptType:void 0,script:"",resource:"",resultVariable:""}),u=()=>{l.id="",l.name="",l.scriptType=void 0,l.script="",l.resource="",l.resultVariable=""};Wt(()=>r.businessObject,c=>{it(()=>{s(c)})},{deep:!0,immediate:!0});const s=c=>{u(),l.id=c.id,l.name=c.name;for(const h in l)if(!["id","name","scriptType"].includes(h)){const f=c[h];l[h]=f}l.scriptType=l.script?"inline":"external"},p=()=>{const c=i(),h=Object.create(null);h.scriptFormat=l.scriptFormat||null,h.resultVariable=l.resultVariable||null,l.scriptType==="inline"?(h.script=l.script||null,h.resource=null):(h.resource=l.resource||null,h.script=null),n(c,h)},a=c=>{const h=i(),f=Object.create(null);f[c]=l[c],c==="id"?n(h,{id:l[c]}):n(h,f)};return(c,h)=>{const f=oe("a-input"),d=oe("a-form-item"),m=oe("a-divider"),g=oe("a-select"),y=oe("a-textarea"),w=oe("a-form");return le(),Ce(w,{model:l,layout:"vertical"},{default:X(()=>[H(d,{label:"ID"},{default:X(()=>[H(f,{allowClear:"",placeholder:c.$t("inputTips"),value:l.id,"onUpdate:value":h[0]||(h[0]=S=>l.id=S),valueModifiers:{trim:!0},onChange:h[1]||(h[1]=S=>a("id"))},null,8,["placeholder","value"])]),_:1}),H(d,{label:"名称"},{default:X(()=>[H(f,{allowClear:"",placeholder:c.$t("inputTips"),value:l.name,"onUpdate:value":h[2]||(h[2]=S=>l.name=S),valueModifiers:{trim:!0},onChange:h[3]||(h[3]=S=>a("name"))},null,8,["placeholder","value"])]),_:1}),H(m),H(d,null,{default:X(()=>[H(wN,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(d,{label:"脚本格式"},{default:X(()=>[H(f,{value:l.scriptFormat,"onUpdate:value":h[4]||(h[4]=S=>l.scriptFormat=S),valueModifiers:{trim:!0},clearable:"",placeholder:c.$t("inputTips"),onInput:h[5]||(h[5]=S=>p()),onChange:h[6]||(h[6]=S=>p())},null,8,["value","placeholder"])]),_:1}),H(d,{label:"脚本类型"},{default:X(()=>[H(g,{"show-search":"","filter-option":Ct(t),options:o.value,allowClear:"",placeholder:c.$t("selectTips"),style:{width:"100%"},value:l.scriptType,"onUpdate:value":h[7]||(h[7]=S=>l.scriptType=S)},null,8,["filter-option","options","placeholder","value"])]),_:1}),l.scriptType==="inline"?(le(),Ce(d,{key:0,label:"脚本"},{default:X(()=>[H(y,{value:l.script,"onUpdate:value":h[8]||(h[8]=S=>l.script=S),valueModifiers:{trim:!0},rows:4,clearable:"",placeholder:c.$t("inputTips"),onInput:h[9]||(h[9]=S=>p()),onChange:h[10]||(h[10]=S=>p())},null,8,["value","placeholder"])]),_:1})):be("",!0),l.scriptType==="external"?(le(),Ce(d,{key:1,label:"资源地址"},{default:X(()=>[H(f,{value:l.resource,"onUpdate:value":h[11]||(h[11]=S=>l.resource=S),valueModifiers:{trim:!0},clearable:"",placeholder:c.$t("inputTips"),onInput:h[12]||(h[12]=S=>p()),onChange:h[13]||(h[13]=S=>p())},null,8,["value","placeholder"])]),_:1})):be("",!0),H(d,{label:"结果变量"},{default:X(()=>[H(f,{value:l.resultVariable,"onUpdate:value":h[14]||(h[14]=S=>l.resultVariable=S),valueModifiers:{trim:!0},clearable:"",placeholder:c.$t("inputTips"),onInput:h[15]||(h[15]=S=>p()),onChange:h[16]||(h[16]=S=>p())},null,8,["value","placeholder"])]),_:1}),H(m),H(d,{label:"多实例"},{default:X(()=>[H(Kc,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(m),H(d,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(d,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"])}}}),EN=kt({__name:"index",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const{filterOption:t}=oi(),n=De("updateProperties"),r=De("bpmnInstances")(),o=De("bpmnElement"),l=e,u=ue(!1),s=ue({id:"",name:""}),p=ue({}),a=ue([]),c=Zt({id:"",name:"",bindMessageId:void 0}),h=ue({}),f=()=>{c.id="",c.name="",c.bindMessageId=void 0,s.value.id="",s.value.name="",p.value={},a.value=[],h.value={}};Wt(()=>l.bpmnElementId,S=>{it(()=>{d(l.businessObject)})},{deep:!0,immediate:!0});const d=S=>{var b;f(),c.id=S.id,c.name=S.name,c.bindMessageId=((b=S==null?void 0:S.messageRef)==null?void 0:b.id)||void 0,p.value=Object.create(null),a.value=r.modeler.getDefinitions().rootElements,a.value.filter(_=>_.$type==="bpmn:Message").forEach(_=>{p.value[_.id]=_,h.value[_.id]=_.name}),h.value[-1]="无"},m=()=>{if(h.value,s.value,h.value[s.value.id]){lv.error("该消息已存在，请修改id后重新保存");return}const S=r.moddle.create("bpmn:Message",s.value);a.value.push(S),h.value[s.value.id]=s.value.name,p.value[s.value.id]=S,u.value=!1},g=S=>{const b=o();if(S==="-1")n(b,{messageRef:null});else{const _=ti(p.value);n(b,{messageRef:_[S]})}},y=()=>{u.value=!0,s.value={}},w=S=>{const b=o(),_=Object.create(null);_[S]=c[S],S==="id"?n(b,{id:c[S]}):n(b,_)};return(S,b)=>{const _=oe("a-input"),v=oe("a-form-item"),E=oe("a-divider"),x=oe("a-select-option"),T=oe("a-select"),k=oe("a-button"),$=oe("a-form"),R=oe("a-modal");return le(),Oe("div",null,[H($,{model:c,layout:"vertical"},{default:X(()=>[H(v,{label:"ID"},{default:X(()=>[H(_,{allowClear:"",placeholder:S.$t("inputTips"),value:c.id,"onUpdate:value":b[0]||(b[0]=A=>c.id=A),valueModifiers:{trim:!0},onChange:b[1]||(b[1]=A=>w("id"))},null,8,["placeholder","value"])]),_:1}),H(v,{label:"名称"},{default:X(()=>[H(_,{allowClear:"",placeholder:S.$t("inputTips"),value:c.name,"onUpdate:value":b[2]||(b[2]=A=>c.name=A),valueModifiers:{trim:!0},onChange:b[3]||(b[3]=A=>w("name"))},null,8,["placeholder","value"])]),_:1}),H(E),H(v,{label:"消息实例"},{default:X(()=>[H(T,{"show-search":"","filter-option":Ct(t),allowClear:"",placeholder:S.$t("selectTips"),style:{width:"75%"},value:c.bindMessageId,"onUpdate:value":b[4]||(b[4]=A=>c.bindMessageId=A),onChange:g},{default:X(()=>[(le(!0),Oe(lt,null,$r(Object.keys(h.value),A=>(le(),Ce(x,{value:A,key:A},{default:X(()=>[ae(Xe(h.value[A]),1)]),_:2},1032,["value"]))),128))]),_:1},8,["filter-option","placeholder","value"]),H(k,{type:"primary",style:{"margin-left":"8px"},onClick:y},{default:X(()=>[ae("添加")]),_:1})]),_:1}),H(E),H(v,{label:"多实例"},{default:X(()=>[H(Kc,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(E),H(v,{label:"执行监听器"},{default:X(()=>[H(Li,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1}),H(v,{label:"扩展属性"},{default:X(()=>[H(On,{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1},8,["model"]),H(R,{open:u.value,"onUpdate:open":b[7]||(b[7]=A=>u.value=A),title:"创建新消息",width:"400px",onOk:m},{default:X(()=>[H($,{model:s.value},{default:X(()=>[H(v,{label:"消息ID"},{default:X(()=>[H(_,{value:s.value.id,"onUpdate:value":b[5]||(b[5]=A=>s.value.id=A),valueModifiers:{trim:!0},clearable:""},null,8,["value"])]),_:1}),H(v,{label:"消息名称"},{default:X(()=>[H(_,{value:s.value.name,"onUpdate:value":b[6]||(b[6]=A=>s.value.name=A),valueModifiers:{trim:!0},clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])])}}}),xN={ref:"propertyPanel",class:"property-panel"},SN=Le("div",{class:"node-name"},[Le("i"),Le("span",null,"常规")],-1),CN=kt({__name:"PropertyPanel",props:{bpmnElementId:{type:String},users:{type:Array,required:!0},roles:{type:Array,required:!0},groups:{type:Array,required:!0},categorys:{type:Array,required:!0},businessObject:Object,type:{type:String,default:""}},setup(e){const t=e,n=l_(()=>(t.type,["bpmn:StartEvent","bpmn:EndEvent"].includes(t.type)?SO:t.type==="bpmn:Process"?CO:t.type==="bpmn:Group"?RO:t.type==="bpmn:SequenceFlow"?MO:t.type==="bpmn:IntermediateCatchEvent"?HO:t.type==="bpmn:BoundaryEvent"?QO:t.type==="bpmn:UserTask"?vN:t.type==="bpmn:ServiceTask"?bN:t.type==="bpmn:ScriptTask"?_N:t.type==="bpmn:ReceiveTask"?EN:t.type==="bpmn:Task"?yN:["bpmn:ExclusiveGateway","bpmn:ParallelGateway","bpmn:Participant","bpmn:DataStoreReference","bpmn:DataObjectReference","bpmn:SubProcess","bpmn:IntermediateThrowEvent","bpmn:Lane"].includes(t.type)?xO:$O));return(i,r)=>(le(),Oe("div",xN,[SN,(le(),Ce(c_(n.value),{bpmnElementId:e.bpmnElementId,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:e.businessObject,type:e.type},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"]))],512))}});const AN={class:"w100 h100"},TN={class:"ub ub-pj px-1"},$N={class:"bpmn-page"},RN=kt({__name:"index",props:{simulation:{type:Boolean,default:!0},xml:{type:String,default:""},users:{type:Array,default:()=>[]},roles:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},categorys:{type:Array,default:()=>[]},isView:{type:Boolean,default:!1},bpmnID:{type:String,default:"modeler-container"},isReadOnly:{type:Boolean,default:!1},options:{type:Object,default:()=>{}},keyboard:{type:Boolean,default:!0},processId:{type:String,default:""},processName:{type:String,default:""},prefix:{type:String,default:"camunda"}},emits:["result"],setup(e,{emit:t}){const n=Zt({color:"#555",height:30,lineHeight:"30px",backgroundColor:"#ffffff"}),i=Zt({color:"#555",backgroundColor:"#fbfbfb"}),r=t,o=e,l=ue(),u=ue(1),s=ue(!1),p=ue(!1),a=ue(!1),c=ue(!1),h=ue(!1),f=ue(""),d=ue(""),m=ue(""),g=ue({}),y=Zt({useWorker:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showPrintMargin:!1,highlightActiveLine:!1,highlightSelectedWord:!0,tabSize:4,fontSize:14,wrap:!1,readOnly:!0,minLines:1,maxLines:50});let w=null,S=null;u_(()=>{const O=[],L={};o.prefix==="camunda"&&(O.push(RD),L.camunda=cD),o.prefix==="flowable"&&(O.push(ND),L.flowable=CD),o.prefix==="activiti"&&(O.push(LD),L.activiti=vD),o.isReadOnly?w=new Hn({container:`#${o.bpmnID}`,additionalModules:[{translate:["value",Qd("zh")],paletteProvider:["value",""],labelEditingProvider:["value",""],contextPadProvider:["value",""],bendpoints:["value",{}],zoomScroll:["value",""],moveCanvas:["value",""],move:["value",""]},nv,...O],gridLine:{smallGridSpacing:20,gridSpacing:80,gridLineStroke:1,gridLineOpacity:.2,gridLineColor:"#ddd"},moddleExtensions:L,...o.options}):w=new Hn({container:`#${o.bpmnID}`,keyboard:o.keyboard?{bindTo:document}:null,additionalModules:[{translate:["value",Qd("zh")]},eD,tD,hx,qP,nv,...O],gridLine:{smallGridSpacing:15,gridSpacing:60,gridLineStroke:1,gridLineOpacity:.25,gridLineColor:"#ddd"},moddleExtensions:L,...o.options}),o.xml?k(o.xml):T(),w.on("commandStack.changed",async()=>{c.value=w.get("commandStack").canRedo(),a.value=w.get("commandStack").canUndo()}),w.on("root.added",ne=>{ne.element.type&&(S=ne.element,d.value=v(ne.element),m.value=ne.element.businessObject.id,g.value=ne.element.businessObject,d.value)});const P=navigator.userAgent.indexOf("Firefox")>-1,z=function(){return window.addEventListener?function(ne,fe,_e,$e){ne.addEventListener(fe,_e,$e)}:window.attachEvent?function(ne,fe,_e){ne.attachEvent("on"+fe,_e)}:function(){}}(),K=function(ne){ne.stopPropagation?ne.stopPropagation():ne.cancelBubble=!0,ne.preventDefault?ne.preventDefault():ne.returnValue=!1},te=P?"DOMMouseScroll":"mousewheel";z(l.value,te,function(ne){const fe=ne||window.event;ne.preventDefault(),K(fe)},!1)});const b=["element.click","shape.added","element.changed"],_=()=>{b.forEach(O=>{w.on(O,L=>{if(O==="root.added"&&!L.element.type||!L.element||L.element.type=="label"&&O=="shape.added")return;const P=p.value,z=L.element&&L.element.id!==(S==null?void 0:S.id);L.element.type,!(O==="element.changed"&&(P||z))&&it(()=>{O==="shape.added"&&["bpmn:StartEvent","bpmn:EndEvent","bpmn:UserTask"].includes(L.element.type)&&!L.element.businessObject.name&&(L.element.type=="bpmn:StartEvent"&&$(L.element,{name:"开始"}),L.element.type=="bpmn:EndEvent"?$(L.element,{name:"结束"}):L.element.type=="bpmn:UserTask"&&$(L.element,{name:"任务"})),S=L.element,d.value=v(L.element),m.value=L.element.businessObject.id,g.value=L.element.businessObject,d.value})})})},v=O=>{var P;let L="";return L=(P=O==null?void 0:O.businessObject)==null?void 0:P.$type,L},E=()=>{x((O,L)=>{r("result",{xml:L})})},x=async O=>{const{err:L,xml:P}=await w.saveXML({format:!0});O(L,P)},T=()=>{const O=o.processId||`Process_${new Date().getTime()}`,L=o.processName||`业务流程_${new Date().getTime()}`;k(IP(O,L,o.prefix))},k=O=>new Promise((L,P)=>{try{w.importXML(O).then(z=>{_(),z.length&&W(),L()}).catch(z=>{P(),console.warn("importFail errors ",z)})}catch(z){P(),console.error(z.message,z.warnings)}}),$=(O,L)=>{p.value=!0,w.get("modeling").updateProperties(O,L),p.value=!1},R=()=>S,A=()=>({modeler:w,modeling:w.get("modeling"),moddle:w.get("moddle"),eventBus:w.get("eventBus"),bpmnFactory:w.get("bpmnFactory"),elementFactory:w.get("elementFactory"),elementRegistry:w.get("elementRegistry"),replace:w.get("replace"),selection:w.get("selection")});ua("updateProperties",$),ua("bpmnElement",R),ua("bpmnInstances",A),ua("prefix",o.prefix),av(()=>{w=null});const C=()=>new Promise((O,L)=>{w.saveXML({format:!0}).then(P=>{O(P)}).catch(P=>{L(P)})}),M=async()=>{s.value=!0;try{const{xml:O}=await C();f.value=O}catch{}},I=()=>{const O=document.createElement("input");O.type="file",O.click(),O.onchange=()=>{const L=O.files[0],P=new FileReader;P.onload=()=>{const z=P.result;w.importXML(z)},P.readAsText(L)}},D=()=>{w.get("commandStack").redo()},B=()=>{w.get("commandStack").undo()},F=()=>{c.value=!1,a.value=!1;const O=o.processId||`Process_${new Date().getTime()}`,L=o.processName||`业务流程_${new Date().getTime()}`;k(LP(O,L,o.prefix)).then(()=>{W()})},j=()=>{h.value=!h.value,o.simulation&&w.get("toggleMode").toggleMode()},Z=()=>{u.value=Math.floor(u.value*100+.1*100)/100,w.get("canvas").zoom(u.value)},Q=()=>{u.value=Math.floor(u.value*100-.1*100)/100,w.get("canvas").zoom(u.value)},W=()=>{u.value=1,w.get("canvas").zoom("fit-viewport","auto")},V=()=>{const O=w.get("canvas").getRootElement();C().then(L=>{Y(L.xml,O.id||"process","bpmn")}).catch(L=>{console.warn(L)})},G=()=>new Promise((O,L)=>{w.saveSVG().then(P=>{O(P)}).catch(P=>{L(P)})}),U=()=>{w.get("minimap").toggle()},ee=()=>{const O=w.get("canvas").getRootElement();G().then(L=>{Y(L.svg,O.id||"process","svg")}).catch(L=>{console.warn(L)})},Y=(O,L,P)=>{const z=new Blob([O]),K=document.createElement("a"),te=window.URL.createObjectURL(z),ne=`${L}.${P}`;K.href=te,K.target="_blank",K.download=ne,document.body.appendChild(K),K.click(),document.body.removeChild(K),window.URL.revokeObjectURL(te)};return(O,L)=>{const P=oe("a-button"),z=oe("a-space"),K=oe("a-layout-header"),te=oe("a-divider"),ne=oe("a-layout-content"),fe=oe("a-layout-sider"),_e=oe("a-layout"),$e=oe("a-modal");return le(),Oe(lt,null,[Le("div",AN,[H(_e,{style:{height:"100%"}},{default:X(()=>[H(K,{style:Vd(n)},{default:X(()=>[Le("div",TN,[Le("div",null,[H(z,null,{default:X(()=>[H(P,{size:"small",onClick:I},{default:X(()=>[ae("导入XML")]),_:1}),H(P,{size:"small",onClick:M},{default:X(()=>[ae("预览")]),_:1}),H(P,{size:"small",onClick:Z},{default:X(()=>[ae("放大")]),_:1}),H(P,{size:"small",onClick:Q},{default:X(()=>[ae("缩小")]),_:1}),H(P,{size:"small",onClick:W},{default:X(()=>[ae("还原并居中")]),_:1}),H(P,{size:"small",disabled:!a.value,onClick:B},{default:X(()=>[ae("撤销")]),_:1},8,["disabled"]),H(P,{size:"small",disabled:!a.value,onClick:D},{default:X(()=>[ae("恢复")]),_:1},8,["disabled"]),H(P,{size:"small",onClick:F},{default:X(()=>[ae("重新绘制")]),_:1}),H(P,{size:"small",onClick:V},{default:X(()=>[ae("下载xml")]),_:1}),H(P,{size:"small",onClick:ee},{default:X(()=>[ae("下载svg")]),_:1}),e.simulation?(le(),Ce(P,{key:0,size:"small",onClick:j},{default:X(()=>[ae(Xe(h.value?"退出模拟":"开启模拟"),1)]),_:1})):be("",!0),H(P,{size:"small",onClick:U},{default:X(()=>[ae("显示/隐藏地图")]),_:1})]),_:1})]),Le("div",null,[H(z,null,{default:X(()=>[H(P,{type:"primary",size:"small",onClick:E},{default:X(()=>[ae("保存")]),_:1})]),_:1})])])]),_:1},8,["style"]),H(te,{style:{margin:"0"}}),H(_e,{class:"cav-container"},{default:X(()=>[H(ne,{style:Vd(i),onMousewheel:L[0]||(L[0]=p_(()=>{},["prevent"]))},{default:X(()=>[Le("div",$N,[Le("div",{id:"modeler-container",ref_key:"modelerContainer",ref:l,class:"modeler-container"},null,512)])]),_:1},8,["style"]),H(fe,{class:"silder-box",style:{"min-width":"300px"}},{default:X(()=>[H(CN,{bpmnElementId:m.value,users:e.users,roles:e.roles,groups:e.groups,categorys:e.categorys,businessObject:g.value,type:d.value},null,8,["bpmnElementId","users","roles","groups","categorys","businessObject","type"])]),_:1})]),_:1})]),_:1})]),H($e,{open:s.value,"onUpdate:open":L[2]||(L[2]=ke=>s.value=ke),width:"90%",footer:null},{default:X(()=>[H(Ct(FD),{value:f.value,"onUpdate:value":L[1]||(L[1]=ke=>f.value=ke),lang:"xml",theme:"chrome",options:y,class:"vue-ace-editor"},null,8,["value","options"])]),_:1},8,["open"])],64)}}});const LN=cv(RN,[["__scopeId","data-v-f26841f3"]]);export{LN as B,FD as V};
