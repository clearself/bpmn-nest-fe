import{o as R,$ as l,z as ee,A as te,q as ae,B as se}from"./index-BI1T92go.js";import{i as oe,F as le,d as ne}from"./formModel-DQdTva-y.js";import{h as ie,a as ue}from"./antDesign-wbdAq9hh.js";import{d as de,f as b,r as B,o as re,W as r,X as y,a0 as w,a1 as g,k as t,Z as o,u as e,G as x,a5 as c,a8 as h,Y as ce,F as D,g as pe}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const me=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"post.columns.postCode",dataIndex:"postCode",ellipsis:!0},{lang:"post.columns.postName",dataIndex:"postName",ellipsis:!0},{lang:"post.columns.state",dataIndex:"status",ellipsis:!0},{lang:"post.columns.createTime",dataIndex:"createTime",ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),_e={class:"search-wrapper"},fe={class:"ub ub-ac ub-pj top-opt w100"},ve={class:"mt-1 w100",id:"postTable"},ge={key:0},ye={key:2},ke=de({__name:"index",setup(F){const{proxy:U}=pe(),{sys_normal_disable:k}=U.useDict("sys_normal_disable"),{filterOption:$}=te(),{pagination:i,loading:p,scrollY:A}=R(),{columns:M}=me(),C=b(!1),N=b("add"),z=b([]),I=b([]);let T=B({});const n=B({postCode:"",postName:"",status:void 0}),V=()=>{n.postCode="",n.postName="",n.status=void 0};re(()=>{m()});const O=()=>{m()},P=u=>new Promise(async a=>{const d=await ne({ids:u.postId});(d==null?void 0:d.code)===200&&(ue.success(l("opeateSuccess")),m()),a(!0)}),E=()=>{N.value="add",C.value=!0},L=u=>{T=u,N.value="edit",C.value=!0},m=async()=>{p.value=!0;const u={postCode:n.postCode,postName:n.postName,status:n.status,pageNum:i.current,pageSize:i.pageSize,orderByColumn:"create_time",isAsc:"descending"},a=await oe(u);if((a==null?void 0:a.code)===200){p.value=!1;const{total:d=0,list:_=[]}=a.data;i.total=d,z.value=_}else p.value=!1},Y=()=>{i.current=1,m()},j=()=>{i.current=1,V(),m()},q=u=>{i.current=u.current,i.pageSize=u.pageSize,m()};return(u,a)=>{const d=r("a-input"),_=r("a-form-item"),G=r("a-select"),f=r("a-button"),K=r("a-form"),S=r("a-card"),W=ae,X=se,Z=r("a-popconfirm"),H=r("a-table");return y(),w(D,null,[g("div",_e,[t(S,{size:"small"},{default:o(()=>[t(K,{model:n,layout:"inline"},{default:o(()=>[t(_,{label:e(l)("post.columns.postCode")},{default:o(()=>[t(d,{allowClear:"",value:n.postCode,"onUpdate:value":a[0]||(a[0]=s=>n.postCode=s),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(_,{label:e(l)("post.columns.postName")},{default:o(()=>[t(d,{allowClear:"",value:n.postName,"onUpdate:value":a[1]||(a[1]=s=>n.postName=s),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(_,{label:e(l)("post.columns.state")},{default:o(()=>[t(G,{"show-search":"","filter-option":e($),options:e(k),allowClear:"",placeholder:e(l)("selectTips"),style:{width:"220px"},value:n.status,"onUpdate:value":a[2]||(a[2]=s=>n.status=s)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),t(_,null,{default:o(()=>[g("div",null,[t(f,{loading:e(p),type:"primary",onClick:Y},{default:o(()=>[x(c(e(l)("opts.search")),1)]),_:1},8,["loading"]),t(f,{loading:e(p),class:"ml-1",onClick:j},{default:o(()=>[x(c(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),g("div",fe,[g("div",null,[t(f,{size:"small",type:"primary",onClick:E},{icon:o(()=>[t(e(ie))]),default:o(()=>[x(" "+c(e(l)("opts.add")),1)]),_:1})]),g("div",null,[t(f,{type:"link",ref:"ref2",shape:"circle"},{default:o(()=>[t(W,{tabKey:"post-table",value:I.value,"onUpdate:value":a[3]||(a[3]=s=>I.value=s),columns:e(M)},null,8,["value","columns"])]),_:1},512)])]),t(S,{size:"small"},{default:o(()=>[g("div",ve,[t(H,{class:"ant-table-striped","row-class-name":(s,v)=>v%2===1?"table-striped":null,bordered:"",size:"small",columns:I.value,"row-key":s=>s.deptId,"data-source":z.value,pagination:e(i),loading:e(p),scroll:{y:e(A)},onChange:q},{bodyCell:o(({column:s,record:v,index:J})=>[s.dataIndex==="index"?(y(),w("a",ge,c((e(i).current-1)*e(i).pageSize+parseInt(J)+1),1)):h("",!0),s.dataIndex==="status"?(y(),ce(X,{key:1,options:e(k),value:v.status},null,8,["options","value"])):h("",!0),s.dataIndex==="createTime"?(y(),w("span",ye,c(e(ee)(v.createTime)),1)):h("",!0),s.dataIndex==="operation"?(y(),w(D,{key:3},[t(f,{type:"link",size:"small",onClick:Q=>L(v)},{default:o(()=>[x(c(e(l)("opts.edit")),1)]),_:2},1032,["onClick"]),t(Z,{title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:Q=>P(v)},{default:o(()=>[t(f,{type:"link",size:"small",danger:""},{default:o(()=>[x(c(e(l)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):h("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),t(le,{show:C.value,"onUpdate:show":a[4]||(a[4]=s=>C.value=s),status:N.value,"cur-data":e(T),sysNormalDisable:e(k),onSuccess:O},null,8,["show","status","cur-data","sysNormalDisable"])],64)}}});export{ke as default};
