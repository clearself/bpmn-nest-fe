import{j as te,$ as l,t as ae,n as oe}from"./index-5ec9320a.js";import{i as ne,F as le,d as se}from"./formModel-390d7cad.js";import{d as ie,f as h,r as F,o as ce,W as c,X as v,a0 as b,a1 as g,k as t,Z as n,u as e,G as T,a6 as p,a9 as w,Y as U,F as M,g as re}from"./vue-ced722ac.js";import{i as ue,m as de}from"./antDesign-4a9bc9e2.js";import"./echarts-de64fab6.js";const pe=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"notice.columns.noticeTitle",dataIndex:"noticeTitle",ellipsis:!0},{lang:"notice.columns.noticeType",dataIndex:"noticeType",width:150,ellipsis:!0},{lang:"notice.columns.state",dataIndex:"status",width:120,ellipsis:!0},{lang:"notice.columns.createBy",dataIndex:"createBy",width:150,ellipsis:!0},{lang:"notice.columns.createTime",dataIndex:"createTime",width:150,ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),me={class:"search-wrapper"},_e={class:"ub ub-ac ub-pj top-opt w100"},ye={class:"mt-1 w100",id:"configTable"},fe={key:0},ve={key:3},be=ie({__name:"index",setup(V){const{proxy:$}=re(),{sys_normal_disable:B,sys_notice_type:k}=$.useDict("sys_normal_disable","sys_notice_type"),{filterOption:A}=oe(),{pagination:i,loading:m,scrollY:O}=te(),{columns:P}=pe(),x=h(!1),C=h("add"),z=h([]),I=h([]);let N=F({});const s=F({noticeTitle:"",createBy:"",noticeType:void 0}),j=()=>{s.noticeTitle="",s.createBy="",s.noticeType=void 0};ce(()=>{_()});const E=()=>{_()},L=r=>new Promise(async o=>{const u=await se({id:r.noticeId});(u==null?void 0:u.code)===200&&(de.success(l("opeateSuccess")),_()),o(!0)}),Y=()=>{C.value="add",x.value=!0},G=r=>{N=r,C.value="edit",x.value=!0},_=async()=>{m.value=!0;const r={noticeTitle:s.noticeTitle,createBy:s.createBy,noticeType:s.noticeType,pageNum:i.current,pageSize:i.pageSize,orderByColumn:"create_time",isAsc:"descending"},o=await ne(r);if((o==null?void 0:o.code)===200){m.value=!1;const{total:u=0,list:y=[]}=o.data;i.total=u,z.value=y}else m.value=!1},K=()=>{i.current=1,_()},W=()=>{i.current=1,j(),_()},X=r=>{i.current=r.current,i.pageSize=r.pageSize,_()};return(r,o)=>{const u=c("a-input"),y=c("a-form-item"),Z=c("a-select"),f=c("a-button"),q=c("a-form"),S=c("a-card"),H=c("fields-setting"),D=c("dict-tag"),J=c("a-popconfirm"),Q=c("a-table");return v(),b(M,null,[g("div",me,[t(S,{size:"small"},{default:n(()=>[t(q,{model:s,layout:"inline"},{default:n(()=>[t(y,{label:e(l)("notice.columns.noticeTitle")},{default:n(()=>[t(u,{allowClear:"",value:s.noticeTitle,"onUpdate:value":o[0]||(o[0]=a=>s.noticeTitle=a),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(y,{label:e(l)("notice.columns.createBy")},{default:n(()=>[t(u,{allowClear:"",value:s.createBy,"onUpdate:value":o[1]||(o[1]=a=>s.createBy=a),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(y,{label:e(l)("notice.columns.noticeType")},{default:n(()=>[t(Z,{"show-search":"","filter-option":e(A),options:e(k),allowClear:"",placeholder:e(l)("selectTips"),style:{width:"220px"},value:s.noticeType,"onUpdate:value":o[2]||(o[2]=a=>s.noticeType=a)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),t(y,null,{default:n(()=>[g("div",null,[t(f,{loading:e(m),type:"primary",onClick:K},{default:n(()=>[T(p(e(l)("opts.search")),1)]),_:1},8,["loading"]),t(f,{loading:e(m),class:"ml-1",onClick:W},{default:n(()=>[T(p(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),g("div",_e,[g("div",null,[t(f,{size:"small",type:"primary",onClick:Y},{icon:n(()=>[t(e(ue))]),default:n(()=>[T(" "+p(e(l)("opts.add")),1)]),_:1})]),g("div",null,[t(f,{type:"link",ref:"ref2",shape:"circle"},{default:n(()=>[t(H,{tabKey:"config-table",value:I.value,"onUpdate:value":o[3]||(o[3]=a=>I.value=a),columns:e(P)},null,8,["value","columns"])]),_:1},512)])]),t(S,{size:"small"},{default:n(()=>[g("div",ye,[t(Q,{class:"ant-table-striped","row-class-name":(a,d)=>d%2===1?"table-striped":null,bordered:"",size:"small",columns:I.value,"row-key":a=>a.deptId,"data-source":z.value,pagination:e(i),loading:e(m),scroll:{y:e(O)},onChange:X},{bodyCell:n(({column:a,record:d,index:R})=>[a.dataIndex==="index"?(v(),b("a",fe,p((e(i).current-1)*e(i).pageSize+parseInt(R)+1),1)):w("",!0),a.dataIndex==="noticeType"?(v(),U(D,{key:1,options:e(k),value:d.noticeType},null,8,["options","value"])):w("",!0),a.dataIndex==="status"?(v(),U(D,{key:2,options:e(B),value:d.status},null,8,["options","value"])):w("",!0),a.dataIndex==="createTime"?(v(),b("span",ve,p(e(ae)(d.createTime)),1)):w("",!0),a.dataIndex==="operation"?(v(),b(M,{key:4},[t(f,{type:"link",size:"small",onClick:ee=>G(d)},{default:n(()=>[T(p(e(l)("opts.edit")),1)]),_:2},1032,["onClick"]),t(J,{title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:ee=>L(d)},{default:n(()=>[t(f,{type:"link",size:"small",danger:""},{default:n(()=>[T(p(e(l)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):w("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),t(le,{show:x.value,"onUpdate:show":o[4]||(o[4]=a=>x.value=a),status:C.value,"cur-data":e(N),sysNormalDisable:e(B),sysNoticeType:e(k),onSuccess:E},null,8,["show","status","cur-data","sysNormalDisable","sysNoticeType"])],64)}}});export{be as default};
