import{o as te,$ as l,z as ae,A as oe,q as ne,B as le}from"./index-BI1T92go.js";import{i as se,F as ie,d as ce}from"./formModel-CJj98bED.js";import{h as re,a as ue}from"./antDesign-wbdAq9hh.js";import{d as de,f as h,r as F,o as pe,W as u,X as v,a0 as b,a1 as g,k as t,Z as n,u as e,G as T,a5 as p,a8 as w,Y as U,F as $,g as me}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const _e=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"notice.columns.noticeTitle",dataIndex:"noticeTitle",ellipsis:!0},{lang:"notice.columns.noticeType",dataIndex:"noticeType",width:150,ellipsis:!0},{lang:"notice.columns.state",dataIndex:"status",width:120,ellipsis:!0},{lang:"notice.columns.createBy",dataIndex:"createBy",width:150,ellipsis:!0},{lang:"notice.columns.createTime",dataIndex:"createTime",width:150,ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),ye={class:"search-wrapper"},fe={class:"ub ub-ac ub-pj top-opt w100"},ve={class:"mt-1 w100",id:"configTable"},ge={key:0},Te={key:3},Ce=de({__name:"index",setup(A){const{proxy:M}=me(),{sys_normal_disable:I,sys_notice_type:k}=M.useDict("sys_normal_disable","sys_notice_type"),{filterOption:V}=oe(),{pagination:i,loading:m,scrollY:O}=te(),{columns:P}=_e(),x=h(!1),C=h("add"),z=h([]),B=h([]);let N=F({});const s=F({noticeTitle:"",createBy:"",noticeType:void 0}),E=()=>{s.noticeTitle="",s.createBy="",s.noticeType=void 0};pe(()=>{_()});const L=()=>{_()},Y=c=>new Promise(async o=>{const r=await ce({id:c.noticeId});(r==null?void 0:r.code)===200&&(ue.success(l("opeateSuccess")),_()),o(!0)}),j=()=>{C.value="add",x.value=!0},q=c=>{N=c,C.value="edit",x.value=!0},_=async()=>{m.value=!0;const c={noticeTitle:s.noticeTitle,createBy:s.createBy,noticeType:s.noticeType,pageNum:i.current,pageSize:i.pageSize,orderByColumn:"create_time",isAsc:"descending"},o=await se(c);if((o==null?void 0:o.code)===200){m.value=!1;const{total:r=0,list:y=[]}=o.data;i.total=r,z.value=y}else m.value=!1},G=()=>{i.current=1,_()},K=()=>{i.current=1,E(),_()},W=c=>{i.current=c.current,i.pageSize=c.pageSize,_()};return(c,o)=>{const r=u("a-input"),y=u("a-form-item"),X=u("a-select"),f=u("a-button"),Z=u("a-form"),S=u("a-card"),H=ne,D=le,J=u("a-popconfirm"),Q=u("a-table");return v(),b($,null,[g("div",ye,[t(S,{size:"small"},{default:n(()=>[t(Z,{model:s,layout:"inline"},{default:n(()=>[t(y,{label:e(l)("notice.columns.noticeTitle")},{default:n(()=>[t(r,{allowClear:"",value:s.noticeTitle,"onUpdate:value":o[0]||(o[0]=a=>s.noticeTitle=a),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(y,{label:e(l)("notice.columns.createBy")},{default:n(()=>[t(r,{allowClear:"",value:s.createBy,"onUpdate:value":o[1]||(o[1]=a=>s.createBy=a),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(y,{label:e(l)("notice.columns.noticeType")},{default:n(()=>[t(X,{"show-search":"","filter-option":e(V),options:e(k),allowClear:"",placeholder:e(l)("selectTips"),style:{width:"220px"},value:s.noticeType,"onUpdate:value":o[2]||(o[2]=a=>s.noticeType=a)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),t(y,null,{default:n(()=>[g("div",null,[t(f,{loading:e(m),type:"primary",onClick:G},{default:n(()=>[T(p(e(l)("opts.search")),1)]),_:1},8,["loading"]),t(f,{loading:e(m),class:"ml-1",onClick:K},{default:n(()=>[T(p(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),g("div",fe,[g("div",null,[t(f,{size:"small",type:"primary",onClick:j},{icon:n(()=>[t(e(re))]),default:n(()=>[T(" "+p(e(l)("opts.add")),1)]),_:1})]),g("div",null,[t(f,{type:"link",ref:"ref2",shape:"circle"},{default:n(()=>[t(H,{tabKey:"config-table",value:B.value,"onUpdate:value":o[3]||(o[3]=a=>B.value=a),columns:e(P)},null,8,["value","columns"])]),_:1},512)])]),t(S,{size:"small"},{default:n(()=>[g("div",ve,[t(Q,{class:"ant-table-striped","row-class-name":(a,d)=>d%2===1?"table-striped":null,bordered:"",size:"small",columns:B.value,"row-key":a=>a.deptId,"data-source":z.value,pagination:e(i),loading:e(m),scroll:{y:e(O)},onChange:W},{bodyCell:n(({column:a,record:d,index:R})=>[a.dataIndex==="index"?(v(),b("a",ge,p((e(i).current-1)*e(i).pageSize+parseInt(R)+1),1)):w("",!0),a.dataIndex==="noticeType"?(v(),U(D,{key:1,options:e(k),value:d.noticeType},null,8,["options","value"])):w("",!0),a.dataIndex==="status"?(v(),U(D,{key:2,options:e(I),value:d.status},null,8,["options","value"])):w("",!0),a.dataIndex==="createTime"?(v(),b("span",Te,p(e(ae)(d.createTime)),1)):w("",!0),a.dataIndex==="operation"?(v(),b($,{key:4},[t(f,{type:"link",size:"small",onClick:ee=>q(d)},{default:n(()=>[T(p(e(l)("opts.edit")),1)]),_:2},1032,["onClick"]),t(J,{title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:ee=>Y(d)},{default:n(()=>[t(f,{type:"link",size:"small",danger:""},{default:n(()=>[T(p(e(l)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):w("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),t(ie,{show:x.value,"onUpdate:show":o[4]||(o[4]=a=>x.value=a),status:C.value,"cur-data":e(N),sysNormalDisable:e(I),sysNoticeType:e(k),onSuccess:L},null,8,["show","status","cur-data","sysNormalDisable","sysNoticeType"])],64)}}});export{Ce as default};
