import{l as Q,$ as o,x as ee,y as te,o as ae,d as se,z as ne}from"./index-BeIH9SCz.js";import oe from"./formModel-BLMo_pwL.js";import{i as le,d as ue}from"./server-SCaZs1AQ.js";import{h as ie,a as ce}from"./antDesign-CdRSJcA9.js";import{d as me,f as x,r as P,o as de,W as i,X as c,a0 as g,a1 as f,k as t,Z as n,u as e,G as b,a5 as d,Y as C,a8 as v,F as T,g as re}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const pe=()=>({columns:[{lang:"menu.columns.menuName",dataIndex:"menuName",ellipsis:!0},{lang:"menu.columns.icon",dataIndex:"icon",ellipsis:!0},{lang:"menu.columns.sort",dataIndex:"orderNum",ellipsis:!0},{lang:"menu.columns.permissionIdentification",dataIndex:"perms",ellipsis:!0},{lang:"menu.columns.componentPath",dataIndex:"component",ellipsis:!0},{lang:"menu.columns.state",dataIndex:"status",ellipsis:!0},{lang:"menu.columns.createTime",dataIndex:"createTime",ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),_e={class:"search-wrapper"},fe={class:"ub ub-ac ub-pj top-opt w100"},ve={class:"mt-1 w100",id:"deptTable"},ye={key:0},xe={key:3},Ne=me({__name:"index",setup(S){const{proxy:D}=re(),{sys_normal_disable:w}=D.useDict("sys_normal_disable"),{filterOption:U}=te(),{loading:r,scrollY:V}=Q(),{columns:A}=pe(),h=x(!1),k=x("add"),z=x([]),B=x(1),I=x([]);let F=P({});const u=P({menuName:"",status:void 0}),E=()=>{u.menuName="",u.status=void 0};de(()=>{y()});const M=()=>{y()},O=p=>new Promise(async s=>{const m=await ue({id:p.menuId});(m==null?void 0:m.code)===200&&(ce.success(o("opeateSuccess")),y()),s(!0)}),K=()=>{k.value="add",h.value=!0},L=p=>{F=p,k.value="edit",h.value=!0},y=async()=>{r.value=!0;const p={menuName:u.menuName,status:u.status},s=await le(p);if((s==null?void 0:s.code)===200){r.value=!1;const{data:m=[]}=s;B.value++,z.value=D.handleTree(m,"menuId")}else r.value=!1},Y=()=>{y()},j=()=>{E(),y()};return(p,s)=>{const m=i("a-input"),N=i("a-form-item"),G=i("a-select"),_=i("a-button"),R=i("a-form"),$=i("a-card"),W=ae,X=se,Z=ne,q=i("a-popconfirm"),H=i("a-table");return c(),g(T,null,[f("div",_e,[t($,{size:"small"},{default:n(()=>[t(R,{model:u,layout:"inline"},{default:n(()=>[t(N,{label:e(o)("menu.columns.menuName")},{default:n(()=>[t(m,{allowClear:"",value:u.menuName,"onUpdate:value":s[0]||(s[0]=a=>u.menuName=a),valueModifiers:{trim:!0},placeholder:e(o)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(N,{label:e(o)("menu.columns.state")},{default:n(()=>[t(G,{"show-search":"","filter-option":e(U),options:e(w),allowClear:"",placeholder:e(o)("selectTips"),style:{width:"220px"},value:u.status,"onUpdate:value":s[1]||(s[1]=a=>u.status=a)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),t(N,null,{default:n(()=>[f("div",null,[t(_,{loading:e(r),type:"primary",onClick:Y},{default:n(()=>[b(d(e(o)("opts.search")),1)]),_:1},8,["loading"]),t(_,{loading:e(r),class:"ml-1",onClick:j},{default:n(()=>[b(d(e(o)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),f("div",fe,[f("div",null,[t(_,{size:"small",type:"primary",onClick:K},{icon:n(()=>[t(e(ie))]),default:n(()=>[b(" "+d(e(o)("opts.add")),1)]),_:1})]),f("div",null,[t(_,{type:"link",ref:"ref2",shape:"circle"},{default:n(()=>[t(W,{tabKey:"menu-table",value:I.value,"onUpdate:value":s[2]||(s[2]=a=>I.value=a),columns:e(A)},null,8,["value","columns"])]),_:1},512)])]),t($,{size:"small"},{default:n(()=>[f("div",ve,[(c(),C(H,{key:B.value,defaultExpandAllRows:!1,class:"ant-table-striped","row-class-name":(a,l)=>l%2===1?"table-striped":null,bordered:"",size:"small",columns:I.value,"row-key":a=>a.menuId,"data-source":z.value,pagination:!1,loading:e(r),scroll:{y:e(V)}},{bodyCell:n(({column:a,record:l})=>[a.dataIndex==="menuName"?(c(),g("span",ye,d(e(o)(l.menuName)),1)):v("",!0),a.dataIndex==="icon"?(c(),g(T,{key:1},[l!=null&&l.icon?(c(),C(X,{key:0,name:l.icon,width:"12",height:"12"},null,8,["name"])):v("",!0)],64)):v("",!0),a.dataIndex==="status"?(c(),C(Z,{key:2,options:e(w),value:l.status},null,8,["options","value"])):v("",!0),a.dataIndex==="createTime"?(c(),g("span",xe,d(e(ee)(l.createTime)),1)):v("",!0),a.dataIndex==="operation"?(c(),g(T,{key:4},[t(_,{type:"link",size:"small",onClick:J=>L(l)},{default:n(()=>[b(d(e(o)("opts.edit")),1)]),_:2},1032,["onClick"]),t(q,{title:e(o)("sureTips"),"ok-text":e(o)("opts.sure"),"cancel-text":e(o)("opts.cancel"),onConfirm:J=>O(l)},{default:n(()=>[t(_,{type:"link",size:"small",danger:""},{default:n(()=>[b(d(e(o)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):v("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","loading","scroll"]))])]),_:1}),t(oe,{show:h.value,"onUpdate:show":s[3]||(s[3]=a=>h.value=a),status:k.value,"cur-data":e(F),sysNormalDisable:e(w),onSuccess:M},null,8,["show","status","cur-data","sysNormalDisable"])],64)}}});export{Ne as default};
