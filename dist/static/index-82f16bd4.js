import{j as R,$ as l,t as ee,n as te}from"./index-bd69efc7.js";import{i as ae,F as oe,d as ne}from"./formModel-0594e17f.js";import{d as le,f as h,r as S,o as se,W as c,X as v,a0 as b,a1 as y,k as t,Z as n,u as e,G as w,a6 as u,a9 as T,Y as ie,F as B,g as ce}from"./vue-ced722ac.js";import{j as re,m as de}from"./antDesign-1cc9e1c8.js";import"./echarts-de64fab6.js";const ue=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"config.columns.configName",dataIndex:"configName",width:280,ellipsis:!0},{lang:"config.columns.configKey",dataIndex:"configKey",width:230,ellipsis:!0},{lang:"config.columns.configValue",dataIndex:"configValue",width:200,ellipsis:!0},{lang:"config.columns.configType",dataIndex:"configType",width:150,ellipsis:!0},{lang:"config.columns.remark",dataIndex:"remark",ellipsis:!0},{lang:"config.columns.createTime",dataIndex:"createTime",width:150,ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),pe={class:"search-wrapper"},me={class:"ub ub-ac ub-pj top-opt w100"},fe={class:"mt-1 w100",id:"configTable"},ge={key:0},_e={key:2},be=le({__name:"index",setup(F){const{proxy:D}=ce(),{sys_yes_no:k}=D.useDict("sys_yes_no"),{filterOption:V}=te(),{pagination:i,loading:p,scrollY:U}=R(),{columns:M}=ue(),x=h(!1),C=h("add"),N=h([]),I=h([]);let z=S({});const s=S({configName:"",configKey:"",configType:void 0}),Y=()=>{s.configName="",s.configKey="",s.configType=void 0};se(()=>{m()});const $=()=>{m()},j=r=>new Promise(async a=>{const d=await ne({id:r.configId});(d==null?void 0:d.code)===200&&(de.success(l("opeateSuccess")),m()),a(!0)}),A=()=>{C.value="add",x.value=!0},O=r=>{z=r,C.value="edit",x.value=!0},m=async()=>{p.value=!0;const r={configName:s.configName,configKey:s.configKey,configType:s.configType,pageNum:i.current,pageSize:i.pageSize,orderByColumn:"create_time",isAsc:"descending"},a=await ae(r);if((a==null?void 0:a.code)===200){p.value=!1;const{total:d=0,list:f=[]}=a.data;i.total=d,N.value=f}else p.value=!1},P=()=>{i.current=1,m()},E=()=>{i.current=1,Y(),m()},L=r=>{i.current=r.current,i.pageSize=r.pageSize,m()};return(r,a)=>{const d=c("a-input"),f=c("a-form-item"),G=c("a-select"),g=c("a-button"),W=c("a-form"),K=c("a-card"),X=c("fields-setting"),Z=c("dict-tag"),q=c("a-popconfirm"),H=c("a-table");return v(),b(B,null,[y("div",pe,[t(K,{size:"small"},{default:n(()=>[t(W,{model:s,layout:"inline"},{default:n(()=>[t(f,{label:e(l)("config.columns.configName")},{default:n(()=>[t(d,{allowClear:"",value:s.configName,"onUpdate:value":a[0]||(a[0]=o=>s.configName=o),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(f,{label:e(l)("config.columns.configKey")},{default:n(()=>[t(d,{allowClear:"",value:s.configKey,"onUpdate:value":a[1]||(a[1]=o=>s.configKey=o),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(f,{label:e(l)("config.columns.configType")},{default:n(()=>[t(G,{"show-search":"","filter-option":e(V),options:e(k),allowClear:"",placeholder:e(l)("selectTips"),style:{width:"220px"},value:s.configType,"onUpdate:value":a[2]||(a[2]=o=>s.configType=o)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),t(f,null,{default:n(()=>[y("div",null,[t(g,{loading:e(p),type:"primary",onClick:P},{default:n(()=>[w(u(e(l)("opts.search")),1)]),_:1},8,["loading"]),t(g,{loading:e(p),class:"ml-1",onClick:E},{default:n(()=>[w(u(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),y("div",me,[y("div",null,[t(g,{size:"small",type:"primary",onClick:A},{icon:n(()=>[t(e(re))]),default:n(()=>[w(" "+u(e(l)("opts.add")),1)]),_:1})]),y("div",null,[t(g,{type:"link",ref:"ref2",shape:"circle"},{default:n(()=>[t(X,{tabKey:"config-table",value:I.value,"onUpdate:value":a[3]||(a[3]=o=>I.value=o),columns:e(M)},null,8,["value","columns"])]),_:1},512)])]),t(K,{size:"small"},{default:n(()=>[y("div",fe,[t(H,{class:"ant-table-striped","row-class-name":(o,_)=>_%2===1?"table-striped":null,bordered:"",size:"small",columns:I.value,"row-key":o=>o.deptId,"data-source":N.value,pagination:e(i),loading:e(p),scroll:{y:e(U)},onChange:L},{bodyCell:n(({column:o,record:_,index:J})=>[o.dataIndex==="index"?(v(),b("a",ge,u((e(i).current-1)*e(i).pageSize+parseInt(J)+1),1)):T("",!0),o.dataIndex==="configType"?(v(),ie(Z,{key:1,options:e(k),value:_.configType},null,8,["options","value"])):T("",!0),o.dataIndex==="createTime"?(v(),b("span",_e,u(e(ee)(_.createTime)),1)):T("",!0),o.dataIndex==="operation"?(v(),b(B,{key:3},[t(g,{type:"link",size:"small",onClick:Q=>O(_)},{default:n(()=>[w(u(e(l)("opts.edit")),1)]),_:2},1032,["onClick"]),t(q,{title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:Q=>j(_)},{default:n(()=>[t(g,{type:"link",size:"small",danger:""},{default:n(()=>[w(u(e(l)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):T("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),t(oe,{show:x.value,"onUpdate:show":a[4]||(a[4]=o=>x.value=o),status:C.value,"cur-data":e(z),sysYesNo:e(k),onSuccess:$},null,8,["show","status","cur-data","sysYesNo"])],64)}}});export{be as default};
