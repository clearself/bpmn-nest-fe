import{o as le,$ as o,z as oe,A as ne,q as ie,B as ce,C as de}from"./index-BI1T92go.js";import{i as ue,F as re,d as pe}from"./formModel-3KXRfYDY.js";import{h as me,a as _e}from"./antDesign-wbdAq9hh.js";import{d as fe,f as w,r as $,o as ye,W as r,X as p,a0 as h,a1 as x,k as a,Z as l,u as e,G as b,a5 as m,a8 as _,Y as z,F as A,g as ve}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const ge=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"dict.columns.dictName",dataIndex:"dictName",ellipsis:!0},{lang:"dict.columns.dictType",dataIndex:"dictType",ellipsis:!0},{lang:"dict.columns.state",dataIndex:"status",ellipsis:!0},{lang:"dict.columns.createTime",dataIndex:"createTime",ellipsis:!0},{lang:"columns.operation",dataIndex:"operation"}]}),we={class:"search-wrapper"},xe={class:"ub ub-ac ub-pj top-opt w100"},he={class:"mt-1 w100",id:"dictTable"},be={key:0},Te=["onClick"],ke={key:3},Se=fe({__name:"index",setup(M){const{proxy:V}=ve(),{sys_normal_disable:k}=V.useDict("sys_normal_disable"),{filterOption:O}=ne(),{pagination:c,loading:f,scrollY:P}=le(),{columns:E}=ge(),C=w(!1),D=w(""),T=w(!1),I=w("add"),S=w([]),N=w([]);let B=$({});const n=$({dictName:"",dictType:"",status:void 0}),L=()=>{n.dictName="",n.dictType="",n.status=void 0};ye(()=>{y()});const Y=i=>{D.value=i.dictType,C.value=!0},j=()=>{y()},q=i=>new Promise(async s=>{const u=await pe({id:i.dictId});(u==null?void 0:u.code)===200&&(_e.success(o("opeateSuccess")),y()),s(!0)}),G=()=>{I.value="add",T.value=!0},K=async i=>{B=i,I.value="edit",T.value=!0},y=async()=>{f.value=!0;const i={dictName:n.dictName,dictType:n.dictType,status:n.status,pageNum:c.current,pageSize:c.pageSize,orderByColumn:"create_time",isAsc:"descending"},s=await ue(i);if((s==null?void 0:s.code)===200){f.value=!1;const{total:u=0,list:v=[]}=s.data;c.total=u,S.value=v}else f.value=!1},W=()=>{c.current=1,y()},X=()=>{c.current=1,L(),y()},Z=i=>{c.current=i.current,c.pageSize=i.pageSize,y()};return(i,s)=>{const u=r("a-input"),v=r("a-form-item"),H=r("a-select"),g=r("a-button"),J=r("a-form"),F=r("a-card"),Q=ie,R=ce,ee=r("a-popconfirm"),te=r("a-table"),ae=de;return p(),h(A,null,[x("div",we,[a(F,{size:"small"},{default:l(()=>[a(J,{model:n,layout:"inline"},{default:l(()=>[a(v,{label:e(o)("dict.columns.dictName")},{default:l(()=>[a(u,{allowClear:"",value:n.dictName,"onUpdate:value":s[0]||(s[0]=t=>n.dictName=t),valueModifiers:{trim:!0},placeholder:e(o)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(v,{label:e(o)("dict.columns.dictType")},{default:l(()=>[a(u,{allowClear:"",value:n.dictType,"onUpdate:value":s[1]||(s[1]=t=>n.dictType=t),valueModifiers:{trim:!0},placeholder:e(o)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(v,{label:e(o)("dict.columns.state")},{default:l(()=>[a(H,{"show-search":"","filter-option":e(O),options:e(k),allowClear:"",placeholder:e(o)("selectTips"),style:{width:"220px"},value:n.status,"onUpdate:value":s[2]||(s[2]=t=>n.status=t)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),a(v,null,{default:l(()=>[x("div",null,[a(g,{loading:e(f),type:"primary",onClick:W},{default:l(()=>[b(m(e(o)("opts.search")),1)]),_:1},8,["loading"]),a(g,{loading:e(f),class:"ml-1",onClick:X},{default:l(()=>[b(m(e(o)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),x("div",xe,[x("div",null,[a(g,{size:"small",type:"primary",onClick:G},{icon:l(()=>[a(e(me))]),default:l(()=>[b(" "+m(e(o)("opts.add")),1)]),_:1})]),x("div",null,[a(g,{type:"link",ref:"ref2",shape:"circle"},{default:l(()=>[a(Q,{tabKey:"dict-table",value:N.value,"onUpdate:value":s[3]||(s[3]=t=>N.value=t),columns:e(E)},null,8,["value","columns"])]),_:1},512)])]),a(F,{size:"small"},{default:l(()=>[x("div",he,[a(te,{class:"ant-table-striped","row-class-name":(t,d)=>d%2===1?"table-striped":null,bordered:"",size:"small",columns:N.value,"row-key":t=>t.deptId,"data-source":S.value,pagination:e(c),loading:e(f),scroll:{y:e(P)},onChange:Z},{bodyCell:l(({column:t,record:d,index:se})=>[t.dataIndex==="index"?(p(),h("a",be,m((e(c).current-1)*e(c).pageSize+parseInt(se)+1),1)):_("",!0),t.dataIndex==="dictType"?(p(),h("a",{key:1,onClick:U=>Y(d)},m(d.dictType),9,Te)):_("",!0),t.dataIndex==="status"?(p(),z(R,{key:2,options:e(k),value:d.status},null,8,["options","value"])):_("",!0),t.dataIndex==="createTime"?(p(),h("span",ke,m(e(oe)(d.createTime)),1)):_("",!0),t.dataIndex==="operation"?(p(),h(A,{key:4},[d.roleId!==1?(p(),z(g,{key:0,type:"link",size:"small",onClick:U=>K(d)},{default:l(()=>[b(m(e(o)("opts.edit")),1)]),_:2},1032,["onClick"])):_("",!0),a(ee,{title:e(o)("sureTips"),"ok-text":e(o)("opts.sure"),"cancel-text":e(o)("opts.cancel"),onConfirm:U=>q(d)},{default:l(()=>[d.roleId!==1?(p(),z(g,{key:0,type:"link",size:"small",danger:""},{default:l(()=>[b(m(e(o)("opts.delete")),1)]),_:1})):_("",!0)]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):_("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),a(re,{show:T.value,"onUpdate:show":s[4]||(s[4]=t=>T.value=t),status:I.value,"cur-data":e(B),sysNormalDisable:e(k),onSuccess:j},null,8,["show","status","cur-data","sysNormalDisable"]),a(ae,{show:C.value,"onUpdate:show":s[5]||(s[5]=t=>C.value=t),dictType:D.value},null,8,["show","dictType"])],64)}}});export{Se as default};
