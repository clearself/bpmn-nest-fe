import{o as oe,$ as s,p as se,q as ne}from"./index-BI1T92go.js";import{i as ie,F as ce,d as re}from"./formModel-zPheUAHg.js";import{h as ue,a as de}from"./antDesign-wbdAq9hh.js";import{d as pe,f as d,r as V,o as me,W as m,X as I,a0 as U,a1 as u,k as l,Z as n,u as t,G as g,a5 as _,a8 as j,F as A}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const _e=()=>({columns:[{lang:"columns.operation",dataIndex:"operation",fixed:"left",width:120},{lang:"columns.index",dataIndex:"index",fixed:"left",width:50},{lang:"example.table.logisticsCompanyName",dataIndex:"logistics_company",ellipsis:!0,width:200},{lang:"example.table.logisticsMethods",dataIndex:"logistics_method",ellipsis:!0},{lang:"example.table.logisticsTrackingNumber",dataIndex:"logistics_number",ellipsis:!0},{lang:"example.table.deliveryNo",dataIndex:"tracking_no",ellipsis:!0},{lang:"example.table.contacts",dataIndex:"contacts",ellipsis:!0},{lang:"example.table.contactInformation",dataIndex:"contact_phone",ellipsis:!0},{lang:"example.table.licensePlateNumber",dataIndex:"license_plate_number",ellipsis:!0},{lang:"example.table.remark",dataIndex:"remark",ellipsis:!0}]}),fe={class:"search-wrapper"},ge={class:"ub ub-ac ub-pj top-opt w100"},ve={class:"mt-1 w100",id:"logisticsTable"},be={key:0},xe={class:"ub w100 ub-pj ub-ac"},we={class:"ml-2"},Te=pe({__name:"index",setup(E){const{pagination:c,loading:v,scrollY:L}=oe(),{columns:O}=_e(),k=d(null),h=d(null),C=d(null),z=d(0),y=d(!1),$=d(!0),N=d("add"),S=d([]),T=d([]);let P=V({});const a=V({logistics_company:void 0,logistics_method:"",logistics_number:"",tracking_no:"",contacts:"",contact_phone:"",license_plate_number:""}),q=()=>{a.logistics_company=void 0,a.logistics_method="",a.logistics_number="",a.tracking_no="",a.contacts="",a.contact_phone="",a.license_plate_number=""},D=[{title:"数据下拉分页组件 page-select",description:"支持远程模糊搜索并支持分页检索",target:()=>k.value&&k.value.$el,docsUrl:"https://www.flypa.cn/vue-super-ui/docs/fe/vue/page-select.html"},{title:"表格列自定义组件 fields-setting",description:"支持表格列自定义显示/隐藏且可拖动自定义排序，设置可保持记忆，一键重置功能。",target:()=>h.value&&h.value.$el,docsUrl:"https://www.flypa.cn/vue-super-ui/docs/fe/vue/fields-setting.html"},{title:"useTable hooks 封装",description:"增强表格的各种应用场景使用，提高工作效率。",target:()=>C.value&&C.value.$el,docsUrl:"https://www.flypa.cn/vue-super-ui/docs/fe/vue/useTable.html"}],B=i=>{window.open(D[i].docsUrl,"_blank")},G=()=>{$.value=!1};me(()=>{h.value,b()});const K=()=>{b()},R=i=>new Promise(async e=>{const f=await re({id:i.id});(f==null?void 0:f.code)===0&&(de.success(s("opeateSuccess")),b()),e(!0)}),W=()=>{N.value="add",y.value=!0},X=i=>{P=i,N.value="edit",y.value=!0},b=async()=>{v.value=!0;const i={logisticsCompany:a.logistics_company,logisticsMethod:a.logistics_method,logisticsNumber:a.logistics_number,trackingNo:a.tracking_no,contacts:a.contacts,contactPhone:a.contact_phone,licensePlateNumber:a.license_plate_number,pageNum:c.current,pageSize:c.pageSize},e=await ie(i);if((e==null?void 0:e.code)===0){v.value=!1;const{total:f=0,data:r=[]}=e;c.total=f,S.value=r}else v.value=!1},Y=()=>{c.current=1,b()},Z=()=>{c.current=1,q(),b()},H=i=>{c.current=i.current,c.pageSize=i.pageSize,b()};return(i,e)=>{const f=se,r=m("a-form-item"),x=m("a-input"),p=m("a-button"),J=m("a-form"),F=m("a-card"),Q=ne,ee=m("a-popconfirm"),le=m("a-table"),te=m("a-tour");return I(),U(A,null,[u("div",fe,[l(F,{size:"small"},{default:n(()=>[l(J,{model:a,layout:"inline"},{default:n(()=>[l(r,{label:t(s)("example.table.logisticsCompanyName")},{default:n(()=>[l(f,{ref_key:"ref1",ref:k,immediate:"",style:{width:"220px"},fieldNames:{label:"name",value:"id"},api:"logistics/name/dropdown",value:a.logistics_company,"onUpdate:value":e[0]||(e[0]=o=>a.logistics_company=o),placeholder:t(s)("selectTips")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,{label:t(s)("example.table.logisticsMethods")},{default:n(()=>[l(x,{allowClear:"",value:a.logistics_method,"onUpdate:value":e[1]||(e[1]=o=>a.logistics_method=o),placeholder:t(s)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,{label:t(s)("example.table.logisticsTrackingNumber")},{default:n(()=>[l(x,{allowClear:"",value:a.logistics_number,"onUpdate:value":e[2]||(e[2]=o=>a.logistics_number=o),placeholder:t(s)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,{label:t(s)("example.table.deliveryNo")},{default:n(()=>[l(x,{allowClear:"",value:a.tracking_no,"onUpdate:value":e[3]||(e[3]=o=>a.tracking_no=o),placeholder:t(s)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,{label:t(s)("example.table.contacts")},{default:n(()=>[l(x,{allowClear:"",value:a.contacts,"onUpdate:value":e[4]||(e[4]=o=>a.contacts=o),placeholder:t(s)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,{label:t(s)("example.table.contactInformation")},{default:n(()=>[l(x,{allowClear:"",value:a.contact_phone,"onUpdate:value":e[5]||(e[5]=o=>a.contact_phone=o),placeholder:t(s)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,{label:t(s)("example.table.licensePlateNumber")},{default:n(()=>[l(x,{allowClear:"",value:a.license_plate_number,"onUpdate:value":e[6]||(e[6]=o=>a.license_plate_number=o),placeholder:t(s)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),l(r,null,{default:n(()=>[u("div",null,[l(p,{loading:t(v),type:"primary",onClick:Y},{default:n(()=>[g(_(t(s)("opts.search")),1)]),_:1},8,["loading"]),l(p,{loading:t(v),class:"ml-1",onClick:Z},{default:n(()=>[g(_(t(s)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),u("div",ge,[u("div",null,[l(p,{size:"small",type:"primary",onClick:W},{icon:n(()=>[l(t(ue))]),default:n(()=>[g(" "+_(t(s)("opts.add")),1)]),_:1}),l(p,{class:"ml-2",ref_key:"ref3",ref:C,size:"small",type:"primary",onClick:e[7]||(e[7]=o=>B(2))},{default:n(()=>e[11]||(e[11]=[g(" 查看 useTable hooks 封装 ")])),_:1},512)]),u("div",null,[l(p,{type:"link",ref_key:"ref2",ref:h,shape:"circle"},{default:n(()=>[l(Q,{tabKey:"example-table",value:T.value,"onUpdate:value":e[8]||(e[8]=o=>T.value=o),columns:t(O)},null,8,["value","columns"])]),_:1},512)])]),l(F,{size:"small"},{default:n(()=>[u("div",ve,[l(le,{class:"ant-table-striped","row-class-name":(o,w)=>w%2===1?"table-striped":null,bordered:"",size:"small",columns:T.value,"row-key":o=>o.id,"data-source":S.value,pagination:t(c),loading:t(v),scroll:{y:t(L)},onChange:H},{bodyCell:n(({column:o,record:w,index:M})=>[o.dataIndex==="index"?(I(),U("a",be,_((t(c).current-1)*t(c).pageSize+parseInt(M)+1),1)):j("",!0),o.dataIndex==="operation"?(I(),U(A,{key:1},[l(p,{type:"link",size:"small",onClick:ae=>X(w)},{default:n(()=>[g(_(t(s)("opts.edit")),1)]),_:2},1032,["onClick"]),l(ee,{title:t(s)("sureTips"),"ok-text":t(s)("opts.sure"),"cancel-text":t(s)("opts.cancel"),onConfirm:ae=>R(w)},{default:n(()=>[l(p,{type:"link",size:"small",danger:""},{default:n(()=>[g(_(t(s)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):j("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),l(ce,{show:y.value,"onUpdate:show":e[9]||(e[9]=o=>y.value=o),status:N.value,"cur-data":t(P),onSuccess:K},null,8,["show","status","cur-data"]),l(te,{current:z.value,"onUpdate:current":e[10]||(e[10]=o=>z.value=o),open:$.value,steps:D,onClose:G},{indicatorsRender:n(({current:o,total:w})=>[u("div",xe,[u("div",null,[u("span",null,_(o+1)+" / "+_(w),1)]),u("div",we,[l(p,{type:"primary",size:"small",onClick:M=>B(o)},{default:n(()=>e[12]||(e[12]=[g("查看文档")])),_:2},1032,["onClick"])])])]),_:1},8,["current","open"])],64)}}});export{Te as default};
