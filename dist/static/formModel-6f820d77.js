import{r as f,$ as t,n as U,_ as V}from"./index-bd69efc7.js";import{d as B,f as j,r as b,h as q,c as P,W as r,X as y,Y as g,Z as u,k as c,u as l,a0 as R,F as $,a8 as A,G,a6 as L}from"./vue-ced722ac.js";import{m as h}from"./antDesign-1cc9e1c8.js";const K=n=>f({method:"GET",url:"/system/notice/list",params:n}),Q=n=>f({method:"DELETE",url:`/system/notice/${n.id}`}),W=n=>f({method:"POST",url:"/system/notice",data:n}),z=n=>f({method:"PUT",url:"/system/notice",data:n}),X=B({__name:"formModel",props:{show:{type:Boolean,default:!1},status:{type:String,default:"add"},curData:{type:Object,default:()=>{}},sysNormalDisable:{type:Array,default:()=>[]},sysNoticeType:{type:Array,default:()=>[]}},emits:["update:show","success"],setup(n,{emit:w}){const{filterOption:C}=U(),_=w,s=n,T=j(),e=b({noticeId:"",noticeTitle:"",noticeType:void 0,status:"0",noticeContent:""}),k=()=>{e.noticeId="",e.noticeTitle="",e.noticeContent="",e.noticeType=void 0,e.status="0"},v=b({noticeTitle:[{required:!0,message:t("inputTips"),trigger:"blur"}],noticeType:[{required:!0,message:t("inputTips"),trigger:["blur","change"]}]});q(()=>{s.show&&s.status==="edit"&&(e.noticeId=s.curData.noticeId,e.noticeTitle=s.curData.noticeTitle,e.noticeContent=s.curData.noticeContent,e.status=s.curData.status,e.noticeType=s.curData.noticeType)});const p=P({get(){return s.show},set(d){_("update:show",d)}}),x=()=>{k()},D=async()=>{T.value.validate().then(async()=>{var o;const d={noticeTitle:e.noticeTitle,status:e.status,noticeType:e.noticeType,noticeContent:e.noticeContent};if(s.status==="edit"){d.noticeId=(o=s==null?void 0:s.curData)==null?void 0:o.noticeId;const i=await z(d);(i==null?void 0:i.code)===200&&(p.value=!1,h.success(t("opeateSuccess")),_("success"))}else{const i=await W(d);(i==null?void 0:i.code)===200&&(p.value=!1,h.success(t("opeateSuccess")),_("success"))}}).catch(d=>{})};return(d,o)=>{const i=r("a-input"),m=r("a-form-item"),O=r("a-select"),I=r("a-radio"),S=r("a-radio-group"),E=r("editor"),F=r("a-form"),M=r("watermark"),N=r("a-modal");return y(),g(N,{destroyOnClose:"",open:p.value,"onUpdate:open":o[4]||(o[4]=a=>p.value=a),title:n.status==="add"?l(t)("opts.add"):l(t)("opts.edit"),width:"800px",cancelText:l(t)("opts.cancel"),okText:l(t)("opts.sure"),afterClose:x,onOk:D},{default:u(()=>[c(M,null,{default:u(()=>[c(F,{class:"w100",ref_key:"formRef",ref:T,model:e,labelWrap:"",labelCol:{style:{width:"110px"}}},{default:u(()=>[c(m,{label:l(t)("notice.columns.noticeTitle"),name:"noticeTitle",rules:v.noticeTitle},{default:u(()=>[c(i,{allowClear:"",placeholder:l(t)("inputTips"),value:e.noticeTitle,"onUpdate:value":o[0]||(o[0]=a=>e.noticeTitle=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1},8,["label","rules"]),c(m,{label:l(t)("notice.columns.noticeType"),name:"noticeType",rules:v.noticeType},{default:u(()=>[c(O,{"show-search":"","filter-option":l(C),options:n.sysNoticeType,allowClear:"",placeholder:l(t)("selectTips"),value:e.noticeType,"onUpdate:value":o[1]||(o[1]=a=>e.noticeType=a)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label","rules"]),c(m,{label:l(t)("notice.columns.state")},{default:u(()=>[c(S,{value:e.status,"onUpdate:value":o[2]||(o[2]=a=>e.status=a),name:"noticeState"},{default:u(()=>[(y(!0),R($,null,A(n.sysNormalDisable,a=>(y(),g(I,{key:a.value,value:a.value},{default:u(()=>[G(L(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),c(m,{label:l(t)("notice.columns.noticeContent")},{default:u(()=>[c(E,{modelValue:e.noticeContent,"onUpdate:modelValue":o[3]||(o[3]=a=>e.noticeContent=a),"min-height":192},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["open","title","cancelText","okText"])}}});const Y=V(X,[["__scopeId","data-v-c58913f5"]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Y as F,Q as d,ee as f,K as i};
