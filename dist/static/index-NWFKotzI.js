import{$ as d,A as D,h as F,d as L}from"./index-BI1T92go.js";import{d as j,r as q,c as E,f as g,w as G,W as p,X as I,a0 as R,k as a,Z as o,u as i,a1 as S,G as k,a5 as x}from"./vue-CuEiQHfR.js";import"./antDesign-wbdAq9hh.js";import"./echarts-DSOc99Qa.js";const W={class:"filter-modal-wrapper"},X={class:"ub w100 ub-ac ub-pc opts"},Z=j({__name:"index",props:{show:{type:Boolean,default:!1},task:{require:!0,type:Object,default:()=>{}}},emits:["update:show","success"],setup(m,{expose:C,emit:y}){const{filterOption:_}=D(),c=y,u=m,B=t=>`${t}%`,e=q({progress:0,status:void 0,users:[]}),v=E({get(){return u.show},set(t){c("update:show",t)}}),O=g([{value:0,label:"正常"},{value:1,label:"未开始"},{value:2,label:"已完成"},{value:3,label:"进行中"},{value:4,label:"逾期"}]),b=g([{value:1,label:"张三"},{value:2,label:"李四"},{value:3,label:"王五"},{value:4,label:"赫六"}]);G(()=>u.show,t=>{var s,l;t?(e.progress=u.task.progress*100,e.status=((s=u.task)==null?void 0:s.status)??void 0,e.users=(l=u.task)!=null&&l.users?u.task.users.map(r=>r.value):[]):f()});const f=()=>{e.progress=0,e.status=void 0,e.users=[]},V=()=>{c("update:show",!1),f()},U=()=>{const t={};t.progress=e.progress/100,t.status=e.status,t.users=e.users.map(s=>{var l;return{value:s,label:(l=b.value.find(r=>r.value===s))==null?void 0:l.label}}),c("success",t),c("update:show",!1)},$=t=>{t||(e.progress=0,e.status=void 0,e.users=[])};return C({resetForm:f}),(t,s)=>{const l=p("a-slider"),r=p("a-form-item"),h=p("a-select"),N=p("a-form"),w=p("a-button"),T=F,A=p("a-drawer");return I(),R("div",W,[a(A,{open:v.value,"onUpdate:open":s[3]||(s[3]=n=>v.value=n),title:m.task.text,width:"400px",placement:"right",onAfterOpenChange:$},{default:o(()=>[a(T,{class:"h100"},{default:o(()=>[a(N,{model:e,layout:"vertical"},{default:o(()=>[a(r,{label:"进度"},{default:o(()=>[a(l,{value:e.progress,"onUpdate:value":s[0]||(s[0]=n=>e.progress=n),"tip-formatter":B},null,8,["value"])]),_:1}),a(r,{label:"状态"},{default:o(()=>[a(h,{"show-search":"","filter-option":i(_),options:O.value,allowClear:"",placeholder:i(d)("selectTips"),value:e.status,"onUpdate:value":s[1]||(s[1]=n=>e.status=n)},null,8,["filter-option","options","placeholder","value"])]),_:1}),a(r,{label:"指派人"},{default:o(()=>[a(h,{"show-search":"",mode:"multiple","filter-option":i(_),options:b.value,allowClear:"",placeholder:i(d)("selectTips"),value:e.users,"onUpdate:value":s[2]||(s[2]=n=>e.users=n)},null,8,["filter-option","options","placeholder","value"])]),_:1})]),_:1},8,["model"]),S("div",X,[a(w,{class:"mr-3",onClick:V},{default:o(()=>[k(x(i(d)("opts.cancel")),1)]),_:1}),a(w,{type:"primary",onClick:U},{default:o(()=>[k(x(i(d)("opts.sure")),1)]),_:1})])]),_:1})]),_:1},8,["open","title"])])}}}),M=L(Z,[["__scopeId","data-v-c4fbde0a"]]);export{M as default};
