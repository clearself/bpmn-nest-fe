import{o as R,$ as l,z as ee,A as ae,q as te,B as oe}from"./index-BI1T92go.js";import{i as ne,F as le,d as se}from"./formModel-5fVzJDCe.js";import{h as ie,a as ce}from"./antDesign-wbdAq9hh.js";import{d as re,f as x,r as S,o as ue,W as u,X as v,a0 as b,a1 as y,k as a,Z as n,u as e,G as w,a5 as d,a8 as T,Y as de,F as B,g as pe}from"./vue-CuEiQHfR.js";import"./echarts-DSOc99Qa.js";const me=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"config.columns.configName",dataIndex:"configName",width:280,ellipsis:!0},{lang:"config.columns.configKey",dataIndex:"configKey",width:230,ellipsis:!0},{lang:"config.columns.configValue",dataIndex:"configValue",width:200,ellipsis:!0},{lang:"config.columns.configType",dataIndex:"configType",width:150,ellipsis:!0},{lang:"config.columns.remark",dataIndex:"remark",ellipsis:!0},{lang:"config.columns.createTime",dataIndex:"createTime",width:150,ellipsis:!0},{lang:"columns.operation",dataIndex:"operation",width:120}]}),fe={class:"search-wrapper"},ge={class:"ub ub-ac ub-pj top-opt w100"},_e={class:"mt-1 w100",id:"configTable"},ye={key:0},ve={key:2},ke=re({__name:"index",setup(F){const{proxy:D}=pe(),{sys_yes_no:k}=D.useDict("sys_yes_no"),{filterOption:V}=ae(),{pagination:i,loading:p,scrollY:U}=R(),{columns:$}=me(),h=x(!1),C=x("add"),N=x([]),I=x([]);let z=S({});const s=S({configName:"",configKey:"",configType:void 0}),A=()=>{s.configName="",s.configKey="",s.configType=void 0};ue(()=>{m()});const M=()=>{m()},Y=c=>new Promise(async t=>{const r=await se({id:c.configId});(r==null?void 0:r.code)===200&&(ce.success(l("opeateSuccess")),m()),t(!0)}),O=()=>{C.value="add",h.value=!0},P=c=>{z=c,C.value="edit",h.value=!0},m=async()=>{p.value=!0;const c={configName:s.configName,configKey:s.configKey,configType:s.configType,pageNum:i.current,pageSize:i.pageSize,orderByColumn:"create_time",isAsc:"descending"},t=await ne(c);if((t==null?void 0:t.code)===200){p.value=!1;const{total:r=0,list:f=[]}=t.data;i.total=r,N.value=f}else p.value=!1},E=()=>{i.current=1,m()},L=()=>{i.current=1,A(),m()},j=c=>{i.current=c.current,i.pageSize=c.pageSize,m()};return(c,t)=>{const r=u("a-input"),f=u("a-form-item"),q=u("a-select"),g=u("a-button"),G=u("a-form"),K=u("a-card"),W=te,X=oe,Z=u("a-popconfirm"),H=u("a-table");return v(),b(B,null,[y("div",fe,[a(K,{size:"small"},{default:n(()=>[a(G,{model:s,layout:"inline"},{default:n(()=>[a(f,{label:e(l)("config.columns.configName")},{default:n(()=>[a(r,{allowClear:"",value:s.configName,"onUpdate:value":t[0]||(t[0]=o=>s.configName=o),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(f,{label:e(l)("config.columns.configKey")},{default:n(()=>[a(r,{allowClear:"",value:s.configKey,"onUpdate:value":t[1]||(t[1]=o=>s.configKey=o),valueModifiers:{trim:!0},placeholder:e(l)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(f,{label:e(l)("config.columns.configType")},{default:n(()=>[a(q,{"show-search":"","filter-option":e(V),options:e(k),allowClear:"",placeholder:e(l)("selectTips"),style:{width:"220px"},value:s.configType,"onUpdate:value":t[2]||(t[2]=o=>s.configType=o)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),a(f,null,{default:n(()=>[y("div",null,[a(g,{loading:e(p),type:"primary",onClick:E},{default:n(()=>[w(d(e(l)("opts.search")),1)]),_:1},8,["loading"]),a(g,{loading:e(p),class:"ml-1",onClick:L},{default:n(()=>[w(d(e(l)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),y("div",ge,[y("div",null,[a(g,{size:"small",type:"primary",onClick:O},{icon:n(()=>[a(e(ie))]),default:n(()=>[w(" "+d(e(l)("opts.add")),1)]),_:1})]),y("div",null,[a(g,{type:"link",ref:"ref2",shape:"circle"},{default:n(()=>[a(W,{tabKey:"config-table",value:I.value,"onUpdate:value":t[3]||(t[3]=o=>I.value=o),columns:e($)},null,8,["value","columns"])]),_:1},512)])]),a(K,{size:"small"},{default:n(()=>[y("div",_e,[a(H,{class:"ant-table-striped","row-class-name":(o,_)=>_%2===1?"table-striped":null,bordered:"",size:"small",columns:I.value,"row-key":o=>o.deptId,"data-source":N.value,pagination:e(i),loading:e(p),scroll:{y:e(U)},onChange:j},{bodyCell:n(({column:o,record:_,index:J})=>[o.dataIndex==="index"?(v(),b("a",ye,d((e(i).current-1)*e(i).pageSize+parseInt(J)+1),1)):T("",!0),o.dataIndex==="configType"?(v(),de(X,{key:1,options:e(k),value:_.configType},null,8,["options","value"])):T("",!0),o.dataIndex==="createTime"?(v(),b("span",ve,d(e(ee)(_.createTime)),1)):T("",!0),o.dataIndex==="operation"?(v(),b(B,{key:3},[a(g,{type:"link",size:"small",onClick:Q=>P(_)},{default:n(()=>[w(d(e(l)("opts.edit")),1)]),_:2},1032,["onClick"]),a(Z,{title:e(l)("sureTips"),"ok-text":e(l)("opts.sure"),"cancel-text":e(l)("opts.cancel"),onConfirm:Q=>Y(_)},{default:n(()=>[a(g,{type:"link",size:"small",danger:""},{default:n(()=>[w(d(e(l)("opts.delete")),1)]),_:1})]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):T("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),a(le,{show:h.value,"onUpdate:show":t[4]||(t[4]=o=>h.value=o),status:C.value,"cur-data":e(z),sysYesNo:e(k),onSuccess:M},null,8,["show","status","cur-data","sysYesNo"])],64)}}});export{ke as default};
