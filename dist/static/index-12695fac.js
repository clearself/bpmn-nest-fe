import{$ as d,l as F,_ as L}from"./index-8bef1c81.js";import{d as j,r as q,c as A,f as g,w as E,W as u,X as G,a0 as I,k as a,Z as o,u as i,a1 as R,G as k,a5 as x}from"./vue-d39115fd.js";import"./antDesign-5cb4b61a.js";import"./echarts-de64fab6.js";const S={class:"filter-modal-wrapper"},W={class:"ub w100 ub-ac ub-pc opts"},X=j({__name:"index",props:{show:{type:Boolean,default:!1},task:{require:!0,type:Object,default:()=>{}}},emits:["update:show","success"],setup(_,{expose:C,emit:y}){const{filterOption:f}=F(),c=y,p=_,B=s=>`${s}%`,e=q({progress:0,status:void 0,users:[]}),v=A({get(){return p.show},set(s){c("update:show",s)}}),O=g([{value:0,label:"正常"},{value:1,label:"未开始"},{value:2,label:"已完成"},{value:3,label:"进行中"},{value:4,label:"逾期"}]),b=g([{value:1,label:"张三"},{value:2,label:"李四"},{value:3,label:"王五"},{value:4,label:"赫六"}]);E(()=>p.show,s=>{var t,l;s?(e.progress=p.task.progress*100,e.status=((t=p.task)==null?void 0:t.status)??void 0,e.users=(l=p.task)!=null&&l.users?p.task.users.map(r=>r.value):[]):m()});const m=()=>{e.progress=0,e.status=void 0,e.users=[]},V=()=>{c("update:show",!1),m()},U=()=>{const s={};s.progress=e.progress/100,s.status=e.status,s.users=e.users.map(t=>{var l;return{value:t,label:(l=b.value.find(r=>r.value===t))==null?void 0:l.label}}),c("success",s),c("update:show",!1)},N=s=>{s||(e.progress=0,e.status=void 0,e.users=[])};return C({resetForm:m}),(s,t)=>{const l=u("a-slider"),r=u("a-form-item"),w=u("a-select"),T=u("a-form"),h=u("a-button"),$=u("watermark"),D=u("a-drawer");return G(),I("div",S,[a(D,{open:v.value,"onUpdate:open":t[3]||(t[3]=n=>v.value=n),title:_.task.text,width:"400px",placement:"right",onAfterOpenChange:N},{default:o(()=>[a($,{class:"h100"},{default:o(()=>[a(T,{model:e,layout:"vertical"},{default:o(()=>[a(r,{label:"进度"},{default:o(()=>[a(l,{value:e.progress,"onUpdate:value":t[0]||(t[0]=n=>e.progress=n),"tip-formatter":B},null,8,["value"])]),_:1}),a(r,{label:"状态"},{default:o(()=>[a(w,{"show-search":"","filter-option":i(f),options:O.value,allowClear:"",placeholder:i(d)("selectTips"),value:e.status,"onUpdate:value":t[1]||(t[1]=n=>e.status=n)},null,8,["filter-option","options","placeholder","value"])]),_:1}),a(r,{label:"指派人"},{default:o(()=>[a(w,{"show-search":"",mode:"multiple","filter-option":i(f),options:b.value,allowClear:"",placeholder:i(d)("selectTips"),value:e.users,"onUpdate:value":t[2]||(t[2]=n=>e.users=n)},null,8,["filter-option","options","placeholder","value"])]),_:1})]),_:1},8,["model"]),R("div",W,[a(h,{class:"mr-3",onClick:V},{default:o(()=>[k(x(i(d)("opts.cancel")),1)]),_:1}),a(h,{type:"primary",onClick:U},{default:o(()=>[k(x(i(d)("opts.sure")),1)]),_:1})])]),_:1})]),_:1},8,["open","title"])])}}});const K=L(X,[["__scopeId","data-v-c4fbde0a"]]);export{K as default};
