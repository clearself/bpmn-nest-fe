import{j as le,$ as o,t as oe,l as ne}from"./index-8bef1c81.js";import{i as ie,F as ce,d as de}from"./formModel-fb81881f.js";import{d as ue,f as w,r as $,o as re,W as c,X as p,a0 as b,a1 as x,k as a,Z as l,u as e,G as h,a5 as m,a8 as _,Y as D,F as M,g as pe}from"./vue-d39115fd.js";import{i as me,m as _e}from"./antDesign-5cb4b61a.js";import"./echarts-de64fab6.js";const ve=()=>({columns:[{lang:"columns.index",dataIndex:"index",width:50},{lang:"dict.columns.dictName",dataIndex:"dictName",ellipsis:!0},{lang:"dict.columns.dictType",dataIndex:"dictType",ellipsis:!0},{lang:"dict.columns.state",dataIndex:"status",ellipsis:!0},{lang:"dict.columns.createTime",dataIndex:"createTime",ellipsis:!0},{lang:"columns.operation",dataIndex:"operation"}]}),fe={class:"search-wrapper"},ye={class:"ub ub-ac ub-pj top-opt w100"},ge={class:"mt-1 w100",id:"dictTable"},we={key:0},xe=["onClick"],be={key:3},Ne=ue({__name:"index",setup(V){const{proxy:A}=pe(),{sys_normal_disable:k}=A.useDict("sys_normal_disable"),{filterOption:O}=ne(),{pagination:d,loading:v,scrollY:P}=le(),{columns:j}=ve(),C=w(!1),z=w(""),T=w(!1),I=w("add"),S=w([]),N=w([]);let B=$({});const n=$({dictName:"",dictType:"",status:void 0}),E=()=>{n.dictName="",n.dictType="",n.status=void 0};re(()=>{f()});const L=i=>{z.value=i.dictType,C.value=!0},Y=()=>{f()},G=i=>new Promise(async s=>{const r=await de({id:i.dictId});(r==null?void 0:r.code)===200&&(_e.success(o("opeateSuccess")),f()),s(!0)}),K=()=>{I.value="add",T.value=!0},W=async i=>{B=i,I.value="edit",T.value=!0},f=async()=>{v.value=!0;const i={dictName:n.dictName,dictType:n.dictType,status:n.status,pageNum:d.current,pageSize:d.pageSize,orderByColumn:"create_time",isAsc:"descending"},s=await ie(i);if((s==null?void 0:s.code)===200){v.value=!1;const{total:r=0,list:y=[]}=s.data;d.total=r,S.value=y}else v.value=!1},X=()=>{d.current=1,f()},Z=()=>{d.current=1,E(),f()},q=i=>{d.current=i.current,d.pageSize=i.pageSize,f()};return(i,s)=>{const r=c("a-input"),y=c("a-form-item"),H=c("a-select"),g=c("a-button"),J=c("a-form"),F=c("a-card"),Q=c("fields-setting"),R=c("dict-tag"),ee=c("a-popconfirm"),te=c("a-table"),ae=c("DictData");return p(),b(M,null,[x("div",fe,[a(F,{size:"small"},{default:l(()=>[a(J,{model:n,layout:"inline"},{default:l(()=>[a(y,{label:e(o)("dict.columns.dictName")},{default:l(()=>[a(r,{allowClear:"",value:n.dictName,"onUpdate:value":s[0]||(s[0]=t=>n.dictName=t),valueModifiers:{trim:!0},placeholder:e(o)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(y,{label:e(o)("dict.columns.dictType")},{default:l(()=>[a(r,{allowClear:"",value:n.dictType,"onUpdate:value":s[1]||(s[1]=t=>n.dictType=t),valueModifiers:{trim:!0},placeholder:e(o)("inputTips"),style:{width:"220px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),a(y,{label:e(o)("dict.columns.state")},{default:l(()=>[a(H,{"show-search":"","filter-option":e(O),options:e(k),allowClear:"",placeholder:e(o)("selectTips"),style:{width:"220px"},value:n.status,"onUpdate:value":s[2]||(s[2]=t=>n.status=t)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label"]),a(y,null,{default:l(()=>[x("div",null,[a(g,{loading:e(v),type:"primary",onClick:X},{default:l(()=>[h(m(e(o)("opts.search")),1)]),_:1},8,["loading"]),a(g,{loading:e(v),class:"ml-1",onClick:Z},{default:l(()=>[h(m(e(o)("opts.reset")),1)]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])]),_:1})]),x("div",ye,[x("div",null,[a(g,{size:"small",type:"primary",onClick:K},{icon:l(()=>[a(e(me))]),default:l(()=>[h(" "+m(e(o)("opts.add")),1)]),_:1})]),x("div",null,[a(g,{type:"link",ref:"ref2",shape:"circle"},{default:l(()=>[a(Q,{tabKey:"dict-table",value:N.value,"onUpdate:value":s[3]||(s[3]=t=>N.value=t),columns:e(j)},null,8,["value","columns"])]),_:1},512)])]),a(F,{size:"small"},{default:l(()=>[x("div",ge,[a(te,{class:"ant-table-striped","row-class-name":(t,u)=>u%2===1?"table-striped":null,bordered:"",size:"small",columns:N.value,"row-key":t=>t.deptId,"data-source":S.value,pagination:e(d),loading:e(v),scroll:{y:e(P)},onChange:q},{bodyCell:l(({column:t,record:u,index:se})=>[t.dataIndex==="index"?(p(),b("a",we,m((e(d).current-1)*e(d).pageSize+parseInt(se)+1),1)):_("",!0),t.dataIndex==="dictType"?(p(),b("a",{key:1,onClick:U=>L(u)},m(u.dictType),9,xe)):_("",!0),t.dataIndex==="status"?(p(),D(R,{key:2,options:e(k),value:u.status},null,8,["options","value"])):_("",!0),t.dataIndex==="createTime"?(p(),b("span",be,m(e(oe)(u.createTime)),1)):_("",!0),t.dataIndex==="operation"?(p(),b(M,{key:4},[u.roleId!==1?(p(),D(g,{key:0,type:"link",size:"small",onClick:U=>W(u)},{default:l(()=>[h(m(e(o)("opts.edit")),1)]),_:2},1032,["onClick"])):_("",!0),a(ee,{title:e(o)("sureTips"),"ok-text":e(o)("opts.sure"),"cancel-text":e(o)("opts.cancel"),onConfirm:U=>G(u)},{default:l(()=>[u.roleId!==1?(p(),D(g,{key:0,type:"link",size:"small",danger:""},{default:l(()=>[h(m(e(o)("opts.delete")),1)]),_:1})):_("",!0)]),_:2},1032,["title","ok-text","cancel-text","onConfirm"])],64)):_("",!0)]),_:1},8,["row-class-name","columns","row-key","data-source","pagination","loading","scroll"])])]),_:1}),a(ce,{show:T.value,"onUpdate:show":s[4]||(s[4]=t=>T.value=t),status:I.value,"cur-data":e(B),sysNormalDisable:e(k),onSuccess:Y},null,8,["show","status","cur-data","sysNormalDisable"]),a(ae,{show:C.value,"onUpdate:show":s[5]||(s[5]=t=>C.value=t),dictType:z.value},null,8,["show","dictType"])],64)}}});export{Ne as default};
