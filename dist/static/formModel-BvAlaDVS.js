import{r as f,$ as t,y as V,B,f as M,b as $}from"./index-BeIH9SCz.js";import{a as b}from"./antDesign-CdRSJcA9.js";import{d as j,f as q,r as h,h as P,c as R,W as d,X as y,Y as w,Z as r,k as i,u as l,a0 as A,F as G,a7 as L,G as W,a5 as z}from"./vue-CuEiQHfR.js";const ee=n=>f({method:"GET",url:"/system/notice/list",params:n}),te=n=>f({method:"DELETE",url:`/system/notice/${n.id}`}),X=n=>f({method:"POST",url:"/system/notice",data:n}),Y=n=>f({method:"PUT",url:"/system/notice",data:n}),Z=j({__name:"formModel",props:{show:{type:Boolean,default:!1},status:{type:String,default:"add"},curData:{type:Object,default:()=>{}},sysNormalDisable:{type:Array,default:()=>[]},sysNoticeType:{type:Array,default:()=>[]}},emits:["update:show","success"],setup(n,{emit:C}){const{filterOption:g}=V(),T=C,s=n,_=q(),e=h({noticeId:"",noticeTitle:"",noticeType:void 0,status:"0",noticeContent:""}),D=()=>{e.noticeId="",e.noticeTitle="",e.noticeContent="",e.noticeType=void 0,e.status="0"},v=h({noticeTitle:[{required:!0,message:t("inputTips"),trigger:"blur"}],noticeType:[{required:!0,message:t("inputTips"),trigger:["blur","change"]}]});P(()=>{s.show&&s.status==="edit"&&(e.noticeId=s.curData.noticeId,e.noticeTitle=s.curData.noticeTitle,e.noticeContent=s.curData.noticeContent,e.status=s.curData.status,e.noticeType=s.curData.noticeType)});const p=R({get(){return s.show},set(u){T("update:show",u)}}),k=()=>{D()},x=async()=>{_.value.validate().then(async()=>{var o;const u={noticeTitle:e.noticeTitle,status:e.status,noticeType:e.noticeType,noticeContent:e.noticeContent};if(s.status==="edit"){u.noticeId=(o=s==null?void 0:s.curData)==null?void 0:o.noticeId;const c=await Y(u);(c==null?void 0:c.code)===200&&(p.value=!1,b.success(t("opeateSuccess")),T("success"))}else{const c=await X(u);(c==null?void 0:c.code)===200&&(p.value=!1,b.success(t("opeateSuccess")),T("success"))}}).catch(u=>{})};return(u,o)=>{const c=d("a-input"),m=d("a-form-item"),O=d("a-select"),I=d("a-radio"),S=d("a-radio-group"),E=B,F=d("a-form"),N=M,U=d("a-modal");return y(),w(U,{destroyOnClose:"",open:p.value,"onUpdate:open":o[4]||(o[4]=a=>p.value=a),title:n.status==="add"?l(t)("opts.add"):l(t)("opts.edit"),width:"800px",cancelText:l(t)("opts.cancel"),okText:l(t)("opts.sure"),afterClose:k,onOk:x},{default:r(()=>[i(N,null,{default:r(()=>[i(F,{class:"w100",ref_key:"formRef",ref:_,model:e,labelWrap:"",labelCol:{style:{width:"110px"}}},{default:r(()=>[i(m,{label:l(t)("notice.columns.noticeTitle"),name:"noticeTitle",rules:v.noticeTitle},{default:r(()=>[i(c,{allowClear:"",placeholder:l(t)("inputTips"),value:e.noticeTitle,"onUpdate:value":o[0]||(o[0]=a=>e.noticeTitle=a),valueModifiers:{trim:!0}},null,8,["placeholder","value"])]),_:1},8,["label","rules"]),i(m,{label:l(t)("notice.columns.noticeType"),name:"noticeType",rules:v.noticeType},{default:r(()=>[i(O,{"show-search":"","filter-option":l(g),options:n.sysNoticeType,allowClear:"",placeholder:l(t)("selectTips"),value:e.noticeType,"onUpdate:value":o[1]||(o[1]=a=>e.noticeType=a)},null,8,["filter-option","options","placeholder","value"])]),_:1},8,["label","rules"]),i(m,{label:l(t)("notice.columns.state")},{default:r(()=>[i(S,{value:e.status,"onUpdate:value":o[2]||(o[2]=a=>e.status=a),name:"noticeState"},{default:r(()=>[(y(!0),A(G,null,L(n.sysNormalDisable,a=>(y(),w(I,{key:a.value,value:a.value},{default:r(()=>[W(z(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1},8,["label"]),i(m,{label:l(t)("notice.columns.noticeContent")},{default:r(()=>[i(E,{modelValue:e.noticeContent,"onUpdate:modelValue":o[3]||(o[3]=a=>e.noticeContent=a),"min-height":192},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["open","title","cancelText","okText"])}}}),H=$(Z,[["__scopeId","data-v-c58913f5"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as F,te as d,oe as f,ee as i};
